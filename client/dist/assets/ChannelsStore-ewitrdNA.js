import{K as d,cm as C,U as g,N as T,u as j}from"./index-BlVWs5Jy.js";class x{static getChannelType(e){return e.length<=4?"GR":"BS"}static getChannelForceType(e){return e===null?"normal":e>=500?"festival":e>=200?"so-many":e>=100?"many":"normal"}static getChannelHashtag(e){const s={NHKç·åˆ:"#nhk",NHKEãƒ†ãƒ¬:"#etv",HBC:"#hbc",æœ­å¹Œãƒ†ãƒ¬ãƒ“:"#stv",HTB:"#htv",TVh:"#tvh",åŒ—æµ·é“æ–‡åŒ–æ”¾é€:"#uhb",RABé’æ£®æ”¾é€:"#rab",é’æ£®æœæ—¥æ”¾é€:"#aba",ATVé’æ£®ãƒ†ãƒ¬ãƒ“:"#atv",ãƒ†ãƒ¬ãƒ“å²©æ‰‹:"#tvi",å²©æ‰‹æœæ—¥ãƒ†ãƒ¬ãƒ“:"#iat",IBCãƒ†ãƒ¬ãƒ“:"#ibc",ã‚ã‚“ã“ã„ãƒ†ãƒ¬ãƒ“:"#mit",TBCãƒ†ãƒ¬ãƒ“:"#tbc",ãƒŸãƒ¤ã‚®ãƒ†ãƒ¬ãƒ“:"#mmt",æ±æ—¥æœ¬æ”¾é€:"#khb",ä»™å°æ”¾é€:"#oxtv",ABSç§‹ç”°æ”¾é€:"#abs",ç§‹ç”°æœæ—¥æ”¾é€:"#aab",AKTç§‹ç”°ãƒ†ãƒ¬ãƒ“:"#akt",å±±å½¢æ”¾é€:"#ybc",å±±å½¢ãƒ†ãƒ¬ãƒ“:"#yts",TUY:"#tuy",ã•ãã‚‰ã‚“ã¼ãƒ†ãƒ¬ãƒ“:"#say",ç¦å³¶ä¸­å¤®ãƒ†ãƒ¬ãƒ“:"#fct",KFBç¦å³¶æ”¾é€:"#kfb",ãƒ†ãƒ¬ãƒ“ãƒ¦ãƒ¼ç¦å³¶:"#tuf",FTVç¦å³¶ãƒ†ãƒ¬ãƒ“:"#ftv",TeNY:"#TeNY",æ–°æ½Ÿãƒ†ãƒ¬ãƒ“21:"#uxtv",BSN:"#bsn",NST:"#nst",KNBãƒ†ãƒ¬ãƒ“:"#knb",ãƒãƒ¥ãƒ¼ãƒªãƒƒãƒ—ãƒ†ãƒ¬ãƒ“:"#tut",å¯Œå±±ãƒ†ãƒ¬ãƒ“æ”¾é€:"#toyamatv",ãƒ†ãƒ¬ãƒ“é‡‘æ²¢:"#tv_kanazawa",HAB:"#hab",MRO:"#mro",çŸ³å·ãƒ†ãƒ¬ãƒ“:"#ishikawatv",ç¦äº•æ”¾é€:"#fbc",ç¦äº•ãƒ†ãƒ¬ãƒ“:"#fukuitv",å±±æ¢¨æ”¾é€:"#ybs",UTYãƒ†ãƒ¬ãƒ“å±±æ¢¨:"#uty",ãƒ†ãƒ¬ãƒ“ä¿¡å·:"#tsb",é•·é‡æœæ—¥æ”¾é€:"#abn",SBCä¿¡è¶Šæ”¾é€:"#sbc",é•·é‡æ”¾é€:"#nbs","Daiichi-TV":"#sdt",é™å²¡æœæ—¥ãƒ†ãƒ¬ãƒ“:"#satv",SBS:"#sbs",ãƒ†ãƒ¬ãƒ“é™å²¡:"#sut",ä¸‰é‡ãƒ†ãƒ¬ãƒ“:"#mietv",ããµãƒãƒ£ãƒ³:"#gifuchan",BBCã³ã‚æ¹–æ”¾é€:"#BBC_biwako",å¥ˆè‰¯ãƒ†ãƒ¬ãƒ“:"#tvn",WTV:"#telewaka",RNCè¥¿æ—¥æœ¬ãƒ†ãƒ¬ãƒ“:"#rnc",ç€¬æˆ¸å†…æµ·æ”¾é€:"#ksb",RSKãƒ†ãƒ¬ãƒ“:"#rsk",TSCãƒ†ãƒ¬ãƒ“ã›ã¨ã†ã¡:"#tvsetouchi",OHK:"#ohk",RCCãƒ†ãƒ¬ãƒ“:"#rcc",åºƒå³¶ãƒ†ãƒ¬ãƒ“:"#htv",åºƒå³¶ãƒ›ãƒ¼ãƒ ãƒ†ãƒ¬ãƒ“:"#hometv",ãƒ†ãƒ¬ãƒ“æ–°åºƒå³¶:"#tss",æ—¥æœ¬æµ·ãƒ†ãƒ¬ãƒ“:"#nkt",BSSãƒ†ãƒ¬ãƒ“:"#bss",ã•ã‚“ã„ã‚“ä¸­å¤®ãƒ†ãƒ¬ãƒ“:"#tsk",tysãƒ†ãƒ¬ãƒ“å±±å£:"#tys",å±±å£æ”¾é€:"#kry",yabå±±å£æœæ—¥:"#yab",å››å›½æ”¾é€:"#jrt",é«˜çŸ¥æ”¾é€:"#rkc",ãƒ†ãƒ¬ãƒ“é«˜çŸ¥:"#kutv",é«˜çŸ¥ã•ã‚“ã•ã‚“ãƒ†ãƒ¬ãƒ“:"#kss",å—æµ·æ”¾é€:"#rnb",æ„›åª›æœæ—¥ãƒ†ãƒ¬ãƒ“:"#eat",ã‚ã„ãƒ†ãƒ¬ãƒ“:"#itv",ãƒ†ãƒ¬ãƒ“æ„›åª›:"#ebc",KBCãƒ†ãƒ¬ãƒ“:"#kbc",RKBæ¯æ—¥æ”¾é€:"#rkb",FBSç¦å²¡æ”¾é€:"#fbs",TVQä¹å·æ”¾é€:"#tvq",ãƒ†ãƒ¬ãƒ“è¥¿æ—¥æœ¬:"#tnc",STSã‚µã‚¬ãƒ†ãƒ¬ãƒ“:"#sagatv",NBCé•·å´æ”¾é€:"#nbc",é•·å´å›½éš›ãƒ†ãƒ¬ãƒ“:"#nib",NCCé•·å´æ–‡åŒ–æ”¾é€:"#ncc",ãƒ†ãƒ¬ãƒ“é•·å´:"#ktn",RKKç†Šæœ¬æ”¾é€:"#rkk",ãã¾ã‚‚ã¨çœŒæ°‘:"#kkt",KABç†Šæœ¬æœæ—¥æ”¾é€:"#kab",ãƒ†ãƒ¬ãƒ“ç†Šæœ¬:"#tku",OBSå¤§åˆ†æ”¾é€:"#obs",TOSãƒ†ãƒ¬ãƒ“å¤§åˆ†:"#tos",OABå¤§åˆ†æœæ—¥æ”¾é€:"#oab",MRTå®®å´æ”¾é€:"#mrt",ãƒ†ãƒ¬ãƒ“å®®å´:"#umk",MBCå—æ—¥æœ¬æ”¾é€:"#mbc",é¹¿å…å³¶è®€è³£ãƒ†ãƒ¬ãƒ“:"#kyt",KKBé¹¿å…å³¶æ”¾é€:"#kkb",é¹¿å…å³¶ãƒ†ãƒ¬ãƒ“æ”¾é€:"#kts",RBCãƒ†ãƒ¬ãƒ“:"#rbc",ç‰çƒæœæ—¥æ”¾é€:"#qab",æ²–ç¸„ãƒ†ãƒ¬ãƒ“:"#otv",æ—¥ãƒ†ãƒ¬:"#ntv",èª­å£²ãƒ†ãƒ¬ãƒ“:"#ytv",ä¸­äº¬ãƒ†ãƒ¬ãƒ“:"#chukyotv",ãƒ†ãƒ¬ãƒ“æœæ—¥:"#tvasahi",ABCãƒ†ãƒ¬ãƒ“:"#abc","ãƒ¡~ãƒ†ãƒ¬":"#nagoyatv","ãƒ¡ã€œãƒ†ãƒ¬":"#nagoyatv",TBSãƒãƒ£ãƒ³ãƒãƒ«:null,TBS:"#tbs",MBS:"#mbs",CBC:"#cbc",ãƒ†ãƒ¬ãƒ“æ±äº¬:"#tvtokyo",ãƒ†ãƒ¬æ±:"#tvtokyo",ãƒ†ãƒ¬ãƒ“å¤§é˜ª:"#tvo",ãƒ†ãƒ¬ãƒ“æ„›çŸ¥:"#tva",ãƒ•ã‚¸ãƒ†ãƒ¬ãƒ“:"#fujitv",é–¢è¥¿ãƒ†ãƒ¬ãƒ“:"#kantele",æ±æµ·ãƒ†ãƒ¬ãƒ“:"#tokaitv","TOKYO MX":"#tokyomx",tvk:"#tvk",ãƒãƒãƒ†ãƒ¬:"#chibatv",ãƒ†ãƒ¬ç‰:"#teletama",ç¾¤é¦¬ãƒ†ãƒ¬ãƒ“:"#gtv",ã¨ã¡ããƒ†ãƒ¬ãƒ“:"#tochitere",ã¨ã¡ãƒ†ãƒ¬:"#tochitere",ã‚µãƒ³ãƒ†ãƒ¬ãƒ“:"#suntv",KBSäº¬éƒ½:"#kbs",NHKBS1:"#nhkbs1",NHKBSãƒ—ãƒ¬ãƒŸã‚¢ãƒ :"#nhkbsp",NHKBS:"#nhkbs",BSæ—¥ãƒ†ãƒ¬:"#bsntv",BSæœæ—¥:"#bsasahi","BS-TBS":"#bstbs",BSãƒ†ãƒ¬æ±:"#bstvtokyo",BSãƒ•ã‚¸:"#bsfuji",BS11:"#bs11",BS12:"#bs12",BSæ¾ç«¹æ±æ€¥:"#bs260ch",BSJapanext:"#bsjapanext",BSã‚ˆã—ã‚‚ã¨:"#bsyoshimoto","AT-X":"#at_x"},n=Object.keys(s).find(o=>e.startsWith(o));return n?s[n]:null}}const k={id:"jk0",channel_id:"jk0",network_id:0,service_id:0,event_id:0,title:"å–å¾—ä¸­â€¦",description:"å–å¾—ä¸­â€¦",detail:{},start_time:"2000-01-01T00:00:00+09:00",end_time:"2000-01-01T00:00:00+09:00",duration:0,is_free:!0,genres:[],video_type:"æ˜ åƒ1080i(1125i)ã€ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”16:9 ãƒ‘ãƒ³ãƒ™ã‚¯ãƒˆãƒ«ãªã—",video_codec:"MPEG-2",video_resolution:"1080i",primary_audio_type:"2/0ãƒ¢ãƒ¼ãƒ‰(ã‚¹ãƒ†ãƒ¬ã‚ª)",primary_audio_language:"æ—¥æœ¬èª",primary_audio_sampling_rate:"48kHz",secondary_audio_type:null,secondary_audio_language:null,secondary_audio_sampling_rate:null},m={id:"jk0",display_channel_id:"gr000",network_id:0,service_id:0,transport_stream_id:null,remocon_id:0,channel_number:"---",type:"GR",name:"å–å¾—ä¸­â€¦",jikkyo_force:null,is_subchannel:!1,is_radiochannel:!1,is_watchable:!0,is_display:!0,viewer_count:0,program_present:k,program_following:k};class A{static async fetchAll(){const e=await d.get("/channels");if(e.type==="error")return d.showGenericError(e,"ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚"),null;const s={GR:[],BS:[],CS:[],CATV:[],SKY:[],STARDIGIO:[]},n=new Date;return e.data.filter(t=>t.threads.some(r=>new Date(r.start_at)<=n&&n<=new Date(r.end_at))).forEach(t=>{var c,u,l,f,y,b,v,w,S,B;const r=t.threads.find(h=>new Date(h.start_at)<=n&&n<=new Date(h.end_at)),_=t.threads.findIndex(h=>new Date(h.start_at)<=n&&n<=new Date(h.end_at)),i=_!==-1&&_+1<t.threads.length?t.threads[_+1]:null,p={id:t.id,display_channel_id:t.id,network_id:-1,service_id:-1,transport_stream_id:-1,remocon_id:(()=>{if(t.id.length<=4)return parseInt(t.id.replaceAll("jk",""));switch(t.id){case"jk101":return 1;case"jk141":return 4;case"jk151":return 5;case"jk161":return 6;case"jk171":return 7;case"jk181":return 8;case"jk191":return 9;case"jk200":return 10;case"jk211":return 11;case"jk222":return 12;default:return-1}})(),channel_number:t.id.length<=4?("00"+t.id.replaceAll("jk","")).slice(-2)+"1":t.id.replaceAll("jk",""),type:t.id.length<=4?"GR":"BS",name:t.name,jikkyo_force:r?r.jikkyo_force:null,is_display:!0,is_subchannel:!1,is_radiochannel:!1,is_watchable:!0,viewer_count:r?r.comments:0,program_present:r?{id:r.id.toString(),channel_id:t.id,network_id:-1,service_id:-1,event_id:-1,title:((c=t.program_present)==null?void 0:c.title)||r.title,description:`<div class="font-weight-bold">ğŸ§å®Ÿæ³æ : ${r.title}</div>`,detail:{"NX-Jikkyo ã«ã¤ã„ã¦":`NX-Jikkyo ã¯ã€æ”¾é€ä¸­ã®ãƒ†ãƒ¬ãƒ“ç•ªçµ„ã‚„èµ·ãã¦ã„ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã«å¯¾ã—ã¦ã€ã¿ã‚“ãªã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’ã—ç››ã‚Šä¸ŠãŒã‚Šã‚’å…±æœ‰ã™ã‚‹ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚
ãƒ‹ã‚³ãƒ‹ã‚³å®Ÿæ³ã«æŠ•ç¨¿ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã‚‚ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

ã²ã¨ã‚Šã ã‘ã©ã€ã²ã¨ã‚Šã˜ã‚ƒãªã„ã€‚
ãƒ†ãƒ¬ãƒ“ã®æ˜ åƒã¯æµã‚Œã¾ã›ã‚“ãŒã€å¥½ããªç•ªçµ„ã‚’ãƒ†ãƒ¬ãƒ“ã§è¦‹ãªãŒã‚‰ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«æµã‚Œã‚‹ã‚³ãƒ¡ãƒ³ãƒˆã§ãƒ¯ã‚¤ãƒ¯ã‚¤æ¥½ã—ã‚ã¾ã™ã€‚
ãœã²æ„Ÿæƒ³ãªã©ã‚’æ°—è»½ã«ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚`},start_time:((u=t.program_present)==null?void 0:u.start_at)||r.start_at,end_time:((l=t.program_present)==null?void 0:l.end_at)||r.end_at,duration:((f=t.program_present)==null?void 0:f.duration)||r.duration,is_free:!1,genres:(y=t.program_present)!=null&&y.genre?[{major:t.program_present.genre,middle:""}]:[],video_type:"",video_codec:"",video_resolution:"",primary_audio_type:"",primary_audio_language:"",primary_audio_sampling_rate:"",secondary_audio_type:null,secondary_audio_language:null,secondary_audio_sampling_rate:null}:null,program_following:i?{id:i.id.toString(),channel_id:t.id,network_id:-1,service_id:-1,event_id:-1,title:((b=t.program_following)==null?void 0:b.title)||i.title,description:i.description,detail:{},start_time:((v=t.program_following)==null?void 0:v.start_at)||i.start_at,end_time:((w=t.program_following)==null?void 0:w.end_at)||i.end_at,duration:((S=t.program_following)==null?void 0:S.duration)||i.duration,is_free:!1,genres:(B=t.program_following)!=null&&B.genre?[{major:t.program_following.genre,middle:""}]:[],video_type:"",video_codec:"",video_resolution:"",primary_audio_type:"",primary_audio_language:"",primary_audio_sampling_rate:"",secondary_audio_type:null,secondary_audio_language:null,secondary_audio_sampling_rate:null}:null};t.id.length<=4?s.GR.push(p):s.BS.push(p)}),s}static async fetch(e){const s=await d.get(`/channels/${e}`);return s.type==="error"?(d.showGenericError(s,"ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚"),null):s.data}static async fetchWebSocketInfo(e){if(!C("NX-Niconico-User"))return{watch_session_url:`${g.api_base_url.replaceAll("http","ws")}/channels/${e}/ws/watch`,nicolive_watch_session_url:null,nicolive_watch_session_error:null,comment_session_url:`${g.api_base_url.replaceAll("http","ws")}/channels/${e}/ws/comment`,is_nxjikkyo_exclusive:!1};const n=await d.get(`/channels/${e}/jikkyo`);return n.type==="error"?(d.showGenericError(n,"ã‚³ãƒ¡ãƒ³ãƒˆé€å—ä¿¡ç”¨ WebSocket API ã®æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚"),null):n.data}}const I=T("channels",{state:()=>({channels_list:{GR:[],BS:[],CS:[],CATV:[],SKY:[],STARDIGIO:[]},is_channels_list_initial_updated:!1,last_updated_at:0,display_channel_id:"gr000",viewer_count:null,current_program_present:null,current_program_following:null}),getters:{channel(){if(this.is_channels_list_initial_updated===!1)return{previous:m,current:m,next:m};const a={...k,title:"ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼",description:"ã“ã®ãƒãƒ£ãƒ³ãƒãƒ« ID ã®ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±ã¯å­˜åœ¨ã—ã¾ã›ã‚“ã€‚"},e={...m,name:"ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼",program_present:a,program_following:a},s=x.getChannelType(this.display_channel_id);if(s===null)return{previous:e,current:e,next:e};const n=this.channels_list[s],o=n.findIndex(i=>i.display_channel_id===this.display_channel_id);if(o===-1)return{previous:e,current:e,next:e};const t=(()=>{let i=o-1;for(;n.length;){if(i<=-1&&(i=n.length-1),n[i].is_display)return i;i--}return 0})(),r=(()=>{let i=o+1;for(;n.length;){if(i>=n.length&&(i=0),n[i].is_display)return i;i++}return 0})(),_=structuredClone(n[o]);return this.current_program_present!==null&&(_.program_present=this.current_program_present),this.current_program_following!==null&&(_.program_following=this.current_program_following),this.viewer_count!==null&&(_.viewer_count=this.viewer_count),{previous:n[t],current:_,next:n[r]}},channels_list_with_pinned(){var n,o,t,r,_,i,p;const a=j(),e=new Map;if(e.set("ãƒ”ãƒ³ç•™ã‚",[]),e.set("åœ°ãƒ‡ã‚¸",[]),this.is_channels_list_initial_updated===!1)return e;e.set("BS",[]),e.set("CS",[]),e.set("CATV",[]),e.set("SKY",[]),e.set("StarDigio",[]);const s=[];for(const[c,u]of Object.entries(this.channels_list))for(const l of u)if(a.settings.pinned_channel_ids.includes(l.id)&&s.push(l),l.is_display!==!1)switch(l.type){case"GR":{(n=e.get("åœ°ãƒ‡ã‚¸"))==null||n.push(l);break}case"BS":{(o=e.get("BS"))==null||o.push(l);break}case"CS":{(t=e.get("CS"))==null||t.push(l);break}case"CATV":{(r=e.get("CATV"))==null||r.push(l);break}case"SKY":{(_=e.get("SKY"))==null||_.push(l);break}case"STARDIGIO":{(i=e.get("StarDigio"))==null||i.push(l);break}}(p=e.get("ãƒ”ãƒ³ç•™ã‚"))==null||p.push(...s.sort((c,u)=>{const l=a.settings.pinned_channel_ids.indexOf(c.id),f=a.settings.pinned_channel_ids.indexOf(u.id);return l-f}));for(const[c,u]of e)c!=="ãƒ”ãƒ³ç•™ã‚"&&u.length===0&&e.delete(c);return e.size===1&&e.has("ãƒ”ãƒ³ç•™ã‚")&&e.delete("ãƒ”ãƒ³ç•™ã‚"),e},channels_list_with_pinned_for_watch(){var e;const a=new Map([...this.channels_list_with_pinned]);return this.is_channels_list_initial_updated===!1||((e=a.get("ãƒ”ãƒ³ç•™ã‚"))==null?void 0:e.length)===0&&a.delete("ãƒ”ãƒ³ç•™ã‚"),a}},actions:{getChannelByRemoconID(a,e){return this.channels_list[a].find(o=>o.remocon_id===e)??null},async update(a=!1){const e=async()=>{const s=await A.fetchAll();s!==null&&(this.channels_list=g.deepObjectFreeze(s),this.is_channels_list_initial_updated===!1&&(this.is_channels_list_initial_updated=!0),this.last_updated_at=g.time())};if(this.is_channels_list_initial_updated===!0&&a===!1){g.time()-this.last_updated_at>60&&e();return}await e()}}});export{x as C,m as I,A as a,I as u};
