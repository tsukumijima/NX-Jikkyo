import{d as N,U as w,P as H,m as U,M as b,u as $,_ as I,r as _,a as M,o,c as r,b as l,e as u,n as m,f as e,w as h,g as D,F,h as B,i as v,v as z,j as A,k as y,l as E,t as c,V as L,p as k,R as S,q as R,s as J}from"./index-o3URU5aQ.js";import{S as X,a as q}from"./swiper-BmdIXjSr.js";import{H as K,N as O}from"./Navigation-DQRgu9Ht.js";import{C as Z,u as Y}from"./ChannelsStore-Dv2yBFr4.js";import{V as G}from"./ssrBoot-Cm-0CO3e.js";const W=N({name:"TV-Home",components:{HeaderBar:K,Navigation:O,Swiper:X,SwiperSlide:q},data(){return{Utils:Object.freeze(w),ChannelUtils:Object.freeze(Z),ProgramUtils:Object.freeze(H),active_tab_index:0,swiper_instance:null,scroll_abort_controller:new AbortController,is_loading:!0,interval_ids:[]}},computed:{...U(Y,$)},watch:{active_tab_index(){var t,a;(t=this.swiper_instance)==null||t.updateAutoHeight(),(a=this.swiper_instance)==null||a.slideTo(this.active_tab_index,this.is_loading===!0?0:void 0)}},async mounted(){var a,p;this.settingsStore.settings.pinned_channel_ids.length===0&&(this.active_tab_index=1);const t=60-new Date().getSeconds();this.interval_ids.push(window.setTimeout(()=>{this.channelsStore.update(!0),this.interval_ids.push(window.setInterval(()=>this.channelsStore.update(!0),30*1e3))},t*1e3)),await this.channelsStore.update(),((a=this.channelsStore.channels_list_with_pinned.get("ピン留め"))==null?void 0:a.length)===0&&(this.active_tab_index=1),(p=this.swiper_instance)==null||p.updateAutoHeight(),window.addEventListener("scroll",()=>{var C;(C=this.swiper_instance)==null||C.updateAutoHeight()},{passive:!0,signal:this.scroll_abort_controller.signal}),await w.sleep(.01),this.is_loading=!1},beforeUnmount(){for(const t of this.interval_ids)window.clearInterval(t);this.scroll_abort_controller.abort(),this.scroll_abort_controller=new AbortController},methods:{addPinnedChannel(t){this.settingsStore.settings.pinned_channel_ids=[...this.settingsStore.settings.pinned_channel_ids,t.id],b.show(`${t.name}をピン留めしました。`)},removePinnedChannel(t){var a;this.settingsStore.settings.pinned_channel_ids=this.settingsStore.settings.pinned_channel_ids.filter(p=>p!==t.id),((a=this.channelsStore.channels_list_with_pinned.get("ピン留め"))==null?void 0:a.length)===0&&(this.active_tab_index=1),b.show(`${t.name}のピン留めを外しました。`)},isPinnedChannel(t){return this.settingsStore.settings.pinned_channel_ids.includes(t.id)}}}),n=t=>(R("data-v-c8721473"),t=t(),J(),t),Q={class:"route-container"},uu={class:"mt-5 mb-2 mx-4 text-center font-weight-bold",style:{"font-size":"15px"}},tu={class:"text-left mx-auto",style:{"max-width":"750px"}},eu=n(()=>u("a",{class:"link",href:"https://originalnews.nico/464285",target:"_blank"},"ニコニコ実況(Re:仮)",-1)),su=n(()=>u("br",null,null,-1)),nu=n(()=>u("a",{class:"link",href:"https://x.com/TVRemotePlus/status/1813121242565656577",target:"_blank"},[e(" 「過去ログが残らず古いコメントから消えていく」 「技術的にニコ生との API 互換性が皆無」"),u("br",{class:"d-none d-sm-inline"}),e(" 「コメント書き込み時に Captcha が入ってるため TVTest などのサードパーティーソフトで対応不可 (!!!)」"),u("br",{class:"d-none d-sm-inline"}),e(" 「当然 NHK BS・BS11 以外の BS チャンネルには非対応」")],-1)),au=n(()=>u("br",{class:"d-inline d-sm-none"},null,-1)),iu=n(()=>u("br",null,null,-1)),ou={class:"mt-1"},lu=n(()=>u("a",{class:"link",href:"https://x.com/TVRemotePlus/status/1813149934373466396",target:"_blank"},"NX-Jikkyo ではデフォルトでいくつかのコメントミュート設定がオンになっている",-1)),ru=n(()=>u("br",null,null,-1)),cu=y('<div class="mt-2" data-v-c8721473>ぜひこのサイトをまだ NX-Jikkyo を知らないニコニコ実況難民の方に広めていただけると嬉しいです！</div><div class="mt-1" data-v-c8721473><a class="link" href="https://air.fem.jp/jkcommentviewer/" target="_blank" data-v-c8721473>jkcommentviewer</a> / <a class="link" href="https://blog.tsukumijima.net/article/nx-jikkyo-released/#toc4" target="_blank" data-v-c8721473>TVTest (NicoJK)</a> / <a class="link" href="https://github.com/tsukumijima/KonomiTV/releases/tag/v0.10.1" target="_blank" data-v-c8721473>KonomiTV</a> 最新版で NX-Jikkyo に対応しました！！🎉🎊</div><div class="mt-1" data-v-c8721473> 最新情報は <a class="link" href="https://x.com/search?q=%23NXJikkyo&amp;src=typed_query" target="_blank" data-v-c8721473>Twitter</a> で発信中です📣 <a class="link" href="https://www.amazon.co.jp/hz/wishlist/ls/3AZ4RI13SW2PV?tag=tsukumijima-22" target="_blank" data-v-c8721473>干し芋 or アマギフいただけると大変モチベ上がるのでぜひ🙇🙏</a></div><div class="mt-1" data-v-c8721473><a class="link" href="https://x.com/TVRemotePlus/status/1807923274061697127" target="_blank" data-v-c8721473>サーバーをスペックアップしました！🎉</a> ぜひ <a class="link" href="https://www.amazon.co.jp/dp/B0C1YY8GSB/?tag=tsukumijima-22" target="_blank" data-v-c8721473>このアフィリンク</a> から Amazon で何かお買い物して頂けると助かります🙏 </div>',4),du={class:"channels-tab"},_u=n(()=>u("div",{class:"channels-tab__highlight"},null,-1)),hu={class:"channel__broadcaster"},pu=["src"],mu={class:"channel__broadcaster-content"},Cu={class:"channel__broadcaster-name"},gu={class:"channel__broadcaster-status"},Fu=n(()=>u("svg",{class:"iconify iconify--fa-solid",width:"10.5px",height:"12px",viewBox:"0 0 448 512"},[u("path",{fill:"currentColor",d:"M323.56 51.2c-20.8 19.3-39.58 39.59-56.22 59.97C240.08 73.62 206.28 35.53 168 0C69.74 91.17 0 209.96 0 281.6C0 408.85 100.29 512 224 512s224-103.15 224-230.4c0-53.27-51.98-163.14-124.44-230.4zm-19.47 340.65C282.43 407.01 255.72 416 226.86 416C154.71 416 96 368.26 96 290.75c0-38.61 24.31-72.63 72.79-130.75c6.93 7.98 98.83 125.34 98.83 125.34l58.63-66.88c4.14 6.85 7.91 13.55 11.27 19.97c27.35 52.19 15.81 118.97-33.43 153.42z"})],-1)),Bu=n(()=>u("span",{class:"ml-1"},"勢い:",-1)),vu={class:"ml-1"},Eu=n(()=>u("span",{style:{"margin-left":"3px"}}," コメ/分",-1)),fu={class:"channel__broadcaster-status-viewers ml-2"},wu=n(()=>u("span",{class:"ml-1"},"コメント数:",-1)),bu={class:"ml-1"},Du=["onClick"],Au=n(()=>u("svg",{class:"iconify iconify--fluent",width:"24px",height:"24px",viewBox:"0 0 20 20"},[u("path",{fill:"currentColor",d:"M13.325 2.617a2 2 0 0 0-3.203.52l-1.73 3.459a1.5 1.5 0 0 1-.784.721l-3.59 1.436a1 1 0 0 0-.335 1.636L6.293 13L3 16.292V17h.707L7 13.706l2.61 2.61a1 1 0 0 0 1.636-.335l1.436-3.59a1.5 1.5 0 0 1 .722-.784l3.458-1.73a2 2 0 0 0 .52-3.203l-4.057-4.057Z"})],-1)),ku=[Au],Su={class:"channel__program-present"},yu={class:"channel__program-present-title-wrapper"},xu=["innerHTML"],Pu={class:"channel__program-present-time"},Tu=["innerHTML"],ju={class:"channel__program-following"},Vu={class:"channel__program-following-title"},Nu=n(()=>u("span",{class:"channel__program-following-title-decorate"},"NEXT",-1)),Hu=n(()=>u("svg",{class:"channel__program-following-title-icon iconify iconify--fluent",width:"16px",height:"16px",viewBox:"0 0 20 20"},[u("path",{fill:"currentColor",d:"M10.018 5.486a1 1 0 0 1 1.592-.806l5.88 4.311a1.25 1.25 0 0 1 0 2.017l-5.88 4.311a1 1 0 0 1-1.592-.806v-3.16L4.61 15.319a1 1 0 0 1-1.592-.806V5.486A1 1 0 0 1 4.61 4.68l5.408 3.966v-3.16Z"})],-1)),Uu=["innerHTML"],$u={class:"channel__program-following-time"},Iu={class:"channel__progressbar"},Mu={key:0,class:"pinned-container d-flex justify-center align-center w-100"},zu={class:"d-flex justify-center align-center flex-column"},Lu=n(()=>u("h2",null,[e("ピン留めされているチャンネルが"),u("br"),e("ありません。")],-1)),Ru={class:"mt-4 text-text-darken-1"},Ju=n(()=>u("br",null,null,-1)),Xu=n(()=>u("div",{class:"mt-2 text-text-darken-1"},[e("チャンネルをピン留めすると、"),u("br"),e("このタブが最初に表示されます。")],-1)),qu={key:0,class:"channels-list pinned-container d-flex justify-center align-center w-100",style:{"flex-grow":"1"}},Ku=y('<div class="d-flex justify-center align-center flex-column" data-v-c8721473><h2 data-v-c8721473>視聴可能なチャンネルが<br class="d-sm-none" data-v-c8721473>ありません。</h2><div class="mt-4 text-text-darken-1" data-v-c8721473>前回チャンネルスキャンしたときに<br class="d-sm-none" data-v-c8721473>受信可能なチャンネルを見つけられませんでした。</div><div class="mt-1 text-text-darken-1" data-v-c8721473>再度チャンネルスキャンを行ってください。</div></div>',1),Ou=[Ku];function Zu(t,a,p,C,Yu,Gu){const x=_("HeaderBar"),P=_("Navigation"),g=_("router-link"),f=_("Icon"),T=_("SwiperSlide"),j=_("Swiper"),V=M("tooltip");return o(),r("div",Q,[l(x),u("main",null,[l(P),u("div",{class:m(["channels-container channels-container--home",{"channels-container--loading":t.is_loading}])},[u("div",uu,[u("blockquote",tu,[e(" 【📢重要なお知らせ】ニコニコ公式から「仮復旧」として "),eu,e(" がリリースされましたが、"),su,e(" 現状"),nu,au,e(" …とお世辞にも問題点が多すぎるため、"),iu,e(" 当分の間引き続きこの NX-Jikkyo 避難所でのコメントをお願いします🙏🙏 "),u("div",ou,[e(" なお "),lu,e(" ので、完全に以前の使い勝手に戻したい方は適宜 "),l(g,{class:"link",to:"/settings/jikkyo"},{default:h(()=>[e("コメントのミュート設定")]),_:1}),e(" からオフにしてみてください！"),ru,e(" またコメントプレイヤーの背景写真がわずらわしい方は "),l(g,{class:"link",to:"/settings/general"},{default:h(()=>[e("全般設定")]),_:1}),e(" からオフにできます！ ")])]),cu]),u("div",du,[u("div",{class:"channels-tab__buttons",style:D({"--tab-length":Array.from(t.channelsStore.channels_list_with_pinned).length,"--active-tab-index":t.active_tab_index})},[(o(!0),r(F,null,B(Array.from(t.channelsStore.channels_list_with_pinned),([i],d)=>(o(),E(L,{variant:"flat",class:m(["channels-tab__button",{"channels-tab__button--active":t.active_tab_index===d}]),key:i,onClick:s=>t.active_tab_index=d},{default:h(()=>[e(c(i),1)]),_:2},1032,["class","onClick"]))),128)),_u],4)]),v(l(j,{class:"channels-list","space-between":32,"auto-height":!0,"touch-start-prevent-default":!1,observer:!0,"observe-parents":!0,onSwiper:a[1]||(a[1]=i=>t.swiper_instance=i),onSlideChange:a[2]||(a[2]=i=>t.active_tab_index=i.activeIndex)},{default:h(()=>[(o(!0),r(F,null,B(Array.from(t.channelsStore.channels_list_with_pinned),([i,d])=>(o(),E(T,{key:i},{default:h(()=>[u("div",{class:m(["channels",`channels--tab-${i} channels--length-${d.length}`])},[(o(!0),r(F,null,B(d,s=>v((o(),E(g,{class:"channel",draggable:"false",key:s.id,to:`/watch/${s.display_channel_id}`},{default:h(()=>[u("div",hu,[u("img",{class:"channel__broadcaster-icon",src:`${t.Utils.api_base_url}/channels/${s.id}/logo`},null,8,pu),u("div",mu,[u("span",Cu,"Ch: "+c(s.channel_number)+" "+c(s.name),1),u("div",gu,[u("div",{class:m(["channel__broadcaster-status-force",`channel__broadcaster-status-force--${t.ChannelUtils.getChannelForceType(s.jikkyo_force)}`])},[Fu,Bu,u("span",vu,c(s.jikkyo_force??"--"),1),Eu],2),u("div",fu,[l(f,{icon:"bi:chat-left-text-fill",height:"11px"}),wu,u("span",bu,c(s.viewer_count),1)])])]),v((o(),r("div",{class:m(["channel__broadcaster-pin",{"channel__broadcaster-pin--pinned":t.isPinnedChannel(s)}]),onClick:k(Wu=>t.isPinnedChannel(s)?t.removePinnedChannel(s):t.addPinnedChannel(s),["prevent","stop"]),onMousedown:a[0]||(a[0]=k(()=>{},["prevent","stop"]))},ku,42,Du)),[[S],[V,t.isPinnedChannel(s)?"ピン留めを外す":"ピン留めする"]])]),u("div",Su,[u("div",yu,[u("span",{class:"channel__program-present-title",innerHTML:t.ProgramUtils.decorateProgramInfo(s.program_present,"title")},null,8,xu),u("span",Pu,c(t.ProgramUtils.getProgramTime(s.program_present)),1)]),u("span",{class:"channel__program-present-description",innerHTML:t.ProgramUtils.decorateProgramInfo(s.program_present,"description")},null,8,Tu)]),l(G),u("div",ju,[u("div",Vu,[Nu,Hu,u("span",{class:"channel__program-following-title-text",innerHTML:t.ProgramUtils.decorateProgramInfo(s.program_following,"title")},null,8,Uu)]),u("span",$u,c(t.ProgramUtils.getProgramTime(s.program_following)),1)]),u("div",Iu,[u("div",{class:"channel__progressbar-progress",style:D(`width:${t.ProgramUtils.getProgramProgress(s.program_present)}%;`)},null,4)])]),_:2},1032,["to"])),[[S]])),128)),i==="ピン留め"&&d.length===0?(o(),r("div",Mu,[u("div",zu,[Lu,u("div",Ru,[e("各チャンネルの "),l(f,{style:{position:"relative",bottom:"-5px"},icon:"fluent:pin-20-filled",width:"22px"}),e(" アイコンから、よく実況する"),Ju,e("チャンネルをこのタブにピン留めできます。")]),Xu])])):A("",!0)],2)]),_:2},1024))),128))]),_:1},512),[[z,Array.from(t.channelsStore.channels_list_with_pinned).length>0]]),Array.from(t.channelsStore.channels_list_with_pinned).length===0?(o(),r("div",qu,Ou)):A("",!0)],2)])])}const n3=I(W,[["render",Zu],["__scopeId","data-v-c8721473"]]);export{n3 as default};
