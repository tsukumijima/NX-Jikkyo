import{V as P,_ as F,u as H}from"./ssrBoot-cv-AQoi2.js";import{d as T,y as J,a2 as L,r as w,o as v,c as y,i as h,l as k,w as d,b as o,f as A,A as j,V as B,j as W,R as f,q as V,s as N,e as c,_ as E,G as X,d2 as G,H as U,cS as q,cd as K,cc as M,dt as Q,I as Z,cZ as O,cK as Y,J as tt,du as et,d6 as nt,cn as at,bD as S,cU as st,ci as it,cm as ot,K as C,c5 as rt,dv as lt,c_ as ct,cT as ut,c7 as vt,dw as _t,ck as dt,n as g,Q as ht,U as I,m as ft,a as gt,t as pt}from"./index-ZF9MESNM.js";function mt(t,s,e,r){function l(n){return n instanceof e?n:new e(function(i){i(n)})}return new(e||(e=Promise))(function(n,i){function _(u){try{a(r.next(u))}catch(m){i(m)}}function p(u){try{a(r.throw(u))}catch(m){i(m)}}function a(u){u.done?n(u.value):l(u.value).then(_,p)}a((r=r.apply(t,[])).next())})}function kt(t,s){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,l,n,i;return i={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function _(a){return function(u){return p([a,u])}}function p(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(e=0)),e;)try{if(r=1,l&&(n=a[0]&2?l.return:a[0]?l.throw||((n=l.return)&&n.call(l),0):l.next)&&!(n=n.call(l,a[1])).done)return n;switch(l=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,l=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){e.label=a[1];break}if(a[0]===6&&e.label<n[1]){e.label=n[1],n=a;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(a);break}n[2]&&e.ops.pop(),e.trys.pop();continue}a=s.call(t,e)}catch(u){a=[6,u],l=0}finally{r=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var bt=function(){function t(){var s=this;this.event=null,this.callbacks=[],this.install=function(){return mt(s,void 0,void 0,function(){var e=this;return kt(this,function(r){switch(r.label){case 0:return this.event?(this.event.prompt(),[4,this.event.userChoice.then(function(l){var n=l.outcome;return e.updateEvent(null),n==="accepted"||!0})]):[3,2];case 1:return[2,r.sent()];case 2:throw new Error("Not allowed to prompt.")}})})},!(typeof window>"u")&&(window.addEventListener("beforeinstallprompt",function(e){e.preventDefault(),s.updateEvent(e)}),window.addEventListener("appinstalled",function(){s.updateEvent(null)}))}return t.prototype.getEvent=function(){return this.event},t.prototype.canInstall=function(){return this.event!==null},t.prototype.updateEvent=function(s){var e=this;s!==this.event&&(this.event=s,this.callbacks.forEach(function(r){return r(e.canInstall())}))},t.prototype.addListener=function(s){s(this.canInstall()),this.callbacks.push(s)},t.prototype.removeListener=function(s){this.callbacks=this.callbacks.filter(function(e){return s!==e})},t}(),D=new bt;const R=t=>(V("data-v-7d4d6936"),t=t(),N(),t),yt={class:"header"},wt=R(()=>c("img",{class:"nx-jikkyo-logo__image",src:F,height:"35",alt:"NX-Jikkyo"},null,-1)),St=R(()=>c("div",{class:"subtitle ml-2 pt-1 d-flex align-center text-text-darken-1",style:{"font-size":"15px","user-select":"none"}},[c("div",{class:"mr-2",style:{"font-size":"17px"}},"|"),A(" Nico Nico Jikkyo Alternative ")],-1)),Ct=T({__name:"HeaderBar",setup(t){const s=J(!1);return L(()=>{D.addListener(e=>{s.value=e})}),(e,r)=>{const l=w("router-link"),n=w("Icon");return v(),y("header",yt,[h((v(),k(l,{class:"nx-jikkyo-logo ml-3 ml-md-6",to:"/"},{default:d(()=>[wt]),_:1})),[[f]]),St,o(P),s.value?(v(),k(B,{key:0,variant:"flat",color:"background-lighten-3",class:"pwa-install-button",onClick:r[0]||(r[0]=i=>j(D).install())},{default:d(()=>[o(n,{icon:"material-symbols:install-desktop-rounded",height:"20px",class:"mr-1"}),A(" アプリとしてインストール ")]),_:1})):W("",!0)])}}}),ee=E(Ct,[["__scopeId","data-v-7d4d6936"]]),Bt=X({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...G(),...U(),...q(),...K(),...M(),...Q({name:"bottom-navigation"}),...Z({tag:"header"}),...O({selectedClass:"v-btn--selected"}),...Y()},"VBottomNavigation"),xt=tt()({name:"VBottomNavigation",props:Bt(),emits:{"update:active":t=>!0,"update:modelValue":t=>!0},setup(t,s){let{slots:e}=s;const{themeClasses:r}=et(),{borderClasses:l}=nt(t),{backgroundColorClasses:n,backgroundColorStyles:i}=at(S(t,"bgColor")),{densityClasses:_}=st(t),{elevationClasses:p}=it(t),{roundedClasses:a}=ot(t),{ssrBootStyles:u}=H(),m=C(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),$=rt(t,"active",t.active),{layoutItemStyles:z}=lt({id:t.name,order:C(()=>parseInt(t.order,10)),position:C(()=>"bottom"),layoutSize:C(()=>$.value?m.value:0),elementSize:m,active:$,absolute:S(t,"absolute")});return ct(t,_t),ut({VBtn:{baseColor:S(t,"baseColor"),color:S(t,"color"),density:S(t,"density"),stacked:C(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),vt(()=>o(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":$.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},r.value,n.value,l.value,_.value,p.value,a.value,t.class],style:[i.value,z.value,{height:dt(m.value)},u.value,t.style]},{default:()=>[e.default&&o("div",{class:"v-bottom-navigation__content"},[e.default()])]})),{}}}),$t={},x=t=>(V("data-v-93ece83c"),t=t(),N(),t),It=x(()=>c("span",{class:"mt-1"},"テレビ実況",-1)),Vt=x(()=>c("span",{class:"mt-1"},"過去ログ再生",-1)),Nt=x(()=>c("span",{class:"mt-1"},"NX-Jikkyo とは",-1)),Et=x(()=>c("span",{class:"mt-1"},"設定",-1));function Dt(t,s){const e=w("Icon");return v(),k(xt,{class:"bottom-navigation-container elevation-12",color:"primary",grow:"",active:""},{default:d(()=>[o(B,{class:g(["bottom-navigation-button",{"v-btn--active":t.$route.path=="/"}]),to:"/"},{default:d(()=>[o(e,{icon:"fluent:tv-20-regular",width:"30px"}),It]),_:1},8,["class"]),o(B,{class:g(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/log")}]),to:"/log/"},{default:d(()=>[o(e,{icon:"fluent:receipt-play-20-regular",width:"30px"}),Vt]),_:1},8,["class"]),o(B,{class:g(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/about")}]),to:"/about/"},{default:d(()=>[o(e,{icon:"fluent:info-16-regular",width:"26px"}),Nt]),_:1},8,["class"]),o(B,{class:g(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/settings")}]),to:"/settings/"},{default:d(()=>[o(e,{icon:"fluent:settings-20-regular",width:"30px"}),Et]),_:1},8,["class"])]),_:1})}const Pt=E($t,[["render",Dt],["__scopeId","data-v-93ece83c"]]);class Tt{static async fetchServerVersion(s=!1){return null}}const At=ht("version",{state:()=>({server_version_info:null,last_updated_at:0}),getters:{client_version(){return I.version},server_version(){var t;return((t=this.server_version_info)==null?void 0:t.version)??null},latest_version(){var t;return((t=this.server_version_info)==null?void 0:t.latest_version)??null},is_client_develop_version(){return this.client_version.includes("-dev")},is_server_develop_version(){var t;return((t=this.server_version)==null?void 0:t.includes("-dev"))??!1},is_update_available(){return this.server_version===null||this.latest_version===null?!1:this.is_server_develop_version===!1&&this.server_version!==this.latest_version||this.is_server_develop_version===!0&&this.server_version.replace("-dev","")===this.latest_version},is_version_mismatch(){return this.server_version===null?!1:this.client_version!==this.server_version}},actions:{async fetchServerVersion(t=!1){if(this.server_version_info!==null&&t===!1)return I.time()-this.last_updated_at>60&&this.fetchServerVersion(!0),this.server_version_info;const s=await Tt.fetchServerVersion();return s===null?null:(this.server_version_info=s,this.last_updated_at=I.time(),this.server_version_info)}}}),Rt=At,zt=T({name:"Navigation",components:{BottomNavigation:Pt},computed:{...ft(Rt)},async created(){await this.versionStore.fetchServerVersion()}}),b=t=>(V("data-v-e1c32fe1"),t=t(),N(),t),Ft={class:"navigation-container elevation-8"},Ht={class:"navigation"},Jt={class:"navigation-scroll"},Lt=b(()=>c("span",{class:"navigation__link-text"},"テレビ実況",-1)),jt=b(()=>c("span",{class:"navigation__link-text"},"過去ログ再生",-1)),Wt={class:"navigation__link","active-class":"navigation__link--active",href:"https://jikkyo.tsukumijima.net",target:"_blank"},Xt=b(()=>c("span",{class:"navigation__link-text"},"過去ログ API",-1)),Gt=b(()=>c("span",{class:"navigation__link-text"},"NX-Jikkyo とは",-1)),Ut=b(()=>c("span",{class:"navigation__link-text"},"設定",-1)),qt={class:"navigation__link","active-class":"navigation__link--active",href:"https://x.com/search?q=%23NXJikkyo%20from%3ATVRemotePlus&src=typed_query&f=live",target:"_blank"},Kt=b(()=>c("span",{class:"navigation__link-text"},"最新情報",-1)),Mt={class:"navigation__link","active-class":"navigation__link--active",href:"https://x.com/TVRemotePlus",target:"_blank"},Qt=b(()=>c("span",{class:"navigation__link-text"},"公式 Twitter",-1)),Zt={class:"navigation__link-text"};function Ot(t,s,e,r,l,n){const i=w("Icon"),_=w("router-link"),p=w("BottomNavigation"),a=gt("ftooltip");return v(),y("div",null,[c("div",Ft,[c("nav",Ht,[c("div",Jt,[h((v(),k(_,{class:g(["navigation__link",{"navigation__link--active":t.$route.path=="/"}]),"active-class":"navigation__link--active",to:"/"},{default:d(()=>[o(i,{class:"navigation__link-icon",icon:"fluent:tv-20-regular",width:"26px"}),Lt]),_:1},8,["class"])),[[f]]),h((v(),k(_,{class:g(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/log")}]),"active-class":"navigation__link--active",to:"/log/"},{default:d(()=>[o(i,{class:"navigation__link-icon",icon:"fluent:receipt-play-20-regular",width:"26px"}),jt]),_:1},8,["class"])),[[f]]),h((v(),y("a",Wt,[o(i,{class:"navigation__link-icon",icon:"fluent:slide-text-multiple-20-regular",width:"26px"}),Xt])),[[f]]),h((v(),k(_,{class:g(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/about")}]),"active-class":"navigation__link--active",to:"/about/"},{default:d(()=>[o(i,{class:"navigation__link-icon",icon:"fluent:info-16-regular",width:"26px"}),Gt]),_:1},8,["class"])),[[f]]),o(P),h((v(),k(_,{class:g(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/settings")}]),"active-class":"navigation__link--active",to:"/settings/"},{default:d(()=>[o(i,{class:"navigation__link-icon",icon:"fluent:settings-20-regular",width:"26px"}),Ut]),_:1},8,["class"])),[[f]]),h((v(),y("a",qt,[o(i,{class:"navigation__link-icon",icon:"fluent:news-20-regular",width:"26px"}),Kt])),[[f]]),h((v(),y("a",Mt,[o(i,{class:"navigation__link-icon",icon:"basil:twitter-outline",width:"26px"}),Qt])),[[f]]),h((v(),y("a",{class:g(["navigation__link",{"navigation__link--develop-version":t.versionStore.is_client_develop_version,"navigation__link--highlight":t.versionStore.is_update_available}]),"active-class":"navigation__link--active",href:"https://github.com/tsukumijima/NX-Jikkyo",target:"_blank"},[o(i,{class:"navigation__link-icon",icon:"fluent:info-16-regular",width:"26px"}),c("span",Zt,"version "+pt(t.versionStore.client_version),1)],2)),[[f],[a,t.versionStore.is_update_available?`アップデートがあります (version ${t.versionStore.latest_version})`:"",void 0,{top:!0}]])])])]),o(p)])}const ne=E(zt,[["render",Ot],["__scopeId","data-v-e1c32fe1"]]);export{ee as H,ne as N,Rt as u};
