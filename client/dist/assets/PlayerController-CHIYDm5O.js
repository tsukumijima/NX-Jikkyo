var Qp=Object.defineProperty;var Zp=(s,e,t)=>e in s?Qp(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Se=(s,e,t)=>Zp(s,typeof e!="symbol"?e+"":e,t);import{B as ku,C as Iu,D as Er,E as Ru,G as Lu,H as Du,I as Ta,J as _l,K as fc,L as xr,N as em,u as hn,d as In,m as Qn,z as wn,U as ni,P as Ca,_ as Zn,c as ti,w as Yi,e as pn,b as Qe,a as Ht,l as cn,h as Mi,r as $i,t as bi,n as Bi,o as Pt,R as Xi,j as Dn,F as Pn,v as tm,k as Pu,i as aa,g as im,V as vl,q as oa,O as Al,Q as nm,S as rm,T as Tr,W as sm,X as am,Y as Ou,Z as bl,$ as Ua,a0 as Cs,a1 as om}from"./index-BlVWs5Jy.js";import{u as Yn,C as Mu,I as lm,a as cm}from"./ChannelsStore-ewitrdNA.js";import{V as wa,_ as dm}from"./ssrBoot-DyFsjTgT.js";import{V as um,a as hm}from"./VCard-D7SaEEm4.js";import{V as fm}from"./VSwitch-HHlL0Ztk.js";import{S as pm,a as mm}from"./swiper-CQSNWKIc.js";import{C as gm}from"./CommentMuteSettings-CYy-TDZf.js";import{b as $a,c as Ga,d as ym}from"./VSelect-CrWBsNnu.js";class Va{static extractLiveAPIQualityFromDPlayer(e){if(e.quality===null)return"1080p";const t=/streams\/live\/[a-z0-9-]*\/(.*)\/mpegts/,i=e.quality.url.match(t);return i?i[1]:"1080p"}static extractVideoAPIQualityFromDPlayer(e){if(e.quality===null)return"1080p";const t=/streams\/video\/[0-9]*\/(.*)\/playlist/,i=e.quality.url.match(t);return i?i[1]:"1080p"}static generatePlayerBackgroundURL(){return`/assets/images/player-backgrounds/${(Math.floor(Math.random()*50)+1).toString().padStart(2,"0")}.jpg`}static getNetworkCircuitType(){if(navigator.connection&&navigator.connection.type)switch(navigator.connection.type){case"cellular":return"Cellular";default:return"Wi-Fi"}else return console.warn("[PlayerUtils] navigator.connection.type is not available."),null}static isHEVCVideoSupported(){return document.createElement("video").canPlayType('video/mp4; codecs="hvc1.1.6.L123.B0"')==="probably"}}const Bu=Ta.reduce((s,e)=>(s[e]={type:[Boolean,String,Number],default:!1},s),{}),Fu=Ta.reduce((s,e)=>{const t="offset"+_l(e);return s[t]={type:[String,Number],default:null},s},{}),Nu=Ta.reduce((s,e)=>{const t="order"+_l(e);return s[t]={type:[String,Number],default:null},s},{}),pc={col:Object.keys(Bu),offset:Object.keys(Fu),order:Object.keys(Nu)};function _m(s,e,t){let i=s;if(!(t==null||t===!1)){if(e){const n=e.replace(s,"");i+=`-${n}`}return s==="col"&&(i="v-"+i),s==="col"&&(t===""||t===!0)||(i+=`-${t}`),i.toLowerCase()}}const vm=["auto","start","end","center","baseline","stretch"],Am=Iu({cols:{type:[Boolean,String,Number],default:!1},...Bu,offset:{type:[String,Number],default:null},...Fu,order:{type:[String,Number],default:null},...Nu,alignSelf:{type:String,default:null,validator:s=>vm.includes(s)},...Du(),...Lu()},"VCol"),bm=ku()({name:"VCol",props:Am(),setup(s,e){let{slots:t}=e;const i=Er(()=>{const n=[];let a;for(a in pc)pc[a].forEach(o=>{const d=s[o],c=_m(a,o,d);c&&n.push(c)});const r=n.some(o=>o.startsWith("v-col-"));return n.push({"v-col":!r||!s.cols,[`v-col-${s.cols}`]:s.cols,[`offset-${s.offset}`]:s.offset,[`order-${s.order}`]:s.order,[`align-self-${s.alignSelf}`]:s.alignSelf}),n});return()=>{var n;return Ru(s.tag,{class:[i.value,s.class],style:s.style},(n=t.default)==null?void 0:n.call(t))}}}),Sl=["start","end","center"],Uu=["space-between","space-around","space-evenly"];function El(s,e){return Ta.reduce((t,i)=>{const n=s+_l(i);return t[n]=e(),t},{})}const Sm=[...Sl,"baseline","stretch"],$u=s=>Sm.includes(s),Gu=El("align",()=>({type:String,default:null,validator:$u})),Em=[...Sl,...Uu],Vu=s=>Em.includes(s),ju=El("justify",()=>({type:String,default:null,validator:Vu})),xm=[...Sl,...Uu,"stretch"],Hu=s=>xm.includes(s),qu=El("alignContent",()=>({type:String,default:null,validator:Hu})),mc={align:Object.keys(Gu),justify:Object.keys(ju),alignContent:Object.keys(qu)},Tm={align:"align",justify:"justify",alignContent:"align-content"};function Cm(s,e,t){let i=Tm[s];if(t!=null){if(e){const n=e.replace(s,"");i+=`-${n}`}return i+=`-${t}`,i.toLowerCase()}}const wm=Iu({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:$u},...Gu,justify:{type:String,default:null,validator:Vu},...ju,alignContent:{type:String,default:null,validator:Hu},...qu,...Du(),...Lu()},"VRow"),km=ku()({name:"VRow",props:wm(),setup(s,e){let{slots:t}=e;const i=Er(()=>{const n=[];let a;for(a in mc)mc[a].forEach(r=>{const o=s[r],d=Cm(a,r,o);d&&n.push(d)});return n.push({"v-row--no-gutters":s.noGutters,"v-row--dense":s.dense,[`align-${s.align}`]:s.align,[`justify-${s.justify}`]:s.justify,[`align-content-${s.alignContent}`]:s.alignContent}),n});return()=>{var n;return Ru(s.tag,{class:["v-row",i.value,s.class],style:s.style},(n=t.default)==null?void 0:n.call(t))}}});function Im(s){return{all:s=s||new Map,on:function(e,t){var i=s.get(e);i?i.push(t):s.set(e,[t])},off:function(e,t){var i=s.get(e);i&&(t?i.splice(i.indexOf(t)>>>0,1):s.set(e,[]))},emit:function(e,t){var i=s.get(e);i&&i.slice().map(function(n){n(t)}),(i=s.get("*"))&&i.slice().map(function(n){n(e,t)})}}}const Rm={id:-1,file_path:"",file_hash:"",file_size:0,recording_start_time:null,recording_end_time:null,duration:0,container_format:"MPEG-TS",video_codec:"MPEG-2",video_codec_profile:"High",video_scan_type:"Interlaced",video_frame_rate:29.97,video_resolution_width:1440,video_resolution_height:1080,primary_audio_codec:"AAC-LC",primary_audio_channel:"Stereo",primary_audio_sampling_rate:48e3,secondary_audio_codec:null,secondary_audio_channel:null,secondary_audio_sampling_rate:null,cm_sections:[]},gc={id:-1,recorded_video:Rm,recording_start_margin:0,recording_end_margin:0,is_partially_recorded:!1,channel:null,network_id:null,service_id:null,event_id:null,series_id:null,series_broadcast_period_id:null,title:"ÂèñÂæó‰∏≠‚Ä¶",series_title:null,episode_number:null,subtitle:null,description:"ÂèñÂæó‰∏≠‚Ä¶",detail:{},start_time:"2000-01-01T00:00:00+09:00",end_time:"2000-01-01T00:00:00+09:00",duration:0,is_free:!0,genres:[],primary_audio_type:"2/0„É¢„Éº„Éâ(„Çπ„ÉÜ„É¨„Ç™)",primary_audio_language:"Êó•Êú¨Ë™û",secondary_audio_type:null,secondary_audio_language:null};class Lm{static async fetchVideoJikkyoComments(e){const t=new Date(e.start_time).getTime()/1e3,i=new Date(e.end_time).getTime()/1e3,a=`https://jikkyo.tsukumijima.net/api/kakolog/${e.channel.id}?starttime=${t}&endtime=${i}&format=json`,r=await fc.get(a,{timeout:3e4});if(r.type==="error"){let l;switch(r.status){case 500:l="ÈÅéÂéª„É≠„Ç∞ API „Åß„Çµ„Éº„Éê„Éº„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇÈÅéÂéª„É≠„Ç∞ API „Å´‰∏çÂÖ∑Âêà„Åå„ÅÇ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ(HTTP Error 500)";break;case 503:l="ÁèæÂú®„ÄÅÈÅéÂéª„É≠„Ç∞ API „ÅØ‰∏ÄÊôÇÁöÑ„Å´Âà©Áî®„Åß„Åç„Å™„Åè„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ(HTTP Error 503)";break;default:l=`ÁèæÂú®„ÄÅÈÅéÂéª„É≠„Ç∞ API „Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ(HTTP Error ${r.status})`}return fc.showGenericError(r,l),{is_success:!1,comments:[],detail:l}}const o=await r.data;if("error"in o)return{is_success:!1,comments:[],detail:o.error||"ÈÅéÂéª„É≠„Ç∞„Ç≥„É°„É≥„Éà„ÇíÂèñÂæó„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"};const d=o.packet;return d.length===0?{is_success:!1,comments:[],detail:"„Åì„ÅÆÈå≤ÁîªÁï™ÁµÑ„ÅÆÈÅéÂéª„É≠„Ç∞„Ç≥„É°„É≥„Éà„ÅØÂ≠òÂú®„Åó„Å™„ÅÑ„Åã„ÄÅÁèæÂú®ÂèñÂæó‰∏≠„Åß„Åô„ÄÇ"}:{is_success:!0,comments:d.map(l=>{const f=l.chat.content;if(typeof f!="string"||f===""||l.chat.deleted==="1"||/\/[a-z]+ /.test(f))return null;const p=xr.parseCommentCommand(l.chat.mail),g=p.color,y=p.position,A=p.size,C=parseInt(l.chat.date),I=parseInt(l.chat.date_usec||"0",10),M={time:parseFloat(`${C-t}.${I}`),type:y,size:A,color:g,author:l.chat.user_id||"",text:f};return xr.isMutedComment(M.text,M.author,M.color,M.type,M.size)?null:M}).filter(l=>l!==null),detail:"ÈÅéÂéª„É≠„Ç∞„Ç≥„É°„É≥„Éà„ÇíÂèñÂæó„Åó„Åæ„Åó„Åü„ÄÇ"}}}const Gi=em("player",{state:()=>({is_watching:!1,is_player_initialized:!1,event_emitter:Im(),recorded_program:gc,is_virtual_keyboard_display:!1,is_fullscreen:!1,is_document_pip:!1,is_control_display:!0,is_panel_display:(()=>{const s=hn();switch(s.settings.panel_display_state){case"AlwaysDisplay":return!0;case"AlwaysFold":return!1;case"RestorePreviousState":return s.settings.showed_panel_last_time}})(),tv_panel_active_tab:hn().settings.tv_panel_active_tab,video_panel_active_tab:hn().settings.video_panel_active_tab,twitter_active_tab:hn().settings.twitter_active_tab,is_remocon_display:!1,is_zapping:!1,is_loading:!0,is_video_buffering:!0,is_video_paused:!1,is_background_display:!1,background_url:"",shortcut_key_modal:!1,live_stream_status:null,live_comment_init_failed_message:null,video_comment_init_failed_message:null}),actions:{startWatching(){this.reset(),this.is_watching=!0},stopWatching(){this.reset(),this.is_watching=!1},reset(){this.is_watching=!1,this.is_player_initialized=!1,this.recorded_program=gc,this.is_virtual_keyboard_display=!1,this.is_fullscreen=!1,this.is_document_pip=!1,this.is_control_display=!0,this.is_panel_display=(()=>{const s=hn();switch(s.settings.panel_display_state){case"AlwaysDisplay":return!0;case"AlwaysFold":return!1;case"RestorePreviousState":return s.settings.showed_panel_last_time}})(),this.tv_panel_active_tab=hn().settings.tv_panel_active_tab,this.video_panel_active_tab=hn().settings.video_panel_active_tab,this.twitter_active_tab=hn().settings.twitter_active_tab,this.is_remocon_display=!1,this.is_zapping=!1,this.is_loading=!0,this.is_video_buffering=!0,this.is_video_paused=!1,this.is_background_display=!1,this.background_url="",this.shortcut_key_modal=!1,this.live_stream_status=null,this.live_comment_init_failed_message=null}}}),Dm=In({name:"Watch-Header",props:{playback_mode:{type:String,required:!0}},data(){return{Utils:Object.freeze(ni),ProgramUtils:Object.freeze(Ca),time:wn().format(ni.isSmartphoneHorizontal()?"HH:mm:ss":"YYYY/MM/DD HH:mm:ss"),time_interval_id:0}},computed:{...Qn(Yn,Gi)},created(){this.time_interval_id=window.setInterval(()=>{this.time=wn().format(ni.isSmartphoneHorizontal()?"HH:mm:ss":"YYYY/MM/DD HH:mm:ss")},.1*1e3)},beforeUnmount(){window.clearInterval(this.time_interval_id)}}),Pm=["src"],Om=["innerHTML"],Mm={class:"watch-header__program-time"},Bm={class:"watch-header__now"};function Fm(s,e,t,i,n,a){const r=$i("Icon"),o=$i("router-link");return Pt(),ti("header",{class:Bi(["watch-header",{"watch-header--video":s.playback_mode==="Video"}])},[Yi((Pt(),cn(o,{class:"watch-header__back-icon",to:s.playback_mode==="Live"?"/":"/log/"},{default:Mi(()=>[Ht(r,{icon:"fluent:arrow-left-12-filled",width:"25px"})]),_:1},8,["to"])),[[Xi]]),s.playback_mode==="Live"?(Pt(),ti("img",{key:0,class:"watch-header__broadcaster",src:`${s.Utils.api_base_url}/channels/${s.channelsStore.channel.current.id}/logo`},null,8,Pm)):pn("",!0),Qe("span",{class:"watch-header__program-title",innerHTML:s.ProgramUtils.decorateProgramInfo(s.playback_mode==="Live"?s.channelsStore.channel.current.program_present:s.playerStore.recorded_program,"title")},null,8,Om),Qe("span",Mm,bi(s.ProgramUtils.getProgramTime(s.playback_mode==="Live"?s.channelsStore.channel.current.program_present:s.playerStore.recorded_program,!0)),1),Ht(wa),Qe("span",Bm,bi(s.time),1)],2)}const Nm=Zn(Dm,[["render",Fm],["__scopeId","data-v-453c24f7"]]),Um={left_column:[{name:"ÂÖ®Ëà¨",icon:"fluent:home-20-filled",icon_height:"22px",shortcuts:[{name:"Êï∞Â≠ó„Ç≠„Éº/„ÉÜ„É≥„Ç≠„Éº„Å´ÂØæÂøú„Åô„Çã„É™„É¢„Ç≥„É≥Áï™Âè∑ (1~12) „ÅÆÂú∞„Éá„Ç∏„ÉÅ„É£„É≥„Éç„É´„Å´Âàá„ÇäÊõø„Åà„Çã",keys:[{name:"1~9, 0, -(=), ^(~)",icon:!1}]},{name:"Êï∞Â≠ó„Ç≠„Éº/„ÉÜ„É≥„Ç≠„Éº„Å´ÂØæÂøú„Åô„Çã„É™„É¢„Ç≥„É≥Áï™Âè∑ (1~12) „ÅÆ BS „ÉÅ„É£„É≥„Éç„É´„Å´Âàá„ÇäÊõø„Åà„Çã",keys:[{name:"Shift",icon:!1},{name:"1~9, 0, -(=), ^(~)",icon:!1}]},{name:"Ââç„ÅÆ„ÉÅ„É£„É≥„Éç„É´„Å´Âàá„ÇäÊõø„Åà„Çã",keys:[{name:"fluent:arrow-up-12-filled",icon:!0}]},{name:"Ê¨°„ÅÆ„ÉÅ„É£„É≥„Éç„É´„Å´Âàá„ÇäÊõø„Åà„Çã",keys:[{name:"fluent:arrow-down-12-filled",icon:!0}]},{name:"„Ç≠„Éº„Éú„Éº„Éâ„Ç∑„Éß„Éº„Éà„Ç´„ÉÉ„Éà„ÅÆ‰∏ÄË¶ß„ÇíË°®Á§∫„Åô„Çã",keys:[{name:"Ôºè(Ôºü)",icon:!1}]}]},{name:"„Éó„É¨„Ç§„É§„Éº",icon:"fluent:play-20-filled",icon_height:"20px",shortcuts:[{name:"ÂÜçÁîü / ‰∏ÄÊôÇÂÅúÊ≠¢„ÅÆÂàá„ÇäÊõø„Åà",keys:[{name:"Space",icon:!1}]},{name:"„Éï„É´„Çπ„ÇØ„É™„Éº„É≥„ÅÆÂàá„ÇäÊõø„Åà",keys:[{name:"F",icon:!1}]},{name:"Picture-in-Picture „ÅÆË°®Á§∫Âàá„ÇäÊõø„Åà",keys:[{name:"E",icon:!1}]},{name:"„Ç≥„É°„É≥„Éà„ÅÆË°®Á§∫Âàá„ÇäÊõø„Åà",keys:[{name:"D",icon:!1}]},{name:"„Ç≥„É°„É≥„ÉàÂÖ•Âäõ„Éï„Ç©„Éº„É†„Å´„Éï„Ç©„Éº„Ç´„Çπ„Åô„Çã",keys:[{name:"M",icon:!1}]},{name:"„Ç≥„É°„É≥„ÉàÂÖ•Âäõ„Éï„Ç©„Éº„É†„ÇíÈñâ„Åò„Çã",keys:[{name:ni.CtrlOrCmd(),icon:!1},{name:"M",icon:!1}]},{name:"„Ç≥„É°„É≥„Éà„ÇíÈÄÅ‰ø°„Åô„Çã",keys:[{name:"„Ç≥„É°„É≥„ÉàÂÖ•Âäõ„Éï„Ç©„Éº„É†„ÇíË°®Á§∫",icon:!1},{name:"Enter",icon:!1}]}]}],right_column:[{name:"„Éë„Éç„É´",icon:"fluent:panel-right-20-filled",icon_height:"24px",shortcuts:[{name:"„Éë„Éç„É´„ÅÆË°®Á§∫Âàá„ÇäÊõø„Åà",keys:[{name:"P",icon:!1}]},{name:"Áï™ÁµÑÊÉÖÂ†±„Çø„Éñ„ÇíË°®Á§∫„Åô„Çã",keys:[{name:"K",icon:!1}]},{name:"„ÉÅ„É£„É≥„Éç„É´„Çø„Éñ„ÇíË°®Á§∫„Åô„Çã",keys:[{name:"L",icon:!1}]},{name:"„Ç≥„É°„É≥„Éà„Çø„Éñ„ÇíË°®Á§∫„Åô„Çã",keys:[{name:"Ôºõ(Ôºã)",icon:!1}]}]}]},$m={left_column:[{name:"ÂÖ®Ëà¨",icon:"fluent:home-20-filled",icon_height:"22px",shortcuts:[{name:"„Ç≠„Éº„Éú„Éº„Éâ„Ç∑„Éß„Éº„Éà„Ç´„ÉÉ„Éà„ÅÆ‰∏ÄË¶ß„ÇíË°®Á§∫„Åô„Çã",keys:[{name:"Ôºè(Ôºü)",icon:!1}]}]},{name:"„Éó„É¨„Ç§„É§„Éº",icon:"fluent:play-20-filled",icon_height:"20px",shortcuts:[{name:"ÂÜçÁîü / ‰∏ÄÊôÇÂÅúÊ≠¢„ÅÆÂàá„ÇäÊõø„Åà",keys:[{name:"Space",icon:!1}]},{name:"5ÁßíÊó©Êàª„Åó",keys:[{name:"fluent:arrow-left-12-filled",icon:!0}]},{name:"5ÁßíÊó©ÈÄÅ„Çä",keys:[{name:"fluent:arrow-right-12-filled",icon:!0}]},{name:"15ÁßíÊó©Êàª„Åó",keys:[{name:ni.CtrlOrCmd(),icon:!1},{name:"fluent:arrow-left-12-filled",icon:!0}]},{name:"15ÁßíÊó©ÈÄÅ„Çä",keys:[{name:ni.CtrlOrCmd(),icon:!1},{name:"fluent:arrow-right-12-filled",icon:!0}]},{name:"30ÁßíÊó©Êàª„Åó",keys:[{name:"Shift",icon:!1},{name:"fluent:arrow-left-12-filled",icon:!0}]},{name:"30ÁßíÊó©ÈÄÅ„Çä",keys:[{name:"Shift",icon:!1},{name:"fluent:arrow-right-12-filled",icon:!0}]},{name:"60ÁßíÊó©Êàª„Åó",keys:[{name:ni.AltOrOption(),icon:!1},{name:"fluent:arrow-left-12-filled",icon:!0}]},{name:"60ÁßíÊó©ÈÄÅ„Çä",keys:[{name:ni.AltOrOption(),icon:!1},{name:"fluent:arrow-right-12-filled",icon:!0}]},{name:"„Éï„É´„Çπ„ÇØ„É™„Éº„É≥„ÅÆÂàá„ÇäÊõø„Åà",keys:[{name:"F",icon:!1}]},{name:"Picture-in-Picture „ÅÆË°®Á§∫Âàá„ÇäÊõø„Åà",keys:[{name:"E",icon:!1}]},{name:"„Ç≥„É°„É≥„Éà„ÅÆË°®Á§∫Âàá„ÇäÊõø„Åà",keys:[{name:"D",icon:!1}]}]}],right_column:[{name:"„Éë„Éç„É´",icon:"fluent:panel-right-20-filled",icon_height:"24px",shortcuts:[{name:"„Éë„Éç„É´„ÅÆË°®Á§∫Âàá„ÇäÊõø„Åà",keys:[{name:"P",icon:!1}]},{name:"Áï™ÁµÑÊÉÖÂ†±„Çø„Éñ„ÇíË°®Á§∫„Åô„Çã",keys:[{name:"K",icon:!1}]},{name:"„Ç≥„É°„É≥„Éà„Çø„Éñ„ÇíË°®Á§∫„Åô„Çã",keys:[{name:"Ôºõ(Ôºã)",icon:!1}]}]}]},Gm=In({name:"KeyboardShortcutList",props:{playback_mode:{type:String,required:!0}},data(){return{Utils:Object.freeze(ni),live_shortcut_list:structuredClone(Um),video_shortcut_list:structuredClone($m)}},computed:{...Qn(Gi,hn),shortcut_list(){return this.playback_mode==="Live"?this.live_shortcut_list:this.video_shortcut_list}},created(){this.settingsStore.settings.tv_channel_selection_requires_alt_key===!0&&(this.live_shortcut_list.left_column[0].shortcuts[0].keys.unshift({name:ni.AltOrOption(),icon:!1}),this.live_shortcut_list.left_column[0].shortcuts[1].keys.unshift({name:ni.AltOrOption(),icon:!1}))}}),Vm={class:"px-5 pb-6"},jm={class:"text-subtitle-1 d-flex align-center font-weight-bold"},Hm={key:1,width:"24px",height:"24px",viewBox:"0 0 512 512"},qm={class:"ml-2"},zm={class:"text-subtitle-2 mt-2 d-flex align-center font-weight-medium"},Km=["innerHTML"],Wm={class:"ml-auto d-flex align-center flex-shrink-0"},Ym={class:"shortcut-key"},Xm=["innerHTML"],Jm={key:0,class:"shortcut-key-plus"};function Qm(s,e,t,i,n,a){const r=$i("Icon");return Pt(),cn(fm,{"max-width":"1050",transition:"slide-y-transition",modelValue:s.playerStore.shortcut_key_modal,"onUpdate:modelValue":e[1]||(e[1]=o=>s.playerStore.shortcut_key_modal=o)},{default:Mi(()=>[Ht(hm,null,{default:Mi(()=>[Ht(um,{class:"px-5 pt-6 pb-3 d-flex align-center font-weight-bold"},{default:Mi(()=>[Ht(r,{icon:"fluent:keyboard-20-filled",height:"28px"}),e[2]||(e[2]=Qe("span",{class:"ml-3"},"„Ç≠„Éº„Éú„Éº„Éâ„Ç∑„Éß„Éº„Éà„Ç´„ÉÉ„Éà",-1)),Ht(wa),Yi((Pt(),ti("div",{class:"d-flex align-center rounded-circle cursor-pointer px-2 py-2",onClick:e[0]||(e[0]=o=>s.playerStore.shortcut_key_modal=!1)},[Ht(r,{icon:"fluent:dismiss-12-filled",width:"23px",height:"23px"})])),[[Xi]])]),_:1}),Qe("div",Vm,[Ht(km,null,{default:Mi(()=>[(Pt(!0),ti(Pn,null,Dn(s.shortcut_list,(o,d)=>(Pt(),cn(bm,{cols:"6",key:d},{default:Mi(()=>[(Pt(!0),ti(Pn,null,Dn(o,c=>(Pt(),ti("div",{class:"mt-3",key:c.name},[Qe("div",jm,[c.name!=="„Éá„Éº„ÇøÊîæÈÄÅ"?(Pt(),cn(r,{key:0,icon:c.icon,height:c.icon_height},null,8,["icon","height"])):(Pt(),ti("svg",Hm,[...e[3]||(e[3]=[Qe("path",{fill:"currentColor",d:"M248.039 381.326L355.039 67.8258C367.539 28.3257 395.039 34.3258 406.539 34.3258C431.039 34.3258 453.376 61.3258 441.039 96.8258C362.639 322.426 343.539 375.326 340.539 384.826C338.486 391.326 342.039 391.326 345.539 391.326C377.039 391.326 386.539 418.326 386.539 435.326C386.539 458.826 371.539 477.326 350.039 477.326H214.539C179.039 477.326 85.8269 431.3 88.0387 335.826C91.0387 206.326 192.039 183.326 243.539 183.326H296.539L265.539 272.326H243.539C185.539 272.326 174.113 314.826 176.039 334.326C180.039 374.826 215.039 389.814 237.039 390.326C244.539 390.5 246.039 386.826 248.039 381.326Z"},null,-1)])])),Qe("span",qm,bi(c.name),1)]),(Pt(!0),ti(Pn,null,Dn(c.shortcuts,l=>(Pt(),ti("div",{class:"mt-3",key:l.name},[Qe("div",zm,[Qe("span",{class:"mr-2",innerHTML:l.name},null,8,Km),Qe("div",Wm,[(Pt(!0),ti(Pn,null,Dn(l.keys,(f,p)=>(Pt(),ti("div",{class:"ml-auto d-flex align-center",key:f.name},[Qe("span",Ym,[(Pt(!0),ti(Pn,null,Dn(f.name.split(";"),g=>Yi((Pt(),cn(r,{icon:g,height:"18px",key:g},null,8,["icon"])),[[tm,f.icon===!0]])),128)),f.icon===!1?(Pt(),ti("span",{key:0,innerHTML:f.name},null,8,Xm)):pn("",!0)]),p<l.keys.length-1?(Pt(),ti("span",Jm,"+")):pn("",!0)]))),128))])])]))),128))]))),128))]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1},8,["modelValue"])}const Zm=Zn(Gm,[["render",Qm],["__scopeId","data-v-68c6a102"]]),eg=In({name:"Watch-Navigation",computed:{...Qn(Gi)}}),tg="/assets/images/icon.svg",ig={class:"watch-navigation__link",href:"https://jikkyo.tsukumijima.net",target:"_blank"};function ng(s,e,t,i,n,a){const r=$i("router-link"),o=$i("Icon"),d=Pu("ftooltip");return Pt(),ti("nav",{class:"watch-navigation",onMousemove:e[0]||(e[0]=c=>s.playerStore.event_emitter.emit("SetControlDisplayTimer",{event:c})),onTouchmove:e[1]||(e[1]=c=>s.playerStore.event_emitter.emit("SetControlDisplayTimer",{event:c})),onClick:e[2]||(e[2]=c=>s.playerStore.event_emitter.emit("SetControlDisplayTimer",{event:c}))},[Yi((Pt(),cn(r,{class:"watch-navigation__icon",to:"/"},{default:Mi(()=>[...e[3]||(e[3]=[Qe("img",{class:"watch-navigation__icon-image",src:tg,width:"23px"},null,-1)])]),_:1})),[[Xi]]),Yi((Pt(),cn(r,{class:Bi(["watch-navigation__link",{"watch-navigation__link--active":s.$route.path.startsWith("/watch")}]),"active-class":"watch-navigation__link--active",to:"/"},{default:Mi(()=>[Ht(o,{class:"watch-navigation__link-icon",icon:"fluent:tv-20-regular",width:"26px"})]),_:1},8,["class"])),[[Xi],[d,"„ÉÜ„É¨„ÉìÂÆüÊ≥Å",void 0,{right:!0}]]),Yi((Pt(),cn(r,{class:Bi(["watch-navigation__link",{"watch-navigation__link--active":s.$route.path.startsWith("/log")}]),"active-class":"watch-navigation__link--active",to:"/log/"},{default:Mi(()=>[Ht(o,{class:"watch-navigation__link-icon",icon:"fluent:receipt-play-20-regular",width:"26px"})]),_:1},8,["class"])),[[Xi],[d,"ÈÅéÂéª„É≠„Ç∞ÂÜçÁîü",void 0,{right:!0}]]),Yi((Pt(),ti("a",ig,[Ht(o,{class:"watch-navigation__link-icon",icon:"fluent:slide-text-multiple-20-regular",width:"26px"})])),[[Xi],[d,"ÈÅéÂéª„É≠„Ç∞ API",void 0,{right:!0}]]),Yi((Pt(),cn(r,{class:Bi(["watch-navigation__link",{"watch-navigation__link--active":s.$route.path.startsWith("/about")}]),"active-class":"watch-navigation__link--active",to:"/about/"},{default:Mi(()=>[Ht(o,{class:"watch-navigation__link-icon",icon:"fluent:info-16-regular",width:"26px"})]),_:1},8,["class"])),[[Xi],[d,"NX-Jikkyo „Å®„ÅØ",void 0,{right:!0}]]),Ht(wa),Yi((Pt(),cn(r,{class:Bi(["watch-navigation__link",{"watch-navigation__link--active":s.$route.path.startsWith("/settings")}]),"active-class":"watch-navigation__link--active",to:"/settings/"},{default:Mi(()=>[Ht(o,{class:"watch-navigation__link-icon",icon:"fluent:settings-20-regular",width:"26px"})]),_:1},8,["class"])),[[Xi],[d,"Ë®≠ÂÆö",void 0,{right:!0}]])],32)}const rg=Zn(eg,[["render",ng],["__scopeId","data-v-aece88a4"]]),sg=In({name:"Panel-ChannelTab",components:{Swiper:mm,SwiperSlide:pm},data(){return{Utils:Object.freeze(ni),ChannelUtils:Object.freeze(Mu),ProgramUtils:Object.freeze(Ca),active_tab_index:0,swiper_instance:null}},computed:{...Qn(Yn,Gi)},watch:{active_tab_index(){var s,e;(s=this.swiper_instance)==null||s.updateAutoHeight(),(e=this.swiper_instance)==null||e.slideTo(this.active_tab_index)},async"playerStore.tv_panel_active_tab"(){var s;await ni.sleep(.05),(s=this.swiper_instance)==null||s.updateAutoHeight()},async"playerStore.video_panel_active_tab"(){var s;await ni.sleep(.05),(s=this.swiper_instance)==null||s.updateAutoHeight()}},async mounted(){var s,e,t;if(await ni.sleep(.05),(s=this.swiper_instance)==null||s.updateAutoHeight(),(e=document.querySelector(".channels-list-container"))==null||e.addEventListener("scroll",()=>{var i;(i=this.swiper_instance)==null||i.updateAutoHeight()},{passive:!0}),this.playerStore.tv_panel_active_tab==="Channel")for(let i=0;i<20;i++)await ni.sleep(.1),(t=this.swiper_instance)==null||t.updateAutoHeight()}}),ag={class:"channels-container channels-container--watch"},og={class:"channels-tab"},lg={class:"channels-list-container"},cg={class:"channels"},dg={class:"channel__broadcaster"},ug=["src"],hg={class:"channel__broadcaster-content"},fg={class:"channel__broadcaster-name"},pg={class:"ml-1"},mg={class:"channel__program-present"},gg=["innerHTML"],yg={class:"channel__program-present-time"},_g={class:"channel__program-following"},vg={class:"channel__program-following-title"},Ag=["innerHTML"],bg={class:"channel__program-following-time"},Sg={class:"channel__progressbar"};function Eg(s,e,t,i,n,a){const r=$i("router-link"),o=$i("SwiperSlide"),d=$i("Swiper");return Pt(),ti("div",ag,[Qe("div",og,[Qe("div",{class:"channels-tab__buttons",style:aa({"--tab-length":Array.from(s.channelsStore.channels_list_with_pinned_for_watch).length,"--active-tab-index":s.active_tab_index})},[(Pt(!0),ti(Pn,null,Dn(Array.from(s.channelsStore.channels_list_with_pinned_for_watch),([c],l)=>(Pt(),cn(vl,{variant:"flat",class:Bi(["channels-tab__button",{"channels-tab__button--active":s.active_tab_index===l}]),key:c,onClick:f=>s.active_tab_index=l},{default:Mi(()=>[im(bi(c),1)]),_:2},1032,["class","onClick"]))),128)),e[2]||(e[2]=Qe("div",{class:"channels-tab__highlight"},null,-1))],4)]),Qe("div",lg,[Ht(d,{class:"channels-list","space-between":32,"auto-height":!0,"touch-start-prevent-default":!1,observer:!0,"observe-parents":!0,onSwiper:e[0]||(e[0]=c=>s.swiper_instance=c),onSlideChange:e[1]||(e[1]=c=>s.active_tab_index=c.activeIndex)},{default:Mi(()=>[(Pt(!0),ti(Pn,null,Dn(Array.from(s.channelsStore.channels_list_with_pinned_for_watch),([c,l])=>(Pt(),cn(o,{key:c},{default:Mi(()=>[Qe("div",cg,[(Pt(!0),ti(Pn,null,Dn(l,f=>Yi((Pt(),cn(r,{class:"channel",draggable:"false",key:f.id,to:`/watch/${f.display_channel_id}`},{default:Mi(()=>[Qe("div",dg,[Qe("img",{class:"channel__broadcaster-icon",src:`${s.Utils.api_base_url}/channels/${f.id}/logo`},null,8,ug),Qe("div",hg,[Qe("span",fg,"Ch: "+bi(f.channel_number)+" "+bi(f.name),1),Qe("div",{class:Bi(["channel__broadcaster-force",`channel__broadcaster-force--${s.ChannelUtils.getChannelForceType(f.jikkyo_force)}`])},[e[3]||(e[3]=Qe("svg",{class:"iconify iconify--fa-solid",width:"9.63px",height:"11px",viewBox:"0 0 448 512"},[Qe("path",{fill:"currentColor",d:"M323.56 51.2c-20.8 19.3-39.58 39.59-56.22 59.97C240.08 73.62 206.28 35.53 168 0C69.74 91.17 0 209.96 0 281.6C0 408.85 100.29 512 224 512s224-103.15 224-230.4c0-53.27-51.98-163.14-124.44-230.4zm-19.47 340.65C282.43 407.01 255.72 416 226.86 416C154.71 416 96 368.26 96 290.75c0-38.61 24.31-72.63 72.79-130.75c6.93 7.98 98.83 125.34 98.83 125.34l58.63-66.88c4.14 6.85 7.91 13.55 11.27 19.97c27.35 52.19 15.81 118.97-33.43 153.42z"})],-1)),Qe("span",pg,bi(f.jikkyo_force??"--"),1)],2)])]),Qe("div",mg,[Qe("span",{class:"channel__program-present-title",innerHTML:s.ProgramUtils.decorateProgramInfo(f.program_present,"title")},null,8,gg),Qe("span",yg,bi(s.ProgramUtils.getProgramTime(f.program_present)),1)]),Qe("div",_g,[Qe("div",vg,[e[4]||(e[4]=Qe("span",{class:"channel__program-following-title-decorate"},"NEXT",-1)),e[5]||(e[5]=Qe("svg",{class:"channel__program-following-title-icon iconify iconify--fluent",width:"16px",height:"16px",viewBox:"0 0 20 20"},[Qe("path",{fill:"currentColor",d:"M10.018 5.486a1 1 0 0 1 1.592-.806l5.88 4.311a1.25 1.25 0 0 1 0 2.017l-5.88 4.311a1 1 0 0 1-1.592-.806v-3.16L4.61 15.319a1 1 0 0 1-1.592-.806V5.486A1 1 0 0 1 4.61 4.68l5.408 3.966v-3.16Z"})],-1)),Qe("span",{class:"channel__program-following-title-text",innerHTML:s.ProgramUtils.decorateProgramInfo(f.program_following,"title")},null,8,Ag)]),Qe("span",bg,bi(s.ProgramUtils.getProgramTime(f.program_following)),1)]),Qe("div",Sg,[Qe("div",{class:"channel__progressbar-progress",style:aa(`width:${s.ProgramUtils.getProgramProgress(f.program_present)}%;`)},null,4)])]),_:2},1032,["to"])),[[Xi]])),128))])]),_:2},1024))),128))]),_:1})])])}const xg=Zn(sg,[["render",Eg],["__scopeId","data-v-2fa686b9"]]),Hr=null,{min:Sr,max:Hn,abs:yc,floor:Tg}=Math,zu=(s,e,t)=>Sr(t,Hn(e,s)),Ku=s=>[...s].sort((e,t)=>e-t),_c=typeof queueMicrotask=="function"?queueMicrotask:s=>{Promise.resolve().then(s)},xl=s=>{let e;return()=>(s&&(e=s(),s=void 0),e)},Cr=-1,la=(s,e,t)=>{const i=t?"unshift":"push";for(let n=0;n<e;n++)s[i](Cr);return s},ca=(s,e)=>{const t=s.t[e];return t===Cr?s.o:t},Cg=(s,e,t)=>{const i=s.t[e]===Cr;return s.t[e]=t,s.i=Sr(e,s.i),i},js=(s,e)=>{if(!s.l)return 0;if(s.i>=e)return s.u[e];s.i<0&&(s.u[0]=0,s.i=0);let t=s.i,i=s.u[t];for(;t<e;)i+=ca(s,t),s.u[++t]=i;return s.i=e,i},_r=(s,e,t=0,i=s.l-1)=>{for(;t<=i;){const n=Tg((t+i)/2),a=js(s,n);if(a<=e){if(a+ca(s,n)>e)return n;t=n+1}else i=n-1}return zu(t,0,s.l-1)},vc=(s,e,t)=>{const i=e-s.l;return s.i=t?-1:Sr(e-1,s.i),s.l=e,i>0?(la(s.u,i),la(s.t,i,t),s.o*i):(s.u.splice(i),(t?s.t.splice(0,-i):s.t.splice(i)).reduce((n,a)=>n-(a===Cr?s.o:a),0))},wg=typeof window<"u",Wu=()=>document.documentElement,kg=s=>s.ownerDocument,Ig=s=>s.defaultView,Yu=xl(()=>!!wg&&getComputedStyle(Wu()).direction==="rtl"),Xu=xl(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Rg=xl(()=>"scrollBehavior"in Wu().style),Lg=s=>!!s.p(),Dg=(s,e=40,t=4,i=0,n,a=!1)=>{let r=!!i,o=1,d=0,c=0,l=0,f=0,p=0,g=0,y=0,A=0,C=r?[0,Hn(i-1,0)]:Hr,I=[0,0],P=0;const M=((ce,be)=>({o:be,t:la([],ce),l:ce,i:-1,u:la([],ce)}))(s,e),G=new Set,Z=()=>l-c,le=()=>Z()+p+f,W=ce=>((be,Le,xe,ve)=>{if(ve=Sr(ve,be.l-1),js(be,ve)<=Le){const ze=_r(be,Le+xe,ve);return[_r(be,Le,ve,ze),ze]}{const ze=_r(be,Le,void 0,ve);return[ze,_r(be,Le+xe,ze)]}})(M,ce,d,I[0]),N=()=>(ce=>ce.l?js(ce,ce.l-1)+ca(ce,ce.l-1):0)(M),U=ce=>js(M,ce)-p,O=ce=>ca(M,ce),z=ce=>{ce&&(Xu()&&y!==0?p+=ce:f+=ce)};return{h:()=>o,m:()=>(ce=>[ce.t.slice(),ce.o])(M),v:()=>{let ce,be;return g?[ce,be]=I:([ce,be]=I=W(Hn(0,le())),C&&(ce=Sr(ce,C[0]),be=Hn(be,C[1]))),y!==1&&(ce-=Hn(0,t)),y!==2&&(be+=Hn(0,t)),[Hn(ce,0),Sr(be,M.l-1)]},S:()=>_r(M,le()),I:()=>_r(M,le()+d),k:ce=>M.t[ce]===Cr,O:()=>!!C&&M.t.slice(Hn(0,C[0]-1),Sr(M.l-1,C[1]+1)+1).includes(Cr),j:U,T:O,B:()=>M.l,q:()=>l,P:()=>y!==0,p:()=>d,R:()=>c,M:N,N:()=>(g=f,f=0,[g,A===2||Z()+d>=N()]),A:(ce,be)=>{const Le=[ce,be];return G.add(Le),()=>{G.delete(Le)}},H:(ce,be)=>{let Le,xe,ve=0;switch(ce){case 1:{const ze=g;g=0;const Pe=be-l,Y=yc(Pe);ze&&Y<yc(ze)+1||A!==0||(y=Pe<0?2:1),r&&(C=Hr,r=!1),l=be,ve=4;const b=Z();b>=-d&&b<=N()&&(ve+=1,xe=Y>d);break}case 2:ve=8,y!==0&&(Le=!0,ve+=1),y=0,A=0,C=Hr;break;case 3:{const ze=be.filter(([Pe,Y])=>M.t[Pe]!==Y);if(!ze.length)break;z(ze.reduce((Pe,[Y,b])=>((A===2||(C?!r&&Y<C[0]:U(Y)+(y===0&&A===0?O(Y):0)<Z()))&&(Pe+=b-O(Y)),Pe),0));for(const[Pe,Y]of ze){const b=O(Pe),S=Cg(M,Pe,Y);a&&(P+=S?Y:Y-b)}a&&d&&P>d&&(z(((Pe,Y)=>{let b=0;const S=[];Pe.t.forEach((ie,se)=>{ie!==Cr&&(S.push(ie),se<Y&&b++)}),Pe.i=-1;const k=Ku(S),R=k.length,w=R/2|0,$=R%2==0?(k[w-1]+k[w])/2:k[w],X=Pe.o;return((Pe.o=$)-X)*Hn(Y-b,0)})(M,_r(M,le()))),a=!1),ve=3,xe=!0;break}case 4:d!==be&&(d=be,ve=3);break;case 5:be[1]?(z(vc(M,be[0],!0)),A=2,ve=1):(vc(M,be[0]),ve=1);break;case 6:c=be;break;case 7:A=1;break;case 8:C=W(be),ve=1}ve&&(o=1+(2147483647&o),Le&&p&&(f+=p,p=0),G.forEach(([ze,Pe])=>{ve&ze&&Pe(xe)}))}}},jo=setTimeout,Hs=(s,e)=>e&&Yu()?-s:s,Pg=(s,e,t,i,n,a)=>{const r=Date.now;let o=0,d=!1,c=!1,l=!1,f=!1;const p=(()=>{let I;const P=()=>{I!=Hr&&clearTimeout(I)},M=()=>{P(),I=jo(()=>{I=Hr,(()=>{if(d||c)return d=!1,void p();l=!1,s.H(2)})()},150)};return M.V=P,M})(),g=()=>{o=r(),l&&(f=!0),s.H(1,i()),p()},y=I=>{if(d||!s.P()||I.ctrlKey)return;const P=r()-o;150>P&&50<P&&(t?I.deltaX:I.deltaY)&&(d=!0)},A=()=>{c=!0,l=f=!1},C=()=>{c=!1,Xu()&&(l=!0)};return e.addEventListener("scroll",g),e.addEventListener("wheel",y,{passive:!0}),e.addEventListener("touchstart",A,{passive:!0}),e.addEventListener("touchend",C,{passive:!0}),{C:()=>{e.removeEventListener("scroll",g),e.removeEventListener("wheel",y),e.removeEventListener("touchstart",A),e.removeEventListener("touchend",C),p.V()},F:()=>{const[I,P]=s.N();I&&(n(Hs(I,t),P,f),f=!1,P&&s.p()>s.M()&&s.H(1,i()))}}},Og=s=>{let e;return{J(t){(e||(e=new(Ig(kg(t))).ResizeObserver(s))).observe(t)},L(t){e.unobserve(t)},C(){e&&e.disconnect()}}},Mg=In({props:{W:{type:Object,required:!0},X:{type:Object,required:!0},Y:{type:Object,required:!0},U:{type:Function,required:!0},D:{type:Number,required:!0},G:{type:Boolean},K:{type:Boolean},Z:{type:String,required:!0},ee:Object},setup(s){const e=oa(),t=Er(()=>s.W.value&&s.X.j(s.D)),i=Er(()=>s.W.value&&s.X.k(s.D));return Tr(()=>e.value&&s.D,(n,a,r)=>{r(s.U(e.value,s.D))},{flush:"post"}),()=>{var n;const{Y:a,G:r,K:o,Z:d}=s,c=i.value,{style:l,...f}=(n=s.ee)!==null&&n!==void 0?n:{},p={position:c&&o?void 0:"absolute",[r?"height":"width"]:"100%",[r?"top":"left"]:"0px",[r?Yu()?"right":"left":"top"]:t.value+"px",visibility:!c||o?"visible":"hidden",...l};return r&&(p.display="flex"),Ht(d,sm({ref:e,style:p},f),typeof(g=a)=="function"||Object.prototype.toString.call(g)==="[object Object]"&&!Al(g)?a:{default:()=>[a],_:2},16,["style"]);var g}}}),Bg=(s,e)=>{const t=s.key;return t??"_"+e},Fg=(s,e)=>s[0]===e[0]&&s[1]===e[1],Ng=In({props:{data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"},itemProps:Function,keepMounted:Array},emits:["scroll","scrollEnd"],setup(s,{emit:e,expose:t,slots:i}){let n=!!s.ssrCount;const a=s.horizontal,r=oa(),o=Dg(s.data.length,s.itemSize,s.overscan,s.ssrCount,0,!s.itemSize),d=((I,P)=>{let M;const G=P?"width":"height",Z=new WeakMap,le=Og(W=>{const N=[];for(const{target:U,contentRect:O}of W)if(U.offsetParent)if(U===M)I.H(4,O[G]);else{const z=Z.get(U);z!=Hr&&N.push([z,O[G]])}N.length&&I.H(3,N)});return{te(W){le.J(M=W)},re:(W,N)=>(Z.set(W,N),le.J(W),()=>{Z.delete(W),le.L(W)}),oe:le.C}})(o,a),c=((I,P)=>{let M,G,Z;const le=P?"scrollLeft":"scrollTop",W=P?"overflowX":"overflowY",N=async(U,O)=>{if(!M)return void _c(()=>N(U,O));Z&&Z();const z=()=>{let ce;return[new Promise((be,Le)=>{ce=be,Z=Le,Lg(I)&&jo(Le,150)}),I.A(2,()=>{ce&&ce()})]};if(O&&Rg()){for(;I.H(8,U()),I.O();){const[ce,be]=z();try{await ce}catch{return}finally{be()}}M.scrollTo({[P?"left":"top"]:Hs(U(),P),behavior:"smooth"})}else for(;;){const[ce,be]=z();try{M[le]=Hs(U(),P),I.H(7),await ce}catch{return}finally{be()}}};return{ne(U){M=U,G=Pg(I,U,P,()=>Hs(U[le],P),(O,z,ce)=>{if(ce){const be=U.style,Le=be[W];be[W]="hidden",jo(()=>{be[W]=Le})}z?(U[le]=I.q()+O,Z&&Z()):U[le]+=O})},oe(){G&&G.C()},se(U){N(()=>U)},ie(U){U+=I.q(),N(()=>U)},le(U,{align:O,smooth:z,offset:ce=0}={}){if(U=zu(U,0,I.B()-1),O==="nearest"){const be=I.j(U),Le=I.q();if(be<Le)O="start";else{if(!(be+I.T(U)>Le+I.p()))return;O="end"}}N(()=>ce+I.R()+I.j(U)+(O==="end"?I.T(U)-I.p():O==="center"?(I.T(U)-I.p())/2:0),z)},ce:()=>{G&&G.F()}}})(o,a),l=oa(o.h()),f=o.A(1,()=>{l.value=o.h()}),p=o.A(4,()=>{e("scroll",o.q())}),g=o.A(8,()=>{e("scrollEnd")}),y=Er(I=>{l.value;const P=o.v();return I&&Fg(I,P)?I:P}),A=Er(()=>l.value&&o.P()),C=Er(()=>l.value&&o.M());return nm(()=>{n=!1,_c(()=>{const I=P=>{d.te(P),c.ne(P)};s.scrollRef?I(s.scrollRef):I(r.value.parentElement)})}),rm(()=>{f(),p(),g(),d.oe(),c.oe()}),Tr(()=>s.data.length,I=>{o.H(5,[I,s.shift])}),Tr(()=>s.startMargin,I=>{o.H(6,I)},{immediate:!0}),Tr([l],()=>{c.ce()},{flush:"post"}),t({get scrollOffset(){return o.q()},get scrollSize(){return(I=>Hn(I.M(),I.p()))(o)},get viewportSize(){return o.p()},findStartIndex:o.S,findEndIndex:o.I,getItemOffset:o.j,getItemSize:o.T,scrollToIndex:c.le,scrollTo:c.se,scrollBy:c.ie}),()=>{const I=s.as,P=s.item,[M,G]=y.value,Z=C.value,le=[];function W(U){var O;const z=i.default({item:s.data[U],index:U})[0];return Ht(Mg,{key:Bg(z,U),W:l,X:o,U:d.re,D:U,Y:z,G:a,K:n,Z:P,ee:(O=s.itemProps)===null||O===void 0?void 0:O.call(s,{item:s.data[U],index:U})},null,8,["W","X","U","D","Y","G","K","Z","ee"])}for(let U=M,O=G;U<=O;U++)le.push(W(U));if(s.keepMounted){const U=[],O=[];Ku(s.keepMounted).forEach(z=>{z<M&&U.push(W(z)),z>G&&O.push(W(z))}),le.unshift(...U),le.push(...O)}return Ht(I,{ref:r,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:a?Z+"px":"100%",height:a?"100%":Z+"px",pointerEvents:A.value?"none":void 0}},typeof(N=le)=="function"||Object.prototype.toString.call(N)==="[object Object]"&&!Al(N)?le:{default:()=>[le],_:2},8,["style"]);var N}}}),Ug=In({props:{data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,ssrCount:Number,itemProps:Function,keepMounted:Array},emits:["scroll","scrollEnd"],setup(s,{emit:e,expose:t,slots:i}){const n=s.horizontal,a=d=>{e("scroll",d)},r=()=>{e("scrollEnd")},o=oa();return t({get scrollOffset(){return o.value.scrollOffset},get scrollSize(){return o.value.scrollSize},get viewportSize(){return o.value.viewportSize},findStartIndex:(...d)=>o.value.findStartIndex(...d),findEndIndex:(...d)=>o.value.findEndIndex(...d),getItemOffset:(...d)=>o.value.getItemOffset(...d),getItemSize:(...d)=>o.value.getItemSize(...d),scrollToIndex:(...d)=>o.value.scrollToIndex(...d),scrollTo:(...d)=>o.value.scrollTo(...d),scrollBy:(...d)=>o.value.scrollBy(...d)}),()=>{return Ht("div",{style:{display:n?"inline-block":"block",[n?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%"}},[Ht(Ng,{ref:o,data:s.data,overscan:s.overscan,itemSize:s.itemSize,itemProps:s.itemProps,shift:s.shift,ssrCount:s.ssrCount,horizontal:n,keepMounted:s.keepMounted,onScroll:a,onScrollEnd:r},(d=i,typeof d=="function"||Object.prototype.toString.call(d)==="[object Object]"&&!Al(d)?i:{default:()=>[i],_:2}),8,["data","overscan","itemSize","itemProps","shift","ssrCount","horizontal","keepMounted","onScroll","onScrollEnd"])],4);var d}}}),$g=In({name:"Panel-CommentTab",components:{CommentMuteSettings:gm,VirtuaList:Ug},props:{playback_mode:{type:String,required:!0}},data(){return{Utils:Object.freeze(ni),is_manual_scroll:!1,is_auto_scrolling:!1,comment_list:[],comment_list_element:null,is_comment_list_dropdown_display:!1,comment_list_dropdown_top:0,comment_list_dropdown_comment:null,comment_mute_settings_modal:!1,visibilitychange_listener:null,current_playback_position:0,target_comment_index:0,virtua_scroller:null}},computed:{...Qn(Yn,Gi)},watch:{"channelsStore.channel.current.id":{handler(){this.playback_mode==="Live"&&(this.comment_list=[])}}},mounted(){this.comment_list_element===null&&(this.comment_list_element=document.querySelector(".comment-list")),this.playback_mode==="Video"&&(this.virtua_scroller=this.$refs.virtua_scroller);let s=!1;this.comment_list_element.onmousedown=a=>{if(this.comment_list_element===null)return;a.clientX-this.comment_list_element.getBoundingClientRect().left>this.comment_list_element.clientWidth&&(s=!0)},this.comment_list_element.onmouseup=a=>{if(this.comment_list_element===null)return;a.clientX-this.comment_list_element.getBoundingClientRect().left>this.comment_list_element.clientWidth&&(s=!1)};const e=()=>{s=!0,window.setTimeout(()=>s=!1,100)};let t=!1;this.comment_list_element.ontouchstart=()=>t=!0,this.comment_list_element.ontouchend=()=>t=!1,this.comment_list_element.ontouchmove=()=>t===!0?e():"",this.comment_list_element.onwheel=e,this.comment_list_element.onscroll=async()=>{this.comment_list_element!==null&&this.is_auto_scrolling===!1&&s===!0&&(this.is_manual_scroll=!0,console.log("[Comment.vue] Manual scroll is enabled."),await ni.sleep(.1),this.playback_mode==="Live"&&this.comment_list_element.scrollTop+this.comment_list_element.offsetHeight>this.comment_list_element.scrollHeight-10&&(this.is_manual_scroll=!1,console.log("[Comment.vue] Manual scroll is disabled because bottom of comment list is reached.")))};const i=[],n=500;this.playerStore.event_emitter.on("CommentReceived",async a=>{if(a.is_initial_comments===!0)this.comment_list=[],this.comment_list.push(...a.comments),console.log(`[Comment.vue] Comment list updated. ${this.comment_list.length} comments.`),this.playback_mode==="Live"&&this.scrollCommentList(!1);else{if(document.visibilityState==="hidden"){i.push(...a.comments);return}this.comment_list.length>=n&&this.is_manual_scroll===!1&&this.comment_list.splice(0,Math.max(0,this.comment_list.length-n)),this.comment_list.push(...a.comments),this.scrollCommentList(!1)}}),this.playback_mode==="Live"&&(this.playerStore.event_emitter.on("CommentSendCompleted",async a=>{this.comment_list.push(a.comment),this.scrollCommentList(!1)}),this.visibilitychange_listener=()=>{if(document.visibilityState==="visible"){const a=this.comment_list.length+i.length;a>=n&&this.is_manual_scroll===!1&&this.comment_list.splice(0,Math.max(0,a-n)),this.comment_list.push(...i),i.length=0,this.scrollCommentList(!1)}},document.addEventListener("visibilitychange",this.visibilitychange_listener)),this.playback_mode==="Video"&&(console.log("[Comment.vue] Setting up PlaybackPositionChanged event listener."),this.playerStore.event_emitter.on("PlaybackPositionChanged",a=>{this.current_playback_position=a.playback_position,this.is_manual_scroll===!1&&this.scrollPlaybackComment(!1)}))},beforeUnmount(){this.playback_mode==="Live"&&this.visibilitychange_listener!==null&&(document.removeEventListener("visibilitychange",this.visibilitychange_listener),this.visibilitychange_listener=null),this.playerStore.event_emitter.off("CommentReceived"),this.playback_mode==="Live"&&this.playerStore.event_emitter.off("CommentSendCompleted"),this.playback_mode==="Video"&&this.playerStore.event_emitter.off("PlaybackPositionChanged"),this.comment_list=[]},methods:{showCommentListDropdown(s,e){const t=this.$refs.comment_list_wrapper.getBoundingClientRect(),i=106,n=s.currentTarget.getBoundingClientRect();this.comment_list_dropdown_top=n.top-t.top,this.comment_list_dropdown_top+i>t.height&&(this.comment_list_dropdown_top=this.comment_list_dropdown_top-i+n.height),this.comment_list_dropdown_comment=e,this.is_comment_list_dropdown_display=!0},hideCommentListDropdown(){this.is_comment_list_dropdown_display=!1,this.comment_list=this.comment_list.filter(s=>xr.isMutedComment(s.text,s.user_id)===!1)},copyTextToClipboard(){this.comment_list_dropdown_comment!==null&&(navigator.clipboard.writeText(this.comment_list_dropdown_comment.text),this.hideCommentListDropdown())},addMutedKeywords(){this.comment_list_dropdown_comment!==null&&(xr.addMutedKeywords(this.comment_list_dropdown_comment.text),this.hideCommentListDropdown())},addMutedNiconicoUserIds(){this.comment_list_dropdown_comment!==null&&(xr.addMutedNiconicoUserIDs(this.comment_list_dropdown_comment.user_id),this.hideCommentListDropdown())},async scrollCommentList(s=!1){if(this.comment_list_element===null||(this.is_comment_list_dropdown_display===!0&&(this.is_manual_scroll=!0,console.log("[Comment.vue] Manual scroll is enabled because dropdown menu is displayed.")),this.is_manual_scroll===!0))return;this.is_auto_scrolling=!0;const e=(t=3)=>{t<=0||window.requestAnimationFrame(()=>{var i,n;s===!0?(i=this.comment_list_element)==null||i.scrollTo({top:this.comment_list_element.scrollHeight,left:0,behavior:"smooth"}):(n=this.comment_list_element)==null||n.scrollTo(0,this.comment_list_element.scrollHeight),e(t-1)})};e(),await ni.sleep(.1),this.is_auto_scrolling=!1},async scrollPlaybackComment(s=!1){if(this.is_comment_list_dropdown_display===!0&&(this.is_manual_scroll=!0,console.log("[Comment.vue] Manual scroll is enabled because dropdown menu is displayed.")),this.is_manual_scroll===!0||this.playback_mode==="Video"&&this.playerStore.video_panel_active_tab!=="Comment")return;let e=-1;for(let t=0;t<this.comment_list.length;t++){const i=this.comment_list[t];if(i.playback_position!==void 0&&i.playback_position<=this.current_playback_position)e=t;else break}e===this.target_comment_index&&s===!1||(this.is_auto_scrolling=!0,e!==-1&&this.virtua_scroller!==null&&(this.virtua_scroller.scrollToIndex(e,{align:"end",smooth:s,offset:-3}),this.target_comment_index=e),await ni.sleep(.1),this.is_auto_scrolling=!1)},handleAutoScrollButtonClick(){this.is_manual_scroll=!1,console.log("[Comment.vue] Manual scroll is disabled because Auto-scroll button clicked."),this.playback_mode==="Live"?this.scrollCommentList(!0):this.playback_mode==="Video"&&this.scrollPlaybackComment(!0)}}}),Gg={class:"comment-header"},Vg={class:"comment-header__title"},jg={class:"comment-list-wrapper",ref:"comment_list_wrapper"},Hg={class:"comment__text"},qg={class:"comment__time"},zg=["onMouseup","onTouchend"],Kg={class:"comment__text"},Wg={class:"comment__time"},Yg=["onMouseup","onTouchend"],Xg={key:2,class:"comment-announce"},Jg={key:3,class:"comment-announce"},Qg={class:"comment-announce__text"},Zg={class:"mt-0 mb-0"},e0={key:4,class:"comment-announce"},t0={key:5,class:"comment-announce"},i0={class:"comment-announce__text"},n0={class:"mt-0 mb-0"};function r0(s,e,t,i,n,a){const r=$i("Icon"),o=$i("DynamicScrollerItem"),d=$i("DynamicScroller"),c=$i("VirtuaList"),l=$i("CommentMuteSettings");return Pt(),ti("div",{class:Bi(["comment-container",{"comment-container--video":s.playback_mode==="Video"}])},[Qe("section",Gg,[Qe("h2",Vg,[Ht(r,{class:"comment-header__title-icon",icon:"bi:chat-left-text-fill",height:"18.5px"}),e[7]||(e[7]=Qe("span",{class:"comment-header__title-text"},"„Ç≥„É°„É≥„Éà",-1))]),Yi((Pt(),ti("button",{class:"comment-header__button ml-auto",onClick:e[0]||(e[0]=f=>s.comment_mute_settings_modal=!s.comment_mute_settings_modal)},[Ht(r,{icon:"heroicons-solid:filter",height:"11px"}),e[8]||(e[8]=Qe("span",{class:"ml-1"},"„Éü„É•„Éº„ÉàË®≠ÂÆö",-1))])),[[Xi]])]),Qe("section",jg,[Qe("div",{class:Bi(["comment-list-dropdown",{"comment-list-dropdown--display":s.is_comment_list_dropdown_display}]),style:aa({"--comment-list-dropdown-top":`${s.comment_list_dropdown_top}px`})},[Ht(ym,{style:{background:"rgb(var(--v-theme-background-lighten-1))"}},{default:Mi(()=>[Ht($a,{density:"compact",style:{"min-height":"30px"},onClick:e[1]||(e[1]=f=>s.copyTextToClipboard())},{default:Mi(()=>[Ht(Ga,{class:"d-flex align-center"},{default:Mi(()=>[Ht(r,{icon:"fluent:clipboard-paste-20-filled",width:"20px"}),e[9]||(e[9]=Qe("span",{class:"ml-2"},"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº",-1))]),_:1})]),_:1}),Ht($a,{density:"compact",style:{"min-height":"30px"},onClick:e[2]||(e[2]=f=>s.addMutedKeywords())},{default:Mi(()=>[Ht(Ga,{class:"d-flex align-center"},{default:Mi(()=>[Ht(r,{icon:"fluent:comment-dismiss-20-filled",width:"20px"}),e[10]||(e[10]=Qe("span",{class:"ml-2"},"„Åì„ÅÆ„Ç≥„É°„É≥„Éà„Çí„Éü„É•„Éº„Éà",-1))]),_:1})]),_:1}),Ht($a,{density:"compact",style:{"min-height":"30px"},onClick:e[3]||(e[3]=f=>s.addMutedNiconicoUserIds())},{default:Mi(()=>[Ht(Ga,{class:"d-flex align-center"},{default:Mi(()=>[Ht(r,{icon:"fluent:person-prohibited-20-filled",width:"20px"}),e[11]||(e[11]=Qe("span",{class:"ml-2"},"„Åì„ÅÆ„Ç≥„É°„É≥„Éà„ÅÆÊäïÁ®øËÄÖ„Çí„Éü„É•„Éº„Éà",-1))]),_:1})]),_:1})]),_:1})],6),Qe("div",{class:Bi(["comment-list-cover",{"comment-list-cover--display":s.is_comment_list_dropdown_display}]),onClick:e[4]||(e[4]=f=>s.hideCommentListDropdown())},null,2),s.playback_mode==="Live"?(Pt(),cn(d,{key:0,class:"comment-list",direction:"vertical",items:s.comment_list,"min-item-size":34},{default:Mi(({item:f,active:p})=>[Ht(o,{item:f,active:p,"size-dependencies":[f.text]},{default:Mi(()=>[Qe("div",{class:Bi(["comment",{"comment--my-post":f.my_post}])},[Qe("span",Hg,bi(f.text),1),Qe("span",qg,bi(f.comment_source?`[${f.comment_source}] `:"")+bi(f.time),1),Yi((Pt(),ti("div",{class:"comment__icon",onMouseup:g=>s.showCommentListDropdown(g,f),onTouchend:g=>s.showCommentListDropdown(g,f)},[...e[12]||(e[12]=[Qe("svg",{class:"iconify iconify--fluent",width:"20px",height:"20px",viewBox:"0 0 20 20"},[Qe("path",{fill:"currentColor",d:"M10 6.5A1.75 1.75 0 1 1 10 3a1.75 1.75 0 0 1 0 3.5ZM10 17a1.75 1.75 0 1 1 0-3.5a1.75 1.75 0 0 1 0 3.5Zm-1.75-7a1.75 1.75 0 1 0 3.5 0a1.75 1.75 0 0 0-3.5 0Z"})],-1)])],40,zg)),[[Xi,!s.Utils.isTouchDevice()]])],2)]),_:2},1032,["item","active","size-dependencies"])]),_:1},8,["items"])):(Pt(),cn(c,{key:1,ref:"virtua_scroller",class:"comment-list",data:s.comment_list,"item-size":34},{default:Mi(({item:f})=>[Qe("div",{class:Bi(["comment",{"comment--my-post":f.my_post}])},[Qe("span",Kg,bi(f.text),1),Qe("span",Wg,bi(f.comment_source?`[${f.comment_source}] `:"")+bi(f.time),1),Yi((Pt(),ti("div",{class:"comment__icon",onMouseup:p=>s.showCommentListDropdown(p,f),onTouchend:p=>s.showCommentListDropdown(p,f)},[...e[13]||(e[13]=[Qe("svg",{class:"iconify iconify--fluent",width:"20px",height:"20px",viewBox:"0 0 20 20"},[Qe("path",{fill:"currentColor",d:"M10 6.5A1.75 1.75 0 1 1 10 3a1.75 1.75 0 0 1 0 3.5ZM10 17a1.75 1.75 0 1 1 0-3.5a1.75 1.75 0 0 1 0 3.5Zm-1.75-7a1.75 1.75 0 1 0 3.5 0a1.75 1.75 0 0 0-3.5 0Z"})],-1)])],40,Yg)),[[Xi,!s.Utils.isTouchDevice()]])],2)]),_:1},8,["data"])),s.playback_mode==="Live"&&s.playerStore.live_comment_init_failed_message===null&&s.comment_list.length===0?(Pt(),ti("div",Xg,[...e[14]||(e[14]=[Qe("div",{class:"comment-announce__heading"},"„Åæ„Å†„Ç≥„É°„É≥„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ",-1),Qe("div",{class:"comment-announce__text"},[Qe("p",{class:"mt-0 mb-0"},"„Åì„ÅÆ„ÉÅ„É£„É≥„Éç„É´„Å´ÂØæÂøú„Åô„ÇãÂÆüÊ≥Å„ÅÆ„Ç≥„É°„É≥„Éà„Åå„ÄÅ„É™„Ç¢„É´„Çø„Ç§„É†„ÅßË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ")],-1)])])):pn("",!0),s.playback_mode==="Live"&&s.playerStore.live_comment_init_failed_message!==null&&s.comment_list.length===0?(Pt(),ti("div",Jg,[e[15]||(e[15]=Qe("div",{class:"comment-announce__heading"},"„Ç≥„É°„É≥„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ",-1)),Qe("div",Qg,[Qe("p",Zg,bi(s.playerStore.live_comment_init_failed_message),1)])])):pn("",!0),s.playback_mode==="Video"&&s.playerStore.video_comment_init_failed_message===null&&s.comment_list.length===0?(Pt(),ti("div",e0,[...e[16]||(e[16]=[Qe("div",{class:"comment-announce__heading"},"„Åæ„Å†„Ç≥„É°„É≥„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ",-1),Qe("div",{class:"comment-announce__text"},[Qe("p",{class:"mt-0 mb-0"},"„Åì„ÅÆÈå≤ÁîªÁï™ÁµÑ„Å´ÂØæÂøú„Åô„Çã„ÄÅÂÆüÊ≥Å„ÅÆÈÅéÂéª„É≠„Ç∞„Ç≥„É°„É≥„Éà„ÇíÂèñÂæó„Åó„Å¶„ÅÑ„Åæ„Åô...")],-1)])])):pn("",!0),s.playback_mode==="Video"&&s.playerStore.video_comment_init_failed_message!==null&&s.comment_list.length===0?(Pt(),ti("div",t0,[e[17]||(e[17]=Qe("div",{class:"comment-announce__heading"},"„Ç≥„É°„É≥„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ",-1)),Qe("div",i0,[Qe("p",n0,bi(s.playerStore.video_comment_init_failed_message),1)])])):pn("",!0)],512),Yi((Pt(),ti("div",{class:Bi(["comment-scroll-button elevation-5",{"comment-scroll-button--display":s.is_manual_scroll}]),onClick:e[5]||(e[5]=(...f)=>s.handleAutoScrollButtonClick&&s.handleAutoScrollButtonClick(...f))},[Ht(r,{icon:"fluent:arrow-down-12-filled",height:"29px"})],2)),[[Xi]]),Ht(l,{modelValue:s.comment_mute_settings_modal,"onUpdate:modelValue":e[6]||(e[6]=f=>s.comment_mute_settings_modal=f)},null,8,["modelValue"])],2)}const s0=Zn($g,[["render",r0],["__scopeId","data-v-0c8e3d45"]]),a0=In({name:"Panel-ProgramTab",data(){return{Utils:Object.freeze(ni),ChannelUtils:Object.freeze(Mu),ProgramUtils:Object.freeze(Ca)}},computed:{...Qn(Yn)},methods:{shareToTwitter(){var t;const s=this.channelsStore.channel.current,e=`NX-Jikkyo „Åß„ÄêCh: ${s.channel_number} ${s.name}„Äë„Äå${(t=s.program_present)==null?void 0:t.title}„Äç„ÇíÂÆüÊ≥Å‰∏≠üéß  #NXJikkyo
https://nx-jikkyo.tsukumijima.net/watch/${s.id}`;window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}`)}}}),o0={class:"program-container"},l0={class:"program-broadcaster"},c0=["src"],d0={class:"program-broadcaster__number"},u0={class:"program-broadcaster__name"},h0={class:"program-info"},f0=["innerHTML"],p0={class:"program-info__time"},m0=["innerHTML"],g0={class:"program-info__genre-container"},y0={class:"program-info__next"},_0=["innerHTML"],v0={class:"program-info__next-time"},A0={class:"program-info__status"},b0={class:"ml-1"},S0={class:"program-info__status-viewers ml-3"},E0={class:"ml-1"},x0={class:"program-detail-container"},T0={class:"program-detail__heading"},C0=["innerHTML"];function w0(s,e,t,i,n,a){var o,d;const r=$i("Icon");return Pt(),ti("div",o0,[Qe("section",l0,[Qe("img",{class:"program-broadcaster__icon",src:`${s.Utils.api_base_url}/channels/${s.channelsStore.channel.current.id}/logo`},null,8,c0),Qe("div",d0,"Ch: "+bi(s.channelsStore.channel.current.channel_number),1),Qe("div",u0,bi(s.channelsStore.channel.current.name),1)]),Qe("section",h0,[Qe("h1",{class:"program-info__title",innerHTML:s.ProgramUtils.decorateProgramInfo(s.channelsStore.channel.current.program_present,"title")},null,8,f0),Qe("div",p0,bi(s.ProgramUtils.getProgramTime(s.channelsStore.channel.current.program_present)),1),Qe("div",{class:"program-info__description",innerHTML:s.ProgramUtils.decorateProgramInfo(s.channelsStore.channel.current.program_present,"description")},null,8,m0),Qe("div",g0,[(Pt(!0),ti(Pn,null,Dn(((o=s.channelsStore.channel.current.program_present)==null?void 0:o.genres)??[],(c,l)=>(Pt(),ti("div",{class:"program-info__genre",key:l}," „Ç∏„É£„É≥„É´: "+bi(c.major),1))),128))]),Qe("div",y0,[e[1]||(e[1]=Qe("span",{class:"program-info__next-decorate"},"NEXT",-1)),Ht(r,{class:"program-info__next-icon",icon:"fluent:fast-forward-20-filled",width:"16px"})]),Qe("span",{class:"program-info__next-title",innerHTML:s.ProgramUtils.decorateProgramInfo(s.channelsStore.channel.current.program_following,"title")},null,8,_0),Qe("div",v0,bi(s.ProgramUtils.getProgramTime(s.channelsStore.channel.current.program_following)),1),Qe("div",A0,[Qe("div",{class:Bi(["program-info__status-force",`program-info__status-force--${s.ChannelUtils.getChannelForceType(s.channelsStore.channel.current.jikkyo_force)}`])},[Ht(r,{icon:"fa-solid:fire-alt",height:"14px"}),e[2]||(e[2]=Qe("span",{class:"ml-2"},"Âã¢„ÅÑ:",-1)),Qe("span",b0,bi(s.channelsStore.channel.current.jikkyo_force??"--")+" „Ç≥„É°/ÂàÜ",1)],2),Qe("div",S0,[Ht(r,{icon:"bi:chat-left-text-fill",height:"14px"}),e[3]||(e[3]=Qe("span",{class:"ml-2"},"Á¥ØË®à„Ç≥„É°„É≥„ÉàÊï∞:",-1)),Qe("span",E0,bi(s.channelsStore.channel.current.viewer_count),1)])]),Ht(vl,{class:"mt-4 px-3 py-0",style:{background:"#1d9BF0",height:"32px","border-radius":"6px","font-size":"13.5px"},onClick:e[0]||(e[0]=c=>s.shareToTwitter())},{default:Mi(()=>[Ht(r,{icon:"fa-brands:twitter",height:"16px"}),e[4]||(e[4]=Qe("span",{class:"ml-1"},"Twitter „Åß„Ç∑„Çß„Ç¢",-1))]),_:1})]),Qe("section",x0,[(Pt(!0),ti(Pn,null,Dn(((d=s.channelsStore.channel.current.program_present)==null?void 0:d.detail)??{},(c,l)=>(Pt(),ti("div",{class:"program-detail",key:l},[Qe("h2",T0,bi(l),1),Qe("div",{class:"program-detail__text",innerHTML:s.Utils.URLtoLink(c)},null,8,C0)]))),128))])])}const k0=Zn(a0,[["render",w0],["__scopeId","data-v-9f30c8e4"]]),I0=In({name:"Panel-RecordedProgramTab",data(){return{Utils:Object.freeze(ni),ProgramUtils:Object.freeze(Ca),comment_count:null}},computed:{...Qn(Gi)},created(){this.playerStore.event_emitter.on("CommentReceived",s=>{s.is_initial_comments===!0&&(this.comment_count=s.comments.length)})},beforeUnmount(){this.playerStore.event_emitter.off("CommentReceived")},methods:{shareToTwitter(){const s=this.playerStore.recorded_program.channel??lm,e=wn(this.playerStore.recorded_program.start_time),t=wn(this.playerStore.recorded_program.end_time),i=e.hour()<4?e.subtract(1,"day"):e,n=`NX-Jikkyo „Åß„ÄêCh: ${s.channel_number} ${s.name}„Äë${i.format("YYYYÂπ¥MMÊúàDDÊó• (dd)")} ${i.format("HH:mm")} „Äú ${t.format("HH:mm")} „ÅÆÈÅéÂéª„É≠„Ç∞„Ç≥„É°„É≥„Éà„ÇíÂÜçÁîü‰∏≠üéß  #NXJikkyo
https://nx-jikkyo.tsukumijima.net/log/${this.$route.params.display_channel_id}/${this.$route.params.kakolog_period_id}`;window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}`)}}}),R0={class:"program-container"},L0={class:"program-info"},D0=["innerHTML"],P0={key:0,class:"program-info__broadcaster"},O0=["src"],M0={class:"program-info__broadcaster-container"},B0={class:"d-flex align-center"},F0={class:"program-info__broadcaster-number"},N0={class:"program-info__broadcaster-name"},U0={class:"program-info__broadcaster-time"},$0={class:"program-info__genre-container"},G0={class:"mt-2"},V0={class:"program-info__status"},j0={class:"ml-2"},H0={class:"program-detail-container"},q0={class:"program-detail__heading"},z0=["innerHTML"];function K0(s,e,t,i,n,a){const r=$i("Icon");return Pt(),ti("div",R0,[Qe("section",L0,[Qe("h1",{class:"program-info__title",innerHTML:s.ProgramUtils.decorateProgramInfo(s.playerStore.recorded_program,"title")},null,8,D0),s.playerStore.recorded_program.channel!==null?(Pt(),ti("div",P0,[Qe("img",{class:"program-info__broadcaster-icon",src:`${s.Utils.api_base_url}/channels/${s.playerStore.recorded_program.channel.id}/logo`},null,8,O0),Qe("div",M0,[Qe("div",B0,[Qe("div",F0,"Ch: "+bi(s.playerStore.recorded_program.channel.channel_number),1),Qe("div",N0,bi(s.playerStore.recorded_program.channel.name),1)]),Qe("div",U0,bi(s.ProgramUtils.getProgramTime(s.playerStore.recorded_program)),1)])])):pn("",!0),Qe("div",$0,[(Pt(!0),ti(Pn,null,Dn(s.playerStore.recorded_program.genres??[],(o,d)=>(Pt(),ti("div",{class:"program-info__genre",key:d},bi(o.major)+" / "+bi(o.middle),1))),128))]),Qe("div",G0,[Qe("div",V0,[Ht(r,{icon:"bi:chat-left-text-fill",height:"12.5px",style:{"margin-bottom":"-3px"}}),e[1]||(e[1]=Qe("span",{class:"ml-2"},"„Ç≥„É°„É≥„ÉàÊï∞:",-1)),Qe("span",j0,bi(s.comment_count??"--"),1)])]),Ht(vl,{class:"mt-4 px-3 py-0",style:{background:"#1d9BF0",height:"32px","border-radius":"6px","font-size":"13.5px"},onClick:e[0]||(e[0]=o=>s.shareToTwitter())},{default:Mi(()=>[Ht(r,{icon:"fa-brands:twitter",height:"16px"}),e[2]||(e[2]=Qe("span",{class:"ml-1"},"Twitter „Åß„Ç∑„Çß„Ç¢",-1))]),_:1})]),Qe("section",H0,[(Pt(!0),ti(Pn,null,Dn(s.playerStore.recorded_program.detail??{},(o,d)=>(Pt(),ti("div",{class:"program-detail",key:d},[Qe("h2",q0,bi(d),1),Qe("div",{class:"program-detail__text",innerHTML:s.Utils.URLtoLink(o)},null,8,z0)]))),128))])])}const W0=Zn(I0,[["render",K0],["__scopeId","data-v-9ac26b48"]]),Y0=In({name:"Watch-Panel",components:{Channel:xg,Comment:s0,Program:k0,RecordedProgram:W0},props:{playback_mode:{type:String,required:!0}},data(){return{Utils:Object.freeze(ni)}},computed:{...Qn(Yn,Gi),panel_active_tab(){return this.playback_mode==="Live"?this.playerStore.tv_panel_active_tab:this.playerStore.video_panel_active_tab}}}),X0={class:"watch-panel__header"},J0={key:0,class:"panel-broadcaster"},Q0=["src"],Z0={class:"panel-broadcaster__number"},ey={class:"panel-broadcaster__name"},ty={class:"watch-panel__content-container"},iy={class:"watch-panel__navigation"};function ny(s,e,t,i,n,a){const r=$i("Icon"),o=$i("Program"),d=$i("RecordedProgram"),c=$i("Channel"),l=$i("Comment");return Pt(),ti("div",{class:"watch-panel",onMousemove:e[5]||(e[5]=f=>s.playerStore.event_emitter.emit("SetControlDisplayTimer",{event:f}))},[Qe("div",X0,[Yi((Pt(),ti("div",{class:"panel-close-button",onClick:e[0]||(e[0]=f=>s.playerStore.is_panel_display=!1)},[Ht(r,{class:"panel-close-button__icon",icon:"akar-icons:chevron-right",width:"25px"}),e[6]||(e[6]=Qe("span",{class:"panel-close-button__text"},"Èñâ„Åò„Çã",-1))])),[[Xi]]),Ht(wa),s.playback_mode==="Live"?(Pt(),ti("div",J0,[Qe("img",{class:"panel-broadcaster__icon",src:`${s.Utils.api_base_url}/channels/${s.channelsStore.channel.current.id}/logo`},null,8,Q0),Qe("div",Z0,bi(s.channelsStore.channel.current.channel_number),1),Qe("div",ey,bi(s.channelsStore.channel.current.name),1)])):pn("",!0)]),Qe("div",ty,[s.playback_mode==="Live"?(Pt(),cn(o,{key:0,class:Bi(["watch-panel__content",{"watch-panel__content--active":s.panel_active_tab==="Program"}])},null,8,["class"])):pn("",!0),s.playback_mode==="Video"?(Pt(),cn(d,{key:1,class:Bi(["watch-panel__content",{"watch-panel__content--active":s.panel_active_tab==="RecordedProgram"}])},null,8,["class"])):pn("",!0),s.playback_mode==="Live"?(Pt(),cn(c,{key:2,class:Bi(["watch-panel__content",{"watch-panel__content--active":s.panel_active_tab==="Channel"}])},null,8,["class"])):pn("",!0),Ht(l,{class:Bi(["watch-panel__content",{"watch-panel__content--active":s.panel_active_tab==="Comment"}]),playback_mode:s.playback_mode},null,8,["playback_mode","class"])]),Qe("div",iy,[s.playback_mode==="Live"?Yi((Pt(),ti("div",{key:0,class:Bi(["panel-navigation-button",{"panel-navigation-button--active":s.panel_active_tab==="Program"}]),onClick:e[1]||(e[1]=f=>s.playerStore.tv_panel_active_tab="Program")},[Ht(r,{class:"panel-navigation-button__icon",icon:"fa-solid:info-circle",width:"33px"}),e[7]||(e[7]=Qe("span",{class:"panel-navigation-button__text"},"ÊÉÖÂ†±",-1))],2)),[[Xi]]):pn("",!0),s.playback_mode==="Video"?Yi((Pt(),ti("div",{key:1,class:Bi(["panel-navigation-button",{"panel-navigation-button--active":s.panel_active_tab==="RecordedProgram"}]),onClick:e[2]||(e[2]=f=>s.playerStore.video_panel_active_tab="RecordedProgram")},[Ht(r,{class:"panel-navigation-button__icon",icon:"fa-solid:info-circle",width:"33px"}),e[8]||(e[8]=Qe("span",{class:"panel-navigation-button__text"},"ÊÉÖÂ†±",-1))],2)),[[Xi]]):pn("",!0),s.playback_mode==="Live"?Yi((Pt(),ti("div",{key:2,class:Bi(["panel-navigation-button",{"panel-navigation-button--active":s.panel_active_tab==="Channel"}]),onClick:e[3]||(e[3]=f=>s.playerStore.tv_panel_active_tab="Channel")},[Ht(r,{class:"panel-navigation-button__icon",icon:"fa-solid:broadcast-tower",width:"34px"}),e[9]||(e[9]=Qe("span",{class:"panel-navigation-button__text"},"„ÉÅ„É£„É≥„Éç„É´",-1))],2)),[[Xi]]):pn("",!0),Yi((Pt(),ti("div",{class:Bi(["panel-navigation-button",{"panel-navigation-button--active":s.panel_active_tab==="Comment"}]),onClick:e[4]||(e[4]=f=>s.playback_mode==="Live"?s.playerStore.tv_panel_active_tab="Comment":s.playerStore.video_panel_active_tab="Comment")},[Ht(r,{class:"panel-navigation-button__icon",icon:"bi:chat-left-text-fill",width:"29px"}),e[10]||(e[10]=Qe("span",{class:"panel-navigation-button__text"},"„Ç≥„É°„É≥„Éà",-1))],2)),[[Xi]])])],32)}const ry=Zn(Y0,[["render",ny],["__scopeId","data-v-618f120a"]]),sy=In({name:"Watch-Player",props:{playback_mode:{type:String,required:!0}},data(){return{Utils:Object.freeze(ni),time:wn().format(`YYYY/MM/DD
HH:mm:ss`),time_interval_id:0}},computed:{...Qn(Yn,Gi,hn)},created(){this.time_interval_id=window.setInterval(()=>{if(this.playerStore.recorded_program&&this.playerStore.recorded_program.id===-1){if(window.player&&window.player.video&&window.player.video.paused){this.time="„Äà„Ç≥„É°„É≥„ÉàÂÜçÁîüÂÅúÊ≠¢‰∏≠„Äâ";return}this.time=wn().format(`YYYY/MM/DD
HH:mm:ss`)}else if(this.playerStore.recorded_program){const s=window.player;s&&s.video&&(this.time=wn(this.playerStore.recorded_program.start_time).add(s.video.currentTime,"second").format(`YYYY/MM/DD
HH:mm:ss`))}},.1*1e3)},beforeUnmount(){window.clearInterval(this.time_interval_id)}}),ay={class:"watch-player__background-wrapper"},oy={class:"watch-player__background-text"};function ly(s,e,t,i,n,a){const r=$i("Icon"),o=Pu("ftooltip");return Pt(),ti("div",{class:Bi(["watch-player",{"watch-player--loading":s.playerStore.is_loading,"watch-player--virtual-keyboard-display":s.playerStore.is_virtual_keyboard_display&&s.Utils.hasActiveElementClass("dplayer-comment-input"),"watch-player--video":s.playback_mode==="Video"}])},[Qe("div",ay,[Qe("div",{class:Bi(["watch-player__background",{"watch-player__background--display":s.playerStore.is_background_display,"watch-player__background--background-hide":s.settingsStore.settings.show_player_background_image===!1}]),style:aa({backgroundImage:`url(${s.playerStore.background_url})`})},[Qe("div",oy,bi(s.time),1),e[6]||(e[6]=Qe("img",{class:"watch-player__background-logo",src:dm},null,-1))],6)]),Ht(am,{indeterminate:"",size:"60",width:"6",class:Bi(["watch-player__buffering",{"watch-player__buffering--display":s.playerStore.is_video_buffering}])},null,8,["class"]),e[7]||(e[7]=Qe("div",{class:"watch-player__dplayer"},null,-1)),Qe("div",{class:"watch-player__button",onMousemove:e[3]||(e[3]=d=>s.playerStore.event_emitter.emit("SetControlDisplayTimer",{event:d})),onTouchmove:e[4]||(e[4]=d=>s.playerStore.event_emitter.emit("SetControlDisplayTimer",{event:d})),onClick:e[5]||(e[5]=d=>s.playerStore.event_emitter.emit("SetControlDisplayTimer",{event:d}))},[s.playback_mode==="Live"?Yi((Pt(),ti("div",{key:0,class:"switch-button switch-button-up",onClick:e[0]||(e[0]=d=>{s.playerStore.is_zapping=!0,s.$router.push({path:`/watch/${s.channelsStore.channel.previous.display_channel_id}`})})},[Ht(r,{class:"switch-button-icon",icon:"fluent:ios-arrow-left-24-filled",width:"32px",style:{transform:"rotate(90deg)"}})])),[[Xi],[o,"Ââç„ÅÆ„ÉÅ„É£„É≥„Éç„É´",void 0,{top:!0}]]):pn("",!0),Yi((Pt(),ti("div",{class:Bi(["switch-button switch-button-panel",{"switch-button-panel--open":s.playerStore.is_panel_display}]),onClick:e[1]||(e[1]=d=>s.playerStore.is_panel_display=!s.playerStore.is_panel_display)},[Ht(r,{class:"switch-button-icon",icon:"fluent:navigation-16-filled",width:"32px"})],2)),[[Xi]]),s.playback_mode==="Live"?Yi((Pt(),ti("div",{key:1,class:"switch-button switch-button-down",onClick:e[2]||(e[2]=d=>{s.playerStore.is_zapping=!0,s.$router.push({path:`/watch/${s.channelsStore.channel.next.display_channel_id}`})})},[Ht(r,{class:"switch-button-icon",icon:"fluent:ios-arrow-right-24-filled",width:"33px",style:{transform:"rotate(90deg)"}})])),[[Xi],[o,"Ê¨°„ÅÆ„ÉÅ„É£„É≥„Éç„É´",void 0,{bottom:!0}]]):pn("",!0)],32)],2)}const cy=Zn(sy,[["render",ly],["__scopeId","data-v-0a0ab654"]]),dy=In({name:"Watch",components:{WatchHeader:Nm,WatchNavigation:rg,WatchPanel:ry,WatchPlayer:cy,KeyboardShortcutList:Zm},props:{playback_mode:{type:String,required:!0}},data(){return{Utils:Object.freeze(ni)}},computed:{...Qn(Gi,hn)},watch:{"playerStore.is_panel_display":{handler(){this.settingsStore.settings.showed_panel_last_time=this.playerStore.is_panel_display}}},created(){"virtualKeyboard"in navigator&&(navigator.virtualKeyboard.overlaysContent=!0,navigator.virtualKeyboard.ongeometrychange=s=>{s.target.boundingRect.width===0&&s.target.boundingRect.height===0?this.playerStore.is_virtual_keyboard_display=!1:this.playerStore.is_virtual_keyboard_display=!0}),this.playerStore.startWatching()},beforeUnmount(){this.playerStore.stopWatching(),"virtualKeyboard"in navigator&&(navigator.virtualKeyboard.overlaysContent=!1)}}),uy={class:"route-container"};function hy(s,e,t,i,n,a){const r=$i("WatchNavigation"),o=$i("WatchHeader"),d=$i("WatchPlayer"),c=$i("WatchPanel"),l=$i("KeyboardShortcutList");return Pt(),ti("div",uy,[Qe("main",{class:Bi(["watch-container",{"watch-container--control-display":s.playerStore.is_control_display,"watch-container--panel-display":s.Utils.isSmartphoneVertical()||s.Utils.isTabletVertical()?!0:s.playerStore.is_panel_display,"watch-container--fullscreen":s.playerStore.is_fullscreen,"watch-container--document-pip":s.playerStore.is_document_pip,"watch-container--video":s.playback_mode==="Video"}])},[Ht(r),Qe("div",{class:"watch-content",onMousemove:e[0]||(e[0]=f=>s.playerStore.event_emitter.emit("SetControlDisplayTimer",{event:f,is_player_region_event:!0})),onTouchmove:e[1]||(e[1]=f=>s.playerStore.event_emitter.emit("SetControlDisplayTimer",{event:f,is_player_region_event:!0})),onClick:e[2]||(e[2]=f=>s.playerStore.event_emitter.emit("SetControlDisplayTimer",{event:f,is_player_region_event:!0}))},[Ht(o,{playback_mode:s.playback_mode},null,8,["playback_mode"]),Ht(d,{playback_mode:s.playback_mode},null,8,["playback_mode"])],32),Ht(c,{playback_mode:s.playback_mode},null,8,["playback_mode"])],2),Ht(l,{playback_mode:s.playback_mode},null,8,["playback_mode"])])}const o2=Zn(dy,[["render",hy],["__scopeId","data-v-092f3824"]]);var ja={exports:{}},Ha={},Xr={},Ju={},Tl=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var r=Object.getOwnPropertySymbols(e);if(r.length!==1||r[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==n||o.enumerable!==!0)return!1}return!0},fy=Tl,ka=function(){return fy()&&!!Symbol.toStringTag},Cl=Object,py=Error,my=EvalError,gy=RangeError,yy=ReferenceError,Qu=SyntaxError,ys=TypeError,_y=URIError,vy=Math.abs,Ay=Math.floor,by=Math.max,Sy=Math.min,Ey=Math.pow,xy=Math.round,Ty=Number.isNaN||function(e){return e!==e},Cy=Ty,wy=function(e){return Cy(e)||e===0?e:e<0?-1:1},ky=Object.getOwnPropertyDescriptor,qs=ky;if(qs)try{qs([],"length")}catch{qs=null}var es=qs,zs=Object.defineProperty||!1;if(zs)try{zs({},"a",{value:1})}catch{zs=!1}var Ia=zs,qa,Ac;function Iy(){if(Ac)return qa;Ac=1;var s=typeof Symbol<"u"&&Symbol,e=Tl;return qa=function(){return typeof s!="function"||typeof Symbol!="function"||typeof s("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},qa}var za,bc;function Zu(){return bc||(bc=1,za=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),za}var Ka,Sc;function eh(){if(Sc)return Ka;Sc=1;var s=Cl;return Ka=s.getPrototypeOf||null,Ka}var Wa,Ec;function Ry(){if(Ec)return Wa;Ec=1;var s="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,i="[object Function]",n=function(d,c){for(var l=[],f=0;f<d.length;f+=1)l[f]=d[f];for(var p=0;p<c.length;p+=1)l[p+d.length]=c[p];return l},a=function(d,c){for(var l=[],f=c,p=0;f<d.length;f+=1,p+=1)l[p]=d[f];return l},r=function(o,d){for(var c="",l=0;l<o.length;l+=1)c+=o[l],l+1<o.length&&(c+=d);return c};return Wa=function(d){var c=this;if(typeof c!="function"||e.apply(c)!==i)throw new TypeError(s+c);for(var l=a(arguments,1),f,p=function(){if(this instanceof f){var I=c.apply(this,n(l,arguments));return Object(I)===I?I:this}return c.apply(d,n(l,arguments))},g=t(0,c.length-l.length),y=[],A=0;A<g;A++)y[A]="$"+A;if(f=Function("binder","return function ("+r(y,",")+"){ return binder.apply(this,arguments); }")(p),c.prototype){var C=function(){};C.prototype=c.prototype,f.prototype=new C,C.prototype=null}return f},Wa}var Ya,xc;function _s(){if(xc)return Ya;xc=1;var s=Ry();return Ya=Function.prototype.bind||s,Ya}var Xa,Tc;function wl(){return Tc||(Tc=1,Xa=Function.prototype.call),Xa}var Ja,Cc;function kl(){return Cc||(Cc=1,Ja=Function.prototype.apply),Ja}var Ly=typeof Reflect<"u"&&Reflect&&Reflect.apply,Dy=_s(),Py=kl(),Oy=wl(),My=Ly,th=My||Dy.call(Oy,Py),By=_s(),Fy=ys,Ny=wl(),Uy=th,Il=function(e){if(e.length<1||typeof e[0]!="function")throw new Fy("a function is required");return Uy(By,Ny,e)},Qa,wc;function $y(){if(wc)return Qa;wc=1;var s=Il,e=es,t;try{t=[].__proto__===Array.prototype}catch(r){if(!r||typeof r!="object"||!("code"in r)||r.code!=="ERR_PROTO_ACCESS")throw r}var i=!!t&&e&&e(Object.prototype,"__proto__"),n=Object,a=n.getPrototypeOf;return Qa=i&&typeof i.get=="function"?s([i.get]):typeof a=="function"?function(o){return a(o==null?o:n(o))}:!1,Qa}var Za,kc;function Rl(){if(kc)return Za;kc=1;var s=Zu(),e=eh(),t=$y();return Za=s?function(n){return s(n)}:e?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return e(n)}:t?function(n){return t(n)}:null,Za}var eo,Ic;function ih(){if(Ic)return eo;Ic=1;var s=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=_s();return eo=t.call(s,e),eo}var vi,Gy=Cl,Vy=py,jy=my,Hy=gy,qy=yy,Jr=Qu,qr=ys,zy=_y,Ky=vy,Wy=Ay,Yy=by,Xy=Sy,Jy=Ey,Qy=xy,Zy=wy,nh=Function,to=function(s){try{return nh('"use strict"; return ('+s+").constructor;")()}catch{}},cs=es,e_=Ia,io=function(){throw new qr},t_=cs?function(){try{return arguments.callee,io}catch{try{return cs(arguments,"callee").get}catch{return io}}}():io,Dr=Iy()(),ln=Rl(),i_=eh(),n_=Zu(),rh=kl(),vs=wl(),Ur={},r_=typeof Uint8Array>"u"||!ln?vi:ln(Uint8Array),wr={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?vi:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?vi:ArrayBuffer,"%ArrayIteratorPrototype%":Dr&&ln?ln([][Symbol.iterator]()):vi,"%AsyncFromSyncIteratorPrototype%":vi,"%AsyncFunction%":Ur,"%AsyncGenerator%":Ur,"%AsyncGeneratorFunction%":Ur,"%AsyncIteratorPrototype%":Ur,"%Atomics%":typeof Atomics>"u"?vi:Atomics,"%BigInt%":typeof BigInt>"u"?vi:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?vi:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?vi:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?vi:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Vy,"%eval%":eval,"%EvalError%":jy,"%Float16Array%":typeof Float16Array>"u"?vi:Float16Array,"%Float32Array%":typeof Float32Array>"u"?vi:Float32Array,"%Float64Array%":typeof Float64Array>"u"?vi:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?vi:FinalizationRegistry,"%Function%":nh,"%GeneratorFunction%":Ur,"%Int8Array%":typeof Int8Array>"u"?vi:Int8Array,"%Int16Array%":typeof Int16Array>"u"?vi:Int16Array,"%Int32Array%":typeof Int32Array>"u"?vi:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Dr&&ln?ln(ln([][Symbol.iterator]())):vi,"%JSON%":typeof JSON=="object"?JSON:vi,"%Map%":typeof Map>"u"?vi:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Dr||!ln?vi:ln(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Gy,"%Object.getOwnPropertyDescriptor%":cs,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?vi:Promise,"%Proxy%":typeof Proxy>"u"?vi:Proxy,"%RangeError%":Hy,"%ReferenceError%":qy,"%Reflect%":typeof Reflect>"u"?vi:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?vi:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Dr||!ln?vi:ln(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?vi:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Dr&&ln?ln(""[Symbol.iterator]()):vi,"%Symbol%":Dr?Symbol:vi,"%SyntaxError%":Jr,"%ThrowTypeError%":t_,"%TypedArray%":r_,"%TypeError%":qr,"%Uint8Array%":typeof Uint8Array>"u"?vi:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?vi:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?vi:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?vi:Uint32Array,"%URIError%":zy,"%WeakMap%":typeof WeakMap>"u"?vi:WeakMap,"%WeakRef%":typeof WeakRef>"u"?vi:WeakRef,"%WeakSet%":typeof WeakSet>"u"?vi:WeakSet,"%Function.prototype.call%":vs,"%Function.prototype.apply%":rh,"%Object.defineProperty%":e_,"%Object.getPrototypeOf%":i_,"%Math.abs%":Ky,"%Math.floor%":Wy,"%Math.max%":Yy,"%Math.min%":Xy,"%Math.pow%":Jy,"%Math.round%":Qy,"%Math.sign%":Zy,"%Reflect.getPrototypeOf%":n_};if(ln)try{null.error}catch(s){var s_=ln(ln(s));wr["%Error.prototype%"]=s_}var a_=function s(e){var t;if(e==="%AsyncFunction%")t=to("async function () {}");else if(e==="%GeneratorFunction%")t=to("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=to("async function* () {}");else if(e==="%AsyncGenerator%"){var i=s("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=s("%AsyncGenerator%");n&&ln&&(t=ln(n.prototype))}return wr[e]=t,t},Rc={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},As=_s(),da=ih(),o_=As.call(vs,Array.prototype.concat),l_=As.call(rh,Array.prototype.splice),Lc=As.call(vs,String.prototype.replace),ua=As.call(vs,String.prototype.slice),c_=As.call(vs,RegExp.prototype.exec),d_=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,u_=/\\(\\)?/g,h_=function(e){var t=ua(e,0,1),i=ua(e,-1);if(t==="%"&&i!=="%")throw new Jr("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new Jr("invalid intrinsic syntax, expected opening `%`");var n=[];return Lc(e,d_,function(a,r,o,d){n[n.length]=o?Lc(d,u_,"$1"):r||a}),n},f_=function(e,t){var i=e,n;if(da(Rc,i)&&(n=Rc[i],i="%"+n[0]+"%"),da(wr,i)){var a=wr[i];if(a===Ur&&(a=a_(i)),typeof a>"u"&&!t)throw new qr("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:a}}throw new Jr("intrinsic "+e+" does not exist!")},Ll=function(e,t){if(typeof e!="string"||e.length===0)throw new qr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new qr('"allowMissing" argument must be a boolean');if(c_(/^%?[^%]*%?$/,e)===null)throw new Jr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=h_(e),n=i.length>0?i[0]:"",a=f_("%"+n+"%",t),r=a.name,o=a.value,d=!1,c=a.alias;c&&(n=c[0],l_(i,o_([0,1],c)));for(var l=1,f=!0;l<i.length;l+=1){var p=i[l],g=ua(p,0,1),y=ua(p,-1);if((g==='"'||g==="'"||g==="`"||y==='"'||y==="'"||y==="`")&&g!==y)throw new Jr("property names with quotes must have matching quotes");if((p==="constructor"||!f)&&(d=!0),n+="."+p,r="%"+n+"%",da(wr,r))o=wr[r];else if(o!=null){if(!(p in o)){if(!t)throw new qr("base intrinsic for "+e+" exists, but the property is not available.");return}if(cs&&l+1>=i.length){var A=cs(o,p);f=!!A,f&&"get"in A&&!("originalValue"in A.get)?o=A.get:o=o[p]}else f=da(o,p),o=o[p];f&&!d&&(wr[r]=o)}}return o},sh=Ll,ah=Il,p_=ah([sh("%String.prototype.indexOf%")]),ts=function(e,t){var i=sh(e,!!t);return typeof i=="function"&&p_(e,".prototype.")>-1?ah([i]):i},m_=ka(),g_=ts,Ho=g_("Object.prototype.toString"),Ra=function(e){return m_&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Ho(e)==="[object Arguments]"},oh=function(e){return Ra(e)?!0:e!==null&&typeof e=="object"&&"length"in e&&typeof e.length=="number"&&e.length>=0&&Ho(e)!=="[object Array]"&&"callee"in e&&Ho(e.callee)==="[object Function]"},y_=function(){return Ra(arguments)}();Ra.isLegacyArguments=oh;var __=y_?Ra:oh,Dc=ts,v_=ka(),A_=ih(),b_=es,qo;if(v_){var S_=Dc("RegExp.prototype.exec"),Pc={},no=function(){throw Pc},Oc={toString:no,valueOf:no};typeof Symbol.toPrimitive=="symbol"&&(Oc[Symbol.toPrimitive]=no),qo=function(e){if(!e||typeof e!="object")return!1;var t=b_(e,"lastIndex"),i=t&&A_(t,"value");if(!i)return!1;try{S_(e,Oc)}catch(n){return n===Pc}}}else{var E_=Dc("Object.prototype.toString"),x_="[object RegExp]";qo=function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:E_(e)===x_}}var T_=qo,C_=ts,w_=T_,k_=C_("RegExp.prototype.exec"),I_=ys,R_=function(e){if(!w_(e))throw new I_("`regex` must be a RegExp");return function(i){return k_(e,i)!==null}},ro,Mc;function L_(){if(Mc)return ro;Mc=1;const s=(function*(){}).constructor;return ro=()=>s,ro}var lh=ts,D_=R_,P_=D_(/^\s*(?:function)?\*/),O_=ka(),Bc=Rl(),M_=lh("Object.prototype.toString"),B_=lh("Function.prototype.toString"),F_=L_(),N_=function(e){if(typeof e!="function")return!1;if(P_(B_(e)))return!0;if(!O_){var t=M_(e);return t==="[object GeneratorFunction]"}if(!Bc)return!1;var i=F_();return i&&Bc(e)===i.prototype},ch=Function.prototype.toString,Gr=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,zo,Ks;if(typeof Gr=="function"&&typeof Object.defineProperty=="function")try{zo=Object.defineProperty({},"length",{get:function(){throw Ks}}),Ks={},Gr(function(){throw 42},null,zo)}catch(s){s!==Ks&&(Gr=null)}else Gr=null;var U_=/^\s*class\b/,Ko=function(e){try{var t=ch.call(e);return U_.test(t)}catch{return!1}},so=function(e){try{return Ko(e)?!1:(ch.call(e),!0)}catch{return!1}},Ws=Object.prototype.toString,$_="[object Object]",G_="[object Function]",V_="[object GeneratorFunction]",j_="[object HTMLAllCollection]",H_="[object HTML document.all class]",q_="[object HTMLCollection]",z_=typeof Symbol=="function"&&!!Symbol.toStringTag,K_=!(0 in[,]),Wo=function(){return!1};if(typeof document=="object"){var W_=document.all;Ws.call(W_)===Ws.call(document.all)&&(Wo=function(e){if((K_||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=Ws.call(e);return(t===j_||t===H_||t===q_||t===$_)&&e("")==null}catch{}return!1})}var Y_=Gr?function(e){if(Wo(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Gr(e,null,zo)}catch(t){if(t!==Ks)return!1}return!Ko(e)&&so(e)}:function(e){if(Wo(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(z_)return so(e);if(Ko(e))return!1;var t=Ws.call(e);return t!==G_&&t!==V_&&!/^\[object HTML/.test(t)?!1:so(e)},X_=Y_,J_=Object.prototype.toString,dh=Object.prototype.hasOwnProperty,Q_=function(e,t,i){for(var n=0,a=e.length;n<a;n++)dh.call(e,n)&&(i==null?t(e[n],n,e):t.call(i,e[n],n,e))},Z_=function(e,t,i){for(var n=0,a=e.length;n<a;n++)i==null?t(e.charAt(n),n,e):t.call(i,e.charAt(n),n,e)},ev=function(e,t,i){for(var n in e)dh.call(e,n)&&(i==null?t(e[n],n,e):t.call(i,e[n],n,e))};function tv(s){return J_.call(s)==="[object Array]"}var iv=function(e,t,i){if(!X_(t))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=i),tv(e)?Q_(e,t,n):typeof e=="string"?Z_(e,t,n):ev(e,t,n)},nv=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],ao=nv,rv=typeof globalThis>"u"?Ou:globalThis,sv=function(){for(var e=[],t=0;t<ao.length;t++)typeof rv[ao[t]]=="function"&&(e[e.length]=ao[t]);return e},uh={exports:{}},Fc=Ia,av=Qu,Pr=ys,Nc=es,hh=function(e,t,i){if(!e||typeof e!="object"&&typeof e!="function")throw new Pr("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Pr("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Pr("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Pr("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Pr("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Pr("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,r=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,d=!!Nc&&Nc(e,t);if(Fc)Fc(e,t,{configurable:r===null&&d?d.configurable:!r,enumerable:n===null&&d?d.enumerable:!n,value:i,writable:a===null&&d?d.writable:!a});else if(o||!n&&!a&&!r)e[t]=i;else throw new av("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Yo=Ia,fh=function(){return!!Yo};fh.hasArrayLengthDefineBug=function(){if(!Yo)return null;try{return Yo([],"length",{value:1}).length!==1}catch{return!0}};var ph=fh,ov=Ll,Uc=hh,lv=ph(),$c=es,Gc=ys,cv=ov("%Math.floor%"),dv=function(e,t){if(typeof e!="function")throw new Gc("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||cv(t)!==t)throw new Gc("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,a=!0;if("length"in e&&$c){var r=$c(e,"length");r&&!r.configurable&&(n=!1),r&&!r.writable&&(a=!1)}return(n||a||!i)&&(lv?Uc(e,"length",t,!0,!0):Uc(e,"length",t)),e},uv=_s(),hv=kl(),fv=th,pv=function(){return fv(uv,hv,arguments)};(function(s){var e=dv,t=Ia,i=Il,n=pv;s.exports=function(r){var o=i(arguments),d=r.length-(arguments.length-1);return e(o,1+(d>0?d:0),!0)},t?t(s.exports,"apply",{value:n}):s.exports.apply=n})(uh);var La=uh.exports,ha=iv,mv=sv,Vc=La,Dl=ts,Ys=es,ws=Rl(),gv=Dl("Object.prototype.toString"),mh=ka(),jc=typeof globalThis>"u"?Ou:globalThis,Xo=mv(),Pl=Dl("String.prototype.slice"),yv=Dl("Array.prototype.indexOf",!0)||function(e,t){for(var i=0;i<e.length;i+=1)if(e[i]===t)return i;return-1},fa={__proto__:null};mh&&Ys&&ws?ha(Xo,function(s){var e=new jc[s];if(Symbol.toStringTag in e&&ws){var t=ws(e),i=Ys(t,Symbol.toStringTag);if(!i&&t){var n=ws(t);i=Ys(n,Symbol.toStringTag)}fa["$"+s]=Vc(i.get)}}):ha(Xo,function(s){var e=new jc[s],t=e.slice||e.set;t&&(fa["$"+s]=Vc(t))});var _v=function(e){var t=!1;return ha(fa,function(i,n){if(!t)try{"$"+i(e)===n&&(t=Pl(n,1))}catch{}}),t},vv=function(e){var t=!1;return ha(fa,function(i,n){if(!t)try{i(e),t=Pl(n,1)}catch{}}),t},gh=function(e){if(!e||typeof e!="object")return!1;if(!mh){var t=Pl(gv(e),8,-1);return yv(Xo,t)>-1?t:t!=="Object"?!1:vv(e)}return Ys?_v(e):null},Av=gh,bv=function(e){return!!Av(e)};(function(s){var e=__,t=N_,i=gh,n=bv;function a(Ue){return Ue.call.bind(Ue)}var r=typeof BigInt<"u",o=typeof Symbol<"u",d=a(Object.prototype.toString),c=a(Number.prototype.valueOf),l=a(String.prototype.valueOf),f=a(Boolean.prototype.valueOf);if(r)var p=a(BigInt.prototype.valueOf);if(o)var g=a(Symbol.prototype.valueOf);function y(Ue,Vt){if(typeof Ue!="object")return!1;try{return Vt(Ue),!0}catch{return!1}}s.isArgumentsObject=e,s.isGeneratorFunction=t,s.isTypedArray=n;function A(Ue){return typeof Promise<"u"&&Ue instanceof Promise||Ue!==null&&typeof Ue=="object"&&typeof Ue.then=="function"&&typeof Ue.catch=="function"}s.isPromise=A;function C(Ue){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Ue):n(Ue)||R(Ue)}s.isArrayBufferView=C;function I(Ue){return i(Ue)==="Uint8Array"}s.isUint8Array=I;function P(Ue){return i(Ue)==="Uint8ClampedArray"}s.isUint8ClampedArray=P;function M(Ue){return i(Ue)==="Uint16Array"}s.isUint16Array=M;function G(Ue){return i(Ue)==="Uint32Array"}s.isUint32Array=G;function Z(Ue){return i(Ue)==="Int8Array"}s.isInt8Array=Z;function le(Ue){return i(Ue)==="Int16Array"}s.isInt16Array=le;function W(Ue){return i(Ue)==="Int32Array"}s.isInt32Array=W;function N(Ue){return i(Ue)==="Float32Array"}s.isFloat32Array=N;function U(Ue){return i(Ue)==="Float64Array"}s.isFloat64Array=U;function O(Ue){return i(Ue)==="BigInt64Array"}s.isBigInt64Array=O;function z(Ue){return i(Ue)==="BigUint64Array"}s.isBigUint64Array=z;function ce(Ue){return d(Ue)==="[object Map]"}ce.working=typeof Map<"u"&&ce(new Map);function be(Ue){return typeof Map>"u"?!1:ce.working?ce(Ue):Ue instanceof Map}s.isMap=be;function Le(Ue){return d(Ue)==="[object Set]"}Le.working=typeof Set<"u"&&Le(new Set);function xe(Ue){return typeof Set>"u"?!1:Le.working?Le(Ue):Ue instanceof Set}s.isSet=xe;function ve(Ue){return d(Ue)==="[object WeakMap]"}ve.working=typeof WeakMap<"u"&&ve(new WeakMap);function ze(Ue){return typeof WeakMap>"u"?!1:ve.working?ve(Ue):Ue instanceof WeakMap}s.isWeakMap=ze;function Pe(Ue){return d(Ue)==="[object WeakSet]"}Pe.working=typeof WeakSet<"u"&&Pe(new WeakSet);function Y(Ue){return Pe(Ue)}s.isWeakSet=Y;function b(Ue){return d(Ue)==="[object ArrayBuffer]"}b.working=typeof ArrayBuffer<"u"&&b(new ArrayBuffer);function S(Ue){return typeof ArrayBuffer>"u"?!1:b.working?b(Ue):Ue instanceof ArrayBuffer}s.isArrayBuffer=S;function k(Ue){return d(Ue)==="[object DataView]"}k.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&k(new DataView(new ArrayBuffer(1),0,1));function R(Ue){return typeof DataView>"u"?!1:k.working?k(Ue):Ue instanceof DataView}s.isDataView=R;var w=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function $(Ue){return d(Ue)==="[object SharedArrayBuffer]"}function X(Ue){return typeof w>"u"?!1:(typeof $.working>"u"&&($.working=$(new w)),$.working?$(Ue):Ue instanceof w)}s.isSharedArrayBuffer=X;function ie(Ue){return d(Ue)==="[object AsyncFunction]"}s.isAsyncFunction=ie;function se(Ue){return d(Ue)==="[object Map Iterator]"}s.isMapIterator=se;function me(Ue){return d(Ue)==="[object Set Iterator]"}s.isSetIterator=me;function ge(Ue){return d(Ue)==="[object Generator]"}s.isGeneratorObject=ge;function Re(Ue){return d(Ue)==="[object WebAssembly.Module]"}s.isWebAssemblyCompiledModule=Re;function Ge(Ue){return y(Ue,c)}s.isNumberObject=Ge;function Je(Ue){return y(Ue,l)}s.isStringObject=Je;function st(Ue){return y(Ue,f)}s.isBooleanObject=st;function xt(Ue){return r&&y(Ue,p)}s.isBigIntObject=xt;function qe(Ue){return o&&y(Ue,g)}s.isSymbolObject=qe;function bt(Ue){return Ge(Ue)||Je(Ue)||st(Ue)||xt(Ue)||qe(Ue)}s.isBoxedPrimitive=bt;function St(Ue){return typeof Uint8Array<"u"&&(S(Ue)||X(Ue))}s.isAnyArrayBuffer=St,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Ue){Object.defineProperty(s,Ue,{enumerable:!1,value:function(){throw new Error(Ue+" is not supported in userland")}})})})(Ju);var Sv=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"},Jo={exports:{}};typeof Object.create=="function"?Jo.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Jo.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}};var Ev=Jo.exports;(function(s){var e={},t=Object.getOwnPropertyDescriptors||function(w){for(var $=Object.keys(w),X={},ie=0;ie<$.length;ie++)X[$[ie]]=Object.getOwnPropertyDescriptor(w,$[ie]);return X},i=/%[sdj%]/g;s.format=function(R){if(!le(R)){for(var w=[],$=0;$<arguments.length;$++)w.push(o(arguments[$]));return w.join(" ")}for(var $=1,X=arguments,ie=X.length,se=String(R).replace(i,function(ge){if(ge==="%%")return"%";if($>=ie)return ge;switch(ge){case"%s":return String(X[$++]);case"%d":return Number(X[$++]);case"%j":try{return JSON.stringify(X[$++])}catch{return"[Circular]"}default:return ge}}),me=X[$];$<ie;me=X[++$])M(me)||!O(me)?se+=" "+me:se+=" "+o(me);return se},s.deprecate=function(R,w){if(typeof process<"u"&&process.noDeprecation===!0)return R;if(typeof process>"u")return function(){return s.deprecate(R,w).apply(this,arguments)};var $=!1;function X(){if(!$){if(process.throwDeprecation)throw new Error(w);process.traceDeprecation?console.trace(w):console.error(w),$=!0}return R.apply(this,arguments)}return X};var n={},a=/^$/;if(e.NODE_DEBUG){var r=e.NODE_DEBUG;r=r.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+r+"$","i")}s.debuglog=function(R){if(R=R.toUpperCase(),!n[R])if(a.test(R)){var w=process.pid;n[R]=function(){var $=s.format.apply(s,arguments);console.error("%s %d: %s",R,w,$)}}else n[R]=function(){};return n[R]};function o(R,w){var $={seen:[],stylize:c};return arguments.length>=3&&($.depth=arguments[2]),arguments.length>=4&&($.colors=arguments[3]),P(w)?$.showHidden=w:w&&s._extend($,w),N($.showHidden)&&($.showHidden=!1),N($.depth)&&($.depth=2),N($.colors)&&($.colors=!1),N($.customInspect)&&($.customInspect=!0),$.colors&&($.stylize=d),f($,R,$.depth)}s.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function d(R,w){var $=o.styles[w];return $?"\x1B["+o.colors[$][0]+"m"+R+"\x1B["+o.colors[$][1]+"m":R}function c(R,w){return R}function l(R){var w={};return R.forEach(function($,X){w[$]=!0}),w}function f(R,w,$){if(R.customInspect&&w&&be(w.inspect)&&w.inspect!==s.inspect&&!(w.constructor&&w.constructor.prototype===w)){var X=w.inspect($,R);return le(X)||(X=f(R,X,$)),X}var ie=p(R,w);if(ie)return ie;var se=Object.keys(w),me=l(se);if(R.showHidden&&(se=Object.getOwnPropertyNames(w)),ce(w)&&(se.indexOf("message")>=0||se.indexOf("description")>=0))return g(w);if(se.length===0){if(be(w)){var ge=w.name?": "+w.name:"";return R.stylize("[Function"+ge+"]","special")}if(U(w))return R.stylize(RegExp.prototype.toString.call(w),"regexp");if(z(w))return R.stylize(Date.prototype.toString.call(w),"date");if(ce(w))return g(w)}var Re="",Ge=!1,Je=["{","}"];if(I(w)&&(Ge=!0,Je=["[","]"]),be(w)){var st=w.name?": "+w.name:"";Re=" [Function"+st+"]"}if(U(w)&&(Re=" "+RegExp.prototype.toString.call(w)),z(w)&&(Re=" "+Date.prototype.toUTCString.call(w)),ce(w)&&(Re=" "+g(w)),se.length===0&&(!Ge||w.length==0))return Je[0]+Re+Je[1];if($<0)return U(w)?R.stylize(RegExp.prototype.toString.call(w),"regexp"):R.stylize("[Object]","special");R.seen.push(w);var xt;return Ge?xt=y(R,w,$,me,se):xt=se.map(function(qe){return A(R,w,$,me,qe,Ge)}),R.seen.pop(),C(xt,Re,Je)}function p(R,w){if(N(w))return R.stylize("undefined","undefined");if(le(w)){var $="'"+JSON.stringify(w).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return R.stylize($,"string")}if(Z(w))return R.stylize(""+w,"number");if(P(w))return R.stylize(""+w,"boolean");if(M(w))return R.stylize("null","null")}function g(R){return"["+Error.prototype.toString.call(R)+"]"}function y(R,w,$,X,ie){for(var se=[],me=0,ge=w.length;me<ge;++me)Y(w,String(me))?se.push(A(R,w,$,X,String(me),!0)):se.push("");return ie.forEach(function(Re){Re.match(/^\d+$/)||se.push(A(R,w,$,X,Re,!0))}),se}function A(R,w,$,X,ie,se){var me,ge,Re;if(Re=Object.getOwnPropertyDescriptor(w,ie)||{value:w[ie]},Re.get?Re.set?ge=R.stylize("[Getter/Setter]","special"):ge=R.stylize("[Getter]","special"):Re.set&&(ge=R.stylize("[Setter]","special")),Y(X,ie)||(me="["+ie+"]"),ge||(R.seen.indexOf(Re.value)<0?(M($)?ge=f(R,Re.value,null):ge=f(R,Re.value,$-1),ge.indexOf(`
`)>-1&&(se?ge=ge.split(`
`).map(function(Ge){return"  "+Ge}).join(`
`).slice(2):ge=`
`+ge.split(`
`).map(function(Ge){return"   "+Ge}).join(`
`))):ge=R.stylize("[Circular]","special")),N(me)){if(se&&ie.match(/^\d+$/))return ge;me=JSON.stringify(""+ie),me.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(me=me.slice(1,-1),me=R.stylize(me,"name")):(me=me.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),me=R.stylize(me,"string"))}return me+": "+ge}function C(R,w,$){var X=R.reduce(function(ie,se){return se.indexOf(`
`)>=0,ie+se.replace(/\u001b\[\d\d?m/g,"").length+1},0);return X>60?$[0]+(w===""?"":w+`
 `)+" "+R.join(`,
  `)+" "+$[1]:$[0]+w+" "+R.join(", ")+" "+$[1]}s.types=Ju;function I(R){return Array.isArray(R)}s.isArray=I;function P(R){return typeof R=="boolean"}s.isBoolean=P;function M(R){return R===null}s.isNull=M;function G(R){return R==null}s.isNullOrUndefined=G;function Z(R){return typeof R=="number"}s.isNumber=Z;function le(R){return typeof R=="string"}s.isString=le;function W(R){return typeof R=="symbol"}s.isSymbol=W;function N(R){return R===void 0}s.isUndefined=N;function U(R){return O(R)&&xe(R)==="[object RegExp]"}s.isRegExp=U,s.types.isRegExp=U;function O(R){return typeof R=="object"&&R!==null}s.isObject=O;function z(R){return O(R)&&xe(R)==="[object Date]"}s.isDate=z,s.types.isDate=z;function ce(R){return O(R)&&(xe(R)==="[object Error]"||R instanceof Error)}s.isError=ce,s.types.isNativeError=ce;function be(R){return typeof R=="function"}s.isFunction=be;function Le(R){return R===null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||typeof R=="symbol"||typeof R>"u"}s.isPrimitive=Le,s.isBuffer=Sv;function xe(R){return Object.prototype.toString.call(R)}function ve(R){return R<10?"0"+R.toString(10):R.toString(10)}var ze=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Pe(){var R=new Date,w=[ve(R.getHours()),ve(R.getMinutes()),ve(R.getSeconds())].join(":");return[R.getDate(),ze[R.getMonth()],w].join(" ")}s.log=function(){console.log("%s - %s",Pe(),s.format.apply(s,arguments))},s.inherits=Ev,s._extend=function(R,w){if(!w||!O(w))return R;for(var $=Object.keys(w),X=$.length;X--;)R[$[X]]=w[$[X]];return R};function Y(R,w){return Object.prototype.hasOwnProperty.call(R,w)}var b=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;s.promisify=function(w){if(typeof w!="function")throw new TypeError('The "original" argument must be of type Function');if(b&&w[b]){var $=w[b];if(typeof $!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty($,b,{value:$,enumerable:!1,writable:!1,configurable:!0}),$}function $(){for(var X,ie,se=new Promise(function(Re,Ge){X=Re,ie=Ge}),me=[],ge=0;ge<arguments.length;ge++)me.push(arguments[ge]);me.push(function(Re,Ge){Re?ie(Re):X(Ge)});try{w.apply(this,me)}catch(Re){ie(Re)}return se}return Object.setPrototypeOf($,Object.getPrototypeOf(w)),b&&Object.defineProperty($,b,{value:$,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties($,t(w))},s.promisify.custom=b;function S(R,w){if(!R){var $=new Error("Promise was rejected with a falsy value");$.reason=R,R=$}return w(R)}function k(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');function w(){for(var $=[],X=0;X<arguments.length;X++)$.push(arguments[X]);var ie=$.pop();if(typeof ie!="function")throw new TypeError("The last argument must be of type Function");var se=this,me=function(){return ie.apply(se,arguments)};R.apply(this,$).then(function(ge){process.nextTick(me.bind(null,null,ge))},function(ge){process.nextTick(S.bind(null,ge,me))})}return Object.setPrototypeOf(w,Object.getPrototypeOf(R)),Object.defineProperties(w,t(R)),w}s.callbackify=k})(Xr);var Hc;function yh(){if(Hc)return Ha;Hc=1;function s(P){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},s(P)}function e(P,M,G){return Object.defineProperty(P,"prototype",{writable:!1}),P}function t(P,M){if(!(P instanceof M))throw new TypeError("Cannot call a class as a function")}function i(P,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(M&&M.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),M&&n(P,M)}function n(P,M){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Z,le){return Z.__proto__=le,Z},n(P,M)}function a(P){var M=d();return function(){var Z=c(P),le;if(M){var W=c(this).constructor;le=Reflect.construct(Z,arguments,W)}else le=Z.apply(this,arguments);return r(this,le)}}function r(P,M){if(M&&(s(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(P)}function o(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c(P){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(G){return G.__proto__||Object.getPrototypeOf(G)},c(P)}var l={},f,p;function g(P,M,G){G||(G=Error);function Z(W,N,U){return typeof M=="string"?M:M(W,N,U)}var le=function(W){i(U,W);var N=a(U);function U(O,z,ce){var be;return t(this,U),be=N.call(this,Z(O,z,ce)),be.code=P,be}return e(U)}(G);l[P]=le}function y(P,M){if(Array.isArray(P)){var G=P.length;return P=P.map(function(Z){return String(Z)}),G>2?"one of ".concat(M," ").concat(P.slice(0,G-1).join(", "),", or ")+P[G-1]:G===2?"one of ".concat(M," ").concat(P[0]," or ").concat(P[1]):"of ".concat(M," ").concat(P[0])}else return"of ".concat(M," ").concat(String(P))}function A(P,M,G){return P.substr(0,M.length)===M}function C(P,M,G){return(G===void 0||G>P.length)&&(G=P.length),P.substring(G-M.length,G)===M}function I(P,M,G){return typeof G!="number"&&(G=0),G+M.length>P.length?!1:P.indexOf(M,G)!==-1}return g("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),g("ERR_INVALID_ARG_TYPE",function(P,M,G){f===void 0&&(f=Qo()),f(typeof P=="string","'name' must be a string");var Z;typeof M=="string"&&A(M,"not ")?(Z="must not be",M=M.replace(/^not /,"")):Z="must be";var le;if(C(P," argument"))le="The ".concat(P," ").concat(Z," ").concat(y(M,"type"));else{var W=I(P,".")?"property":"argument";le='The "'.concat(P,'" ').concat(W," ").concat(Z," ").concat(y(M,"type"))}return le+=". Received type ".concat(s(G)),le},TypeError),g("ERR_INVALID_ARG_VALUE",function(P,M){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";p===void 0&&(p=Xr);var Z=p.inspect(M);return Z.length>128&&(Z="".concat(Z.slice(0,128),"...")),"The argument '".concat(P,"' ").concat(G,". Received ").concat(Z)},TypeError),g("ERR_INVALID_RETURN_VALUE",function(P,M,G){var Z;return G&&G.constructor&&G.constructor.name?Z="instance of ".concat(G.constructor.name):Z="type ".concat(s(G)),"Expected ".concat(P,' to be returned from the "').concat(M,'"')+" function but got ".concat(Z,".")},TypeError),g("ERR_MISSING_ARGS",function(){for(var P=arguments.length,M=new Array(P),G=0;G<P;G++)M[G]=arguments[G];f===void 0&&(f=Qo()),f(M.length>0,"At least one arg needs to be specified");var Z="The ",le=M.length;switch(M=M.map(function(W){return'"'.concat(W,'"')}),le){case 1:Z+="".concat(M[0]," argument");break;case 2:Z+="".concat(M[0]," and ").concat(M[1]," arguments");break;default:Z+=M.slice(0,le-1).join(", "),Z+=", and ".concat(M[le-1]," arguments");break}return"".concat(Z," must be specified")},TypeError),Ha.codes=l,Ha}var oo,qc;function xv(){if(qc)return oo;qc=1;function s(Y,b){var S=Object.keys(Y);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(Y);b&&(k=k.filter(function(R){return Object.getOwnPropertyDescriptor(Y,R).enumerable})),S.push.apply(S,k)}return S}function e(Y){for(var b=1;b<arguments.length;b++){var S=arguments[b]!=null?arguments[b]:{};b%2?s(Object(S),!0).forEach(function(k){t(Y,k,S[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(S)):s(Object(S)).forEach(function(k){Object.defineProperty(Y,k,Object.getOwnPropertyDescriptor(S,k))})}return Y}function t(Y,b,S){return b=r(b),b in Y?Object.defineProperty(Y,b,{value:S,enumerable:!0,configurable:!0,writable:!0}):Y[b]=S,Y}function i(Y,b){if(!(Y instanceof b))throw new TypeError("Cannot call a class as a function")}function n(Y,b){for(var S=0;S<b.length;S++){var k=b[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(Y,r(k.key),k)}}function a(Y,b,S){return b&&n(Y.prototype,b),Object.defineProperty(Y,"prototype",{writable:!1}),Y}function r(Y){var b=o(Y,"string");return P(b)==="symbol"?b:String(b)}function o(Y,b){if(P(Y)!=="object"||Y===null)return Y;var S=Y[Symbol.toPrimitive];if(S!==void 0){var k=S.call(Y,b);if(P(k)!=="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}function d(Y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(b&&b.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),Object.defineProperty(Y,"prototype",{writable:!1}),b&&C(Y,b)}function c(Y){var b=y();return function(){var k=I(Y),R;if(b){var w=I(this).constructor;R=Reflect.construct(k,arguments,w)}else R=k.apply(this,arguments);return l(this,R)}}function l(Y,b){if(b&&(P(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(Y)}function f(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}function p(Y){var b=typeof Map=="function"?new Map:void 0;return p=function(k){if(k===null||!A(k))return k;if(typeof k!="function")throw new TypeError("Super expression must either be null or a function");if(typeof b<"u"){if(b.has(k))return b.get(k);b.set(k,R)}function R(){return g(k,arguments,I(this).constructor)}return R.prototype=Object.create(k.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),C(R,k)},p(Y)}function g(Y,b,S){return y()?g=Reflect.construct.bind():g=function(R,w,$){var X=[null];X.push.apply(X,w);var ie=Function.bind.apply(R,X),se=new ie;return $&&C(se,$.prototype),se},g.apply(null,arguments)}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(Y){return Function.toString.call(Y).indexOf("[native code]")!==-1}function C(Y,b){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,R){return k.__proto__=R,k},C(Y,b)}function I(Y){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},I(Y)}function P(Y){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},P(Y)}var M=Xr,G=M.inspect,Z=yh(),le=Z.codes.ERR_INVALID_ARG_TYPE;function W(Y,b,S){return(S===void 0||S>Y.length)&&(S=Y.length),Y.substring(S-b.length,S)===b}function N(Y,b){if(b=Math.floor(b),Y.length==0||b==0)return"";var S=Y.length*b;for(b=Math.floor(Math.log(b)/Math.log(2));b;)Y+=Y,b--;return Y+=Y.substring(0,S-Y.length),Y}var U="",O="",z="",ce="",be={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},Le=10;function xe(Y){var b=Object.keys(Y),S=Object.create(Object.getPrototypeOf(Y));return b.forEach(function(k){S[k]=Y[k]}),Object.defineProperty(S,"message",{value:Y.message}),S}function ve(Y){return G(Y,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function ze(Y,b,S){var k="",R="",w=0,$="",X=!1,ie=ve(Y),se=ie.split(`
`),me=ve(b).split(`
`),ge=0,Re="";if(S==="strictEqual"&&P(Y)==="object"&&P(b)==="object"&&Y!==null&&b!==null&&(S="strictEqualObject"),se.length===1&&me.length===1&&se[0]!==me[0]){var Ge=se[0].length+me[0].length;if(Ge<=Le){if((P(Y)!=="object"||Y===null)&&(P(b)!=="object"||b===null)&&(Y!==0||b!==0))return"".concat(be[S],`

`)+"".concat(se[0]," !== ").concat(me[0],`
`)}else if(S!=="strictEqualObject"){var Je=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(Ge<Je){for(;se[0][ge]===me[0][ge];)ge++;ge>2&&(Re=`
  `.concat(N(" ",ge),"^"),ge=0)}}}for(var st=se[se.length-1],xt=me[me.length-1];st===xt&&(ge++<2?$=`
  `.concat(st).concat($):k=st,se.pop(),me.pop(),!(se.length===0||me.length===0));)st=se[se.length-1],xt=me[me.length-1];var qe=Math.max(se.length,me.length);if(qe===0){var bt=ie.split(`
`);if(bt.length>30)for(bt[26]="".concat(U,"...").concat(ce);bt.length>27;)bt.pop();return"".concat(be.notIdentical,`

`).concat(bt.join(`
`),`
`)}ge>3&&($=`
`.concat(U,"...").concat(ce).concat($),X=!0),k!==""&&($=`
  `.concat(k).concat($),k="");var St=0,Ue=be[S]+`
`.concat(O,"+ actual").concat(ce," ").concat(z,"- expected").concat(ce),Vt=" ".concat(U,"...").concat(ce," Lines skipped");for(ge=0;ge<qe;ge++){var Kt=ge-w;if(se.length<ge+1)Kt>1&&ge>2&&(Kt>4?(R+=`
`.concat(U,"...").concat(ce),X=!0):Kt>3&&(R+=`
  `.concat(me[ge-2]),St++),R+=`
  `.concat(me[ge-1]),St++),w=ge,k+=`
`.concat(z,"-").concat(ce," ").concat(me[ge]),St++;else if(me.length<ge+1)Kt>1&&ge>2&&(Kt>4?(R+=`
`.concat(U,"...").concat(ce),X=!0):Kt>3&&(R+=`
  `.concat(se[ge-2]),St++),R+=`
  `.concat(se[ge-1]),St++),w=ge,R+=`
`.concat(O,"+").concat(ce," ").concat(se[ge]),St++;else{var It=me[ge],Yt=se[ge],Te=Yt!==It&&(!W(Yt,",")||Yt.slice(0,-1)!==It);Te&&W(It,",")&&It.slice(0,-1)===Yt&&(Te=!1,Yt+=","),Te?(Kt>1&&ge>2&&(Kt>4?(R+=`
`.concat(U,"...").concat(ce),X=!0):Kt>3&&(R+=`
  `.concat(se[ge-2]),St++),R+=`
  `.concat(se[ge-1]),St++),w=ge,R+=`
`.concat(O,"+").concat(ce," ").concat(Yt),k+=`
`.concat(z,"-").concat(ce," ").concat(It),St+=2):(R+=k,k="",(Kt===1||ge===0)&&(R+=`
  `.concat(Yt),St++))}if(St>20&&ge<qe-2)return"".concat(Ue).concat(Vt,`
`).concat(R,`
`).concat(U,"...").concat(ce).concat(k,`
`)+"".concat(U,"...").concat(ce)}return"".concat(Ue).concat(X?Vt:"",`
`).concat(R).concat(k).concat($).concat(Re)}var Pe=function(Y,b){d(k,Y);var S=c(k);function k(R){var w;if(i(this,k),P(R)!=="object"||R===null)throw new le("options","Object",R);var $=R.message,X=R.operator,ie=R.stackStartFn,se=R.actual,me=R.expected,ge=Error.stackTraceLimit;if(Error.stackTraceLimit=0,$!=null)w=S.call(this,String($));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(U="\x1B[34m",O="\x1B[32m",ce="\x1B[39m",z="\x1B[31m"):(U="",O="",ce="",z="")),P(se)==="object"&&se!==null&&P(me)==="object"&&me!==null&&"stack"in se&&se instanceof Error&&"stack"in me&&me instanceof Error&&(se=xe(se),me=xe(me)),X==="deepStrictEqual"||X==="strictEqual")w=S.call(this,ze(se,me,X));else if(X==="notDeepStrictEqual"||X==="notStrictEqual"){var Re=be[X],Ge=ve(se).split(`
`);if(X==="notStrictEqual"&&P(se)==="object"&&se!==null&&(Re=be.notStrictEqualObject),Ge.length>30)for(Ge[26]="".concat(U,"...").concat(ce);Ge.length>27;)Ge.pop();Ge.length===1?w=S.call(this,"".concat(Re," ").concat(Ge[0])):w=S.call(this,"".concat(Re,`

`).concat(Ge.join(`
`),`
`))}else{var Je=ve(se),st="",xt=be[X];X==="notDeepEqual"||X==="notEqual"?(Je="".concat(be[X],`

`).concat(Je),Je.length>1024&&(Je="".concat(Je.slice(0,1021),"..."))):(st="".concat(ve(me)),Je.length>512&&(Je="".concat(Je.slice(0,509),"...")),st.length>512&&(st="".concat(st.slice(0,509),"...")),X==="deepEqual"||X==="equal"?Je="".concat(xt,`

`).concat(Je,`

should equal

`):st=" ".concat(X," ").concat(st)),w=S.call(this,"".concat(Je).concat(st))}return Error.stackTraceLimit=ge,w.generatedMessage=!$,Object.defineProperty(f(w),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),w.code="ERR_ASSERTION",w.actual=se,w.expected=me,w.operator=X,Error.captureStackTrace&&Error.captureStackTrace(f(w),ie),w.stack,w.name="AssertionError",l(w)}return a(k,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:b,value:function(w,$){return G(this,e(e({},$),{},{customInspect:!1,depth:0}))}}]),k}(p(Error),G.custom);return oo=Pe,oo}var zc=Object.prototype.toString,_h=function(e){var t=zc.call(e),i=t==="[object Arguments]";return i||(i=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&zc.call(e.callee)==="[object Function]"),i},lo,Kc;function Tv(){if(Kc)return lo;Kc=1;var s;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,i=_h,n=Object.prototype.propertyIsEnumerable,a=!n.call({toString:null},"toString"),r=n.call(function(){},"prototype"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(p){var g=p.constructor;return g&&g.prototype===p},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if(typeof window>"u")return!1;for(var p in window)try{if(!c["$"+p]&&e.call(window,p)&&window[p]!==null&&typeof window[p]=="object")try{d(window[p])}catch{return!0}}catch{return!0}return!1}(),f=function(p){if(typeof window>"u"||!l)return d(p);try{return d(p)}catch{return!1}};s=function(g){var y=g!==null&&typeof g=="object",A=t.call(g)==="[object Function]",C=i(g),I=y&&t.call(g)==="[object String]",P=[];if(!y&&!A&&!C)throw new TypeError("Object.keys called on a non-object");var M=r&&A;if(I&&g.length>0&&!e.call(g,0))for(var G=0;G<g.length;++G)P.push(String(G));if(C&&g.length>0)for(var Z=0;Z<g.length;++Z)P.push(String(Z));else for(var le in g)!(M&&le==="prototype")&&e.call(g,le)&&P.push(String(le));if(a)for(var W=f(g),N=0;N<o.length;++N)!(W&&o[N]==="constructor")&&e.call(g,o[N])&&P.push(o[N]);return P}}return lo=s,lo}var Cv=Array.prototype.slice,wv=_h,Wc=Object.keys,Xs=Wc?function(e){return Wc(e)}:Tv(),Yc=Object.keys;Xs.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(i){return wv(i)?Yc(Cv.call(i)):Yc(i)})}else Object.keys=Xs;return Object.keys||Xs};var vh=Xs,kv=vh,Ah=Tl(),bh=ts,Js=Cl,Iv=bh("Array.prototype.push"),Xc=bh("Object.prototype.propertyIsEnumerable"),Rv=Ah?Js.getOwnPropertySymbols:null,Lv=function(e,t){if(e==null)throw new TypeError("target must be an object");var i=Js(e);if(arguments.length===1)return i;for(var n=1;n<arguments.length;++n){var a=Js(arguments[n]),r=kv(a),o=Ah&&(Js.getOwnPropertySymbols||Rv);if(o)for(var d=o(a),c=0;c<d.length;++c){var l=d[c];Xc(a,l)&&Iv(r,l)}for(var f=0;f<r.length;++f){var p=r[f];if(Xc(a,p)){var g=a[p];i[p]=g}}}return i},co=Lv,Dv=function(){if(!Object.assign)return!1;for(var s="abcdefghijklmnopqrst",e=s.split(""),t={},i=0;i<e.length;++i)t[e[i]]=e[i];var n=Object.assign({},t),a="";for(var r in n)a+=r;return s!==a},Pv=function(){if(!Object.assign||!Object.preventExtensions)return!1;var s=Object.preventExtensions({1:2});try{Object.assign(s,"xy")}catch{return s[1]==="y"}return!1},Ov=function(){return!Object.assign||Dv()||Pv()?co:Object.assign},Jc=function(s){return s!==s},Sh=function(e,t){return e===0&&t===0?1/e===1/t:!!(e===t||Jc(e)&&Jc(t))},Mv=Sh,Ol=function(){return typeof Object.is=="function"?Object.is:Mv},Eh=Ll,xh=La,Bv=xh(Eh("String.prototype.indexOf")),Fv=function(e,t){var i=Eh(e,!!t);return typeof i=="function"&&Bv(e,".prototype.")>-1?xh(i):i},uo,Qc;function Da(){if(Qc)return uo;Qc=1;var s=vh,e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",t=Object.prototype.toString,i=Array.prototype.concat,n=hh,a=function(c){return typeof c=="function"&&t.call(c)==="[object Function]"},r=ph(),o=function(c,l,f,p){if(l in c){if(p===!0){if(c[l]===f)return}else if(!a(p)||!p())return}r?n(c,l,f,!0):n(c,l,f)},d=function(c,l){var f=arguments.length>2?arguments[2]:{},p=s(l);e&&(p=i.call(p,Object.getOwnPropertySymbols(l)));for(var g=0;g<p.length;g+=1)o(c,p[g],l[p[g]],f[p[g]])};return d.supportsDescriptors=!!r,uo=d,uo}var ho,Zc;function Nv(){if(Zc)return ho;Zc=1;var s=Ol,e=Da();return ho=function(){var i=s();return e(Object,{is:i},{is:function(){return Object.is!==i}}),i},ho}var fo,ed;function Uv(){if(ed)return fo;ed=1;var s=Da(),e=La,t=Sh,i=Ol,n=Nv(),a=e(i(),Object);return s(a,{getPolyfill:i,implementation:t,shim:n}),fo=a,fo}var po,td;function Th(){return td||(td=1,po=function(e){return e!==e}),po}var mo,id;function Ch(){if(id)return mo;id=1;var s=Th();return mo=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:s},mo}var go,nd;function $v(){if(nd)return go;nd=1;var s=Da(),e=Ch();return go=function(){var i=e();return s(Number,{isNaN:i},{isNaN:function(){return Number.isNaN!==i}}),i},go}var yo,rd;function Gv(){if(rd)return yo;rd=1;var s=La,e=Da(),t=Th(),i=Ch(),n=$v(),a=s(i(),Number);return e(a,{getPolyfill:i,implementation:t,shim:n}),yo=a,yo}var _o,sd;function Vv(){if(sd)return _o;sd=1;function s(Te,$e){return a(Te)||n(Te,$e)||t(Te,$e)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t(Te,$e){if(Te){if(typeof Te=="string")return i(Te,$e);var lt=Object.prototype.toString.call(Te).slice(8,-1);if(lt==="Object"&&Te.constructor&&(lt=Te.constructor.name),lt==="Map"||lt==="Set")return Array.from(Te);if(lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt))return i(Te,$e)}}function i(Te,$e){($e==null||$e>Te.length)&&($e=Te.length);for(var lt=0,vt=new Array($e);lt<$e;lt++)vt[lt]=Te[lt];return vt}function n(Te,$e){var lt=Te==null?null:typeof Symbol<"u"&&Te[Symbol.iterator]||Te["@@iterator"];if(lt!=null){var vt,_t,Wt,Tt,Ct=[],ri=!0,H=!1;try{if(Wt=(lt=lt.call(Te)).next,$e!==0)for(;!(ri=(vt=Wt.call(lt)).done)&&(Ct.push(vt.value),Ct.length!==$e);ri=!0);}catch(fe){H=!0,_t=fe}finally{try{if(!ri&&lt.return!=null&&(Tt=lt.return(),Object(Tt)!==Tt))return}finally{if(H)throw _t}}return Ct}}function a(Te){if(Array.isArray(Te))return Te}function r(Te){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($e){return typeof $e}:function($e){return $e&&typeof Symbol=="function"&&$e.constructor===Symbol&&$e!==Symbol.prototype?"symbol":typeof $e},r(Te)}var o=/a/g.flags!==void 0,d=function($e){var lt=[];return $e.forEach(function(vt){return lt.push(vt)}),lt},c=function($e){var lt=[];return $e.forEach(function(vt,_t){return lt.push([_t,vt])}),lt},l=Object.is?Object.is:Uv(),f=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},p=Number.isNaN?Number.isNaN:Gv();function g(Te){return Te.call.bind(Te)}var y=g(Object.prototype.hasOwnProperty),A=g(Object.prototype.propertyIsEnumerable),C=g(Object.prototype.toString),I=Xr.types,P=I.isAnyArrayBuffer,M=I.isArrayBufferView,G=I.isDate,Z=I.isMap,le=I.isRegExp,W=I.isSet,N=I.isNativeError,U=I.isBoxedPrimitive,O=I.isNumberObject,z=I.isStringObject,ce=I.isBooleanObject,be=I.isBigIntObject,Le=I.isSymbolObject,xe=I.isFloat32Array,ve=I.isFloat64Array;function ze(Te){if(Te.length===0||Te.length>10)return!0;for(var $e=0;$e<Te.length;$e++){var lt=Te.charCodeAt($e);if(lt<48||lt>57)return!0}return Te.length===10&&Te>=Math.pow(2,32)}function Pe(Te){return Object.keys(Te).filter(ze).concat(f(Te).filter(Object.prototype.propertyIsEnumerable.bind(Te)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function Y(Te,$e){if(Te===$e)return 0;for(var lt=Te.length,vt=$e.length,_t=0,Wt=Math.min(lt,vt);_t<Wt;++_t)if(Te[_t]!==$e[_t]){lt=Te[_t],vt=$e[_t];break}return lt<vt?-1:vt<lt?1:0}var b=!0,S=!1,k=0,R=1,w=2,$=3;function X(Te,$e){return o?Te.source===$e.source&&Te.flags===$e.flags:RegExp.prototype.toString.call(Te)===RegExp.prototype.toString.call($e)}function ie(Te,$e){if(Te.byteLength!==$e.byteLength)return!1;for(var lt=0;lt<Te.byteLength;lt++)if(Te[lt]!==$e[lt])return!1;return!0}function se(Te,$e){return Te.byteLength!==$e.byteLength?!1:Y(new Uint8Array(Te.buffer,Te.byteOffset,Te.byteLength),new Uint8Array($e.buffer,$e.byteOffset,$e.byteLength))===0}function me(Te,$e){return Te.byteLength===$e.byteLength&&Y(new Uint8Array(Te),new Uint8Array($e))===0}function ge(Te,$e){return O(Te)?O($e)&&l(Number.prototype.valueOf.call(Te),Number.prototype.valueOf.call($e)):z(Te)?z($e)&&String.prototype.valueOf.call(Te)===String.prototype.valueOf.call($e):ce(Te)?ce($e)&&Boolean.prototype.valueOf.call(Te)===Boolean.prototype.valueOf.call($e):be(Te)?be($e)&&BigInt.prototype.valueOf.call(Te)===BigInt.prototype.valueOf.call($e):Le($e)&&Symbol.prototype.valueOf.call(Te)===Symbol.prototype.valueOf.call($e)}function Re(Te,$e,lt,vt){if(Te===$e)return Te!==0?!0:lt?l(Te,$e):!0;if(lt){if(r(Te)!=="object")return typeof Te=="number"&&p(Te)&&p($e);if(r($e)!=="object"||Te===null||$e===null||Object.getPrototypeOf(Te)!==Object.getPrototypeOf($e))return!1}else{if(Te===null||r(Te)!=="object")return $e===null||r($e)!=="object"?Te==$e:!1;if($e===null||r($e)!=="object")return!1}var _t=C(Te),Wt=C($e);if(_t!==Wt)return!1;if(Array.isArray(Te)){if(Te.length!==$e.length)return!1;var Tt=Pe(Te),Ct=Pe($e);return Tt.length!==Ct.length?!1:Je(Te,$e,lt,vt,R,Tt)}if(_t==="[object Object]"&&(!Z(Te)&&Z($e)||!W(Te)&&W($e)))return!1;if(G(Te)){if(!G($e)||Date.prototype.getTime.call(Te)!==Date.prototype.getTime.call($e))return!1}else if(le(Te)){if(!le($e)||!X(Te,$e))return!1}else if(N(Te)||Te instanceof Error){if(Te.message!==$e.message||Te.name!==$e.name)return!1}else if(M(Te)){if(!lt&&(xe(Te)||ve(Te))){if(!ie(Te,$e))return!1}else if(!se(Te,$e))return!1;var ri=Pe(Te),H=Pe($e);return ri.length!==H.length?!1:Je(Te,$e,lt,vt,k,ri)}else{if(W(Te))return!W($e)||Te.size!==$e.size?!1:Je(Te,$e,lt,vt,w);if(Z(Te))return!Z($e)||Te.size!==$e.size?!1:Je(Te,$e,lt,vt,$);if(P(Te)){if(!me(Te,$e))return!1}else if(U(Te)&&!ge(Te,$e))return!1}return Je(Te,$e,lt,vt,k)}function Ge(Te,$e){return $e.filter(function(lt){return A(Te,lt)})}function Je(Te,$e,lt,vt,_t,Wt){if(arguments.length===5){Wt=Object.keys(Te);var Tt=Object.keys($e);if(Wt.length!==Tt.length)return!1}for(var Ct=0;Ct<Wt.length;Ct++)if(!y($e,Wt[Ct]))return!1;if(lt&&arguments.length===5){var ri=f(Te);if(ri.length!==0){var H=0;for(Ct=0;Ct<ri.length;Ct++){var fe=ri[Ct];if(A(Te,fe)){if(!A($e,fe))return!1;Wt.push(fe),H++}else if(A($e,fe))return!1}var J=f($e);if(ri.length!==J.length&&Ge($e,J).length!==H)return!1}else{var K=f($e);if(K.length!==0&&Ge($e,K).length!==0)return!1}}if(Wt.length===0&&(_t===k||_t===R&&Te.length===0||Te.size===0))return!0;if(vt===void 0)vt={val1:new Map,val2:new Map,position:0};else{var ue=vt.val1.get(Te);if(ue!==void 0){var Ce=vt.val2.get($e);if(Ce!==void 0)return ue===Ce}vt.position++}vt.val1.set(Te,vt.position),vt.val2.set($e,vt.position);var ye=Kt(Te,$e,lt,Wt,vt,_t);return vt.val1.delete(Te),vt.val2.delete($e),ye}function st(Te,$e,lt,vt){for(var _t=d(Te),Wt=0;Wt<_t.length;Wt++){var Tt=_t[Wt];if(Re($e,Tt,lt,vt))return Te.delete(Tt),!0}return!1}function xt(Te){switch(r(Te)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":Te=+Te;case"number":if(p(Te))return!1}return!0}function qe(Te,$e,lt){var vt=xt(lt);return vt??($e.has(vt)&&!Te.has(vt))}function bt(Te,$e,lt,vt,_t){var Wt=xt(lt);if(Wt!=null)return Wt;var Tt=$e.get(Wt);return Tt===void 0&&!$e.has(Wt)||!Re(vt,Tt,!1,_t)?!1:!Te.has(Wt)&&Re(vt,Tt,!1,_t)}function St(Te,$e,lt,vt){for(var _t=null,Wt=d(Te),Tt=0;Tt<Wt.length;Tt++){var Ct=Wt[Tt];if(r(Ct)==="object"&&Ct!==null)_t===null&&(_t=new Set),_t.add(Ct);else if(!$e.has(Ct)){if(lt||!qe(Te,$e,Ct))return!1;_t===null&&(_t=new Set),_t.add(Ct)}}if(_t!==null){for(var ri=d($e),H=0;H<ri.length;H++){var fe=ri[H];if(r(fe)==="object"&&fe!==null){if(!st(_t,fe,lt,vt))return!1}else if(!lt&&!Te.has(fe)&&!st(_t,fe,lt,vt))return!1}return _t.size===0}return!0}function Ue(Te,$e,lt,vt,_t,Wt){for(var Tt=d(Te),Ct=0;Ct<Tt.length;Ct++){var ri=Tt[Ct];if(Re(lt,ri,_t,Wt)&&Re(vt,$e.get(ri),_t,Wt))return Te.delete(ri),!0}return!1}function Vt(Te,$e,lt,vt){for(var _t=null,Wt=c(Te),Tt=0;Tt<Wt.length;Tt++){var Ct=s(Wt[Tt],2),ri=Ct[0],H=Ct[1];if(r(ri)==="object"&&ri!==null)_t===null&&(_t=new Set),_t.add(ri);else{var fe=$e.get(ri);if(fe===void 0&&!$e.has(ri)||!Re(H,fe,lt,vt)){if(lt||!bt(Te,$e,ri,H,vt))return!1;_t===null&&(_t=new Set),_t.add(ri)}}}if(_t!==null){for(var J=c($e),K=0;K<J.length;K++){var ue=s(J[K],2),Ce=ue[0],ye=ue[1];if(r(Ce)==="object"&&Ce!==null){if(!Ue(_t,Te,Ce,ye,lt,vt))return!1}else if(!lt&&(!Te.has(Ce)||!Re(Te.get(Ce),ye,!1,vt))&&!Ue(_t,Te,Ce,ye,!1,vt))return!1}return _t.size===0}return!0}function Kt(Te,$e,lt,vt,_t,Wt){var Tt=0;if(Wt===w){if(!St(Te,$e,lt,_t))return!1}else if(Wt===$){if(!Vt(Te,$e,lt,_t))return!1}else if(Wt===R)for(;Tt<Te.length;Tt++)if(y(Te,Tt)){if(!y($e,Tt)||!Re(Te[Tt],$e[Tt],lt,_t))return!1}else{if(y($e,Tt))return!1;for(var Ct=Object.keys(Te);Tt<Ct.length;Tt++){var ri=Ct[Tt];if(!y($e,ri)||!Re(Te[ri],$e[ri],lt,_t))return!1}return Ct.length===Object.keys($e).length}for(Tt=0;Tt<vt.length;Tt++){var H=vt[Tt];if(!Re(Te[H],$e[H],lt,_t))return!1}return!0}function It(Te,$e){return Re(Te,$e,S)}function Yt(Te,$e){return Re(Te,$e,b)}return _o={isDeepEqual:It,isDeepStrictEqual:Yt},_o}var ad;function Qo(){if(ad)return ja.exports;ad=1;function s(w){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},s(w)}function e(w,$,X){return Object.defineProperty(w,"prototype",{writable:!1}),w}function t(w,$){if(!(w instanceof $))throw new TypeError("Cannot call a class as a function")}var i=yh(),n=i.codes,a=n.ERR_AMBIGUOUS_ARGUMENT,r=n.ERR_INVALID_ARG_TYPE,o=n.ERR_INVALID_ARG_VALUE,d=n.ERR_INVALID_RETURN_VALUE,c=n.ERR_MISSING_ARGS,l=xv(),f=Xr,p=f.inspect,g=Xr.types,y=g.isPromise,A=g.isRegExp,C=Ov(),I=Ol(),P=Fv("RegExp.prototype.test"),M,G;function Z(){var w=Vv();M=w.isDeepEqual,G=w.isDeepStrictEqual}var le=!1,W=ja.exports=ce,N={};function U(w){throw w.message instanceof Error?w.message:new l(w)}function O(w,$,X,ie,se){var me=arguments.length,ge;if(me===0)ge="Failed";else if(me===1)X=w,w=void 0;else{if(le===!1){le=!0;var Re=process.emitWarning?process.emitWarning:console.warn.bind(console);Re("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}me===2&&(ie="!=")}if(X instanceof Error)throw X;var Ge={actual:w,expected:$,operator:ie===void 0?"fail":ie,stackStartFn:se||O};X!==void 0&&(Ge.message=X);var Je=new l(Ge);throw ge&&(Je.message=ge,Je.generatedMessage=!0),Je}W.fail=O,W.AssertionError=l;function z(w,$,X,ie){if(!X){var se=!1;if($===0)se=!0,ie="No value argument passed to `assert.ok()`";else if(ie instanceof Error)throw ie;var me=new l({actual:X,expected:!0,message:ie,operator:"==",stackStartFn:w});throw me.generatedMessage=se,me}}function ce(){for(var w=arguments.length,$=new Array(w),X=0;X<w;X++)$[X]=arguments[X];z.apply(void 0,[ce,$.length].concat($))}W.ok=ce,W.equal=function w($,X,ie){if(arguments.length<2)throw new c("actual","expected");$!=X&&U({actual:$,expected:X,message:ie,operator:"==",stackStartFn:w})},W.notEqual=function w($,X,ie){if(arguments.length<2)throw new c("actual","expected");$==X&&U({actual:$,expected:X,message:ie,operator:"!=",stackStartFn:w})},W.deepEqual=function w($,X,ie){if(arguments.length<2)throw new c("actual","expected");M===void 0&&Z(),M($,X)||U({actual:$,expected:X,message:ie,operator:"deepEqual",stackStartFn:w})},W.notDeepEqual=function w($,X,ie){if(arguments.length<2)throw new c("actual","expected");M===void 0&&Z(),M($,X)&&U({actual:$,expected:X,message:ie,operator:"notDeepEqual",stackStartFn:w})},W.deepStrictEqual=function w($,X,ie){if(arguments.length<2)throw new c("actual","expected");M===void 0&&Z(),G($,X)||U({actual:$,expected:X,message:ie,operator:"deepStrictEqual",stackStartFn:w})},W.notDeepStrictEqual=be;function be(w,$,X){if(arguments.length<2)throw new c("actual","expected");M===void 0&&Z(),G(w,$)&&U({actual:w,expected:$,message:X,operator:"notDeepStrictEqual",stackStartFn:be})}W.strictEqual=function w($,X,ie){if(arguments.length<2)throw new c("actual","expected");I($,X)||U({actual:$,expected:X,message:ie,operator:"strictEqual",stackStartFn:w})},W.notStrictEqual=function w($,X,ie){if(arguments.length<2)throw new c("actual","expected");I($,X)&&U({actual:$,expected:X,message:ie,operator:"notStrictEqual",stackStartFn:w})};var Le=e(function w($,X,ie){var se=this;t(this,w),X.forEach(function(me){me in $&&(ie!==void 0&&typeof ie[me]=="string"&&A($[me])&&P($[me],ie[me])?se[me]=ie[me]:se[me]=$[me])})});function xe(w,$,X,ie,se,me){if(!(X in w)||!G(w[X],$[X])){if(!ie){var ge=new Le(w,se),Re=new Le($,se,w),Ge=new l({actual:ge,expected:Re,operator:"deepStrictEqual",stackStartFn:me});throw Ge.actual=w,Ge.expected=$,Ge.operator=me.name,Ge}U({actual:w,expected:$,message:ie,operator:me.name,stackStartFn:me})}}function ve(w,$,X,ie){if(typeof $!="function"){if(A($))return P($,w);if(arguments.length===2)throw new r("expected",["Function","RegExp"],$);if(s(w)!=="object"||w===null){var se=new l({actual:w,expected:$,message:X,operator:"deepStrictEqual",stackStartFn:ie});throw se.operator=ie.name,se}var me=Object.keys($);if($ instanceof Error)me.push("name","message");else if(me.length===0)throw new o("error",$,"may not be an empty object");return M===void 0&&Z(),me.forEach(function(ge){typeof w[ge]=="string"&&A($[ge])&&P($[ge],w[ge])||xe(w,$,ge,X,me,ie)}),!0}return $.prototype!==void 0&&w instanceof $?!0:Error.isPrototypeOf($)?!1:$.call({},w)===!0}function ze(w){if(typeof w!="function")throw new r("fn","Function",w);try{w()}catch($){return $}return N}function Pe(w){return y(w)||w!==null&&s(w)==="object"&&typeof w.then=="function"&&typeof w.catch=="function"}function Y(w){return Promise.resolve().then(function(){var $;if(typeof w=="function"){if($=w(),!Pe($))throw new d("instance of Promise","promiseFn",$)}else if(Pe(w))$=w;else throw new r("promiseFn",["Function","Promise"],w);return Promise.resolve().then(function(){return $}).then(function(){return N}).catch(function(X){return X})})}function b(w,$,X,ie){if(typeof X=="string"){if(arguments.length===4)throw new r("error",["Object","Error","Function","RegExp"],X);if(s($)==="object"&&$!==null){if($.message===X)throw new a("error/message",'The error message "'.concat($.message,'" is identical to the message.'))}else if($===X)throw new a("error/message",'The error "'.concat($,'" is identical to the message.'));ie=X,X=void 0}else if(X!=null&&s(X)!=="object"&&typeof X!="function")throw new r("error",["Object","Error","Function","RegExp"],X);if($===N){var se="";X&&X.name&&(se+=" (".concat(X.name,")")),se+=ie?": ".concat(ie):".";var me=w.name==="rejects"?"rejection":"exception";U({actual:void 0,expected:X,operator:w.name,message:"Missing expected ".concat(me).concat(se),stackStartFn:w})}if(X&&!ve($,X,ie,w))throw $}function S(w,$,X,ie){if($!==N){if(typeof X=="string"&&(ie=X,X=void 0),!X||ve($,X)){var se=ie?": ".concat(ie):".",me=w.name==="doesNotReject"?"rejection":"exception";U({actual:$,expected:X,operator:w.name,message:"Got unwanted ".concat(me).concat(se,`
`)+'Actual message: "'.concat($&&$.message,'"'),stackStartFn:w})}throw $}}W.throws=function w($){for(var X=arguments.length,ie=new Array(X>1?X-1:0),se=1;se<X;se++)ie[se-1]=arguments[se];b.apply(void 0,[w,ze($)].concat(ie))},W.rejects=function w($){for(var X=arguments.length,ie=new Array(X>1?X-1:0),se=1;se<X;se++)ie[se-1]=arguments[se];return Y($).then(function(me){return b.apply(void 0,[w,me].concat(ie))})},W.doesNotThrow=function w($){for(var X=arguments.length,ie=new Array(X>1?X-1:0),se=1;se<X;se++)ie[se-1]=arguments[se];S.apply(void 0,[w,ze($)].concat(ie))},W.doesNotReject=function w($){for(var X=arguments.length,ie=new Array(X>1?X-1:0),se=1;se<X;se++)ie[se-1]=arguments[se];return Y($).then(function(me){return S.apply(void 0,[w,me].concat(ie))})},W.ifError=function w($){if($!=null){var X="ifError got unwanted exception: ";s($)==="object"&&typeof $.message=="string"?$.message.length===0&&$.constructor?X+=$.constructor.name:X+=$.message:X+=p($);var ie=new l({actual:$,expected:null,operator:"ifError",message:X,stackStartFn:w}),se=$.stack;if(typeof se=="string"){var me=se.split(`
`);me.shift();for(var ge=ie.stack.split(`
`),Re=0;Re<me.length;Re++){var Ge=ge.indexOf(me[Re]);if(Ge!==-1){ge=ge.slice(0,Ge);break}}ie.stack="".concat(ge.join(`
`),`
`).concat(me.join(`
`))}throw ie}};function k(w,$,X,ie,se){if(!A($))throw new r("regexp","RegExp",$);var me=se==="match";if(typeof w!="string"||P($,w)!==me){if(X instanceof Error)throw X;var ge=!X;X=X||(typeof w!="string"?'The "string" argument must be of type string. Received type '+"".concat(s(w)," (").concat(p(w),")"):(me?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(p($),`. Input:

`).concat(p(w),`
`));var Re=new l({actual:w,expected:$,message:X,operator:se,stackStartFn:ie});throw Re.generatedMessage=ge,Re}}W.match=function w($,X,ie){k($,X,ie,w,"match")},W.doesNotMatch=function w($,X,ie){k($,X,ie,w,"doesNotMatch")};function R(){for(var w=arguments.length,$=new Array(w),X=0;X<w;X++)$[X]=arguments[X];z.apply(void 0,[R,$.length].concat($))}return W.strict=C(R,W,{equal:W.strictEqual,deepEqual:W.deepStrictEqual,notEqual:W.notStrictEqual,notDeepEqual:W.notDeepStrictEqual}),W.strict.strict=W.strict,ja.exports}var jv=Qo();const er=bl(jv);var wh={exports:{}};(function(s,e){(function(t,i){s.exports=i()})(globalThis,()=>(()=>{var t={1:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.128 0.38h-22.553c-2.336 0-4.229 1.825-4.229 4.076v16.273c0 2.251 1.893 4.076 4.229 4.076h4.229v-2.685h8.403l-8.784 8.072 1.566 1.44 7.429-6.827h9.71c2.335 0 4.229-1.825 4.229-4.076v-16.273c0-2.252-1.894-4.076-4.229-4.076zM28.538 19.403c0 1.5-1.262 2.717-2.819 2.717h-8.36l-0.076-0.070-0.076 0.070h-11.223c-1.557 0-2.819-1.217-2.819-2.717v-13.589c0-1.501 1.262-2.718 2.819-2.718h19.734c1.557 0 2.819-0.141 2.819 1.359v14.947zM9.206 10.557c-1.222 0-2.215 0.911-2.215 2.036s0.992 2.035 2.215 2.035c1.224 0 2.216-0.911 2.216-2.035s-0.992-2.036-2.216-2.036zM22.496 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.224 0 2.215-0.911 2.215-2.035s-0.991-2.036-2.215-2.036zM15.852 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.222 0 2.215-0.911 2.215-2.035s-0.992-2.036-2.215-2.036z"></path></svg>'},28:r=>{r.exports='<svg viewBox="0 0 288 288" xmlns="http://www.w3.org/2000/svg"><path d="M288 90v96c0 20-16 36-36 36h-10c-16 0-16-24 0-24h10c7 0 12-5 12-12V90c0-7-5-12-12-12H36c-7 0-12 5-12 12v96c0 7 5 12 12 12h10c16 0 16 24 0 24H36c-20 0-36-16-36-36V90c0-20 16-36 36-36h216c20 0 36 16 36 36zm-120 62l48 68c14 20 1 38-20 38H92c-21 0-34-18-20-38l48-68c13-18 35-18 48 0z"></path></svg>'},30:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"></path></svg>'},32:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>'},34:r=>{r.exports=function(o){var d=o[1],c=o[3];if(!c)return d;if(typeof btoa=="function"){var l=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),f="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),p="/*# ".concat(f," */");return[d].concat([p]).join(`
`)}return[d].join(`
`)}},56:(r,o,d)=>{r.exports=function(c){var l=d.nc;l&&c.setAttribute("nonce",l)}},72:r=>{var o=[];function d(f){for(var p=-1,g=0;g<o.length;g++)if(o[g].identifier===f){p=g;break}return p}function c(f,p){for(var g={},y=[],A=0;A<f.length;A++){var C=f[A],I=p.base?C[0]+p.base:C[0],P=g[I]||0,M="".concat(I," ").concat(P);g[I]=P+1;var G=d(M),Z={css:C[1],media:C[2],sourceMap:C[3],supports:C[4],layer:C[5]};if(G!==-1)o[G].references++,o[G].updater(Z);else{var le=l(Z,p);p.byIndex=A,o.splice(A,0,{identifier:M,updater:le,references:1})}y.push(M)}return y}function l(f,p){var g=p.domAPI(p);return g.update(f),function(y){if(y){if(y.css===f.css&&y.media===f.media&&y.sourceMap===f.sourceMap&&y.supports===f.supports&&y.layer===f.layer)return;g.update(f=y)}else g.remove()}}r.exports=function(f,p){var g=c(f=f||[],p=p||{});return function(y){y=y||[];for(var A=0;A<g.length;A++){var C=d(g[A]);o[C].references--}for(var I=c(y,p),P=0;P<g.length;P++){var M=d(g[P]);o[M].references===0&&(o[M].updater(),o.splice(M,1))}g=I}}},105:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32" style="transform: scale(-1,1)"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},113:r=>{r.exports=function(o,d){if(d.styleSheet)d.styleSheet.cssText=o;else{for(;d.firstChild;)d.removeChild(d.firstChild);d.appendChild(document.createTextNode(o))}}},122:r=>{r.exports=function(o){var d=[];return d.toString=function(){return this.map(function(c){var l="",f=c[5]!==void 0;return c[4]&&(l+="@supports (".concat(c[4],") {")),c[2]&&(l+="@media ".concat(c[2]," {")),f&&(l+="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {")),l+=o(c),f&&(l+="}"),c[2]&&(l+="}"),c[4]&&(l+="}"),l}).join("")},d.i=function(c,l,f,p,g){typeof c=="string"&&(c=[[null,c,void 0]]);var y={};if(f)for(var A=0;A<this.length;A++){var C=this[A][0];C!=null&&(y[C]=!0)}for(var I=0;I<c.length;I++){var P=[].concat(c[I]);f&&y[P[0]]||(g!==void 0&&(P[5]===void 0||(P[1]="@layer".concat(P[5].length>0?" ".concat(P[5]):""," {").concat(P[1],"}")),P[5]=g),l&&(P[2]&&(P[1]="@media ".concat(P[2]," {").concat(P[1],"}")),P[2]=l),p&&(P[4]?(P[1]="@supports (".concat(P[4],") {").concat(P[1],"}"),P[4]=p):P[4]="".concat(p)),d.push(P))}},d}},137:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M19.357 2.88c1.749 0 3.366 0.316 4.851 0.946 1.485 0.632 2.768 1.474 3.845 2.533s1.922 2.279 2.532 3.661c0.611 1.383 0.915 2.829 0.915 4.334 0 1.425-0.304 2.847-0.915 4.271-0.611 1.425-1.587 2.767-2.928 4.028-0.855 0.813-1.811 1.607-2.869 2.38s-2.136 1.465-3.233 2.075c-1.099 0.61-2.198 1.098-3.296 1.465-1.098 0.366-2.115 0.549-3.051 0.549-1.343 0-2.441-0.438-3.296-1.311-0.854-0.876-1.281-2.41-1.281-4.608 0-0.366 0.020-0.773 0.060-1.221s0.062-0.895 0.062-1.343c0-0.773-0.183-1.353-0.55-1.738-0.366-0.387-0.793-0.58-1.281-0.58-0.652 0-1.21 0.295-1.678 0.886s-0.926 1.23-1.373 1.921c-0.447 0.693-0.905 1.334-1.372 1.923s-1.028 0.886-1.679 0.886c-0.529 0-1.048-0.427-1.556-1.282s-0.763-2.259-0.763-4.212c0-2.197 0.529-4.241 1.587-6.133s2.462-3.529 4.21-4.912c1.75-1.383 3.762-2.471 6.041-3.264 2.277-0.796 4.617-1.212 7.018-1.253zM7.334 15.817c0.569 0 1.047-0.204 1.434-0.611s0.579-0.875 0.579-1.404c0-0.569-0.193-1.047-0.579-1.434s-0.864-0.579-1.434-0.579c-0.529 0-0.987 0.193-1.373 0.579s-0.58 0.864-0.58 1.434c0 0.53 0.194 0.998 0.58 1.404 0.388 0.407 0.845 0.611 1.373 0.611zM12.216 11.79c0.691 0 1.292-0.254 1.8-0.763s0.762-1.107 0.762-1.8c0-0.732-0.255-1.343-0.762-1.831-0.509-0.489-1.109-0.732-1.8-0.732-0.732 0-1.342 0.244-1.831 0.732-0.488 0.488-0.732 1.098-0.732 1.831 0 0.693 0.244 1.292 0.732 1.8s1.099 0.763 1.831 0.763zM16.366 25.947c0.692 0 1.282-0.214 1.77-0.64s0.732-0.987 0.732-1.678-0.244-1.261-0.732-1.709c-0.489-0.448-1.078-0.671-1.77-0.671-0.65 0-1.21 0.223-1.678 0.671s-0.702 1.018-0.702 1.709c0 0.692 0.234 1.25 0.702 1.678s1.027 0.64 1.678 0.64zM19.113 9.592c0.651 0 1.129-0.203 1.433-0.611 0.305-0.406 0.459-0.874 0.459-1.404 0-0.488-0.154-0.947-0.459-1.373-0.304-0.427-0.782-0.641-1.433-0.641-0.529 0-1.008 0.193-1.434 0.58s-0.64 0.865-0.64 1.434c0 0.571 0.213 1.049 0.64 1.434 0.427 0.389 0.905 0.581 1.434 0.581zM24.848 12.826c0.57 0 1.067-0.213 1.495-0.64 0.427-0.427 0.64-0.947 0.64-1.556 0-0.57-0.214-1.068-0.64-1.495-0.428-0.427-0.927-0.64-1.495-0.64-0.611 0-1.129 0.213-1.555 0.64-0.428 0.427-0.642 0.926-0.642 1.495 0 0.611 0.213 1.129 0.642 1.556s0.947 0.64 1.555 0.64z"></path></svg>'},143:(r,o,d)=>{r.exports=d(845)},149:function(r){r.exports=function(){var o={9306:function(E,F,h){var m=h(4901),u=h(6823),_=TypeError;E.exports=function(x){if(m(x))return x;throw new _(u(x)+" is not a function")}},5548:function(E,F,h){var m=h(3517),u=h(6823),_=TypeError;E.exports=function(x){if(m(x))return x;throw new _(u(x)+" is not a constructor")}},3506:function(E,F,h){var m=h(3925),u=String,_=TypeError;E.exports=function(x){if(m(x))return x;throw new _("Can't set "+u(x)+" as a prototype")}},6469:function(E,F,h){var m=h(8227),u=h(2360),_=h(4913).f,x=m("unscopables"),T=Array.prototype;T[x]===void 0&&_(T,x,{configurable:!0,value:u(null)}),E.exports=function(D){T[x][D]=!0}},7829:function(E,F,h){var m=h(8183).charAt;E.exports=function(u,_,x){return _+(x?m(u,_).length:1)}},679:function(E,F,h){var m=h(1625),u=TypeError;E.exports=function(_,x){if(m(x,_))return _;throw new u("Incorrect invocation")}},8551:function(E,F,h){var m=h(34),u=String,_=TypeError;E.exports=function(x){if(m(x))return x;throw new _(u(x)+" is not an object")}},7811:function(E){E.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},5652:function(E,F,h){var m=h(9039);E.exports=m(function(){if(typeof ArrayBuffer=="function"){var u=new ArrayBuffer(8);Object.isExtensible(u)&&Object.defineProperty(u,"a",{value:8})}})},4644:function(E,F,h){var m,u,_,x=h(7811),T=h(3724),D=h(4576),B=h(4901),j=h(34),Q=h(9297),ne=h(6955),te=h(6823),ae=h(6699),re=h(6840),de=h(2106),he=h(1625),pe=h(2787),oe=h(2967),Ie=h(8227),Ee=h(3392),Ne=h(1181),Me=Ne.enforce,De=Ne.get,We=D.Int8Array,Ke=We&&We.prototype,Fe=D.Uint8ClampedArray,ke=Fe&&Fe.prototype,He=We&&pe(We),it=Ke&&pe(Ke),ft=Object.prototype,ct=D.TypeError,tt=Ie("toStringTag"),dt=Ee("TYPED_ARRAY_TAG"),pt="TypedArrayConstructor",ut=x&&!!oe&&ne(D.opera)!=="Opera",Jt=!1,Nt={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Lt={BigInt64Array:8,BigUint64Array:8},Dt=function(gt){var Bt=pe(gt);if(j(Bt)){var Qt=De(Bt);return Qt&&Q(Qt,pt)?Qt[pt]:Dt(Bt)}},jt=function(gt){if(!j(gt))return!1;var Bt=ne(gt);return Q(Nt,Bt)||Q(Lt,Bt)};for(m in Nt)(_=(u=D[m])&&u.prototype)?Me(_)[pt]=u:ut=!1;for(m in Lt)(_=(u=D[m])&&u.prototype)&&(Me(_)[pt]=u);if((!ut||!B(He)||He===Function.prototype)&&(He=function(){throw new ct("Incorrect invocation")},ut))for(m in Nt)D[m]&&oe(D[m],He);if((!ut||!it||it===ft)&&(it=He.prototype,ut))for(m in Nt)D[m]&&oe(D[m].prototype,it);if(ut&&pe(ke)!==it&&oe(ke,it),T&&!Q(it,tt))for(m in Jt=!0,de(it,tt,{configurable:!0,get:function(){return j(this)?this[dt]:void 0}}),Nt)D[m]&&ae(D[m],dt,m);E.exports={NATIVE_ARRAY_BUFFER_VIEWS:ut,TYPED_ARRAY_TAG:Jt&&dt,aTypedArray:function(gt){if(jt(gt))return gt;throw new ct("Target is not a typed array")},aTypedArrayConstructor:function(gt){if(B(gt)&&(!oe||he(He,gt)))return gt;throw new ct(te(gt)+" is not a typed array constructor")},exportTypedArrayMethod:function(gt,Bt,Qt,Et){if(T){if(Qt)for(var ei in Nt){var ii=D[ei];if(ii&&Q(ii.prototype,gt))try{delete ii.prototype[gt]}catch{try{ii.prototype[gt]=Bt}catch{}}}it[gt]&&!Qt||re(it,gt,Qt?Bt:ut&&Ke[gt]||Bt,Et)}},exportTypedArrayStaticMethod:function(gt,Bt,Qt){var Et,ei;if(T){if(oe){if(Qt){for(Et in Nt)if((ei=D[Et])&&Q(ei,gt))try{delete ei[gt]}catch{}}if(He[gt]&&!Qt)return;try{return re(He,gt,Qt?Bt:ut&&He[gt]||Bt)}catch{}}for(Et in Nt)!(ei=D[Et])||ei[gt]&&!Qt||re(ei,gt,Bt)}},getTypedArrayConstructor:Dt,isView:function(gt){if(!j(gt))return!1;var Bt=ne(gt);return Bt==="DataView"||Q(Nt,Bt)||Q(Lt,Bt)},isTypedArray:jt,TypedArray:He,TypedArrayPrototype:it}},6346:function(E,F,h){var m=h(4576),u=h(9504),_=h(3724),x=h(7811),T=h(350),D=h(6699),B=h(2106),j=h(6279),Q=h(9039),ne=h(679),te=h(1291),ae=h(8014),re=h(7696),de=h(5617),he=h(8490),pe=h(2787),oe=h(2967),Ie=h(4373),Ee=h(7680),Ne=h(3167),Me=h(7740),De=h(687),We=h(1181),Ke=T.PROPER,Fe=T.CONFIGURABLE,ke="ArrayBuffer",He="DataView",it="prototype",ft="Wrong index",ct=We.getterFor(ke),tt=We.getterFor(He),dt=We.set,pt=m[ke],ut=pt,Jt=ut&&ut[it],Nt=m[He],Lt=Nt&&Nt[it],Dt=Object.prototype,jt=m.Array,gt=m.RangeError,Bt=u(Ie),Qt=u([].reverse),Et=he.pack,ei=he.unpack,ii=function(mt){return[255&mt]},hi=function(mt){return[255&mt,mt>>8&255]},ci=function(mt){return[255&mt,mt>>8&255,mt>>16&255,mt>>24&255]},wi=function(mt){return mt[3]<<24|mt[2]<<16|mt[1]<<8|mt[0]},pi=function(mt){return Et(de(mt),23,4)},ai=function(mt){return Et(mt,52,8)},en=function(mt,zt,zi){B(mt[it],zt,{configurable:!0,get:function(){return zi(this)[zt]}})},dn=function(mt,zt,zi,_n){var an=tt(mt),Ui=re(zi),Ei=!!_n;if(Ui+zt>an.byteLength)throw new gt(ft);var Qi=an.bytes,Rn=Ui+an.byteOffset,Bn=Ee(Qi,Rn,Rn+zt);return Ei?Bn:Qt(Bn)},tn=function(mt,zt,zi,_n,an,Ui){var Ei=tt(mt),Qi=re(zi),Rn=_n(+an),Bn=!!Ui;if(Qi+zt>Ei.byteLength)throw new gt(ft);for(var si=Ei.bytes,Zt=Qi+Ei.byteOffset,Ut=0;Ut<zt;Ut++)si[Zt+Ut]=Rn[Bn?Ut:zt-Ut-1]};if(x){var nn=Ke&&pt.name!==ke;Q(function(){pt(1)})&&Q(function(){new pt(-1)})&&!Q(function(){return new pt,new pt(1.5),new pt(NaN),pt.length!==1||nn&&!Fe})?nn&&Fe&&D(pt,"name",ke):((ut=function(mt){return ne(this,Jt),Ne(new pt(re(mt)),this,ut)})[it]=Jt,Jt.constructor=ut,Me(ut,pt)),oe&&pe(Lt)!==Dt&&oe(Lt,Dt);var Si=new Nt(new ut(2)),Ti=u(Lt.setInt8);Si.setInt8(0,2147483648),Si.setInt8(1,2147483649),!Si.getInt8(0)&&Si.getInt8(1)||j(Lt,{setInt8:function(mt,zt){Ti(this,mt,zt<<24>>24)},setUint8:function(mt,zt){Ti(this,mt,zt<<24>>24)}},{unsafe:!0})}else Jt=(ut=function(mt){ne(this,Jt);var zt=re(mt);dt(this,{type:ke,bytes:Bt(jt(zt),0),byteLength:zt}),_||(this.byteLength=zt,this.detached=!1)})[it],Lt=(Nt=function(mt,zt,zi){ne(this,Lt),ne(mt,Jt);var _n=ct(mt),an=_n.byteLength,Ui=te(zt);if(Ui<0||Ui>an)throw new gt("Wrong offset");if(Ui+(zi=zi===void 0?an-Ui:ae(zi))>an)throw new gt("Wrong length");dt(this,{type:He,buffer:mt,byteLength:zi,byteOffset:Ui,bytes:_n.bytes}),_||(this.buffer=mt,this.byteLength=zi,this.byteOffset=Ui)})[it],_&&(en(ut,"byteLength",ct),en(Nt,"buffer",tt),en(Nt,"byteLength",tt),en(Nt,"byteOffset",tt)),j(Lt,{getInt8:function(mt){return dn(this,1,mt)[0]<<24>>24},getUint8:function(mt){return dn(this,1,mt)[0]},getInt16:function(mt){var zt=dn(this,2,mt,arguments.length>1&&arguments[1]);return(zt[1]<<8|zt[0])<<16>>16},getUint16:function(mt){var zt=dn(this,2,mt,arguments.length>1&&arguments[1]);return zt[1]<<8|zt[0]},getInt32:function(mt){return wi(dn(this,4,mt,arguments.length>1&&arguments[1]))},getUint32:function(mt){return wi(dn(this,4,mt,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(mt){return ei(dn(this,4,mt,arguments.length>1&&arguments[1]),23)},getFloat64:function(mt){return ei(dn(this,8,mt,arguments.length>1&&arguments[1]),52)},setInt8:function(mt,zt){tn(this,1,mt,ii,zt)},setUint8:function(mt,zt){tn(this,1,mt,ii,zt)},setInt16:function(mt,zt){tn(this,2,mt,hi,zt,arguments.length>2&&arguments[2])},setUint16:function(mt,zt){tn(this,2,mt,hi,zt,arguments.length>2&&arguments[2])},setInt32:function(mt,zt){tn(this,4,mt,ci,zt,arguments.length>2&&arguments[2])},setUint32:function(mt,zt){tn(this,4,mt,ci,zt,arguments.length>2&&arguments[2])},setFloat32:function(mt,zt){tn(this,4,mt,pi,zt,arguments.length>2&&arguments[2])},setFloat64:function(mt,zt){tn(this,8,mt,ai,zt,arguments.length>2&&arguments[2])}});De(ut,ke),De(Nt,He),E.exports={ArrayBuffer:ut,DataView:Nt}},7029:function(E,F,h){var m=h(8981),u=h(5610),_=h(6198),x=h(4606),T=Math.min;E.exports=[].copyWithin||function(D,B){var j=m(this),Q=_(j),ne=u(D,Q),te=u(B,Q),ae=arguments.length>2?arguments[2]:void 0,re=T((ae===void 0?Q:u(ae,Q))-te,Q-ne),de=1;for(te<ne&&ne<te+re&&(de=-1,te+=re-1,ne+=re-1);re-- >0;)te in j?j[ne]=j[te]:x(j,ne),ne+=de,te+=de;return j}},4373:function(E,F,h){var m=h(8981),u=h(5610),_=h(6198);E.exports=function(x){for(var T=m(this),D=_(T),B=arguments.length,j=u(B>1?arguments[1]:void 0,D),Q=B>2?arguments[2]:void 0,ne=Q===void 0?D:u(Q,D);ne>j;)T[j++]=x;return T}},235:function(E,F,h){var m=h(9213).forEach,u=h(4598)("forEach");E.exports=u?[].forEach:function(_){return m(this,_,arguments.length>1?arguments[1]:void 0)}},5370:function(E,F,h){var m=h(6198);E.exports=function(u,_,x){for(var T=0,D=arguments.length>2?x:m(_),B=new u(D);D>T;)B[T]=_[T++];return B}},7916:function(E,F,h){var m=h(6080),u=h(9565),_=h(8981),x=h(6319),T=h(4209),D=h(3517),B=h(6198),j=h(4659),Q=h(81),ne=h(851),te=Array;E.exports=function(ae){var re=_(ae),de=D(this),he=arguments.length,pe=he>1?arguments[1]:void 0,oe=pe!==void 0;oe&&(pe=m(pe,he>2?arguments[2]:void 0));var Ie,Ee,Ne,Me,De,We,Ke=ne(re),Fe=0;if(!Ke||this===te&&T(Ke))for(Ie=B(re),Ee=de?new this(Ie):te(Ie);Ie>Fe;Fe++)We=oe?pe(re[Fe],Fe):re[Fe],j(Ee,Fe,We);else for(Ee=de?new this:[],De=(Me=Q(re,Ke)).next;!(Ne=u(De,Me)).done;Fe++)We=oe?x(Me,pe,[Ne.value,Fe],!0):Ne.value,j(Ee,Fe,We);return Ee.length=Fe,Ee}},9617:function(E,F,h){var m=h(5397),u=h(5610),_=h(6198),x=function(T){return function(D,B,j){var Q=m(D),ne=_(Q);if(ne===0)return!T&&-1;var te,ae=u(j,ne);if(T&&B!=B){for(;ne>ae;)if((te=Q[ae++])!=te)return!0}else for(;ne>ae;ae++)if((T||ae in Q)&&Q[ae]===B)return T||ae||0;return!T&&-1}};E.exports={includes:x(!0),indexOf:x(!1)}},9213:function(E,F,h){var m=h(6080),u=h(9504),_=h(7055),x=h(8981),T=h(6198),D=h(1469),B=u([].push),j=function(Q){var ne=Q===1,te=Q===2,ae=Q===3,re=Q===4,de=Q===6,he=Q===7,pe=Q===5||de;return function(oe,Ie,Ee,Ne){for(var Me,De,We=x(oe),Ke=_(We),Fe=T(Ke),ke=m(Ie,Ee),He=0,it=Ne||D,ft=ne?it(oe,Fe):te||he?it(oe,0):void 0;Fe>He;He++)if((pe||He in Ke)&&(De=ke(Me=Ke[He],He,We),Q))if(ne)ft[He]=De;else if(De)switch(Q){case 3:return!0;case 5:return Me;case 6:return He;case 2:B(ft,Me)}else switch(Q){case 4:return!1;case 7:B(ft,Me)}return de?-1:ae||re?re:ft}};E.exports={forEach:j(0),map:j(1),filter:j(2),some:j(3),every:j(4),find:j(5),findIndex:j(6),filterReject:j(7)}},8379:function(E,F,h){var m=h(8745),u=h(5397),_=h(1291),x=h(6198),T=h(4598),D=Math.min,B=[].lastIndexOf,j=!!B&&1/[1].lastIndexOf(1,-0)<0,Q=T("lastIndexOf"),ne=j||!Q;E.exports=ne?function(te){if(j)return m(B,this,arguments)||0;var ae=u(this),re=x(ae);if(re===0)return-1;var de=re-1;for(arguments.length>1&&(de=D(de,_(arguments[1]))),de<0&&(de=re+de);de>=0;de--)if(de in ae&&ae[de]===te)return de||0;return-1}:B},597:function(E,F,h){var m=h(9039),u=h(8227),_=h(9519),x=u("species");E.exports=function(T){return _>=51||!m(function(){var D=[];return(D.constructor={})[x]=function(){return{foo:1}},D[T](Boolean).foo!==1})}},4598:function(E,F,h){var m=h(9039);E.exports=function(u,_){var x=[][u];return!!x&&m(function(){x.call(null,_||function(){return 1},1)})}},926:function(E,F,h){var m=h(9306),u=h(8981),_=h(7055),x=h(6198),T=TypeError,D="Reduce of empty array with no initial value",B=function(j){return function(Q,ne,te,ae){var re=u(Q),de=_(re),he=x(re);if(m(ne),he===0&&te<2)throw new T(D);var pe=j?he-1:0,oe=j?-1:1;if(te<2)for(;;){if(pe in de){ae=de[pe],pe+=oe;break}if(pe+=oe,j?pe<0:he<=pe)throw new T(D)}for(;j?pe>=0:he>pe;pe+=oe)pe in de&&(ae=ne(ae,de[pe],pe,re));return ae}};E.exports={left:B(!1),right:B(!0)}},4527:function(E,F,h){var m=h(3724),u=h(4376),_=TypeError,x=Object.getOwnPropertyDescriptor,T=m&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(D){return D instanceof TypeError}}();E.exports=T?function(D,B){if(u(D)&&!x(D,"length").writable)throw new _("Cannot set read only .length");return D.length=B}:function(D,B){return D.length=B}},7680:function(E,F,h){var m=h(9504);E.exports=m([].slice)},4488:function(E,F,h){var m=h(7680),u=Math.floor,_=function(x,T){var D=x.length;if(D<8)for(var B,j,Q=1;Q<D;){for(j=Q,B=x[Q];j&&T(x[j-1],B)>0;)x[j]=x[--j];j!==Q++&&(x[j]=B)}else for(var ne=u(D/2),te=_(m(x,0,ne),T),ae=_(m(x,ne),T),re=te.length,de=ae.length,he=0,pe=0;he<re||pe<de;)x[he+pe]=he<re&&pe<de?T(te[he],ae[pe])<=0?te[he++]:ae[pe++]:he<re?te[he++]:ae[pe++];return x};E.exports=_},7433:function(E,F,h){var m=h(4376),u=h(3517),_=h(34),x=h(8227)("species"),T=Array;E.exports=function(D){var B;return m(D)&&(B=D.constructor,(u(B)&&(B===T||m(B.prototype))||_(B)&&(B=B[x])===null)&&(B=void 0)),B===void 0?T:B}},1469:function(E,F,h){var m=h(7433);E.exports=function(u,_){return new(m(u))(_===0?0:_)}},6319:function(E,F,h){var m=h(8551),u=h(1920);E.exports=function(_,x,T,D){try{return D?x(m(T)[0],T[1]):x(T)}catch(B){u(_,"throw",B)}}},4428:function(E,F,h){var m=h(8227)("iterator"),u=!1;try{var _=0,x={next:function(){return{done:!!_++}},return:function(){u=!0}};x[m]=function(){return this},Array.from(x,function(){throw 2})}catch{}E.exports=function(T,D){try{if(!D&&!u)return!1}catch{return!1}var B=!1;try{var j={};j[m]=function(){return{next:function(){return{done:B=!0}}}},T(j)}catch{}return B}},2195:function(E,F,h){var m=h(9504),u=m({}.toString),_=m("".slice);E.exports=function(x){return _(u(x),8,-1)}},6955:function(E,F,h){var m=h(2140),u=h(4901),_=h(2195),x=h(8227)("toStringTag"),T=Object,D=_(function(){return arguments}())==="Arguments";E.exports=m?_:function(B){var j,Q,ne;return B===void 0?"Undefined":B===null?"Null":typeof(Q=function(te,ae){try{return te[ae]}catch{}}(j=T(B),x))=="string"?Q:D?_(j):(ne=_(j))==="Object"&&u(j.callee)?"Arguments":ne}},6938:function(E,F,h){var m=h(2360),u=h(2106),_=h(6279),x=h(6080),T=h(679),D=h(4117),B=h(2652),j=h(1088),Q=h(2529),ne=h(7633),te=h(3724),ae=h(3451).fastKey,re=h(1181),de=re.set,he=re.getterFor;E.exports={getConstructor:function(pe,oe,Ie,Ee){var Ne=pe(function(Fe,ke){T(Fe,Me),de(Fe,{type:oe,index:m(null),first:null,last:null,size:0}),te||(Fe.size=0),D(ke)||B(ke,Fe[Ee],{that:Fe,AS_ENTRIES:Ie})}),Me=Ne.prototype,De=he(oe),We=function(Fe,ke,He){var it,ft,ct=De(Fe),tt=Ke(Fe,ke);return tt?tt.value=He:(ct.last=tt={index:ft=ae(ke,!0),key:ke,value:He,previous:it=ct.last,next:null,removed:!1},ct.first||(ct.first=tt),it&&(it.next=tt),te?ct.size++:Fe.size++,ft!=="F"&&(ct.index[ft]=tt)),Fe},Ke=function(Fe,ke){var He,it=De(Fe),ft=ae(ke);if(ft!=="F")return it.index[ft];for(He=it.first;He;He=He.next)if(He.key===ke)return He};return _(Me,{clear:function(){for(var Fe=De(this),ke=Fe.first;ke;)ke.removed=!0,ke.previous&&(ke.previous=ke.previous.next=null),ke=ke.next;Fe.first=Fe.last=null,Fe.index=m(null),te?Fe.size=0:this.size=0},delete:function(Fe){var ke=this,He=De(ke),it=Ke(ke,Fe);if(it){var ft=it.next,ct=it.previous;delete He.index[it.index],it.removed=!0,ct&&(ct.next=ft),ft&&(ft.previous=ct),He.first===it&&(He.first=ft),He.last===it&&(He.last=ct),te?He.size--:ke.size--}return!!it},forEach:function(Fe){for(var ke,He=De(this),it=x(Fe,arguments.length>1?arguments[1]:void 0);ke=ke?ke.next:He.first;)for(it(ke.value,ke.key,this);ke&&ke.removed;)ke=ke.previous},has:function(Fe){return!!Ke(this,Fe)}}),_(Me,Ie?{get:function(Fe){var ke=Ke(this,Fe);return ke&&ke.value},set:function(Fe,ke){return We(this,Fe===0?0:Fe,ke)}}:{add:function(Fe){return We(this,Fe=Fe===0?0:Fe,Fe)}}),te&&u(Me,"size",{configurable:!0,get:function(){return De(this).size}}),Ne},setStrong:function(pe,oe,Ie){var Ee=oe+" Iterator",Ne=he(oe),Me=he(Ee);j(pe,oe,function(De,We){de(this,{type:Ee,target:De,state:Ne(De),kind:We,last:null})},function(){for(var De=Me(this),We=De.kind,Ke=De.last;Ke&&Ke.removed;)Ke=Ke.previous;return De.target&&(De.last=Ke=Ke?Ke.next:De.state.first)?Q(We==="keys"?Ke.key:We==="values"?Ke.value:[Ke.key,Ke.value],!1):(De.target=null,Q(void 0,!0))},Ie?"entries":"values",!Ie,!0),ne(oe)}}},6468:function(E,F,h){var m=h(6518),u=h(4576),_=h(9504),x=h(2796),T=h(6840),D=h(3451),B=h(2652),j=h(679),Q=h(4901),ne=h(4117),te=h(34),ae=h(9039),re=h(4428),de=h(687),he=h(3167);E.exports=function(pe,oe,Ie){var Ee=pe.indexOf("Map")!==-1,Ne=pe.indexOf("Weak")!==-1,Me=Ee?"set":"add",De=u[pe],We=De&&De.prototype,Ke=De,Fe={},ke=function(dt){var pt=_(We[dt]);T(We,dt,dt==="add"?function(ut){return pt(this,ut===0?0:ut),this}:dt==="delete"?function(ut){return!(Ne&&!te(ut))&&pt(this,ut===0?0:ut)}:dt==="get"?function(ut){return Ne&&!te(ut)?void 0:pt(this,ut===0?0:ut)}:dt==="has"?function(ut){return!(Ne&&!te(ut))&&pt(this,ut===0?0:ut)}:function(ut,Jt){return pt(this,ut===0?0:ut,Jt),this})};if(x(pe,!Q(De)||!(Ne||We.forEach&&!ae(function(){new De().entries().next()}))))Ke=Ie.getConstructor(oe,pe,Ee,Me),D.enable();else if(x(pe,!0)){var He=new Ke,it=He[Me](Ne?{}:-0,1)!==He,ft=ae(function(){He.has(1)}),ct=re(function(dt){new De(dt)}),tt=!Ne&&ae(function(){for(var dt=new De,pt=5;pt--;)dt[Me](pt,pt);return!dt.has(-0)});ct||((Ke=oe(function(dt,pt){j(dt,We);var ut=he(new De,dt,Ke);return ne(pt)||B(pt,ut[Me],{that:ut,AS_ENTRIES:Ee}),ut})).prototype=We,We.constructor=Ke),(ft||tt)&&(ke("delete"),ke("has"),Ee&&ke("get")),(tt||it)&&ke(Me),Ne&&We.clear&&delete We.clear}return Fe[pe]=Ke,m({global:!0,constructor:!0,forced:Ke!==De},Fe),de(Ke,pe),Ne||Ie.setStrong(Ke,pe,Ee),Ke}},7740:function(E,F,h){var m=h(9297),u=h(5031),_=h(7347),x=h(4913);E.exports=function(T,D,B){for(var j=u(D),Q=x.f,ne=_.f,te=0;te<j.length;te++){var ae=j[te];m(T,ae)||B&&m(B,ae)||Q(T,ae,ne(D,ae))}}},1436:function(E,F,h){var m=h(8227)("match");E.exports=function(u){var _=/./;try{"/./"[u](_)}catch{try{return _[m]=!1,"/./"[u](_)}catch{}}return!1}},2211:function(E,F,h){var m=h(9039);E.exports=!m(function(){function u(){}return u.prototype.constructor=null,Object.getPrototypeOf(new u)!==u.prototype})},2529:function(E){E.exports=function(F,h){return{value:F,done:h}}},6699:function(E,F,h){var m=h(3724),u=h(4913),_=h(6980);E.exports=m?function(x,T,D){return u.f(x,T,_(1,D))}:function(x,T,D){return x[T]=D,x}},6980:function(E){E.exports=function(F,h){return{enumerable:!(1&F),configurable:!(2&F),writable:!(4&F),value:h}}},4659:function(E,F,h){var m=h(3724),u=h(4913),_=h(6980);E.exports=function(x,T,D){m?u.f(x,T,_(0,D)):x[T]=D}},3640:function(E,F,h){var m=h(8551),u=h(4270),_=TypeError;E.exports=function(x){if(m(this),x==="string"||x==="default")x="string";else if(x!=="number")throw new _("Incorrect hint");return u(this,x)}},2106:function(E,F,h){var m=h(283),u=h(4913);E.exports=function(_,x,T){return T.get&&m(T.get,x,{getter:!0}),T.set&&m(T.set,x,{setter:!0}),u.f(_,x,T)}},6840:function(E,F,h){var m=h(4901),u=h(4913),_=h(283),x=h(9433);E.exports=function(T,D,B,j){j||(j={});var Q=j.enumerable,ne=j.name!==void 0?j.name:D;if(m(B)&&_(B,ne,j),j.global)Q?T[D]=B:x(D,B);else{try{j.unsafe?T[D]&&(Q=!0):delete T[D]}catch{}Q?T[D]=B:u.f(T,D,{value:B,enumerable:!1,configurable:!j.nonConfigurable,writable:!j.nonWritable})}return T}},6279:function(E,F,h){var m=h(6840);E.exports=function(u,_,x){for(var T in _)m(u,T,_[T],x);return u}},9433:function(E,F,h){var m=h(4576),u=Object.defineProperty;E.exports=function(_,x){try{u(m,_,{value:x,configurable:!0,writable:!0})}catch{m[_]=x}return x}},4606:function(E,F,h){var m=h(6823),u=TypeError;E.exports=function(_,x){if(!delete _[x])throw new u("Cannot delete property "+m(x)+" of "+m(_))}},3724:function(E,F,h){var m=h(9039);E.exports=!m(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},4055:function(E,F,h){var m=h(4576),u=h(34),_=m.document,x=u(_)&&u(_.createElement);E.exports=function(T){return x?_.createElement(T):{}}},6837:function(E){var F=TypeError;E.exports=function(h){if(h>9007199254740991)throw F("Maximum allowed index exceeded");return h}},7400:function(E){E.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9296:function(E,F,h){var m=h(4055)("span").classList,u=m&&m.constructor&&m.constructor.prototype;E.exports=u===Object.prototype?void 0:u},8727:function(E){E.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3709:function(E,F,h){var m=h(2839).match(/firefox\/(\d+)/i);E.exports=!!m&&+m[1]},3763:function(E,F,h){var m=h(2839);E.exports=/MSIE|Trident/.test(m)},2839:function(E,F,h){var m=h(4576).navigator,u=m&&m.userAgent;E.exports=u?String(u):""},9519:function(E,F,h){var m,u,_=h(4576),x=h(2839),T=_.process,D=_.Deno,B=T&&T.versions||D&&D.version,j=B&&B.v8;j&&(u=(m=j.split("."))[0]>0&&m[0]<4?1:+(m[0]+m[1])),!u&&x&&(!(m=x.match(/Edge\/(\d+)/))||m[1]>=74)&&(m=x.match(/Chrome\/(\d+)/))&&(u=+m[1]),E.exports=u},3607:function(E,F,h){var m=h(2839).match(/AppleWebKit\/(\d+)\./);E.exports=!!m&&+m[1]},6518:function(E,F,h){var m=h(4576),u=h(7347).f,_=h(6699),x=h(6840),T=h(9433),D=h(7740),B=h(2796);E.exports=function(j,Q){var ne,te,ae,re,de,he=j.target,pe=j.global,oe=j.stat;if(ne=pe?m:oe?m[he]||T(he,{}):m[he]&&m[he].prototype)for(te in Q){if(re=Q[te],ae=j.dontCallGetSet?(de=u(ne,te))&&de.value:ne[te],!B(pe?te:he+(oe?".":"#")+te,j.forced)&&ae!==void 0){if(typeof re==typeof ae)continue;D(re,ae)}(j.sham||ae&&ae.sham)&&_(re,"sham",!0),x(ne,te,re,j)}}},9039:function(E){E.exports=function(F){try{return!!F()}catch{return!0}}},9228:function(E,F,h){h(7495);var m=h(9565),u=h(6840),_=h(7323),x=h(9039),T=h(8227),D=h(6699),B=T("species"),j=RegExp.prototype;E.exports=function(Q,ne,te,ae){var re=T(Q),de=!x(function(){var Ie={};return Ie[re]=function(){return 7},""[Q](Ie)!==7}),he=de&&!x(function(){var Ie=!1,Ee=/a/;return Q==="split"&&((Ee={}).constructor={},Ee.constructor[B]=function(){return Ee},Ee.flags="",Ee[re]=/./[re]),Ee.exec=function(){return Ie=!0,null},Ee[re](""),!Ie});if(!de||!he||te){var pe=/./[re],oe=ne(re,""[Q],function(Ie,Ee,Ne,Me,De){var We=Ee.exec;return We===_||We===j.exec?de&&!De?{done:!0,value:m(pe,Ee,Ne,Me)}:{done:!0,value:m(Ie,Ne,Ee,Me)}:{done:!1}});u(String.prototype,Q,oe[0]),u(j,re,oe[1])}ae&&D(j[re],"sham",!0)}},2744:function(E,F,h){var m=h(9039);E.exports=!m(function(){return Object.isExtensible(Object.preventExtensions({}))})},8745:function(E,F,h){var m=h(616),u=Function.prototype,_=u.apply,x=u.call;E.exports=typeof Reflect=="object"&&Reflect.apply||(m?x.bind(_):function(){return x.apply(_,arguments)})},6080:function(E,F,h){var m=h(7476),u=h(9306),_=h(616),x=m(m.bind);E.exports=function(T,D){return u(T),D===void 0?T:_?x(T,D):function(){return T.apply(D,arguments)}}},616:function(E,F,h){var m=h(9039);E.exports=!m(function(){var u=(function(){}).bind();return typeof u!="function"||u.hasOwnProperty("prototype")})},566:function(E,F,h){var m=h(9504),u=h(9306),_=h(34),x=h(9297),T=h(7680),D=h(616),B=Function,j=m([].concat),Q=m([].join),ne={};E.exports=D?B.bind:function(te){var ae=u(this),re=ae.prototype,de=T(arguments,1),he=function(){var pe=j(de,T(arguments));return this instanceof he?function(oe,Ie,Ee){if(!x(ne,Ie)){for(var Ne=[],Me=0;Me<Ie;Me++)Ne[Me]="a["+Me+"]";ne[Ie]=B("C,a","return new C("+Q(Ne,",")+")")}return ne[Ie](oe,Ee)}(ae,pe.length,pe):ae.apply(te,pe)};return _(re)&&(he.prototype=re),he}},9565:function(E,F,h){var m=h(616),u=Function.prototype.call;E.exports=m?u.bind(u):function(){return u.apply(u,arguments)}},350:function(E,F,h){var m=h(3724),u=h(9297),_=Function.prototype,x=m&&Object.getOwnPropertyDescriptor,T=u(_,"name"),D=T&&(function(){}).name==="something",B=T&&(!m||m&&x(_,"name").configurable);E.exports={EXISTS:T,PROPER:D,CONFIGURABLE:B}},6706:function(E,F,h){var m=h(9504),u=h(9306);E.exports=function(_,x,T){try{return m(u(Object.getOwnPropertyDescriptor(_,x)[T]))}catch{}}},7476:function(E,F,h){var m=h(2195),u=h(9504);E.exports=function(_){if(m(_)==="Function")return u(_)}},9504:function(E,F,h){var m=h(616),u=Function.prototype,_=u.call,x=m&&u.bind.bind(_,_);E.exports=m?x:function(T){return function(){return _.apply(T,arguments)}}},7751:function(E,F,h){var m=h(4576),u=h(4901);E.exports=function(_,x){return arguments.length<2?(T=m[_],u(T)?T:void 0):m[_]&&m[_][x];var T}},851:function(E,F,h){var m=h(6955),u=h(5966),_=h(4117),x=h(6269),T=h(8227)("iterator");E.exports=function(D){if(!_(D))return u(D,T)||u(D,"@@iterator")||x[m(D)]}},81:function(E,F,h){var m=h(9565),u=h(9306),_=h(8551),x=h(6823),T=h(851),D=TypeError;E.exports=function(B,j){var Q=arguments.length<2?T(B):j;if(u(Q))return _(m(Q,B));throw new D(x(B)+" is not iterable")}},6933:function(E,F,h){var m=h(9504),u=h(4376),_=h(4901),x=h(2195),T=h(655),D=m([].push);E.exports=function(B){if(_(B))return B;if(u(B)){for(var j=B.length,Q=[],ne=0;ne<j;ne++){var te=B[ne];typeof te=="string"?D(Q,te):typeof te!="number"&&x(te)!=="Number"&&x(te)!=="String"||D(Q,T(te))}var ae=Q.length,re=!0;return function(de,he){if(re)return re=!1,he;if(u(this))return he;for(var pe=0;pe<ae;pe++)if(Q[pe]===de)return he}}}},5966:function(E,F,h){var m=h(9306),u=h(4117);E.exports=function(_,x){var T=_[x];return u(T)?void 0:m(T)}},2478:function(E,F,h){var m=h(9504),u=h(8981),_=Math.floor,x=m("".charAt),T=m("".replace),D=m("".slice),B=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,j=/\$([$&'`]|\d{1,2})/g;E.exports=function(Q,ne,te,ae,re,de){var he=te+Q.length,pe=ae.length,oe=j;return re!==void 0&&(re=u(re),oe=B),T(de,oe,function(Ie,Ee){var Ne;switch(x(Ee,0)){case"$":return"$";case"&":return Q;case"`":return D(ne,0,te);case"'":return D(ne,he);case"<":Ne=re[D(Ee,1,-1)];break;default:var Me=+Ee;if(Me===0)return Ie;if(Me>pe){var De=_(Me/10);return De===0?Ie:De<=pe?ae[De-1]===void 0?x(Ee,1):ae[De-1]+x(Ee,1):Ie}Ne=ae[Me-1]}return Ne===void 0?"":Ne})}},4576:function(E,F,h){var m=function(u){return u&&u.Math===Math&&u};E.exports=m(typeof globalThis=="object"&&globalThis)||m(typeof window=="object"&&window)||m(typeof self=="object"&&self)||m(typeof h.g=="object"&&h.g)||m(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},9297:function(E,F,h){var m=h(9504),u=h(8981),_=m({}.hasOwnProperty);E.exports=Object.hasOwn||function(x,T){return _(u(x),T)}},421:function(E){E.exports={}},397:function(E,F,h){var m=h(7751);E.exports=m("document","documentElement")},5917:function(E,F,h){var m=h(3724),u=h(9039),_=h(4055);E.exports=!m&&!u(function(){return Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a!==7})},8490:function(E){var F=Array,h=Math.abs,m=Math.pow,u=Math.floor,_=Math.log,x=Math.LN2;E.exports={pack:function(T,D,B){var j,Q,ne,te=F(B),ae=8*B-D-1,re=(1<<ae)-1,de=re>>1,he=D===23?m(2,-24)-m(2,-77):0,pe=T<0||T===0&&1/T<0?1:0,oe=0;for((T=h(T))!=T||T===1/0?(Q=T!=T?1:0,j=re):(j=u(_(T)/x),T*(ne=m(2,-j))<1&&(j--,ne*=2),(T+=j+de>=1?he/ne:he*m(2,1-de))*ne>=2&&(j++,ne/=2),j+de>=re?(Q=0,j=re):j+de>=1?(Q=(T*ne-1)*m(2,D),j+=de):(Q=T*m(2,de-1)*m(2,D),j=0));D>=8;)te[oe++]=255&Q,Q/=256,D-=8;for(j=j<<D|Q,ae+=D;ae>0;)te[oe++]=255&j,j/=256,ae-=8;return te[oe-1]|=128*pe,te},unpack:function(T,D){var B,j=T.length,Q=8*j-D-1,ne=(1<<Q)-1,te=ne>>1,ae=Q-7,re=j-1,de=T[re--],he=127&de;for(de>>=7;ae>0;)he=256*he+T[re--],ae-=8;for(B=he&(1<<-ae)-1,he>>=-ae,ae+=D;ae>0;)B=256*B+T[re--],ae-=8;if(he===0)he=1-te;else{if(he===ne)return B?NaN:de?-1/0:1/0;B+=m(2,D),he-=te}return(de?-1:1)*B*m(2,he-D)}}},7055:function(E,F,h){var m=h(9504),u=h(9039),_=h(2195),x=Object,T=m("".split);E.exports=u(function(){return!x("z").propertyIsEnumerable(0)})?function(D){return _(D)==="String"?T(D,""):x(D)}:x},3167:function(E,F,h){var m=h(4901),u=h(34),_=h(2967);E.exports=function(x,T,D){var B,j;return _&&m(B=T.constructor)&&B!==D&&u(j=B.prototype)&&j!==D.prototype&&_(x,j),x}},3706:function(E,F,h){var m=h(9504),u=h(4901),_=h(7629),x=m(Function.toString);u(_.inspectSource)||(_.inspectSource=function(T){return x(T)}),E.exports=_.inspectSource},3451:function(E,F,h){var m=h(6518),u=h(9504),_=h(421),x=h(34),T=h(9297),D=h(4913).f,B=h(8480),j=h(298),Q=h(4124),ne=h(3392),te=h(2744),ae=!1,re=ne("meta"),de=0,he=function(oe){D(oe,re,{value:{objectID:"O"+de++,weakData:{}}})},pe=E.exports={enable:function(){pe.enable=function(){},ae=!0;var oe=B.f,Ie=u([].splice),Ee={};Ee[re]=1,oe(Ee).length&&(B.f=function(Ne){for(var Me=oe(Ne),De=0,We=Me.length;De<We;De++)if(Me[De]===re){Ie(Me,De,1);break}return Me},m({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:j.f}))},fastKey:function(oe,Ie){if(!x(oe))return typeof oe=="symbol"?oe:(typeof oe=="string"?"S":"P")+oe;if(!T(oe,re)){if(!Q(oe))return"F";if(!Ie)return"E";he(oe)}return oe[re].objectID},getWeakData:function(oe,Ie){if(!T(oe,re)){if(!Q(oe))return!0;if(!Ie)return!1;he(oe)}return oe[re].weakData},onFreeze:function(oe){return te&&ae&&Q(oe)&&!T(oe,re)&&he(oe),oe}};_[re]=!0},1181:function(E,F,h){var m,u,_,x=h(8622),T=h(4576),D=h(34),B=h(6699),j=h(9297),Q=h(7629),ne=h(6119),te=h(421),ae="Object already initialized",re=T.TypeError,de=T.WeakMap;if(x||Q.state){var he=Q.state||(Q.state=new de);he.get=he.get,he.has=he.has,he.set=he.set,m=function(oe,Ie){if(he.has(oe))throw new re(ae);return Ie.facade=oe,he.set(oe,Ie),Ie},u=function(oe){return he.get(oe)||{}},_=function(oe){return he.has(oe)}}else{var pe=ne("state");te[pe]=!0,m=function(oe,Ie){if(j(oe,pe))throw new re(ae);return Ie.facade=oe,B(oe,pe,Ie),Ie},u=function(oe){return j(oe,pe)?oe[pe]:{}},_=function(oe){return j(oe,pe)}}E.exports={set:m,get:u,has:_,enforce:function(oe){return _(oe)?u(oe):m(oe,{})},getterFor:function(oe){return function(Ie){var Ee;if(!D(Ie)||(Ee=u(Ie)).type!==oe)throw new re("Incompatible receiver, "+oe+" required");return Ee}}}},4209:function(E,F,h){var m=h(8227),u=h(6269),_=m("iterator"),x=Array.prototype;E.exports=function(T){return T!==void 0&&(u.Array===T||x[_]===T)}},4376:function(E,F,h){var m=h(2195);E.exports=Array.isArray||function(u){return m(u)==="Array"}},1108:function(E,F,h){var m=h(6955);E.exports=function(u){var _=m(u);return _==="BigInt64Array"||_==="BigUint64Array"}},4901:function(E){var F=typeof document=="object"&&document.all;E.exports=F===void 0&&F!==void 0?function(h){return typeof h=="function"||h===F}:function(h){return typeof h=="function"}},3517:function(E,F,h){var m=h(9504),u=h(9039),_=h(4901),x=h(6955),T=h(7751),D=h(3706),B=function(){},j=T("Reflect","construct"),Q=/^\s*(?:class|function)\b/,ne=m(Q.exec),te=!Q.test(B),ae=function(de){if(!_(de))return!1;try{return j(B,[],de),!0}catch{return!1}},re=function(de){if(!_(de))return!1;switch(x(de)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return te||!!ne(Q,D(de))}catch{return!0}};re.sham=!0,E.exports=!j||u(function(){var de;return ae(ae.call)||!ae(Object)||!ae(function(){de=!0})||de})?re:ae},2796:function(E,F,h){var m=h(9039),u=h(4901),_=/#|\.prototype\./,x=function(Q,ne){var te=D[T(Q)];return te===j||te!==B&&(u(ne)?m(ne):!!ne)},T=x.normalize=function(Q){return String(Q).replace(_,".").toLowerCase()},D=x.data={},B=x.NATIVE="N",j=x.POLYFILL="P";E.exports=x},2087:function(E,F,h){var m=h(34),u=Math.floor;E.exports=Number.isInteger||function(_){return!m(_)&&isFinite(_)&&u(_)===_}},4117:function(E){E.exports=function(F){return F==null}},34:function(E,F,h){var m=h(4901);E.exports=function(u){return typeof u=="object"?u!==null:m(u)}},3925:function(E,F,h){var m=h(34);E.exports=function(u){return m(u)||u===null}},6395:function(E){E.exports=!1},788:function(E,F,h){var m=h(34),u=h(2195),_=h(8227)("match");E.exports=function(x){var T;return m(x)&&((T=x[_])!==void 0?!!T:u(x)==="RegExp")}},757:function(E,F,h){var m=h(7751),u=h(4901),_=h(1625),x=h(7040),T=Object;E.exports=x?function(D){return typeof D=="symbol"}:function(D){var B=m("Symbol");return u(B)&&_(B.prototype,T(D))}},2652:function(E,F,h){var m=h(6080),u=h(9565),_=h(8551),x=h(6823),T=h(4209),D=h(6198),B=h(1625),j=h(81),Q=h(851),ne=h(1920),te=TypeError,ae=function(de,he){this.stopped=de,this.result=he},re=ae.prototype;E.exports=function(de,he,pe){var oe,Ie,Ee,Ne,Me,De,We,Ke=pe&&pe.that,Fe=!(!pe||!pe.AS_ENTRIES),ke=!(!pe||!pe.IS_RECORD),He=!(!pe||!pe.IS_ITERATOR),it=!(!pe||!pe.INTERRUPTED),ft=m(he,Ke),ct=function(dt){return oe&&ne(oe,"normal",dt),new ae(!0,dt)},tt=function(dt){return Fe?(_(dt),it?ft(dt[0],dt[1],ct):ft(dt[0],dt[1])):it?ft(dt,ct):ft(dt)};if(ke)oe=de.iterator;else if(He)oe=de;else{if(!(Ie=Q(de)))throw new te(x(de)+" is not iterable");if(T(Ie)){for(Ee=0,Ne=D(de);Ne>Ee;Ee++)if((Me=tt(de[Ee]))&&B(re,Me))return Me;return new ae(!1)}oe=j(de,Ie)}for(De=ke?de.next:oe.next;!(We=u(De,oe)).done;){try{Me=tt(We.value)}catch(dt){ne(oe,"throw",dt)}if(typeof Me=="object"&&Me&&B(re,Me))return Me}return new ae(!1)}},1920:function(E,F,h){var m=h(9565),u=h(8551),_=h(5966);E.exports=function(x,T,D){var B,j;u(x);try{if(!(B=_(x,"return"))){if(T==="throw")throw D;return D}B=m(B,x)}catch(Q){j=!0,B=Q}if(T==="throw")throw D;if(j)throw B;return u(B),D}},3994:function(E,F,h){var m=h(7657).IteratorPrototype,u=h(2360),_=h(6980),x=h(687),T=h(6269),D=function(){return this};E.exports=function(B,j,Q,ne){var te=j+" Iterator";return B.prototype=u(m,{next:_(+!ne,Q)}),x(B,te,!1,!0),T[te]=D,B}},1088:function(E,F,h){var m=h(6518),u=h(9565),_=h(6395),x=h(350),T=h(4901),D=h(3994),B=h(2787),j=h(2967),Q=h(687),ne=h(6699),te=h(6840),ae=h(8227),re=h(6269),de=h(7657),he=x.PROPER,pe=x.CONFIGURABLE,oe=de.IteratorPrototype,Ie=de.BUGGY_SAFARI_ITERATORS,Ee=ae("iterator"),Ne="keys",Me="values",De="entries",We=function(){return this};E.exports=function(Ke,Fe,ke,He,it,ft,ct){D(ke,Fe,He);var tt,dt,pt,ut=function(Bt){if(Bt===it&&jt)return jt;if(!Ie&&Bt&&Bt in Lt)return Lt[Bt];switch(Bt){case Ne:case Me:case De:return function(){return new ke(this,Bt)}}return function(){return new ke(this)}},Jt=Fe+" Iterator",Nt=!1,Lt=Ke.prototype,Dt=Lt[Ee]||Lt["@@iterator"]||it&&Lt[it],jt=!Ie&&Dt||ut(it),gt=Fe==="Array"&&Lt.entries||Dt;if(gt&&(tt=B(gt.call(new Ke)))!==Object.prototype&&tt.next&&(_||B(tt)===oe||(j?j(tt,oe):T(tt[Ee])||te(tt,Ee,We)),Q(tt,Jt,!0,!0),_&&(re[Jt]=We)),he&&it===Me&&Dt&&Dt.name!==Me&&(!_&&pe?ne(Lt,"name",Me):(Nt=!0,jt=function(){return u(Dt,this)})),it)if(dt={values:ut(Me),keys:ft?jt:ut(Ne),entries:ut(De)},ct)for(pt in dt)(Ie||Nt||!(pt in Lt))&&te(Lt,pt,dt[pt]);else m({target:Fe,proto:!0,forced:Ie||Nt},dt);return _&&!ct||Lt[Ee]===jt||te(Lt,Ee,jt,{name:it}),re[Fe]=jt,dt}},7657:function(E,F,h){var m,u,_,x=h(9039),T=h(4901),D=h(34),B=h(2360),j=h(2787),Q=h(6840),ne=h(8227),te=h(6395),ae=ne("iterator"),re=!1;[].keys&&("next"in(_=[].keys())?(u=j(j(_)))!==Object.prototype&&(m=u):re=!0),!D(m)||x(function(){var de={};return m[ae].call(de)!==de})?m={}:te&&(m=B(m)),T(m[ae])||Q(m,ae,function(){return this}),E.exports={IteratorPrototype:m,BUGGY_SAFARI_ITERATORS:re}},6269:function(E){E.exports={}},6198:function(E,F,h){var m=h(8014);E.exports=function(u){return m(u.length)}},283:function(E,F,h){var m=h(9504),u=h(9039),_=h(4901),x=h(9297),T=h(3724),D=h(350).CONFIGURABLE,B=h(3706),j=h(1181),Q=j.enforce,ne=j.get,te=String,ae=Object.defineProperty,re=m("".slice),de=m("".replace),he=m([].join),pe=T&&!u(function(){return ae(function(){},"length",{value:8}).length!==8}),oe=String(String).split("String"),Ie=E.exports=function(Ee,Ne,Me){re(te(Ne),0,7)==="Symbol("&&(Ne="["+de(te(Ne),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),Me&&Me.getter&&(Ne="get "+Ne),Me&&Me.setter&&(Ne="set "+Ne),(!x(Ee,"name")||D&&Ee.name!==Ne)&&(T?ae(Ee,"name",{value:Ne,configurable:!0}):Ee.name=Ne),pe&&Me&&x(Me,"arity")&&Ee.length!==Me.arity&&ae(Ee,"length",{value:Me.arity});try{Me&&x(Me,"constructor")&&Me.constructor?T&&ae(Ee,"prototype",{writable:!1}):Ee.prototype&&(Ee.prototype=void 0)}catch{}var De=Q(Ee);return x(De,"source")||(De.source=he(oe,typeof Ne=="string"?Ne:"")),Ee};Function.prototype.toString=Ie(function(){return _(this)&&ne(this).source||B(this)},"toString")},3164:function(E,F,h){var m=h(7782),u=Math.abs,_=2220446049250313e-31,x=1/_;E.exports=function(T,D,B,j){var Q=+T,ne=u(Q),te=m(Q);if(ne<j)return te*function(de){return de+x-x}(ne/j/D)*j*D;var ae=(1+D/_)*ne,re=ae-(ae-ne);return re>B||re!=re?te*(1/0):te*re}},5617:function(E,F,h){var m=h(3164);E.exports=Math.fround||function(u){return m(u,11920928955078125e-23,34028234663852886e22,11754943508222875e-54)}},7782:function(E){E.exports=Math.sign||function(F){var h=+F;return h===0||h!=h?h:h<0?-1:1}},741:function(E){var F=Math.ceil,h=Math.floor;E.exports=Math.trunc||function(m){var u=+m;return(u>0?h:F)(u)}},5749:function(E,F,h){var m=h(788),u=TypeError;E.exports=function(_){if(m(_))throw new u("The method doesn't accept regular expressions");return _}},360:function(E,F,h){var m=h(4576).isFinite;E.exports=Number.isFinite||function(u){return typeof u=="number"&&m(u)}},2703:function(E,F,h){var m=h(4576),u=h(9039),_=h(9504),x=h(655),T=h(3802).trim,D=h(7452),B=m.parseInt,j=m.Symbol,Q=j&&j.iterator,ne=/^[+-]?0x/i,te=_(ne.exec),ae=B(D+"08")!==8||B(D+"0x16")!==22||Q&&!u(function(){B(Object(Q))});E.exports=ae?function(re,de){var he=T(x(re));return B(he,de>>>0||(te(ne,he)?16:10))}:B},2360:function(E,F,h){var m,u=h(8551),_=h(6801),x=h(8727),T=h(421),D=h(397),B=h(4055),j=h(6119),Q="prototype",ne="script",te=j("IE_PROTO"),ae=function(){},re=function(pe){return"<"+ne+">"+pe+"</"+ne+">"},de=function(pe){pe.write(re("")),pe.close();var oe=pe.parentWindow.Object;return pe=null,oe},he=function(){try{m=new ActiveXObject("htmlfile")}catch{}var pe,oe,Ie;he=typeof document<"u"?document.domain&&m?de(m):(oe=B("iframe"),Ie="java"+ne+":",oe.style.display="none",D.appendChild(oe),oe.src=String(Ie),(pe=oe.contentWindow.document).open(),pe.write(re("document.F=Object")),pe.close(),pe.F):de(m);for(var Ee=x.length;Ee--;)delete he[Q][x[Ee]];return he()};T[te]=!0,E.exports=Object.create||function(pe,oe){var Ie;return pe!==null?(ae[Q]=u(pe),Ie=new ae,ae[Q]=null,Ie[te]=pe):Ie=he(),oe===void 0?Ie:_.f(Ie,oe)}},6801:function(E,F,h){var m=h(3724),u=h(8686),_=h(4913),x=h(8551),T=h(5397),D=h(1072);F.f=m&&!u?Object.defineProperties:function(B,j){x(B);for(var Q,ne=T(j),te=D(j),ae=te.length,re=0;ae>re;)_.f(B,Q=te[re++],ne[Q]);return B}},4913:function(E,F,h){var m=h(3724),u=h(5917),_=h(8686),x=h(8551),T=h(6969),D=TypeError,B=Object.defineProperty,j=Object.getOwnPropertyDescriptor,Q="enumerable",ne="configurable",te="writable";F.f=m?_?function(ae,re,de){if(x(ae),re=T(re),x(de),typeof ae=="function"&&re==="prototype"&&"value"in de&&te in de&&!de[te]){var he=j(ae,re);he&&he[te]&&(ae[re]=de.value,de={configurable:ne in de?de[ne]:he[ne],enumerable:Q in de?de[Q]:he[Q],writable:!1})}return B(ae,re,de)}:B:function(ae,re,de){if(x(ae),re=T(re),x(de),u)try{return B(ae,re,de)}catch{}if("get"in de||"set"in de)throw new D("Accessors not supported");return"value"in de&&(ae[re]=de.value),ae}},7347:function(E,F,h){var m=h(3724),u=h(9565),_=h(8773),x=h(6980),T=h(5397),D=h(6969),B=h(9297),j=h(5917),Q=Object.getOwnPropertyDescriptor;F.f=m?Q:function(ne,te){if(ne=T(ne),te=D(te),j)try{return Q(ne,te)}catch{}if(B(ne,te))return x(!u(_.f,ne,te),ne[te])}},298:function(E,F,h){var m=h(2195),u=h(5397),_=h(8480).f,x=h(7680),T=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];E.exports.f=function(D){return T&&m(D)==="Window"?function(B){try{return _(B)}catch{return x(T)}}(D):_(u(D))}},8480:function(E,F,h){var m=h(1828),u=h(8727).concat("length","prototype");F.f=Object.getOwnPropertyNames||function(_){return m(_,u)}},3717:function(E,F){F.f=Object.getOwnPropertySymbols},2787:function(E,F,h){var m=h(9297),u=h(4901),_=h(8981),x=h(6119),T=h(2211),D=x("IE_PROTO"),B=Object,j=B.prototype;E.exports=T?B.getPrototypeOf:function(Q){var ne=_(Q);if(m(ne,D))return ne[D];var te=ne.constructor;return u(te)&&ne instanceof te?te.prototype:ne instanceof B?j:null}},4124:function(E,F,h){var m=h(9039),u=h(34),_=h(2195),x=h(5652),T=Object.isExtensible,D=m(function(){});E.exports=D||x?function(B){return!!u(B)&&(!x||_(B)!=="ArrayBuffer")&&(!T||T(B))}:T},1625:function(E,F,h){var m=h(9504);E.exports=m({}.isPrototypeOf)},1828:function(E,F,h){var m=h(9504),u=h(9297),_=h(5397),x=h(9617).indexOf,T=h(421),D=m([].push);E.exports=function(B,j){var Q,ne=_(B),te=0,ae=[];for(Q in ne)!u(T,Q)&&u(ne,Q)&&D(ae,Q);for(;j.length>te;)u(ne,Q=j[te++])&&(~x(ae,Q)||D(ae,Q));return ae}},1072:function(E,F,h){var m=h(1828),u=h(8727);E.exports=Object.keys||function(_){return m(_,u)}},8773:function(E,F){var h={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,u=m&&!h.call({1:2},1);F.f=u?function(_){var x=m(this,_);return!!x&&x.enumerable}:h},2967:function(E,F,h){var m=h(6706),u=h(34),_=h(7750),x=h(3506);E.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var T,D=!1,B={};try{(T=m(Object.prototype,"__proto__","set"))(B,[]),D=B instanceof Array}catch{}return function(j,Q){return _(j),x(Q),u(j)&&(D?T(j,Q):j.__proto__=Q),j}}():void 0)},2357:function(E,F,h){var m=h(3724),u=h(9039),_=h(9504),x=h(2787),T=h(1072),D=h(5397),B=_(h(8773).f),j=_([].push),Q=m&&u(function(){var te=Object.create(null);return te[2]=2,!B(te,2)}),ne=function(te){return function(ae){for(var re,de=D(ae),he=T(de),pe=Q&&x(de)===null,oe=he.length,Ie=0,Ee=[];oe>Ie;)re=he[Ie++],m&&!(pe?re in de:B(de,re))||j(Ee,te?[re,de[re]]:de[re]);return Ee}};E.exports={entries:ne(!0),values:ne(!1)}},3179:function(E,F,h){var m=h(2140),u=h(6955);E.exports=m?{}.toString:function(){return"[object "+u(this)+"]"}},4270:function(E,F,h){var m=h(9565),u=h(4901),_=h(34),x=TypeError;E.exports=function(T,D){var B,j;if(D==="string"&&u(B=T.toString)&&!_(j=m(B,T))||u(B=T.valueOf)&&!_(j=m(B,T))||D!=="string"&&u(B=T.toString)&&!_(j=m(B,T)))return j;throw new x("Can't convert object to primitive value")}},5031:function(E,F,h){var m=h(7751),u=h(9504),_=h(8480),x=h(3717),T=h(8551),D=u([].concat);E.exports=m("Reflect","ownKeys")||function(B){var j=_.f(T(B)),Q=x.f;return Q?D(j,Q(B)):j}},9167:function(E,F,h){var m=h(4576);E.exports=m},6682:function(E,F,h){var m=h(9565),u=h(8551),_=h(4901),x=h(2195),T=h(7323),D=TypeError;E.exports=function(B,j){var Q=B.exec;if(_(Q)){var ne=m(Q,B,j);return ne!==null&&u(ne),ne}if(x(B)==="RegExp")return m(T,B,j);throw new D("RegExp#exec called on incompatible receiver")}},7323:function(E,F,h){var m,u,_=h(9565),x=h(9504),T=h(655),D=h(7979),B=h(8429),j=h(5745),Q=h(2360),ne=h(1181).get,te=h(3635),ae=h(8814),re=j("native-string-replace",String.prototype.replace),de=RegExp.prototype.exec,he=de,pe=x("".charAt),oe=x("".indexOf),Ie=x("".replace),Ee=x("".slice),Ne=(u=/b*/g,_(de,m=/a/,"a"),_(de,u,"a"),m.lastIndex!==0||u.lastIndex!==0),Me=B.BROKEN_CARET,De=/()??/.exec("")[1]!==void 0;(Ne||De||Me||te||ae)&&(he=function(We){var Ke,Fe,ke,He,it,ft,ct,tt=this,dt=ne(tt),pt=T(We),ut=dt.raw;if(ut)return ut.lastIndex=tt.lastIndex,Ke=_(he,ut,pt),tt.lastIndex=ut.lastIndex,Ke;var Jt=dt.groups,Nt=Me&&tt.sticky,Lt=_(D,tt),Dt=tt.source,jt=0,gt=pt;if(Nt&&(Lt=Ie(Lt,"y",""),oe(Lt,"g")===-1&&(Lt+="g"),gt=Ee(pt,tt.lastIndex),tt.lastIndex>0&&(!tt.multiline||tt.multiline&&pe(pt,tt.lastIndex-1)!==`
`)&&(Dt="(?: "+Dt+")",gt=" "+gt,jt++),Fe=new RegExp("^(?:"+Dt+")",Lt)),De&&(Fe=new RegExp("^"+Dt+"$(?!\\s)",Lt)),Ne&&(ke=tt.lastIndex),He=_(de,Nt?Fe:tt,gt),Nt?He?(He.input=Ee(He.input,jt),He[0]=Ee(He[0],jt),He.index=tt.lastIndex,tt.lastIndex+=He[0].length):tt.lastIndex=0:Ne&&He&&(tt.lastIndex=tt.global?He.index+He[0].length:ke),De&&He&&He.length>1&&_(re,He[0],Fe,function(){for(it=1;it<arguments.length-2;it++)arguments[it]===void 0&&(He[it]=void 0)}),He&&Jt)for(He.groups=ft=Q(null),it=0;it<Jt.length;it++)ft[(ct=Jt[it])[0]]=He[ct[1]];return He}),E.exports=he},7979:function(E,F,h){var m=h(8551);E.exports=function(){var u=m(this),_="";return u.hasIndices&&(_+="d"),u.global&&(_+="g"),u.ignoreCase&&(_+="i"),u.multiline&&(_+="m"),u.dotAll&&(_+="s"),u.unicode&&(_+="u"),u.unicodeSets&&(_+="v"),u.sticky&&(_+="y"),_}},1034:function(E,F,h){var m=h(9565),u=h(9297),_=h(1625),x=h(7979),T=RegExp.prototype;E.exports=function(D){var B=D.flags;return B!==void 0||"flags"in T||u(D,"flags")||!_(T,D)?B:m(x,D)}},8429:function(E,F,h){var m=h(9039),u=h(4576).RegExp,_=m(function(){var D=u("a","y");return D.lastIndex=2,D.exec("abcd")!==null}),x=_||m(function(){return!u("a","y").sticky}),T=_||m(function(){var D=u("^r","gy");return D.lastIndex=2,D.exec("str")!==null});E.exports={BROKEN_CARET:T,MISSED_STICKY:x,UNSUPPORTED_Y:_}},3635:function(E,F,h){var m=h(9039),u=h(4576).RegExp;E.exports=m(function(){var _=u(".","s");return!(_.dotAll&&_.test(`
`)&&_.flags==="s")})},8814:function(E,F,h){var m=h(9039),u=h(4576).RegExp;E.exports=m(function(){var _=u("(?<a>b)","g");return _.exec("b").groups.a!=="b"||"b".replace(_,"$<a>c")!=="bc"})},7750:function(E,F,h){var m=h(4117),u=TypeError;E.exports=function(_){if(m(_))throw new u("Can't call method on "+_);return _}},7633:function(E,F,h){var m=h(7751),u=h(2106),_=h(8227),x=h(3724),T=_("species");E.exports=function(D){var B=m(D);x&&B&&!B[T]&&u(B,T,{configurable:!0,get:function(){return this}})}},687:function(E,F,h){var m=h(4913).f,u=h(9297),_=h(8227)("toStringTag");E.exports=function(x,T,D){x&&!D&&(x=x.prototype),x&&!u(x,_)&&m(x,_,{configurable:!0,value:T})}},6119:function(E,F,h){var m=h(5745),u=h(3392),_=m("keys");E.exports=function(x){return _[x]||(_[x]=u(x))}},7629:function(E,F,h){var m=h(6395),u=h(4576),_=h(9433),x="__core-js_shared__",T=E.exports=u[x]||_(x,{});(T.versions||(T.versions=[])).push({version:"3.38.1",mode:m?"pure":"global",copyright:"¬© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:function(E,F,h){var m=h(7629);E.exports=function(u,_){return m[u]||(m[u]=_||{})}},2293:function(E,F,h){var m=h(8551),u=h(5548),_=h(4117),x=h(8227)("species");E.exports=function(T,D){var B,j=m(T).constructor;return j===void 0||_(B=m(j)[x])?D:u(B)}},8183:function(E,F,h){var m=h(9504),u=h(1291),_=h(655),x=h(7750),T=m("".charAt),D=m("".charCodeAt),B=m("".slice),j=function(Q){return function(ne,te){var ae,re,de=_(x(ne)),he=u(te),pe=de.length;return he<0||he>=pe?Q?"":void 0:(ae=D(de,he))<55296||ae>56319||he+1===pe||(re=D(de,he+1))<56320||re>57343?Q?T(de,he):ae:Q?B(de,he,he+2):re-56320+(ae-55296<<10)+65536}};E.exports={codeAt:j(!1),charAt:j(!0)}},3063:function(E,F,h){var m=h(2839);E.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(m)},533:function(E,F,h){var m=h(9504),u=h(8014),_=h(655),x=h(2333),T=h(7750),D=m(x),B=m("".slice),j=Math.ceil,Q=function(ne){return function(te,ae,re){var de,he,pe=_(T(te)),oe=u(ae),Ie=pe.length,Ee=re===void 0?" ":_(re);return oe<=Ie||Ee===""?pe:((he=D(Ee,j((de=oe-Ie)/Ee.length))).length>de&&(he=B(he,0,de)),ne?pe+he:he+pe)}};E.exports={start:Q(!1),end:Q(!0)}},2333:function(E,F,h){var m=h(1291),u=h(655),_=h(7750),x=RangeError;E.exports=function(T){var D=u(_(this)),B="",j=m(T);if(j<0||j===1/0)throw new x("Wrong number of repetitions");for(;j>0;(j>>>=1)&&(D+=D))1&j&&(B+=D);return B}},3802:function(E,F,h){var m=h(9504),u=h(7750),_=h(655),x=h(7452),T=m("".replace),D=RegExp("^["+x+"]+"),B=RegExp("(^|[^"+x+"])["+x+"]+$"),j=function(Q){return function(ne){var te=_(u(ne));return 1&Q&&(te=T(te,D,"")),2&Q&&(te=T(te,B,"$1")),te}};E.exports={start:j(1),end:j(2),trim:j(3)}},4495:function(E,F,h){var m=h(9519),u=h(9039),_=h(4576).String;E.exports=!!Object.getOwnPropertySymbols&&!u(function(){var x=Symbol("symbol detection");return!_(x)||!(Object(x)instanceof Symbol)||!Symbol.sham&&m&&m<41})},8242:function(E,F,h){var m=h(9565),u=h(7751),_=h(8227),x=h(6840);E.exports=function(){var T=u("Symbol"),D=T&&T.prototype,B=D&&D.valueOf,j=_("toPrimitive");D&&!D[j]&&x(D,j,function(Q){return m(B,this)},{arity:1})}},1296:function(E,F,h){var m=h(4495);E.exports=m&&!!Symbol.for&&!!Symbol.keyFor},1240:function(E,F,h){var m=h(9504);E.exports=m(1 .valueOf)},5610:function(E,F,h){var m=h(1291),u=Math.max,_=Math.min;E.exports=function(x,T){var D=m(x);return D<0?u(D+T,0):_(D,T)}},5854:function(E,F,h){var m=h(2777),u=TypeError;E.exports=function(_){var x=m(_,"number");if(typeof x=="number")throw new u("Can't convert number to bigint");return BigInt(x)}},7696:function(E,F,h){var m=h(1291),u=h(8014),_=RangeError;E.exports=function(x){if(x===void 0)return 0;var T=m(x),D=u(T);if(T!==D)throw new _("Wrong length or index");return D}},5397:function(E,F,h){var m=h(7055),u=h(7750);E.exports=function(_){return m(u(_))}},1291:function(E,F,h){var m=h(741);E.exports=function(u){var _=+u;return _!=_||_===0?0:m(_)}},8014:function(E,F,h){var m=h(1291),u=Math.min;E.exports=function(_){var x=m(_);return x>0?u(x,9007199254740991):0}},8981:function(E,F,h){var m=h(7750),u=Object;E.exports=function(_){return u(m(_))}},8229:function(E,F,h){var m=h(9590),u=RangeError;E.exports=function(_,x){var T=m(_);if(T%x)throw new u("Wrong offset");return T}},9590:function(E,F,h){var m=h(1291),u=RangeError;E.exports=function(_){var x=m(_);if(x<0)throw new u("The argument can't be less than 0");return x}},2777:function(E,F,h){var m=h(9565),u=h(34),_=h(757),x=h(5966),T=h(4270),D=h(8227),B=TypeError,j=D("toPrimitive");E.exports=function(Q,ne){if(!u(Q)||_(Q))return Q;var te,ae=x(Q,j);if(ae){if(ne===void 0&&(ne="default"),te=m(ae,Q,ne),!u(te)||_(te))return te;throw new B("Can't convert object to primitive value")}return ne===void 0&&(ne="number"),T(Q,ne)}},6969:function(E,F,h){var m=h(2777),u=h(757);E.exports=function(_){var x=m(_,"string");return u(x)?x:x+""}},2140:function(E,F,h){var m={};m[h(8227)("toStringTag")]="z",E.exports=String(m)==="[object z]"},655:function(E,F,h){var m=h(6955),u=String;E.exports=function(_){if(m(_)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return u(_)}},8319:function(E){var F=Math.round;E.exports=function(h){var m=F(h);return m<0?0:m>255?255:255&m}},6823:function(E){var F=String;E.exports=function(h){try{return F(h)}catch{return"Object"}}},5823:function(E,F,h){var m=h(6518),u=h(4576),_=h(9565),x=h(3724),T=h(2805),D=h(4644),B=h(6346),j=h(679),Q=h(6980),ne=h(6699),te=h(2087),ae=h(8014),re=h(7696),de=h(8229),he=h(8319),pe=h(6969),oe=h(9297),Ie=h(6955),Ee=h(34),Ne=h(757),Me=h(2360),De=h(1625),We=h(2967),Ke=h(8480).f,Fe=h(3251),ke=h(9213).forEach,He=h(7633),it=h(2106),ft=h(4913),ct=h(7347),tt=h(5370),dt=h(1181),pt=h(3167),ut=dt.get,Jt=dt.set,Nt=dt.enforce,Lt=ft.f,Dt=ct.f,jt=u.RangeError,gt=B.ArrayBuffer,Bt=gt.prototype,Qt=B.DataView,Et=D.NATIVE_ARRAY_BUFFER_VIEWS,ei=D.TYPED_ARRAY_TAG,ii=D.TypedArray,hi=D.TypedArrayPrototype,ci=D.isTypedArray,wi="BYTES_PER_ELEMENT",pi="Wrong length",ai=function(Si,Ti){it(Si,Ti,{configurable:!0,get:function(){return ut(this)[Ti]}})},en=function(Si){var Ti;return De(Bt,Si)||(Ti=Ie(Si))==="ArrayBuffer"||Ti==="SharedArrayBuffer"},dn=function(Si,Ti){return ci(Si)&&!Ne(Ti)&&Ti in Si&&te(+Ti)&&Ti>=0},tn=function(Si,Ti){return Ti=pe(Ti),dn(Si,Ti)?Q(2,Si[Ti]):Dt(Si,Ti)},nn=function(Si,Ti,mt){return Ti=pe(Ti),!(dn(Si,Ti)&&Ee(mt)&&oe(mt,"value"))||oe(mt,"get")||oe(mt,"set")||mt.configurable||oe(mt,"writable")&&!mt.writable||oe(mt,"enumerable")&&!mt.enumerable?Lt(Si,Ti,mt):(Si[Ti]=mt.value,Si)};x?(Et||(ct.f=tn,ft.f=nn,ai(hi,"buffer"),ai(hi,"byteOffset"),ai(hi,"byteLength"),ai(hi,"length")),m({target:"Object",stat:!0,forced:!Et},{getOwnPropertyDescriptor:tn,defineProperty:nn}),E.exports=function(Si,Ti,mt){var zt=Si.match(/\d+/)[0]/8,zi=Si+(mt?"Clamped":"")+"Array",_n="get"+Si,an="set"+Si,Ui=u[zi],Ei=Ui,Qi=Ei&&Ei.prototype,Rn={},Bn=function(Zt,Ut){Lt(Zt,Ut,{get:function(){return function(fi,ki){var vn=ut(fi);return vn.view[_n](ki*zt+vn.byteOffset,!0)}(this,Ut)},set:function(fi){return function(ki,vn,Sn){var $n=ut(ki);$n.view[an](vn*zt+$n.byteOffset,mt?he(Sn):Sn,!0)}(this,Ut,fi)},enumerable:!0})};Et?T&&(Ei=Ti(function(Zt,Ut,fi,ki){return j(Zt,Qi),pt(Ee(Ut)?en(Ut)?ki!==void 0?new Ui(Ut,de(fi,zt),ki):fi!==void 0?new Ui(Ut,de(fi,zt)):new Ui(Ut):ci(Ut)?tt(Ei,Ut):_(Fe,Ei,Ut):new Ui(re(Ut)),Zt,Ei)}),We&&We(Ei,ii),ke(Ke(Ui),function(Zt){Zt in Ei||ne(Ei,Zt,Ui[Zt])}),Ei.prototype=Qi):(Ei=Ti(function(Zt,Ut,fi,ki){j(Zt,Qi);var vn,Sn,$n,bs=0,Rr=0;if(Ee(Ut)){if(!en(Ut))return ci(Ut)?tt(Ei,Ut):_(Fe,Ei,Ut);vn=Ut,Rr=de(fi,zt);var is=Ut.byteLength;if(ki===void 0){if(is%zt)throw new jt(pi);if((Sn=is-Rr)<0)throw new jt(pi)}else if((Sn=ae(ki)*zt)+Rr>is)throw new jt(pi);$n=Sn/zt}else $n=re(Ut),vn=new gt(Sn=$n*zt);for(Jt(Zt,{buffer:vn,byteOffset:Rr,byteLength:Sn,length:$n,view:new Qt(vn)});bs<$n;)Bn(Zt,bs++)}),We&&We(Ei,ii),Qi=Ei.prototype=Me(hi)),Qi.constructor!==Ei&&ne(Qi,"constructor",Ei),Nt(Qi).TypedArrayConstructor=Ei,ei&&ne(Qi,ei,zi);var si=Ei!==Ui;Rn[zi]=Ei,m({global:!0,constructor:!0,forced:si,sham:!Et},Rn),wi in Ei||ne(Ei,wi,zt),wi in Qi||ne(Qi,wi,zt),He(zi)}):E.exports=function(){}},2805:function(E,F,h){var m=h(4576),u=h(9039),_=h(4428),x=h(4644).NATIVE_ARRAY_BUFFER_VIEWS,T=m.ArrayBuffer,D=m.Int8Array;E.exports=!x||!u(function(){D(1)})||!u(function(){new D(-1)})||!_(function(B){new D,new D(null),new D(1.5),new D(B)},!0)||u(function(){return new D(new T(2),1,void 0).length!==1})},6357:function(E,F,h){var m=h(5370),u=h(1412);E.exports=function(_,x){return m(u(_),x)}},3251:function(E,F,h){var m=h(6080),u=h(9565),_=h(5548),x=h(8981),T=h(6198),D=h(81),B=h(851),j=h(4209),Q=h(1108),ne=h(4644).aTypedArrayConstructor,te=h(5854);E.exports=function(ae){var re,de,he,pe,oe,Ie,Ee,Ne,Me=_(this),De=x(ae),We=arguments.length,Ke=We>1?arguments[1]:void 0,Fe=Ke!==void 0,ke=B(De);if(ke&&!j(ke))for(Ne=(Ee=D(De,ke)).next,De=[];!(Ie=u(Ne,Ee)).done;)De.push(Ie.value);for(Fe&&We>2&&(Ke=m(Ke,arguments[2])),de=T(De),he=new(ne(Me))(de),pe=Q(he),re=0;de>re;re++)oe=Fe?Ke(De[re],re):De[re],he[re]=pe?te(oe):+oe;return he}},1412:function(E,F,h){var m=h(4644),u=h(2293),_=m.aTypedArrayConstructor,x=m.getTypedArrayConstructor;E.exports=function(T){return _(u(T,x(T)))}},3392:function(E,F,h){var m=h(9504),u=0,_=Math.random(),x=m(1 .toString);E.exports=function(T){return"Symbol("+(T===void 0?"":T)+")_"+x(++u+_,36)}},7040:function(E,F,h){var m=h(4495);E.exports=m&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},8686:function(E,F,h){var m=h(3724),u=h(9039);E.exports=m&&u(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},8622:function(E,F,h){var m=h(4576),u=h(4901),_=m.WeakMap;E.exports=u(_)&&/native code/.test(String(_))},511:function(E,F,h){var m=h(9167),u=h(9297),_=h(1951),x=h(4913).f;E.exports=function(T){var D=m.Symbol||(m.Symbol={});u(D,T)||x(D,T,{value:_.f(T)})}},1951:function(E,F,h){var m=h(8227);F.f=m},8227:function(E,F,h){var m=h(4576),u=h(5745),_=h(9297),x=h(3392),T=h(4495),D=h(7040),B=m.Symbol,j=u("wks"),Q=D?B.for||B:B&&B.withoutSetter||x;E.exports=function(ne){return _(j,ne)||(j[ne]=T&&_(B,ne)?B[ne]:Q("Symbol."+ne)),j[ne]}},7452:function(E){E.exports=`	
\v\f\r ¬†·öÄ‚ÄÄ‚ÄÅ‚ÄÇ‚ÄÉ‚ÄÑ‚ÄÖ‚ÄÜ‚Äá‚Äà‚Äâ‚Ää‚ÄØ‚Åü„ÄÄ\u2028\u2029\uFEFF`},4743:function(E,F,h){var m=h(6518),u=h(4576),_=h(6346),x=h(7633),T="ArrayBuffer",D=_[T];m({global:!0,constructor:!0,forced:u[T]!==D},{ArrayBuffer:D}),x(T)},1745:function(E,F,h){var m=h(6518),u=h(7476),_=h(9039),x=h(6346),T=h(8551),D=h(5610),B=h(8014),j=h(2293),Q=x.ArrayBuffer,ne=x.DataView,te=ne.prototype,ae=u(Q.prototype.slice),re=u(te.getUint8),de=u(te.setUint8);m({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:_(function(){return!new Q(2).slice(1,void 0).byteLength})},{slice:function(he,pe){if(ae&&pe===void 0)return ae(T(this),he);for(var oe=T(this).byteLength,Ie=D(he,oe),Ee=D(pe===void 0?oe:pe,oe),Ne=new(j(this,Q))(B(Ee-Ie)),Me=new ne(this),De=new ne(Ne),We=0;Ie<Ee;)de(De,We++,re(Me,Ie++));return Ne}})},8706:function(E,F,h){var m=h(6518),u=h(9039),_=h(4376),x=h(34),T=h(8981),D=h(6198),B=h(6837),j=h(4659),Q=h(1469),ne=h(597),te=h(8227),ae=h(9519),re=te("isConcatSpreadable"),de=ae>=51||!u(function(){var pe=[];return pe[re]=!1,pe.concat()[0]!==pe}),he=function(pe){if(!x(pe))return!1;var oe=pe[re];return oe!==void 0?!!oe:_(pe)};m({target:"Array",proto:!0,arity:1,forced:!de||!ne("concat")},{concat:function(pe){var oe,Ie,Ee,Ne,Me,De=T(this),We=Q(De,0),Ke=0;for(oe=-1,Ee=arguments.length;oe<Ee;oe++)if(he(Me=oe===-1?De:arguments[oe]))for(Ne=D(Me),B(Ke+Ne),Ie=0;Ie<Ne;Ie++,Ke++)Ie in Me&&j(We,Ke,Me[Ie]);else B(Ke+1),j(We,Ke++,Me);return We.length=Ke,We}})},3771:function(E,F,h){var m=h(6518),u=h(4373),_=h(6469);m({target:"Array",proto:!0},{fill:u}),_("fill")},2008:function(E,F,h){var m=h(6518),u=h(9213).filter;m({target:"Array",proto:!0,forced:!h(597)("filter")},{filter:function(_){return u(this,_,arguments.length>1?arguments[1]:void 0)}})},8980:function(E,F,h){var m=h(6518),u=h(9213).findIndex,_=h(6469),x="findIndex",T=!0;x in[]&&Array(1)[x](function(){T=!1}),m({target:"Array",proto:!0,forced:T},{findIndex:function(D){return u(this,D,arguments.length>1?arguments[1]:void 0)}}),_(x)},113:function(E,F,h){var m=h(6518),u=h(9213).find,_=h(6469),x="find",T=!0;x in[]&&Array(1)[x](function(){T=!1}),m({target:"Array",proto:!0,forced:T},{find:function(D){return u(this,D,arguments.length>1?arguments[1]:void 0)}}),_(x)},3418:function(E,F,h){var m=h(6518),u=h(7916);m({target:"Array",stat:!0,forced:!h(4428)(function(_){Array.from(_)})},{from:u})},4423:function(E,F,h){var m=h(6518),u=h(9617).includes,_=h(9039),x=h(6469);m({target:"Array",proto:!0,forced:_(function(){return!Array(1).includes()})},{includes:function(T){return u(this,T,arguments.length>1?arguments[1]:void 0)}}),x("includes")},3792:function(E,F,h){var m=h(5397),u=h(6469),_=h(6269),x=h(1181),T=h(4913).f,D=h(1088),B=h(2529),j=h(6395),Q=h(3724),ne="Array Iterator",te=x.set,ae=x.getterFor(ne);E.exports=D(Array,"Array",function(de,he){te(this,{type:ne,target:m(de),index:0,kind:he})},function(){var de=ae(this),he=de.target,pe=de.index++;if(!he||pe>=he.length)return de.target=null,B(void 0,!0);switch(de.kind){case"keys":return B(pe,!1);case"values":return B(he[pe],!1)}return B([pe,he[pe]],!1)},"values");var re=_.Arguments=_.Array;if(u("keys"),u("values"),u("entries"),!j&&Q&&re.name!=="values")try{T(re,"name",{value:"values"})}catch{}},4782:function(E,F,h){var m=h(6518),u=h(4376),_=h(3517),x=h(34),T=h(5610),D=h(6198),B=h(5397),j=h(4659),Q=h(8227),ne=h(597),te=h(7680),ae=ne("slice"),re=Q("species"),de=Array,he=Math.max;m({target:"Array",proto:!0,forced:!ae},{slice:function(pe,oe){var Ie,Ee,Ne,Me=B(this),De=D(Me),We=T(pe,De),Ke=T(oe===void 0?De:oe,De);if(u(Me)&&(Ie=Me.constructor,(_(Ie)&&(Ie===de||u(Ie.prototype))||x(Ie)&&(Ie=Ie[re])===null)&&(Ie=void 0),Ie===de||Ie===void 0))return te(Me,We,Ke);for(Ee=new(Ie===void 0?de:Ie)(he(Ke-We,0)),Ne=0;We<Ke;We++,Ne++)We in Me&&j(Ee,Ne,Me[We]);return Ee.length=Ne,Ee}})},6910:function(E,F,h){var m=h(6518),u=h(9504),_=h(9306),x=h(8981),T=h(6198),D=h(4606),B=h(655),j=h(9039),Q=h(4488),ne=h(4598),te=h(3709),ae=h(3763),re=h(9519),de=h(3607),he=[],pe=u(he.sort),oe=u(he.push),Ie=j(function(){he.sort(void 0)}),Ee=j(function(){he.sort(null)}),Ne=ne("sort"),Me=!j(function(){if(re)return re<70;if(!(te&&te>3)){if(ae)return!0;if(de)return de<603;var De,We,Ke,Fe,ke="";for(De=65;De<76;De++){switch(We=String.fromCharCode(De),De){case 66:case 69:case 70:case 72:Ke=3;break;case 68:case 71:Ke=4;break;default:Ke=2}for(Fe=0;Fe<47;Fe++)he.push({k:We+Fe,v:Ke})}for(he.sort(function(He,it){return it.v-He.v}),Fe=0;Fe<he.length;Fe++)We=he[Fe].k.charAt(0),ke.charAt(ke.length-1)!==We&&(ke+=We);return ke!=="DGBEFHACIJK"}});m({target:"Array",proto:!0,forced:Ie||!Ee||!Ne||!Me},{sort:function(De){De!==void 0&&_(De);var We=x(this);if(Me)return De===void 0?pe(We):pe(We,De);var Ke,Fe,ke=[],He=T(We);for(Fe=0;Fe<He;Fe++)Fe in We&&oe(ke,We[Fe]);for(Q(ke,function(it){return function(ft,ct){return ct===void 0?-1:ft===void 0?1:it!==void 0?+it(ft,ct)||0:B(ft)>B(ct)?1:-1}}(De)),Ke=T(ke),Fe=0;Fe<Ke;)We[Fe]=ke[Fe++];for(;Fe<He;)D(We,Fe++);return We}})},4554:function(E,F,h){var m=h(6518),u=h(8981),_=h(5610),x=h(1291),T=h(6198),D=h(4527),B=h(6837),j=h(1469),Q=h(4659),ne=h(4606),te=h(597)("splice"),ae=Math.max,re=Math.min;m({target:"Array",proto:!0,forced:!te},{splice:function(de,he){var pe,oe,Ie,Ee,Ne,Me,De=u(this),We=T(De),Ke=_(de,We),Fe=arguments.length;for(Fe===0?pe=oe=0:Fe===1?(pe=0,oe=We-Ke):(pe=Fe-2,oe=re(ae(x(he),0),We-Ke)),B(We+pe-oe),Ie=j(De,oe),Ee=0;Ee<oe;Ee++)(Ne=Ke+Ee)in De&&Q(Ie,Ee,De[Ne]);if(Ie.length=oe,pe<oe){for(Ee=Ke;Ee<We-oe;Ee++)Me=Ee+pe,(Ne=Ee+oe)in De?De[Me]=De[Ne]:ne(De,Me);for(Ee=We;Ee>We-oe+pe;Ee--)ne(De,Ee-1)}else if(pe>oe)for(Ee=We-oe;Ee>Ke;Ee--)Me=Ee+pe-1,(Ne=Ee+oe-1)in De?De[Me]=De[Ne]:ne(De,Me);for(Ee=0;Ee<pe;Ee++)De[Ee+Ke]=arguments[Ee+2];return D(De,We-oe+pe),Ie}})},9572:function(E,F,h){var m=h(9297),u=h(6840),_=h(3640),x=h(8227)("toPrimitive"),T=Date.prototype;m(T,x)||u(T,x,_)},2010:function(E,F,h){var m=h(3724),u=h(350).EXISTS,_=h(9504),x=h(2106),T=Function.prototype,D=_(T.toString),B=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,j=_(B.exec);m&&!u&&x(T,"name",{configurable:!0,get:function(){try{return j(B,D(this))[1]}catch{return""}}})},3110:function(E,F,h){var m=h(6518),u=h(7751),_=h(8745),x=h(9565),T=h(9504),D=h(9039),B=h(4901),j=h(757),Q=h(7680),ne=h(6933),te=h(4495),ae=String,re=u("JSON","stringify"),de=T(/./.exec),he=T("".charAt),pe=T("".charCodeAt),oe=T("".replace),Ie=T(1 .toString),Ee=/[\uD800-\uDFFF]/g,Ne=/^[\uD800-\uDBFF]$/,Me=/^[\uDC00-\uDFFF]$/,De=!te||D(function(){var ke=u("Symbol")("stringify detection");return re([ke])!=="[null]"||re({a:ke})!=="{}"||re(Object(ke))!=="{}"}),We=D(function(){return re("\uDF06\uD834")!=='"\\udf06\\ud834"'||re("\uDEAD")!=='"\\udead"'}),Ke=function(ke,He){var it=Q(arguments),ft=ne(He);if(B(ft)||ke!==void 0&&!j(ke))return it[1]=function(ct,tt){if(B(ft)&&(tt=x(ft,this,ae(ct),tt)),!j(tt))return tt},_(re,null,it)},Fe=function(ke,He,it){var ft=he(it,He-1),ct=he(it,He+1);return de(Ne,ke)&&!de(Me,ct)||de(Me,ke)&&!de(Ne,ft)?"\\u"+Ie(pe(ke,0),16):ke};re&&m({target:"JSON",stat:!0,arity:3,forced:De||We},{stringify:function(ke,He,it){var ft=Q(arguments),ct=_(De?Ke:re,null,ft);return We&&typeof ct=="string"?oe(ct,Ee,Fe):ct}})},8523:function(E,F,h){h(6468)("Map",function(m){return function(){return m(this,arguments.length?arguments[0]:void 0)}},h(6938))},6033:function(E,F,h){h(8523)},2892:function(E,F,h){var m=h(6518),u=h(6395),_=h(3724),x=h(4576),T=h(9167),D=h(9504),B=h(2796),j=h(9297),Q=h(3167),ne=h(1625),te=h(757),ae=h(2777),re=h(9039),de=h(8480).f,he=h(7347).f,pe=h(4913).f,oe=h(1240),Ie=h(3802).trim,Ee="Number",Ne=x[Ee],Me=T[Ee],De=Ne.prototype,We=x.TypeError,Ke=D("".slice),Fe=D("".charCodeAt),ke=B(Ee,!Ne(" 0o1")||!Ne("0b1")||Ne("+0x1")),He=function(ft){var ct,tt=arguments.length<1?0:Ne(function(dt){var pt=ae(dt,"number");return typeof pt=="bigint"?pt:function(ut){var Jt,Nt,Lt,Dt,jt,gt,Bt,Qt,Et=ae(ut,"number");if(te(Et))throw new We("Cannot convert a Symbol value to a number");if(typeof Et=="string"&&Et.length>2){if(Et=Ie(Et),(Jt=Fe(Et,0))===43||Jt===45){if((Nt=Fe(Et,2))===88||Nt===120)return NaN}else if(Jt===48){switch(Fe(Et,1)){case 66:case 98:Lt=2,Dt=49;break;case 79:case 111:Lt=8,Dt=55;break;default:return+Et}for(gt=(jt=Ke(Et,2)).length,Bt=0;Bt<gt;Bt++)if((Qt=Fe(jt,Bt))<48||Qt>Dt)return NaN;return parseInt(jt,Lt)}}return+Et}(pt)}(ft));return ne(De,ct=this)&&re(function(){oe(ct)})?Q(Object(tt),this,He):tt};He.prototype=De,ke&&!u&&(De.constructor=He),m({global:!0,constructor:!0,wrap:!0,forced:ke},{Number:He});var it=function(ft,ct){for(var tt,dt=_?de(ct):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),pt=0;dt.length>pt;pt++)j(ct,tt=dt[pt])&&!j(ft,tt)&&pe(ft,tt,he(ct,tt))};u&&Me&&it(T[Ee],Me),(ke||u)&&it(T[Ee],Ne)},5428:function(E,F,h){h(6518)({target:"Number",stat:!0},{isFinite:h(360)})},4601:function(E,F,h){h(6518)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},5843:function(E,F,h){var m=h(6518),u=h(2703);m({target:"Number",stat:!0,forced:Number.parseInt!==u},{parseInt:u})},5506:function(E,F,h){var m=h(6518),u=h(2357).entries;m({target:"Object",stat:!0},{entries:function(_){return u(_)}})},3851:function(E,F,h){var m=h(6518),u=h(9039),_=h(5397),x=h(7347).f,T=h(3724);m({target:"Object",stat:!0,forced:!T||u(function(){x(1)}),sham:!T},{getOwnPropertyDescriptor:function(D,B){return x(_(D),B)}})},1278:function(E,F,h){var m=h(6518),u=h(3724),_=h(5031),x=h(5397),T=h(7347),D=h(4659);m({target:"Object",stat:!0,sham:!u},{getOwnPropertyDescriptors:function(B){for(var j,Q,ne=x(B),te=T.f,ae=_(ne),re={},de=0;ae.length>de;)(Q=te(ne,j=ae[de++]))!==void 0&&D(re,j,Q);return re}})},9773:function(E,F,h){var m=h(6518),u=h(4495),_=h(9039),x=h(3717),T=h(8981);m({target:"Object",stat:!0,forced:!u||_(function(){x.f(1)})},{getOwnPropertySymbols:function(D){var B=x.f;return B?B(T(D)):[]}})},875:function(E,F,h){var m=h(6518),u=h(9039),_=h(8981),x=h(2787),T=h(2211);m({target:"Object",stat:!0,forced:u(function(){x(1)}),sham:!T},{getPrototypeOf:function(D){return x(_(D))}})},9432:function(E,F,h){var m=h(6518),u=h(8981),_=h(1072);m({target:"Object",stat:!0,forced:h(9039)(function(){_(1)})},{keys:function(x){return _(u(x))}})},287:function(E,F,h){h(6518)({target:"Object",stat:!0},{setPrototypeOf:h(2967)})},6099:function(E,F,h){var m=h(2140),u=h(6840),_=h(3179);m||u(Object.prototype,"toString",_,{unsafe:!0})},825:function(E,F,h){var m=h(6518),u=h(7751),_=h(8745),x=h(566),T=h(5548),D=h(8551),B=h(34),j=h(2360),Q=h(9039),ne=u("Reflect","construct"),te=Object.prototype,ae=[].push,re=Q(function(){function pe(){}return!(ne(function(){},[],pe)instanceof pe)}),de=!Q(function(){ne(function(){})}),he=re||de;m({target:"Reflect",stat:!0,forced:he,sham:he},{construct:function(pe,oe){T(pe),D(oe);var Ie=arguments.length<3?pe:T(arguments[2]);if(de&&!re)return ne(pe,oe,Ie);if(pe===Ie){switch(oe.length){case 0:return new pe;case 1:return new pe(oe[0]);case 2:return new pe(oe[0],oe[1]);case 3:return new pe(oe[0],oe[1],oe[2]);case 4:return new pe(oe[0],oe[1],oe[2],oe[3])}var Ee=[null];return _(ae,Ee,oe),new(_(x,pe,Ee))}var Ne=Ie.prototype,Me=j(B(Ne)?Ne:te),De=_(pe,Me,oe);return B(De)?De:Me}})},7495:function(E,F,h){var m=h(6518),u=h(7323);m({target:"RegExp",proto:!0,forced:/./.exec!==u},{exec:u})},8781:function(E,F,h){var m=h(350).PROPER,u=h(6840),_=h(8551),x=h(655),T=h(9039),D=h(1034),B="toString",j=RegExp.prototype,Q=j[B],ne=T(function(){return Q.call({source:"a",flags:"b"})!=="/a/b"}),te=m&&Q.name!==B;(ne||te)&&u(j,B,function(){var ae=_(this);return"/"+x(ae.source)+"/"+x(D(ae))},{unsafe:!0})},2405:function(E,F,h){h(6468)("Set",function(m){return function(){return m(this,arguments.length?arguments[0]:void 0)}},h(6938))},1415:function(E,F,h){h(2405)},1699:function(E,F,h){var m=h(6518),u=h(9504),_=h(5749),x=h(7750),T=h(655),D=h(1436),B=u("".indexOf);m({target:"String",proto:!0,forced:!D("includes")},{includes:function(j){return!!~B(T(x(this)),T(_(j)),arguments.length>1?arguments[1]:void 0)}})},7764:function(E,F,h){var m=h(8183).charAt,u=h(655),_=h(1181),x=h(1088),T=h(2529),D="String Iterator",B=_.set,j=_.getterFor(D);x(String,"String",function(Q){B(this,{type:D,string:u(Q),index:0})},function(){var Q,ne=j(this),te=ne.string,ae=ne.index;return ae>=te.length?T(void 0,!0):(Q=m(te,ae),ne.index+=Q.length,T(Q,!1))})},8156:function(E,F,h){var m=h(6518),u=h(533).start;m({target:"String",proto:!0,forced:h(3063)},{padStart:function(_){return u(this,_,arguments.length>1?arguments[1]:void 0)}})},5440:function(E,F,h){var m=h(8745),u=h(9565),_=h(9504),x=h(9228),T=h(9039),D=h(8551),B=h(4901),j=h(4117),Q=h(1291),ne=h(8014),te=h(655),ae=h(7750),re=h(7829),de=h(5966),he=h(2478),pe=h(6682),oe=h(8227)("replace"),Ie=Math.max,Ee=Math.min,Ne=_([].concat),Me=_([].push),De=_("".indexOf),We=_("".slice),Ke="a".replace(/./,"$0")==="$0",Fe=!!/./[oe]&&/./[oe]("a","$0")==="";x("replace",function(ke,He,it){var ft=Fe?"$":"$0";return[function(ct,tt){var dt=ae(this),pt=j(ct)?void 0:de(ct,oe);return pt?u(pt,ct,dt,tt):u(He,te(dt),ct,tt)},function(ct,tt){var dt=D(this),pt=te(ct);if(typeof tt=="string"&&De(tt,ft)===-1&&De(tt,"$<")===-1){var ut=it(He,dt,pt,tt);if(ut.done)return ut.value}var Jt=B(tt);Jt||(tt=te(tt));var Nt,Lt=dt.global;Lt&&(Nt=dt.unicode,dt.lastIndex=0);for(var Dt,jt=[];(Dt=pe(dt,pt))!==null&&(Me(jt,Dt),Lt);)te(Dt[0])===""&&(dt.lastIndex=re(pt,ne(dt.lastIndex),Nt));for(var gt,Bt="",Qt=0,Et=0;Et<jt.length;Et++){for(var ei,ii=te((Dt=jt[Et])[0]),hi=Ie(Ee(Q(Dt.index),pt.length),0),ci=[],wi=1;wi<Dt.length;wi++)Me(ci,(gt=Dt[wi])===void 0?gt:String(gt));var pi=Dt.groups;if(Jt){var ai=Ne([ii],ci,hi,pt);pi!==void 0&&Me(ai,pi),ei=te(m(tt,void 0,ai))}else ei=he(ii,pt,hi,ci,pi,tt);hi>=Qt&&(Bt+=We(pt,Qt,hi)+ei,Qt=hi+ii.length)}return Bt+We(pt,Qt)}]},!!T(function(){var ke=/./;return ke.exec=function(){var He=[];return He.groups={a:"7"},He},"".replace(ke,"$<a>")!=="7"})||!Ke||Fe)},6761:function(E,F,h){var m=h(6518),u=h(4576),_=h(9565),x=h(9504),T=h(6395),D=h(3724),B=h(4495),j=h(9039),Q=h(9297),ne=h(1625),te=h(8551),ae=h(5397),re=h(6969),de=h(655),he=h(6980),pe=h(2360),oe=h(1072),Ie=h(8480),Ee=h(298),Ne=h(3717),Me=h(7347),De=h(4913),We=h(6801),Ke=h(8773),Fe=h(6840),ke=h(2106),He=h(5745),it=h(6119),ft=h(421),ct=h(3392),tt=h(8227),dt=h(1951),pt=h(511),ut=h(8242),Jt=h(687),Nt=h(1181),Lt=h(9213).forEach,Dt=it("hidden"),jt="Symbol",gt="prototype",Bt=Nt.set,Qt=Nt.getterFor(jt),Et=Object[gt],ei=u.Symbol,ii=ei&&ei[gt],hi=u.RangeError,ci=u.TypeError,wi=u.QObject,pi=Me.f,ai=De.f,en=Ee.f,dn=Ke.f,tn=x([].push),nn=He("symbols"),Si=He("op-symbols"),Ti=He("wks"),mt=!wi||!wi[gt]||!wi[gt].findChild,zt=function(si,Zt,Ut){var fi=pi(Et,Zt);fi&&delete Et[Zt],ai(si,Zt,Ut),fi&&si!==Et&&ai(Et,Zt,fi)},zi=D&&j(function(){return pe(ai({},"a",{get:function(){return ai(this,"a",{value:7}).a}})).a!==7})?zt:ai,_n=function(si,Zt){var Ut=nn[si]=pe(ii);return Bt(Ut,{type:jt,tag:si,description:Zt}),D||(Ut.description=Zt),Ut},an=function(si,Zt,Ut){si===Et&&an(Si,Zt,Ut),te(si);var fi=re(Zt);return te(Ut),Q(nn,fi)?(Ut.enumerable?(Q(si,Dt)&&si[Dt][fi]&&(si[Dt][fi]=!1),Ut=pe(Ut,{enumerable:he(0,!1)})):(Q(si,Dt)||ai(si,Dt,he(1,pe(null))),si[Dt][fi]=!0),zi(si,fi,Ut)):ai(si,fi,Ut)},Ui=function(si,Zt){te(si);var Ut=ae(Zt),fi=oe(Ut).concat(Bn(Ut));return Lt(fi,function(ki){D&&!_(Ei,Ut,ki)||an(si,ki,Ut[ki])}),si},Ei=function(si){var Zt=re(si),Ut=_(dn,this,Zt);return!(this===Et&&Q(nn,Zt)&&!Q(Si,Zt))&&(!(Ut||!Q(this,Zt)||!Q(nn,Zt)||Q(this,Dt)&&this[Dt][Zt])||Ut)},Qi=function(si,Zt){var Ut=ae(si),fi=re(Zt);if(Ut!==Et||!Q(nn,fi)||Q(Si,fi)){var ki=pi(Ut,fi);return!ki||!Q(nn,fi)||Q(Ut,Dt)&&Ut[Dt][fi]||(ki.enumerable=!0),ki}},Rn=function(si){var Zt=en(ae(si)),Ut=[];return Lt(Zt,function(fi){Q(nn,fi)||Q(ft,fi)||tn(Ut,fi)}),Ut},Bn=function(si){var Zt=si===Et,Ut=en(Zt?Si:ae(si)),fi=[];return Lt(Ut,function(ki){!Q(nn,ki)||Zt&&!Q(Et,ki)||tn(fi,nn[ki])}),fi};B||(ei=function(){if(ne(ii,this))throw new ci("Symbol is not a constructor");var si=arguments.length&&arguments[0]!==void 0?de(arguments[0]):void 0,Zt=ct(si),Ut=function(fi){var ki=this===void 0?u:this;ki===Et&&_(Ut,Si,fi),Q(ki,Dt)&&Q(ki[Dt],Zt)&&(ki[Dt][Zt]=!1);var vn=he(1,fi);try{zi(ki,Zt,vn)}catch(Sn){if(!(Sn instanceof hi))throw Sn;zt(ki,Zt,vn)}};return D&&mt&&zi(Et,Zt,{configurable:!0,set:Ut}),_n(Zt,si)},Fe(ii=ei[gt],"toString",function(){return Qt(this).tag}),Fe(ei,"withoutSetter",function(si){return _n(ct(si),si)}),Ke.f=Ei,De.f=an,We.f=Ui,Me.f=Qi,Ie.f=Ee.f=Rn,Ne.f=Bn,dt.f=function(si){return _n(tt(si),si)},D&&(ke(ii,"description",{configurable:!0,get:function(){return Qt(this).description}}),T||Fe(Et,"propertyIsEnumerable",Ei,{unsafe:!0}))),m({global:!0,constructor:!0,wrap:!0,forced:!B,sham:!B},{Symbol:ei}),Lt(oe(Ti),function(si){pt(si)}),m({target:jt,stat:!0,forced:!B},{useSetter:function(){mt=!0},useSimple:function(){mt=!1}}),m({target:"Object",stat:!0,forced:!B,sham:!D},{create:function(si,Zt){return Zt===void 0?pe(si):Ui(pe(si),Zt)},defineProperty:an,defineProperties:Ui,getOwnPropertyDescriptor:Qi}),m({target:"Object",stat:!0,forced:!B},{getOwnPropertyNames:Rn}),ut(),Jt(ei,jt),ft[Dt]=!0},9463:function(E,F,h){var m=h(6518),u=h(3724),_=h(4576),x=h(9504),T=h(9297),D=h(4901),B=h(1625),j=h(655),Q=h(2106),ne=h(7740),te=_.Symbol,ae=te&&te.prototype;if(u&&D(te)&&(!("description"in ae)||te().description!==void 0)){var re={},de=function(){var Me=arguments.length<1||arguments[0]===void 0?void 0:j(arguments[0]),De=B(ae,this)?new te(Me):Me===void 0?te():te(Me);return Me===""&&(re[De]=!0),De};ne(de,te),de.prototype=ae,ae.constructor=de;var he=String(te("description detection"))==="Symbol(description detection)",pe=x(ae.valueOf),oe=x(ae.toString),Ie=/^Symbol\((.*)\)[^)]+$/,Ee=x("".replace),Ne=x("".slice);Q(ae,"description",{configurable:!0,get:function(){var Me=pe(this);if(T(re,Me))return"";var De=oe(Me),We=he?Ne(De,7,-1):Ee(De,Ie,"$1");return We===""?void 0:We}}),m({global:!0,constructor:!0,forced:!0},{Symbol:de})}},1510:function(E,F,h){var m=h(6518),u=h(7751),_=h(9297),x=h(655),T=h(5745),D=h(1296),B=T("string-to-symbol-registry"),j=T("symbol-to-string-registry");m({target:"Symbol",stat:!0,forced:!D},{for:function(Q){var ne=x(Q);if(_(B,ne))return B[ne];var te=u("Symbol")(ne);return B[ne]=te,j[te]=ne,te}})},2259:function(E,F,h){h(511)("iterator")},2675:function(E,F,h){h(6761),h(1510),h(7812),h(3110),h(9773)},7812:function(E,F,h){var m=h(6518),u=h(9297),_=h(757),x=h(6823),T=h(5745),D=h(1296),B=T("symbol-to-string-registry");m({target:"Symbol",stat:!0,forced:!D},{keyFor:function(j){if(!_(j))throw new TypeError(x(j)+" is not a symbol");if(u(B,j))return B[j]}})},5700:function(E,F,h){var m=h(511),u=h(8242);m("toPrimitive"),u()},1630:function(E,F,h){var m=h(9504),u=h(4644),_=m(h(7029)),x=u.aTypedArray;(0,u.exportTypedArrayMethod)("copyWithin",function(T,D){return _(x(this),T,D,arguments.length>2?arguments[2]:void 0)})},2170:function(E,F,h){var m=h(4644),u=h(9213).every,_=m.aTypedArray;(0,m.exportTypedArrayMethod)("every",function(x){return u(_(this),x,arguments.length>1?arguments[1]:void 0)})},5044:function(E,F,h){var m=h(4644),u=h(4373),_=h(5854),x=h(6955),T=h(9565),D=h(9504),B=h(9039),j=m.aTypedArray,Q=m.exportTypedArrayMethod,ne=D("".slice);Q("fill",function(te){var ae=arguments.length;j(this);var re=ne(x(this),0,3)==="Big"?_(te):+te;return T(u,this,re,ae>1?arguments[1]:void 0,ae>2?arguments[2]:void 0)},B(function(){var te=0;return new Int8Array(2).fill({valueOf:function(){return te++}}),te!==1}))},9539:function(E,F,h){var m=h(4644),u=h(9213).filter,_=h(6357),x=m.aTypedArray;(0,m.exportTypedArrayMethod)("filter",function(T){var D=u(x(this),T,arguments.length>1?arguments[1]:void 0);return _(this,D)})},9955:function(E,F,h){var m=h(4644),u=h(9213).findIndex,_=m.aTypedArray;(0,m.exportTypedArrayMethod)("findIndex",function(x){return u(_(this),x,arguments.length>1?arguments[1]:void 0)})},1694:function(E,F,h){var m=h(4644),u=h(9213).find,_=m.aTypedArray;(0,m.exportTypedArrayMethod)("find",function(x){return u(_(this),x,arguments.length>1?arguments[1]:void 0)})},3206:function(E,F,h){var m=h(4644),u=h(9213).forEach,_=m.aTypedArray;(0,m.exportTypedArrayMethod)("forEach",function(x){u(_(this),x,arguments.length>1?arguments[1]:void 0)})},4496:function(E,F,h){var m=h(4644),u=h(9617).includes,_=m.aTypedArray;(0,m.exportTypedArrayMethod)("includes",function(x){return u(_(this),x,arguments.length>1?arguments[1]:void 0)})},6651:function(E,F,h){var m=h(4644),u=h(9617).indexOf,_=m.aTypedArray;(0,m.exportTypedArrayMethod)("indexOf",function(x){return u(_(this),x,arguments.length>1?arguments[1]:void 0)})},2887:function(E,F,h){var m=h(4576),u=h(9039),_=h(9504),x=h(4644),T=h(3792),D=h(8227)("iterator"),B=m.Uint8Array,j=_(T.values),Q=_(T.keys),ne=_(T.entries),te=x.aTypedArray,ae=x.exportTypedArrayMethod,re=B&&B.prototype,de=!u(function(){re[D].call([1])}),he=!!re&&re.values&&re[D]===re.values&&re.values.name==="values",pe=function(){return j(te(this))};ae("entries",function(){return ne(te(this))},de),ae("keys",function(){return Q(te(this))},de),ae("values",pe,de||!he,{name:"values"}),ae(D,pe,de||!he,{name:"values"})},9369:function(E,F,h){var m=h(4644),u=h(9504),_=m.aTypedArray,x=m.exportTypedArrayMethod,T=u([].join);x("join",function(D){return T(_(this),D)})},6812:function(E,F,h){var m=h(4644),u=h(8745),_=h(8379),x=m.aTypedArray;(0,m.exportTypedArrayMethod)("lastIndexOf",function(T){var D=arguments.length;return u(_,x(this),D>1?[T,arguments[1]]:[T])})},8995:function(E,F,h){var m=h(4644),u=h(9213).map,_=h(1412),x=m.aTypedArray;(0,m.exportTypedArrayMethod)("map",function(T){return u(x(this),T,arguments.length>1?arguments[1]:void 0,function(D,B){return new(_(D))(B)})})},6072:function(E,F,h){var m=h(4644),u=h(926).right,_=m.aTypedArray;(0,m.exportTypedArrayMethod)("reduceRight",function(x){var T=arguments.length;return u(_(this),x,T,T>1?arguments[1]:void 0)})},1575:function(E,F,h){var m=h(4644),u=h(926).left,_=m.aTypedArray;(0,m.exportTypedArrayMethod)("reduce",function(x){var T=arguments.length;return u(_(this),x,T,T>1?arguments[1]:void 0)})},8747:function(E,F,h){var m=h(4644),u=m.aTypedArray,_=m.exportTypedArrayMethod,x=Math.floor;_("reverse",function(){for(var T,D=this,B=u(D).length,j=x(B/2),Q=0;Q<j;)T=D[Q],D[Q++]=D[--B],D[B]=T;return D})},8845:function(E,F,h){var m=h(4576),u=h(9565),_=h(4644),x=h(6198),T=h(8229),D=h(8981),B=h(9039),j=m.RangeError,Q=m.Int8Array,ne=Q&&Q.prototype,te=ne&&ne.set,ae=_.aTypedArray,re=_.exportTypedArrayMethod,de=!B(function(){var pe=new Uint8ClampedArray(2);return u(te,pe,{length:1,0:3},1),pe[1]!==3}),he=de&&_.NATIVE_ARRAY_BUFFER_VIEWS&&B(function(){var pe=new Q(2);return pe.set(1),pe.set("2",1),pe[0]!==0||pe[1]!==2});re("set",function(pe){ae(this);var oe=T(arguments.length>1?arguments[1]:void 0,1),Ie=D(pe);if(de)return u(te,this,Ie,oe);var Ee=this.length,Ne=x(Ie),Me=0;if(Ne+oe>Ee)throw new j("Wrong length");for(;Me<Ne;)this[oe+Me]=Ie[Me++]},!de||he)},9423:function(E,F,h){var m=h(4644),u=h(1412),_=h(9039),x=h(7680),T=m.aTypedArray;(0,m.exportTypedArrayMethod)("slice",function(D,B){for(var j=x(T(this),D,B),Q=u(this),ne=0,te=j.length,ae=new Q(te);te>ne;)ae[ne]=j[ne++];return ae},_(function(){new Int8Array(1).slice()}))},7301:function(E,F,h){var m=h(4644),u=h(9213).some,_=m.aTypedArray;(0,m.exportTypedArrayMethod)("some",function(x){return u(_(this),x,arguments.length>1?arguments[1]:void 0)})},373:function(E,F,h){var m=h(4576),u=h(7476),_=h(9039),x=h(9306),T=h(4488),D=h(4644),B=h(3709),j=h(3763),Q=h(9519),ne=h(3607),te=D.aTypedArray,ae=D.exportTypedArrayMethod,re=m.Uint16Array,de=re&&u(re.prototype.sort),he=!(!de||_(function(){de(new re(2),null)})&&_(function(){de(new re(2),{})})),pe=!!de&&!_(function(){if(Q)return Q<74;if(B)return B<67;if(j)return!0;if(ne)return ne<602;var oe,Ie,Ee=new re(516),Ne=Array(516);for(oe=0;oe<516;oe++)Ie=oe%4,Ee[oe]=515-oe,Ne[oe]=oe-2*Ie+3;for(de(Ee,function(Me,De){return(Me/4|0)-(De/4|0)}),oe=0;oe<516;oe++)if(Ee[oe]!==Ne[oe])return!0});ae("sort",function(oe){return oe!==void 0&&x(oe),pe?de(this,oe):T(te(this),function(Ie){return function(Ee,Ne){return Ie!==void 0?+Ie(Ee,Ne)||0:Ne!=Ne?-1:Ee!=Ee?1:Ee===0&&Ne===0?1/Ee>0&&1/Ne<0?1:-1:Ee>Ne}}(oe))},!pe||he)},6614:function(E,F,h){var m=h(4644),u=h(8014),_=h(5610),x=h(1412),T=m.aTypedArray;(0,m.exportTypedArrayMethod)("subarray",function(D,B){var j=T(this),Q=j.length,ne=_(D,Q);return new(x(j))(j.buffer,j.byteOffset+ne*j.BYTES_PER_ELEMENT,u((B===void 0?Q:_(B,Q))-ne))})},1405:function(E,F,h){var m=h(4576),u=h(8745),_=h(4644),x=h(9039),T=h(7680),D=m.Int8Array,B=_.aTypedArray,j=_.exportTypedArrayMethod,Q=[].toLocaleString,ne=!!D&&x(function(){Q.call(new D(1))});j("toLocaleString",function(){return u(Q,ne?T(B(this)):B(this),T(arguments))},x(function(){return[1,2].toLocaleString()!==new D([1,2]).toLocaleString()})||!x(function(){D.prototype.toLocaleString.call([1,2])}))},3684:function(E,F,h){var m=h(4644).exportTypedArrayMethod,u=h(9039),_=h(4576),x=h(9504),T=_.Uint8Array,D=T&&T.prototype||{},B=[].toString,j=x([].join);u(function(){B.call({})})&&(B=function(){return j(this)});var Q=D.toString!==B;m("toString",B,Q)},1489:function(E,F,h){h(5823)("Uint8",function(m){return function(u,_,x){return m(this,u,_,x)}})},3500:function(E,F,h){var m=h(4576),u=h(7400),_=h(9296),x=h(235),T=h(6699),D=function(j){if(j&&j.forEach!==x)try{T(j,"forEach",x)}catch{j.forEach=x}};for(var B in u)u[B]&&D(m[B]&&m[B].prototype);D(_)},2953:function(E,F,h){var m=h(4576),u=h(7400),_=h(9296),x=h(3792),T=h(6699),D=h(687),B=h(8227)("iterator"),j=x.values,Q=function(te,ae){if(te){if(te[B]!==j)try{T(te,B,j)}catch{te[B]=j}if(D(te,ae,!0),u[ae]){for(var re in x)if(te[re]!==x[re])try{T(te,re,x[re])}catch{te[re]=x[re]}}}};for(var ne in u)Q(m[ne]&&m[ne].prototype,ne);Q(_,"DOMTokenList")}},d={};function c(E){var F=d[E];if(F!==void 0)return F.exports;var h=d[E]={exports:{}};return o[E].call(h.exports,h,h.exports,c),h.exports}c.d=function(E,F){for(var h in F)c.o(F,h)&&!c.o(E,h)&&Object.defineProperty(E,h,{enumerable:!0,get:F[h]})},c.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),c.o=function(E,F){return Object.prototype.hasOwnProperty.call(E,F)},c.r=function(E){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})};var l={};c.r(l),c.d(l,{CanvasProvider:function(){return R},CanvasRenderer:function(){return ri},HTMLProvider:function(){return qi},HTMLRenderer:function(){return gn},SVGProvider:function(){return Ye},SVGRenderer:function(){return qt}}),c(2675),c(9463),c(2259),c(5700),c(8706),c(2008),c(3792),c(4782),c(4743),c(1745),c(9572),c(2892),c(5428),c(4601),c(5843),c(3851),c(1278),c(9432),c(6099),c(8781),c(7764),c(1489),c(1630),c(2170),c(5044),c(9539),c(1694),c(9955),c(3206),c(4496),c(6651),c(2887),c(9369),c(6812),c(8995),c(1575),c(6072),c(8747),c(8845),c(9423),c(7301),c(373),c(6614),c(1405),c(3684),c(3500),c(2953),c(3771),c(3418),c(4423),c(2010),c(6033),c(5506),c(7495),c(1699),c(8156),c(5440);var f=new Map([[0,{bytes:2,alphabet:0}],[1,{bytes:1,alphabet:1}],[2,{bytes:1,alphabet:2}],[3,{bytes:1,alphabet:3}],[4,{bytes:1,alphabet:4}],[5,{bytes:1,alphabet:5}],[6,{bytes:1,alphabet:6}],[7,{bytes:1,alphabet:7}],[8,{bytes:1,alphabet:8}],[9,{bytes:1,alphabet:9}],[10,{bytes:1,alphabet:10}],[11,{bytes:1,alphabet:11}],[12,{bytes:2,alphabet:12}],[13,{bytes:2,alphabet:13}],[14,{bytes:2,alphabet:14}]]),p=new Map([[66,{bytes:2,alphabet:0}],[74,{bytes:1,alphabet:1}],[48,{bytes:1,alphabet:2}],[49,{bytes:1,alphabet:3}],[50,{bytes:1,alphabet:4}],[51,{bytes:1,alphabet:5}],[52,{bytes:1,alphabet:6}],[53,{bytes:1,alphabet:7}],[54,{bytes:1,alphabet:8}],[55,{bytes:1,alphabet:9}],[56,{bytes:1,alphabet:10}],[73,{bytes:1,alphabet:11}],[57,{bytes:2,alphabet:12}],[58,{bytes:2,alphabet:13}],[59,{bytes:2,alphabet:14}]]),g=new Map([[15,{bytes:2,alphabet:15}],[16,{bytes:1,alphabet:16}],[17,{bytes:1,alphabet:17}],[18,{bytes:1,alphabet:18}],[19,{bytes:1,alphabet:19}],[20,{bytes:1,alphabet:20}],[21,{bytes:1,alphabet:21}],[22,{bytes:1,alphabet:22}],[23,{bytes:1,alphabet:23}],[24,{bytes:1,alphabet:24}],[25,{bytes:1,alphabet:25}],[26,{bytes:1,alphabet:26}],[27,{bytes:1,alphabet:27}],[28,{bytes:1,alphabet:28}],[29,{bytes:1,alphabet:29}],[30,{bytes:1,alphabet:30}],[31,{bytes:1,alphabet:31}]]),y=new Map([[64,{bytes:2,alphabet:15}],[65,{bytes:1,alphabet:16}],[66,{bytes:1,alphabet:17}],[67,{bytes:1,alphabet:18}],[68,{bytes:1,alphabet:19}],[69,{bytes:1,alphabet:20}],[70,{bytes:1,alphabet:21}],[71,{bytes:1,alphabet:22}],[72,{bytes:1,alphabet:23}],[73,{bytes:1,alphabet:24}],[74,{bytes:1,alphabet:25}],[75,{bytes:1,alphabet:26}],[76,{bytes:1,alphabet:27}],[77,{bytes:1,alphabet:28}],[78,{bytes:1,alphabet:29}],[79,{bytes:1,alphabet:30}],[112,{bytes:1,alphabet:31}]]),A=[["#000000FF","#FF0000FF","#00FF00FF","#FFFF00FF","#0000FFFF","#FF00FFFF","#00FFFFFF","#FFFFFFFF","#00000000","#AA0000FF","#00AA00FF","#AAAA00FF","#0000AAFF","#AA00AAFF","#00AAAAFF","#AAAAAAFF"],["#000055FF","#005500FF","#005555FF","#0055AAFF","#0055FFFF","#00AA55FF","#00AAFFFF","#00FF55FF","#00FFAAFF","#550000FF","#550055FF","#5500AAFF","#5500FFFF","#555500FF","#555555FF","#5555AAFF"],["#5555FFFF","#55AA00FF","#55AA55FF","#55AAAAFF","#55AAFFFF","#55FF00FF","#55FF55FF","#55FFAAFF","#55FFFFFF","#AA0055FF","#AA00FFFF","#AA5500FF","#AA5555FF","#AA55AAFF","#AA55FFFF","#AAAA55FF"],["#AAAAFFFF","#AAFF00FF","#AAFF55FF","#AAFFAAFF","#AAFFFFFF","#FF0055FF","#FF00AAFF","#FF5500FF","#FF5555FF","#FF55AAFF","#FF55FFFF","#FFAA00FF","#FFAA55FF","#FFAAAAFF","#FFAAFFFF","#FFFF55FF"],["#FFFFAAFF","#00000080","#FF000080","#00FF0080","#FFFF0080","#0000FF80","#FF00FF80","#00FFFF80","#FFFFFF80","#AA000080","#00AA0080","#AAAA0080","#0000AA80","#AA00AA80","#00AAAA80","#AAAAAA80"],["#00005580","#00550080","#00555580","#0055AA80","#0055FF80","#00AA5580","#00AAFF80","#00FF5580","#00FFAA80","#55000080","#55005580","#5500AA80","#5500FF80","#55550080","#55555580","#5555AA80"],["#5555FF80","#55AA0080","#55AA5580","#55AAAA80","#55AAFF80","#55FF0080","#55FF5580","#55FFAA80","#55FFFF80","#AA005580","#AA00FF80","#AA550080","#AA555580","#AA55AA80","#AA55FF80","#AAAA5580"],["#AAAAFF80","#AAFF0080","#AAFF5580","#AAFFAA80","#AAFFFF80","#FF005580","#FF00AA80","#FF550080","#FF555580","#FF55AA80","#FF55FF80","#FFAA0080","#FFAA5580","#FFAAAA80","#FFAAFF80","#FFFF5580"]],C=["„ÄÄ","„ÄÅ","„ÄÇ","Ôºå","Ôºé","„Éª","Ôºö","Ôºõ","Ôºü","ÔºÅ","„Çõ","„Çú","¬¥","ÔΩÄ","¬®","Ôºæ","Ôø£","Ôºø","„ÉΩ","„Éæ","„Çù","„Çû","„ÄÉ","‰ªù","„ÄÖ","„ÄÜ","„Äá","„Éº","‚Äï","‚Äê","Ôºè","Ôºº","„Äú","‚Äñ","ÔΩú","‚Ä¶","‚Ä•","‚Äò","‚Äô","‚Äú","‚Äù","Ôºà","Ôºâ","„Äî","„Äï","Ôºª","ÔºΩ","ÔΩõ","ÔΩù","„Äà","„Äâ","„Ää","„Äã","„Äå","„Äç","„Äé","„Äè","„Äê","„Äë","Ôºã","‚àí","¬±","√ó","√∑","Ôºù","‚â†","Ôºú","Ôºû","‚â¶","‚âß","‚àû","‚à¥","‚ôÇ","‚ôÄ","¬∞","‚Ä≤","‚Ä≥","‚ÑÉ","Ôø•","ÔºÑ","¬¢","¬£","ÔºÖ","ÔºÉ","ÔºÜ","Ôºä","Ôº†","¬ß","‚òÜ","‚òÖ","‚óã","‚óè","‚óé","‚óá","‚óÜ","‚ñ°","‚ñ†","‚ñ≥","‚ñ≤","‚ñΩ","‚ñº","‚Äª","„Äí","‚Üí","‚Üê","‚Üë","‚Üì","„Äì","Ôºá","ÔºÇ","Ôºç","ÔΩû","„Ä≥","„Ä¥","„Äµ","„Äª","„Äº","„Éø","„Çü","‚àà","‚àã","‚äÜ","‚äá","‚äÇ","‚äÉ","‚à™","‚à©","‚äÑ","‚äÖ","‚ää","‚äã","‚àâ","‚àÖ","‚åÖ","‚åÜ","‚àß","‚à®","¬¨","‚áí","‚áî","‚àÄ","‚àÉ","‚äï","‚äñ","‚äó","‚à•","‚à¶","‚¶Ö","‚¶Ü","„Äò","„Äô","„Äñ","„Äó","‚à†","‚ä•","‚åí","‚àÇ","‚àá","‚â°","‚âí","‚â™","‚â´","‚àö","‚àΩ","‚àù","‚àµ","‚à´","‚à¨","‚â¢","‚âÉ","‚âÖ","‚âà","‚â∂","‚â∑","‚Üî","‚Ñ´","‚Ä∞","‚ôØ","‚ô≠","‚ô™","‚Ä†","‚Ä°","¬∂","‚ôÆ","‚ô´","‚ô¨","‚ô©","‚óØ","‚ñ∑","‚ñ∂","‚óÅ","‚óÄ","‚Üó","‚Üò","‚Üñ","‚Üô","‚áÑ","‚á®","‚á¶","‚áß","‚á©","‚§¥","‚§µ","Ôºê","Ôºë","Ôºí","Ôºì","Ôºî","Ôºï","Ôºñ","Ôºó","Ôºò","Ôºô","‚¶ø","‚óâ","„ÄΩ","ÔπÜ","ÔπÖ","‚ó¶","‚Ä¢","Ôº°","Ôº¢","Ôº£","Ôº§","Ôº•","Ôº¶","Ôºß","Ôº®","Ôº©","Ôº™","Ôº´","Ôº¨","Ôº≠","ÔºÆ","ÔºØ","Ôº∞","Ôº±","Ôº≤","Ôº≥","Ôº¥","Ôºµ","Ôº∂","Ôº∑","Ôº∏","Ôºπ","Ôº∫","‚àì","‚Ñµ","‚Ñè","„èã","‚Ñì","‚Ñß","ÔΩÅ","ÔΩÇ","ÔΩÉ","ÔΩÑ","ÔΩÖ","ÔΩÜ","ÔΩá","ÔΩà","ÔΩâ","ÔΩä","ÔΩã","ÔΩå","ÔΩç","ÔΩé","ÔΩè","ÔΩê","ÔΩë","ÔΩí","ÔΩì","ÔΩî","ÔΩï","ÔΩñ","ÔΩó","ÔΩò","ÔΩô","ÔΩö","„Ç†","‚Äì","‚ß∫","‚ßª","„ÅÅ","„ÅÇ","„ÅÉ","„ÅÑ","„ÅÖ","„ÅÜ","„Åá","„Åà","„Åâ","„Åä","„Åã","„Åå","„Åç","„Åé","„Åè","„Åê","„Åë","„Åí","„Åì","„Åî","„Åï","„Åñ","„Åó","„Åò","„Åô","„Åö","„Åõ","„Åú","„Åù","„Åû","„Åü","„Å†","„Å°","„Å¢","„Å£","„Å§","„Å•","„Å¶","„Åß","„Å®","„Å©","„Å™","„Å´","„Å¨","„Å≠","„ÅÆ","„ÅØ","„Å∞","„Å±","„Å≤","„Å≥","„Å¥","„Åµ","„Å∂","„Å∑","„Å∏","„Åπ","„Å∫","„Åª","„Åº","„ÅΩ","„Åæ","„Åø","„ÇÄ","„ÇÅ","„ÇÇ","„ÇÉ","„ÇÑ","„ÇÖ","„ÇÜ","„Çá","„Çà","„Çâ","„Çä","„Çã","„Çå","„Çç","„Çé","„Çè","„Çê","„Çë","„Çí","„Çì","„Çî","„Çï","„Çñ","„Åã„Çö","„Åç„Çö","„Åè„Çö","„Åë„Çö","„Åì„Çö","","","","„Ç°","„Ç¢","„Ç£","„Ç§","„Ç•","„Ç¶","„Çß","„Ç®","„Ç©","„Ç™","„Ç´","„Ç¨","„Ç≠","„ÇÆ","„ÇØ","„Ç∞","„Ç±","„Ç≤","„Ç≥","„Ç¥","„Çµ","„Ç∂","„Ç∑","„Ç∏","„Çπ","„Ç∫","„Çª","„Çº","„ÇΩ","„Çæ","„Çø","„ÉÄ","„ÉÅ","„ÉÇ","„ÉÉ","„ÉÑ","„ÉÖ","„ÉÜ","„Éá","„Éà","„Éâ","„Éä","„Éã","„Éå","„Éç","„Éé","„Éè","„Éê","„Éë","„Éí","„Éì","„Éî","„Éï","„Éñ","„Éó","„Éò","„Éô","„Éö","„Éõ","„Éú","„Éù","„Éû","„Éü","„É†","„É°","„É¢","„É£","„É§","„É•","„É¶","„Éß","„É®","„É©","„É™","„É´","„É¨","„É≠","„ÉÆ","„ÉØ","„É∞","„É±","„É≤","„É≥","„É¥","„Éµ","„É∂","„Ç´„Çö","„Ç≠„Çö","„ÇØ„Çö","„Ç±„Çö","„Ç≥„Çö","„Çª„Çö","„ÉÑ„Çö","„Éà„Çö","Œë","Œí","Œì","Œî","Œï","Œñ","Œó","Œò","Œô","Œö","Œõ","Œú","Œù","Œû","Œü","Œ†","Œ°","Œ£","Œ§","Œ•","Œ¶","Œß","Œ®","Œ©","‚ô§","‚ô†","‚ô¢","‚ô¶","‚ô°","‚ô•","‚ôß","‚ô£","Œ±","Œ≤","Œ≥","Œ¥","Œµ","Œ∂","Œ∑","Œ∏","Œπ","Œ∫","Œª","Œº","ŒΩ","Œæ","Œø","œÄ","œÅ","œÉ","œÑ","œÖ","œÜ","œá","œà","œâ","œÇ","‚ìµ","‚ì∂","‚ì∑","‚ì∏","‚ìπ","‚ì∫","‚ìª","‚ìº","‚ìΩ","‚ìæ","‚òñ","‚òó","„Ä†","‚òé","‚òÄ","‚òÅ","‚òÇ","‚òÉ","‚ô®","‚ñ±","„á∞","„á±","„á≤","„á≥","„á¥","„áµ","„á∂","„á∑","„á∏","„áπ","„á∑„Çö","„á∫","„áª","„áº","„áΩ","„áæ","„áø","–ê","–ë","–í","–ì","–î","–ï","–Å","–ñ","–ó","–ò","–ô","–ö","–õ","–ú","–ù","–û","–ü","–†","–°","–¢","–£","–§","–•","–¶","–ß","–®","–©","–™","–´","–¨","–≠","–Æ","–Ø","‚éæ","‚éø","‚èÄ","‚èÅ","‚èÇ","‚èÉ","‚èÑ","‚èÖ","‚èÜ","‚èá","‚èà","‚èâ","‚èä","‚èã","‚èå","–∞","–±","–≤","–≥","–¥","–µ","—ë","–∂","–∑","–∏","–π","–∫","–ª","–º","–Ω","–æ","–ø","—Ä","—Å","—Ç","—É","—Ñ","—Ö","—Ü","—á","—à","—â","—ä","—ã","—å","—ç","—é","—è","„É∑","„É∏","„Éπ","„É∫","‚ãö","‚ãõ","‚Öì","‚Öî","‚Öï","‚úì","‚åò","‚ê£","‚èé","‚îÄ","‚îÇ","‚îå","‚îê","‚îò","‚îî","‚îú","‚î¨","‚î§","‚î¥","‚îº","‚îÅ","‚îÉ","‚îè","‚îì","‚îõ","‚îó","‚î£","‚î≥","‚î´","‚îª","‚ïã","‚î†","‚îØ","‚î®","‚î∑","‚îø","‚îù","‚î∞","‚î•","‚î∏","‚ïÇ","„âë","„âí","„âì","„âî","„âï","„âñ","„âó","„âò","„âô","„âö","„âõ","„âú","„âù","„âû","„âü","„ä±","„ä≤","„ä≥","„ä¥","„äµ","„ä∂","„ä∑","„ä∏","„äπ","„ä∫","„äª","„äº","„äΩ","„äæ","„äø","","","","","","","","","‚óê","‚óë","‚óí","‚óì","‚Äº","‚Åá","‚Åà","‚Åâ","«ç","«é","«ê","·∏æ","·∏ø","«∏","«π","«ë","«í","«î","«ñ","«ò","«ö","«ú","","","‚Ç¨","¬†","¬°","¬§","¬¶","¬©","¬™","¬´","¬≠","¬Æ","¬Ø","¬≤","¬≥","¬∑","¬∏","¬π","¬∫","¬ª","¬º","¬Ω","¬æ","¬ø","√Ä","√Å","√Ç","√É","√Ñ","√Ö","√Ü","√á","√à","√â","√ä","√ã","√å","√ç","√é","√è","√ê","√ë","√í","√ì","√î","√ï","√ñ","√ò","√ô","√ö","√õ","√ú","√ù","√û","√ü","√†","√°","√¢","√£","√§","√•","√¶","√ß","√®","√©","√™","√´","√¨","√≠","√Æ","√Ø","√∞","√±","√≤","√≥","√¥","√µ","√∂","√∏","√π","√∫","√ª","√º","√Ω","√æ","√ø","ƒÄ","ƒ™","≈™","ƒí","≈å","ƒÅ","ƒ´","≈´","ƒì","≈ç","ƒÑ","Àò","≈Å","ƒΩ","≈ö","≈†","≈û","≈§","≈π","≈Ω","≈ª","ƒÖ","Àõ","≈Ç","ƒæ","≈õ","Àá","≈°","≈ü","≈•","≈∫","Àù","≈æ","≈º","≈î","ƒÇ","ƒπ","ƒÜ","ƒå","ƒò","ƒö","ƒé","≈É","≈á","≈ê","≈ò","≈Æ","≈∞","≈¢","≈ï","ƒÉ","ƒ∫","ƒá","ƒç","ƒô","ƒõ","ƒè","ƒë","≈Ñ","≈à","≈ë","≈ô","≈Ø","≈±","≈£","Àô","ƒà","ƒú","ƒ§","ƒ¥","≈ú","≈¨","ƒâ","ƒù","ƒ•","ƒµ","≈ù","≈≠","…±"," ã","…æ"," É"," í","…¨","…Æ","…π"," à","…ñ","…≥","…Ω"," Ç"," ê","…ª","…≠","…ü","…≤"," ù"," é","…°","≈ã","…∞"," Å","ƒß"," ï"," î","…¶"," ò","«Ç","…ì","…ó"," Ñ","…†","∆ì","≈ì","≈í","…®"," â","…ò","…µ","…ô","…ú","…û","…ê","…Ø"," ä","…§"," å","…î","…ë","…í"," ç","…•"," ¢"," °","…ï"," ë","…∫","…ß","…ö","√¶ÃÄ","«Ω","·Ω∞","·Ω±","…îÃÄ","…îÃÅ"," åÃÄ"," åÃÅ","…ôÃÄ","…ôÃÅ","…öÃÄ","…öÃÅ","·Ω≤","·Ω≥","Õ°","Àà","Àå","Àê","Àë","ÃÜ","‚Äø","Ãã","ÃÅ","ÃÑ","ÃÄ","Ãè","Ãå","ÃÇ","À•","À¶","Àß","À®","À©","À©À•","À•À©","Ã•","Ã¨","Ãπ","Ãú","Ãü","Ã†","Ãà","ÃΩ","Ã©","ÃØ","Àû","Ã§","Ã∞","Ãº","Ã¥","Ãù","Ãû","Ãò","Ãô","Ã™","Ã∫","Ãª","ÃÉ","Ãö","‚ù∂","‚ù∑","‚ù∏","‚ùπ","‚ù∫","‚ùª","‚ùº","‚ùΩ","‚ùæ","‚ùø","‚ì´","‚ì¨","‚ì≠","‚ìÆ","‚ìØ","‚ì∞","‚ì±","‚ì≤","‚ì≥","‚ì¥","‚Ö∞","‚Ö±","‚Ö≤","‚Ö≥","‚Ö¥","‚Öµ","‚Ö∂","‚Ö∑","‚Ö∏","‚Öπ","‚Ö∫","‚Öª","‚ìê","‚ìë","‚ìí","‚ìì","‚ìî","‚ìï","‚ìñ","‚ìó","‚ìò","‚ìô","‚ìö","‚ìõ","‚ìú","‚ìù","‚ìû","‚ìü","‚ì†","‚ì°","‚ì¢","‚ì£","‚ì§","‚ì•","‚ì¶","‚ìß","‚ì®","‚ì©","„ãê","„ãë","„ãí","„ãì","„ãî","„ãï","„ãñ","„ãó","„ãò","„ãô","„ãö","„ãõ","„ãú","„ãù","„ãû","„ãü","„ã†","„ã°","„ã¢","„ã£","„ã∫","„ã©","„ã•","„ã≠","„ã¨","","","","","","","","","","‚Åë","‚ÅÇ","‚ë†","‚ë°","‚ë¢","‚ë£","‚ë§","‚ë•","‚ë¶","‚ëß","‚ë®","‚ë©","‚ë™","‚ë´","‚ë¨","‚ë≠","‚ëÆ","‚ëØ","‚ë∞","‚ë±","‚ë≤","‚ë≥","‚Ö†","‚Ö°","‚Ö¢","‚Ö£","‚Ö§","‚Ö•","‚Ö¶","‚Öß","‚Ö®","‚Ö©","‚Ö™","„çâ","„åî","„å¢","„çç","„åò","„åß","„åÉ","„å∂","„çë","„çó","„åç","„å¶","„å£","„å´","„çä","„åª","„éú","„éù","„éû","„éé","„éè","„èÑ","„é°","‚Ö´","","","","","","","","„çª","„Äù","„Äü","‚Ññ","„èç","‚Ñ°","„ä§","„ä•","„ä¶","„äß","„ä®","„à±","„à≤","„àπ","„çæ","„çΩ","„çº","","","","‚àÆ","","","","","‚àü","‚äø","","","","‚ùñ","‚òû","‰ø±","†Äã","„êÇ","‰∏®","‰∏Ø","‰∏∞","‰∫ç","‰ª°","‰ªΩ","‰ªø","‰ºÉ","‰ºã","‰Ω†","‰Ωà","‰Ωâ","‰Ωñ","‰Ωü","‰Ω™","‰Ω¨","‰Ωæ","‰æä","‰æî","‰æó","Ô®∞","‰øâ","‰ø†","ÂÄÅ","ÂÄÇ","ÂÄé","ÂÄò","ÂÄß","ÂÄÆ","ÂÅÄ","ÂÄª","ÂÅÅ","ÂÇî","ÂÉå","ÂÉ≤","ÂÉê","ÂÉ¶","Ô®±","ÂÑÜ","ÂÑÉ","ÂÑã","ÂÑû","ÂÑµ","ÂÖä","Ô®≤","ÂÖï","ÂÖó","„íµ","ÂÜù","ÂáÉ","Âáä","Âáû","Âá¢","ÂáÆ","ÂàÅ","„ìõ","Âàì","Âàï","Âââ","Ââó","Ââ°","Âäì","Âãà","Ô®≥","Âãå","Âãê","Âãñ","Âãõ","Ô®¥","Âã∞","Âãª","ÂåÄ","Âåá","Âåú","Ô®µ","Âç°","Âç£","ÂçΩ","Âéì","Âéù","Âé≤","Âêí","Âêß","Âëç","Âíú","Âë´","Âë¥","Âëø","Âíà","Âíñ","Âí°","Âí©","ÂìÜ","Âìø","Âîé","Âî´","Âîµ","Âïê","Âïû","ÂñÅ","ÂñÜ","Âñé","Ô®∂","Âñ≠","Âóé","Ô®∑","Âòà","Âòé","Âòª","Âôâ","Âô∂","Âô¶","Ô®∏","ÂôØ","Âô±","Âô≤","Âöô","Âöû","Âö©","Âö¨","Âö≥","Âõâ","Âõä","Âúä","°àΩ","Âú°","ÂúØ","Âú≥","Âú¥","Âù∞","Âù∑","Âùº","Âûú","Ô®è","°åõ","Âû∏","Âüá","Âüà","Âüè","Âü§","Âü≠","Âüµ","Âü∂","Âüø","Â†â","Ô®ê","Â°°","Â°§","Ô®π","Â°º","Â¢â","Â¢û","Ô®∫","Â¢©","°ëÆ","Â£í","Â£é","Â£î","Â£ö","Â£†","Â£©","Â§å","ËôÅ","Â•ù","Â•≠","Â¶ã","Â¶í","Â¶§","ÂßÉ","Âßí","Âßù","Â®ì","Â®£","Â©ß","Â©≠","Â©∑","Â©æ","Â™Ñ","Â™û","Â™ß","Â´Ñ","°¢Ω","Â¨ô","Â¨•","Ââù","‰∫ú","Âîñ","Â®É","Èòø","ÂìÄ","ÊÑõ","Êå®","Âß∂","ÈÄ¢","Ëëµ","Ëåú","Á©ê","ÊÇ™","Êè°","Ê∏•","Êó≠","Ëë¶","Ëä¶","ÈØµ","Ê¢ì","Âúß","Êñ°","Êâ±","ÂÆõ","Âßê","Ëôª","È£¥","Áµ¢","Á∂æ","ÈÆé","Êàñ","Á≤ü","Ë¢∑","ÂÆâ","Â∫µ","Êåâ","Êöó","Ê°à","Èóá","Èûç","Êùè","‰ª•","‰ºä","‰Ωç","‰æù","ÂÅâ","Âõ≤","Â§∑","Âßî","Â®Å","Â∞â","ÊÉü","ÊÑè","ÊÖ∞","Êòì","Ê§Ö","ÁÇ∫","Áïè","Áï∞","Áßª","Á∂≠","Á∑Ø","ËÉÉ","Ëêé","Ë°£","Ë¨Ç","ÈÅï","ÈÅ∫","Âåª","‰∫ï","‰∫•","Âüü","ËÇ≤","ÈÉÅ","Á£Ø","‰∏Ä","Â£±","Ê∫¢","ÈÄ∏","Á®≤","Ëå®","Ëäã","È∞Ø","ÂÖÅ","Âç∞","ÂíΩ","Âì°","Âõ†","Âßª","Âºï","È£≤","Ê∑´","ËÉ§","Ëî≠","Èô¢","Èô∞","Èö†","Èüª","Âêã","Âè≥","ÂÆá","ÁÉè","ÁæΩ","ËøÇ","Èõ®","ÂçØ","Èµú","Á™∫","‰∏ë","Á¢ì","Ëáº","Ê∏¶","Âòò","ÂîÑ","Ê¨ù","Ëîö","È∞ª","Âß•","Âé©","Êµ¶","Áìú","Èñè","ÂôÇ","‰∫ë","ÈÅã","Èõ≤","Ëçè","È§å","Âè°","Âñ∂","Â¨∞","ÂΩ±","Êò†","Êõ≥","Ê†Ñ","Ê∞∏","Ê≥≥","Ê¥©","Áëõ","Áõà","Á©é","È†¥","Ëã±","Ë°õ","Ë©†","Èã≠","Ê∂≤","Áñ´","Áõä","ÈßÖ","ÊÇ¶","Ë¨Å","Ë∂ä","Èñ≤","Ê¶é","Âé≠","ÂÜÜ","Âúí","Â†∞","Â•Ñ","ÂÆ¥","Âª∂","ÊÄ®","Êé©","Êè¥","Ê≤ø","Êºî","ÁÇé","ÁÑî","ÁÖô","Ááï","Áåø","Á∏Å","Ëâ∂","Ëãë","Ëñó","ÈÅ†","Èâõ","È¥õ","Â°©","Êñº","Ê±ö","Áî•","Âáπ","Â§Æ","Â••","ÂæÄ","Âøú","Êäº","Êó∫","Ê®™","Ê¨ß","ÊÆ¥","Áéã","ÁøÅ","Ë•ñ","È¥¨","È¥é","ÈªÑ","Â≤°","Ê≤ñ","Ëçª","ÂÑÑ","Â±ã","ÊÜ∂","ËáÜ","Ê°∂","Áâ°","‰πô","‰ø∫","Âç∏","ÊÅ©","Ê∏©","Á©è","Èü≥","‰∏ã","Âåñ","‰ªÆ","‰Ωï","‰ºΩ","‰æ°","‰Ω≥","Âä†","ÂèØ","Âòâ","Â§è","Â´Å","ÂÆ∂","ÂØ°","Áßë","Êöá","Êûú","Êû∂","Ê≠å","Ê≤≥","ÁÅ´","ÁèÇ","Á¶ç","Á¶æ","Á®º","ÁÆá","Ëä±","Ëãõ","ËåÑ","Ëç∑","ËèØ","Ëèì","Ëù¶","Ë™≤","Âò©","Ë≤®","Ëø¶","ÈÅé","Èúû","Ëöä","‰øÑ","Â≥®","Êàë","Áâô","Áîª","Ëá•","ËäΩ","Ëõæ","Ë≥Ä","ÈõÖ","È§ì","Èßï","‰ªã","‰ºö","Ëß£","Âõû","Â°ä","Â£ä","Âªª","Âø´","ÊÄ™","ÊÇî","ÊÅ¢","Êáê","Êàí","Êãê","Êîπ","È≠Å","Êô¶","Ê¢∞","Êµ∑","ÁÅ∞","Áïå","ÁöÜ","Áµµ","Ëä•","Ëüπ","Èñã","Èöé","Ë≤ù","Âá±","Âäæ","Â§ñ","Âí≥","ÂÆ≥","Â¥ñ","ÊÖ®","Ê¶Ç","Ê∂Ø","Á¢ç","Ëìã","Ë°ó","Ë©≤","Èéß","È™∏","Êµ¨","È¶®","Ëõô","Âû£","Êüø","Ëõé","Èàé","ÂäÉ","Âöá","ÂêÑ","Âªì","Êã°","Êíπ","Ê†º","Ê†∏","ÊÆª","Áç≤","Á¢∫","Á©´","Ë¶ö","Ëßí","Ëµ´","ËºÉ","ÈÉ≠","Èñ£","Èöî","Èù©","Â≠¶","Â≤≥","Ê•Ω","È°ç","È°é","Êéõ","Á¨†","Ê®´","Ê©ø","Ê¢∂","È∞ç","ÊΩü","Ââ≤","Âñù","ÊÅ∞","Êã¨","Ê¥ª","Ê∏á","Êªë","Ëëõ","Ë§ê","ËΩÑ","‰∏î","È∞π","Âè∂","Ê§õ","Ê®∫","ÈûÑ","Ê†™","ÂÖú","Á´É","Ëí≤","Èáú","Èéå","Âôõ","È¥®","Ê†¢","ËåÖ","Ëê±","Á≤•","Âàà","ËãÖ","Áì¶","‰πæ","‰æÉ","ÂÜ†","ÂØí","Âàä","Âãò","Âãß","Â∑ª","Âñö","Â†™","Âß¶","ÂÆå","ÂÆò","ÂØõ","Âπ≤","Âππ","ÊÇ£","ÊÑü","ÊÖ£","ÊÜæ","Êèõ","Êï¢","Êüë","Ê°ì","Ê£∫","Ê¨æ","Ê≠ì","Ê±ó","Êº¢","Êæó","ÊΩÖ","Áí∞","Áîò","Áõ£","Áúã","Á´ø","ÁÆ°","Á∞°","Á∑©","Áº∂","Áø∞","ËÇù","Ëâ¶","Ëéû","Ë¶≥","Ë´å","Ë≤´","ÈÇÑ","Èëë","Èñì","Èñë","Èñ¢","Èô•","Èüì","È§®","Ëàò","‰∏∏","Âê´","Â≤∏","Â∑å","Áé©","Áôå","Áúº","Â≤©","Áø´","Ë¥ã","ÈõÅ","È†ë","È°î","È°ò","‰ºÅ","‰ºé","Âç±","Âñú","Âô®","Âü∫","Â•á","Â¨â","ÂØÑ","Â≤ê","Â∏å","Âπæ","Âøå","ÊèÆ","Êú∫","Êóó","Êó¢","Êúü","Ê£ã","Ê£Ñ","Ê©ü","Â∏∞","ÊØÖ","Ê∞ó","Ê±Ω","Áïø","Á•à","Â≠£","Á®Ä","Á¥Ä","ÂæΩ","Ë¶è","Ë®ò","Ë≤¥","Ëµ∑","Ëªå","Ëºù","È£¢","È®é","È¨º","‰∫Ä","ÂÅΩ","ÂÑÄ","Â¶ì","ÂÆú","ÊàØ","ÊäÄ","Êì¨","Ê¨∫","Áä†","Áñë","Á•á","Áæ©","Ëüª","Ë™º","Ë≠∞","Êé¨","Ëèä","Èû†","Âêâ","ÂêÉ","Âñ´","Ê°î","Ê©ò","Ë©∞","Á†ß","Êùµ","Èªç","Âç¥","ÂÆ¢","ËÑö","Ëôê","ÈÄÜ","‰∏ò","‰πÖ","‰ªá","‰ºë","Âèä","Âê∏","ÂÆÆ","Âºì","ÊÄ•","Êïë","ÊúΩ","Ê±Ç","Ê±≤","Ê≥£","ÁÅ∏","ÁêÉ","Á©∂","Á™Æ","Á¨à","Á¥ö","Á≥æ","Áµ¶","Êóß","Áâõ","Âéª","Â±Ö","Â∑®","Êãí","Êã†","Êåô","Ê∏†","Ëôö","Ë®±","Ë∑ù","Èã∏","ÊºÅ","Á¶¶","È≠ö","‰∫®","‰∫´","‰∫¨","‰æõ","‰æ†","ÂÉë","ÂÖá","Á´∂","ÂÖ±","Âá∂","Âçî","Âå°","Âçø","Âè´","Âñ¨","Â¢É","Â≥°","Âº∑","ÂΩä","ÊÄØ","ÊÅê","ÊÅ≠","Êåü","Êïô","Ê©ã","Ê≥Å","ÁãÇ","Áã≠","ÁüØ","ËÉ∏","ËÑÖ","Ëàà","Ëïé","ÈÉ∑","Èè°","Èüø","È•ó","È©ö","‰ª∞","Âáù","Â∞≠","ÊöÅ","Ê•≠","Â±Ä","Êõ≤","Ê•µ","Áéâ","Ê°ê","Á≤Å","ÂÉÖ","Âã§","Âùá","Â∑æ","Èå¶","Êñ§","Ê¨£","Ê¨Ω","Áê¥","Á¶Å","Á¶Ω","Á≠ã","Á∑ä","Ëäπ","Ëèå","Ë°ø","Ë•ü","Ë¨π","Ëøë","Èáë","Âêü","ÈäÄ","‰πù","ÂÄ∂","Âè•","Âå∫","Áãó","Áéñ","Áü©","Ëã¶","Ë∫Ø","ÈßÜ","Èßà","Èßí","ÂÖ∑","ÊÑö","Ëôû","Âñ∞","Á©∫","ÂÅ∂","ÂØì","ÈÅá","ÈöÖ","‰∏≤","Ê´õ","Èáß","Â±ë","Â±à","Êéò","Á™ü","Ê≤ì","Èù¥","ËΩ°","Á™™","ÁÜä","Èöà","Á≤Ç","Ê†ó","Áπ∞","Ê°ë","Èç¨","Âã≤","Âêõ","Ëñ´","Ë®ì","Áæ§","Ëªç","ÈÉ°","Âç¶","Ë¢à","Á•Å","‰øÇ","ÂÇæ","Âàë","ÂÖÑ","Âïì","Âú≠","Áè™","Âûã","Â•ë","ÂΩ¢","ÂæÑ","ÊÅµ","ÊÖ∂","ÊÖß","ÊÜ©","Êé≤","Êê∫","Êï¨","ÊôØ","Ê°Ç","Ê∏ì","Áï¶","Á®Ω","Á≥ª","Áµå","Á∂ô","Áπã","ÁΩ´","Ëåé","Ëçä","Ëõç","Ë®à","Ë©£","Ë≠¶","ËªΩ","È†ö","È∂è","Ëä∏","Ëøé","ÈØ®","Âäá","Êàü","ÊíÉ","ÊøÄ","Èöô","Ê°Å","ÂÇë","Ê¨†","Ê±∫","ÊΩî","Á©¥","Áµê","Ë°Ä","Ë®£","Êúà","‰ª∂","ÂÄπ","ÂÄ¶","ÂÅ•","ÂÖº","Âà∏","Ââ£","Âñß","Âúè","Â†Ö","Â´å","Âª∫","ÊÜ≤","Êá∏","Êã≥","Êç≤","Ê§ú","Ê®©","ÁâΩ","Áä¨","ÁåÆ","Á†î","Á°Ø","Áµπ","Áúå","ËÇ©","Ë¶ã","Ë¨ô","Ë≥¢","Ëªí","ÈÅ£","Èçµ","Èô∫","È°ï","È®ì","Èπ∏","ÂÖÉ","Âéü","Âé≥","Âπª","Âº¶","Ê∏õ","Ê∫ê","ÁéÑ","Áèæ","ÁµÉ","Ëà∑","Ë®Ä","Ë´∫","Èôê","‰πé","ÂÄã","Âè§","Âëº","Âõ∫","Âßë","Â≠§","Â∑±","Â∫´","Âºß","Êà∏","ÊïÖ","ÊûØ","Êπñ","Áãê","Á≥ä","Ë¢¥","ËÇ°","ËÉ°","Ëè∞","Ëôé","Ë™á","Ë∑®","Èà∑","Èõá","È°ß","Èºì","‰∫î","‰∫í","‰ºç","Âçà","Âëâ","Âêæ","Â®Ø","Âæå","Âæ°","ÊÇü","Ê¢ß","Ê™é","Áëö","Á¢Å","Ë™û","Ë™§","Ë≠∑","ÈÜê","‰πû","ÈØâ","‰∫§","‰Ωº","‰æØ","ÂÄô","ÂÄñ","ÂÖâ","ÂÖ¨","Âäü","Âäπ","Âãæ","Âéö","Âè£","Âêë","Âêé","Âñâ","Âùë","Âû¢","Â•Ω","Â≠î","Â≠ù","ÂÆè","Â∑•","Â∑ß","Â∑∑","Âπ∏","Â∫É","Â∫ö","Â∫∑","Âºò","ÊÅí","ÊÖå","Êäó","Êãò","Êéß","Êîª","ÊòÇ","ÊôÉ","Êõ¥","Êù≠","Ê†°","Ê¢ó","Êßã","Ê±ü","Ê¥™","Êµ©","Ê∏Ø","Ê∫ù","Áî≤","Áöá","Á°¨","Á®ø","Á≥†","Á¥Ö","Á¥ò","Áµû","Á∂±","ËÄï","ËÄÉ","ËÇØ","ËÇ±","ËÖî","ËÜè","Ëà™","Ëçí","Ë°å","Ë°°","Ë¨õ","Ë≤¢","Ë≥º","ÈÉä","ÈÖµ","Èâ±","Á†ø","Èãº","Èñ§","Èôç","È†Ö","È¶ô","È´ò","È¥ª","Ââõ","Âä´","Âè∑","Âêà","Â£ï","Êã∑","Êø†","Ë±™","ËΩü","È∫π","ÂÖã","Âàª","Âëä","ÂõΩ","Á©Ä","ÈÖ∑","Èµ†","Èªí","ÁçÑ","Êºâ","ËÖ∞","Áîë","ÂøΩ","ÊÉö","È™®","Áãõ","Ëæº","Ê≠§","È†É","‰ªä","Âõ∞","Âù§","Â¢æ","Â©ö","ÊÅ®","Êáá","Êòè","ÊòÜ","Ê†π","Ê¢±","Ê∑∑","Áóï","Á¥∫","ËâÆ","È≠Ç","‰∫õ","‰Ωê","Âèâ","ÂîÜ","ÂµØ","Â∑¶","Â∑Æ","Êüª","Ê≤ô","Áë≥","Á†Ç","Ë©ê","Èéñ","Ë£ü","Âùê","Â∫ß","Êå´","ÂÇµ","ÂÇ¨","ÂÜç","ÊúÄ","Âìâ","Â°û","Â¶ª","ÂÆ∞","ÂΩ©","Êâç","Êé°","Ê†Ω","Ê≠≥","Ê∏à","ÁÅΩ","Èáá","ÁäÄ","Á†ï","Á†¶","Á•≠","Êñé","Á¥∞","Ëèú","Ë£Å","Ëºâ","Èöõ","Ââ§","Âú®","Êùê","ÁΩ™","Ë≤°","ÂÜ¥","ÂùÇ","Èò™","Â†∫","Ê¶ä","ËÇ¥","Âí≤","Â¥é","Âüº","Á¢ï","È∑∫","‰Ωú","Ââä","Âíã","Êêæ","Êò®","Êúî","Êüµ","Á™Ñ","Á≠ñ","Á¥¢","ÈåØ","Ê°ú","ÈÆ≠","Á¨π","Âåô","ÂÜä","Âà∑","ÂØü","Êã∂","ÊíÆ","Êì¶","Êú≠","ÊÆ∫","Ëñ©","Èõë","Áöê","ÈØñ","Êçå","ÈåÜ","ÈÆ´","Áöø","Êôí","‰∏â","ÂÇò","ÂèÇ","Â±±","ÊÉ®","Êíí","Êï£","Ê°ü","Áá¶","Áèä","Áî£","ÁÆó","Á∫Ç","Ëöï","ËÆÉ","Ë≥õ","ÈÖ∏","È§ê","Êñ¨","Êö´","ÊÆã","‰ªï","‰ªî","‰º∫","‰Ωø","Âà∫","Âè∏","Âè≤","Âó£","Âõõ","Â£´","Âßã","Âßâ","Âßø","Â≠ê","Â±ç","Â∏Ç","Â∏´","Âøó","ÊÄù","Êåá","ÊîØ","Â≠ú","ÊñØ","ÊñΩ","Êó®","Êûù","Ê≠¢","Ê≠ª","Ê∞è","ÁçÖ","Á•â","ÁßÅ","Á≥∏","Á¥ô","Á¥´","ËÇ¢","ËÑÇ","Ëá≥","Ë¶ñ","Ë©û","Ë©©","Ë©¶","Ë™å","Ë´Æ","Ë≥á","Ë≥ú","Èõå","È£º","Ê≠Ø","‰∫ã","‰ºº","‰æç","ÂÖê","Â≠ó","ÂØ∫","ÊÖà","ÊåÅ","ÊôÇ","Ê¨°","Êªã","Ê≤ª","Áàæ","ÁíΩ","Áóî","Á£Å","Á§∫","ËÄå","ËÄ≥","Ëá™","Ëíî","Ëæû","Ê±ê","Èπø","Âºè","Ë≠ò","È¥´","Á´∫","Ëª∏","ÂÆç","Èõ´","‰∏É","Âè±","Âü∑","Â§±","Â´â","ÂÆ§","ÊÇâ","Êπø","ÊºÜ","Áñæ","Ë≥™","ÂÆü","ËîÄ","ÁØ†","ÂÅ≤","Êü¥","Ëäù","Â±°","Ëïä","Á∏û","Ëàé","ÂÜô","Â∞Ñ","Êç®","Ëµ¶","Êñú","ÁÖÆ","Á§æ","Á¥ó","ËÄÖ","Ë¨ù","Ëªä","ÈÅÆ","Ëõá","ÈÇ™","ÂÄü","Âã∫","Â∞∫","Êùì","ÁÅº","Áàµ","ÈÖå","Èáà","Èå´","Ëã•","ÂØÇ","Âº±","ÊÉπ","‰∏ª","Âèñ","ÂÆà","Êâã","Êú±","ÊÆä","Áã©","Áè†","Á®Æ","ËÖ´","Ë∂£","ÈÖí","È¶ñ","ÂÑí","Âèó","Âë™","ÂØø","Êéà","Ê®π","Á∂¨","ÈúÄ","Âõö","Âèé","Âë®","ÂÆó","Â∞±","Â∑û","‰øÆ","ÊÑÅ","Êãæ","Ê¥≤","ÁßÄ","Áßã","ÁµÇ","Áπç","Áøí","Ëá≠","Ëàü","Ëíê","Ë°Ü","Ë•≤","ËÆê","Ëπ¥","ËºØ","ÈÄ±","ÈÖã","ÈÖ¨","ÈõÜ","ÈÜú","‰ªÄ","‰Ωè","ÂÖÖ","ÂçÅ","Âæì","Êàé","Êüî","Ê±Å","Ê∏ã","Áç£","Á∏¶","Èáç","ÈäÉ","Âèî","Â§ô","ÂÆø","Ê∑ë","Á•ù","Á∏Æ","Á≤õ","Â°æ","ÁÜü","Âá∫","Ë°ì","Ëø∞","‰øä","Â≥ª","Êò•","Áû¨","Á´£","Ëàú","Èßø","ÂáÜ","Âæ™","Êó¨","Ê•Ø","ÊÆâ","Ê∑≥","Ê∫ñ","ÊΩ§","Áõæ","Á¥î","Â∑°","ÈÅµ","ÈÜá","È†Ü","Âá¶","Âàù","ÊâÄ","Êöë","Êõô","Ê∏ö","Â∫∂","Á∑í","ÁΩ≤","Êõ∏","ËñØ","Ëó∑","Ë´∏","Âä©","Âèô","Â•≥","Â∫è","Âæê","ÊÅï","Èã§","Èô§","ÂÇ∑","ÂÑü","Âãù","Âå†","Âçá","Âè¨","Âì®","ÂïÜ","Âî±","Âòó","Â•®","Â¶æ","Â®º","ÂÆµ","Â∞Ü","Â∞è","Â∞ë","Â∞ö","Â∫Ñ","Â∫ä","Âª†","ÂΩ∞","Êâø","ÊäÑ","Êãõ","Êéå","Êç∑","Êòá","Êòå","Êò≠","Êô∂","Êùæ","Ê¢¢","Ê®ü","Ê®µ","Ê≤º","Ê∂à","Ê∏â","Êπò","ÁÑº","ÁÑ¶","ÁÖß","Áóá","ÁúÅ","Á°ù","Á§Å","Á••","Áß∞","Á´†","Á¨ë","Á≤ß","Á¥π","ËÇñ","Ëèñ","Ëíã","Ëïâ","Ë°ù","Ë£≥","Ë®ü","Ë®º","Ë©î","Ë©≥","Ë±°","Ë≥û","ÈÜ§","Èâ¶","Èçæ","Èêò","Èöú","Èûò","‰∏ä","‰∏à","‰∏û","‰πó","ÂÜó","Ââ∞","Âüé","Â†¥","Â£å","Â¨¢","Â∏∏","ÊÉÖ","Êìæ","Êù°","Êùñ","ÊµÑ","Áä∂","Áï≥","Á©£","Ëí∏","Ë≠≤","ÈÜ∏","Èå†","Âò±","Âü¥","È£æ","Êã≠","Ê§ç","ÊÆñ","Áá≠","Áπî","ËÅ∑","Ëâ≤","Ëß¶","È£ü","Ëùï","Ëæ±","Â∞ª","‰º∏","‰ø°","‰æµ","Âîá","Â®†","ÂØù","ÂØ©","ÂøÉ","ÊÖé","ÊåØ","Êñ∞","Êôã","Ê£Æ","Ê¶õ","Êµ∏","Ê∑±","Áî≥","Áñπ","Áúü","Á•û","Áß¶","Á¥≥","Ëá£","ËäØ","Ëñ™","Ë¶™","Ë®∫","Ë∫´","Ëæõ","ÈÄ≤","Èáù","Èúá","‰∫∫","‰ªÅ","ÂàÉ","Â°µ","Â£¨","Â∞ã","Áîö","Â∞Ω","ËÖé","Ë®ä","ËøÖ","Èô£","Èù≠","Á¨•","Ë´è","È†à","ÈÖ¢","Âõ≥","Âé®","ÈÄó","Âêπ","ÂûÇ","Â∏•","Êé®","Ê∞¥","ÁÇä","Áù°","Á≤ã","Áø†","Ë°∞","ÈÅÇ","ÈÖî","Èåê","Èåò","Èöè","Áëû","È´Ñ","Â¥á","Âµ©","Êï∞","Êû¢","Ë∂®","Èõõ","ÊçÆ","Êùâ","Ê§ô","ËèÖ","È†ó","ÈõÄ","Ë£æ","ÊæÑ","Êë∫","ÂØ∏","‰∏ñ","ÁÄ¨","Áïù","ÊòØ","ÂáÑ","Âà∂","Âã¢","Âßì","ÂæÅ","ÊÄß","Êàê","Êîø","Êï¥","Êòü","Êô¥","Ê£≤","Ê†ñ","Ê≠£","Ê∏Ö","Áâ≤","Áîü","Áõõ","Á≤æ","ËÅñ","Â£∞","Ë£Ω","Ë•ø","Ë™†","Ë™ì","Ë´ã","ÈÄù","ÈÜí","Èùí","Èùô","Êñâ","Á®é","ËÑÜ","Èöª","Â∏≠","ÊÉú","Êàö","Êñ•","Êòî","Êûê","Áü≥","Á©ç","Á±ç","Á∏æ","ËÑä","Ë≤¨","Ëµ§","Ë∑°","Ëπü","Á¢©","Âàá","Êãô","Êé•","ÊëÇ","Êäò","Ë®≠","Á™É","ÁØÄ","Ë™¨","Èõ™","Áµ∂","Ëàå","Ëùâ","‰ªô","ÂÖà","ÂçÉ","Âç†","ÂÆ£","Â∞Ç","Â∞ñ","Â∑ù","Êà¶","Êâá","Êí∞","Ê†ì","Ê†¥","Ê≥â","ÊµÖ","Ê¥ó","Êüì","ÊΩú","ÁÖé","ÁÖΩ","Êóã","Á©ø","ÁÆ≠","Á∑ö","Áπä","Áæ®","ËÖ∫","Ëàõ","Ëàπ","Ëñ¶","Ë©Æ","Ë≥é","Ë∑µ","ÈÅ∏","ÈÅ∑","Èä≠","Èäë","ÈñÉ","ÈÆÆ","Ââç","ÂñÑ","Êº∏","ÁÑ∂","ÂÖ®","Á¶Ö","Áπï","ËÜ≥","Á≥é","Âôå","Â°ë","Â≤®","Êé™","Êõæ","ÊõΩ","Ê•ö","Áãô","Áñè","Áñé","Á§é","Á•ñ","Áßü","Á≤ó","Á¥†","ÁµÑ","Ëòá","Ë®¥","Èòª","ÈÅ°","Èº†","ÂÉß","Ââµ","Âèå","Âè¢","ÂÄâ","Âñ™","Â£Æ","Â•è","ÁàΩ","ÂÆã","Â±§","Âåù","ÊÉ£","ÊÉ≥","Êçú","ÊéÉ","Êåø","Êéª","Êìç","Êó©","Êõπ","Â∑£","Êßç","ÊßΩ","Êºï","Áá•","‰∫â","Áó©","Áõ∏","Á™ì","Á≥ü","Á∑è","Á∂ú","ËÅ°","Ëçâ","Ëçò","Ëë¨","Ëíº","Ëóª","Ë£Ö","Ëµ∞","ÈÄÅ","ÈÅ≠","Èéó","Èúú","È®í","ÂÉè","Â¢ó","ÊÜé","Ëáì","Ëîµ","Ë¥à","ÈÄ†","‰øÉ","ÂÅ¥","Ââá","Âç≥","ÊÅØ","Êçâ","Êùü","Ê∏¨","Ë∂≥","ÈÄü","‰øó","Â±û","Ë≥ä","Êóè","Á∂ö","Âçí","Ë¢ñ","ÂÖ∂","ÊèÉ","Â≠ò","Â≠´","Â∞ä","Êêç","Êùë","ÈÅú","‰ªñ","Â§ö","Â§™","Ê±∞","Ë©ë","Âîæ","Â†ï","Â¶•","ÊÉ∞","Êâì","ÊüÅ","Ëàµ","Ê•ï","ÈôÄ","ÈßÑ","È®®","‰Ωì","Â†Ü","ÂØæ","ËÄê","Â≤±","Â∏Ø","ÂæÖ","ÊÄ†","ÊÖã","Êà¥","Êõø","Ê≥∞","Êªû","ËÉé","ËÖø","Ëãî","Ë¢ã","Ë≤∏","ÈÄÄ","ÈÄÆ","Èöä","Èªõ","ÈØõ","‰ª£","Âè∞","Â§ß","Á¨¨","ÈÜç","È°å","È∑π","Êªù","ÁÄß","Âçì","ÂïÑ","ÂÆÖ","Êâò","Êäû","Êãì","Ê≤¢","ÊøØ","Áê¢","Ë®ó","Èê∏","ÊøÅ","Ë´æ","Ëå∏","Âáß","Ëõ∏","Âè™","Âè©","‰ΩÜ","ÈÅî","Ëæ∞","Â•™","ËÑ±","Â∑Ω","Á´™","Ëæø","Ê£ö","Ë∞∑","Áã∏","È±à","Ê®Ω","Ë™∞","‰∏π","Âçò","ÂòÜ","Âù¶","ÊãÖ","Êé¢","Êó¶","Ê≠é","Ê∑°","Êπõ","ÁÇ≠","Áü≠","Á´Ø","ÁÆ™","Á∂ª","ËÄΩ","ËÉÜ","Ëõã","Ë™ï","Èçõ","Âõ£","Â£á","Âºæ","Êñ≠","Êöñ","Ê™Ä","ÊÆµ","Áî∑","Ë´á","ÂÄ§","Áü•","Âú∞","Âºõ","ÊÅ•","Êô∫","Ê±†","Áó¥","Á®ö","ÁΩÆ","Ëá¥","Ëúò","ÈÅÖ","È¶≥","ÁØâ","Áïú","Á´π","Á≠ë","ËìÑ","ÈÄê","Áß©","Á™í","Ëå∂","Â´°","ÁùÄ","‰∏≠","‰ª≤","ÂÆô","Âø†","ÊäΩ","Êòº","Êü±","Ê≥®","Ëô´","Ë°∑","Ë®ª","ÈÖé","Èã≥","Èßê","Ê®ó","ÁÄ¶","Áå™","Ëãß","Ëëó","Ë≤Ø","‰∏Å","ÂÖÜ","Âáã","Âñã","ÂØµ","Â∏ñ","Â∏≥","Â∫Å","Âºî","Âºµ","ÂΩ´","Âæ¥","Êá≤","Êåë","Êö¢","Êúù","ÊΩÆ","Áâí","Áî∫","Áú∫","ËÅ¥","ËÑπ","ËÖ∏","Ëù∂","Ë™ø","Ë´ú","Ë∂Ö","Ë∑≥","Èäö","Èï∑","È†Ç","È≥•","ÂãÖ","Êçó","Áõ¥","Êúï","Ê≤à","Áèç","Ë≥É","ÈéÆ","Èô≥","Ê¥•","Â¢ú","Ê§é","Êßå","ËøΩ","Èéö","Áóõ","ÈÄö","Â°ö","Ê†Ç","Êé¥","Êßª","‰ΩÉ","Êº¨","Êüò","Ëæª","Ëî¶","Á∂¥","Èçî","Ê§ø","ÊΩ∞","Âù™","Â£∑","Â¨¨","Á¥¨","Áà™","Âêä","Èá£","È∂¥","‰∫≠","‰Ωé","ÂÅú","ÂÅµ","ÂâÉ","Ë≤û","Âëà","Â†§","ÂÆö","Â∏ù","Â∫ï","Â∫≠","Âª∑","Âºü","ÊÇå","Êäµ","Êå∫","Êèê","Ê¢Ø","Ê±Ä","Á¢á","Á¶é","Á®ã","Á∑†","Ëâá","Ë®Ç","Ë´¶","ËπÑ","ÈÄì","ÈÇ∏","ÈÑ≠","Èáò","Èºé","Ê≥•","Êëò","Êì¢","Êïµ","Êª¥","ÁöÑ","Á¨õ","ÈÅ©","Èèë","Ê∫∫","Âì≤","Âæπ","Êí§","ËΩç","Ëø≠","ÈâÑ","ÂÖ∏","Â°´","Â§©","Â±ï","Â∫ó","Ê∑ª","Á∫è","Áîú","Ë≤º","Ëª¢","È°õ","ÁÇπ","‰ºù","ÊÆø","Êæ±","Áî∞","Èõª","ÂÖé","Âêê","Â†µ","Â°ó","Â¶¨","Â±†","Âæí","Êñó","Êùú","Ê∏°","Áôª","Ëèü","Ë≥≠","ÈÄî","ÈÉΩ","Èçç","Á†•","Á†∫","Âä™","Â∫¶","Âúü","Â•¥","ÊÄí","ÂÄí","ÂÖö","ÂÜ¨","Âáç","ÂàÄ","Âîê","Â°î","Â°ò","Â•ó","ÂÆï","Â≥∂","Â∂ã","ÊÇº","Êäï","Êê≠","Êù±","Ê°É","Ê¢º","Ê£ü","Áõó","Ê∑ò","ÊπØ","Ê∂õ","ÁÅØ","Ááà","ÂΩì","Áóò","Á•∑","Á≠â","Á≠î","Á≠í","Á≥ñ","Áµ±","Âà∞","Ëë£","Ëï©","Ëó§","Ë®é","Ë¨Ñ","Ë±Ü","Ë∏è","ÈÄÉ","ÈÄè","Èêô","Èô∂","È†≠","È®∞","Èóò","ÂÉç","Âãï","Âêå","Â†Ç","Â∞é","ÊÜß","Êíû","Ê¥û","Áû≥","Á´•","ËÉ¥","ËêÑ","ÈÅì","ÈäÖ","Â≥†","È¥á","Âåø","Âæó","Âæ≥","Ê∂ú","Áâπ","Áù£","Á¶ø","ÁØ§","ÊØí","Áã¨","Ë™≠","Ê†É","Ê©°","Âá∏","Á™Å","Ê§¥","Â±ä","È≥∂","Ëã´","ÂØÖ","ÈÖâ","ÁÄû","Âô∏","Â±Ø","ÊÉá","Êï¶","Ê≤å","Ë±ö","ÈÅÅ","È†ì","Âëë","Êõá","Èàç","Â•à","ÈÇ£","ÂÜÖ","‰πç","Âá™","Ëñô","Ë¨é","ÁÅò","Êç∫","Èçã","Ê•¢","È¶¥","Á∏Ñ","Áï∑","Âçó","Ê•†","Ëªü","Èõ£","Ê±ù","‰∫å","Â∞º","Âºê","Ëø©","ÂåÇ","Ë≥ë","ËÇâ","Ëôπ","Âªø","Êó•","‰π≥","ÂÖ•","Â¶Ç","Â∞ø","ÈüÆ","‰ªª","Â¶ä","Âøç","Ë™ç","Êø°","Á¶∞","Á•¢","ÂØß","Ëë±","Áå´","ÁÜ±","Âπ¥","Âøµ","Êçª","Êíö","ÁáÉ","Á≤ò","‰πÉ","Âªº","‰πã","Âüú","Âö¢","ÊÇ©","ÊøÉ","Á¥ç","ËÉΩ","ËÑ≥","ËÜø","Ëæ≤","Ë¶ó","Ëö§","Â∑¥","Êää","Êí≠","Ë¶á","Êù∑","Ê≥¢","Ê¥æ","Áê∂","Á†¥","Â©Ü","ÁΩµ","Ëä≠","È¶¨","‰ø≥","ÂªÉ","Êãù","Êéí","Êïó","ÊùØ","ÁõÉ","Áâå","ËÉå","ËÇ∫","Ëº©","ÈÖç","ÂÄç","Âüπ","Â™í","Ê¢Ö","Ê•≥","ÁÖ§","ÁãΩ","Ë≤∑","Â£≤","Ë≥†","Èô™","ÈÄô","Ëùø","Áß§","Áüß","Ëê©","‰ºØ","Ââ•","Âçö","Êãç","Êüè","Ê≥ä","ÁôΩ","ÁÆî","Á≤ï","Ëà∂","ËñÑ","Ëø´","Êõù","Êº†","ÁàÜ","Á∏õ","Ëé´","ÈßÅ","È∫¶","ÂáΩ","ÁÆ±","Á°≤","ÁÆ∏","ËÇá","Á≠à","Ê´®","Âπ°","ËÇå","Áïë","Áï†","ÂÖ´","Èâ¢","Ê∫å","Áô∫","ÈÜó","È´™","‰ºê","ÁΩ∞","Êäú","Á≠è","Èñ•","È≥©","Âô∫","Â°ô","Ëõ§","Èöº","‰º¥","Âà§","Âçä","Âèç","Âèõ","Â∏Ü","Êê¨","Êñë","Êùø","Ê∞æ","Ê±é","Áâà","ÁäØ","Áè≠","Áïî","ÁπÅ","Ëà¨","Ëó©","Ë≤©","ÁØÑ","ÈáÜ","ÁÖ©","È†í","È£Ø","ÊåΩ","Êô©","Áï™","Áõ§","Á£ê","ËïÉ","ËõÆ","Âå™","Âçë","Âê¶","Â¶É","Â∫á","ÂΩº","ÊÇ≤","Êââ","Êâπ","Êä´","Êñê","ÊØî","Ê≥å","Áñ≤","ÁöÆ","Á¢ë","Áßò","Á∑ã","ÁΩ∑","ËÇ•","Ë¢´","Ë™π","Ë≤ª","ÈÅø","Èùû","È£õ","Ê®ã","Á∞∏","ÂÇô","Â∞æ","ÂæÆ","Êûá","ÊØò","Áêµ","Áúâ","Áæé","Èºª","Êüä","Á®ó","Âåπ","Áñã","È´≠","ÂΩ¶","ËÜù","Ëè±","ËÇò","Âºº","ÂøÖ","Áï¢","Á≠Ü","ÈÄº","Ê°ß","Âß´","Â™õ","Á¥ê","Áôæ","Ë¨¨","‰øµ","ÂΩ™","Ê®ô","Ê∞∑","ÊºÇ","Áì¢","Á•®","Ë°®","Ë©ï","Ë±π","Âªü","Êèè","ÁóÖ","Áßí","Ëãó","Èå®","Èã≤","Ëíú","Ëõ≠","È∞≠","ÂìÅ","ÂΩ¨","Êñå","Êµú","ÁÄï","Ë≤ß","Ë≥ì","È†ª","Êïè","Áì∂","‰∏ç","‰ªò","Âü†","Â§´","Â©¶","ÂØå","ÂÜ®","Â∏É","Â∫ú","ÊÄñ","Êâ∂","Êï∑","Êñß","ÊôÆ","ÊµÆ","Áà∂","Á¨¶","ËÖê","ËÜö","Ëäô","Ë≠ú","Ë≤†","Ë≥¶","Ëµ¥","Èòú","ÈôÑ","‰æÆ","Êí´","Ê≠¶","Ëàû","Ëë°","Ëï™","ÈÉ®","Â∞Å","Ê•ì","È¢®","Ëë∫","Ëïó","‰ºè","ÂâØ","Âæ©","ÂπÖ","Êúç","Á¶è","ËÖπ","Ë§á","Ë¶Ü","Ê∑µ","Âºó","Êâï","Ê≤∏","‰ªè","Áâ©","ÈÆí","ÂàÜ","Âêª","Âô¥","Â¢≥","ÊÜ§","ÊâÆ","ÁÑö","Â•Æ","Á≤â","Á≥û","Á¥õ","Èõ∞","Êñá","ËÅû","‰∏ô","‰Ωµ","ÂÖµ","Â°Ä","Âπ£","Âπ≥","Âºä","ÊüÑ","‰∏¶","ËîΩ","Èñâ","Èôõ","Á±≥","È†Å","ÂÉª","Â£Å","Áôñ","Á¢ß","Âà•","Áû•","Ëîë","ÁÆÜ","ÂÅè","Â§â","Áâá","ÁØá","Á∑®","Ëæ∫","Ëøî","ÈÅç","‰æø","Âãâ","Â®©","ÂºÅ","Èû≠","‰øù","Ëàó","Èã™","ÂúÉ","Êçï","Ê≠©","Áî´","Ë£ú","Ëºî","Á©Ç","Âãü","Â¢ì","ÊÖï","Êàä","ÊöÆ","ÊØç","Á∞ø","Ëè©","ÂÄ£","‰ø∏","ÂåÖ","ÂëÜ","Â†±","Â•â","ÂÆù","Â≥∞","Â≥Ø","Â¥©","Â∫ñ","Êä±","Êçß","Êîæ","Êñπ","Êúã","Ê≥ï","Ê≥°","ÁÉπ","Á†≤","Á∏´","ËÉû","Ëä≥","Ëêå","Ëì¨","ËúÇ","Ë§í","Ë®™","Ë±ä","ÈÇ¶","Èãí","È£Ω","È≥≥","Èµ¨","‰πè","‰∫°","ÂÇç","Ââñ","Âùä","Â¶®","Â∏Ω","Âøò","Âøô","Êàø","Êö¥","Êúõ","Êüê","Ê£í","ÂÜí","Á¥°","ËÇ™","ËÜ®","Ë¨Ä","Ë≤å","Ë≤ø","Èâæ","Èò≤","Âê†","È†¨","Âåó","ÂÉï","Âçú","Â¢®","Êí≤","Êú¥","Áâß","Áù¶","Á©Ü","Èá¶","ÂãÉ","Ê≤°","ÊÆÜ","Â†Ä","Âπå","Â•î","Êú¨","Áøª","Âá°","ÁõÜ","Êë©","Á£®","È≠î","È∫ª","Âüã","Â¶π","Êòß","Êûö","ÊØé","Âì©","Êßô","Âπï","ËÜú","Êûï","ÈÆ™","Êüæ","È±í","Ê°ù","‰∫¶","‰ø£","Âèà","Êäπ","Êú´","Ê≤´","ËøÑ","‰æ≠","Áπ≠","È∫ø","‰∏á","ÊÖ¢","Ê∫Ä","Êº´","Ëîì","Âë≥","Êú™","È≠Ö","Â∑≥","ÁÆï","Â≤¨","ÂØÜ","Ëúú","Êπä","Ëìë","Á®î","ËÑà","Â¶ô","Á≤ç","Ê∞ë","Áú†","Âãô","Â§¢","ÁÑ°","Áâü","Áüõ","Èúß","Èµ°","Ê§ã","Â©ø","Â®ò","ÂÜ•","Âêç","ÂëΩ","Êòé","Áõü","Ëø∑","Èäò","È≥¥","Âß™","Áâù","ÊªÖ","ÂÖç","Ê£â","Á∂ø","Á∑¨","Èù¢","È∫∫","Êë∏","Ê®°","ËåÇ","Â¶Ñ","Â≠ü","ÊØõ","Áåõ","Áõ≤","Á∂≤","ËÄó","Ëíô","ÂÑ≤","Êú®","Èªô","ÁõÆ","Êù¢","Âãø","È§Ö","Â∞§","Êàª","Á±æ","Ë≤∞","Âïè","ÊÇ∂","Á¥ã","ÈñÄ","ÂåÅ","‰πü","ÂÜ∂","Â§ú","Áà∫","ËÄ∂","Èáé","Âº•","Áü¢","ÂéÑ","ÂΩπ","Á¥Ñ","Ëñ¨","Ë®≥","Ë∫ç","Èùñ","Êü≥","ËñÆ","Èëì","ÊÑâ","ÊÑà","Ê≤π","Áôí","Ë´≠","Ëº∏","ÂîØ","‰Ωë","ÂÑ™","Âãá","Âèã","ÂÆ•","ÂπΩ","ÊÇ†","ÊÜÇ","Êèñ","Êúâ","Êüö","Êπß","Ê∂å","Áå∂","Áå∑","Áî±","Á•ê","Ë£ï","Ë™ò","ÈÅä","ÈÇë","ÈÉµ","ÈõÑ","Ëûç","Â§ï","‰∫à","‰Ωô","‰∏é","Ë™â","Ëºø","È†ê","ÂÇ≠","Âπº","Â¶ñ","ÂÆπ","Â∫∏","Êèö","Êè∫","ÊìÅ","Êõú","Ê•ä","Êßò","Ê¥ã","Ê∫∂","ÁÜî","Áî®","Á™Ø","Áæä","ËÄÄ","Ëëâ","Ëìâ","Ë¶Å","Ë¨°","Ë∏ä","ÈÅ•","ÈôΩ","È§ä","ÊÖæ","Êäë","Ê¨≤","Ê≤É","Êµ¥","Áøå","Áøº","Ê∑Ä","ÁæÖ","Ëû∫","Ë£∏","Êù•","Ëé±","È†º","Èõ∑","Ê¥õ","Áµ°","ËêΩ","ÈÖ™","‰π±","Âçµ","Âµê","Ê¨Ñ","Êø´","Ëóç","Ëò≠","Ë¶ß","Âà©","Âêè","Â±•","Êùé","Ê¢®","ÁêÜ","ÁíÉ","Áó¢","Ë£è","Ë£°","Èáå","Èõ¢","Èô∏","Âæã","Áéá","Á´ã","Ëëé","Êé†","Áï•","Âäâ","ÊµÅ","Ê∫ú","Áêâ","Áïô","Á°´","Á≤í","ÈöÜ","Á´ú","Èæç","‰æ∂","ÊÖÆ","ÊóÖ","Ëôú","‰∫Ü","‰∫Æ","ÂÉö","‰∏°","Âáå","ÂØÆ","Êñô","Ê¢Å","Ê∂º","Áåü","ÁôÇ","Áû≠","Á®ú","Á≥ß","ËâØ","Ë´í","ÈÅº","Èáè","Èôµ","È†ò","Âäõ","Á∑ë","ÂÄ´","Âéò","Êûó","Ê∑ã","Ááê","Áê≥","Ëá®","Ëº™","Èö£","È±ó","È∫ü","Áë†","Â°Å","Ê∂ô","Á¥Ø","È°û","‰ª§","‰º∂","‰æã","ÂÜ∑","Âä±","Â∂∫","ÊÄú","Áé≤","Á§º","Ëãì","Èà¥","Èö∑","Èõ∂","Èúä","È∫ó","ÈΩ¢","Êö¶","Ê≠¥","Âàó","Âä£","ÁÉà","Ë£Ç","Âªâ","ÊÅã","ÊÜê","Êº£","ÁÖâ","Á∞æ","Á∑¥","ËÅØ","ËìÆ","ÈÄ£","Èå¨","ÂëÇ","È≠Ø","Ê´ì","ÁÇâ","Ë≥Ç","Ë∑Ø","Èú≤","Âä¥","Â©Å","Âªä","ÂºÑ","Êúó","Ê•º","Ê¶î","Êµ™","Êºè","Áâ¢","Áãº","ÁØ≠","ËÄÅ","ËÅæ","Ëùã","ÈÉé","ÂÖ≠","È∫ì","Á¶Ñ","ËÇã","Èå≤","Ë´ñ","ÂÄ≠","Âíå","Ë©±","Ê≠™","Ë≥Ñ","ËÑá","ÊÉë","Êû†","È∑≤","‰∫ô","‰∫ò","È∞ê","Ë©´","ËóÅ","Ëï®","Ê§Ä","Êπæ","Á¢ó","ËÖï","†Æü","Â≠Å","Â≠ñ","Â≠Ω","ÂÆì","ÂØò","ÂØ¨","Â∞í","Â∞û","Â∞£","Â∞´","„ûç","Â±¢","Ô®ª","Ô®º","°ö¥","Â±∫","Â≤è","Â≤ü","Â≤£","Â≤™","Â≤∫","Â≥ã","Â≥ê","Â≥í","Â≥¥","°∏¥","„ü¢","Â¥ç","Â¥ß","Ô®ë","ÂµÜ","Âµá","Âµì","Âµä","Âµ≠","Â∂Å","Â∂†","Â∂§","Â∂ß","Â∂∏","Â∑ã","Âêû","Âºå","‰∏ê","‰∏ï","‰∏™","‰∏±","‰∏∂","‰∏º","‰∏ø","‰πÇ","‰πñ","‰πò","‰∫Ç","‰∫Ö","Ë±´","‰∫ä","Ëàí","Âºç","‰∫é","‰∫û","‰∫ü","‰∫†","‰∫¢","‰∫∞","‰∫≥","‰∫∂","‰ªé","‰ªç","‰ªÑ","‰ªÜ","‰ªÇ","‰ªó","‰ªû","‰ª≠","‰ªü","‰ª∑","‰ºâ","‰Ωö","‰º∞","‰Ωõ","‰Ωù","‰Ωó","‰Ωá","‰Ω∂","‰æà","‰æè","‰æò","‰Ωª","‰Ω©","‰Ω∞","‰æë","‰ΩØ","‰æÜ","‰æñ","ÂÑò","‰øî","‰øü","‰øé","‰øò","‰øõ","‰øë","‰øö","‰øê","‰ø§","‰ø•","ÂÄö","ÂÄ®","ÂÄî","ÂÄ™","ÂÄ•","ÂÄÖ","‰ºú","‰ø∂","ÂÄ°","ÂÄ©","ÂÄ¨","‰øæ","‰øØ","ÂÄë","ÂÄÜ","ÂÅÉ","ÂÅá","ÊúÉ","ÂÅï","ÂÅê","ÂÅà","ÂÅö","ÂÅñ","ÂÅ¨","ÂÅ∏","ÂÇÄ","ÂÇö","ÂÇÖ","ÂÇ¥","ÂÇ≤","ÂÉâ","ÂÉä","ÂÇ≥","ÂÉÇ","ÂÉñ","ÂÉû","ÂÉ•","ÂÉ≠","ÂÉ£","ÂÉÆ","ÂÉπ","ÂÉµ","ÂÑâ","ÂÑÅ","ÂÑÇ","ÂÑñ","ÂÑï","ÂÑî","ÂÑö","ÂÑ°","ÂÑ∫","ÂÑ∑","ÂÑº","ÂÑª","ÂÑø","ÂÖÄ","ÂÖí","ÂÖå","ÂÖî","ÂÖ¢","Á´∏","ÂÖ©","ÂÖ™","ÂÖÆ","ÂÜÄ","ÂÜÇ","Âõò","ÂÜå","ÂÜâ","ÂÜè","ÂÜë","ÂÜì","ÂÜï","ÂÜñ","ÂÜ§","ÂÜ¶","ÂÜ¢","ÂÜ©","ÂÜ™","ÂÜ´","ÂÜ≥","ÂÜ±","ÂÜ≤","ÂÜ∞","ÂÜµ","ÂÜΩ","ÂáÖ","Âáâ","Âáõ","Âá†","Ëôï","Âá©","Âá≠","Âá∞","Âáµ","Âáæ","ÂàÑ","Âàã","Âàî","Âàé","Âàß","Âà™","ÂàÆ","Âà≥","Âàπ","Ââè","ÂâÑ","Ââã","Ââå","Ââû","Ââî","Ââ™","Ââ¥","Ââ©","Ââ≥","Ââø","ÂâΩ","Âäç","Âäî","Âäí","Ââ±","Âäà","Âäë","Ëæ®","Ëæß","Âä¨","Âä≠","Âäº","Âäµ","ÂãÅ","Âãç","Âãó","Âãû","Âã£","Âã¶","È£≠","Âã†","Âã≥","Âãµ","Âã∏","Âãπ","ÂåÜ","Âåà","Áî∏","Âåç","Âåê","Âåè","Âåï","Âåö","Âå£","ÂåØ","Âå±","Âå≥","Âå∏","ÂçÄ","ÂçÜ","ÂçÖ","‰∏ó","Âçâ","Âçç","Âáñ","Âçû","Âç©","ÂçÆ","Â§ò","Âçª","Âç∑","ÂéÇ","Âéñ","Âé†","Âé¶","Âé•","ÂéÆ","Âé∞","Âé∂","ÂèÉ","Á∞í","Èõô","Âèü","Êõº","ÁáÆ","ÂèÆ","Âè®","Âè≠","Âè∫","ÂêÅ","ÂêΩ","ÂëÄ","Âê¨","Âê≠","Âêº","ÂêÆ","Âê∂","Âê©","Âêù","Âëé","Âíè","Âëµ","Âíé","Âëü","Âë±","Âë∑","Âë∞","Âíí","Âëª","ÂíÄ","Âë∂","ÂíÑ","Âíê","ÂíÜ","Âìá","Âí¢","Âí∏","Âí•","Âí¨","ÂìÑ","Âìà","Âí®","Âí´","ÂìÇ","Âí§","Âíæ","Âíº","Âìò","Âì•","Âì¶","Âîè","Âîî","ÂìΩ","ÂìÆ","Âì≠","Âì∫","Âì¢","Âîπ","ÂïÄ","Âï£","Âïå","ÂîÆ","Âïú","ÂïÖ","Âïñ","Âïó","Âî∏","Âî≥","Âïù","Âñô","ÂñÄ","ÂíØ","Âñä","Âñü","Âïª","Âïæ","Âñò","Âñû","ÂñÆ","Âïº","ÂñÉ","Âñ©","Âñá","Âñ®","Âóö","ÂóÖ","Âóü","ÂóÑ","Âóú","Âó§","Âóî","Âòî","Âó∑","Âòñ","Âóæ","ÂóΩ","Âòõ","Âóπ","Âôé","Âôê","Ááü","Âò¥","Âò∂","Âò≤","Âò∏","Âô´","Âô§","ÂòØ","Âô¨","Âô™","ÂöÜ","ÂöÄ","Âöä","Âö†","Âöî","Âöè","Âö•","ÂöÆ","Âö∂","Âö¥","ÂõÇ","Âöº","ÂõÅ","ÂõÉ","ÂõÄ","Âõà","Âõé","Âõë","Âõì","Âõó","ÂõÆ","Âõπ","ÂúÄ","Âõø","ÂúÑ","Âúâ","Âúà","Âúã","Âúç","Âúì","Âúò","Âúñ","Âóá","Âúú","Âú¶","Âú∑","Âú∏","Âùé","Âúª","ÂùÄ","Âùè","Âù©","ÂüÄ","Âûà","Âù°","Âùø","Âûâ","Âûì","Âû†","Âû≥","Âû§","Âû™","Âû∞","ÂüÉ","ÂüÜ","Âüî","Âüí","Âüì","Â†ä","Âüñ","Âü£","Â†ã","Â†ô","Â†ù","Â°≤","Â†°","Â°¢","Â°ã","Â°∞","ÊØÄ","Â°í","Â†Ω","Â°π","Â¢Ö","Â¢π","Â¢ü","Â¢´","Â¢∫","Â£û","Â¢ª","Â¢∏","Â¢Æ","Â£Ö","Â£ì","Â£ë","Â£ó","Â£ô","Â£ò","Â£•","Â£ú","Â£§","Â£ü","Â£Ø","Â£∫","Â£π","Â£ª","Â£º","Â£Ω","Â§Ç","Â§ä","Â§ê","Â§õ","Ê¢¶","Â§•","Â§¨","Â§≠","Â§≤","Â§∏","Â§æ","Á´í","Â•ï","Â•ê","Â•é","Â•ö","Â•ò","Â•¢","Â•†","Â•ß","Â•¨","Â•©","Â•∏","Â¶Å","Â¶ù","‰Ωû","‰æ´","Â¶£","Â¶≤","ÂßÜ","Âß®","Âßú","Â¶ç","Âßô","Âßö","Â®•","Â®ü","Â®ë","Â®ú","Â®â","Â®ö","Â©Ä","Â©¨","Â©â","Â®µ","Â®∂","Â©¢","Â©™","Â™ö","Â™º","Â™æ","Â´ã","Â´Ç","Â™Ω","Â´£","Â´ó","Â´¶","Â´©","Â´ñ","Â´∫","Â´ª","Â¨å","Â¨ã","Â¨ñ","Â¨≤","Â´ê","Â¨™","Â¨∂","Â¨æ","Â≠É","Â≠Ö","Â≠Ä","Â≠ë","Â≠ï","Â≠ö","Â≠õ","Â≠•","Â≠©","Â≠∞","Â≠≥","Â≠µ","Â≠∏","Êñà","Â≠∫","ÂÆÄ","ÂÆÉ","ÂÆ¶","ÂÆ∏","ÂØÉ","ÂØá","ÂØâ","ÂØî","ÂØê","ÂØ§","ÂØ¶","ÂØ¢","ÂØû","ÂØ•","ÂØ´","ÂØ∞","ÂØ∂","ÂØ≥","Â∞Ö","Â∞á","Â∞à","Â∞ç","Â∞ì","Â∞†","Â∞¢","Â∞®","Â∞∏","Â∞π","Â±Å","Â±Ü","Â±é","Â±ì","Â±ê","Â±è","Â≠±","Â±¨","Â±Æ","‰π¢","Â±∂","Â±π","Â≤å","Â≤ë","Â≤î","Â¶õ","Â≤´","Â≤ª","Â≤∂","Â≤º","Â≤∑","Â≥Ö","Â≤æ","Â≥á","Â≥ô","Â≥©","Â≥Ω","Â≥∫","Â≥≠","Â∂å","Â≥™","Â¥ã","Â¥ï","Â¥ó","Âµú","Â¥ü","Â¥õ","Â¥ë","Â¥î","Â¥¢","Â¥ö","Â¥ô","Â¥ò","Âµå","Âµí","Âµé","Âµã","Âµ¨","Âµ≥","Âµ∂","Â∂á","Â∂Ñ","Â∂Ç","Â∂¢","Â∂ù","Â∂¨","Â∂Æ","Â∂Ω","Â∂ê","Â∂∑","Â∂º","Â∑â","Â∑ç","Â∑ì","Â∑í","Â∑ñ","Â∑õ","Â∑´","Â∑≤","Â∑µ","Â∏ã","Â∏ö","Â∏ô","Â∏ë","Â∏õ","Â∏∂","Â∏∑","ÂπÑ","ÂπÉ","ÂπÄ","Âπé","Âπó","Âπî","Âπü","Âπ¢","Âπ§","Âπá","Âπµ","Âπ∂","Âπ∫","È∫º","Âπø","Â∫†","ÂªÅ","ÂªÇ","Âªà","Âªê","Âªè","Âªñ","Âª£","Âªù","Âªö","Âªõ","Âª¢","Âª°","Âª®","Âª©","Âª¨","Âª±","Âª≥","Âª∞","Âª¥","Âª∏","Âªæ","ÂºÉ","Âºâ","ÂΩù","ÂΩú","Âºã","Âºë","Âºñ","Âº©","Âº≠","Âº∏","ÂΩÅ","ÂΩà","ÂΩå","ÂΩé","ÂºØ","ÂΩë","ÂΩñ","ÂΩó","ÂΩô","ÂΩ°","ÂΩ≠","ÂΩ≥","ÂΩ∑","ÂæÉ","ÂæÇ","ÂΩø","Âæä","Âæà","Âæë","Âæá","Âæû","Âæô","Âæò","Âæ†","Âæ®","Âæ≠","Âæº","Âøñ","Âøª","Âø§","Âø∏","Âø±","Âøù","ÊÇ≥","Âøø","ÊÄ°","ÊÅ†","ÊÄô","ÊÄê","ÊÄ©","ÊÄé","ÊÄ±","ÊÄõ","ÊÄï","ÊÄ´","ÊÄ¶","ÊÄè","ÊÄ∫","ÊÅö","ÊÅÅ","ÊÅ™","ÊÅ∑","ÊÅü","ÊÅä","ÊÅÜ","ÊÅç","ÊÅ£","ÊÅÉ","ÊÅ§","ÊÅÇ","ÊÅ¨","ÊÅ´","ÊÅô","ÊÇÅ","ÊÇç","ÊÉß","ÊÇÉ","ÊÇö","ÊÇÑ","ÊÇõ","ÊÇñ","ÊÇó","ÊÇí","ÊÇß","ÊÇã","ÊÉ°","ÊÇ∏","ÊÉ†","ÊÉì","ÊÇ¥","Âø∞","ÊÇΩ","ÊÉÜ","ÊÇµ","ÊÉò","ÊÖç","ÊÑï","ÊÑÜ","ÊÉ∂","ÊÉ∑","ÊÑÄ","ÊÉ¥","ÊÉ∫","ÊÑÉ","ÊÑ°","ÊÉª","ÊÉ±","ÊÑç","ÊÑé","ÊÖá","ÊÑæ","ÊÑ®","ÊÑß","ÊÖä","ÊÑø","ÊÑº","ÊÑ¨","ÊÑ¥","ÊÑΩ","ÊÖÇ","ÊÖÑ","ÊÖ≥","ÊÖ∑","ÊÖò","ÊÖô","ÊÖö","ÊÖ´","ÊÖ¥","ÊÖØ","ÊÖ•","ÊÖ±","ÊÖü","ÊÖù","ÊÖì","ÊÖµ","ÊÜô","ÊÜñ","ÊÜá","ÊÜ¨","ÊÜî","ÊÜö","ÊÜä","ÊÜë","ÊÜ´","ÊÜÆ","Êáå","Êáä","Êáâ","Êá∑","Êáà","ÊáÉ","ÊáÜ","ÊÜ∫","Êáã","ÁΩπ","Êáç","Êá¶","Êá£","Êá∂","Êá∫","Êá¥","Êáø","ÊáΩ","Êáº","Êáæ","ÊàÄ","Êàà","Êàâ","Êàç","Êàå","Êàî","Êàõ","Êàû","Êà°","Êà™","ÊàÆ","Êà∞","Êà≤","Êà≥","ÊâÅ","Êâé","Êâû","Êâ£","Êâõ","Êâ†","Êâ®","Êâº","ÊäÇ","Êäâ","Êâæ","Êäí","Êäì","Êäñ","Êãî","ÊäÉ","Êäî","Êãó","Êãë","Êäª","Êãè","Êãø","ÊãÜ","Êìî","Êãà","Êãú","Êãå","Êãä","ÊãÇ","Êãá","Êäõ","Êãâ","Êåå","ÊãÆ","Êã±","Êåß","ÊåÇ","Êåà","ÊãØ","Êãµ","Êçê","Êåæ","Êçç","Êêú","Êçè","Êéñ","Êéé","ÊéÄ","Êé´","Êç∂","Êé£","Êéè","Êéâ","Êéü","Êéµ","Êç´","Êç©","Êéæ","Êè©","ÊèÄ","ÊèÜ","Êè£","Êèâ","Êèí","Êè∂","ÊèÑ","Êêñ","Êê¥","ÊêÜ","Êêì","Êê¶","Êê∂","Êîù","Êêó","Êê®","Êêè","Êëß","ÊëØ","Êë∂","Êëé","Êî™","Êíï","Êíì","Êí•","Êí©","Êíà","Êíº","Êìö","Êìí","ÊìÖ","Êìá","Êíª","Êìò","ÊìÇ","Êì±","Êìß","Ëàâ","Êì†","Êì°","Êä¨","Êì£","ÊìØ","Êî¨","Êì∂","Êì¥","Êì≤","Êì∫","ÊîÄ","ÊìΩ","Êîò","Êîú","ÊîÖ","Êî§","Êî£","Êî´","Êî¥","Êîµ","Êî∑","Êî∂","Êî∏","Áïã","Êïà","Êïñ","Êïï","Êïç","Êïò","Êïû","Êïù","Êï≤","Êï∏","ÊñÇ","ÊñÉ","ËÆä","Êñõ","Êñü","Êñ´","Êñ∑","ÊóÉ","ÊóÜ","ÊóÅ","ÊóÑ","Êóå","Êóí","Êóõ","Êóô","Êó†","Êó°","Êó±","Êù≤","Êòä","ÊòÉ","Êóª","Êù≥","Êòµ","Êò∂","Êò¥","Êòú","Êôè","ÊôÑ","Êôâ","ÊôÅ","Êôû","Êôù","Êô§","Êôß","Êô®","Êôü","Êô¢","Êô∞","ÊöÉ","Êöà","Êöé","Êöâ","ÊöÑ","Êöò","Êöù","ÊõÅ","Êöπ","Êõâ","Êöæ","Êöº","ÊõÑ","Êö∏","Êõñ","Êõö","Êõ†","Êòø","Êõ¶","Êõ©","Êõ∞","Êõµ","Êõ∑","Êúè","Êúñ","Êúû","Êú¶","Êúß","Èú∏","ÊúÆ","Êúø","Êú∂","ÊùÅ","Êú∏","Êú∑","ÊùÜ","Êùû","Êù†","Êùô","Êù£","Êù§","Êûâ","Êù∞","Êû©","Êùº","Êù™","Êûå","Êûã","Êû¶","Êû°","ÊûÖ","Êû∑","ÊüØ","Êû¥","Êü¨","Êû≥","Êü©","Êû∏","Êü§","Êüû","Êüù","Êü¢","ÊüÆ","Êûπ","Êüé","ÊüÜ","Êüß","Ê™ú","Ê†û","Ê°Ü","Ê†©","Ê°Ä","Ê°ç","Ê†≤","Ê°é","Ê¢≥","Ê†´","Ê°ô","Ê°£","Ê°∑","Ê°ø","Ê¢ü","Ê¢è","Ê¢≠","Ê¢î","Ê¢ù","Ê¢õ","Ê¢É","Ê™Æ","Ê¢π","Ê°¥","Ê¢µ","Ê¢†","Ê¢∫","Ê§è","Ê¢ç","Ê°æ","Ê§Å","Ê£ä","Ê§à","Ê£ò","Ê§¢","Ê§¶","Ê£°","Ê§å","Ê£ç","Ê£î","Ê£ß","Ê£ï","Ê§∂","Ê§í","Ê§Ñ","Ê£ó","Ê££","Ê§•","Ê£π","Ê£†","Ê£Ø","Ê§®","Ê§™","Ê§ö","Ê§£","Ê§°","Ê£Ü","Ê•π","Ê•∑","Ê•ú","Ê•∏","Ê•´","Ê•î","Ê•æ","Ê•Æ","Ê§π","Ê•¥","Ê§Ω","Ê•ô","Ê§∞","Ê•°","Ê•û","Ê•ù","Ê¶Å","Ê•™","Ê¶≤","Ê¶Æ","Êßê","Ê¶ø","ÊßÅ","Êßì","Ê¶æ","Êßé","ÂØ®","Êßä","Êßù","Ê¶ª","ÊßÉ","Ê¶ß","Ê®Æ","Ê¶ë","Ê¶†","Ê¶ú","Ê¶ï","Ê¶¥","Êßû","Êß®","Ê®Ç","Ê®õ","Êßø","Ê¨ä","Êßπ","Êß≤","Êßß","Ê®Ö","Ê¶±","Ê®û","Êß≠","Ê®î","Êß´","Ê®ä","Ê®í","Ê´Å","Ê®£","Ê®ì","Ê©Ñ","Ê®å","Ê©≤","Ê®∂","Ê©∏","Ê©á","Ê©¢","Ê©ô","Ê©¶","Ê©à","Ê®∏","Ê®¢","Ê™ê","Ê™ç","Ê™†","Ê™Ñ","Ê™¢","Ê™£","Ê™ó","Ëòó","Ê™ª","Ê´É","Ê´Ç","Ê™∏","Ê™≥","Ê™¨","Ê´û","Ê´ë","Ê´ü","Ê™™","Ê´ö","Ê´™","Ê´ª","Ê¨Ö","Ëòñ","Ê´∫","Ê¨í","Ê¨ñ","È¨±","Ê¨ü","Ê¨∏","Ê¨∑","Áõú","Ê¨π","È£Æ","Ê≠á","Ê≠É","Ê≠â","Ê≠ê","Ê≠ô","Ê≠î","Ê≠õ","Ê≠ü","Ê≠°","Ê≠∏","Ê≠π","Ê≠ø","ÊÆÄ","ÊÆÑ","ÊÆÉ","ÊÆç","ÊÆò","ÊÆï","ÊÆû","ÊÆ§","ÊÆ™","ÊÆ´","ÊÆØ","ÊÆ≤","ÊÆ±","ÊÆ≥","ÊÆ∑","ÊÆº","ÊØÜ","ÊØã","ÊØì","ÊØü","ÊØ¨","ÊØ´","ÊØ≥","ÊØØ","È∫æ","Ê∞à","Ê∞ì","Ê∞î","Ê∞õ","Ê∞§","Ê∞£","Ê±û","Ê±ï","Ê±¢","Ê±™","Ê≤Ç","Ê≤ç","Ê≤ö","Ê≤Å","Ê≤õ","Ê±æ","Ê±®","Ê±≥","Ê≤í","Ê≤ê","Ê≥Ñ","Ê≥±","Ê≥ì","Ê≤Ω","Ê≥ó","Ê≥Ö","Ê≥ù","Ê≤Æ","Ê≤±","Ê≤æ","Ê≤∫","Ê≥õ","Ê≥Ø","Ê≥ô","Ê≥™","Ê¥ü","Ë°ç","Ê¥∂","Ê¥´","Ê¥Ω","Ê¥∏","Ê¥ô","Ê¥µ","Ê¥≥","Ê¥í","Ê¥å","Êµ£","Ê∂ì","Êµ§","Êµö","Êµπ","Êµô","Ê∂é","Ê∂ï","Êø§","Ê∂Ö","Ê∑π","Ê∏ï","Ê∏ä","Ê∂µ","Ê∑á","Ê∑¶","Ê∂∏","Ê∑Ü","Ê∑¨","Ê∑û","Ê∑å","Ê∑®","Ê∑í","Ê∑Ö","Ê∑∫","Ê∑ô","Ê∑§","Ê∑ï","Ê∑™","Ê∑Æ","Ê∏≠","ÊπÆ","Ê∏Æ","Ê∏ô","Êπ≤","Êπü","Ê∏æ","Ê∏£","Êπ´","Ê∏´","Êπ∂","Êπç","Ê∏ü","ÊπÉ","Ê∏∫","Êπé","Ê∏§","Êªø","Ê∏ù","Ê∏∏","Ê∫Ç","Ê∫™","Ê∫ò","Êªâ","Ê∫∑","Êªì","Ê∫Ω","Ê∫Ø","ÊªÑ","Ê∫≤","Êªî","Êªï","Ê∫è","Ê∫•","ÊªÇ","Ê∫ü","ÊΩÅ","Êºë","ÁÅå","Êª¨","Êª∏","Êªæ","Êºø","Êª≤","Êº±","ÊªØ","Êº≤","Êªå","Êºæ","Êºì","Êª∑","ÊæÜ","ÊΩ∫","ÊΩ∏","ÊæÅ","ÊæÄ","ÊΩØ","ÊΩõ","Êø≥","ÊΩ≠","ÊæÇ","ÊΩº","ÊΩò","Êæé","Êæë","ÊøÇ","ÊΩ¶","Êæ≥","Êæ£","Êæ°","Êæ§","Êæπ","ÊøÜ","Êæ™","Êøü","Êøï","Êø¨","Êøî","Êøò","Êø±","ÊøÆ","Êøõ","ÁÄâ","ÁÄã","Êø∫","ÁÄë","ÁÄÅ","ÁÄè","Êøæ","ÁÄõ","ÁÄö","ÊΩ¥","ÁÄù","ÁÄò","ÁÄü","ÁÄ∞","ÁÄæ","ÁÄ≤","ÁÅë","ÁÅ£","ÁÇô","ÁÇí","ÁÇØ","ÁÉ±","ÁÇ¨","ÁÇ∏","ÁÇ≥","ÁÇÆ","ÁÉü","ÁÉã","ÁÉù","ÁÉô","ÁÑâ","ÁÉΩ","ÁÑú","ÁÑô","ÁÖ•","ÁÖï","ÁÜà","ÁÖ¶","ÁÖ¢","ÁÖå","ÁÖñ","ÁÖ¨","ÁÜè","Ááª","ÁÜÑ","ÁÜï","ÁÜ®","ÁÜ¨","Ááó","ÁÜπ","ÁÜæ","Ááí","Ááâ","Ááî","Ááé","Áá†","Áá¨","Ááß","Ááµ","Ááº","Ááπ","Ááø","Áàç","Áàê","Áàõ","Áà®","Áà≠","Áà¨","Áà∞","Áà≤","Áàª","Áàº","Áàø","ÁâÄ","ÁâÜ","Áâã","Áâò","Áâ¥","Áâæ","ÁäÇ","ÁäÅ","Áäá","Áäí","Áäñ","Áä¢","Áäß","Áäπ","Áä≤","ÁãÉ","ÁãÜ","ÁãÑ","Áãé","Áãí","Áã¢","Áã†","Áã°","Áãπ","Áã∑","ÂÄè","Áåó","Áåä","Áåú","Áåñ","Áåù","Áå¥","ÁåØ","Áå©","Áå•","Áåæ","Áçé","Áçè","Èªò","Áçó","Áç™","Áç®","Áç∞","Áç∏","Áçµ","Áçª","Áç∫","Áèà","Áé≥","Áèé","Áéª","ÁèÄ","Áè•","ÁèÆ","Áèû","Áí¢","ÁêÖ","ÁëØ","Áê•","Áè∏","Áê≤","Áê∫","Áëï","Áêø","Áëü","Áëô","ÁëÅ","Áëú","Áë©","Áë∞","Áë£","Áë™","Áë∂","Áëæ","Áíã","Áíû","Áíß","Áìä","Áìè","Áìî","Áè±","Áì†","Áì£","Áìß","Áì©","ÁìÆ","Áì≤","Áì∞","Áì±","Áì∏","Áì∑","ÁîÑ","ÁîÉ","ÁîÖ","Áîå","Áîé","Áîç","Áîï","Áîì","Áîû","Áî¶","Áî¨","Áîº","ÁïÑ","Áïç","Áïä","Áïâ","Áïõ","ÁïÜ","Áïö","Áï©","Áï§","Áïß","Áï´","Áï≠","Áï∏","Áï∂","ÁñÜ","Áñá","Áï¥","Áñä","Áñâ","ÁñÇ","Áñî","Áñö","Áñù","Áñ•","Áñ£","ÁóÇ","Áñ≥","ÁóÉ","Áñµ","ÁñΩ","Áñ∏","Áñº","Áñ±","Áóç","Áóä","Áóí","Áóô","Áó£","Áóû","Áóæ","Áóø","Áóº","ÁòÅ","Áó∞","Áó∫","Áó≤","Áó≥","Áòã","Áòç","Áòâ","Áòü","Áòß","Áò†","Áò°","Áò¢","Áò§","Áò¥","Áò∞","Áòª","Áôá","Áôà","ÁôÜ","Áôú","Áôò","Áô°","Áô¢","Áô®","Áô©","Áô™","Áôß","Áô¨","Áô∞","Áô≤","Áô∂","Áô∏","Áôº","ÁöÄ","ÁöÉ","Áöà","Áöã","Áöé","Áöñ","Áöì","Áöô","Áöö","Áö∞","Áö¥","Áö∏","Áöπ","Áö∫","ÁõÇ","Áõç","Áõñ","Áõí","Áõû","Áõ°","Áõ•","Áõß","Áõ™","ËòØ","Áõª","Áúà","Áúá","ÁúÑ","Áú©","Áú§","Áúû","Áú•","Áú¶","Áúõ","Áú∑","Áú∏","Áùá","Áùö","Áù®","Áù´","Áùõ","Áù•","Áùø","Áùæ","Áùπ","Áûé","Áûã","Áûë","Áû†","Áûû","Áû∞","Áû∂","Áûπ","Áûø","Áûº","ÁûΩ","Áûª","Áüá","Áüç","Áüó","Áüö","Áüú","Áü£","ÁüÆ","Áüº","Á†å","Á†í","Á§¶","Á††","Á§™","Á°Ö","Á¢é","Á°¥","Á¢Ü","Á°º","Á¢ö","Á¢å","Á¢£","Á¢µ","Á¢™","Á¢Ø","Á£ë","Á£Ü","Á£ã","Á£î","Á¢æ","Á¢º","Á£Ö","Á£ä","Á£¨","Á£ß","Á£ö","Á£Ω","Á£¥","Á§á","Á§í","Á§ë","Á§ô","Á§¨","Á§´","Á•Ä","Á•†","Á•ó","Á•ü","Á•ö","Á•ï","Á•ì","Á•∫","Á•ø","Á¶ä","Á¶ù","Á¶ß","ÈΩã","Á¶™","Á¶Æ","Á¶≥","Á¶π","Á¶∫","Áßâ","Áßï","Áßß","Áß¨","Áß°","Áß£","Á®à","Á®ç","Á®ò","Á®ô","Á®†","Á®ü","Á¶Ä","Á®±","Á®ª","Á®æ","Á®∑","Á©É","Á©ó","Á©â","Á©°","Á©¢","Á©©","Èæù","Á©∞","Á©π","Á©Ω","Á™à","Á™ó","Á™ï","Á™ò","Á™ñ","Á™©","Á´à","Á™∞","Á™∂","Á´Ö","Á´Ñ","Á™ø","ÈÇÉ","Á´á","Á´ä","Á´ç","Á´è","Á´ï","Á´ì","Á´ô","Á´ö","Á´ù","Á´°","Á´¢","Á´¶","Á´≠","Á´∞","Á¨Ç","Á¨è","Á¨ä","Á¨Ü","Á¨≥","Á¨ò","Á¨ô","Á¨û","Á¨µ","Á¨®","Á¨∂","Á≠ê","Á≠∫","Á¨Ñ","Á≠ç","Á¨ã","Á≠å","Á≠Ö","Á≠µ","Á≠•","Á≠¥","Á≠ß","Á≠∞","Á≠±","Á≠¨","Á≠Æ","ÁÆù","ÁÆò","ÁÆü","ÁÆç","ÁÆú","ÁÆö","ÁÆã","ÁÆí","ÁÆè","Á≠ù","ÁÆô","ÁØã","ÁØÅ","ÁØå","ÁØè","ÁÆ¥","ÁØÜ","ÁØù","ÁØ©","Á∞ë","Á∞î","ÁØ¶","ÁØ•","Á±†","Á∞Ä","Á∞á","Á∞ì","ÁØ≥","ÁØ∑","Á∞ó","Á∞ç","ÁØ∂","Á∞£","Á∞ß","Á∞™","Á∞ü","Á∞∑","Á∞´","Á∞Ω","Á±å","Á±É","Á±î","Á±è","Á±Ä","Á±ê","Á±ò","Á±ü","Á±§","Á±ñ","Á±•","Á±¨","Á±µ","Á≤É","Á≤ê","Á≤§","Á≤≠","Á≤¢","Á≤´","Á≤°","Á≤®","Á≤≥","Á≤≤","Á≤±","Á≤Æ","Á≤π","Á≤Ω","Á≥Ä","Á≥Ö","Á≥Ç","Á≥ò","Á≥í","Á≥ú","Á≥¢","È¨ª","Á≥Ø","Á≥≤","Á≥¥","Á≥∂","Á≥∫","Á¥Ü","Á¥Ç","Á¥ú","Á¥ï","Á¥ä","ÁµÖ","Áµã","Á¥Æ","Á¥≤","Á¥ø","Á¥µ","ÁµÜ","Áµ≥","Áµñ","Áµé","Áµ≤","Áµ®","ÁµÆ","Áµè","Áµ£","Á∂ì","Á∂â","Áµõ","Á∂è","ÁµΩ","Á∂õ","Á∂∫","Á∂Æ","Á∂£","Á∂µ","Á∑á","Á∂Ω","Á∂´","Á∏Ω","Á∂¢","Á∂Ø","Á∑ú","Á∂∏","Á∂ü","Á∂∞","Á∑ò","Á∑ù","Á∑§","Á∑û","Á∑ª","Á∑≤","Á∑°","Á∏Ö","Á∏ä","Á∏£","Á∏°","Á∏í","Á∏±","Á∏ü","Á∏â","Á∏ã","Á∏¢","ÁπÜ","Áπ¶","Á∏ª","Á∏µ","Á∏π","ÁπÉ","Á∏∑","Á∏≤","Á∏∫","Áπß","Áπù","Áπñ","Áπû","Áπô","Áπö","Áππ","Áπ™","Áπ©","Áπº","Áπª","Á∫É","Á∑ï","ÁπΩ","ËæÆ","Áπø","Á∫à","Á∫â","Á∫å","Á∫í","Á∫ê","Á∫ì","Á∫î","Á∫ñ","Á∫é","Á∫õ","Á∫ú","Áº∏","Áº∫","ÁΩÖ","ÁΩå","ÁΩç","ÁΩé","ÁΩê","ÁΩë","ÁΩï","ÁΩî","ÁΩò","ÁΩü","ÁΩ†","ÁΩ®","ÁΩ©","ÁΩß","ÁΩ∏","ÁæÇ","ÁæÜ","ÁæÉ","Áæà","Áæá","Áæå","Áæî","Áæû","Áæù","Áæö","Áæ£","ÁæØ","Áæ≤","Áæπ","ÁæÆ","Áæ∂","Áæ∏","Ë≠±","ÁøÖ","ÁøÜ","Áøä","Áøï","Áøî","Áø°","Áø¶","Áø©","Áø≥","Áøπ","È£ú","ËÄÜ","ËÄÑ","ËÄã","ËÄí","ËÄò","ËÄô","ËÄú","ËÄ°","ËÄ®","ËÄø","ËÄª","ËÅä","ËÅÜ","ËÅí","ËÅò","ËÅö","ËÅü","ËÅ¢","ËÅ®","ËÅ≥","ËÅ≤","ËÅ∞","ËÅ∂","ËÅπ","ËÅΩ","ËÅø","ËÇÑ","ËÇÜ","ËÇÖ","ËÇõ","ËÇì","ËÇö","ËÇ≠","ÂÜê","ËÇ¨","ËÉõ","ËÉ•","ËÉô","ËÉù","ËÉÑ","ËÉö","ËÉñ","ËÑâ","ËÉØ","ËÉ±","ËÑõ","ËÑ©","ËÑ£","ËÑØ","ËÖã","Èöã","ËÖÜ","ËÑæ","ËÖì","ËÖë","ËÉº","ËÖ±","ËÖÆ","ËÖ•","ËÖ¶","ËÖ¥","ËÜÉ","ËÜà","ËÜä","ËÜÄ","ËÜÇ","ËÜ†","ËÜï","ËÜ§","ËÜ£","ËÖü","ËÜì","ËÜ©","ËÜ∞","ËÜµ","ËÜæ","ËÜ∏","ËÜΩ","ËáÄ","ËáÇ","ËÜ∫","Ëáâ","Ëáç","Ëáë","Ëáô","Ëáò","Ëáà","Ëáö","Ëáü","Ëá†","Ëáß","Ëá∫","Ëáª","Ëáæ","ËàÅ","ËàÇ","ËàÖ","Ëàá","Ëàä","Ëàç","Ëàê","Ëàñ","Ëà©","Ëà´","Ëà∏","Ëà≥","ËâÄ","Ëâô","Ëâò","Ëâù","Ëâö","Ëâü","Ëâ§","Ëâ¢","Ëâ®","Ëâ™","Ëâ´","ËàÆ","Ëâ±","Ëâ∑","Ëâ∏","Ëâæ","Ëäç","Ëäí","Ëä´","Ëäü","Ëäª","Ëä¨","Ëã°","Ëã£","Ëãü","Ëãí","Ëã¥","Ëã≥","Ëã∫","Ëéì","ËåÉ","Ëãª","Ëãπ","Ëãû","ËåÜ","Ëãú","Ëåâ","Ëãô","Ëåµ","Ëå¥","Ëåñ","Ëå≤","Ëå±","ËçÄ","Ëåπ","Ëçê","ËçÖ","ËåØ","Ëå´","Ëåó","Ëåò","ËéÖ","Ëéö","Ëé™","Ëéü","Ëé¢","Ëéñ","Ëå£","Ëéé","Ëéá","Ëéä","Ëçº","Ëéµ","Ëç≥","Ëçµ","Ëé†","Ëéâ","Ëé®","Ëè¥","Ëêì","Ëè´","Ëèé","ËèΩ","ËêÉ","Ëèò","Ëêã","ËèÅ","Ëè∑","Ëêá","Ëè†","Ëè≤","Ëêç","Ëê¢","Ëê†","ËéΩ","Ëê∏","ËîÜ","Ëèª","Ëë≠","Ëê™","Ëêº","Ëïö","ËíÑ","Ëë∑","Ëë´","Ëí≠","ËëÆ","ËíÇ","Ëë©","ËëÜ","Ëê¨","ËëØ","Ëëπ","Ëêµ","Ëìä","Ëë¢","Ëíπ","Ëíø","Ëíü","Ëìô","Ëìç","Ëíª","Ëìö","Ëìê","ËìÅ","ËìÜ","Ëìñ","Ëí°","Ëî°","Ëìø","Ëì¥","Ëîó","Ëîò","Ëî¨","Ëîü","Ëîï","Ëîî","Ëìº","ËïÄ","Ëï£","Ëïò","Ëïà","ËïÅ","ËòÇ","Ëïã","Ëïï","ËñÄ","Ëñ§","Ëñà","Ëñë","Ëñä","Ëñ®","Ëï≠","Ëñî","Ëñõ","Ëó™","Ëñá","Ëñú","Ëï∑","Ëïæ","Ëñê","Ëóâ","Ëñ∫","Ëóè","Ëñπ","Ëóê","Ëóï","Ëóù","Ëó•","Ëóú","Ëóπ","Ëòä","Ëòì","Ëòã","Ëóæ","Ëó∫","ËòÜ","Ëò¢","Ëòö","Ëò∞","Ëòø","Ëôç","‰πï","Ëôî","Ëôü","Ëôß","Ëô±","Ëöì","Ëö£","Ëö©","Ëö™","Ëöã","Ëöå","Ëö∂","ËöØ","ËõÑ","ËõÜ","Ëö∞","Ëõâ","Ë†£","Ëö´","Ëõî","Ëõû","Ëõ©","Ëõ¨","Ëõü","Ëõõ","ËõØ","Ëúí","ËúÜ","Ëúà","ËúÄ","ËúÉ","Ëõª","Ëúë","Ëúâ","Ëúç","Ëõπ","Ëúä","Ëú¥","Ëúø","Ëú∑","Ëúª","Ëú•","Ëú©","Ëúö","Ëù†","Ëùü","Ëù∏","Ëùå","Ëùé","Ëù¥","Ëùó","Ëù®","ËùÆ","Ëùô","Ëùì","Ëù£","Ëù™","Ë†Ö","Ëû¢","Ëûü","ËûÇ","ËûØ","Ëüã","ËûΩ","ËüÄ","Ëüê","Èõñ","Ëû´","ËüÑ","Ëû≥","Ëüá","ËüÜ","Ëûª","ËüØ","Ëü≤","Ëü†","Ë†è","Ë†ç","Ëüæ","Ëü∂","Ëü∑","Ë†é","Ëüí","Ë†ë","Ë†ñ","Ë†ï","Ë†¢","Ë†°","Ë†±","Ë†∂","Ë†π","Ë†ß","Ë†ª","Ë°Ñ","Ë°Ç","Ë°í","Ë°ô","Ë°û","Ë°¢","Ë°´","Ë¢Å","Ë°æ","Ë¢û","Ë°µ","Ë°Ω","Ë¢µ","Ë°≤","Ë¢Ç","Ë¢ó","Ë¢í","Ë¢Æ","Ë¢ô","Ë¢¢","Ë¢ç","Ë¢§","Ë¢∞","Ë¢ø","Ë¢±","Ë£É","Ë£Ñ","Ë£î","Ë£ò","Ë£ô","Ë£ù","Ë£π","Ë§Ç","Ë£º","Ë£¥","Ë£®","Ë£≤","Ë§Ñ","Ë§å","Ë§ä","Ë§ì","Ë•É","Ë§û","Ë§•","Ë§™","Ë§´","Ë•Å","Ë•Ñ","Ë§ª","Ë§∂","Ë§∏","Ë•å","Ë§ù","Ë•†","Ë•û","Ë•¶","Ë•§","Ë•≠","Ë•™","Ë•Ø","Ë•¥","Ë•∑","Ë•æ","Ë¶É","Ë¶à","Ë¶ä","Ë¶ì","Ë¶ò","Ë¶°","Ë¶©","Ë¶¶","Ë¶¨","Ë¶Ø","Ë¶≤","Ë¶∫","Ë¶Ω","Ë¶ø","ËßÄ","Ëßö","Ëßú","Ëßù","Ëßß","Ëß¥","Ëß∏","Ë®É","Ë®ñ","Ë®ê","Ë®å","Ë®õ","Ë®ù","Ë®•","Ë®∂","Ë©Å","Ë©õ","Ë©í","Ë©Ü","Ë©à","Ë©º","Ë©≠","Ë©¨","Ë©¢","Ë™Ö","Ë™Ç","Ë™Ñ","Ë™®","Ë™°","Ë™ë","Ë™•","Ë™¶","Ë™ö","Ë™£","Ë´Ñ","Ë´ç","Ë´Ç","Ë´ö","Ë´´","Ë´≥","Ë´ß","Ë´§","Ë´±","Ë¨î","Ë´†","Ë´¢","Ë´∑","Ë´û","Ë´õ","Ë¨å","Ë¨á","Ë¨ö","Ë´°","Ë¨ñ","Ë¨ê","Ë¨ó","Ë¨†","Ë¨≥","Èû´","Ë¨¶","Ë¨´","Ë¨æ","Ë¨®","Ë≠Å","Ë≠å","Ë≠è","Ë≠é","Ë≠â","Ë≠ñ","Ë≠õ","Ë≠ö","Ë≠´","Ë≠ü","Ë≠¨","Ë≠Ø","Ë≠¥","Ë≠Ω","ËÆÄ","ËÆå","ËÆé","ËÆí","ËÆì","ËÆñ","ËÆô","ËÆö","Ë∞∫","Ë±Å","Ë∞ø","Ë±à","Ë±å","Ë±é","Ë±ê","Ë±ï","Ë±¢","Ë±¨","Ë±∏","Ë±∫","Ë≤Ç","Ë≤â","Ë≤Ö","Ë≤ä","Ë≤ç","Ë≤é","Ë≤î","Ë±º","Ë≤ò","Êàù","Ë≤≠","Ë≤™","Ë≤Ω","Ë≤≤","Ë≤≥","Ë≤Æ","Ë≤∂","Ë≥à","Ë≥Å","Ë≥§","Ë≥£","Ë≥ö","Ë≥Ω","Ë≥∫","Ë≥ª","Ë¥Ñ","Ë¥Ö","Ë¥ä","Ë¥á","Ë¥è","Ë¥ç","Ë¥ê","ÈΩé","Ë¥ì","Ë≥ç","Ë¥î","Ë¥ñ","Ëµß","Ëµ≠","Ëµ±","Ëµ≥","Ë∂Å","Ë∂ô","Ë∑Ç","Ë∂æ","Ë∂∫","Ë∑è","Ë∑ö","Ë∑ñ","Ë∑å","Ë∑õ","Ë∑ã","Ë∑™","Ë∑´","Ë∑ü","Ë∑£","Ë∑º","Ë∏à","Ë∏â","Ë∑ø","Ë∏ù","Ë∏û","Ë∏ê","Ë∏ü","ËπÇ","Ë∏µ","Ë∏∞","Ë∏¥","Ëπä","Ëπá","Ëπâ","Ëπå","Ëπê","Ëπà","Ëπô","Ëπ§","Ëπ†","Ë∏™","Ëπ£","Ëπï","Ëπ∂","Ëπ≤","Ëπº","Ë∫Å","Ë∫á","Ë∫Ö","Ë∫Ñ","Ë∫ã","Ë∫ä","Ë∫ì","Ë∫ë","Ë∫î","Ë∫ô","Ë∫™","Ë∫°","Ë∫¨","Ë∫∞","ËªÜ","Ë∫±","Ë∫æ","ËªÖ","Ëªà","Ëªã","Ëªõ","Ëª£","Ëªº","Ëªª","Ëª´","Ëªæ","Ëºä","ËºÖ","Ëºï","Ëºí","Ëºô","Ëºì","Ëºú","Ëºü","Ëºõ","Ëºå","Ëº¶","Ëº≥","Ëºª","Ëºπ","ËΩÖ","ËΩÇ","Ëºæ","ËΩå","ËΩâ","ËΩÜ","ËΩé","ËΩó","ËΩú","ËΩ¢","ËΩ£","ËΩ§","Ëæú","Ëæü","Ëæ£","Ëæ≠","ËæØ","Ëæ∑","Ëøö","Ëø•","Ëø¢","Ëø™","ËøØ","ÈÇá","Ëø¥","ÈÄÖ","Ëøπ","Ëø∫","ÈÄë","ÈÄï","ÈÄ°","ÈÄç","ÈÄû","ÈÄñ","ÈÄã","ÈÄß","ÈÄ∂","ÈÄµ","ÈÄπ","Ëø∏","ÈÅè","ÈÅê","ÈÅë","ÈÅí","ÈÄé","ÈÅâ","ÈÄæ","ÈÅñ","ÈÅò","ÈÅû","ÈÅ®","ÈÅØ","ÈÅ∂","Èö®","ÈÅ≤","ÈÇÇ","ÈÅΩ","ÈÇÅ","ÈÇÄ","ÈÇä","ÈÇâ","ÈÇè","ÈÇ®","ÈÇØ","ÈÇ±","ÈÇµ","ÈÉ¢","ÈÉ§","Êâà","ÈÉõ","ÈÑÇ","ÈÑí","ÈÑô","ÈÑ≤","ÈÑ∞","ÈÖä","ÈÖñ","ÈÖò","ÈÖ£","ÈÖ•","ÈÖ©","ÈÖ≥","ÈÖ≤","ÈÜã","ÈÜâ","ÈÜÇ","ÈÜ¢","ÈÜ´","ÈÜØ","ÈÜ™","ÈÜµ","ÈÜ¥","ÈÜ∫","ÈáÄ","ÈáÅ","Èáâ","Èáã","Èáê","Èáñ","Èáü","Èá°","Èáõ","Èáº","Èáµ","Èá∂","Èàû","Èáø","Èàî","Èà¨","Èàï","Èàë","Èâû","Èâó","ÈâÖ","Èââ","Èâ§","Èâà","Èäï","Èàø","Èâã","Èâê","Èäú","Èäñ","Èäì","Èäõ","Èâö","Èãè","Èäπ","Èä∑","Èã©","Èåè","Èã∫","ÈçÑ","ÈåÆ","Èåô","Èå¢","Èåö","Èå£","Èå∫","Èåµ","Èåª","Èçú","Èç†","Èçº","ÈçÆ","Èçñ","Èé∞","Èé¨","Èé≠","Èéî","Èéπ","Èèñ","Èèó","Èè®","Èè•","Èèò","ÈèÉ","Èèù","Èèê","Èèà","Èè§","Èêö","Èêî","Èêì","ÈêÉ","Èêá","Èêê","Èê∂","Èê´","Èêµ","Èê°","Èê∫","ÈëÅ","Èëí","ÈëÑ","Èëõ","Èë†","Èë¢","Èëû","Èë™","Èà©","Èë∞","Èëµ","Èë∑","ÈëΩ","Èëö","Èëº","Èëæ","ÈíÅ","Èëø","ÈñÇ","Èñá","Èñä","Èñî","Èññ","Èñò","Èñô","Èñ†","Èñ®","Èñß","Èñ≠","Èñº","Èñª","Èñπ","Èñæ","Èóä","Êø∂","ÈóÉ","Èóç","Èóå","Èóï","Èóî","Èóñ","Èóú","Èó°","Èó•","Èó¢","Èò°","Èò®","ÈòÆ","ÈòØ","ÈôÇ","Èôå","Èôè","Èôã","Èô∑","Èôú","Èôû","Èôù","Èôü","Èô¶","Èô≤","Èô¨","Èöç","Èöò","Èöï","Èöó","Èö™","Èöß","Èö±","Èö≤","Èö∞","Èö¥","Èö∂","Èö∏","Èöπ","Èõé","Èõã","Èõâ","Èõç","Ë•ç","Èõú","Èúç","Èõï","Èõπ","ÈúÑ","ÈúÜ","Èúà","Èúì","Èúé","Èúë","Èúè","Èúñ","Èúô","Èú§","Èú™","Èú∞","Èúπ","ÈúΩ","Èúæ","ÈùÑ","ÈùÜ","Èùà","ÈùÇ","Èùâ","Èùú","Èù†","Èù§","Èù¶","Èù®","Âãí","Èù´","Èù±","Èùπ","ÈûÖ","Èùº","ÈûÅ","Èù∫","ÈûÜ","Èûã","Èûè","Èûê","Èûú","Èû®","Èû¶","Èû£","Èû≥","Èû¥","ÈüÉ","ÈüÜ","Èüà","Èüã","Èüú","Èü≠","ÈΩè","Èü≤","Á´ü","Èü∂","Èüµ","È†è","È†å","È†∏","È†§","È†°","È†∑","È†Ω","È°Ü","È°è","È°ã","È°´","È°Ø","È°∞","È°±","È°¥","È°≥","È¢™","È¢Ø","È¢±","È¢∂","È£Ñ","È£É","È£Ü","È£©","È£´","È§É","È§â","È§í","È§î","È§ò","È§°","È§ù","È§û","È§§","È§†","È§¨","È§Æ","È§Ω","È§æ","È•Ç","È•â","È•Ö","È•ê","È•ã","È•ë","È•í","È•å","È•ï","È¶ó","È¶ò","È¶•","È¶≠","È¶Æ","È¶º","Èßü","Èßõ","Èßù","Èßò","Èßë","Èß≠","ÈßÆ","Èß±","Èß≤","Èßª","Èß∏","È®Å","È®è","È®Ö","Èß¢","È®ô","È®´","È®∑","È©Ö","È©Ç","È©Ä","È©É","È®æ","È©ï","È©ç","È©õ","È©ó","È©ü","È©¢","È©•","È©§","È©©","È©´","È©™","È™≠","È™∞","È™º","È´Ä","È´è","È´ë","È´ì","È´î","È´û","È´ü","È´¢","È´£","È´¶","È´Ø","È´´","È´Æ","È´¥","È´±","È´∑","È´ª","È¨Ü","È¨ò","È¨ö","È¨ü","È¨¢","È¨£","È¨•","È¨ß","È¨®","È¨©","È¨™","È¨Æ","È¨Ø","È¨≤","È≠Ñ","È≠É","È≠è","È≠ç","È≠é","È≠ë","È≠ò","È≠¥","ÈÆì","ÈÆÉ","ÈÆë","ÈÆñ","ÈÆó","ÈÆü","ÈÆ†","ÈÆ®","ÈÆ¥","ÈØÄ","ÈØä","ÈÆπ","ÈØÜ","ÈØè","ÈØë","ÈØí","ÈØ£","ÈØ¢","ÈØ§","ÈØî","ÈØ°","È∞∫","ÈØ≤","ÈØ±","ÈØ∞","È∞ï","È∞î","È∞â","È∞ì","È∞å","È∞Ü","È∞à","È∞í","È∞ä","È∞Ñ","È∞Æ","È∞õ","È∞•","È∞§","È∞°","È∞∞","È±á","È∞≤","È±Ü","È∞æ","È±ö","È±†","È±ß","È±∂","È±∏","È≥ß","È≥¨","È≥∞","È¥â","È¥à","È≥´","È¥É","È¥Ü","È¥™","È¥¶","È∂Ø","È¥£","È¥ü","ÈµÑ","È¥ï","È¥í","ÈµÅ","È¥ø","È¥æ","ÈµÜ","Èµà","Èµù","Èµû","Èµ§","Èµë","Èµê","Èµô","Èµ≤","È∂â","È∂á","È∂´","ÈµØ","Èµ∫","È∂ö","È∂§","È∂©","È∂≤","È∑Ñ","È∑Å","È∂ª","È∂∏","È∂∫","È∑Ü","È∑è","È∑Ç","È∑ô","È∑ì","È∑∏","È∑¶","È∑≠","È∑Ø","È∑Ω","È∏ö","È∏õ","È∏û","Èπµ","Èππ","ÈπΩ","È∫Å","È∫à","È∫ã","È∫å","È∫í","È∫ï","È∫ë","È∫ù","È∫•","È∫©","È∫∏","È∫™","È∫≠","Èù°","Èªå","Èªé","Èªè","Èªê","Èªî","Èªú","Èªû","Èªù","Èª†","Èª•","Èª®","ÈªØ","Èª¥","Èª∂","Èª∑","Èªπ","Èªª","Èªº","ÈªΩ","Èºá","Èºà","Áö∑","Èºï","Èº°","Èº¨","Èºæ","ÈΩä","ÈΩí","ÈΩî","ÈΩ£","ÈΩü","ÈΩ†","ÈΩ°","ÈΩ¶","ÈΩß","ÈΩ¨","ÈΩ™","ÈΩ∑","ÈΩ≤","ÈΩ∂","Èæï","Èæú","Èæ†","Â†Ø","Êßá","ÈÅô","Áë§","Âáú","ÁÜô","Âôì","Â∑¢","Â∏î","Â∏ò","Âπò","Âπû","Â∫æ","Ô§®","Âªã","Âªπ","ÂºÄ","ÂºÇ","Âºá","Âºù","Âº£","Âº¥","Âº∂","ÂºΩ","ÂΩÄ","ÂΩÖ","ÂΩî","ÂΩò","ÂΩ§","ÂΩß","ÂΩΩ","Âæâ","Âæú","Âæß","ÂæØ","Âæµ","Âæ∑","Âøâ","Âøû","Âø°","Âø©","ÊÄç","ÊÄî","ÊÄò","ÊÄ≥","ÊÄµ","ÊÅá","Ô®Ω","ÊÇù","ÊÇû","ÊÉã","ÊÉî","ÊÉï","ÊÉù","ÊÉ∏","ÊÑú","ÊÑ´","ÊÑ∞","ÊÑ∑","Ô®æ","ÊÜç","Ô®ø","ÊÜº","ÊÜπ","Ô©Ä","Êà¢","Êàæ","ÊâÉ","Êâñ","Êâö","ÊâØ","ÊäÖ","ÊãÑ","Êãñ","Êãº","Êåä","Êåò","Êåπ","ÊçÉ","Êç•","Êçº","Êè•","Êè≠","Êèµ","Êêê","Êêî","Êê¢","Êëπ","Êëë","Êë†","Êë≠","Êìé","Êíæ","Êíø","„êÇ","†Öò","‰ªΩ","‰ªø","‰æö","‰øâ","ÂÇú","ÂÑû","ÂÜº","„îü","Âåá","Âç°","Âç¨","Ë©π","†Æ∑","Âëç","Âíñ","Âíú","Âí©","Âîé","Âïä","Âô≤","Âõ§","Âú≥","Âú¥","Ô®ê","Â¢Ä","Âß§","Â®£","Â©ï","ÂØ¨","Ô®ë","„ü¢","Â∫¨","Âº¥","ÂΩÖ","Âæ∑","ÊÄó","Ô©´","ÊÑ∞","Êò§","Êõà","Êõô","Êõ∫","Êõª","Ê°í","ÈøÑ","Ê§ë","Ê§ª","Ê©Ö","Ê™ë","Ê´õ","£èå","£èæ","£óÑ","ÊØ±","Ê≥†","Ê¥Æ","Ô©Ö","Ê∂ø","Ê∑ä","Ê∑∏","Ô©Ü","ÊΩû","Êøπ","ÁÅ§","Ô©¨","§ãÆ","ÁÖá","ÁáÅ","ÁàÄ","Áéü","Áé®","Áèâ","Áèñ","Áêõ","Áê°","Ô©ä","Áê¶","Áê™","Áê¨","Áêπ","Áëã","„ªö","Áïµ","ÁñÅ","Áù≤","‰Çì","Á£à","Á£†","Á•á","Á¶Æ","ÈøÜ","‰ÑÉ","ÈøÖ","Áßö","Á®û","Á≠ø","Á∞±","‰â§","Á∂ã","Áæ°","ËÑò","ËÑ∫","Ô©≠","ËäÆ","Ëëõ","Ëìú","Ëì¨","Ëïô","Ëóé","Ëùï","Ëü¨","Ë†ã","Ë£µ","Ëßí","Ë´∂","Ë∑é","Ëæª","Ëø∂","ÈÉù","ÈÑß","ÈÑ≠","ÈÜ≤","Èà≥","Èäà","Èå°","Èçà","Èñí","Èõû","È§É","È•Ä","È´ô","ÈØñ","È∑ó","È∫¥","È∫µ","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","‚õå","‚õç","‚ùó","‚õè","‚õê","‚õë","","‚õí","‚õï","‚õì","‚õî","","","","","ÓÉò","ÓÉô","","","‚õñ","‚õó","‚õò","‚õô","‚õö","‚õõ","‚õú","‚õù","‚õû","‚õü","‚õ†","‚õ°","‚≠ï","„âà","„ââ","„âä","„âã","„âå","„âç","„âé","„âè","","","","","‚íë","‚íí","‚íì","ÓÉ∏","ÓÉπ","ÓÉ∫","ÓÉª","ÓÉº","ÓÉΩ","ÓÉæ","ÓÉø","ÓÜÄ","ÓÜÅ","ÓÜÇ","ÓÜÉ","ÓÜÑ","ÓÜÖ","ÓÜÜ","ÓÜá","‚¨õ","‚¨§","ÓÜä","ÓÜã","ÓÜå","ÓÜç","ÓÜé","‚öø","ÓÜê","ÓÜë","ÓÜí","ÓÜì","ÓÜî","ÓÜï","ÓÜñ","ÓÜó","ÓÜò","ÓÜô","ÓÜö","„äô","ÓÜú","","","","","","","","","","","‚õ£","‚≠ñ","‚≠ó","‚≠ò","‚≠ô","‚òì","„äã","„Äí","‚õ®","„âÜ","„âÖ","‚õ©","‡øñ","‚õ™","‚õ´","‚õ¨","‚ô®","‚õ≠","‚õÆ","‚õØ","‚öì","‚úà","‚õ∞","‚õ±","‚õ≤","‚õ≥","‚õ¥","‚õµ","ÓáÉ","‚íπ","‚ìà","‚õ∂","Óáá","Óáà","Óáâ","Óáä","Óáã","‚õ∑","‚õ∏","‚õπ","‚õ∫","Óáê","‚òé","‚õª","‚õº","‚õΩ","‚õæ","Óáñ","‚õø","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","‚û°","‚¨Ö","‚¨Ü","‚¨á","‚¨Ø","‚¨Æ","Âπ¥","Êúà","Êó•","ÂÜÜ","„é°","„é•","„éù","„é†","„é§","Óäè","‚íà","‚íâ","‚íä","‚íã","‚íå","‚íç","‚íé","‚íè","‚íê","Óäê","Óäë","Óäí","Óäì","Óäî","Óäï","Óäñ","Óäó","Óäò","Óäô","Óäö","Óäõ","Óäú","Óäù","Óäû","Óäü","„à≥","„à∂","„à≤","„à±","„àπ","„âÑ","‚ñ∂","‚óÄ","„Äñ","„Äó","‚üê","¬≤","¬≥","Óä§","Óä•","Óä¶","Óäß","Óä®","Óä©","Óä™","Óä´","Óä¨","Óä≠","ÓäÆ","ÓäØ","Óä∞","Óä±","Óä≤","Óä≥","Óä¥","Óäµ","Óä∂","Óä∑","Óä∏","Óäπ","Óä∫","Óäª","Óäº","ÓäΩ","Óäæ","Óäø","ÓãÄ","ÓãÅ","ÓãÇ","ÓãÉ","ÓãÜ","„âá","ÓãÑ","ÓãÖ","‚Ñª","","","","„à™","„à´","„à¨","„à≠","„àÆ","„àØ","„à∞","„à∑","„çæ","„çΩ","„çº","„çª","‚Ññ","‚Ñ°","„Ä∂","‚öæ","Óãç","Óãé","Óãè","Óãê","Óãë","Óãí","Óãì","Óãî","Óãï","Óãñ","Óãó","Óãò","Óãô","Óãö","Óãõ","Óãú","Óãù","Óãû","Óãü","Óã†","Óã°","Óã¢","‚Ñì","„éè","„éê","„èä","„éû","„é¢","„ç±","","","¬Ω","‚Üâ","‚Öì","‚Öî","¬º","¬æ","‚Öï","‚Öñ","‚Öó","‚Öò","‚Öô","‚Öö","‚Öê","‚Öõ","‚Öë","‚Öí","‚òÄ","‚òÅ","‚òÇ","‚õÑ","‚òñ","‚òó","‚õâ","‚õä","‚ô¶","‚ô•","‚ô£","‚ô†","‚õã","‚®Ä","‚Äº","‚Åâ","‚õÖ","‚òî","‚õÜ","‚òÉ","‚õá","‚ö°","‚õà","","‚öû","‚öü","‚ô¨","‚òé","","","","‚Ö†","‚Ö°","‚Ö¢","‚Ö£","‚Ö§","‚Ö•","‚Ö¶","‚Öß","‚Ö®","‚Ö©","‚Ö™","‚Ö´","‚ë∞","‚ë±","‚ë≤","‚ë≥","‚ë¥","‚ëµ","‚ë∂","‚ë∑","‚ë∏","‚ëπ","‚ë∫","‚ëª","‚ëº","‚ëΩ","‚ëæ","‚ëø","„âë","„âí","„âì","„âî","ÓéÉ","ÓéÑ","ÓéÖ","ÓéÜ","Óéá","Óéà","Óéâ","Óéä","Óéã","Óéå","Óéç","Óéé","Óéè","Óéê","Óéë","Óéí","Óéì","Óéî","Óéï","Óéñ","Óéó","Óéò","Óéô","Óéö","Óéõ","Óéú","„âï","„âñ","„âó","„âò","„âô","„âö","‚ë†","‚ë°","‚ë¢","‚ë£","‚ë§","‚ë•","‚ë¶","‚ëß","‚ë®","‚ë©","‚ë™","‚ë´","‚ë¨","‚ë≠","‚ëÆ","‚ëØ","‚ù∂","‚ù∑","‚ù∏","‚ùπ","‚ù∫","‚ùª","‚ùº","‚ùΩ","‚ùæ","‚ùø","‚ì´","‚ì¨","„âõ",""],I=["„êÇ","ÓÇÅ","‰ªΩ","‰ªø","‰æö","‰øâ","ÂÇú","ÂÑû","ÂÜº","„îü","Âåá","Âç°","Âç¨","Ë©π","ÓÇÑ","Âëç","Âíñ","Âíú","Âí©","Âîé","Âïä","Âô≤","Âõ§","Âú≥","Âú¥","Ô®ê","Â¢Ä","Âß§","Â®£","Â©ï","ÂØ¨","Ô®ë","„ü¢","Â∫¨","Âº¥","ÂΩÖ","Âæ∑","ÊÄó","Ô©´","ÊÑ∞","Êò§","Êõà","Êõô","Êõ∫","Êõª","Ê°í","ÈøÑ","Ê§ë","Ê§ª","Ê©Ö","Ê™ë","Ê´õ","ÓÇä","ÓÇã","ÓÇå","ÊØ±","Ê≥†","Ê¥Æ","Ô©Ö","Ê∂ø","Ê∑ä","Ê∑∏","Ô©Ü","ÊΩû","Êøπ","ÁÅ§","Ô©¨","ÓÇé","ÁÖá","ÁáÅ","ÁàÄ","Áéü","Áé®","Áèâ","Áèñ","Áêõ","Áê°","Ô©ä","Áê¶","Áê™","Áê¨","Áêπ","Áëã","„ªö","Áïµ","ÁñÅ","Áù≤","‰Çì","Á£à","Á£†","Á•á","Á¶Æ","ÈøÜ","‰ÑÉ","ÈøÖ","Áßö","Á®û","Á≠ø","Á∞±","‰â§","Á∂ã","Áæ°","ËÑò","ËÑ∫","Ô©≠","ËäÆ","Ëëõ","Ëìú","Ëì¨","Ëïô","Ëóé","Ëùï","Ëü¨","Ë†ã","Ë£µ","Ëßí","Ë´∂","Ë∑é","Ëæª","Ëø∂","ÈÉù","ÈÑß","ÈÑ≠","ÈÜ≤","Èà≥","Èäà","Èå°","Èçà","Èñí","Èõû","È§É","È•Ä","È´ô","ÈØñ","È∑ó","È∫¥","È∫µ","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","‚õå","‚õç","‚ùó","‚õè","‚õê","‚õë","","‚õí","‚õï","‚õì","‚õî","","","","","ÓÉò","ÓÉô","","","‚õñ","‚õó","‚õò","‚õô","‚õö","‚õõ","‚õú","‚õù","‚õû","‚õü","‚õ†","‚õ°","‚≠ï","„âà","„ââ","„âä","„âã","„âå","„âç","„âé","„âè","","","","","‚íë","‚íí","‚íì","ÓÉ∏","ÓÉπ","ÓÉ∫","ÓÉª","ÓÉº","ÓÉΩ","ÓÉæ","ÓÉø","ÓÜÄ","ÓÜÅ","ÓÜÇ","ÓÜÉ","ÓÜÑ","ÓÜÖ","ÓÜÜ","ÓÜá","‚¨õ","‚¨§","ÓÜä","ÓÜã","ÓÜå","ÓÜç","ÓÜé","‚öø","ÓÜê","ÓÜë","ÓÜí","ÓÜì","ÓÜî","ÓÜï","ÓÜñ","ÓÜó","ÓÜò","ÓÜô","ÓÜö","„äô","ÓÜú","","","","","","","","","","","‚õ£","‚≠ñ","‚≠ó","‚≠ò","‚≠ô","‚òì","„äã","„Äí","‚õ®","„âÜ","„âÖ","‚õ©","‡øñ","‚õ™","‚õ´","‚õ¨","‚ô®","‚õ≠","‚õÆ","‚õØ","‚öì","‚úà","‚õ∞","‚õ±","‚õ≤","‚õ≥","‚õ¥","‚õµ","ÓáÉ","‚íπ","‚ìà","‚õ∂","Óáá","Óáà","Óáâ","Óáä","Óáã","‚õ∑","‚õ∏","‚õπ","‚õ∫","Óáê","‚òé","‚õª","‚õº","‚õΩ","‚õæ","Óáñ","‚õø","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","‚û°","‚¨Ö","‚¨Ü","‚¨á","‚¨Ø","‚¨Æ","Âπ¥","Êúà","Êó•","ÂÜÜ","„é°","„é•","„éù","„é†","„é§","Óäè","‚íà","‚íâ","‚íä","‚íã","‚íå","‚íç","‚íé","‚íè","‚íê","Óäê","Óäë","Óäí","Óäì","Óäî","Óäï","Óäñ","Óäó","Óäò","Óäô","Óäö","Óäõ","Óäú","Óäù","Óäû","Óäü","„à≥","„à∂","„à≤","„à±","„àπ","„âÑ","‚ñ∂","‚óÄ","„Äñ","„Äó","‚üê","¬≤","¬≥","Óä§","Óä•","Óä¶","Óäß","Óä®","Óä©","Óä™","Óä´","Óä¨","Óä≠","ÓäÆ","ÓäØ","Óä∞","Óä±","Óä≤","Óä≥","Óä¥","Óäµ","Óä∂","Óä∑","Óä∏","Óäπ","Óä∫","Óäª","Óäº","ÓäΩ","Óäæ","Óäø","ÓãÄ","ÓãÅ","ÓãÇ","ÓãÉ","ÓãÜ","„âá","ÓãÑ","ÓãÖ","‚Ñª","","","","„à™","„à´","„à¨","„à≠","„àÆ","„àØ","„à∞","„à∑","„çæ","„çΩ","„çº","„çª","‚Ññ","‚Ñ°","„Ä∂","‚öæ","Óãç","Óãé","Óãè","Óãê","Óãë","Óãí","Óãì","Óãî","Óãï","Óãñ","Óãó","Óãò","Óãô","Óãö","Óãõ","Óãú","Óãù","Óãû","Óãü","Óã†","Óã°","Óã¢","‚Ñì","„éè","„éê","„èä","„éû","„é¢","„ç±","","","¬Ω","‚Üâ","‚Öì","‚Öî","¬º","¬æ","‚Öï","‚Öñ","‚Öó","‚Öò","‚Öô","‚Öö","‚Öê","‚Öõ","‚Öë","‚Öí","‚òÄ","‚òÅ","‚òÇ","‚õÑ","‚òñ","‚òó","‚õâ","‚õä","‚ô¶","‚ô•","‚ô£","‚ô†","‚õã","‚®Ä","‚Äº","‚Åâ","‚õÖ","‚òî","‚õÜ","‚òÉ","‚õá","‚ö°","‚õà","","‚öû","‚öü","‚ô¨","‚òé","","","","‚Ö†","‚Ö°","‚Ö¢","‚Ö£","‚Ö§","‚Ö•","‚Ö¶","‚Öß","‚Ö®","‚Ö©","‚Ö™","‚Ö´","‚ë∞","‚ë±","‚ë≤","‚ë≥","‚ë¥","‚ëµ","‚ë∂","‚ë∑","‚ë∏","‚ëπ","‚ë∫","‚ëª","‚ëº","‚ëΩ","‚ëæ","‚ëø","„âë","„âí","„âì","„âî","ÓéÉ","ÓéÑ","ÓéÖ","ÓéÜ","Óéá","Óéà","Óéâ","Óéä","Óéã","Óéå","Óéç","Óéé","Óéè","Óéê","Óéë","Óéí","Óéì","Óéî","Óéï","Óéñ","Óéó","Óéò","Óéô","Óéö","Óéõ","Óéú","„âï","„âñ","„âó","„âò","„âô","„âö","‚ë†","‚ë°","‚ë¢","‚ë£","‚ë§","‚ë•","‚ë¶","‚ëß","‚ë®","‚ë©","‚ë™","‚ë´","‚ë¨","‚ë≠","‚ëÆ","‚ëØ","‚ù∂","‚ù∑","‚ù∏","‚ùπ","‚ù∫","‚ùª","‚ùº","‚ùΩ","‚ùæ","‚ùø","‚ì´","‚ì¨","„âõ",""],P=["„êÇ","†Öò","‰ªΩ","‰ªø","‰æö","‰øâ","ÂÇú","ÂÑû","ÂÜº","„îü","Âåá","Âç°","Âç¨","Ë©π","†Æ∑","Âëç","Âíñ","Âíú","Âí©","Âîé","Âïä","Âô≤","Âõ§","Âú≥","Âú¥","Ô®ê","Â¢Ä","Âß§","Â®£","Â©ï","ÂØ¨","Ô®ë","„ü¢","Â∫¨","Âº¥","ÂΩÖ","Âæ∑","ÊÄó","Ô©´","ÊÑ∞","Êò§","Êõà","Êõô","Êõ∫","Êõª","Ê°í","ÈøÑ","Ê§ë","Ê§ª","Ê©Ö","Ê™ë","Ê´õ","£èå","£èæ","£óÑ","ÊØ±","Ê≥†","Ê¥Æ","Ô©Ö","Ê∂ø","Ê∑ä","Ê∑∏","Ô©Ü","ÊΩû","Êøπ","ÁÅ§","Ô©¨","§ãÆ","ÁÖá","ÁáÅ","ÁàÄ","Áéü","Áé®","Áèâ","Áèñ","Áêõ","Áê°","Ô©ä","Áê¶","Áê™","Áê¨","Áêπ","Áëã","„ªö","Áïµ","ÁñÅ","Áù≤","‰Çì","Á£à","Á£†","Á•á","Á¶Æ","ÈøÜ","‰ÑÉ","ÈøÖ","Áßö","Á®û","Á≠ø","Á∞±","‰â§","Á∂ã","Áæ°","ËÑò","ËÑ∫","Ô©≠","ËäÆ","Ëëõ","Ëìú","Ëì¨","Ëïô","Ëóé","Ëùï","Ëü¨","Ë†ã","Ë£µ","Ëßí","Ë´∂","Ë∑é","Ëæª","Ëø∂","ÈÉù","ÈÑß","ÈÑ≠","ÈÜ≤","Èà≥","Èäà","Èå°","Èçà","Èñí","Èõû","È§É","È•Ä","È´ô","ÈØñ","È∑ó","È∫¥","È∫µ","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","‚õå","‚õç","‚ùó","‚õè","‚õê","‚õë","","‚õí","‚õï","‚õì","‚õî","","","","","üÖø","üÜä","","","‚õñ","‚õó","‚õò","‚õô","‚õö","‚õõ","‚õú","‚õù","‚õû","‚õü","‚õ†","‚õ°","‚≠ï","„âà","„ââ","„âä","„âã","„âå","„âç","„âé","„âè","","","","","‚íë","‚íí","‚íì","üÖä","üÖå","üÑø","üÖÜ","üÖã","üàê","üàë","üàí","üàì","üÖÇ","üàî","üàï","üàñ","üÖç","üÑ±","üÑΩ","‚¨õ","‚¨§","üàó","üàò","üàô","üàö","üàõ","‚öø","üàú","üàù","üàû","üàü","üà†","üà°","üà¢","üà£","üà§","üà•","üÖé","„äô","üàÄ","","","","","","","","","","","‚õ£","‚≠ñ","‚≠ó","‚≠ò","‚≠ô","‚òì","„äã","„Äí","‚õ®","„âÜ","„âÖ","‚õ©","‡øñ","‚õ™","‚õ´","‚õ¨","‚ô®","‚õ≠","‚õÆ","‚õØ","‚öì","‚úà","‚õ∞","‚õ±","‚õ≤","‚õ≥","‚õ¥","‚õµ","üÖó","‚íπ","‚ìà","‚õ∂","üÖü","üÜã","üÜç","üÜå","üÖπ","‚õ∑","‚õ∏","‚õπ","‚õ∫","üÖª","‚òé","‚õª","‚õº","‚õΩ","‚õæ","üÖº","‚õø","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","‚û°","‚¨Ö","‚¨Ü","‚¨á","‚¨Ø","‚¨Æ","Âπ¥","Êúà","Êó•","ÂÜÜ","„é°","„é•","„éù","„é†","„é§","üÑÄ","‚íà","‚íâ","‚íä","‚íã","‚íå","‚íç","‚íé","‚íè","‚íê","Óäê","Óäë","Óäí","Óäì","Óäî","Óäï","üÑÅ","üÑÇ","üÑÉ","üÑÑ","üÑÖ","üÑÜ","üÑá","üÑà","üÑâ","üÑä","„à≥","„à∂","„à≤","„à±","„àπ","„âÑ","‚ñ∂","‚óÄ","„Äñ","„Äó","‚üê","¬≤","¬≥","üÑ≠","Óä•","Óä¶","Óäß","Óä®","Óä©","Óä™","Óä´","Óä¨","Óä≠","ÓäÆ","ÓäØ","Óä∞","Óä±","Óä≤","Óä≥","Óä¥","Óäµ","Óä∂","Óä∑","Óä∏","Óäπ","Óä∫","Óäª","Óäº","ÓäΩ","Óäæ","Óäø","ÓãÄ","ÓãÅ","ÓãÇ","üÑ¨","üÑ´","„âá","üÜê","üà¶","‚Ñª","","","","„à™","„à´","„à¨","„à≠","„àÆ","„àØ","„à∞","„à∑","„çæ","„çΩ","„çº","„çª","‚Ññ","‚Ñ°","„Ä∂","‚öæ","üâÄ","üâÅ","üâÇ","üâÉ","üâÑ","üâÖ","üâÜ","üâá","üâà","üÑ™","üàß","üà®","üà©","üàî","üà™","üà´","üà¨","üà≠","üàÆ","üàØ","üà∞","üà±","‚Ñì","„éè","„éê","„èä","„éû","„é¢","„ç±","","","¬Ω","‚Üâ","‚Öì","‚Öî","¬º","¬æ","‚Öï","‚Öñ","‚Öó","‚Öò","‚Öô","‚Öö","‚Öê","‚Öõ","‚Öë","‚Öí","‚òÄ","‚òÅ","‚òÇ","‚õÑ","‚òñ","‚òó","‚õâ","‚õä","‚ô¶","‚ô•","‚ô£","‚ô†","‚õã","‚®Ä","‚Äº","‚Åâ","‚õÖ","‚òî","‚õÜ","‚òÉ","‚õá","‚ö°","‚õà","","‚öû","‚öü","‚ô¨","‚òé","","","","‚Ö†","‚Ö°","‚Ö¢","‚Ö£","‚Ö§","‚Ö•","‚Ö¶","‚Öß","‚Ö®","‚Ö©","‚Ö™","‚Ö´","‚ë∞","‚ë±","‚ë≤","‚ë≥","‚ë¥","‚ëµ","‚ë∂","‚ë∑","‚ë∏","‚ëπ","‚ë∫","‚ëª","‚ëº","‚ëΩ","‚ëæ","‚ëø","„âë","„âí","„âì","„âî","üÑê","üÑë","üÑí","üÑì","üÑî","üÑï","üÑñ","üÑó","üÑò","üÑô","üÑö","üÑõ","üÑú","üÑù","üÑû","üÑü","üÑ†","üÑ°","üÑ¢","üÑ£","üÑ§","üÑ•","üÑ¶","üÑß","üÑ®","üÑ©","„âï","„âñ","„âó","„âò","„âô","„âö","‚ë†","‚ë°","‚ë¢","‚ë£","‚ë§","‚ë•","‚ë¶","‚ëß","‚ë®","‚ë©","‚ë™","‚ë´","‚ë¨","‚ë≠","‚ëÆ","‚ëØ","‚ù∂","‚ù∑","‚ù∏","‚ùπ","‚ù∫","‚ùª","‚ùº","‚ùΩ","‚ùæ","‚ùø","‚ì´","‚ì¨","„âõ",""],M=["ÔºÅ","ÔºÇ","ÔºÉ","ÔºÑ","ÔºÖ","ÔºÜ","Ôºá","Ôºà","Ôºâ","Ôºä","Ôºã","Ôºå","Ôºç","Ôºé","Ôºè","Ôºê","Ôºë","Ôºí","Ôºì","Ôºî","Ôºï","Ôºñ","Ôºó","Ôºò","Ôºô","Ôºö","Ôºõ","Ôºú","Ôºù","Ôºû","Ôºü","Ôº†","Ôº°","Ôº¢","Ôº£","Ôº§","Ôº•","Ôº¶","Ôºß","Ôº®","Ôº©","Ôº™","Ôº´","Ôº¨","Ôº≠","ÔºÆ","ÔºØ","Ôº∞","Ôº±","Ôº≤","Ôº≥","Ôº¥","Ôºµ","Ôº∂","Ôº∑","Ôº∏","Ôºπ","Ôº∫","Ôºª","Ôø•","ÔºΩ","Ôºæ","Ôºø","ÔΩÄ","ÔΩÅ","ÔΩÇ","ÔΩÉ","ÔΩÑ","ÔΩÖ","ÔΩÜ","ÔΩá","ÔΩà","ÔΩâ","ÔΩä","ÔΩã","ÔΩå","ÔΩç","ÔΩé","ÔΩè","ÔΩê","ÔΩë","ÔΩí","ÔΩì","ÔΩî","ÔΩï","ÔΩñ","ÔΩó","ÔΩò","ÔΩô","ÔΩö","ÔΩõ","ÔΩú","ÔΩù","ÔΩû"],G=["„ÅÅ","„ÅÇ","„ÅÉ","„ÅÑ","„ÅÖ","„ÅÜ","„Åá","„Åà","„Åâ","„Åä","„Åã","„Åå","„Åç","„Åé","„Åè","„Åê","„Åë","„Åí","„Åì","„Åî","„Åï","„Åñ","„Åó","„Åò","„Åô","„Åö","„Åõ","„Åú","„Åù","„Åû","„Åü","„Å†","„Å°","„Å¢","„Å£","„Å§","„Å•","„Å¶","„Åß","„Å®","„Å©","„Å™","„Å´","„Å¨","„Å≠","„ÅÆ","„ÅØ","„Å∞","„Å±","„Å≤","„Å≥","„Å¥","„Åµ","„Å∂","„Å∑","„Å∏","„Åπ","„Å∫","„Åª","„Åº","„ÅΩ","„Åæ","„Åø","„ÇÄ","„ÇÅ","„ÇÇ","„ÇÉ","„ÇÑ","„ÇÖ","„ÇÜ","„Çá","„Çà","„Çâ","„Çä","„Çã","„Çå","„Çç","„Çé","„Çè","„Çê","„Çë","„Çí","„Çì","","","","„Çù","„Çû","„Éº","„ÄÇ","„Äå","„Äç","„ÄÅ","„Éª"],Z=["„Ç°","„Ç¢","„Ç£","„Ç§","„Ç•","„Ç¶","„Çß","„Ç®","„Ç©","„Ç™","„Ç´","„Ç¨","„Ç≠","„ÇÆ","„ÇØ","„Ç∞","„Ç±","„Ç≤","„Ç≥","„Ç¥","„Çµ","„Ç∂","„Ç∑","„Ç∏","„Çπ","„Ç∫","„Çª","„Çº","„ÇΩ","„Çæ","„Çø","„ÉÄ","„ÉÅ","„ÉÇ","„ÉÉ","„ÉÑ","„ÉÖ","„ÉÜ","„Éá","„Éà","„Éâ","„Éä","„Éã","„Éå","„Éç","„Éé","„Éè","„Éê","„Éë","„Éí","„Éì","„Éî","„Éï","„Éñ","„Éó","„Éò","„Éô","„Éö","„Éõ","„Éú","„Éù","„Éû","„Éü","„É†","„É°","„É¢","„É£","„É§","„É•","„É¶","„Éß","„É®","„É©","„É™","„É´","„É¨","„É≠","„ÉÆ","„ÉØ","„É∞","„É±","„É≤","„É≥","„É¥","„Éµ","„É∂","„ÉΩ","„Éæ","„Éº","„ÄÇ","„Äå","„Äç","„ÄÅ","„Éª"],le=new Map([["022b6f43e2a414fd68f172da202bac9a","‚öû"],["94fb7be756372db6b62e3e0a119083d5","‚öû"],["12aecdea283e4d07f88b9f2b740e4f86","‚öü"],["1a563501affbf7f5baec350a108d5505","‚öü"],["556971570f40044fa4520df3289a1cf2","‚öü"],["65b042886a563a771aa389b12af7bca7","‚öü"],["bbda644d17efd3c020635ee3d90968a5","ÔΩü"],["5063561406195ca45f5992e3f7ad77d2","ÔΩü"],["9d15c0395a4738936af34308acf2d032","ÔΩü"],["2a063edc4770b3403f060b38166a0d4d","ÔΩü"],["54479aa90145b4713134b78d4fb98aa5","ÔΩü"],["12a2c7156da32fc972b5a451bb87b813","ÔΩü"],["c8d428ead557285b0b7088388b22519c","ÔΩü"],["7160f7419cba7acdacd23cbeb4834dbe","ÔΩü"],["3c49616fb9bf0b9052b30e118f8857ea","ÔΩü"],["71c94bb6d963e47443eac448a09d22ce","ÔΩü"],["7ec2179107ba4c58abb6ef92e7781365","ÔΩü"],["2eb49bd25d7eeada006afc0864350da4","ÔΩü"],["a341ee7fe8a368c9737a3341f016ac70","ÔΩü"],["f47048d669ac8d84eeb62477e8420f89","ÔΩü"],["38566b372f4c5a1aead4efa20decd079","ÔΩ†"],["d84fc83615b75802ed422eda4ba39465","ÔΩ†"],["5bb8b7731d9473ebd7c842334dfa24f2","ÔΩ†"],["9ffa7e00cfc7e807a161ada460b8060c","ÔΩ†"],["a58dc0e1271b03a5981b57a83271afa7","ÔΩ†"],["e67210b0da0161d36b79e8c9be6a9d0c","ÔΩ†"],["08de4be9569ebd6ac01709f552ae8a65","ÔΩ†"],["e214599903c94c532684bdf54b62df61","ÔΩ†"],["2a83209f8a7489081890c277397df425","ÔΩ†"],["0294d50cea5197c8c4646d2cace3e78d","ÔΩ†"],["0b808509e4d89a2b9d02252ca85f2e34","ÔΩ†"],["2a74d4ad7292c858dc2bb559de67f2d9","ÔΩ†"],["8c810b8cbe6159e837a88575bb4e6033","ÔΩ†"],["dc66317cd6fff4f4221069a20f321fce","ÔΩ†"],["563e1633d226c10ef4ec80638997e4a9","„Äé"],["0993d5cdf910f481eeefa19e4f09d77c","„Äé"],["7b80a8345c16e2d4f8ff2691e245c2b1","„Äé"],["016669fa94786f9581342d47f317c02c","„Äé"],["01d3eb52ab29f0eecc62ff74224fffd4","„Äé"],["089aa1d87915ef8ad3c43982ac657c8c","„Äé"],["30e8cb69cda3ad84e87943c4351c24b7","„Äé"],["385927959c2621acf57f8d40140924f8","„Äé"],["2c256506f406bac4c214318f196ad5db","„Äé"],["2d3912e10113e5c7bef33df3249af4a7","„Äé"],["8b6444be18f269ac615643b26f9e3041","„Äé"],["9c8c1ff659b439f73c65cf4766ab2f14","„Äé"],["e4caa1628ad6878f14be986761e06aaa","„Äé"],["e702912587801d73d58cdb30e48debed","„Äè"],["d70bb2b097f44c1ddefb93bf92bbb5cd","„Äè"],["f2b927267947a75b891403f95db72005","„Äè"],["4ec38a1d8d22e4df6c359f00f7ad8662","„Äè"],["55c9ea9aa8eb630e5ecb793b2f85c927","„Äè"],["70376e1ea05a3438a19c062ad49a7960","„Äè"],["8fe7cb78ca24d1973419eecf99252a88","„Äè"],["9ee59c7d2c202e0214836a0138f59e24","„Äè"],["b56aaf7fc68c5e206ccbc2ee1442b3af","„Äè"],["ba37f6b56d8fc8980c8236de9894fa61","„Äè"],["cc9fde9238a2bf78fd1c13f65b098e77","„Äè"],["f02e3e84dcd71c5d3bab2b7b4b99bd7e","„Äè"],["f686e0b742abe806fccbd4d9b3fcc4cd","„Äè"],["37f6ecf37a0a3ef8dff083ccc8754f81","‚ô¨"],["3336f18e849144658f212bd9399bec5f","‚ô¨"],["93efdc18683d8ecacb0a920d5f2fffb3","‚ô¨"],["9b8325b71aa6a000d24f88c4d7ec730d","‚ô¨"],["ab791ef796e6b5d66f13ed9aea3e8ab2","‚ô¨"],["6eb29f1917caea1cadf94f5496a4c374","‚Ü±"],["583134b86e7d90960f64c5b863196978","‚û°"],["4ba716a88c003ca0a069392be3b63951","‚û°"],["4e0fbe47e3ba0fd5949bda53f11b16a5","‚û°"],["61ec226a927ee80fffa12db219a43233","‚û°"],["8e5b873ac8e1bf84246b281b3548c2ff","‚Ü¥"],["a78d9b65f46654601ce0145622164b47","‚Ü¥"],["5d01e6804b9aaec0c276f77306888c54","‚Ü¥"],["6168af1e81b6497fccb6b8d3226a8016","‚Ü¥"],["4360c0b7364802b680f5a65fa415bdd6","‚Üó"],["4dab788480bb9ac50d2454b58438e407","‚Üó"],["bfb2d58ab8c469d2b8b5c42d81e4e3b7","‚Üó"],["4c503a0873195bfe8d71c9d55669781b","‚Üí"],["caf36eff2cf3580cd66c5cd021ee4c09","‚Üí"],["f00be20caf0aaef3a6fbec90a0e71852","‚Ö†"],["e660e1e23a6ddc9a5d2e0e1ef7ac5b86","‚Ö°"],["a62583f621fb5405add08e8f0beb6db4","‚Ö°"],["0e761ebb18b9870383725b3712f5c8d4","‚Ö°"],["1f65debfbf9df96de52c6f80922b012b","‚Ö°"],["5c13facf2da9f38922a9419061771ed0","‚Ö°"],["75a65cc3171c4c7ca0141042846ab91a","‚Ö°"],["eae94a6301787ff7bf77786ae4424601","‚Ö°"],["f1add7809e18e064e4609783211c9815","‚Ö¢"],["a7ee6f7f63d348e2b8fb7ee9503f3c5c","‚ô°"],["9c8cfb5e9349b06f0939605638896f4e","‚ô•"],["45ce7d6d5c779136d32d3e60e13e10cd","‚Öï"],["51f5fe58aaf460263b766e990fdbe979","‚Öï"],["db40b0a65939e462396822d5ab3c6d9c","‚Öï"],["d9e3a48d5a7c6ba6f8db18f56cf91f92","‚Öõ"],["86586bcdf8f14883f846849e93ca274c","‚Öú"],["9d81f46e134081d56bc92f69eebfabd9","‚Öí"],["18dddb04a4fe9b3f5c7b79e68fb8ab4b","‚Öí"],["eff8659a150859b7b69682a023b283c1","‚Öí"],["6e5ccf08b2bc815b0923df83cf9fafa1","„é†"],["8a77e56517a074d3d2ba426b84a07bf4","„é†"],["2c381a0eab014487d50f6f8bae8f0b71","„é¢"],["9d1a36a1bec1cd2b0b0765f93c1e4f3c","„é¢"],["e03eb00c54de790d8cc9997527fde905","„é¢"],["3bce2a06a6a8557082543a6c90a42fe0","„ÄΩ"],["4898c7d9fe3a8a6f9859b0e6f85a4327","„ÄΩ"],["98ab18764756c8ca7608e17f562b21ce","„ÄΩ"],["3037aad230d8cdae3df6e0ebedc0db79","‚Åâ"],["66e3474e6cbd8e817ba0a1f8920bf4e7","‚Åâ"],["4360dd96063ce1a9660cc8437e8238e3","‚Åà"],["6ce68b7e389c5169309ee956ed0c98a8","‚Åà"],["737a19289d25d963e255f3692ded6536","‚Åà"],["14b18199bbc3f4bf65b72e316bc41d3c","ÔºÅ"],["6bf58c146b692aeb403ed1f7618a060a","ÔºÅ"],["7f12b67caaf7c8c5075b444bb2a16c70","ÔºÅ"],["bfd55f4031ad80cb7401d65937b1d5d9","„Äú"],["4a61f6f7da9e6c8e373f4112cbd453cf","„Äú"],["882ded8f0bb4cdfa4ce28a0b64056d2a","„Äú"],["7726ffbf3a6e953affe6353c24ffb085","„Äú"],["0e290ec6542b5d52c972775e3d7cfeaf","Ôºç"],["420f1d27972d7cc83929307fbbb6dd50","Ôºç"],["4aa0e459273a2fe3012d7b3d2e14e07e","Ôºç"],["030b487ae68da1f4da98046f4fed390f","‰∏Ä"],["21699fa18fd14735a312512dfea2bff4","‰∏Ä"],["559fc240f4efe5a1e64714ce09217a3e","‰∏Ä"],["b7352c3f33a77bc9d3fbf693efbb8095","‰∏Ä"],["fcdb30a244fb6aad5255ee2d32fdf7fc","‰∏Ä"],["15a0a0fb33aacd4ce730a9503c46df5f","„äô"],["9dad4982bd65fbf21525261a7efdf669","„äô"],["c3e68e6d08d5429e28ffd6592acf4519","„Çî"],["f022cfe594d6f6930d7a5b994e1a0b71","Âáú"],["407057c7b7b1a91d058d572d9a9d3aa5","Âáú"],["fc85b0622183795f89111219dfbc6281","Âáú"],["9707099e5828d97eb12ff2e6ba438558","Âáú"],["987c829b62eb31f467165827766c410d","Âáú"],["58371bb195aaa7a468c5c508351ac383","Âáú"],["32324012ed7274a15002b66ed1e464f8","Ëúª"],["0ffb731db8d4a6b711f97bbb08ed8819","Ëúª"],["d90aae9a752e9b61662a9cafa837961f","Á•ì"],["23d6c6f231ac5d51f4cdaaaa26701956","Á•ì"],["81cbedabd8f88d4494255b0631820dfd","Á•ì"],["4185f93a5571e49433ca9c13ae588f96","È≠é"],["9ab74d6e8bda8723614017a7fce587fe","È≠é"],["e96a39a050b694e5f8aadb111420b698","†Æ∑"],["08c5eb5fac4f1d362b946689eb2e4edf","†Æ∑"],["2cef7e443c22f5835658e67749ae52d1","†Æ∑"],["4ab0dd1578c8c5fa25f45938ff0f8575","†Æ∑"],["4c392bb90a1f62796f8fba2c19b4a7de","†Æ∑"],["43856fd7c04a779e571fe24c47f02a6c","È´ô"],["265efc2a174c73ea229f9ffefa703f32","È´ô"],["5a7af09cce6b3005355e1c6c82df8858","È´ô"],["808e9b858294184933f8bf45d6291572","È´ô"],["27f0c69a76bf571d6dc25db389d20779","È´ô"],["46fb250f60436fd5f33808343893ca12","È´ô"],["8a8c4c67a6094d4dc6039e5fe931159c","È´ô"],["9257f3792fcfcd21b85524d5f86f624e","È´ô"],["d502a276d6f311449597ee9e576d9217","È´ô"],["eaa49075e50fbe1fa4b7f593dfd95620","È´ô"],["c01d2bafce469da1abbb612fdb16c1e3","ÂÖÉ"],["e1ce03321fdb4eaca026a49a43e521a5","ÂÖÉ"],["0cfa6c95283a90eff3733db1ac80f58a","ÂÖÉ"],["52c1ad5b834821dc6b85ec27bdea1f76","ÂÖÉ"],["ad088cffd260c1fccb655cae17b14803","ÂÖÉ"],["a9ee52eaa5b4cc32d1891d540bfe93cc","Ô®ê"],["a00182f1de36aaee28cac80a3c89d067","Ô®ê"],["b03d44ca831a0c995116056ce23f82c5","Ô®ê"],["2d6b7d3b5ca6c02d94c5b48661045b7a","Ô®ë"],["f5c6e02e235abd23a87f48ed6a64cdcc","Ô®ë"],["e9a3b055bda7b9ae70bde4003a4c5885","Ô®ë"],["cb17df533b4ebd698a038defeddecf8a","Ô®ë"],["0ea39c05c35f96d5b5a48e9815974132","Ô®ë"],["3f642f3778827e651c8b82a4e9f06fd3","Ô®ë"],["447d8358f482a4e1d9495902ebe269b1","Ô®ë"],["ca59a20f1e0ee55b74db34697f961385","Ô®ë"],["d2eae5651260b39c4239bcf00c8a76c5","Ô®ë"],["f55eb365a9ded45d1e620f83d9f9de26","Ô®ë"],["2b385c2642704e44347f2f4db147c8fa","Ëëõ"],["5c3a8c3a891386a771ff8f00a239b4ba","Ëëõ"],["e8caa78518e2d690af54e2206c9538f8","ÂΩÖ"],["2e8659ae5e220240c5f8a97147d09df6","ÂΩÖ"],["7592e633260537c1dfa7e5af1000752a","ÂΩÖ"],["a57d3f7684c28d2a901fe6020145de32","ÂΩÖ"],["da3ab2d5da4d69c7d312c7d819e45856","ÂΩÖ"],["918e84ed41c2157aa5f5bbf9aa60514c","Â°°"],["b1e889986beb3a6518d8c2ea53547b7c","Â°°"],["d449ab392afa98c27eb817c40e2eb7ce","Â°°"],["e7158075f2976c353e4cf9247aae3abc","ÈÅÅ"],["f1a6fbb17f041cc15148163da34f541f","ÈÅÅ"],["a1779a3aaf215916fd0d8fbbb5bf5925","Ëü¨"],["a3c09b57be535c0f5618d72f95884c50","Ëü¨"],["4b9401a9f9a58c7d0f9c86120aa2dd23","Èè¢"],["fe00b640a48dd341573cafa94afeafa2","Èè¢"],["f4e1d8b42e3c49ea7c896049186d74bd","Ëüú"],["640130a634bd2a0f4347f933a8c5d6d6","Ëüú"],["62985aeebaec69314f03ff9d3080ada2","È∑ó"],["1bd027207977c585c5889a1e24cae94e","È∑ó"],["5c8022286d3bc941c12e9bbc475255dd","È∑ó"],["e4a837fe20dfa091e03afe4857e2482e","Ââù"],["bf2cccb40b985fe3af04281944beac1a","Ââù"],["d5451a035c4e516e5ccb9372cd533d81","Ââù"],["e13ae32f28d840df74a88432df9b122e","Ââù"],["41637d181cd99088e2120a4ec6fc18aa","Â¨¥"],["de63abb1aaa44e6ab8a11470103377d5","Â¨¥"],["3d32b12254e01c701c195412cb8ef37c","Â¨¥"],["f67bc6318ccf43e7902df9a6f9622932","Â¨¥"],["d4ce6847d78fc2f8241088b5c0be795c","Â¨¥"],["c472e6ade04610e67904aca1b1fa1468","È∫É"],["db3d060943fbf888eb2fa7fd87340cba","È∫É"],["509cff0edcba46d5db30b2f2f45c49c9","Áò£"],["4862270872e35184aab420c4d38169ad","Áò£"],["def4d364d00d0f78577987eaebd42aef","ÈΩï"],["3cc113a87b49ce231a7b2ffbca4c1e18","ÈΩï"],["03dddff25be65f7c284ef8addb8a0a8b","È©Å"],["52aa815a5a57aff03085d31acd5afbc4","È©Å"],["4f0431c4c63a6a362646758e62521df8","ÁÖñ"],["dbf1ab17c746c48d474b3730064ba6f2","ÁÖñ"],["790c6b4da6a88f7f4fdb6fdab77fe045","ÁÖñ"],["4d7ae77f2bbf9c8af03d49d466f74058","ÁÖñ"],["0335ba124be8a9e0c501f4051ac5fcf5","Èæê"],["01d7892b430fd4362c8917ad921199b2","Èæê"],["e866fd7e605c8b7c8bf718c45a5438cf","Èæê"],["5df7d88e1e15018b3bce73e765ef72d6","Êßå"],["48478e1f69ea50c6f7709d47f15b4007","Êßå"],["4d7d276f23c92f94056b292e295ebd78","Ô®ô"],["87d2b97034cf680cd86bc7fe7c500d93","Ô®ô"],["f6300abbfcd6bd0db3abd41041499aaa","ÈÇÇ"],["26c476496eb73e15285527ab7c635f0b","ÈÇÇ"],["be33b9008a58bab485e17de9b2ab2626","ÈÄÖ"],["3a9b8b576fe8efca2dedc957732afa37","ÈÄÖ"],["b798637262a0c1a29c8de602d4b688c6","ÈÄÖ"],["a3785fd94f13646623554b180d08ac77","Âæ∑"],["1f81885b0996be70410e5aa3e4aab3c6","Âæ∑"],["88425dfcbd96fcb6d77ebb76f834d986","Âæ∑"],["9f993f913cd0614a3a965d74e0f4c8d1","Âæ∑"],["a8bb5f2f83d975edfc951a1e461befdc","Âæ∑"],["cd2eadbb87d0aadf1d1cd71fed0ab02f","Âæ∑"],["d22feeb00ace0a632e1a780682f937e8","Âæ∑"],["c9f2fda15b722253c625aebe73f4b1d9","Ëæª"],["04556b37bff1ccc2f3b395232e104934","Ëæª"],["117bacaeb67e3508d23a650b98f3c143","Ëæª"],["211d70374c1787c4bc62df15794a4692","Ëæª"],["7ba50856c59d1de19cc9c88caaced915","Ëæª"],["0d627ebf7693b13645336a88813fb7e3","Á•Ä"],["2c3c032660b20a485575c2d8c7d47956","Á•Ä"],["1aaec04e53f2978bdf0a127c01b34e9a","ÔßÉ"],["e2c3bf09b755b0d59a8a25cba6dda273","ÔßÉ"],["fb13879ba2f93a8b0a28b2cd5358d1ee","ÔßÉ"],["20eff1fff8d986496b949efa604ec402","Ë™æ"],["8742940fcbdbd65aeff1566c1889ece7","Ë™æ"],["23e6ef0ecc7bbe8e9465b0b40e901c0d","Âéì"],["5a69785acb47d746fd1ae98bd511db81","Âéì"],["392b8afa18046fc06398b32a42641889","‰Ω†"],["7ff2c821d31ef0ca7e9c430f3e659d46","‰Ω†"],["44d8b7aacbfc1fc4c32d6526ab8012ee","Á•†"],["c9486b883ab870fc02e7a1f189454f49","Á•†"],["62e7447a02f797cf287a7a758d66563b","Êì≤"],["7d767d2518431dd61e631941dea6bb5e","Êì≤"],["914fa35485d5016adc8b799b0cb5e978","Âè£"],["d50802fc331261feed1a140f3b70c4b3","Âè£"],["eeff4833bdfc34b1cbfe6a9d98f38cb5","Âè£"],["a6d6aaeaf5505676111390a52fa6be51","Êö≤"],["bc534a1accc68d8876e9d47ad8d4b489","Êö≤"],["b5e8cb114ccad281bcb4d86768d509df","Èäà"],["d2c0ab0242ae4ad8a08bffa71613a1a7","Èäà"],["f09031463933b2892be7ebbc501269d0","Ëïô"],["f1378529fe66a7f655031d7f5b8c4eb5","Ëïô"],["6b696a5ae7634c454aaa7dd833fdfaf9","Áú∑"],["5012d099f110e5e7c0df78528686ae07","Ê¶Æ"],["bf27e95238dd789b05e38d56dc41cbf7","Âµì"],["1d2eafa6be36dc6152cb1917cd2ac486","Ê∞è"],["8b1bd5636f709dfd6a95da9f463729c3","ÊüÄ"],["0b49a77f459cf3783c5bac37a80518c5","‰ªΩ"],["8d1ba0e24b619cb4d377ddb7adb3e6fa","Âñº"],["dab4c329f3c540192f758a2e0008d275","Èéö"],["5b6c90ad3012bfbbc2450b5ab930484d","Áøü"],["7eb78d5654f8335d0b1cf4cf78872097","ÈÑ≠"],["c3852ea003683f2866abd56140fb5d84","ÈåÜ"],["a78b8a79d8a32c925776c82955d168cc","ÈÉ≠"],["b6e773b060fdd575bc965369d509f4e0","ÁÖâ"],["6d981a3b846347e2b3c9ca4d13794834","Ê°í"],["d0ed8ffbc229f84dd796cdd6de36d2e4","‰ÉØ"],["d9aff359058ab474d552ce52e5a71ec8","Âçø"],["5417381484172c1607d7ca60765b62d2","Ëùï"],["b309cd2c649ce3ef6ea0ad2f5fc655cc","ÈÄô"],["2a349ac3d6b94a8a64d904083fdd5c02","Ëæø"],["0632283bfd909ef205b1f950e2b00f16","Èùë"],["d91c5a40619510b21610f523f9434269","Ê∑∏"],["8dc47c6e65beb788da7ed9efd59f0934","Ë≤∑"],["e28d4c57d97fbe4a0d67aec2cc92e7c8","Êç•"],["9374173a2e4b7f1dcac75eccd5ee7e7f","Ê¶ä"]]),W=(c(1415),new Set(["‚õå","‚õç","‚ùó","‚õè","‚õê","‚õë","‚õí","‚õï","‚õì","‚õî","ÓÉò","ÓÉô","‚õñ","‚õó","‚õò","‚õô","‚õö","‚õõ","‚õú","‚õù","‚õû","‚õü","‚õ†","‚õ°","‚≠ï","„âà","„ââ","„âä","„âã","„âå","„âç","„âé","„âè","‚íë","‚íí","‚íì","ÓÉ∏","ÓÉπ","ÓÉ∫","ÓÉª","ÓÉº","ÓÉΩ","ÓÉæ","ÓÉø","ÓÜÄ","ÓÜÅ","ÓÜÇ","ÓÜÉ","ÓÜÑ","ÓÜÖ","ÓÜÜ","ÓÜá","‚¨õ","‚¨§","ÓÜä","ÓÜã","ÓÜå","ÓÜç","ÓÜé","‚öø","ÓÜê","ÓÜë","ÓÜí","ÓÜì","ÓÜî","ÓÜï","ÓÜñ","ÓÜó","ÓÜò","ÓÜô","ÓÜö","„äô","ÓÜú","‚õ£","‚≠ñ","‚≠ó","‚≠ò","‚≠ô","‚òì","„äã","„Äí","‚õ®","„âÜ","„âÖ","‚õ©","‡øñ","‚õ™","‚õ´","‚õ¨","‚ô®","‚õ≠","‚õÆ","‚õØ","‚öì","‚úà","‚õ∞","‚õ±","‚õ≤","‚õ≥","‚õ¥","‚õµ","ÓáÉ","‚íπ","‚ìà","‚õ∂","Óáá","Óáà","Óáâ","Óáä","Óáã","‚õ∑","‚õ∏","‚õπ","‚õ∫","Óáê","‚òé","‚õª","‚õº","‚õΩ","‚õæ","Óáñ","‚õø","‚û°","‚¨Ö","‚¨Ü","‚¨á","‚¨Ø","‚¨Æ","Óäã","Óäå","Óäç","Óäé","„é°","„é•","„éù","„é†","„é§","Óäè","‚íà","‚íâ","‚íä","‚íã","‚íå","‚íç","‚íé","‚íè","‚íê","Óäê","Óäë","Óäí","Óäì","Óäî","Óäï","Óäñ","Óäó","Óäò","Óäô","Óäö","Óäõ","Óäú","Óäù","Óäû","Óäü","„à≥","„à∂","„à≤","„à±","„àπ","„âÑ","‚ñ∂","‚óÄ","„Äñ","„Äó","‚üê","¬≤","¬≥","Óä§","Óä•","Óä¶","Óäß","Óä®","Óä©","Óä™","Óä´","Óä¨","Óä≠","ÓäÆ","ÓäØ","Óä∞","Óä±","Óä≤","Óä≥","Óä¥","Óäµ","Óä∂","Óä∑","Óä∏","Óäπ","Óä∫","Óäª","Óäº","ÓäΩ","Óäæ","Óäø","ÓãÄ","ÓãÅ","ÓãÇ","ÓãÉ","ÓãÜ","„âá","ÓãÑ","ÓãÖ","‚Ñª","„à™","„à´","„à¨","„à≠","„àÆ","„àØ","„à∞","„à∑","„çæ","„çΩ","„çº","„çª","‚Ññ","‚Ñ°","„Ä∂","‚öæ","Óãç","Óãé","Óãè","Óãê","Óãë","Óãí","Óãì","Óãî","Óãï","Óãñ","Óãó","Óãò","Óãô","Óãö","Óãõ","Óãú","Óãù","Óãû","Óãü","Óã†","Óã°","Óã¢","‚Ñì","„éè","„éê","„èä","„éû","„é¢","„ç±","¬Ω","‚Üâ","‚Öì","‚Öî","¬º","¬æ","‚Öï","‚Öñ","‚Öó","‚Öò","‚Öô","‚Öö","‚Öê","‚Öõ","‚Öë","‚Öí","‚òÄ","‚òÅ","‚òÇ","‚õÑ","‚òñ","‚òó","‚õâ","‚õä","‚ô¶","‚ô•","‚ô£","‚ô†","‚õã","‚®Ä","‚Äº","‚Åâ","‚õÖ","‚òî","‚õÜ","‚òÉ","‚õá","‚ö°","‚õà","‚öû","‚öü","‚ô¨","Óãª","‚Ö†","‚Ö°","‚Ö¢","‚Ö£","‚Ö§","‚Ö•","‚Ö¶","‚Öß","‚Ö®","‚Ö©","‚Ö™","‚Ö´","‚ë∞","‚ë±","‚ë≤","‚ë≥","‚ë¥","‚ëµ","‚ë∂","‚ë∑","‚ë∏","‚ëπ","‚ë∫","‚ëª","‚ëº","‚ëΩ","‚ëæ","‚ëø","„âë","„âí","„âì","„âî","ÓéÉ","ÓéÑ","ÓéÖ","ÓéÜ","Óéá","Óéà","Óéâ","Óéä","Óéã","Óéå","Óéç","Óéé","Óéè","Óéê","Óéë","Óéí","Óéì","Óéî","Óéï","Óéñ","Óéó","Óéò","Óéô","Óéö","Óéõ","Óéú","„âï","„âñ","„âó","„âò","„âô","„âö","‚ë†","‚ë°","‚ë¢","‚ë£","‚ë§","‚ë•","‚ë¶","‚ëß","‚ë®","‚ë©","‚ë™","‚ë´","‚ë¨","‚ë≠","‚ëÆ","‚ëØ","‚ù∂","‚ù∑","‚ù∏","‚ùπ","‚ù∫","‚ùª","‚ùº","‚ùΩ","‚ùæ","‚ùø","‚ì´","‚ì¨","„âõ","‚òé","‚õå","‚õç","‚ùó","‚õè","‚õê","‚õë","‚õí","‚õï","‚õì","‚õî","üÖø","üÜä","‚õñ","‚õó","‚õò","‚õô","‚õö","‚õõ","‚õú","‚õù","‚õû","‚õü","‚õ†","‚õ°","‚≠ï","„âà","„ââ","„âä","„âã","„âå","„âç","„âé","„âè","‚íë","‚íí","‚íì","üÖä","üÖå","üÑø","üÖÜ","üÖã","üàê","üàë","üàí","üàì","üÖÇ","üàî","üàï","üàñ","üÖç","üÑ±","üÑΩ","‚¨õ","‚¨§","üàó","üàò","üàô","üàö","üàõ","‚öø","üàú","üàù","üàû","üàü","üà†","üà°","üà¢","üà£","üà§","üà•","üÖé","„äô","üàÄ","‚õ£","‚≠ñ","‚≠ó","‚≠ò","‚≠ô","‚òì","„äã","‚õ®","„âÜ","„âÖ","‚õ©","‡øñ","‚õ™","‚õ´","‚õ¨","‚õ≠","‚õÆ","‚õØ","‚öì","‚úà","‚õ∞","‚õ±","‚õ≤","‚õ≥","‚õ¥","‚õµ","üÖó","‚íπ","‚ìà","‚õ∂","üÖü","üÜã","üÜç","üÜå","üÖπ","‚õ∑","‚õ∏","‚õπ","‚õ∫","üÖª","‚õª","‚õº","‚õΩ","‚õæ","üÖº","‚õø","‚û°","‚¨Ö","‚¨Ü","‚¨á","‚¨Ø","‚¨Æ","„é•","„é†","„é§","üÑÄ","‚íà","‚íâ","‚íä","‚íã","‚íå","‚íç","‚íé","‚íè","‚íê","üÑÅ","üÑÇ","üÑÉ","üÑÑ","üÑÖ","üÑÜ","üÑá","üÑà","üÑâ","üÑä","„à≥","„à∂","„âÑ","‚üê","üÑ≠","üÑ¨","üÑ´","„âá","üÜê","üà¶","‚Ñª","„à™","„à´","„à¨","„à≠","„àÆ","„àØ","„à∞","„à∑","„Ä∂","‚öæ","üâÄ","üâÅ","üâÇ","üâÉ","üâÑ","üâÖ","üâÜ","üâá","üâà","üÑ™","üàß","üà®","üà©","üàî","üà™","üà´","üà¨","üà≠","üàÆ","üàØ","üà∞","üà±","„éê","„èä","„é¢","„ç±","‚Üâ","‚Öñ","‚Öó","‚Öò","‚Öô","‚Öö","‚Öê","‚Öõ","‚Öë","‚Öí","‚õÑ","‚õâ","‚õä","‚õã","‚®Ä","‚õÖ","‚òî","‚õÜ","‚õá","‚ö°","‚õà","‚öû","‚öü","‚ë¥","‚ëµ","‚ë∂","‚ë∑","‚ë∏","‚ëπ","‚ë∫","‚ëª","‚ëº","‚ëΩ","‚ëæ","‚ëø","üÑê","üÑë","üÑí","üÑì","üÑî","üÑï","üÑñ","üÑó","üÑò","üÑô","üÑö","üÑõ","üÑú","üÑù","üÑû","üÑü","üÑ†","üÑ°","üÑ¢","üÑ£","üÑ§","üÑ•","üÑ¶","üÑß","üÑ®","üÑ©"])),N=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],U=function(E){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=arguments.length>2?arguments[2]:void 0;h==null&&(h=E.length);for(var m=0,u=F;u<h;u++)m=65535&(m<<8^N[255&(m>>8^E[u])]);return m},O=function(E,F,h,m,u,_,x,T){return 0|((D=F+E(h,m,u)+_+x|0)<<(B=T)|D>>>32-B)+h;var D,B},z=function(E,F,h){return E&F|~E&h},ce=function(E,F,h){return E&h|F&~h},be=function(E,F,h){return E^F^h},Le=function(E,F,h){return F^(E|~h)},xe=function(E){var F=15&E;return"".concat(((240&E)>>4).toString(16)).concat(F.toString(16))},ve=function(E){var F=64*Math.floor((E.byteLength+8)/64+1),h=new Uint8Array(F);h.set(new Uint8Array(E),0);var m=new DataView(h.buffer);m.setUint8(E.byteLength,128),m.setUint32(F-8,8*E.byteLength%Math.pow(2,32),!0),m.setUint32(F-4,8*E.byteLength/Math.pow(2,32),!0);for(var u=1732584193,_=-271733879,x=-1732584194,T=271733878,D=0;D<F;D+=64){var B=u,j=_,Q=x,ne=T;u=O(z,u,_,x,T,m.getUint32(D+0,!0),3614090360,7),T=O(z,T,u,_,x,m.getUint32(D+4,!0),3905402710,12),x=O(z,x,T,u,_,m.getUint32(D+8,!0),606105819,17),_=O(z,_,x,T,u,m.getUint32(D+12,!0),3250441966,22),u=O(z,u,_,x,T,m.getUint32(D+16,!0),4118548399,7),T=O(z,T,u,_,x,m.getUint32(D+20,!0),1200080426,12),x=O(z,x,T,u,_,m.getUint32(D+24,!0),2821735955,17),_=O(z,_,x,T,u,m.getUint32(D+28,!0),4249261313,22),u=O(z,u,_,x,T,m.getUint32(D+32,!0),1770035416,7),T=O(z,T,u,_,x,m.getUint32(D+36,!0),2336552879,12),x=O(z,x,T,u,_,m.getUint32(D+40,!0),4294925233,17),_=O(z,_,x,T,u,m.getUint32(D+44,!0),2304563134,22),u=O(z,u,_,x,T,m.getUint32(D+48,!0),1804603682,7),T=O(z,T,u,_,x,m.getUint32(D+52,!0),4254626195,12),x=O(z,x,T,u,_,m.getUint32(D+56,!0),2792965006,17),_=O(z,_,x,T,u,m.getUint32(D+60,!0),1236535329,22),u=O(ce,u,_,x,T,m.getUint32(D+4,!0),4129170786,5),T=O(ce,T,u,_,x,m.getUint32(D+24,!0),3225465664,9),x=O(ce,x,T,u,_,m.getUint32(D+44,!0),643717713,14),_=O(ce,_,x,T,u,m.getUint32(D+0,!0),3921069994,20),u=O(ce,u,_,x,T,m.getUint32(D+20,!0),3593408605,5),T=O(ce,T,u,_,x,m.getUint32(D+40,!0),38016083,9),x=O(ce,x,T,u,_,m.getUint32(D+60,!0),3634488961,14),_=O(ce,_,x,T,u,m.getUint32(D+16,!0),3889429448,20),u=O(ce,u,_,x,T,m.getUint32(D+36,!0),568446438,5),T=O(ce,T,u,_,x,m.getUint32(D+56,!0),3275163606,9),x=O(ce,x,T,u,_,m.getUint32(D+12,!0),4107603335,14),_=O(ce,_,x,T,u,m.getUint32(D+32,!0),1163531501,20),u=O(ce,u,_,x,T,m.getUint32(D+52,!0),2850285829,5),T=O(ce,T,u,_,x,m.getUint32(D+8,!0),4243563512,9),x=O(ce,x,T,u,_,m.getUint32(D+28,!0),1735328473,14),_=O(ce,_,x,T,u,m.getUint32(D+48,!0),2368359562,20),u=O(be,u,_,x,T,m.getUint32(D+20,!0),4294588738,4),T=O(be,T,u,_,x,m.getUint32(D+32,!0),2272392833,11),x=O(be,x,T,u,_,m.getUint32(D+44,!0),1839030562,16),_=O(be,_,x,T,u,m.getUint32(D+56,!0),4259657740,23),u=O(be,u,_,x,T,m.getUint32(D+4,!0),2763975236,4),T=O(be,T,u,_,x,m.getUint32(D+16,!0),1272893353,11),x=O(be,x,T,u,_,m.getUint32(D+28,!0),4139469664,16),_=O(be,_,x,T,u,m.getUint32(D+40,!0),3200236656,23),u=O(be,u,_,x,T,m.getUint32(D+52,!0),681279174,4),T=O(be,T,u,_,x,m.getUint32(D+0,!0),3936430074,11),x=O(be,x,T,u,_,m.getUint32(D+12,!0),3572445317,16),_=O(be,_,x,T,u,m.getUint32(D+24,!0),76029189,23),u=O(be,u,_,x,T,m.getUint32(D+36,!0),3654602809,4),T=O(be,T,u,_,x,m.getUint32(D+48,!0),3873151461,11),x=O(be,x,T,u,_,m.getUint32(D+60,!0),530742520,16),_=O(be,_,x,T,u,m.getUint32(D+8,!0),3299628645,23),u=O(Le,u,_,x,T,m.getUint32(D+0,!0),4096336452,6),T=O(Le,T,u,_,x,m.getUint32(D+28,!0),1126891415,10),x=O(Le,x,T,u,_,m.getUint32(D+56,!0),2878612391,15),_=O(Le,_,x,T,u,m.getUint32(D+20,!0),4237533241,21),u=O(Le,u,_,x,T,m.getUint32(D+48,!0),1700485571,6),T=O(Le,T,u,_,x,m.getUint32(D+12,!0),2399980690,10),x=O(Le,x,T,u,_,m.getUint32(D+40,!0),4293915773,15),_=O(Le,_,x,T,u,m.getUint32(D+4,!0),2240044497,21),u=O(Le,u,_,x,T,m.getUint32(D+32,!0),1873313359,6),T=O(Le,T,u,_,x,m.getUint32(D+60,!0),4264355552,10),x=O(Le,x,T,u,_,m.getUint32(D+24,!0),2734768916,15),_=O(Le,_,x,T,u,m.getUint32(D+52,!0),1309151649,21),u=O(Le,u,_,x,T,m.getUint32(D+16,!0),4149444226,6),T=O(Le,T,u,_,x,m.getUint32(D+44,!0),3174756917,10),x=O(Le,x,T,u,_,m.getUint32(D+8,!0),718787259,15),_=O(Le,_,x,T,u,m.getUint32(D+36,!0),3951481745,21),u=B+u|0,_=j+_|0,x=Q+x|0,T=ne+T|0}var te="";return te+=xe((255&u)>>>0),te+=xe((65280&u)>>>8),te+=xe((16711680&u)>>>16),te+=xe((4278190080&u)>>>24),te+=xe((255&_)>>>0),te+=xe((65280&_)>>>8),te+=xe((16711680&_)>>>16),te+=xe((4278190080&_)>>>24),te+=xe((255&x)>>>0),te+=xe((65280&x)>>>8),te+=xe((16711680&x)>>>16),te+=xe((4278190080&x)>>>24),te+=xe((255&T)>>>0),te+=xe((65280&T)>>>8),(te+=xe((16711680&T)>>>16))+xe((4278190080&T)>>>24)};function ze(E){return ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},ze(E)}function Pe(E,F){return function(h){if(Array.isArray(h))return h}(E)||function(h,m){var u=h==null?null:typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(u!=null){var _,x,T,D,B=[],j=!0,Q=!1;try{if(T=(u=u.call(h)).next,m!==0)for(;!(j=(_=T.call(u)).done)&&(B.push(_.value),B.length!==m);j=!0);}catch(ne){Q=!0,x=ne}finally{try{if(!j&&u.return!=null&&(D=u.return(),Object(D)!==D))return}finally{if(Q)throw x}}return B}}(E,F)||function(h,m){if(h){if(typeof h=="string")return Y(h,m);var u={}.toString.call(h).slice(8,-1);return u==="Object"&&h.constructor&&(u=h.constructor.name),u==="Map"||u==="Set"?Array.from(h):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Y(h,m):void 0}}(E,F)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Y(E,F){(F==null||F>E.length)&&(F=E.length);for(var h=0,m=Array(F);h<F;h++)m[h]=E[h];return m}function b(E,F){for(var h=0;h<F.length;h++){var m=F[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(E,S(m.key),m)}}function S(E){var F=function(h){if(ze(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var u=m.call(h,"string");if(ze(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}(E);return ze(F)=="symbol"?F:F+""}var k=null,R=function(){function E(u,_){(function(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")})(this,E),this.option_canvas=null,this.render_canvas=null,this.render_text="",this.GL=0,this.GR=2,this.G_BACK=[f.get(0),f.get(1),f.get(2),g.get(31)],this.DRCS_mapping=new Map([[15,new Map],[16,new Map],[17,new Map],[18,new Map],[19,new Map],[20,new Map],[21,new Map],[22,new Map],[23,new Map],[24,new Map],[25,new Map],[26,new Map],[27,new Map],[28,new Map],[29,new Map],[30,new Map]]),this.purpose_width=1920,this.purpose_height=1080,this.swf_x=1920,this.swf_y=1080,this.sdf_x=1920,this.sdf_y=1080,this.sdp_x=0,this.sdp_y=0,this.ssm_x=72,this.ssm_y=72,this.shs=8,this.svs=48,this.text_size_x=1,this.text_size_y=1,this.position_x=-1,this.position_y=-1,this.pallet=0,this.fg_color=A[this.pallet][7],this.bg_color=A[this.pallet][8],this.force_bg_color=null,this.hlc=0,this.stl=!1,this.orn=null,this.force_orn=null,this.non_spacing="",this.timeElapsed=0,this.endTime=null,this.rendered=!1,this.PRA=null,this.normalFont="sans-serif",this.gaijiFont=this.normalFont,this.drcsReplacement=!1,this.drcsReplaceMapping=new Map,this.useStroke=!1,this.usePUA=!1,this.pes=u,this.startTime=_}return F=E,m=[{key:"setEmbeddedGlyph",value:function(u){k=u}},{key:"detect",value:function(u,_){var x,T,D=(x=_==null?void 0:_.data_identifier)!==null&&x!==void 0?x:128,B=(T=_==null?void 0:_.data_group_id)!==null&&T!==void 0?T:1;if(u.length<=0||u[0]!==D||u.length<=2)return!1;var j=3+(15&u[2]);return!(u.length<=j||(15&(252&u[j+0])>>2)!==B||(U(u,j),0))}},{key:"getRGBAColorCode",value:function(u){if(u==null)return null;var _=document.createElement("canvas");_.width=_.height=1;var x=_.getContext("2d");if(!x)return null;x.fillStyle=u,x.fillRect(0,0,_.width,_.height);var T=Pe(x.getImageData(0,0,1,1).data,4),D=T[0],B=T[1],j=T[2],Q=T[3],ne="#".concat(D.toString(16).toUpperCase().padStart(2,"0")).concat(B.toString(16).toUpperCase().padStart(2,"0")).concat(j.toString(16).toUpperCase().padStart(2,"0")).concat(Q.toString(16).toUpperCase().padStart(2,"0"));return _.width=_.height=0,ne}},{key:"fillAlphaColorCode",value:function(u){if(u==null)return"";var _=Number.parseInt(u.substring(1,3),16),x=Number.parseInt(u.substring(3,5),16),T=Number.parseInt(u.substring(5,7),16);return"#".concat(_.toString(16).toUpperCase().padStart(2,"0")).concat(x.toString(16).toUpperCase().padStart(2,"0")).concat(T.toString(16).toUpperCase().padStart(2,"0"),"FF")}},{key:"getRGBAfromColorCode",value:function(u){if(u==null)return"";var _=Number.parseInt(u.substring(1,3),16),x=Number.parseInt(u.substring(3,5),16),T=Number.parseInt(u.substring(5,7),16),D=Number.parseInt(u.substring(7,9),16);return"rgba(".concat(_,", ").concat(x,", ").concat(T,", ").concat(D/255,")")}}],(h=[{key:"initialize",value:function(){this.render_canvas=null,this.option_canvas=null,this.render_text="",this.GL=0,this.GR=2,this.G_BACK=[f.get(0),f.get(1),f.get(2),g.get(31)],this.DRCS_mapping=new Map([[15,new Map],[16,new Map],[17,new Map],[18,new Map],[19,new Map],[20,new Map],[21,new Map],[22,new Map],[23,new Map],[24,new Map],[25,new Map],[26,new Map],[27,new Map],[28,new Map],[29,new Map],[30,new Map]]),this.purpose_width=1920,this.purpose_height=1080,this.swf_x=1920,this.swf_y=1080,this.sdf_x=1920,this.sdf_y=1080,this.sdp_x=0,this.sdp_y=0,this.ssm_x=72,this.ssm_y=72,this.shs=8,this.svs=48,this.text_size_x=1,this.text_size_y=1,this.position_x=-1,this.position_y=-1,this.pallet=0,this.fg_color=A[this.pallet][7],this.bg_color=A[this.pallet][8],this.force_bg_color=null,this.hlc=0,this.stl=!1,this.orn=null,this.force_orn=null,this.non_spacing="",this.timeElapsed=0,this.endTime=null,this.rendered=!1,this.PRA=null,this.normalFont="sans-serif",this.gaijiFont=this.normalFont,this.drcsReplacement=!1,this.drcsReplaceMapping=new Map,this.useStroke=!1,this.usePUA=!1}},{key:"width",value:function(){return Math.floor((this.shs+this.ssm_x)*this.text_size_x)}},{key:"height",value:function(){return Math.floor((this.svs+this.ssm_y)*this.text_size_y)}},{key:"width_magnification",value:function(){return Math.ceil(this.purpose_width/this.swf_x)}},{key:"height_magnification",value:function(){return Math.ceil(this.purpose_height/this.swf_y)}},{key:"canvas_width",value:function(){return this.swf_x*this.width_magnification()}},{key:"canvas_height",value:function(){return this.swf_y*this.height_magnification()}},{key:"move_absolute_dot",value:function(u,_){this.position_x=u,this.position_y=_}},{key:"move_absolute_pos",value:function(u,_){this.position_x=this.sdp_x+u*this.width(),this.position_y=this.sdp_y+(_+1)*this.height()}},{key:"move_relative_pos",value:function(u,_){for((this.position_x<0||this.position_y<0)&&this.move_absolute_dot(this.sdp_x,this.sdp_y+(this.ssm_y+this.svs));u<0;)this.position_x-=this.width(),u++,this.position_x<this.sdp_x&&(this.position_x=this.sdp_x+this.sdf_x-this.width(),_--);for(;u>0;)this.position_x+=this.width(),u--,this.position_x>=this.sdp_x+this.sdf_x&&(this.position_x=this.sdp_x,_++);for(;_<0;)this.position_y-=this.height(),_++;for(;_>0;)this.position_y+=this.height(),_--}},{key:"move_newline",value:function(){(this.position_x<0||this.position_y<0)&&this.move_absolute_dot(this.sdp_x,this.sdp_y+(this.ssm_y+this.svs)),this.position_x=this.sdp_x,this.position_y=this.position_y+this.height()}},{key:"render",value:function(u){var _,x,T,D,B,j,Q,ne,te,ae,re,de,he,pe,oe;this.initialize(),this.option_canvas=(_=u==null?void 0:u.canvas)!==null&&_!==void 0?_:null,this.force_orn=(x=typeof(u==null?void 0:u.forceStrokeColor)=="boolean"?u==null?void 0:u.forceStrokeColor:E.getRGBAColorCode(u==null?void 0:u.forceStrokeColor))!==null&&x!==void 0?x:null,this.force_bg_color=(T=E.getRGBAColorCode(u==null?void 0:u.forceBackgroundColor))!==null&&T!==void 0?T:null,this.purpose_width=(D=(B=u==null?void 0:u.width)!==null&&B!==void 0?B:u==null||(j=u.canvas)===null||j===void 0?void 0:j.width)!==null&&D!==void 0?D:this.purpose_width,this.purpose_height=(Q=(ne=u==null?void 0:u.height)!==null&&ne!==void 0?ne:u==null||(te=u.canvas)===null||te===void 0?void 0:te.height)!==null&&Q!==void 0?Q:this.purpose_height,this.normalFont=(ae=u==null?void 0:u.normalFont)!==null&&ae!==void 0?ae:"sans-serif",this.gaijiFont=(re=u==null?void 0:u.gaijiFont)!==null&&re!==void 0?re:this.normalFont,this.drcsReplacement=(de=u==null?void 0:u.drcsReplacement)!==null&&de!==void 0&&de,this.drcsReplaceMapping=new Map(le);for(var Ie,Ee=Object.entries((Ie=u==null?void 0:u.drcsReplaceMapping)!==null&&Ie!==void 0?Ie:{}),Ne=0;Ne<Ee.length;Ne++){var Me=Ee[Ne];this.drcsReplaceMapping.set(Me[0],Me[1])}if(this.useStroke=(he=u==null?void 0:u.useStroke)!==null&&he!==void 0&&he,this.usePUA=(pe=u==null?void 0:u.usePUA)!==null&&pe!==void 0&&pe,!E.detect(this.pes,u))return null;for(var De=3+(15&this.pes[2]),We=(this.pes[De+0],(this.pes[De+3]<<8)+this.pes[De+4]),Ke=De+9;Ke<De+(5+We);){this.pes[Ke+0];var Fe=this.pes[Ke+1],ke=this.pes[Ke+2]<<16|this.pes[Ke+3]<<8|this.pes[Ke+4];Fe===32?this.parseText(Ke+5,Ke+5+ke):Fe==48?this.parseDRCS(1,Ke+5,Ke+5+ke):Fe==49&&this.parseDRCS(2,Ke+5,Ke+5+ke),Ke+=5+ke}if(this.option_canvas){var He=this.option_canvas.getContext("2d");if(He&&(He.clearRect(0,0,this.option_canvas.width,this.option_canvas.height),this.render_canvas))if(u!=null&&u.keepAspectRatio){var it=this.option_canvas.width/this.swf_x,ft=this.option_canvas.height/this.swf_y,ct=Math.min(it,ft),tt=this.swf_x*ct,dt=this.swf_y*ct,pt=(this.option_canvas.width-tt)/2,ut=(this.option_canvas.height-dt)/2;He.drawImage(this.render_canvas,0,0,this.render_canvas.width,this.render_canvas.height,pt,ut,tt,dt)}else He.drawImage(this.render_canvas,0,0,this.render_canvas.width,this.render_canvas.height,0,0,this.option_canvas.width,this.option_canvas.height)}return this.render_canvas&&(this.render_canvas.width=this.render_canvas.height=0,this.render_canvas=null),this.option_canvas=null,{startTime:this.startTime,endTime:(oe=this.endTime)!==null&&oe!==void 0?oe:Number.POSITIVE_INFINITY,rendered:this.rendered,textContent:this.rendered?this.render_text:null,PRA:this.PRA}}},{key:"parseText",value:function(u,_){for(;u<_;)if(32<this.pes[u]&&this.pes[u]<127){var x=0,T=this.G_BACK[this.GL];if(!T)return;for(var D=0;D<T.bytes;D++)x<<=8,x|=127&this.pes[u+D];this.renderCharacter(x,T),u+=T.bytes}else if(160<this.pes[u]&&this.pes[u]<255){var B=0,j=this.G_BACK[this.GR];if(!j)return;for(var Q=0;Q<j.bytes;Q++)B<<=8,B|=127&this.pes[u+Q];this.renderCharacter(B,j),u+=j.bytes}else if(this.pes[u]===0)u+=1;else if(this.pes[u]===7)u+=1;else if(this.pes[u]===8)this.move_relative_pos(-1,0),u+=1;else if(this.pes[u]===9)this.move_relative_pos(1,0),u+=1;else if(this.pes[u]===10)this.move_relative_pos(0,1),u+=1;else if(this.pes[u]===11)this.move_relative_pos(0,-1),u+=1;else if(this.pes[u]===12)this.startTime!=null&&this.timeElapsed>0&&(this.endTime=this.startTime+this.timeElapsed),u+=1;else if(this.pes[u]===13)this.move_newline(),u+=1;else if(this.pes[u]===14)this.GL=1,u+=1;else if(this.pes[u]===15)this.GL=0,u+=1;else if(this.pes[u]===22){var ne=63&this.pes[u+1];this.move_relative_pos(ne,0),u+=2}else if(this.pes[u]===24)u+=1;else if(this.pes[u]===25){var te=0,ae=this.G_BACK[2];if(!ae)return;for(var re=0;re<ae.bytes;re++)te<<=8,te|=127&this.pes[u+1+re];this.renderCharacter(te,ae),u+=1+ae.bytes}else if(this.pes[u]===27)if(this.pes[u+1]===110)this.GL=2,u+=2;else if(this.pes[u+1]==111)this.GL=3,u+=2;else if(this.pes[u+1]==126)this.GR=1,u+=2;else if(this.pes[u+1]==125)this.GR=2,u+=2;else if(this.pes[u+1]==124)this.GR=3,u+=2;else if(40<=this.pes[u+1]&&this.pes[u+1]<=43){var de=this.pes[u+1]-40;this.pes[u+2]===32?(this.G_BACK[de]=y.get(this.pes[u+3]),u+=4):(this.G_BACK[de]=p.get(this.pes[u+2]),u+=3)}else{if(this.pes[u+1]!==36)return;if(40<=this.pes[u+2]&&this.pes[u+2]<=43){var he=this.pes[u+2]-40;this.pes[u+3]===32?(this.G_BACK[he]=y.get(this.pes[u+4]),u+=5):(this.G_BACK[he]=p.get(this.pes[u+3]),u+=4)}else this.G_BACK[0]=p.get(this.pes[u+2]),u+=3}else if(this.pes[u]===28){var pe=63&this.pes[u+1],oe=63&this.pes[u+2];this.move_absolute_pos(oe,pe),u+=3}else if(this.pes[u]===29){var Ie=0,Ee=this.G_BACK[3];if(!Ee)return;for(var Ne=0;Ne<Ee.bytes;Ne++)Ie<<=8,Ie|=127&this.pes[u+1+Ne];this.renderCharacter(Ie,Ee),u+=1+Ee.bytes}else if(this.pes[u]===30)u+=1;else if(this.pes[u]===31)u+=1;else if(this.pes[u]===32){var Me=f.get(0);if(!Me)return;this.renderCharacter(8481,Me),u+=1}else if(this.pes[u]===127)u+=1;else if(this.pes[u]===128)this.fg_color=A[this.pallet][0],u+=1;else if(this.pes[u]===129)this.fg_color=A[this.pallet][1],u+=1;else if(this.pes[u]===130)this.fg_color=A[this.pallet][2],u+=1;else if(this.pes[u]===131)this.fg_color=A[this.pallet][3],u+=1;else if(this.pes[u]===132)this.fg_color=A[this.pallet][4],u+=1;else if(this.pes[u]===133)this.fg_color=A[this.pallet][5],u+=1;else if(this.pes[u]===134)this.fg_color=A[this.pallet][6],u+=1;else if(this.pes[u]===135)this.fg_color=A[this.pallet][7],u+=1;else if(this.pes[u]===136)this.text_size_x=.5,this.text_size_y=.5,u+=1;else if(this.pes[u]===137)this.text_size_x=.5,this.text_size_y=1,u+=1;else if(this.pes[u]===138)this.text_size_x=1,this.text_size_y=1,u+=1;else{if(this.pes[u]===139)return;if(this.pes[u]===144){var De=this.pes[u+1];if(De==32){var We=15&this.pes[u+2];this.pallet=We,u+=3}else{var Ke=15&De;(112&De)==64?this.fg_color=A[this.pallet][Ke]:(112&De)==80&&(this.bg_color=A[this.pallet][Ke]),u+=2}}else if(this.pes[u]===145)u+=2;else{if(this.pes[u]===146||this.pes[u]===147||this.pes[u]===148||this.pes[u]===149)return;if(this.pes[u]===151)this.hlc=15&this.pes[u+1],u+=2;else{if(this.pes[u]===152)return;if(this.pes[u]===153)this.stl=!1,u+=1;else if(this.pes[u]===154)this.stl=!0,u+=1;else if(this.pes[u]===155){for(var Fe=u,ke=-1,He=-1;Fe+1<_;)if(Fe+=1,this.pes[Fe]===32)ke<0&&(ke=Fe);else if(this.pes[Fe]===59)ke<0&&He<0&&(He=Fe);else{if(this.pes[Fe]===66)break;if(this.pes[Fe]===83){var it=u+1,ft=0;if(He>=0||ke<0)return;for(;it<ke;)ft*=10,ft+=15&this.pes[it],it++;if(ft===5)this.swf_x=3840,this.swf_y=2160;else if(ft===7)this.swf_x=1920,this.swf_y=1080;else{if(ft!=9)return;this.swf_x=1440,this.swf_y=960}break}if(this.pes[Fe]===84)break;if(this.pes[Fe]===86){for(var ct=u+1,tt=0,dt=0;ct<He;)tt*=10,tt+=15&this.pes[ct],ct++;for(ct++;ct<ke;)dt*=10,dt+=15&this.pes[ct],ct++;this.sdf_x=2*tt,this.sdf_y=2*dt;break}if(this.pes[Fe]===87){for(var pt=u+1,ut=0,Jt=0;pt<He;)ut*=10,ut+=15&this.pes[pt],pt++;for(pt++;pt<ke;)Jt*=10,Jt+=15&this.pes[pt],pt++;this.ssm_x=2*ut,this.ssm_y=2*Jt;break}if(this.pes[Fe]===88){for(var Nt=u+1,Lt=0;Nt<ke;)Lt*=10,Lt+=15&this.pes[Nt],Nt++;this.shs=2*Lt;break}if(this.pes[Fe]===89){for(var Dt=u+1,jt=0;Dt<ke;)jt*=10,jt+=15&this.pes[Dt],Dt++;this.svs=2*jt;break}if(this.pes[Fe]===91||this.pes[Fe]===92||this.pes[Fe]===93||this.pes[Fe]===94)break;if(this.pes[Fe]===95){for(var gt=u+1,Bt=0,Qt=0;gt<He;)Bt*=10,Bt+=15&this.pes[gt],gt++;for(gt++;gt<ke;)Qt*=10,Qt+=15&this.pes[gt],gt++;this.sdp_x=2*Bt,this.sdp_y=2*Qt;break}if(this.pes[Fe]===97){for(var Et=u+1,ei=0,ii=0;Et<He;)ei*=10,ei+=15&this.pes[Et],Et++;for(Et++;Et<ke;)ii*=10,ii+=15&this.pes[Et],Et++;this.move_absolute_dot(2*ei,2*ii);break}if(this.pes[Fe]===98)break;if(this.pes[Fe]===99){var hi=this.pes[u+1];if(hi==48)this.orn=null;else if(hi==49){var ci=10*(15&this.pes[u+3])+(15&this.pes[u+4]),wi=10*(15&this.pes[u+5])+(15&this.pes[u+6]);this.orn=A[ci][wi]}break}if(this.pes[Fe]===100||this.pes[Fe]===101||this.pes[Fe]===102||this.pes[Fe]===103)break;if(this.pes[Fe]===104){for(var pi=u+1,ai=0;pi<ke;)ai*=10,ai+=15&this.pes[pi],pi++;this.PRA=ai;break}if(this.pes[Fe]===105||this.pes[Fe]===106||this.pes[Fe]===110||this.pes[Fe]===111)break}u=Fe+1}else{if(this.pes[u]!==157)return;if(this.pes[u+1]!=32)return void this.pes[u+1];var en=63&this.pes[u+2];this.timeElapsed+=en/10,u+=3}}}}}},{key:"parseDRCS",value:function(u,_,x){for(this.pes[_+0],_+=1;_<x;){var T=this.pes[_+0]<<8|this.pes[_+1],D=this.pes[_+2];_+=3;for(var B=0;B<D;B++){this.pes[_+0];var j=15&this.pes[_+0];if(j===0||j===1){var Q=this.pes[_+1]+2,ne=this.pes[_+2],te=this.pes[_+3],ae=Q.toString(2).length-Q.toString(2).replace(/0*$/,"").length,re=Math.floor(ne*te*ae/8),de=new Uint8Array(Array.prototype.slice.call(this.pes,_+4,_+4+re));if(u===1){var he,pe,oe=64+((3840&T)>>8),Ie=127&T,Ee=(he=y.get(oe))===null||he===void 0?void 0:he.alphabet;Ee&&((pe=this.DRCS_mapping.get(Ee))===null||pe===void 0||pe.set(Ie,de))}else{var Ne,Me=32639&T;(Ne=this.DRCS_mapping.get(15))===null||Ne===void 0||Ne.set(Me,de)}_+=4+re}}}}},{key:"renderCharacter",value:function(u,_){var x;if((this.position_x<0||this.position_y<0)&&this.move_absolute_dot(this.sdp_x,this.sdp_y+(this.ssm_y+this.svs)),this.option_canvas){this.option_canvas&&!this.render_canvas&&(this.render_canvas=document.createElement("canvas"),this.render_canvas.width=this.canvas_width(),this.render_canvas.height=this.canvas_height());var T=(x=this.render_canvas)===null||x===void 0?void 0:x.getContext("2d");if(T){if(_.alphabet===0){var D=((65280&u)>>8)-33,B=(255&u)-33;if(D===0&&12<=B&&B<=17)return void(this.non_spacing=["ÃÅ","ÃÄ","Ãà","ÃÇ","ÃÖ","Ã≤"][B-12]);if(D===1&&B===93)return void(this.non_spacing+="‚Éù")}var j;if(_.alphabet!==31&&(this.rendered=!0,T.fillStyle=E.getRGBAfromColorCode((j=this.force_bg_color)!==null&&j!==void 0?j:this.bg_color),T.fillRect(this.position_x*this.width_magnification(),(this.position_y-this.height())*this.height_magnification(),this.width()*this.width_magnification(),this.height()*this.height_magnification()),1&this.hlc&&(T.fillStyle=E.getRGBAfromColorCode(this.fg_color),T.fillRect(this.position_x*this.width_magnification(),(this.position_y-1)*this.height_magnification(),this.width()*this.width_magnification(),1*this.height_magnification())),2&this.hlc&&(T.fillStyle=E.getRGBAfromColorCode(this.fg_color),T.fillRect((this.position_x+this.width()-1)*this.width_magnification(),(this.position_y-this.height())*this.height_magnification(),1*this.width_magnification(),this.height()*this.height_magnification())),4&this.hlc&&(T.fillStyle=E.getRGBAfromColorCode(this.fg_color),T.fillRect(this.position_x*this.width_magnification(),(this.position_y-this.height())*this.height_magnification(),this.width()*this.width_magnification(),1*this.height_magnification())),8&this.hlc&&(T.fillStyle=E.getRGBAfromColorCode(this.fg_color),T.fillRect(this.position_x*this.width_magnification(),(this.position_y-this.height())*this.height_magnification(),1*this.width_magnification(),this.height()*this.height_magnification())),this.stl&&(T.fillStyle=E.getRGBAfromColorCode(this.fg_color),T.fillRect(this.position_x*this.width_magnification(),(this.position_y-1)*this.height_magnification(),this.width()*this.width_magnification(),1*this.height_magnification()))),_.alphabet===0){var Q=94*(((65280&u)>>8)-33)+((255&u)-33),ne=7896;if(Q<ne){var te=C[Q];this.renderFont(te)}else if(this.usePUA){var ae=I[Q-ne];this.renderFont(ae)}else{var re=P[Q-ne];this.renderFont(re)}this.move_relative_pos(1,0)}else if(_.alphabet===1){var de=M[u-33];this.renderFont(de),this.move_relative_pos(1,0)}else if(_.alphabet===2){var he=G[u-33];this.renderFont(he),this.move_relative_pos(1,0)}else if(_.alphabet===3){var pe=Z[u-33];this.renderFont(pe),this.move_relative_pos(1,0)}else{if(_.alphabet===31)return void(u===96?(this.G_BACK=[f.get(0),f.get(1),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===97?(this.G_BACK=[f.get(0),f.get(3),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===98?(this.G_BACK=[f.get(0),g.get(16),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===99?(this.G_BACK=[f.get(4),f.get(6),f.get(7),g.get(31)],this.GL=0,this.GR=2):u===100?(this.G_BACK=[f.get(4),f.get(5),f.get(7),g.get(31)],this.GL=0,this.GR=2):u===101?(this.G_BACK=[f.get(4),g.get(16),f.get(7),g.get(31)],this.GL=0,this.GR=2):u===102?(this.G_BACK=[g.get(16),g.get(17),g.get(18),g.get(31)],this.GL=0,this.GR=2):u===103?(this.G_BACK=[g.get(19),g.get(20),g.get(21),g.get(31)],this.GL=0,this.GR=2):u===104?(this.G_BACK=[g.get(22),g.get(23),g.get(24),g.get(31)],this.GL=0,this.GR=2):u===105?(this.G_BACK=[g.get(25),g.get(26),g.get(27),g.get(31)],this.GL=0,this.GR=2):u===106?(this.G_BACK=[g.get(28),g.get(29),g.get(30),g.get(31)],this.GL=0,this.GR=2):u===107?(this.G_BACK=[f.get(0),g.get(17),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===108?(this.G_BACK=[f.get(0),g.get(18),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===109?(this.G_BACK=[f.get(0),g.get(19),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===110?(this.G_BACK=[f.get(3),f.get(2),f.get(1),g.get(31)],this.GL=0,this.GR=2):u===111&&(this.G_BACK=[f.get(1),f.get(4),g.get(16),g.get(31)],this.GL=0,this.GR=2));var oe,Ie=(oe=this.DRCS_mapping.get(_.alphabet))===null||oe===void 0?void 0:oe.get(32639&u);if(!Ie)return;var Ee=ve(Ie.buffer);if(this.drcsReplacement&&this.drcsReplaceMapping.has(Ee.toLowerCase()))this.renderFont(this.drcsReplaceMapping.get(Ee.toLowerCase()));else if(this.drcsReplacement&&this.drcsReplaceMapping.has(Ee.toUpperCase()))this.renderFont(this.drcsReplaceMapping.get(Ee.toUpperCase()));else{var Ne=Math.floor(this.ssm_x*this.text_size_x/2),Me=Math.floor(this.ssm_y*this.text_size_y/2),De=Math.floor(8*Ie.length/(Ne*Me)),We=this.getOrnColorCode();if(We&&(!this.force_orn||this.force_orn===!0||this.force_orn!==this.fg_color)){T.fillStyle=E.getRGBAfromColorCode(We);for(var Ke=-2*this.height_magnification();Ke<=2*this.height_magnification();Ke++)for(var Fe=-2*this.width_magnification();Fe<=2*this.width_magnification();Fe++)for(var ke=0;ke<Me;ke++)for(var He=0;He<Ne;He++){for(var it=0,ft=0;ft<De;ft++){var ct=7-((ke*Ne+He)*De+ft)%8;it*=2,it+=(Ie[Math.floor(((ke*Ne+He)*De+ft)/8)]&1<<ct)>>ct}it>0&&T.fillRect((this.position_x-0+Math.floor(this.shs*this.text_size_x/2)+2*He)*this.width_magnification()+2*Fe,(this.position_y-this.height()+Math.floor(this.svs*this.text_size_y/2)+2*ke)*this.height_magnification()+2*Ke,2*this.width_magnification(),2*this.height_magnification())}}T.fillStyle=E.getRGBAfromColorCode(this.fg_color);for(var tt=0;tt<Me;tt++)for(var dt=0;dt<Ne;dt++){for(var pt=0,ut=0;ut<De;ut++){var Jt=7-((tt*Ne+dt)*De+ut)%8;pt*=2,pt+=(Ie[Math.floor(((tt*Ne+dt)*De+ut)/8)]&1<<Jt)>>Jt}pt>0&&T.fillRect((this.position_x-0+Math.floor(this.shs*this.text_size_x/2)+2*dt)*this.width_magnification(),(this.position_y-this.height()+Math.floor(this.svs*this.text_size_y/2)+2*tt)*this.height_magnification(),2*this.width_magnification(),2*this.height_magnification())}}this.move_relative_pos(1,0)}}}}},{key:"renderFont",value:function(u){var _;if(u+=this.non_spacing,this.non_spacing="",this.text_size_x===.5&&this.text_size_y===.5&&(G.includes(u)||Z.includes(u))||(this.render_text+=u),this.render_canvas)if(k!=null&&k.has(u)){var x=k.get(u),T=x.viewBox,D=x.path;this.renderPath(T,D)}else{var B=W.has(u);B&&(u+="Ô∏é");var j=(_=this.render_canvas)===null||_===void 0?void 0:_.getContext("2d");if(j){var Q=(this.position_x+this.width()/2)*this.width_magnification(),ne=(this.position_y-this.height()/2)*this.height_magnification();j.translate(Q,ne),j.scale(this.text_size_x*this.width_magnification(),this.text_size_y*this.height_magnification());var te=this.getOrnColorCode();if(te&&(!this.force_orn||this.force_orn===!0||this.force_orn!==this.fg_color))if(this.useStroke)j.font="".concat(this.ssm_x,"px ").concat(B?this.gaijiFont:this.normalFont),j.strokeStyle=E.getRGBAfromColorCode(te),j.lineJoin="round",j.textBaseline="middle",j.textAlign="center",j.lineWidth=8,j.strokeText(u,0,0);else{j.setTransform(1,0,0,1,0,0),j.translate(Q,ne),j.scale(this.text_size_x,this.text_size_y*this.height_magnification()/this.width_magnification());for(var ae=-4*this.width_magnification();ae<=4*this.width_magnification();ae++)for(var re=-4*this.width_magnification();re<=4*this.width_magnification();re++)j.font="".concat(this.ssm_x*this.width_magnification(),"px ").concat(B?this.gaijiFont:this.normalFont),j.fillStyle=E.getRGBAfromColorCode(te),j.textBaseline="middle",j.textAlign="center",j.fillText(u,0+re,0+ae);j.setTransform(1,0,0,1,0,0),j.translate(Q,ne),j.scale(this.text_size_x*this.width_magnification(),this.text_size_y*this.height_magnification())}j.font="".concat(this.ssm_x,"px ").concat(B?this.gaijiFont:this.normalFont),j.fillStyle=E.getRGBAfromColorCode(this.fg_color),j.textBaseline="middle",j.textAlign="center",j.fillText(u,0,0),j.setTransform(1,0,0,1,0,0)}}}},{key:"renderPath",value:function(u,_){var x;if(this.render_canvas){var T=(x=this.render_canvas)===null||x===void 0?void 0:x.getContext("2d");if(T){var D=(this.position_x+this.shs/2)*this.width_magnification(),B=(this.position_y-this.height()+this.svs/2)*this.height_magnification();T.translate(D,B);var j=Pe(u,4),Q=j[0],ne=j[1],te=j[2]-Q,ae=j[3]-ne;T.scale(this.ssm_y/te,this.ssm_y/ae),T.translate(Q,ne);var re=this.getOrnColorCode();if(re&&(!this.force_orn||this.force_orn===!0||this.force_orn!==this.fg_color))if(this.useStroke)T.strokeStyle=E.getRGBAfromColorCode(re),T.lineJoin="round",T.lineWidth=4*Math.max(te/this.ssm_y,ae/this.ssm_y)*2,T.stroke(new Path2D(_));else for(var de=-4*this.width_magnification();de<=4*this.width_magnification();de++)for(var he=-4*this.width_magnification();he<=4*this.width_magnification();he++)T.translate(he,de),T.fillStyle=E.getRGBAfromColorCode(re),T.fill(new Path2D(_)),T.translate(-he,-de);T.fillStyle=E.getRGBAfromColorCode(this.fg_color),T.fill(new Path2D(_)),T.setTransform(1,0,0,1,0,0)}}}},{key:"getOrnColorCode",value:function(){return this.force_orn===!0?E.fillAlphaColorCode(this.bg_color):this.force_orn===!1?this.orn:(u=this.force_orn)!==null&&u!==void 0?u:this.orn;var u}}])&&b(F.prototype,h),m&&b(F,m),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,h,m}();function w(E){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},w(E)}function $(E,F){(F==null||F>E.length)&&(F=E.length);for(var h=0,m=Array(F);h<F;h++)m[h]=E[h];return m}function X(E,F){if(!(E instanceof F))throw new TypeError("Cannot call a class as a function")}function ie(E,F){for(var h=0;h<F.length;h++){var m=F[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(E,me(m.key),m)}}function se(E,F,h){return F&&ie(E.prototype,F),Object.defineProperty(E,"prototype",{writable:!1}),E}function me(E){var F=function(h){if(w(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var u=m.call(h,"string");if(w(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}(E);return w(F)=="symbol"?F:F+""}function ge(E){var F=typeof Map=="function"?new Map:void 0;return ge=function(h){if(h===null||!function(u){try{return Function.toString.call(u).indexOf("[native code]")!==-1}catch{return typeof u=="function"}}(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(F!==void 0){if(F.has(h))return F.get(h);F.set(h,m)}function m(){return Re(h,arguments,st(this).constructor)}return m.prototype=Object.create(h.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),Je(m,h)},ge(E)}function Re(E,F,h){if(Ge())return Reflect.construct.apply(null,arguments);var m=[null];m.push.apply(m,F);var u=new(E.bind.apply(E,m));return h&&Je(u,h.prototype),u}function Ge(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ge=function(){return!!E})()}function Je(E,F){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,m){return h.__proto__=m,h},Je(E,F)}function st(E){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(F){return F.__proto__||Object.getPrototypeOf(F)},st(E)}c(113),c(8980),c(6910),c(4554),c(875),c(287),c(825);var xt=function(E){function F(){return X(this,F),h=this,u=arguments,m=st(m=F),function(_,x){if(x&&(w(x)=="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(_)}(h,Ge()?Reflect.construct(m,u||[],st(h).constructor):m.apply(h,u));var h,m,u}return function(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(m&&m.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),m&&Je(h,m)}(F,E),se(F,[{key:"addCue",value:function(h){this.push(h)}},{key:"removeCue",value:function(h){var m=this.findIndex(function(u){return u===h});m<0||this.splice(m,1)}},{key:"getCueById",value:function(h){var m;return(m=this.find(function(u){return u.id===h}))!==null&&m!==void 0?m:null}}])}(ge(Array)),qe=se(function E(F){X(this,E),this.all=new xt,this.active=new xt,this.polling_handler=this.polling.bind(this),this.polling_id=null,this.cues=this.all,this.oncuechange=null,this.id="",this.kind="metadata",this.label="",this.language="ja-JP",this.mode="hidden",this.inBandMetadataTrackDispatchType="",this.sourceBuffer=null,this.listeners=[],this.media=F},[{key:"startPolling",value:function(){this.polling_id=window.requestAnimationFrame(this.polling_handler)}},{key:"stopPolling",value:function(){this.polling_id!=null&&(window.cancelAnimationFrame(this.polling_id),this.polling_id=null)}},{key:"polling",value:function(){var E=this.active,F=this.activeCues;if(E.length!==F.length){var h=null;try{h=new CustomEvent("cuechange")}catch{(h=document.createEvent("CustomEvent")).initCustomEvent("cuechange",!1,!1,{})}h!=null&&(this.dispatchEvent(h),this.oncuechange&&this.oncuechange.call(this,h))}else for(var m=0;m<F.length;m++)if(E[m]!==F[m]){var u=null;try{u=new CustomEvent("cuechange")}catch{(u=document.createEvent("CustomEvent")).initCustomEvent("cuechange",!1,!1,{})}if(u!=null){this.dispatchEvent(u),this.oncuechange&&this.oncuechange.call(this,u);break}}this.polling_id=window.requestAnimationFrame(this.polling_handler)}},{key:"activeCues",get:function(){var E,F=this,h=Re(xt,function(m){if(Array.isArray(m))return $(m)}(E=this.all.filter(function(m){return m.startTime<=F.media.currentTime&&F.media.currentTime<=m.endTime}))||function(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)}(E)||function(m,u){if(m){if(typeof m=="string")return $(m,u);var _={}.toString.call(m).slice(8,-1);return _==="Object"&&m.constructor&&(_=m.constructor.name),_==="Map"||_==="Set"?Array.from(m):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?$(m,u):void 0}}(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());return h.sort(function(m,u){return m.startTime===u.startTime?-(m.endTime-u.endTime):m.startTime-u.startTime}),this.active=h,this.active}},{key:"getCueById",value:function(E){return this.all.getCueById(E)}},{key:"addCue",value:function(E){this.all.addCue(E)}},{key:"removeCue",value:function(E){this.all.removeCue(E)}},{key:"addEventListener",value:function(E,F){this.listeners.push(F)}},{key:"removeEventListener",value:function(E,F){var h=this.listeners.findIndex(function(m){return m===F});h<0||this.listeners.splice(h,1)}},{key:"dispatchEvent",value:function(E){var F=this;return E.type!=="cuechange"||this.listeners.forEach(function(h){return h.call(F,E)}),!0}}]);function bt(E){return bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},bt(E)}function St(E,F){for(var h=0;h<F.length;h++){var m=F[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(E,Ue(m.key),m)}}function Ue(E){var F=function(h){if(bt(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var u=m.call(h,"string");if(bt(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}(E);return bt(F)=="symbol"?F:F+""}var Vt=function(){return E=function h(m,u){(function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")})(this,h),this.id="",this.pauseOnExit=!1,this.onenter=null,this.onexit=null,this.track=null,this.startTime=m,this.endTime=u},(F=[{key:"addEventListener",value:function(h,m,u){}},{key:"removeEventListener",value:function(h,m,u){}},{key:"dispatchEvent",value:function(h){return!1}}])&&St(E.prototype,F),Object.defineProperty(E,"prototype",{writable:!1}),E;var E,F}();function Kt(E,F,h){for(var m=0,u=F;u<h;u++)m<<=7,m|=127&E[u];return m}function It(E,F,h){for(var m="",u=F;u<h;u++)m+="%".concat(E[u].toString(16).padStart(2,"0"));return m}function Yt(E,F,h){if(window.TextDecoder){var m=new TextDecoder("utf-8"),u=new Uint8Array(Array.prototype.slice.call(E,F,h));return m.decode(u)}return window.decodeURIComponent(It(E,F,h))}function Te(E,F,h){if(window.TextDecoder){var m=new TextDecoder("iso-8859-1"),u=new Uint8Array(Array.prototype.slice.call(E,F,h));return m.decode(u)}return window.unescape(It(E,F,h))}function $e(E){for(var F=window.atob(E),h=new Uint8Array(F.length),m=0;m<F.length;m++)h[m]=F.charCodeAt(m);return h}function lt(E){return lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},lt(E)}function vt(E,F){var h=Object.keys(E);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(E);F&&(m=m.filter(function(u){return Object.getOwnPropertyDescriptor(E,u).enumerable})),h.push.apply(h,m)}return h}function _t(E){for(var F=1;F<arguments.length;F++){var h=arguments[F]!=null?arguments[F]:{};F%2?vt(Object(h),!0).forEach(function(m){Wt(E,m,h[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(h)):vt(Object(h)).forEach(function(m){Object.defineProperty(E,m,Object.getOwnPropertyDescriptor(h,m))})}return E}function Wt(E,F,h){return(F=Ct(F))in E?Object.defineProperty(E,F,{value:h,enumerable:!0,configurable:!0,writable:!0}):E[F]=h,E}function Tt(E,F){for(var h=0;h<F.length;h++){var m=F[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(E,Ct(m.key),m)}}function Ct(E){var F=function(h){if(lt(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var u=m.call(h,"string");if(lt(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}(E);return lt(F)=="symbol"?F:F+""}var ri=function(){return E=function h(m){var u,_,x,T,D;(function(B,j){if(!(B instanceof j))throw new TypeError("Cannot call a class as a function")})(this,h),this.media=null,this.id3Track=null,this.b24Track=null,this.subtitleElement=null,this.viewCanvas=null,this.rawCanvas=null,this.textContent=null,this.resizeObserver=null,this.mutationObserver=null,this.prevCurrentTime=null,this.highResTimeupdatePollingId=null,this.isShowing=!0,this.isOnSeeking=!1,this.onB24CueChangeDrawed=!1,this.onID3AddtrackHandler=this.onID3Addtrack.bind(this),this.onID3CueChangeHandler=this.onID3CueChange.bind(this),this.onB24CueChangeHandler=this.onB24CueChange.bind(this),this.onHighResTimeupdateHandler=this.onHighResTimeupdate.bind(this),this.onTimeupdateHandler=this.onTimeupdate.bind(this),this.onCanplayHandler=this.onCanplay.bind(this),this.onPlayHandler=this.onPlay.bind(this),this.onPauseHandler=this.onPause.bind(this),this.onSeekingHandler=this.onSeeking.bind(this),this.onSeekedHandler=this.onSeeked.bind(this),this.onResizeHandler=this.onResize.bind(this),this.data_identifier=(u=m==null?void 0:m.data_identifier)!==null&&u!==void 0?u:128,this.data_group_id=(_=m==null?void 0:m.data_group_id)!==null&&_!==void 0?_:1,this.rendererOption=_t(_t({},m),{},{data_identifier:this.data_identifier,data_group_id:this.data_group_id,keepAspectRatio:(x=m==null?void 0:m.keepAspectRatio)===null||x===void 0||x,enableAutoInBandMetadataTextTrackDetection:(T=m==null?void 0:m.enableAutoInBandMetadataTextTrackDetection)===null||T===void 0||T,useStroke:(D=m==null?void 0:m.useStroke)===null||D===void 0||D})},(F=[{key:"attachMedia",value:function(h,m){var u;this.detachMedia(),this.media=h,this.subtitleElement=m??h.parentElement,this.media.addEventListener("canplay",this.onCanplayHandler),(u=this.rendererOption)!==null&&u!==void 0&&u.useHighResTimeupdate?(this.media.addEventListener("play",this.onPlayHandler),this.media.addEventListener("pause",this.onPauseHandler)):this.media.addEventListener("timeupdate",this.onTimeupdateHandler),this.prevCurrentTime=null,this.setupTrack(),this.setupCanvas()}},{key:"detachMedia",value:function(){var h,m,u,_;this.cleanupCanvas(),this.cleanupTrack(),(h=this.media)===null||h===void 0||h.removeEventListener("canplay",this.onCanplayHandler),(m=this.media)===null||m===void 0||m.removeEventListener("play",this.onPlayHandler),(u=this.media)===null||u===void 0||u.removeEventListener("pause",this.onPauseHandler),this.onPause(),(_=this.media)===null||_===void 0||_.removeEventListener("timeupdate",this.onTimeupdateHandler),this.prevCurrentTime=null,this.media=this.subtitleElement=null}},{key:"dispose",value:function(){this.detachMedia()}},{key:"getViewCanvas",value:function(){return this.viewCanvas}},{key:"getRawCanvas",value:function(){return this.rawCanvas}},{key:"getTextContent",value:function(){return this.textContent}},{key:"refresh",value:function(){this.onResize()}},{key:"show",value:function(){this.isShowing=!0,this.onResize()}},{key:"hide",value:function(){if(this.isShowing=!1,this.viewCanvas){var h=this.viewCanvas.getContext("2d");h&&h.clearRect(0,0,this.viewCanvas.width,this.viewCanvas.height)}if(this.rawCanvas){var m=this.rawCanvas.getContext("2d");m&&m.clearRect(0,0,this.rawCanvas.width,this.rawCanvas.height)}}},{key:"isPresent",value:function(){return this.onB24CueChangeDrawed}},{key:"pushRawData",value:function(h,m){var u=new R(m,h).render(_t(_t({},this.rendererOption),{},{width:void 0,height:void 0}));if(u==null)return!1;var _=Number.isFinite(u.endTime)?u.endTime:Number.MAX_SAFE_INTEGER;return this.addB24Cue(h,_,m)}},{key:"pushBase64Data",value:function(h,m){var u=$e(m);return this.pushRawData(h,u)}},{key:"pushData",value:function(h,m,u){return this.pushRawData(u,m)}},{key:"pushID3v2PRIVData",value:function(h,m,u){return m==="aribb24.js"&&this.pushRawData(h,u)}},{key:"pushID3v2TXXXData",value:function(h,m,u){return m==="aribb24.js"&&this.pushBase64Data(h,u)}},{key:"pushID3v2Data",value:function(h,m){for(var u=!1,_=0;_<m.length;){var x=_;if(_+3>m.length)break;if(m[_+0]!==73||m[_+1]!==68||m[_+2]!==51){if(_===0){_+=5;continue}break}if((_+=6)+4>m.length)break;var T=Kt(m,_+0,_+4);_+=4;var D=x+3+2+1+4+T;if(D>m.length)break;for(var B=_;B<D;){var j=B;if(B+4>m.length)break;var Q=Te(m,B+0,B+4);if((B+=4)+4>m.length)break;var ne=Kt(m,B+0,B+4);B+=6;var te=j+4+4+2+ne;if(te>m.length)break;if(Q==="PRIV"){for(var ae=B,re=te;m[B]!==0&&B<te;)B++;var de=Te(m,ae,B),he=new Uint8Array(Array.prototype.slice.call(m,B+1,re));this.pushID3v2PRIVData(h,de,he)&&(u=!0)}else if(Q==="TXXX"){var pe=m[B+0],oe=B+1;if(pe===3){for(;m[B]!==0&&B<te;)B++;for(var Ie=B,Ee=B+=1;m[B]!==0&&B<te;)B++;var Ne=B,Me=Yt(m,oe,Ie),De=Yt(m,Ee,Ne);this.pushID3v2TXXXData(h,Me,De)&&(u=!0)}else if(pe===0){for(;m[B]!==0&&B<te;)B++;for(var We=B,Ke=B+=1;m[B]!==0&&B<te;)B++;var Fe=B,ke=Te(m,oe,We),He=Te(m,Ke,Fe);this.pushID3v2TXXXData(h,ke,He)&&(u=!0)}}B=te}(_=x+3+2+1+4+T)+3>m.length||m[_+0]===51&&m[_+1]===68&&m[_+2]===73&&(_+=10)}return u}},{key:"setInBandMetadataTextTrack",value:function(h){var m;(m=this.id3Track)===null||m===void 0||m.removeEventListener("cuechange",this.onID3CueChangeHandler),this.id3Track=h,this.id3Track.mode="hidden",this.id3Track.addEventListener("cuechange",this.onID3CueChangeHandler)}},{key:"pushID3v2Cue",value:function(h){if(!this.id3Track)return!1;var m=h.startTime,u=h;if(this.id3Track.inBandMetadataTrackDispatchType==="15260DFFFF49443320FF49443320000F")return this.pushID3v2Data(m,new Uint8Array(u.data));if(this.id3Track.inBandMetadataTrackDispatchType==="com.apple.streaming"){if(u.value.key==="PRIV")return this.pushID3v2PRIVData(m,u.value.info,new Uint8Array(u.value.data));if(u.value.key==="TXXX")return this.pushID3v2TXXXData(m,u.value.info,u.value.data)}else if(this.id3Track.label==="id3"){if(u.value.key==="PRIV")return this.pushID3v2PRIVData(m,u.value.info,new Uint8Array(u.value.data));if(u.value.key==="TXXX")return this.pushID3v2TXXXData(m,u.value.info,u.value.data)}else if(this.id3Track.label==="Timed Metadata"){if(u.frame.key==="PRIV")return this.pushID3v2PRIVData(m,u.frame.owner,new Uint8Array(u.frame.data));if(u.frame.key==="TXXX")return this.pushID3v2TXXXData(m,u.frame.description,u.frame.data)}return!1}},{key:"onID3CueChange",value:function(){this.id3Track&&(this.isOnSeeking||this.onTimeupdate())}},{key:"addB24Cue",value:function(h,m,u){var _;if(!this.b24Track||!R.detect(u,this.rendererOption))return!1;var x=new((_=window.VTTCue)!==null&&_!==void 0?_:window.TextTrackCue)(h,m,"");if(x.data=u,window.VTTCue)this.b24Track.addCue(x);else if(window.TextTrackCue){var T;if(Array.prototype.some.call((T=this.b24Track.cues)!==null&&T!==void 0?T:[],function(Q){return Q.startTime===h}))return!1;if(this.b24Track.cues){for(var D=[],B=this.b24Track.cues.length-1;B>=0;B--)this.b24Track.cues[B].startTime>=h&&(D.push(this.b24Track.cues[B]),this.b24Track.removeCue(this.b24Track.cues[B]));this.b24Track.addCue(x);for(var j=D.length-1;j>=0;j--)this.b24Track.addCue(D[j])}}return!0}},{key:"onB24CueChange",value:function(){if(this.media&&this.b24Track){if(this.viewCanvas){var h=this.viewCanvas.getContext("2d");h&&h.clearRect(0,0,this.viewCanvas.width,this.viewCanvas.height)}if(this.rawCanvas){var m=this.rawCanvas.getContext("2d");m&&m.clearRect(0,0,this.rawCanvas.width,this.rawCanvas.height)}if(this.b24Track.activeCues&&this.b24Track.activeCues.length>0){var u=this.b24Track.activeCues[this.b24Track.activeCues.length-1];if(u.startTime<=this.media.currentTime&&this.media.currentTime<=u.endTime&&!this.isOnSeeking){var _=new R(u.data,u.startTime),x=!1;if(this.isShowing&&this.viewCanvas){var T,D,B,j,Q,ne,te,ae,re=_.render(_t(_t({},this.rendererOption),{},{canvas:this.viewCanvas,width:(T=(D=this.rendererOption)===null||D===void 0?void 0:D.width)!==null&&T!==void 0?T:this.viewCanvas.width,height:(B=(j=this.rendererOption)===null||j===void 0?void 0:j.height)!==null&&B!==void 0?B:this.viewCanvas.height}));(re==null?void 0:re.PRA)!=null&&((te=this.rendererOption)===null||te===void 0||(ae=te.PRACallback)===null||ae===void 0||ae.call(te,re.PRA)),x=(Q=re==null?void 0:re.rendered)!==null&&Q!==void 0&&Q,this.textContent=(ne=re==null?void 0:re.textContent)!==null&&ne!==void 0?ne:null}this.isShowing&&this.rawCanvas&&_.render(_t(_t({},this.rendererOption),{},{canvas:this.rawCanvas,width:this.rawCanvas.width,height:this.rawCanvas.height,keepAspectRatio:!0})),this.onB24CueChangeDrawed=x}else this.onB24CueChangeDrawed=!1,this.textContent=null;for(var de=this.b24Track.activeCues.length-2;de>=0;de--){var he=this.b24Track.activeCues[de];he.endTime=Math.min(he.endTime,u.startTime),he.startTime===he.endTime&&this.b24Track.removeCue(he)}}else this.onB24CueChangeDrawed=!1,this.textContent=null}else this.onB24CueChangeDrawed=!1}},{key:"onHighResTimeupdate",value:function(){this.onTimeupdate(),this.highResTimeupdatePollingId=window.requestAnimationFrame(this.onHighResTimeupdateHandler)}},{key:"onTimeupdate",value:function(){if(this.media)if(this.prevCurrentTime!=null)if(this.id3Track&&this.id3Track.cues&&this.id3Track.cues.length!==0)if(this.isOnSeeking)this.prevCurrentTime=this.media.currentTime;else if(Math.abs(this.media.currentTime-this.prevCurrentTime)>1)this.prevCurrentTime=this.media.currentTime;else{for(var h,m,u=new Vt(Number.NEGATIVE_INFINITY,this.id3Track.cues[0].startTime),_=[u],x=0;x<this.id3Track.cues.length;x++)_.push(this.id3Track.cues[x]);for(var T=0,D=_.length;T+1<D;){var B=this.prevCurrentTime,j=Math.floor((T+D)/2);B<_[j].startTime?D=j:T=j}h=T;for(var Q=0,ne=_.length;Q+1<ne;){var te=this.media.currentTime,ae=Math.floor((Q+ne)/2);te<_[ae].startTime?ne=ae:Q=ae}if(m=Q,h!==null&&m!==null&&h!==m){if(h<m)for(var re=m;re>h;re--){var de=_[re];if(de!==u&&this.pushID3v2Cue(de))break}else for(var he=h;he<m;he++){var pe=_[he];if(pe!==u&&this.pushID3v2Cue(pe))break}this.prevCurrentTime=this.media.currentTime}else this.prevCurrentTime=this.media.currentTime}else this.prevCurrentTime=this.media.currentTime;else this.prevCurrentTime=this.media.currentTime}},{key:"onCanplay",value:function(){this.id3Track&&(this.id3Track.mode="hidden"),this.b24Track&&(this.b24Track.mode="hidden"),this.media!=null&&this.prevCurrentTime==null&&(this.prevCurrentTime=this.media.currentTime-Number.MIN_VALUE)}},{key:"onPlay",value:function(){this.highResTimeupdatePollingId==null&&this.onHighResTimeupdate()}},{key:"onPause",value:function(){this.highResTimeupdatePollingId!=null&&(window.cancelAnimationFrame(this.highResTimeupdatePollingId),this.highResTimeupdatePollingId=null)}},{key:"onSeeking",value:function(){this.isOnSeeking=!0,this.onB24CueChange()}},{key:"onSeeked",value:function(){this.isOnSeeking=!1}},{key:"onResize",value:function(){if(this.media){var h=window.getComputedStyle(this.media),m=Number.parseInt(h.width)*window.devicePixelRatio,u=Number.parseInt(h.height)*window.devicePixelRatio,_=this.media.videoWidth,x=this.media.videoHeight;if(this.viewCanvas&&(this.viewCanvas.width=Math.round(m),this.viewCanvas.height=Math.round(u)),this.rawCanvas&&(this.rawCanvas.width=_,this.rawCanvas.height=x),this.b24Track){if(this.viewCanvas){var T=this.viewCanvas.getContext("2d");T&&T.clearRect(0,0,this.viewCanvas.width,this.viewCanvas.height)}if(this.rawCanvas){var D=this.rawCanvas.getContext("2d");D&&D.clearRect(0,0,this.rawCanvas.width,this.rawCanvas.height)}if(this.onB24CueChangeDrawed&&this.b24Track.activeCues&&this.b24Track.activeCues.length>0){var B=this.b24Track.activeCues[this.b24Track.activeCues.length-1];if(B.startTime<=this.media.currentTime&&this.media.currentTime<=B.endTime&&!this.isOnSeeking){var j,Q,ne,te,ae=new R(B.data,B.startTime);this.isShowing&&this.viewCanvas&&ae.render(_t(_t({},this.rendererOption),{},{canvas:this.viewCanvas,width:(j=(Q=this.rendererOption)===null||Q===void 0?void 0:Q.width)!==null&&j!==void 0?j:this.viewCanvas.width,height:(ne=(te=this.rendererOption)===null||te===void 0?void 0:te.height)!==null&&ne!==void 0?ne:this.viewCanvas.height})),this.isShowing&&this.rawCanvas&&ae.render(_t(_t({},this.rendererOption),{},{canvas:this.rawCanvas,width:this.rawCanvas.width,height:this.rawCanvas.height,keepAspectRatio:!0}))}}}}}},{key:"onID3Addtrack",value:function(h){if(this.media){var m=h.track;m.kind==="metadata"&&(m.inBandMetadataTrackDispatchType!=="15260DFFFF49443320FF49443320000F"&&m.inBandMetadataTrackDispatchType!=="com.apple.streaming"&&m.label!=="id3"||this.setInBandMetadataTextTrack(m))}}},{key:"setupTrack",value:function(){var h,m;if(this.media){if((h=this.rendererOption)!==null&&h!==void 0&&h.useHighResTextTrack)this.b24Track=new qe(this.media),this.b24Track.startPolling();else{for(var u="ARIB B24 Japanese (data_identifier=0x".concat(this.data_identifier.toString(16),", data_group_id=").concat(this.data_group_id,")"),_=0;_<this.media.textTracks.length;_++){var x=this.media.textTracks[_];if(x.label===u){this.b24Track=x;break}}this.b24Track||(this.b24Track=this.media.addTextTrack("metadata",u,"ja"),this.b24Track.mode="hidden")}if(this.b24Track.addEventListener("cuechange",this.onB24CueChangeHandler),(m=this.rendererOption)!==null&&m!==void 0&&m.enableAutoInBandMetadataTextTrackDetection){for(var T=0;T<this.media.textTracks.length;T++){var D=this.media.textTracks[T];if(D.kind==="metadata"&&(D.inBandMetadataTrackDispatchType==="15260DFFFF49443320FF49443320000F"||D.inBandMetadataTrackDispatchType==="com.apple.streaming"||D.label==="id3")){this.setInBandMetadataTextTrack(D);break}}this.media.textTracks.addEventListener("addtrack",this.onID3AddtrackHandler)}this.media.addEventListener("seeking",this.onSeekingHandler),this.media.addEventListener("seeked",this.onSeekedHandler)}}},{key:"setupCanvas",value:function(){var h,m=this;this.media&&this.subtitleElement&&(this.viewCanvas=document.createElement("canvas"),this.viewCanvas.style.position="absolute",this.viewCanvas.style.top=this.viewCanvas.style.left="0",this.viewCanvas.style.pointerEvents="none",this.viewCanvas.style.width="100%",this.viewCanvas.style.height="100%",(h=this.rendererOption)!==null&&h!==void 0&&h.enableRawCanvas&&(this.rawCanvas=document.createElement("canvas")),this.onResize(),this.subtitleElement.appendChild(this.viewCanvas),this.media.addEventListener("resize",this.onResizeHandler),window.ResizeObserver?(this.resizeObserver=new ResizeObserver(function(){m.onResize()}),this.resizeObserver.observe(this.media)):(window.addEventListener("resize",this.onResizeHandler),window.MutationObserver&&(this.mutationObserver=new MutationObserver(function(){m.onResize()}),this.mutationObserver.observe(this.media,{attributes:!0,attributeFilter:["class","style"]}))))}},{key:"cleanupTrack",value:function(){var h,m,u,_,x,T;if(this.b24Track){if((T=this.rendererOption)!==null&&T!==void 0&&T.useHighResTextTrack)this.b24Track.stopPolling();else if(this.b24Track.cues)for(var D=this.b24Track.cues.length-1;D>=0;D--)this.b24Track.removeCue(this.b24Track.cues[D])}(h=this.b24Track)===null||h===void 0||h.removeEventListener("cuechange",this.onB24CueChangeHandler),(m=this.id3Track)===null||m===void 0||m.removeEventListener("cuechange",this.onID3CueChangeHandler),(u=this.media)===null||u===void 0||u.removeEventListener("seeking",this.onSeekingHandler),(_=this.media)===null||_===void 0||_.removeEventListener("seeked",this.onSeekedHandler),(x=this.media)===null||x===void 0||x.textTracks.removeEventListener("addtrack",this.onID3AddtrackHandler),this.b24Track=this.id3Track=null}},{key:"cleanupCanvas",value:function(){var h;window.removeEventListener("resize",this.onResizeHandler),(h=this.media)===null||h===void 0||h.removeEventListener("resize",this.onResizeHandler),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.viewCanvas&&this.subtitleElement&&this.subtitleElement.removeChild(this.viewCanvas),this.viewCanvas&&(this.viewCanvas.width=this.viewCanvas.height=0),this.rawCanvas&&(this.rawCanvas.width=this.rawCanvas.height=0),this.viewCanvas=this.rawCanvas=null}}])&&Tt(E.prototype,F),Object.defineProperty(E,"prototype",{writable:!1}),E;var E,F}();function H(E,F,h){for(var m=-1,u=F;u<h;u++){m^=E[u];for(var _=0;_<8;_++)1&m?m=m>>>1^3988292384:m>>>=1}return~m}function fe(E){return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},fe(E)}function J(E){return function(F){if(Array.isArray(F))return ue(F)}(E)||function(F){if(typeof Symbol<"u"&&F[Symbol.iterator]!=null||F["@@iterator"]!=null)return Array.from(F)}(E)||K(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K(E,F){if(E){if(typeof E=="string")return ue(E,F);var h={}.toString.call(E).slice(8,-1);return h==="Object"&&E.constructor&&(h=E.constructor.name),h==="Map"||h==="Set"?Array.from(E):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?ue(E,F):void 0}}function ue(E,F){(F==null||F>E.length)&&(F=E.length);for(var h=0,m=Array(F);h<F;h++)m[h]=E[h];return m}function Ce(E,F){for(var h=0;h<F.length;h++){var m=F[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(E,ye(m.key),m)}}function ye(E){var F=function(h){if(fe(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var u=m.call(h,"string");if(fe(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}(E);return fe(F)=="symbol"?F:F+""}var Oe=null,Ye=function(){function E(u,_){(function(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")})(this,E),this.text="",this.svg=null,this.groups=new Map,this.GL=0,this.GR=2,this.G_BACK=[f.get(0),f.get(1),f.get(2),g.get(31)],this.DRCS_mapping=new Map([[15,new Map],[16,new Map],[17,new Map],[18,new Map],[19,new Map],[20,new Map],[21,new Map],[22,new Map],[23,new Map],[24,new Map],[25,new Map],[26,new Map],[27,new Map],[28,new Map],[29,new Map],[30,new Map]]),this.swf_x=1920,this.swf_y=1080,this.sdf_x=1920,this.sdf_y=1080,this.sdp_x=0,this.sdp_y=0,this.ssm_x=72,this.ssm_y=72,this.shs=8,this.svs=48,this.text_size_x=1,this.text_size_y=1,this.text_type="NSZ",this.position_x=-1,this.position_y=-1,this.pallet=0,this.fg_color=A[this.pallet][7],this.bg_color=A[this.pallet][8],this.force_bg_color=null,this.hlc=0,this.prev_hlc=0,this.stl=!1,this.orn=null,this.force_orn=null,this.flc=15,this.non_spacing="",this.timeElapsed=0,this.endTime=null,this.rendered=!1,this.PRA=null,this.normalFont="monospace",this.gaijiFont=this.normalFont,this.drcsReplacement=!1,this.drcsReplaceMapping=new Map,this.usePUA=!1,this.pes=u,this.startTime=_}return F=E,h=[{key:"width",value:function(){return Math.floor((this.shs+this.ssm_x)*this.text_size_x)}},{key:"height",value:function(){return Math.floor((this.svs+this.ssm_y)*this.text_size_y)}},{key:"move_absolute_dot",value:function(u,_){this.position_x=u,this.position_y=_}},{key:"move_absolute_pos",value:function(u,_){this.position_x=this.sdp_x+u*this.width(),this.position_y=this.sdp_y+(_+1)*this.height()}},{key:"move_relative_pos",value:function(u,_){for((this.position_x<0||this.position_y<0)&&this.move_absolute_dot(this.sdp_x,this.sdp_y+(this.ssm_y+this.svs));u<0;)this.position_x-=this.width(),u++,this.position_x<this.sdp_x&&(this.position_x=this.sdp_x+this.sdf_x-this.width(),_--);for(;u>0;)this.position_x+=this.width(),u--,this.position_x>=this.sdp_x+this.sdf_x&&(this.position_x=this.sdp_x,_++);for(;_<0;)this.position_y-=this.height(),_++;for(;_>0;)this.position_y+=this.height(),_--}},{key:"move_newline",value:function(){(this.position_x<0||this.position_y<0)&&this.move_absolute_dot(this.sdp_x,this.sdp_y+(this.ssm_y+this.svs)),this.position_x=this.sdp_x,this.position_y=this.position_y+this.height()}},{key:"render",value:function(u){var _,x,T,D,B,j,Q,ne;this.svg=(_=u==null?void 0:u.svg)!==null&&_!==void 0?_:null,this.force_orn=(x=typeof(u==null?void 0:u.forceStrokeColor)=="boolean"?u==null?void 0:u.forceStrokeColor:E.getRGBAColorCode(u==null?void 0:u.forceStrokeColor))!==null&&x!==void 0?x:null,this.force_bg_color=(T=E.getRGBAColorCode(u==null?void 0:u.forceBackgroundColor))!==null&&T!==void 0?T:null,this.normalFont=(D=u==null?void 0:u.normalFont)!==null&&D!==void 0?D:this.normalFont,this.gaijiFont=(B=u==null?void 0:u.gaijiFont)!==null&&B!==void 0?B:this.normalFont,this.drcsReplacement=(j=u==null?void 0:u.drcsReplacement)!==null&&j!==void 0&&j,this.drcsReplaceMapping=new Map(le);for(var te,ae=Object.entries((te=u==null?void 0:u.drcsReplaceMapping)!==null&&te!==void 0?te:{}),re=0;re<ae.length;re++){var de=ae[re];this.drcsReplaceMapping.set(de[0],de[1])}if(this.usePUA=(Q=u==null?void 0:u.usePUA)!==null&&Q!==void 0&&Q,!E.detect(this.pes,u))return null;if(this.svg)for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);for(var he=3+(15&this.pes[2]),pe=(this.pes[he+0],(this.pes[he+3]<<8)+this.pes[he+4]),oe=he+9;oe<he+(5+pe);){this.pes[oe+0];var Ie=this.pes[oe+1],Ee=this.pes[oe+2]<<16|this.pes[oe+3]<<8|this.pes[oe+4];Ie===32?this.parseText(oe+5,oe+5+Ee):Ie==48?this.parseDRCS(1,oe+5,oe+5+Ee):Ie==49?this.parseDRCS(2,oe+5,oe+5+Ee):Ie==53&&this.parseBitmap(oe+5,oe+5+Ee),oe+=5+Ee}return{startTime:this.startTime,endTime:(ne=this.endTime)!==null&&ne!==void 0?ne:Number.POSITIVE_INFINITY,rendered:this.rendered,textContent:this.rendered?this.text:null,PRA:this.PRA}}},{key:"parseText",value:function(u,_){for(;u<_;)if(32<this.pes[u]&&this.pes[u]<127){var x=0,T=this.G_BACK[this.GL];if(!T)return;for(var D=0;D<T.bytes;D++)x<<=8,x|=127&this.pes[u+D];this.renderCharacter(x,T),u+=T.bytes}else if(160<this.pes[u]&&this.pes[u]<255){var B=0,j=this.G_BACK[this.GR];if(!j)return;for(var Q=0;Q<j.bytes;Q++)B<<=8,B|=127&this.pes[u+Q];this.renderCharacter(B,j),u+=j.bytes}else if(this.pes[u]===0)u+=1;else if(this.pes[u]===7)u+=1;else if(this.pes[u]===8)this.move_relative_pos(-1,0),u+=1;else if(this.pes[u]===9)this.move_relative_pos(1,0),u+=1;else if(this.pes[u]===10)this.move_relative_pos(0,1),u+=1;else if(this.pes[u]===11)this.move_relative_pos(0,-1),u+=1;else if(this.pes[u]===12)this.startTime!=null&&this.timeElapsed>0&&(this.endTime=this.startTime+this.timeElapsed),u+=1;else if(this.pes[u]===13)this.move_newline(),u+=1;else if(this.pes[u]===14)this.GL=1,u+=1;else if(this.pes[u]===15)this.GL=0,u+=1;else if(this.pes[u]===22){var ne=63&this.pes[u+1];this.move_relative_pos(ne,0),u+=2}else if(this.pes[u]===24)u+=1;else if(this.pes[u]===25){var te=0,ae=this.G_BACK[2];if(!ae)return;for(var re=0;re<ae.bytes;re++)te<<=8,te|=127&this.pes[u+1+re];this.renderCharacter(te,ae),u+=1+ae.bytes}else if(this.pes[u]===27)if(this.pes[u+1]===110)this.GL=2,u+=2;else if(this.pes[u+1]==111)this.GL=3,u+=2;else if(this.pes[u+1]==126)this.GR=1,u+=2;else if(this.pes[u+1]==125)this.GR=2,u+=2;else if(this.pes[u+1]==124)this.GR=3,u+=2;else if(40<=this.pes[u+1]&&this.pes[u+1]<=43){var de=this.pes[u+1]-40;this.pes[u+2]===32?(this.G_BACK[de]=y.get(this.pes[u+3]),u+=4):(this.G_BACK[de]=p.get(this.pes[u+2]),u+=3)}else{if(this.pes[u+1]!==36)return;if(40<=this.pes[u+2]&&this.pes[u+2]<=43){var he=this.pes[u+2]-40;this.pes[u+3]===32?(this.G_BACK[he]=y.get(this.pes[u+4]),u+=5):(this.G_BACK[he]=p.get(this.pes[u+3]),u+=4)}else this.G_BACK[0]=p.get(this.pes[u+2]),u+=3}else if(this.pes[u]===28){var pe=63&this.pes[u+1],oe=63&this.pes[u+2];this.move_absolute_pos(oe,pe),u+=3}else if(this.pes[u]===29){var Ie=0,Ee=this.G_BACK[3];if(!Ee)return;for(var Ne=0;Ne<Ee.bytes;Ne++)Ie<<=8,Ie|=127&this.pes[u+1+Ne];this.renderCharacter(Ie,Ee),u+=1+Ee.bytes}else if(this.pes[u]===30)u+=1;else if(this.pes[u]===31)u+=1;else if(this.pes[u]===32){var Me=f.get(0);if(!Me)return;this.renderCharacter(8481,Me),u+=1}else if(this.pes[u]===127)u+=1;else if(this.pes[u]===128)this.fg_color=A[this.pallet][0],u+=1;else if(this.pes[u]===129)this.fg_color=A[this.pallet][1],u+=1;else if(this.pes[u]===130)this.fg_color=A[this.pallet][2],u+=1;else if(this.pes[u]===131)this.fg_color=A[this.pallet][3],u+=1;else if(this.pes[u]===132)this.fg_color=A[this.pallet][4],u+=1;else if(this.pes[u]===133)this.fg_color=A[this.pallet][5],u+=1;else if(this.pes[u]===134)this.fg_color=A[this.pallet][6],u+=1;else if(this.pes[u]===135)this.fg_color=A[this.pallet][7],u+=1;else if(this.pes[u]===136)this.text_size_x=.5,this.text_size_y=.5,this.text_type="SSZ",u+=1;else if(this.pes[u]===137)this.text_size_x=.5,this.text_size_y=1,this.text_type="MSZ",u+=1;else if(this.pes[u]===138)this.text_size_x=1,this.text_size_y=1,this.text_type="NSZ",u+=1;else{if(this.pes[u]===139)return;if(this.pes[u]===144){var De=this.pes[u+1];if(De==32){var We=15&this.pes[u+2];this.pallet=We,u+=3}else{var Ke=15&De;(112&De)==64?this.fg_color=A[this.pallet][Ke]:(112&De)==80&&(this.bg_color=A[this.pallet][Ke]),u+=2}}else if(this.pes[u]===145){var Fe=15&this.pes[u+1];this.flc=Fe,u+=2}else{if(this.pes[u]===146||this.pes[u]===147||this.pes[u]===148||this.pes[u]===149)return;if(this.pes[u]===151)this.prev_hlc=this.hlc,this.hlc=15&this.pes[u+1],u+=2;else{if(this.pes[u]===152)return;if(this.pes[u]===153)this.stl=!1,u+=1;else if(this.pes[u]===154)this.stl=!0,u+=1;else if(this.pes[u]===155){for(var ke=u,He=-1,it=-1;ke+1<_;)if(ke+=1,this.pes[ke]===32)He<0&&(He=ke);else if(this.pes[ke]===59)He<0&&it<0&&(it=ke);else{if(this.pes[ke]===66)break;if(this.pes[ke]===83){var ft=u+1,ct=0;if(it>=0||He<0)return;for(;ft<He;)ct*=10,ct+=15&this.pes[ft],ft++;if(ct===5)this.swf_x=3840,this.swf_y=2160;else if(ct===7)this.swf_x=1920,this.swf_y=1080;else{if(ct!=9)return;this.swf_x=1440,this.swf_y=960}break}if(this.pes[ke]===84)break;if(this.pes[ke]===86){for(var tt=u+1,dt=0,pt=0;tt<it;)dt*=10,dt+=15&this.pes[tt],tt++;for(tt++;tt<He;)pt*=10,pt+=15&this.pes[tt],tt++;this.sdf_x=2*dt,this.sdf_y=2*pt;break}if(this.pes[ke]===87){for(var ut=u+1,Jt=0,Nt=0;ut<it;)Jt*=10,Jt+=15&this.pes[ut],ut++;for(ut++;ut<He;)Nt*=10,Nt+=15&this.pes[ut],ut++;this.ssm_x=2*Jt,this.ssm_y=2*Nt;break}if(this.pes[ke]===88){for(var Lt=u+1,Dt=0;Lt<He;)Dt*=10,Dt+=15&this.pes[Lt],Lt++;this.shs=2*Dt;break}if(this.pes[ke]===89){for(var jt=u+1,gt=0;jt<He;)gt*=10,gt+=15&this.pes[jt],jt++;this.svs=2*gt;break}if(this.pes[ke]===91||this.pes[ke]===92||this.pes[ke]===93||this.pes[ke]===94)break;if(this.pes[ke]===95){for(var Bt=u+1,Qt=0,Et=0;Bt<it;)Qt*=10,Qt+=15&this.pes[Bt],Bt++;for(Bt++;Bt<He;)Et*=10,Et+=15&this.pes[Bt],Bt++;this.sdp_x=2*Qt,this.sdp_y=2*Et;break}if(this.pes[ke]===97){for(var ei=u+1,ii=0,hi=0;ei<it;)ii*=10,ii+=15&this.pes[ei],ei++;for(ei++;ei<He;)hi*=10,hi+=15&this.pes[ei],ei++;this.move_absolute_dot(2*ii,2*hi);break}if(this.pes[ke]===98)break;if(this.pes[ke]===99){var ci=this.pes[u+1];if(ci==48)this.orn=null;else if(ci==49){var wi=10*(15&this.pes[u+3])+(15&this.pes[u+4]),pi=10*(15&this.pes[u+5])+(15&this.pes[u+6]);this.orn=A[wi][pi]}break}if(this.pes[ke]===100||this.pes[ke]===101||this.pes[ke]===102||this.pes[ke]===103)break;if(this.pes[ke]===104){for(var ai=u+1,en=0;ai<He;)en*=10,en+=15&this.pes[ai],ai++;this.PRA=en;break}if(this.pes[ke]===105||this.pes[ke]===106||this.pes[ke]===110||this.pes[ke]===111)break}u=ke+1}else{if(this.pes[u]!==157)return;if(this.pes[u+1]!=32)return void this.pes[u+1];var dn=63&this.pes[u+2];this.timeElapsed+=dn/10,u+=3}}}}}},{key:"parseDRCS",value:function(u,_,x){for(this.pes[_+0],_+=1;_<x;){var T=this.pes[_+0]<<8|this.pes[_+1],D=this.pes[_+2];_+=3;for(var B=0;B<D;B++){this.pes[_+0];var j=15&this.pes[_+0];if(j===0||j===1){var Q=this.pes[_+1]+2,ne=this.pes[_+2],te=this.pes[_+3],ae=Q.toString(2).length-Q.toString(2).replace(/0*$/,"").length,re=Math.floor(ne*te*ae/8),de=new Uint8Array(Array.prototype.slice.call(this.pes,_+4,_+4+re));if(u===1){var he,pe,oe=64+((3840&T)>>8),Ie=127&T,Ee=(he=y.get(oe))===null||he===void 0?void 0:he.alphabet;Ee&&((pe=this.DRCS_mapping.get(Ee))===null||pe===void 0||pe.set(Ie,de))}else{var Ne,Me=32639&T;(Ne=this.DRCS_mapping.get(15))===null||Ne===void 0||Ne.set(Me,de)}_+=4+re}}}}},{key:"renderCharacter",value:function(u,_){if((this.position_x<0||this.position_y<0)&&this.move_absolute_dot(this.sdp_x,this.sdp_y+(this.ssm_y+this.svs)),this.svg!==null){if(_.alphabet===0){var x=((65280&u)>>8)-33,T=(255&u)-33;if(x===0&&12<=T&&T<=17)return void(this.non_spacing=["ÃÅ","ÃÄ","Ãà","ÃÇ","ÃÖ","Ã≤"][T-12]);if(x===1&&T===93)return void(this.non_spacing+="‚Éù")}if(_.alphabet!==31){this.rendered||this.svg.setAttribute("viewBox","0 0 ".concat(this.swf_x," ").concat(this.swf_y)),this.rendered=!0;var D=this.force_bg_color||this.bg_color,B=E.getAlphaFromColorCode(D);if(!this.groups.has(B)){var j=document.createElementNS("http://www.w3.org/2000/svg","g");j.setAttribute("opacity","".concat(B/255)),this.groups.set(B,j),this.svg.appendChild(j)}var Q=this.groups.get(B),ne=document.createElementNS("http://www.w3.org/2000/svg","rect");if(ne.setAttribute("shape-rendering","crispEdges"),ne.setAttribute("x","".concat(this.position_x)),ne.setAttribute("y","".concat(this.position_y-this.height())),ne.setAttribute("width","".concat(this.width()+1)),ne.setAttribute("height","".concat(this.height()+1)),ne.setAttribute("fill","".concat(E.getRGBfromColorCode(D))),Q.appendChild(ne),1&this.hlc){var te=document.createElementNS("http://www.w3.org/2000/svg","line");te.setAttribute("shape-rendering","crispEdges"),te.setAttribute("x1","".concat(this.position_x)),te.setAttribute("y1","".concat(this.position_y-1)),te.setAttribute("x2","".concat(this.position_x+this.width())),te.setAttribute("y2","".concat(this.position_y-1)),te.setAttribute("stroke","".concat(E.getRGBAfromColorCode(this.fg_color))),te.setAttribute("stroke-width","".concat(2)),this.svg.appendChild(te)}if(2&this.hlc){var ae=document.createElementNS("http://www.w3.org/2000/svg","line");ae.setAttribute("shape-rendering","crispEdges"),ae.setAttribute("x1","".concat(this.position_x+this.width()-1)),ae.setAttribute("y1","".concat(this.position_y-this.height())),ae.setAttribute("x2","".concat(this.position_x+this.width()-1)),ae.setAttribute("y2","".concat(this.position_y)),ae.setAttribute("stroke","".concat(E.getRGBAfromColorCode(this.fg_color))),ae.setAttribute("stroke-width","".concat(2)),this.svg.appendChild(ae)}if(4&this.hlc){var re=document.createElementNS("http://www.w3.org/2000/svg","line");re.setAttribute("shape-rendering","crispEdges"),re.setAttribute("x1","".concat(this.position_x)),re.setAttribute("y1","".concat(this.position_y-this.height()+1)),re.setAttribute("x2","".concat(this.position_x+this.width())),re.setAttribute("y2","".concat(this.position_y-this.height()+1)),re.setAttribute("stroke","".concat(E.getRGBAfromColorCode(this.fg_color))),re.setAttribute("stroke-width","".concat(2)),this.svg.appendChild(re)}if(8&this.hlc){var de=document.createElementNS("http://www.w3.org/2000/svg","line");de.setAttribute("shape-rendering","crispEdges"),de.setAttribute("x1","".concat(this.position_x+1)),de.setAttribute("y1","".concat(this.position_y-this.height())),de.setAttribute("x2","".concat(this.position_x+1)),de.setAttribute("y2","".concat(this.position_y)),de.setAttribute("stroke","".concat(E.getRGBAfromColorCode(this.fg_color))),de.setAttribute("stroke-width","".concat(2)),this.svg.appendChild(de)}if(this.stl){var he=document.createElementNS("http://www.w3.org/2000/svg","line");he.setAttribute("shape-rendering","crispEdges"),he.setAttribute("x1","".concat(this.position_x)),he.setAttribute("y1","".concat(this.position_y-1)),he.setAttribute("x2","".concat(this.position_x+this.width())),he.setAttribute("y2","".concat(this.position_y-1)),he.setAttribute("stroke","".concat(E.getRGBAfromColorCode(this.fg_color))),he.setAttribute("stroke-width","".concat(2)),this.svg.appendChild(he)}}if(_.alphabet===0){var pe=94*(((65280&u)>>8)-33)+((255&u)-33),oe=7896;if(pe<oe){var Ie=C[pe];this.renderFont(Ie)}else if(this.usePUA){var Ee=I[pe-oe];this.renderFont(Ee)}else{var Ne=P[pe-oe];this.renderFont(Ne)}this.move_relative_pos(1,0)}else if(_.alphabet===1){var Me=M[u-33];this.renderFont(Me),this.move_relative_pos(1,0)}else if(_.alphabet===2){var De=G[u-33];this.renderFont(De),this.move_relative_pos(1,0)}else if(_.alphabet===3){var We=Z[u-33];this.renderFont(We),this.move_relative_pos(1,0)}else{if(_.alphabet===31)return void(u===96?(this.G_BACK=[f.get(0),f.get(1),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===97?(this.G_BACK=[f.get(0),f.get(3),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===98?(this.G_BACK=[f.get(0),g.get(16),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===99?(this.G_BACK=[f.get(4),f.get(6),f.get(7),g.get(31)],this.GL=0,this.GR=2):u===100?(this.G_BACK=[f.get(4),f.get(5),f.get(7),g.get(31)],this.GL=0,this.GR=2):u===101?(this.G_BACK=[f.get(4),g.get(16),f.get(7),g.get(31)],this.GL=0,this.GR=2):u===102?(this.G_BACK=[g.get(16),g.get(17),g.get(18),g.get(31)],this.GL=0,this.GR=2):u===103?(this.G_BACK=[g.get(19),g.get(20),g.get(21),g.get(31)],this.GL=0,this.GR=2):u===104?(this.G_BACK=[g.get(22),g.get(23),g.get(24),g.get(31)],this.GL=0,this.GR=2):u===105?(this.G_BACK=[g.get(25),g.get(26),g.get(27),g.get(31)],this.GL=0,this.GR=2):u===106?(this.G_BACK=[g.get(28),g.get(29),g.get(30),g.get(31)],this.GL=0,this.GR=2):u===107?(this.G_BACK=[f.get(0),g.get(17),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===108?(this.G_BACK=[f.get(0),g.get(18),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===109?(this.G_BACK=[f.get(0),g.get(19),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===110?(this.G_BACK=[f.get(3),f.get(2),f.get(1),g.get(31)],this.GL=0,this.GR=2):u===111&&(this.G_BACK=[f.get(1),f.get(4),g.get(16),g.get(31)],this.GL=0,this.GR=2));var Ke,Fe=(Ke=this.DRCS_mapping.get(_.alphabet))===null||Ke===void 0?void 0:Ke.get(32639&u);if(!Fe)return;var ke=ve(Fe.buffer);if(this.drcsReplacement&&this.drcsReplaceMapping.has(ke.toLowerCase()))this.renderFont(this.drcsReplaceMapping.get(ke.toLowerCase()));else if(this.drcsReplacement&&this.drcsReplaceMapping.has(ke.toUpperCase()))this.renderFont(this.drcsReplaceMapping.get(ke.toUpperCase()));else{var He=document.createElement("canvas"),it=Math.floor(this.ssm_x*this.text_size_x/2),ft=Math.floor(this.ssm_y*this.text_size_y/2),ct=Math.floor(8*Fe.length/(it*ft));He.width=2*(it+4),He.height=2*(ft+4);var tt=He.getContext("2d");if(!tt)return;var dt=this.getOrnColorCode();if(dt&&(!this.force_orn||this.force_orn===!0||this.force_orn!==this.fg_color)){tt.fillStyle=E.getRGBAfromColorCode(dt);for(var pt=-2;pt<=2;pt++)for(var ut=-2;ut<=2;ut++)for(var Jt=0;Jt<ft;Jt++)for(var Nt=0;Nt<it;Nt++){for(var Lt=0,Dt=0;Dt<ct;Dt++){var jt=7-((Jt*it+Nt)*ct+Dt)%8;Lt*=2,Lt+=(Fe[Math.floor(((Jt*it+Nt)*ct+Dt)/8)]&1<<jt)>>jt}Lt>0&&tt.fillRect(2*(2+Nt+ut),2*(2+Jt+pt),2,2)}}tt.fillStyle=E.getRGBAfromColorCode(this.fg_color);for(var gt=0;gt<ft;gt++)for(var Bt=0;Bt<it;Bt++){for(var Qt=0,Et=0;Et<ct;Et++){var ei=7-((gt*it+Bt)*ct+Et)%8;Qt*=2,Qt+=(Fe[Math.floor(((gt*it+Bt)*ct+Et)/8)]&1<<ei)>>ei}Qt>0&&tt.fillRect(2*(2+Bt),2*(2+gt),2,2)}var ii=document.createElementNS("http://www.w3.org/2000/svg","image");if(ii.setAttribute("href",He.toDataURL()),ii.setAttribute("x","".concat(this.position_x+Math.floor(this.shs*this.text_size_x/2)-4)),ii.setAttribute("y","".concat(this.position_y+Math.floor(this.svs*this.text_size_y/2)-this.height()-4)),ii.setAttribute("width","".concat(He.width/2*2)),ii.setAttribute("height","".concat(He.height/2*2)),this.flc===0){var hi=document.createElementNS("http://www.w3.org/2000/svg","animate");hi.setAttribute("attributeName","opacity"),hi.setAttribute("values","1;0"),hi.setAttribute("dur","1s"),hi.setAttribute("calcMode","discrete"),hi.setAttribute("repeatCount","indefinite"),ii.appendChild(hi)}else if(this.flc===7){var ci=document.createElementNS("http://www.w3.org/2000/svg","animate");ci.setAttribute("attributeName","opacity"),ci.setAttribute("values","0;1"),ci.setAttribute("dur","1s"),ci.setAttribute("calcMode","discrete"),ci.setAttribute("repeatCount","indefinite"),ii.appendChild(ci)}this.svg.appendChild(ii)}this.move_relative_pos(1,0)}}}},{key:"renderFont",value:function(u){var _,x;u+=this.non_spacing,this.non_spacing="",this.text_size_x===.5&&this.text_size_y===.5&&(G.includes(u)||Z.includes(u))||(this.text+=u);var T=W.has(u),D=T?this.gaijiFont:this.normalFont;if(Oe!=null&&(_=Oe)!==null&&_!==void 0&&_.has(u)){var B=Oe.get(u),j=B.viewBox,Q=B.path;this.renderPath(j,Q)}else{T&&(u+="Ô∏é");var ne=document.createElementNS("http://www.w3.org/2000/svg","text");if(ne.setAttribute("x","0"),ne.setAttribute("y","0"),ne.setAttribute("transform","scale(".concat(this.text_size_x," ").concat(this.text_size_y,") translate(").concat((this.position_x+this.width()/2)/this.text_size_x," ").concat((this.position_y-this.height()/2)/this.text_size_y,")")),ne.setAttribute("transform-origin","0 0"),ne.setAttribute("font-size","".concat(this.ssm_x)),ne.setAttribute("font-family",D),ne.setAttribute("dominant-baseline","central"),ne.setAttribute("text-anchor","middle"),ne.setAttribute("fill",E.getRGBAfromColorCode(this.fg_color)),ne.setAttribute("paint-order","stroke"),ne.setAttribute("stroke-linejoin","round"),ne.setAttribute("stroke-width",this.getOrnColorCode()?"".concat(8):"0"),ne.setAttribute("stroke",this.getOrnColorCode()?E.getRGBAfromColorCode(this.getOrnColorCode()):"transparent"),ne.appendChild(document.createTextNode(u)),this.flc===0){var te=document.createElementNS("http://www.w3.org/2000/svg","animate");te.setAttribute("attributeName","opacity"),te.setAttribute("values","1;0"),te.setAttribute("dur","1s"),te.setAttribute("calcMode","discrete"),te.setAttribute("repeatCount","indefinite"),ne.appendChild(te)}else if(this.flc===7){var ae=document.createElementNS("http://www.w3.org/2000/svg","animate");ae.setAttribute("attributeName","opacity"),ae.setAttribute("values","0;1"),ae.setAttribute("dur","1s"),ae.setAttribute("calcMode","discrete"),ae.setAttribute("repeatCount","indefinite"),ne.appendChild(ae)}(x=this.svg)===null||x===void 0||x.appendChild(ne)}}},{key:"renderPath",value:function(u,_){var x;document.createElementNS("http://www.w3.org/2000/svg","svg").setAttribute("viewBox","".concat(u[0]," ").concat(u[1]," ").concat(u[2]," ").concat(u[3]));var T=this.ssm_x*this.text_size_x/(u[2]-u[0]),D=this.ssm_y*this.text_size_y/(u[3]-u[1]),B=this.shs*this.text_size_x/2,j=this.svs*this.text_size_y/2,Q=document.createElementNS("http://www.w3.org/2000/svg","path");if(Q.setAttribute("d",_),Q.setAttribute("x","0"),Q.setAttribute("y","0"),Q.setAttribute("transform","scale(".concat(T," ").concat(D,") translate(").concat((this.position_x+B)/T," ").concat((this.position_y+j-this.height())/D,")")),Q.setAttribute("transform-origin","0 0"),Q.setAttribute("fill",E.getRGBAfromColorCode(this.fg_color)),Q.setAttribute("paint-order","stroke"),Q.setAttribute("stroke-linejoin","round"),Q.setAttribute("stroke-width",this.getOrnColorCode()?"".concat(4/Math.min(T,D)):"0"),Q.setAttribute("stroke",this.getOrnColorCode()?E.getRGBAfromColorCode(this.getOrnColorCode()):"transparent"),this.flc===0){var ne=document.createElementNS("http://www.w3.org/2000/svg","animate");ne.setAttribute("attributeName","opacity"),ne.setAttribute("values","1;0"),ne.setAttribute("dur","1s"),ne.setAttribute("calcMode","discrete"),ne.setAttribute("repeatCount","indefinite"),Q.appendChild(ne)}else if(this.flc===7){var te=document.createElementNS("http://www.w3.org/2000/svg","animate");te.setAttribute("attributeName","opacity"),te.setAttribute("values","0;1"),te.setAttribute("dur","1s"),te.setAttribute("calcMode","discrete"),te.setAttribute("repeatCount","indefinite"),Q.appendChild(te)}(x=this.svg)===null||x===void 0||x.appendChild(Q)}},{key:"parseBitmap",value:function(u,_){if(this.svg!==null){this.rendered||this.svg.setAttribute("viewBox","0 0 ".concat(this.swf_x," ").concat(this.swf_y)),this.rendered=!0;var x=this.pes[u]<<8|this.pes[u+1];u+=2;var T=this.pes[u]<<8|this.pes[u+1];u+=2;var D=this.pes[u];u+=1;var B=new Set(this.pes.subarray(u,u+D));if(!((u+=D)+33>_)){var j=this.pes.subarray(u,u+33),Q=this.pes.subarray(u+33,_),ne=new Uint8Array(j.byteLength+Q.byteLength+396+140),te=new DataView(ne.buffer);ne.set(j,0),ne.set(Q,569);for(var ae=0;ae<8;ae++)for(var re=0;re<16;re++)if(!B.has(16*ae+re)){var de=A[ae][re],he=Number.parseInt(de.substring(1,3),16),pe=Number.parseInt(de.substring(3,5),16),oe=Number.parseInt(de.substring(5,7),16),Ie=Number.parseInt(de.substring(7,9),16);ne[41+3*(16*ae+re)]=he,ne[41+3*(16*ae+re)+1]=pe,ne[41+3*(16*ae+re)+2]=oe,ne[437+(16*ae+re)]=Ie}te.setInt32(33,384,!1),ne[37]=80,ne[38]=76,ne[39]=84,ne[40]=69,te.setInt32(429,128,!1),ne[433]=116,ne[434]=82,ne[435]=78,ne[436]=83,te.setInt32(425,H(ne,37,425),!1),te.setInt32(565,H(ne,433,565),!1);var Ee=te.getInt32(16,!1),Ne=te.getInt32(20,!1),Me=document.createElementNS("http://www.w3.org/2000/svg","svg");Me.setAttribute("x","".concat(this.sdp_x)),Me.setAttribute("y","".concat(this.sdp_y)),Me.setAttribute("width","".concat(this.sdf_x)),Me.setAttribute("height","".concat(this.sdf_y)),Me.setAttribute("viewBox","0 0 ".concat(this.sdf_x," ").concat(this.sdf_y));var De=document.createElementNS("http://www.w3.org/2000/svg","image");if(De.setAttribute("href","data:image/png;base64,"+window.btoa(String.fromCharCode.apply(String,J(ne)))),De.setAttribute("x","".concat(2*x)),De.setAttribute("y","".concat(2*T)),De.setAttribute("width","".concat(2*Ee)),De.setAttribute("height","".concat(2*Ne)),Me.appendChild(De),B.size>0){for(var We=0;We<8;We++)for(var Ke=0;Ke<16;Ke++)if(B.has(16*We+Ke)){var Fe=A[We][Ke],ke=Number.parseInt(Fe.substring(1,3),16),He=Number.parseInt(Fe.substring(3,5),16),it=Number.parseInt(Fe.substring(5,7),16),ft=Number.parseInt(Fe.substring(7,9),16);ne[41+3*(16*We+Ke)]=ke,ne[41+3*(16*We+Ke)+1]=He,ne[41+3*(16*We+Ke)+2]=it,ne[437+(16*We+Ke)]=ft}else ne[437+(16*We+Ke)]=0;te.setInt32(425,H(ne,37,425),!1),te.setInt32(565,H(ne,433,565),!1);var ct=document.createElementNS("http://www.w3.org/2000/svg","image");ct.setAttribute("href","data:image/png;base64,"+window.btoa(String.fromCharCode.apply(String,J(ne)))),ct.setAttribute("x","".concat(2*x)),ct.setAttribute("y","".concat(2*T)),ct.setAttribute("width","".concat(2*Ee)),ct.setAttribute("height","".concat(2*Ne));var tt=document.createElementNS("http://www.w3.org/2000/svg","animate");tt.setAttribute("attributeName","opacity"),tt.setAttribute("values","1;0"),tt.setAttribute("dur","1s"),tt.setAttribute("calcMode","discrete"),tt.setAttribute("repeatCount","indefinite"),ct.appendChild(tt),Me.appendChild(ct)}this.svg.appendChild(Me)}}}},{key:"getOrnColorCode",value:function(){return this.force_orn===!0?E.fillAlphaColorCode(this.bg_color):this.force_orn===!1?this.orn:(u=this.force_orn)!==null&&u!==void 0?u:this.orn;var u}}],m=[{key:"setEmbeddedGlyph",value:function(u){Oe=u}},{key:"detect",value:function(u,_){var x,T,D=(x=_==null?void 0:_.data_identifier)!==null&&x!==void 0?x:128,B=(T=_==null?void 0:_.data_group_id)!==null&&T!==void 0?T:1;if(u.length<=0||u[0]!==D||u.length<=2)return!1;var j=3+(15&u[2]);return!(u.length<=j||(15&(252&u[j+0])>>2)!==B||(U(u,j),0))}},{key:"getRGBAColorCode",value:function(u){if(u==null)return null;var _=document.createElement("canvas");_.width=_.height=1;var x=_.getContext("2d");if(!x)return null;x.fillStyle=u,x.fillRect(0,0,_.width,_.height);var T=function(te,ae){return function(re){if(Array.isArray(re))return re}(te)||function(re,de){var he=re==null?null:typeof Symbol<"u"&&re[Symbol.iterator]||re["@@iterator"];if(he!=null){var pe,oe,Ie,Ee,Ne=[],Me=!0,De=!1;try{if(Ie=(he=he.call(re)).next,de!==0)for(;!(Me=(pe=Ie.call(he)).done)&&(Ne.push(pe.value),Ne.length!==de);Me=!0);}catch(We){De=!0,oe=We}finally{try{if(!Me&&he.return!=null&&(Ee=he.return(),Object(Ee)!==Ee))return}finally{if(De)throw oe}}return Ne}}(te,ae)||K(te,ae)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(x.getImageData(0,0,1,1).data,4),D=T[0],B=T[1],j=T[2],Q=T[3],ne="#".concat(D.toString(16).toUpperCase().padStart(2,"0")).concat(B.toString(16).toUpperCase().padStart(2,"0")).concat(j.toString(16).toUpperCase().padStart(2,"0")).concat(Q.toString(16).toUpperCase().padStart(2,"0"));return _.width=_.height=0,ne}},{key:"fillAlphaColorCode",value:function(u){if(u==null)return"";var _=Number.parseInt(u.substring(1,3),16),x=Number.parseInt(u.substring(3,5),16),T=Number.parseInt(u.substring(5,7),16);return"#".concat(_.toString(16).toUpperCase().padStart(2,"0")).concat(x.toString(16).toUpperCase().padStart(2,"0")).concat(T.toString(16).toUpperCase().padStart(2,"0"),"FF")}},{key:"getRGBAfromColorCode",value:function(u){if(u==null)return"";var _=Number.parseInt(u.substring(1,3),16),x=Number.parseInt(u.substring(3,5),16),T=Number.parseInt(u.substring(5,7),16),D=Number.parseInt(u.substring(7,9),16);return"rgba(".concat(_,", ").concat(x,", ").concat(T,", ").concat(D/255,")")}},{key:"getRGBfromColorCode",value:function(u){if(u==null)return"";var _=Number.parseInt(u.substring(1,3),16),x=Number.parseInt(u.substring(3,5),16),T=Number.parseInt(u.substring(5,7),16);return"rgb(".concat(_,", ").concat(x,", ").concat(T,")")}},{key:"getAlphaFromColorCode",value:function(u){return u==null?Number.NaN:Number.parseInt(u.substring(7,9),16)}}],h&&Ce(F.prototype,h),m&&Ce(F,m),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,h,m}();function Be(E){return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},Be(E)}function et(E,F){var h=Object.keys(E);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(E);F&&(m=m.filter(function(u){return Object.getOwnPropertyDescriptor(E,u).enumerable})),h.push.apply(h,m)}return h}function Ze(E){for(var F=1;F<arguments.length;F++){var h=arguments[F]!=null?arguments[F]:{};F%2?et(Object(h),!0).forEach(function(m){nt(E,m,h[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(h)):et(Object(h)).forEach(function(m){Object.defineProperty(E,m,Object.getOwnPropertyDescriptor(h,m))})}return E}function nt(E,F,h){return(F=kt(F))in E?Object.defineProperty(E,F,{value:h,enumerable:!0,configurable:!0,writable:!0}):E[F]=h,E}function at(E,F){for(var h=0;h<F.length;h++){var m=F[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(E,kt(m.key),m)}}function kt(E){var F=function(h){if(Be(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var u=m.call(h,"string");if(Be(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}(E);return Be(F)=="symbol"?F:F+""}var qt=function(){return E=function h(m){var u,_,x,T;(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,h),this.media=null,this.id3Track=null,this.b24Track=null,this.subtitleElement=null,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.textContent=null,this.prevCurrentTime=null,this.highResTimeupdatePollingId=null,this.isShowing=!0,this.isOnSeeking=!1,this.onB24CueChangeDrawed=!1,this.onID3AddtrackHandler=this.onID3Addtrack.bind(this),this.onID3CueChangeHandler=this.onID3CueChange.bind(this),this.onB24CueChangeHandler=this.onB24CueChange.bind(this),this.onHighResTimeupdateHandler=this.onHighResTimeupdate.bind(this),this.onTimeupdateHandler=this.onTimeupdate.bind(this),this.onCanplayHandler=this.onCanplay.bind(this),this.onPlayHandler=this.onPlay.bind(this),this.onPauseHandler=this.onPause.bind(this),this.onPauseAnimationHandler=this.onPauseAnimation.bind(this),this.onResumeAnimationHandler=this.onResumeAnimation.bind(this),this.onSeekingHandler=this.onSeeking.bind(this),this.onSeekedHandler=this.onSeeked.bind(this),this.data_identifier=(u=m==null?void 0:m.data_identifier)!==null&&u!==void 0?u:128,this.data_group_id=(_=m==null?void 0:m.data_group_id)!==null&&_!==void 0?_:1,this.rendererOption=Ze(Ze({},m),{},{data_identifier:this.data_identifier,data_group_id:this.data_group_id,keepAspectRatio:(x=m==null?void 0:m.keepAspectRatio)===null||x===void 0||x,enableAutoInBandMetadataTextTrackDetection:(T=m==null?void 0:m.enableAutoInBandMetadataTextTrackDetection)===null||T===void 0||T})},(F=[{key:"attachMedia",value:function(h,m){var u;this.detachMedia(),this.media=h,this.subtitleElement=m??h.parentElement,this.media.addEventListener("canplay",this.onCanplayHandler),this.media.addEventListener("play",this.onResumeAnimationHandler),this.media.addEventListener("pause",this.onPauseAnimationHandler),(u=this.rendererOption)!==null&&u!==void 0&&u.useHighResTimeupdate?(this.media.addEventListener("play",this.onPlayHandler),this.media.addEventListener("pause",this.onPauseHandler)):this.media.addEventListener("timeupdate",this.onTimeupdateHandler),this.prevCurrentTime=null,this.setupTrack(),this.setupSVG()}},{key:"detachMedia",value:function(){var h,m,u,_,x,T;this.cleanupSVG(),this.cleanupTrack(),(h=this.media)===null||h===void 0||h.removeEventListener("canplay",this.onCanplayHandler),(m=this.media)===null||m===void 0||m.removeEventListener("play",this.onPlayHandler),(u=this.media)===null||u===void 0||u.removeEventListener("pause",this.onPauseHandler),(_=this.media)===null||_===void 0||_.removeEventListener("play",this.onResumeAnimationHandler),(x=this.media)===null||x===void 0||x.removeEventListener("pause",this.onPauseAnimationHandler),this.onPause(),(T=this.media)===null||T===void 0||T.removeEventListener("timeupdate",this.onTimeupdateHandler),this.prevCurrentTime=null,this.media=this.subtitleElement=null}},{key:"dispose",value:function(){this.detachMedia()}},{key:"getSVG",value:function(){return this.svg}},{key:"getTextContent",value:function(){return this.textContent}},{key:"show",value:function(){this.isShowing=!0,this.svg.style.visibility="visible"}},{key:"hide",value:function(){this.isShowing=!1,this.svg.style.visibility="hidden"}},{key:"isPresent",value:function(){return this.onB24CueChangeDrawed}},{key:"pushRawData",value:function(h,m){var u=new Ye(m,h).render(Ze({},this.rendererOption));if(u==null)return!1;var _=Number.isFinite(u.endTime)?u.endTime:Number.MAX_SAFE_INTEGER;return this.addB24Cue(h,_,m)}},{key:"pushBase64Data",value:function(h,m){var u=$e(m);return this.pushRawData(h,u)}},{key:"pushData",value:function(h,m,u){return this.pushRawData(u,m)}},{key:"pushID3v2PRIVData",value:function(h,m,u){return m==="aribb24.js"&&this.pushRawData(h,u)}},{key:"pushID3v2TXXXData",value:function(h,m,u){return m==="aribb24.js"&&this.pushBase64Data(h,u)}},{key:"pushID3v2Data",value:function(h,m){for(var u=!1,_=0;_<m.length;){var x=_;if(_+3>m.length)break;if(m[_+0]!==73||m[_+1]!==68||m[_+2]!==51){if(_===0){_+=5;continue}break}if((_+=6)+4>m.length)break;var T=Kt(m,_+0,_+4);_+=4;var D=x+3+2+1+4+T;if(D>m.length)break;for(var B=_;B<D;){var j=B;if(B+4>m.length)break;var Q=Te(m,B+0,B+4);if((B+=4)+4>m.length)break;var ne=Kt(m,B+0,B+4);B+=6;var te=j+4+4+2+ne;if(te>m.length)break;if(Q==="PRIV"){for(var ae=B,re=te;m[B]!==0&&B<te;)B++;var de=Te(m,ae,B),he=new Uint8Array(Array.prototype.slice.call(m,B+1,re));this.pushID3v2PRIVData(h,de,he)&&(u=!0)}else if(Q==="TXXX"){var pe=m[B+0],oe=B+1;if(pe===3){for(;m[B]!==0&&B<te;)B++;for(var Ie=B,Ee=B+=1;m[B]!==0&&B<te;)B++;var Ne=B,Me=Yt(m,oe,Ie),De=Yt(m,Ee,Ne);this.pushID3v2TXXXData(h,Me,De)&&(u=!0)}else if(pe===0){for(;m[B]!==0&&B<te;)B++;for(var We=B,Ke=B+=1;m[B]!==0&&B<te;)B++;var Fe=B,ke=Te(m,oe,We),He=Te(m,Ke,Fe);this.pushID3v2TXXXData(h,ke,He)&&(u=!0)}}B=te}(_=x+3+2+1+4+T)+3>m.length||m[_+0]===51&&m[_+1]===68&&m[_+2]===73&&(_+=10)}return u}},{key:"setInBandMetadataTextTrack",value:function(h){var m;(m=this.id3Track)===null||m===void 0||m.removeEventListener("cuechange",this.onID3CueChangeHandler),this.id3Track=h,this.id3Track.mode="hidden",this.id3Track.addEventListener("cuechange",this.onID3CueChangeHandler)}},{key:"pushID3v2Cue",value:function(h){if(!this.id3Track)return!1;var m=h.startTime,u=h;if(this.id3Track.inBandMetadataTrackDispatchType==="15260DFFFF49443320FF49443320000F")return this.pushID3v2Data(m,new Uint8Array(u.data));if(this.id3Track.inBandMetadataTrackDispatchType==="com.apple.streaming"){if(u.value.key==="PRIV")return this.pushID3v2PRIVData(m,u.value.info,new Uint8Array(u.value.data));if(u.value.key==="TXXX")return this.pushID3v2TXXXData(m,u.value.info,u.value.data)}else if(this.id3Track.label==="id3"){if(u.value.key==="PRIV")return this.pushID3v2PRIVData(m,u.value.info,new Uint8Array(u.value.data));if(u.value.key==="TXXX")return this.pushID3v2TXXXData(m,u.value.info,u.value.data)}else if(this.id3Track.label==="Timed Metadata"){if(u.frame.key==="PRIV")return this.pushID3v2PRIVData(m,u.frame.owner,new Uint8Array(u.frame.data));if(u.frame.key==="TXXX")return this.pushID3v2TXXXData(m,u.frame.description,u.frame.data)}return!1}},{key:"onID3CueChange",value:function(){this.id3Track&&(this.isOnSeeking||this.onTimeupdate())}},{key:"addB24Cue",value:function(h,m,u){var _;if(!this.b24Track||!Ye.detect(u,this.rendererOption))return!1;var x=new((_=window.VTTCue)!==null&&_!==void 0?_:window.TextTrackCue)(h,m,"");if(x.data=u,window.VTTCue)this.b24Track.addCue(x);else if(window.TextTrackCue){var T;if(Array.prototype.some.call((T=this.b24Track.cues)!==null&&T!==void 0?T:[],function(Q){return Q.startTime===h}))return!1;if(this.b24Track.cues){for(var D=[],B=this.b24Track.cues.length-1;B>=0;B--)this.b24Track.cues[B].startTime>=h&&(D.push(this.b24Track.cues[B]),this.b24Track.removeCue(this.b24Track.cues[B]));this.b24Track.addCue(x);for(var j=D.length-1;j>=0;j--)this.b24Track.addCue(D[j])}}return!0}},{key:"onB24CueChange",value:function(){if(this.media&&this.b24Track){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);if(this.b24Track.activeCues&&this.b24Track.activeCues.length>0){var h=this.b24Track.activeCues[this.b24Track.activeCues.length-1];if(h.startTime<=this.media.currentTime&&this.media.currentTime<=h.endTime&&!this.isOnSeeking){var m=new Ye(h.data,h.startTime);if(this.isShowing){var u,_,x,T=m.render(Ze(Ze({},this.rendererOption),{},{svg:this.svg}));(T==null?void 0:T.PRA)!=null&&((_=this.rendererOption)===null||_===void 0||(x=_.PRACallback)===null||x===void 0||x.call(_,T.PRA)),T==null||T.rendered,this.textContent=(u=T==null?void 0:T.textContent)!==null&&u!==void 0?u:null}this.onB24CueChangeDrawed=!0}else this.onB24CueChangeDrawed=!1,this.textContent=null;for(var D=this.b24Track.activeCues.length-2;D>=0;D--){var B=this.b24Track.activeCues[D];B.endTime=Math.min(B.endTime,h.startTime),B.startTime===B.endTime&&this.b24Track.removeCue(B)}}else this.onB24CueChangeDrawed=!1,this.textContent=null}else this.onB24CueChangeDrawed=!1}},{key:"onHighResTimeupdate",value:function(){this.onTimeupdate(),this.highResTimeupdatePollingId=window.requestAnimationFrame(this.onHighResTimeupdateHandler)}},{key:"onTimeupdate",value:function(){if(this.media)if(this.prevCurrentTime!=null)if(this.id3Track&&this.id3Track.cues&&this.id3Track.cues.length!==0)if(this.isOnSeeking)this.prevCurrentTime=this.media.currentTime;else if(Math.abs(this.media.currentTime-this.prevCurrentTime)>1)this.prevCurrentTime=this.media.currentTime;else{for(var h,m,u=new Vt(Number.NEGATIVE_INFINITY,this.id3Track.cues[0].startTime),_=[u],x=0;x<this.id3Track.cues.length;x++)_.push(this.id3Track.cues[x]);for(var T=0,D=_.length;T+1<D;){var B=this.prevCurrentTime,j=Math.floor((T+D)/2);B<_[j].startTime?D=j:T=j}h=T;for(var Q=0,ne=_.length;Q+1<ne;){var te=this.media.currentTime,ae=Math.floor((Q+ne)/2);te<_[ae].startTime?ne=ae:Q=ae}if(m=Q,h!==null&&m!==null&&h!==m){if(h<m)for(var re=m;re>h;re--){var de=_[re];if(de!==u&&this.pushID3v2Cue(de))break}else for(var he=h;he<m;he++){var pe=_[he];if(pe!==u&&this.pushID3v2Cue(pe))break}this.prevCurrentTime=this.media.currentTime}else this.prevCurrentTime=this.media.currentTime}else this.prevCurrentTime=this.media.currentTime;else this.prevCurrentTime=this.media.currentTime}},{key:"onCanplay",value:function(){this.id3Track&&(this.id3Track.mode="hidden"),this.b24Track&&(this.b24Track.mode="hidden"),this.media!=null&&this.prevCurrentTime==null&&(this.prevCurrentTime=this.media.currentTime-Number.MIN_VALUE)}},{key:"onPlay",value:function(){this.highResTimeupdatePollingId==null&&this.onHighResTimeupdate()}},{key:"onPause",value:function(){this.highResTimeupdatePollingId!=null&&(window.cancelAnimationFrame(this.highResTimeupdatePollingId),this.highResTimeupdatePollingId=null)}},{key:"onPauseAnimation",value:function(){this.svg.pauseAnimations()}},{key:"onResumeAnimation",value:function(){this.svg.unpauseAnimations()}},{key:"onSeeking",value:function(){this.isOnSeeking=!0,this.onB24CueChange()}},{key:"onSeeked",value:function(){this.isOnSeeking=!1}},{key:"onID3Addtrack",value:function(h){if(this.media){var m=h.track;m.kind==="metadata"&&(m.inBandMetadataTrackDispatchType!=="15260DFFFF49443320FF49443320000F"&&m.inBandMetadataTrackDispatchType!=="com.apple.streaming"&&m.label!=="id3"||this.setInBandMetadataTextTrack(m))}}},{key:"setupTrack",value:function(){var h,m;if(this.media){if((h=this.rendererOption)!==null&&h!==void 0&&h.useHighResTextTrack)this.b24Track=new qe(this.media),this.b24Track.startPolling();else{for(var u="ARIB B24 Japanese SVG (data_identifier=0x".concat(this.data_identifier.toString(16),", data_group_id=").concat(this.data_group_id,")"),_=0;_<this.media.textTracks.length;_++){var x=this.media.textTracks[_];if(x.label===u){this.b24Track=x;break}}this.b24Track||(this.b24Track=this.media.addTextTrack("metadata",u,"ja"),this.b24Track.mode="hidden")}if(this.b24Track.addEventListener("cuechange",this.onB24CueChangeHandler),(m=this.rendererOption)!==null&&m!==void 0&&m.enableAutoInBandMetadataTextTrackDetection){for(var T=0;T<this.media.textTracks.length;T++){var D=this.media.textTracks[T];if(D.kind==="metadata"&&(D.inBandMetadataTrackDispatchType==="15260DFFFF49443320FF49443320000F"||D.inBandMetadataTrackDispatchType==="com.apple.streaming"||D.label==="id3")){this.setInBandMetadataTextTrack(D);break}}this.media.textTracks.addEventListener("addtrack",this.onID3AddtrackHandler)}this.media.addEventListener("seeking",this.onSeekingHandler),this.media.addEventListener("seeked",this.onSeekedHandler)}}},{key:"setupSVG",value:function(){this.media&&this.subtitleElement&&(this.svg.style.position="absolute",this.svg.style.top=this.svg.style.left="0",this.svg.style.pointerEvents="none",this.svg.style.width="100%",this.svg.style.height="100%",this.subtitleElement.appendChild(this.svg))}},{key:"cleanupTrack",value:function(){var h,m,u,_,x,T;if(this.b24Track){if((T=this.rendererOption)!==null&&T!==void 0&&T.useHighResTextTrack)this.b24Track.stopPolling();else if(this.b24Track.cues)for(var D=this.b24Track.cues.length-1;D>=0;D--)this.b24Track.removeCue(this.b24Track.cues[D])}(h=this.b24Track)===null||h===void 0||h.removeEventListener("cuechange",this.onB24CueChangeHandler),(m=this.id3Track)===null||m===void 0||m.removeEventListener("cuechange",this.onID3CueChangeHandler),(u=this.media)===null||u===void 0||u.removeEventListener("seeking",this.onSeekingHandler),(_=this.media)===null||_===void 0||_.removeEventListener("seeked",this.onSeekedHandler),(x=this.media)===null||x===void 0||x.textTracks.removeEventListener("addtrack",this.onID3AddtrackHandler),this.b24Track=this.id3Track=null}},{key:"cleanupSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild)}}])&&at(E.prototype,F),Object.defineProperty(E,"prototype",{writable:!1}),E;var E,F}();function gi(E){return gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},gi(E)}function xi(E,F){(F==null||F>E.length)&&(F=E.length);for(var h=0,m=Array(F);h<F;h++)m[h]=E[h];return m}function Ai(E,F){for(var h=0;h<F.length;h++){var m=F[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(E,ui(m.key),m)}}function ui(E){var F=function(h){if(gi(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var u=m.call(h,"string");if(gi(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}(E);return gi(F)=="symbol"?F:F+""}var Oi=null,qi=function(){function E(u,_){(function(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")})(this,E),this.text="",this.table=null,this.cells=null,this.GL=0,this.GR=2,this.G_BACK=[f.get(0),f.get(1),f.get(2),g.get(31)],this.DRCS_mapping=new Map([[15,new Map],[16,new Map],[17,new Map],[18,new Map],[19,new Map],[20,new Map],[21,new Map],[22,new Map],[23,new Map],[24,new Map],[25,new Map],[26,new Map],[27,new Map],[28,new Map],[29,new Map],[30,new Map]]),this.swf_x=1920,this.swf_y=1080,this.sdf_x=1920,this.sdf_y=1080,this.sdp_x=0,this.sdp_y=0,this.ssm_x=72,this.ssm_y=72,this.shs=8,this.svs=48,this.text_size_x=1,this.text_size_y=1,this.text_type="NSZ",this.position_x=-1,this.position_y=-1,this.pallet=0,this.fg_color=A[this.pallet][7],this.bg_color=A[this.pallet][8],this.force_bg_color=null,this.hlc=0,this.prev_hlc=0,this.stl=!1,this.orn=null,this.force_orn=null,this.flc=15,this.non_spacing="",this.timeElapsed=0,this.endTime=null,this.rendered=!1,this.PRA=null,this.normalFont="monospace",this.gaijiFont=this.normalFont,this.drcsReplacement=!1,this.drcsReplaceMapping=new Map,this.usePUA=!1,this.pes=u,this.startTime=_}return F=E,m=[{key:"setEmbeddedGlyph",value:function(u){Oi=u}},{key:"detect",value:function(u,_){var x,T,D=(x=_==null?void 0:_.data_identifier)!==null&&x!==void 0?x:128,B=(T=_==null?void 0:_.data_group_id)!==null&&T!==void 0?T:1;if(u.length<=0||u[0]!==D||u.length<=2)return!1;var j=3+(15&u[2]);return!(u.length<=j||(15&(252&u[j+0])>>2)!==B||(U(u,j),0))}},{key:"getRGBAColorCode",value:function(u){if(u==null)return null;var _=document.createElement("canvas");_.width=_.height=1;var x=_.getContext("2d");if(!x)return null;x.fillStyle=u,x.fillRect(0,0,_.width,_.height);var T=function(te,ae){return function(re){if(Array.isArray(re))return re}(te)||function(re,de){var he=re==null?null:typeof Symbol<"u"&&re[Symbol.iterator]||re["@@iterator"];if(he!=null){var pe,oe,Ie,Ee,Ne=[],Me=!0,De=!1;try{if(Ie=(he=he.call(re)).next,de!==0)for(;!(Me=(pe=Ie.call(he)).done)&&(Ne.push(pe.value),Ne.length!==de);Me=!0);}catch(We){De=!0,oe=We}finally{try{if(!Me&&he.return!=null&&(Ee=he.return(),Object(Ee)!==Ee))return}finally{if(De)throw oe}}return Ne}}(te,ae)||function(re,de){if(re){if(typeof re=="string")return xi(re,de);var he={}.toString.call(re).slice(8,-1);return he==="Object"&&re.constructor&&(he=re.constructor.name),he==="Map"||he==="Set"?Array.from(re):he==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(he)?xi(re,de):void 0}}(te,ae)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(x.getImageData(0,0,1,1).data,4),D=T[0],B=T[1],j=T[2],Q=T[3],ne="#".concat(D.toString(16).toUpperCase().padStart(2,"0")).concat(B.toString(16).toUpperCase().padStart(2,"0")).concat(j.toString(16).toUpperCase().padStart(2,"0")).concat(Q.toString(16).toUpperCase().padStart(2,"0"));return _.width=_.height=0,ne}},{key:"fillAlphaColorCode",value:function(u){if(u==null)return"";var _=Number.parseInt(u.substring(1,3),16),x=Number.parseInt(u.substring(3,5),16),T=Number.parseInt(u.substring(5,7),16);return"#".concat(_.toString(16).toUpperCase().padStart(2,"0")).concat(x.toString(16).toUpperCase().padStart(2,"0")).concat(T.toString(16).toUpperCase().padStart(2,"0"),"FF")}},{key:"getRGBAfromColorCode",value:function(u){if(u==null)return"";var _=Number.parseInt(u.substring(1,3),16),x=Number.parseInt(u.substring(3,5),16),T=Number.parseInt(u.substring(5,7),16),D=Number.parseInt(u.substring(7,9),16);return"rgba(".concat(_,", ").concat(x,", ").concat(T,", ").concat(D/255,")")}}],(h=[{key:"width",value:function(){return Math.floor((this.shs+this.ssm_x)*this.text_size_x)}},{key:"height",value:function(){return Math.floor((this.svs+this.ssm_y)*this.text_size_y)}},{key:"move_absolute_dot",value:function(u,_){this.position_x=u,this.position_y=_}},{key:"move_absolute_pos",value:function(u,_){this.position_x=this.sdp_x+u*this.width(),this.position_y=this.sdp_y+(_+1)*this.height()}},{key:"move_relative_pos",value:function(u,_){for((this.position_x<0||this.position_y<0)&&this.move_absolute_dot(this.sdp_x,this.sdp_y+(this.ssm_y+this.svs));u<0;)this.position_x-=this.width(),u++,this.position_x<this.sdp_x&&(this.position_x=this.sdp_x+this.sdf_x-this.width(),_--);for(;u>0;)this.position_x+=this.width(),u--,this.position_x>=this.sdp_x+this.sdf_x&&(this.position_x=this.sdp_x,_++);for(;_<0;)this.position_y-=this.height(),_++;for(;_>0;)this.position_y+=this.height(),_--}},{key:"move_newline",value:function(){(this.position_x<0||this.position_y<0)&&this.move_absolute_dot(this.sdp_x,this.sdp_y+(this.ssm_y+this.svs)),this.position_x=this.sdp_x,this.position_y=this.position_y+this.height()}},{key:"render",value:function(u){var _,x,T,D,B,j,Q,ne;this.table=(_=u==null?void 0:u.table)!==null&&_!==void 0?_:null,this.force_orn=(x=typeof(u==null?void 0:u.forceStrokeColor)=="boolean"?u==null?void 0:u.forceStrokeColor:E.getRGBAColorCode(u==null?void 0:u.forceStrokeColor))!==null&&x!==void 0?x:null,this.force_bg_color=(T=E.getRGBAColorCode(u==null?void 0:u.forceBackgroundColor))!==null&&T!==void 0?T:null,this.normalFont=(D=u==null?void 0:u.normalFont)!==null&&D!==void 0?D:this.normalFont,this.gaijiFont=(B=u==null?void 0:u.gaijiFont)!==null&&B!==void 0?B:this.normalFont,this.drcsReplacement=(j=u==null?void 0:u.drcsReplacement)!==null&&j!==void 0&&j,this.drcsReplaceMapping=new Map(le);for(var te,ae=Object.entries((te=u==null?void 0:u.drcsReplaceMapping)!==null&&te!==void 0?te:{}),re=0;re<ae.length;re++){var de=ae[re];this.drcsReplaceMapping.set(de[0],de[1])}if(this.usePUA=(Q=u==null?void 0:u.usePUA)!==null&&Q!==void 0&&Q,!E.detect(this.pes,u))return null;if(this.table)for(;this.table.firstChild;)this.table.removeChild(this.table.firstChild);for(var he=3+(15&this.pes[2]),pe=(this.pes[he+0],(this.pes[he+3]<<8)+this.pes[he+4]),oe=he+9;oe<he+(5+pe);){this.pes[oe+0];var Ie=this.pes[oe+1],Ee=this.pes[oe+2]<<16|this.pes[oe+3]<<8|this.pes[oe+4];Ie===32?this.parseText(oe+5,oe+5+Ee):Ie==48?this.parseDRCS(1,oe+5,oe+5+Ee):Ie==49&&this.parseDRCS(2,oe+5,oe+5+Ee),oe+=5+Ee}return{startTime:this.startTime,endTime:(ne=this.endTime)!==null&&ne!==void 0?ne:Number.POSITIVE_INFINITY,rendered:this.rendered,textContent:this.rendered?this.text:null,PRA:this.PRA}}},{key:"parseText",value:function(u,_){for(;u<_;)if(32<this.pes[u]&&this.pes[u]<127){var x=0,T=this.G_BACK[this.GL];if(!T)return;for(var D=0;D<T.bytes;D++)x<<=8,x|=127&this.pes[u+D];this.renderCharacter(x,T),u+=T.bytes}else if(160<this.pes[u]&&this.pes[u]<255){var B=0,j=this.G_BACK[this.GR];if(!j)return;for(var Q=0;Q<j.bytes;Q++)B<<=8,B|=127&this.pes[u+Q];this.renderCharacter(B,j),u+=j.bytes}else if(this.pes[u]===0)u+=1;else if(this.pes[u]===7)u+=1;else if(this.pes[u]===8)this.move_relative_pos(-1,0),u+=1;else if(this.pes[u]===9)this.move_relative_pos(1,0),u+=1;else if(this.pes[u]===10)this.move_relative_pos(0,1),u+=1;else if(this.pes[u]===11)this.move_relative_pos(0,-1),u+=1;else if(this.pes[u]===12)this.startTime!=null&&this.timeElapsed>0&&(this.endTime=this.startTime+this.timeElapsed),u+=1;else if(this.pes[u]===13)this.move_newline(),u+=1;else if(this.pes[u]===14)this.GL=1,u+=1;else if(this.pes[u]===15)this.GL=0,u+=1;else if(this.pes[u]===22){var ne=63&this.pes[u+1];this.move_relative_pos(ne,0),u+=2}else if(this.pes[u]===24)u+=1;else if(this.pes[u]===25){var te=0,ae=this.G_BACK[2];if(!ae)return;for(var re=0;re<ae.bytes;re++)te<<=8,te|=127&this.pes[u+1+re];this.renderCharacter(te,ae),u+=1+ae.bytes}else if(this.pes[u]===27)if(this.pes[u+1]===110)this.GL=2,u+=2;else if(this.pes[u+1]==111)this.GL=3,u+=2;else if(this.pes[u+1]==126)this.GR=1,u+=2;else if(this.pes[u+1]==125)this.GR=2,u+=2;else if(this.pes[u+1]==124)this.GR=3,u+=2;else if(40<=this.pes[u+1]&&this.pes[u+1]<=43){var de=this.pes[u+1]-40;this.pes[u+2]===32?(this.G_BACK[de]=y.get(this.pes[u+3]),u+=4):(this.G_BACK[de]=p.get(this.pes[u+2]),u+=3)}else{if(this.pes[u+1]!==36)return;if(40<=this.pes[u+2]&&this.pes[u+2]<=43){var he=this.pes[u+2]-40;this.pes[u+3]===32?(this.G_BACK[he]=y.get(this.pes[u+4]),u+=5):(this.G_BACK[he]=p.get(this.pes[u+3]),u+=4)}else this.G_BACK[0]=p.get(this.pes[u+2]),u+=3}else if(this.pes[u]===28){var pe=63&this.pes[u+1],oe=63&this.pes[u+2];this.move_absolute_pos(oe,pe),u+=3}else if(this.pes[u]===29){var Ie=0,Ee=this.G_BACK[3];if(!Ee)return;for(var Ne=0;Ne<Ee.bytes;Ne++)Ie<<=8,Ie|=127&this.pes[u+1+Ne];this.renderCharacter(Ie,Ee),u+=1+Ee.bytes}else if(this.pes[u]===30)u+=1;else if(this.pes[u]===31)u+=1;else if(this.pes[u]===32){var Me=f.get(0);if(!Me)return;this.renderCharacter(8481,Me),u+=1}else if(this.pes[u]===127)u+=1;else if(this.pes[u]===128)this.fg_color=A[this.pallet][0],u+=1;else if(this.pes[u]===129)this.fg_color=A[this.pallet][1],u+=1;else if(this.pes[u]===130)this.fg_color=A[this.pallet][2],u+=1;else if(this.pes[u]===131)this.fg_color=A[this.pallet][3],u+=1;else if(this.pes[u]===132)this.fg_color=A[this.pallet][4],u+=1;else if(this.pes[u]===133)this.fg_color=A[this.pallet][5],u+=1;else if(this.pes[u]===134)this.fg_color=A[this.pallet][6],u+=1;else if(this.pes[u]===135)this.fg_color=A[this.pallet][7],u+=1;else if(this.pes[u]===136)this.text_size_x=.5,this.text_size_y=.5,this.text_type="SSZ",u+=1;else if(this.pes[u]===137)this.text_size_x=.5,this.text_size_y=1,this.text_type="MSZ",u+=1;else if(this.pes[u]===138)this.text_size_x=1,this.text_size_y=1,this.text_type="NSZ",u+=1;else{if(this.pes[u]===139)return;if(this.pes[u]===144){var De=this.pes[u+1];if(De==32){var We=15&this.pes[u+2];this.pallet=We,u+=3}else{var Ke=15&De;(112&De)==64?this.fg_color=A[this.pallet][Ke]:(112&De)==80&&(this.bg_color=A[this.pallet][Ke]),u+=2}}else if(this.pes[u]===145){var Fe=15&this.pes[u];this.flc=Fe,u+=2}else{if(this.pes[u]===146||this.pes[u]===147||this.pes[u]===148||this.pes[u]===149)return;if(this.pes[u]===151)this.prev_hlc=this.hlc,this.hlc=15&this.pes[u+1],u+=2;else{if(this.pes[u]===152)return;if(this.pes[u]===153)this.stl=!1,u+=1;else if(this.pes[u]===154)this.stl=!0,u+=1;else if(this.pes[u]===155){for(var ke=u+1;this.pes[ke]!==66;){if(this.pes[ke]===83){for(var He=u+1,it=0;this.pes[He]!=59&&this.pes[He]!=32;)it*=10,it+=15&this.pes[He],He++;if(this.pes[He]!==32)return;if(it===5)this.swf_x=3840,this.swf_y=2160;else if(it===7)this.swf_x=1920,this.swf_y=1080;else{if(it!=9)return;this.swf_x=1440,this.swf_y=960}break}if(this.pes[ke]===84)break;if(this.pes[ke]===86){for(var ft=u+1,ct=0,tt=0;this.pes[ft]!=59;)ct*=10,ct+=15&this.pes[ft],ft++;for(ft++;this.pes[ft]!=32;)tt*=10,tt+=15&this.pes[ft],ft++;this.sdf_x=2*ct,this.sdf_y=2*tt;break}if(this.pes[ke]===87){for(var dt=u+1,pt=0,ut=0;this.pes[dt]!=59;)pt*=10,pt+=15&this.pes[dt],dt++;for(dt++;this.pes[dt]!=32;)ut*=10,ut+=15&this.pes[dt],dt++;this.ssm_x=2*pt,this.ssm_y=2*ut;break}if(this.pes[ke]===88){for(var Jt=u+1,Nt=0;this.pes[Jt]!=32;)Nt*=10,Nt+=15&this.pes[Jt],Jt++;this.shs=2*Nt;break}if(this.pes[ke]===89){for(var Lt=u+1,Dt=0;this.pes[Lt]!=32;)Dt*=10,Dt+=15&this.pes[Lt],Lt++;this.svs=2*Dt;break}if(this.pes[ke]===91||this.pes[ke]===92||this.pes[ke]===93||this.pes[ke]===94)break;if(this.pes[ke]===95){for(var jt=u+1,gt=0,Bt=0;this.pes[jt]!=59;)gt*=10,gt+=15&this.pes[jt],jt++;for(jt++;this.pes[jt]!=32;)Bt*=10,Bt+=15&this.pes[jt],jt++;this.sdp_x=2*gt,this.sdp_y=2*Bt;break}if(this.pes[ke]===97){for(var Qt=u+1,Et=0,ei=0;this.pes[Qt]!=59;)Et*=10,Et+=15&this.pes[Qt],Qt++;for(Qt++;this.pes[Qt]!=32;)ei*=10,ei+=15&this.pes[Qt],Qt++;this.move_absolute_dot(2*Et,2*ei);break}if(this.pes[ke]===98)break;if(this.pes[ke]===99){var ii=this.pes[u+1];if(ii==48)this.orn=null;else if(ii==49){var hi=10*(15&this.pes[u+3])+(15&this.pes[u+4]),ci=10*(15&this.pes[u+5])+(15&this.pes[u+6]);this.orn=A[hi][ci]}break}if(this.pes[ke]===100||this.pes[ke]===101||this.pes[ke]===102||this.pes[ke]===103)break;if(this.pes[ke]===104){for(var wi=u+1,pi=0;this.pes[wi]!=32;)pi*=10,pi+=15&this.pes[wi],wi++;this.PRA=pi;break}if(this.pes[ke]===105||this.pes[ke]===106||this.pes[ke]===110||this.pes[ke]===111)break;ke+=1}u=ke+1}else{if(this.pes[u]!==157)return;if(this.pes[u+1]!=32)return void this.pes[u+1];var ai=63&this.pes[u+2];this.timeElapsed+=ai/10,u+=3}}}}}},{key:"parseDRCS",value:function(u,_,x){for(this.pes[_+0],_+=1;_<x;){var T=this.pes[_+0]<<8|this.pes[_+1],D=this.pes[_+2];_+=3;for(var B=0;B<D;B++){this.pes[_+0];var j=15&this.pes[_+0];if(j===0||j===1){var Q=this.pes[_+1]+2,ne=this.pes[_+2],te=this.pes[_+3],ae=Q.toString(2).length-Q.toString(2).replace(/0*$/,"").length,re=Math.floor(ne*te*ae/8),de=new Uint8Array(Array.prototype.slice.call(this.pes,_+4,_+4+re));if(u===1){var he,pe,oe=64+((3840&T)>>8),Ie=127&T,Ee=(he=y.get(oe))===null||he===void 0?void 0:he.alphabet;Ee&&((pe=this.DRCS_mapping.get(Ee))===null||pe===void 0||pe.set(Ie,de))}else{var Ne,Me=32639&T;(Ne=this.DRCS_mapping.get(15))===null||Ne===void 0||Ne.set(Me,de)}_+=4+re}}}}},{key:"renderCharacter",value:function(u,_){if((this.position_x<0||this.position_y<0)&&this.move_absolute_dot(this.sdp_x,this.sdp_y+(this.ssm_y+this.svs)),_.alphabet===0){var x=((65280&u)>>8)-33,T=(255&u)-33;if(x===0&&12<=T&&T<=17)return void(this.non_spacing=["ÃÅ","ÃÄ","Ãà","ÃÇ","ÃÖ","Ã≤"][T-12]);if(x===1&&T===93)return void(this.non_spacing+="‚Éù")}if(this.table!==null){if(this.cells===null){this.table.parentElement&&(this.table.parentElement.style.position="absolute",this.table.parentElement.style.width="".concat(this.swf_x,"px"),this.table.parentElement.style.height="".concat(this.swf_y,"px")),this.table.style.willChange="transform",this.table.style.position="absolute",this.table.style.left="".concat(this.sdp_x,"px"),this.table.style.top="".concat(this.sdp_y,"px"),this.table.style.width="".concat(this.sdf_x,"px"),this.table.style.height="".concat(this.sdf_y,"px"),this.table.style.boxSizing="border-box",this.table.style.border="none",this.table.style.borderCollapse="collapse";for(var D=[],B=0,j=0;B<this.sdf_y;B+=Math.floor((this.ssm_y+this.svs)/2),j+=1){var Q=document.createElement("tr");D.push([]),Q.style.position="relative",Q.style.height="".concat(Math.floor((this.ssm_y+this.svs)/2),"px"),Q.style.width="100%",Q.style.boxSizing="border-box",Q.style.border="none";for(var ne=0;ne<this.sdf_x;ne+=Math.floor((this.ssm_x+this.shs)/2)){var te=document.createElement("td");te.style.height="".concat(Math.floor((this.ssm_y+this.svs)/2),"px"),te.style.width="".concat(Math.floor((this.ssm_x+this.shs)/2),"px"),te.style.padding="0px",te.style.boxSizing="border-box",te.style.border="none",Q.appendChild(te),D[j].push(te)}this.table.appendChild(Q)}this.cells=D}if(_.alphabet!==31&&(this.rendered=!0),_.alphabet===0){var ae=94*(((65280&u)>>8)-33)+((255&u)-33),re=7896;if(ae<re){var de=C[ae];this.renderFont(de)}else if(this.usePUA){var he=I[ae-re];this.renderFont(he)}else{var pe=P[ae-re];this.renderFont(pe)}this.move_relative_pos(1,0)}else if(_.alphabet===1){var oe=M[u-33];this.renderFont(oe),this.move_relative_pos(1,0)}else if(_.alphabet===2){var Ie=G[u-33];this.renderFont(Ie),this.move_relative_pos(1,0)}else if(_.alphabet===3){var Ee=Z[u-33];this.renderFont(Ee),this.move_relative_pos(1,0)}else{if(_.alphabet===31)return void(u===96?(this.G_BACK=[f.get(0),f.get(1),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===97?(this.G_BACK=[f.get(0),f.get(3),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===98?(this.G_BACK=[f.get(0),g.get(16),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===99?(this.G_BACK=[f.get(4),f.get(6),f.get(7),g.get(31)],this.GL=0,this.GR=2):u===100?(this.G_BACK=[f.get(4),f.get(5),f.get(7),g.get(31)],this.GL=0,this.GR=2):u===101?(this.G_BACK=[f.get(4),g.get(16),f.get(7),g.get(31)],this.GL=0,this.GR=2):u===102?(this.G_BACK=[g.get(16),g.get(17),g.get(18),g.get(31)],this.GL=0,this.GR=2):u===103?(this.G_BACK=[g.get(19),g.get(20),g.get(21),g.get(31)],this.GL=0,this.GR=2):u===104?(this.G_BACK=[g.get(22),g.get(23),g.get(24),g.get(31)],this.GL=0,this.GR=2):u===105?(this.G_BACK=[g.get(25),g.get(26),g.get(27),g.get(31)],this.GL=0,this.GR=2):u===106?(this.G_BACK=[g.get(28),g.get(29),g.get(30),g.get(31)],this.GL=0,this.GR=2):u===107?(this.G_BACK=[f.get(0),g.get(17),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===108?(this.G_BACK=[f.get(0),g.get(18),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===109?(this.G_BACK=[f.get(0),g.get(19),f.get(2),g.get(31)],this.GL=0,this.GR=2):u===110?(this.G_BACK=[f.get(3),f.get(2),f.get(1),g.get(31)],this.GL=0,this.GR=2):u===111&&(this.G_BACK=[f.get(1),f.get(4),g.get(16),g.get(31)],this.GL=0,this.GR=2));var Ne,Me=(Ne=this.DRCS_mapping.get(_.alphabet))===null||Ne===void 0?void 0:Ne.get(32639&u);if(!Me)return;var De=ve(Me.buffer);if(this.drcsReplacement&&this.drcsReplaceMapping.has(De.toLowerCase()))this.renderFont(this.drcsReplaceMapping.get(De.toLowerCase()));else if(this.drcsReplacement&&this.drcsReplaceMapping.has(De.toUpperCase()))this.renderFont(this.drcsReplaceMapping.get(De.toUpperCase()));else{var We=document.createElement("canvas"),Ke=Math.floor(this.ssm_x/2),Fe=Math.floor(this.ssm_y/2),ke=Math.floor(8*Me.length/(Ke*Fe));We.width=Ke+4/this.text_size_x,We.height=Fe+4/this.text_size_y,We.style.width="".concat(this.ssm_x+4/this.text_size_x*2,"px"),We.style.height="".concat(this.ssm_y+4/this.text_size_y*2,"px");var He=We.getContext("2d");if(!He)return;var it=this.getOrnColorCode();if(it&&(!this.force_orn||this.force_orn===!0||this.force_orn!==this.fg_color)){He.fillStyle=E.getRGBAfromColorCode(it);for(var ft=-2/this.text_size_y;ft<=2/this.text_size_y;ft++)for(var ct=-2/this.text_size_x;ct<=2/this.text_size_x;ct++)for(var tt=0;tt<Fe;tt++)for(var dt=0;dt<Ke;dt++){for(var pt=0,ut=0;ut<ke;ut++){var Jt=7-((tt*Ke+dt)*ke+ut)%8;pt*=2,pt+=(Me[Math.floor(((tt*Ke+dt)*ke+ut)/8)]&1<<Jt)>>Jt}pt>0&&He.fillRect(2/this.text_size_x+dt+ct,2/this.text_size_y+tt+ft,1,1)}}He.fillStyle=E.getRGBAfromColorCode(this.fg_color);for(var Nt=0;Nt<Fe;Nt++)for(var Lt=0;Lt<Ke;Lt++){for(var Dt=0,jt=0;jt<ke;jt++){var gt=7-((Nt*Ke+Lt)*ke+jt)%8;Dt*=2,Dt+=(Me[Math.floor(((Nt*Ke+Lt)*ke+jt)/8)]&1<<gt)>>gt}Dt>0&&He.fillRect(2/this.text_size_x+Lt,2/this.text_size_y+Nt,1,1)}for(var Bt=Math.floor(2*this.text_size_x),Qt=Math.floor(2*this.text_size_y),Et=Math.round((this.position_x-this.sdp_x)/(this.ssm_x+this.shs)*2),ei=Math.round((this.position_y-this.height()-this.sdp_y)/(this.ssm_y+this.svs)*2),ii=0;ii<Qt;ii++)for(var hi=0;hi<Bt;hi++){var ci=this.cells[ei+ii][Et+hi];if(ii===0&&hi===0){var wi;ci.setAttribute("rowspan","".concat(Qt)),ci.setAttribute("colspan","".concat(Bt)),ci.style.textAlign="center",ci.style.verticalAlign="top";var pi=document.createElement("div");pi.appendChild(We),pi.style.display="flex",pi.style.alignItems="center",pi.style.justifyContent="middle",pi.style.width="".concat(this.ssm_x+this.shs,"px"),pi.style.height="".concat(this.ssm_y+this.svs,"px"),pi.style.lineHeight="".concat(this.height(),"px"),pi.style.fontSize="".concat(this.ssm_x,"px"),pi.style.transform="scale(".concat(this.text_size_x,", ").concat(this.text_size_y,")"),pi.style.transformOrigin="0 0",pi.style.marginRight="-".concat(this.ssm_x+this.shs-this.width(),"px"),pi.style.marginBottom="-".concat(this.ssm_y+this.svs-this.height(),"px"),pi.style.color=E.getRGBAfromColorCode(this.fg_color),1&this.hlc&&(ci.style.borderBottom="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),2&this.hlc&&(ci.style.borderRight="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),4&this.hlc&&(ci.style.borderTop="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),8&this.hlc&&(ci.style.borderLeft="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),this.stl&&(ci.style.borderBottom="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),ci.style.backgroundColor=E.getRGBAfromColorCode((wi=this.force_bg_color)!==null&&wi!==void 0?wi:this.bg_color),ci.appendChild(pi)}else ci.parentNode!=null&&ci.parentNode.removeChild(ci)}}this.move_relative_pos(1,0)}}}},{key:"renderFont",value:function(u){var _;if(u+=this.non_spacing,this.non_spacing="",this.text_size_x===.5&&this.text_size_y===.5&&(G.includes(u)||Z.includes(u))||(this.text+=u),this.cells!==null){var x=W.has(u),T=x?this.gaijiFont:this.normalFont;if(Oi!=null&&(_=Oi)!==null&&_!==void 0&&_.has(u)){var D=Oi.get(u),B=D.viewBox,j=D.path;this.renderPath(B,j)}else{x&&(u+="Ô∏é");for(var Q=Math.floor(2*this.text_size_x),ne=Math.floor(2*this.text_size_y),te=Math.round((this.position_x-this.sdp_x)/(this.ssm_x+this.shs)*2),ae=Math.round((this.position_y-this.height()-this.sdp_y)/(this.ssm_y+this.svs)*2),re=0;re<ne;re++)for(var de=0;de<Q;de++){var he=this.cells[ae+re][te+de];if(re===0&&de===0){var pe;he.setAttribute("rowspan","".concat(ne)),he.setAttribute("colspan","".concat(Q)),he.style.textAlign="center",he.style.verticalAlign="top";var oe=document.createElement("div");oe.textContent=u,oe.style.display="flex",oe.style.alignItems="center",oe.style.justifyContent="middle",oe.style.width="".concat(this.ssm_x+this.shs,"px"),oe.style.height="".concat(this.ssm_y+this.svs,"px"),oe.style.fontFamily="".concat(T),oe.style.lineHeight="".concat(this.height(),"px"),oe.style.fontSize="".concat(this.ssm_x,"px"),oe.style.transform="scale(".concat(this.text_size_x,", ").concat(this.text_size_y,")"),oe.style.transformOrigin="0 0",oe.style.marginRight="-".concat(this.ssm_x+this.shs-this.width(),"px"),oe.style.marginBottom="-".concat(this.ssm_y+this.svs-this.height(),"px"),oe.style.color=E.getRGBAfromColorCode(this.fg_color);var Ie=this.getOrnColorCode();if(Ie&&(!this.force_orn||this.force_orn===!0||this.force_orn!==this.fg_color)){for(var Ee="",Ne=!0,Me=-4;Me<=4;Me++)for(var De=-4;De<=4;De++)Me===0&&De===0||(Ee+="".concat(Ne?"":",").concat(De,"px ").concat(Me,"px 0 ").concat(E.getRGBAfromColorCode(Ie)),Ne=!1);oe.style.textShadow=Ee}1&this.hlc&&(he.style.borderBottom="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),2&this.hlc&&(he.style.borderRight="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),4&this.hlc&&(he.style.borderTop="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),8&this.hlc&&(he.style.borderLeft="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),this.stl&&(he.style.borderBottom="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),he.style.backgroundColor=E.getRGBAfromColorCode((pe=this.force_bg_color)!==null&&pe!==void 0?pe:this.bg_color),he.appendChild(oe)}else he.parentNode!=null&&he.parentNode.removeChild(he)}}}}},{key:"renderPath",value:function(u,_){if(this.cells!==null){var x=document.createElementNS("http://www.w3.org/2000/svg","svg");x.setAttribute("viewBox","".concat(u[0]," ").concat(u[1]," ").concat(u[2]," ").concat(u[3])),x.style.width="".concat(this.ssm_x+this.shs,"px"),x.style.height="".concat(this.ssm_y,"px");var T=document.createElementNS("http://www.w3.org/2000/svg","path");T.setAttribute("d",_),T.setAttribute("fill","".concat(E.getRGBAfromColorCode(this.fg_color)));var D=this.getOrnColorCode();if(!D||this.force_orn&&this.force_orn!==!0&&this.force_orn===this.fg_color)T.setAttribute("stroke","transparent");else{var B=4*Math.max((u[2]-u[0])/this.ssm_x,(u[3]-u[1])/this.ssm_y);T.setAttribute("stroke","".concat(E.getRGBAfromColorCode(D))),T.setAttribute("stroke-width","".concat(B))}x.appendChild(T);for(var j=Math.floor(2*this.text_size_x),Q=Math.floor(2*this.text_size_y),ne=Math.round((this.position_x-this.sdp_x)/(this.ssm_x+this.shs)*2),te=Math.round((this.position_y-this.height()-this.sdp_y)/(this.ssm_y+this.svs)*2),ae=0;ae<Q;ae++)for(var re=0;re<j;re++){var de=this.cells[te+ae][ne+re];if(ae===0&&re===0){var he;de.setAttribute("rowspan","".concat(Q)),de.setAttribute("colspan","".concat(j)),de.style.textAlign="center",de.style.verticalAlign="top";var pe=document.createElement("div");pe.appendChild(x),pe.style.display="flex",pe.style.alignItems="center",pe.style.justifyContent="middle",pe.style.width="".concat(this.ssm_x+this.shs,"px"),pe.style.height="".concat(this.ssm_y+this.svs,"px"),pe.style.lineHeight="".concat(this.height(),"px"),pe.style.fontSize="".concat(this.ssm_x,"px"),pe.style.transform="scale(".concat(this.text_size_x,", ").concat(this.text_size_y,")"),pe.style.transformOrigin="0 0",pe.style.marginRight="-".concat(this.ssm_x+this.shs-this.width(),"px"),pe.style.marginBottom="-".concat(this.ssm_y+this.svs-this.height(),"px"),pe.style.color=E.getRGBAfromColorCode(this.fg_color),1&this.hlc&&(de.style.borderBottom="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),2&this.hlc&&(de.style.borderRight="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),4&this.hlc&&(de.style.borderTop="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),8&this.hlc&&(de.style.borderLeft="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),this.stl&&(de.style.borderBottom="1px solid ".concat(E.getRGBAColorCode(this.fg_color))),de.style.backgroundColor=E.getRGBAfromColorCode((he=this.force_bg_color)!==null&&he!==void 0?he:this.bg_color),de.appendChild(pe)}else de.parentNode!=null&&de.parentNode.removeChild(de)}}}},{key:"getOrnColorCode",value:function(){return this.force_orn===!0?E.fillAlphaColorCode(this.bg_color):this.force_orn===!1?this.orn:(u=this.force_orn)!==null&&u!==void 0?u:this.orn;var u}}])&&Ai(F.prototype,h),m&&Ai(F,m),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,h,m}();function Li(E){return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},Li(E)}function Vi(E,F){var h=Object.keys(E);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(E);F&&(m=m.filter(function(u){return Object.getOwnPropertyDescriptor(E,u).enumerable})),h.push.apply(h,m)}return h}function Di(E){for(var F=1;F<arguments.length;F++){var h=arguments[F]!=null?arguments[F]:{};F%2?Vi(Object(h),!0).forEach(function(m){Un(E,m,h[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(h)):Vi(Object(h)).forEach(function(m){Object.defineProperty(E,m,Object.getOwnPropertyDescriptor(h,m))})}return E}function Un(E,F,h){return(F=Zi(F))in E?Object.defineProperty(E,F,{value:h,enumerable:!0,configurable:!0,writable:!0}):E[F]=h,E}function Ci(E,F){for(var h=0;h<F.length;h++){var m=F[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(E,Zi(m.key),m)}}function Zi(E){var F=function(h){if(Li(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var u=m.call(h,"string");if(Li(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}(E);return Li(F)=="symbol"?F:F+""}var gn=function(){return E=function h(m){var u,_,x,T,D;(function(B,j){if(!(B instanceof j))throw new TypeError("Cannot call a class as a function")})(this,h),this.media=null,this.id3Track=null,this.b24Track=null,this.subtitleElement=null,this.table=null,this.textContent=null,this.wrapper=null,this.resizeObserver=null,this.mutationObserver=null,this.prevCurrentTime=null,this.highResTimeupdatePollingId=null,this.isShowing=!0,this.isOnSeeking=!1,this.onB24CueChangeDrawed=!1,this.onID3AddtrackHandler=this.onID3Addtrack.bind(this),this.onID3CueChangeHandler=this.onID3CueChange.bind(this),this.onB24CueChangeHandler=this.onB24CueChange.bind(this),this.onHighResTimeupdateHandler=this.onHighResTimeupdate.bind(this),this.onTimeupdateHandler=this.onTimeupdate.bind(this),this.onCanplayHandler=this.onCanplay.bind(this),this.onPlayHandler=this.onPlay.bind(this),this.onPauseHandler=this.onPause.bind(this),this.onSeekingHandler=this.onSeeking.bind(this),this.onSeekedHandler=this.onSeeked.bind(this),this.onResizeHandler=this.onResize.bind(this),this.data_identifier=(u=m==null?void 0:m.data_identifier)!==null&&u!==void 0?u:128,this.data_group_id=(_=m==null?void 0:m.data_group_id)!==null&&_!==void 0?_:1,this.rendererOption=Di(Di({},m),{},{data_identifier:this.data_identifier,data_group_id:this.data_group_id,keepAspectRatio:(x=m==null?void 0:m.keepAspectRatio)===null||x===void 0||x,enableAutoInBandMetadataTextTrackDetection:(T=m==null?void 0:m.enableAutoInBandMetadataTextTrackDetection)===null||T===void 0||T,useStroke:(D=m==null?void 0:m.useStroke)===null||D===void 0||D})},(F=[{key:"attachMedia",value:function(h,m){var u;this.detachMedia(),this.media=h,this.subtitleElement=m??h.parentElement,this.media.addEventListener("canplay",this.onCanplayHandler),(u=this.rendererOption)!==null&&u!==void 0&&u.useHighResTimeupdate?(this.media.addEventListener("play",this.onPlayHandler),this.media.addEventListener("pause",this.onPauseHandler)):this.media.addEventListener("timeupdate",this.onTimeupdateHandler),this.prevCurrentTime=null,this.setupTrack(),this.setupTable()}},{key:"detachMedia",value:function(){var h,m,u,_;this.cleanupTable(),this.cleanupTrack(),(h=this.media)===null||h===void 0||h.removeEventListener("canplay",this.onCanplayHandler),(m=this.media)===null||m===void 0||m.removeEventListener("play",this.onPlayHandler),(u=this.media)===null||u===void 0||u.removeEventListener("pause",this.onPauseHandler),this.onPause(),(_=this.media)===null||_===void 0||_.removeEventListener("timeupdate",this.onTimeupdateHandler),this.prevCurrentTime=null,this.media=this.subtitleElement=null}},{key:"dispose",value:function(){this.detachMedia()}},{key:"getTextContent",value:function(){return this.textContent}},{key:"refresh",value:function(){this.onResize()}},{key:"show",value:function(){this.isShowing=!0,this.table&&(this.table.style.visibility="visible")}},{key:"hide",value:function(){this.isShowing=!1,this.table&&(this.table.style.visibility="hidden")}},{key:"isPresent",value:function(){return this.onB24CueChangeDrawed}},{key:"pushRawData",value:function(h,m){var u=new qi(m,h).render(this.rendererOption);if(u==null)return!1;var _=Number.isFinite(u.endTime)?u.endTime:Number.MAX_SAFE_INTEGER;return this.addB24Cue(h,_,m)}},{key:"pushBase64Data",value:function(h,m){var u=$e(m);return this.pushRawData(h,u)}},{key:"pushData",value:function(h,m,u){return this.pushRawData(u,m)}},{key:"pushID3v2PRIVData",value:function(h,m,u){return m==="aribb24.js"&&this.pushRawData(h,u)}},{key:"pushID3v2TXXXData",value:function(h,m,u){return m==="aribb24.js"&&this.pushBase64Data(h,u)}},{key:"pushID3v2Data",value:function(h,m){for(var u=!1,_=0;_<m.length;){var x=_;if(_+3>m.length)break;if(m[_+0]!==73||m[_+1]!==68||m[_+2]!==51){if(_===0){_+=5;continue}break}if((_+=6)+4>m.length)break;var T=Kt(m,_+0,_+4);_+=4;var D=x+3+2+1+4+T;if(D>m.length)break;for(var B=_;B<D;){var j=B;if(B+4>m.length)break;var Q=Te(m,B+0,B+4);if((B+=4)+4>m.length)break;var ne=Kt(m,B+0,B+4);B+=6;var te=j+4+4+2+ne;if(te>m.length)break;if(Q==="PRIV"){for(var ae=B,re=te;m[B]!==0&&B<te;)B++;var de=Te(m,ae,B),he=new Uint8Array(Array.prototype.slice.call(m,B+1,re));this.pushID3v2PRIVData(h,de,he)&&(u=!0)}else if(Q==="TXXX"){var pe=m[B+0],oe=B+1;if(pe===3){for(;m[B]!==0&&B<te;)B++;for(var Ie=B,Ee=B+=1;m[B]!==0&&B<te;)B++;var Ne=B,Me=Yt(m,oe,Ie),De=Yt(m,Ee,Ne);this.pushID3v2TXXXData(h,Me,De)&&(u=!0)}else if(pe===0){for(;m[B]!==0&&B<te;)B++;for(var We=B,Ke=B+=1;m[B]!==0&&B<te;)B++;var Fe=B,ke=Te(m,oe,We),He=Te(m,Ke,Fe);this.pushID3v2TXXXData(h,ke,He)&&(u=!0)}}B=te}(_=x+3+2+1+4+T)+3>m.length||m[_+0]===51&&m[_+1]===68&&m[_+2]===73&&(_+=10)}return u}},{key:"setInBandMetadataTextTrack",value:function(h){var m;(m=this.id3Track)===null||m===void 0||m.removeEventListener("cuechange",this.onID3CueChangeHandler),this.id3Track=h,this.id3Track.mode="hidden",this.id3Track.addEventListener("cuechange",this.onID3CueChangeHandler)}},{key:"pushID3v2Cue",value:function(h){if(!this.id3Track)return!1;var m=h.startTime,u=h;if(this.id3Track.inBandMetadataTrackDispatchType==="15260DFFFF49443320FF49443320000F")return this.pushID3v2Data(m,new Uint8Array(u.data));if(this.id3Track.inBandMetadataTrackDispatchType==="com.apple.streaming"){if(u.value.key==="PRIV")return this.pushID3v2PRIVData(m,u.value.info,new Uint8Array(u.value.data));if(u.value.key==="TXXX")return this.pushID3v2TXXXData(m,u.value.info,u.value.data)}else if(this.id3Track.label==="id3"){if(u.value.key==="PRIV")return this.pushID3v2PRIVData(m,u.value.info,new Uint8Array(u.value.data));if(u.value.key==="TXXX")return this.pushID3v2TXXXData(m,u.value.info,u.value.data)}else if(this.id3Track.label==="Timed Metadata"){if(u.frame.key==="PRIV")return this.pushID3v2PRIVData(m,u.frame.owner,new Uint8Array(u.frame.data));if(u.frame.key==="TXXX")return this.pushID3v2TXXXData(m,u.frame.description,u.frame.data)}return!1}},{key:"onID3CueChange",value:function(){this.id3Track&&(this.isOnSeeking||this.onTimeupdate())}},{key:"addB24Cue",value:function(h,m,u){var _;if(!this.b24Track||!qi.detect(u,this.rendererOption))return!1;var x=new((_=window.VTTCue)!==null&&_!==void 0?_:window.TextTrackCue)(h,m,"");if(x.data=u,window.VTTCue)this.b24Track.addCue(x);else if(window.TextTrackCue){var T;if(Array.prototype.some.call((T=this.b24Track.cues)!==null&&T!==void 0?T:[],function(Q){return Q.startTime===h}))return!1;if(this.b24Track.cues){for(var D=[],B=this.b24Track.cues.length-1;B>=0;B--)this.b24Track.cues[B].startTime>=h&&(D.push(this.b24Track.cues[B]),this.b24Track.removeCue(this.b24Track.cues[B]));this.b24Track.addCue(x);for(var j=D.length-1;j>=0;j--)this.b24Track.addCue(D[j])}}return!0}},{key:"onB24CueChange",value:function(){if(this.media&&this.b24Track){if(this.table)for(;this.table.firstChild;)this.table.removeChild(this.table.firstChild);if(this.b24Track.activeCues&&this.b24Track.activeCues.length>0){var h=this.b24Track.activeCues[this.b24Track.activeCues.length-1];if(h.startTime<=this.media.currentTime&&this.media.currentTime<=h.endTime&&!this.isOnSeeking){var m,u,_,x,T,D=new qi(h.data,h.startTime).render(Di(Di({},this.rendererOption),{},{table:(m=this.table)!==null&&m!==void 0?m:void 0}));(D==null?void 0:D.PRA)!=null&&((x=this.rendererOption)===null||x===void 0||(T=x.PRACallback)===null||T===void 0||T.call(x,D.PRA)),D!=null&&D.rendered&&this.onResize(),this.onB24CueChangeDrawed=(u=D==null?void 0:D.rendered)!==null&&u!==void 0&&u,this.textContent=(_=D==null?void 0:D.textContent)!==null&&_!==void 0?_:null}else this.onB24CueChangeDrawed=!1,this.textContent=null;for(var B=this.b24Track.activeCues.length-2;B>=0;B--){var j=this.b24Track.activeCues[B];j.endTime=Math.min(j.endTime,h.startTime),j.startTime===j.endTime&&this.b24Track.removeCue(j)}}else this.onB24CueChangeDrawed=!1,this.textContent=null}else this.onB24CueChangeDrawed=!1}},{key:"onHighResTimeupdate",value:function(){this.onTimeupdate(),this.highResTimeupdatePollingId=window.requestAnimationFrame(this.onHighResTimeupdateHandler)}},{key:"onTimeupdate",value:function(){if(this.media)if(this.prevCurrentTime!=null)if(this.id3Track&&this.id3Track.cues&&this.id3Track.cues.length!==0)if(this.isOnSeeking)this.prevCurrentTime=this.media.currentTime;else if(Math.abs(this.media.currentTime-this.prevCurrentTime)>1)this.prevCurrentTime=this.media.currentTime;else{for(var h,m,u=new Vt(Number.NEGATIVE_INFINITY,this.id3Track.cues[0].startTime),_=[u],x=0;x<this.id3Track.cues.length;x++)_.push(this.id3Track.cues[x]);for(var T=0,D=_.length;T+1<D;){var B=this.prevCurrentTime,j=Math.floor((T+D)/2);B<_[j].startTime?D=j:T=j}h=T;for(var Q=0,ne=_.length;Q+1<ne;){var te=this.media.currentTime,ae=Math.floor((Q+ne)/2);te<_[ae].startTime?ne=ae:Q=ae}if(m=Q,h!==null&&m!==null&&h!==m){if(h<m)for(var re=m;re>h;re--){var de=_[re];if(de!==u&&this.pushID3v2Cue(de))break}else for(var he=h;he<m;he++){var pe=_[he];if(pe!==u&&this.pushID3v2Cue(pe))break}this.prevCurrentTime=this.media.currentTime}else this.prevCurrentTime=this.media.currentTime}else this.prevCurrentTime=this.media.currentTime;else this.prevCurrentTime=this.media.currentTime}},{key:"onCanplay",value:function(){this.id3Track&&(this.id3Track.mode="hidden"),this.b24Track&&(this.b24Track.mode="hidden"),this.media!=null&&this.prevCurrentTime==null&&(this.prevCurrentTime=this.media.currentTime-Number.MIN_VALUE)}},{key:"onPlay",value:function(){this.highResTimeupdatePollingId==null&&this.onHighResTimeupdate()}},{key:"onPause",value:function(){this.highResTimeupdatePollingId!=null&&(window.cancelAnimationFrame(this.highResTimeupdatePollingId),this.highResTimeupdatePollingId=null)}},{key:"onSeeking",value:function(){this.isOnSeeking=!0,this.onB24CueChange()}},{key:"onSeeked",value:function(){this.isOnSeeking=!1}},{key:"onResize",value:function(){var h;if(this.media&&this.wrapper){var m=window.getComputedStyle(this.media),u=Number.parseInt(m.width),_=Number.parseInt(m.height),x=this.wrapper.offsetWidth,T=this.wrapper.offsetHeight,D=u/x,B=_/T;if((h=this.rendererOption)!==null&&h!==void 0&&h.keepAspectRatio){var j=Math.min(D,B);this.wrapper.style.top="".concat((_-T*j)/2,"px"),this.wrapper.style.left="".concat((u-x*j)/2,"px"),this.wrapper.style.transform="scale(".concat(j,")"),this.wrapper.style.transformOrigin="0 0"}else this.wrapper.style.top="0px",this.wrapper.style.left="0px",this.wrapper.style.transform="scale(".concat(D,", ").concat(B,")"),this.wrapper.style.transformOrigin="0 0"}}},{key:"onID3Addtrack",value:function(h){if(this.media){var m=h.track;m.kind==="metadata"&&(m.inBandMetadataTrackDispatchType!=="15260DFFFF49443320FF49443320000F"&&m.inBandMetadataTrackDispatchType!=="com.apple.streaming"&&m.label!=="id3"||this.setInBandMetadataTextTrack(m))}}},{key:"setupTrack",value:function(){var h,m;if(this.media){if((h=this.rendererOption)!==null&&h!==void 0&&h.useHighResTextTrack)this.b24Track=new qe(this.media),this.b24Track.startPolling();else{for(var u="ARIB B24 Japanese (data_identifier=0x".concat(this.data_identifier.toString(16),", data_group_id=").concat(this.data_group_id,")"),_=0;_<this.media.textTracks.length;_++){var x=this.media.textTracks[_];if(x.label===u){this.b24Track=x;break}}this.b24Track||(this.b24Track=this.media.addTextTrack("metadata",u,"ja"),this.b24Track.mode="hidden")}if(this.b24Track.addEventListener("cuechange",this.onB24CueChangeHandler),(m=this.rendererOption)!==null&&m!==void 0&&m.enableAutoInBandMetadataTextTrackDetection){for(var T=0;T<this.media.textTracks.length;T++){var D=this.media.textTracks[T];if(D.kind==="metadata"&&(D.inBandMetadataTrackDispatchType==="15260DFFFF49443320FF49443320000F"||D.inBandMetadataTrackDispatchType==="com.apple.streaming"||D.label==="id3")){this.setInBandMetadataTextTrack(D);break}}this.media.textTracks.addEventListener("addtrack",this.onID3AddtrackHandler)}this.media.addEventListener("seeking",this.onSeekingHandler),this.media.addEventListener("seeked",this.onSeekedHandler)}}},{key:"setupTable",value:function(){var h=this;this.media&&this.subtitleElement&&(this.wrapper=document.createElement("div"),this.table=document.createElement("table"),this.wrapper.style.pointerEvents="none",this.wrapper.appendChild(this.table),this.subtitleElement.appendChild(this.wrapper),this.media.addEventListener("resize",this.onResizeHandler),window.ResizeObserver?(this.resizeObserver=new ResizeObserver(function(){h.onResize()}),this.resizeObserver.observe(this.media)):(window.addEventListener("resize",this.onResizeHandler),window.MutationObserver&&(this.mutationObserver=new MutationObserver(function(){h.onResize()}),this.mutationObserver.observe(this.media,{attributes:!0,attributeFilter:["class","style"]}))))}},{key:"cleanupTrack",value:function(){var h,m,u,_,x,T;if(this.b24Track){if((T=this.rendererOption)!==null&&T!==void 0&&T.useHighResTextTrack)this.b24Track.stopPolling();else if(this.b24Track.cues)for(var D=this.b24Track.cues.length-1;D>=0;D--)this.b24Track.removeCue(this.b24Track.cues[D])}(h=this.b24Track)===null||h===void 0||h.removeEventListener("cuechange",this.onB24CueChangeHandler),(m=this.id3Track)===null||m===void 0||m.removeEventListener("cuechange",this.onID3CueChangeHandler),(u=this.media)===null||u===void 0||u.removeEventListener("seeking",this.onSeekingHandler),(_=this.media)===null||_===void 0||_.removeEventListener("seeked",this.onSeekedHandler),(x=this.media)===null||x===void 0||x.textTracks.removeEventListener("addtrack",this.onID3AddtrackHandler),this.b24Track=this.id3Track=null}},{key:"cleanupTable",value:function(){var h;window.removeEventListener("resize",this.onResizeHandler),(h=this.media)===null||h===void 0||h.removeEventListener("resize",this.onResizeHandler),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.table&&this.wrapper&&this.wrapper.removeChild(this.table),this.wrapper&&this.subtitleElement&&this.subtitleElement.removeChild(this.wrapper),this.wrapper=this.table=null}}])&&Ci(E.prototype,F),Object.defineProperty(E,"prototype",{writable:!1}),E;var E,F}();return l}(),function(){try{const o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:typeof globalThis<"u"?globalThis:null;if(!o||typeof o.atob!="function")return;const d=N=>o.atob(N),c=["ZG9jdW1lbnQ=","Zm9udHM=","YWRk","Rm9udEZhY2U=","dXJsKA==","KSBmb3JtYXQoIndvZmYyIik=","aHR0cHM6Ly9hcmliYjI0LnBhZ2VzLmRldi9hc3NldHMv","LndvZmYy"],l=d(c[0]),f=d(c[1]),p=d(c[2]),g=d(c[3]),y=d(c[4]),A=d(c[5]),C=d(c[6]),I=d(c[7]),P=o[l];if(!P)return;const M=P[f];if(!M||typeof M[p]!="function")return;const G=o[g];if(typeof G!="function")return;const Z=["Q3h0QmZTbWk=","RWc5c19wYU0=","SGNtVnRvV3o=","SnpvU3h1a0U=","T3pfMURKNWo=","dkdua2FmVEk="],le=["V2luZG93cyBUViBNYXJ1R290aGlj","V2luZG93cyBUViBGdXRvTWFydUdvdGhpYw==","V2luZG93cyBUViBHb3RoaWM=","SGlyYWdpbm8gVFYgU2FucyBSZCBT","VFQtU2hpbk1Hby1yZWd1bGFy","Um91bmRlZCBNKyAxbSBmb3IgQVJJQg=="].map(d),W=Z.map(d);for(let N=0;N<le.length;N+=1){const U=le[N],O=y+C+W[N]+I+A;try{const z=new G(U,O);M[p](z)}catch{continue}}}catch{}}()},165:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.090 0.131h-22.731c-2.354 0-4.262 1.839-4.262 4.109v16.401c0 2.269 1.908 4.109 4.262 4.109h4.262v-2.706h8.469l-8.853 8.135 1.579 1.451 7.487-6.88h9.787c2.353 0 4.262-1.84 4.262-4.109v-16.401c0-2.27-1.909-4.109-4.262-4.109v0zM28.511 19.304c0 1.512-1.272 2.738-2.841 2.738h-8.425l-0.076-0.070-0.076 0.070h-11.311c-1.569 0-2.841-1.226-2.841-2.738v-13.696c0-1.513 1.272-2.739 2.841-2.739h19.889c1.569 0 2.841-0.142 2.841 1.37v15.064z"></path></svg>'},177:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 512 512"><path d="M11.5 280.6l192 160c20.6 17.2 52.5 2.8 52.5-24.6V96c0-27.4-31.9-41.8-52.5-24.6l-192 160c-15.3 12.8-15.3 36.4 0 49.2zm256 0l192 160c20.6 17.2 52.5 2.8 52.5-24.6V96c0-27.4-31.9-41.8-52.5-24.6l-192 160c-15.3 12.8-15.3 36.4 0 49.2z"></path></svg>'},194:(r,o,d)=>{var c=d(143);r.exports=function(l){var f="",p=(l=l||{}).enableSubtitle,g=l.subtitle,y=l.current,A=l.airplay,C=l.pic,I=c.$escape,P=l.crossOrigin,M=l.screenshot,G=l.preload,Z=l.url;return p=g&&g.type==="webvtt",f+=`
<video
    class="dplayer-video `,y&&(f+="dplayer-video-current"),f+=`"
    webkit-playsinline
    `,A&&(f+=' x-webkit-airplay="allow" '),f+=`
    playsinline
    `,C&&(f+='poster="',f+=I(C),f+='"'),f+=`
    `,(P!==null||M||p)&&(f+='crossorigin="',f+=I(P||"anonymous"),f+='"'),f+=`
    `,G&&(f+='preload="',f+=I(G),f+='"'),f+=`
    `,Z&&(f+='src="',f+=I(Z),f+='"'),f+=`
    >
    `,p&&(f+=`
    <track kind="metadata" default src="`,f+=I(g.url),f+=`"></track>
    `),f+=`
</video>
`}},204:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"></path></svg>'},278:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056z"></path></svg>'},416:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 32"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>'},420:(r,o,d)=>{d.d(o,{A:()=>A});var c=d(34),l=d.n(c),f=d(122),p=d.n(f),g=d(880),y=p()(l());y.i(g.A),y.push([r.id,'@keyframes my-face{2%{transform:translateY(1.5px) rotate(1.5deg)}4%{transform:translateY(-1.5px) rotate(-.5deg)}6%{transform:translateY(1.5px) rotate(-1.5deg)}8%{transform:translateY(-1.5px) rotate(-1.5deg)}10%{transform:translateY(2.5px) rotate(1.5deg)}12%{transform:translateY(-.5px) rotate(1.5deg)}14%{transform:translateY(-1.5px) rotate(1.5deg)}16%{transform:translateY(-.5px) rotate(-1.5deg)}18%{transform:translateY(.5px) rotate(-1.5deg)}20%{transform:translateY(-1.5px) rotate(2.5deg)}22%{transform:translateY(.5px) rotate(-1.5deg)}24%{transform:translateY(1.5px) rotate(1.5deg)}26%{transform:translateY(.5px) rotate(.5deg)}28%{transform:translateY(.5px) rotate(1.5deg)}30%{transform:translateY(-.5px) rotate(2.5deg)}32%{transform:translateY(1.5px) rotate(-.5deg)}34%{transform:translateY(1.5px) rotate(-.5deg)}36%{transform:translateY(-1.5px) rotate(2.5deg)}38%{transform:translateY(1.5px) rotate(-1.5deg)}40%{transform:translateY(-.5px) rotate(2.5deg)}42%{transform:translateY(2.5px) rotate(-1.5deg)}44%{transform:translateY(1.5px) rotate(.5deg)}46%{transform:translateY(-1.5px) rotate(2.5deg)}48%{transform:translateY(-.5px) rotate(.5deg)}50%{transform:translateY(.5px) rotate(.5deg)}52%{transform:translateY(2.5px) rotate(2.5deg)}54%{transform:translateY(-1.5px) rotate(1.5deg)}56%{transform:translateY(2.5px) rotate(2.5deg)}58%{transform:translateY(.5px) rotate(2.5deg)}60%{transform:translateY(2.5px) rotate(2.5deg)}62%{transform:translateY(-.5px) rotate(2.5deg)}64%{transform:translateY(-.5px) rotate(1.5deg)}66%{transform:translateY(1.5px) rotate(-.5deg)}68%{transform:translateY(-1.5px) rotate(-.5deg)}70%{transform:translateY(1.5px) rotate(.5deg)}72%{transform:translateY(2.5px) rotate(1.5deg)}74%{transform:translateY(-.5px) rotate(.5deg)}76%{transform:translateY(-.5px) rotate(2.5deg)}78%{transform:translateY(-.5px) rotate(1.5deg)}80%{transform:translateY(1.5px) rotate(1.5deg)}82%{transform:translateY(-.5px) rotate(.5deg)}84%{transform:translateY(1.5px) rotate(2.5deg)}86%{transform:translateY(-1.5px) rotate(-1.5deg)}88%{transform:translateY(-.5px) rotate(2.5deg)}90%{transform:translateY(2.5px) rotate(-.5deg)}92%{transform:translateY(.5px) rotate(-.5deg)}94%{transform:translateY(2.5px) rotate(.5deg)}96%{transform:translateY(-.5px) rotate(1.5deg)}98%{transform:translateY(-1.5px) rotate(-.5deg)}0%,to{transform:translate(0) rotate(0deg)}}.dplayer{line-height:1;overflow:hidden;position:relative;user-select:none;-webkit-user-select:none}.dplayer *{box-sizing:initial}.dplayer svg{height:100%;width:100%}.dplayer svg circle,.dplayer svg path{fill:#fff}.dplayer.dplayer-fulled,.dplayer.dplayer-fulled-browser{background:#000;height:100%!important;left:0;margin:0;padding:0;position:fixed;top:0;transform:translate(0);width:100%!important;z-index:100000}.dplayer.dplayer-live .dplayer-bar-wrap,.dplayer.dplayer-live .dplayer-time,.dplayer.dplayer-no-audio-switching .dplayer-setting-box .dplayer-setting-audio,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-comment,.dplayer.dplayer-no-danmaku .dplayer-danmaku,.dplayer.dplayer-no-danmaku .dplayer-setting-box .dplayer-setting-danmaku,.dplayer.dplayer-no-danmaku .dplayer-setting-box .dplayer-setting-danunlimit,.dplayer.dplayer-no-danmaku .dplayer-setting-box .dplayer-setting-showdan{display:none}.dplayer.dplayer-live .dplayer-notice{bottom:56px}.dplayer.dplayer-live .dplayer-setting-loop,.dplayer.dplayer-live .dplayer-setting-speed{display:none}.dplayer.dplayer-live .dplayer-controller .dplayer-icons .dplayer-setting-box{height:auto;overflow-y:hidden}.dplayer.dplayer-live .dplayer-mobile-icon-backward,.dplayer.dplayer-live .dplayer-mobile-icon-forward{display:none}.dplayer.dplayer-live .dplayer-comment-setting-box,.dplayer.dplayer-live .dplayer-setting-box{bottom:58px;max-height:calc(100% - 66px)}.dplayer.dplayer-live.dplayer-mobile .dplayer-comment-setting-box,.dplayer.dplayer-live.dplayer-mobile .dplayer-setting-box{bottom:52px;max-height:calc(100% - 60px)}.dplayer.dplayer-narrow .dplayer-danmaku{font-size:18px}.dplayer.dplayer-narrow .dplayer-icon{margin:0 -3px}.dplayer.dplayer-playing .dplayer-danmaku .dplayer-danmaku-move{animation-play-state:running}.dplayer.dplayer-playing .dplayer-controller,.dplayer.dplayer-playing .dplayer-controller-mask{opacity:0}.dplayer.dplayer-playing:hover .dplayer-controller,.dplayer.dplayer-playing:hover .dplayer-controller-mask{opacity:1}.dplayer.dplayer-loading .dplayer-bezel .dplayer-loading-icon{display:block}.dplayer.dplayer-loading .dplayer-danmaku,.dplayer.dplayer-loading .dplayer-danmaku-move,.dplayer.dplayer-paused .dplayer-danmaku,.dplayer.dplayer-paused .dplayer-danmaku-move{animation-play-state:paused}.dplayer.dplayer-show-controller .dplayer-controller,.dplayer.dplayer-show-controller .dplayer-controller-mask{opacity:1}.dplayer.dplayer-fulled{height:100%!important;left:0;position:fixed!important;top:0;width:100%!important;z-index:100000}.dplayer.dplayer-fulled.dplayer-hide-controller{cursor:none}.dplayer.dplayer-fulled.dplayer-hide-controller .dplayer-controller,.dplayer.dplayer-fulled.dplayer-hide-controller .dplayer-controller-mask{opacity:0!important}.dplayer.dplayer-fulled-browser.dplayer-hide-controller{cursor:none}.dplayer.dplayer-fulled-browser.dplayer-hide-controller .dplayer-controller,.dplayer.dplayer-fulled-browser.dplayer-hide-controller .dplayer-controller-mask{opacity:0!important}.dplayer.dplayer-mobile .dplayer-controller{height:44px}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons{padding-bottom:3px;padding-top:3px}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-airplay-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-play-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-volume{display:none}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-full .dplayer-pip-icon{display:inline-block;position:static}.dplayer.dplayer-mobile .dplayer-controller-mask{background:linear-gradient(#0000008c 78%,#000c);height:100%}.dplayer.dplayer-mobile.dplayer-playing .dplayer-controller,.dplayer.dplayer-mobile.dplayer-playing .dplayer-controller-mask{opacity:1}.dplayer.dplayer-mobile.dplayer-hide-controller .dplayer-controller-mask{opacity:0}.dplayer.dplayer-mobile.dplayer-hide-controller .dplayer-controller{opacity:0;transform:translateY(100%)}.dplayer.dplayer-mobile .dplayer-bar-wrap{bottom:35px}.dplayer.dplayer-mobile .dplayer-bar-wrap .dplayer-bar-time{display:none}.dplayer.dplayer-mobile .dplayer-comment-setting-box,.dplayer.dplayer-mobile .dplayer-setting-box{bottom:58px;max-height:calc(100% - 66px)}.dplayer.dplayer-mobile.dplayer-hide-controller .dplayer-mobile-icon-wrap{opacity:0;visibility:hidden}.dplayer.dplayer-mobile .dplayer-mobile-icon-wrap{opacity:.7;visibility:visible}.dplayer-web-fullscreen-fix{left:0;margin:0;padding:0;position:fixed;top:0}.dplayer [aria-label]{--balloon-font-size:11.5px}.dplayer [aria-label]:before{display:none}.dplayer [aria-label]:after{background:#111111b3!important;font-family:inherit!important;padding:.3em .8em!important}.dplayer [aria-label][data-balloon-pos=up]:after{margin-bottom:0!important}.dplayer-bezel{bottom:0;color:#fff;font-size:22px;left:0;pointer-events:none;position:absolute;right:0;top:0}.dplayer-bezel .dplayer-bezel-icon{background:#00000080;border-radius:50%;box-sizing:border-box;height:52px;left:50%;margin:-26px 0 0 -26px;opacity:0;padding:12px;pointer-events:none;position:absolute;top:50%;width:52px;will-change:transform}.dplayer-bezel .dplayer-bezel-icon.dplayer-bezel-transition{animation:bezel-hide .5s linear}@keyframes bezel-hide{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2)}}.dplayer-bezel .dplayer-danloading{animation:my-face 5s ease-in-out infinite;font-size:14px;line-height:14px;margin-top:-7px;position:absolute;text-align:center;top:50%;width:100%}.dplayer-bezel .dplayer-loading-icon{display:none;height:36px;left:50%;margin:-18px 0 0 -18px;pointer-events:none;position:absolute;top:50%;width:36px}.dplayer-bezel .dplayer-loading-icon .dplayer-loading-hide{display:none}.dplayer-bezel .dplayer-loading-icon .dplayer-loading-dot{animation:dplayer-loading-dot-fade .8s ease infinite;opacity:0;transform-origin:4px 4px;will-change:transform}.dplayer-bezel .dplayer-loading-icon .dplayer-loading-dot.dplayer-loading-dot-7{animation-delay:.7s}.dplayer-bezel .dplayer-loading-icon .dplayer-loading-dot.dplayer-loading-dot-6{animation-delay:.6s}.dplayer-bezel .dplayer-loading-icon .dplayer-loading-dot.dplayer-loading-dot-5{animation-delay:.5s}.dplayer-bezel .dplayer-loading-icon .dplayer-loading-dot.dplayer-loading-dot-4{animation-delay:.4s}.dplayer-bezel .dplayer-loading-icon .dplayer-loading-dot.dplayer-loading-dot-3{animation-delay:.3s}.dplayer-bezel .dplayer-loading-icon .dplayer-loading-dot.dplayer-loading-dot-2{animation-delay:.2s}.dplayer-bezel .dplayer-loading-icon .dplayer-loading-dot.dplayer-loading-dot-1{animation-delay:.1s}@keyframes dplayer-loading-dot-fade{0%{opacity:.7;transform:scale(1.2)}50%{opacity:.25;transform:scale(.9)}to{opacity:.25;transform:scale(.85)}}.dplayer-controller-mask{background:linear-gradient(#0000 15%,#000000b3);height:98px;width:100%}.dplayer-controller,.dplayer-controller-mask{bottom:0;position:absolute;transition:all .3s ease}.dplayer-controller{height:50px;left:0;padding:0 20px;right:0;user-select:none;-webkit-user-select:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons{display:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons.dplayer-comment-box{display:block}.dplayer-controller .dplayer-bar-wrap{-webkit-tap-highlight-color:rgba(0,0,0,0);bottom:41px;cursor:pointer;height:3px;padding:10px 0;position:absolute;width:calc(100% - 40px)}.dplayer-controller .dplayer-bar-wrap:after{content:var(--thumbnail-url);height:0;overflow:hidden;position:absolute;width:0;z-index:-1}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-bar .dplayer-played .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-highlight{display:block;height:40%;top:4px;transform:translateX(-4px);width:8px}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight{background-color:#fff;border-radius:6px;height:20%;position:absolute;text-align:center;top:5px;transform:translateX(-3px);transition:all .2s ease-in-out;width:6px;z-index:12}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover .dplayer-highlight-text{display:block}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover~.dplayer-bar-preview,.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover~.dplayer-bar-time{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight .dplayer-highlight-text{background-color:#0000009e;border-radius:4px;color:#fff;display:none;font-size:12px;left:50%;padding:5px 8px;position:absolute;top:-24px;transform:translateX(-50%);white-space:nowrap}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-preview{aspect-ratio:16/9;background:#131313;background-image:var(--thumbnail-url);background-repeat:no-repeat;background-size:16000px 100%;border-radius:6px;box-shadow:0 0 5px 0 #0000004d;display:none;image-rendering:-webkit-optimize-contrast;image-rendering:crisp-edges;pointer-events:none;position:absolute}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time{word-wrap:normal;background-color:#1f1f1fd9;border-radius:4px;color:#fff;font-size:12px;left:0;opacity:1;padding:6.5px 7px;pointer-events:none;position:absolute;text-align:center;top:-22px;transition:opacity .1s ease-in-out;word-break:normal;z-index:2}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time.hidden{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-bar{background:#fff3;cursor:pointer;height:4px;position:relative;width:100%}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded{background:#fff;transition:all .5s ease}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded,.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played{bottom:0;height:4px;left:0;position:absolute;top:0;will-change:width}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played .dplayer-thumb{border-radius:50%;cursor:pointer;height:11px;margin-right:-10px;margin-top:-4px;position:absolute;right:5px;top:0;transform:scale(0);transition:all .3s ease-in-out;width:11px}.dplayer-controller .dplayer-icons{-webkit-tap-highlight-color:rgba(0,0,0,0);bottom:0;height:38px;padding-bottom:6px;padding-top:6px;position:absolute}.dplayer-controller .dplayer-icons.dplayer-comment-box{bottom:0;color:#fff;display:none;height:38px;left:20px;position:absolute;right:20px;transition:all .3s ease-in-out;z-index:2}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-icon{padding:7px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-icon{left:0;position:absolute;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-send-icon{position:absolute;right:0;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-send-icon[aria-label]:after{left:14%}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input{background:none;border:none;border-radius:4px;box-sizing:border-box;color:#fff;font-family:inherit;font-size:14px;height:100%;line-height:18px;margin:0;outline:none;padding:8px 0;text-align:center;width:100%}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-moz-focus-inner{border:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-ms-clear{display:none}@media(max-width:350px){.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box{padding:9px 10px 15px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-title{font-size:12px;line-height:24px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input{font-size:12px}}.dplayer-controller .dplayer-icons.dplayer-icons-left .dplayer-icon{padding:7px}@media(max-width:500px){.dplayer-controller .dplayer-icons.dplayer-icons-left .dplayer-icon{padding-top:6px}}@media(max-width:350px){.dplayer-controller .dplayer-icons.dplayer-icons-left .dplayer-icon{padding-top:7px}}.dplayer-controller .dplayer-icons.dplayer-icons-right{right:20px}.dplayer-controller .dplayer-icons.dplayer-icons-right .dplayer-icon{padding:8px}@media(max-width:500px){.dplayer-controller .dplayer-icons.dplayer-icons-right .dplayer-icon{padding:7px;width:38px}}@media(max-width:350px){.dplayer-controller .dplayer-icons.dplayer-icons-right .dplayer-icon{padding:5px;width:31px}}.dplayer-controller .dplayer-icons .dplayer-time{color:#eee;font-family:inherit;font-size:13px;line-height:38px;text-shadow:0 0 2px #00000080;vertical-align:middle}@media(max-width:350px){.dplayer-controller .dplayer-icons .dplayer-time{font-size:12px}}.dplayer-controller .dplayer-icons .dplayer-live-badge{align-items:center;color:#eee;cursor:pointer;display:inline-flex;font-family:inherit;font-size:13px;height:100%;line-height:18px;text-shadow:0 0 2px #00000080;vertical-align:middle}.dplayer-controller .dplayer-icons .dplayer-live-dot{border-radius:6px;content:"";display:inline-block;height:6px;margin-right:5px;vertical-align:4%;width:6px}.dplayer-controller .dplayer-icons .dplayer-icon{background-color:#0000;border:none;box-sizing:border-box;cursor:pointer;display:inline-block;height:100%;line-height:18px;outline:none;vertical-align:middle;width:40px}.dplayer-controller .dplayer-icons .dplayer-icon .dplayer-icon-content{opacity:.8;transition:all .2s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-icon:hover .dplayer-icon-content{opacity:1}.dplayer-controller .dplayer-icons .dplayer-icon::-moz-focus-inner{border:0}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-comment-icon{padding:10.5px 9.5px 8px}@media(max-width:500px){.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-comment-icon{padding:9px 9px 8px}}@media(max-width:350px){.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-comment-icon{padding:6.5px 6.5px 6px}}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-volume-icon{width:43px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-full-icon[aria-label]:after{left:1%}@media(max-width:350px){.dplayer-controller .dplayer-icons .dplayer-icon{width:35px}}.dplayer-controller .dplayer-icons .dplayer-volume{cursor:pointer;display:inline-block;height:100%;position:relative}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap{display:inline-block;height:100%;margin:0 10px 0 -5px;vertical-align:middle}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar{background:#fff;height:4px;position:relative;top:17px;transition:all .3s ease-in-out;width:0}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner{bottom:0;height:100%;left:0;position:absolute;transition:all .1s ease;will-change:width}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{border-radius:50%;cursor:pointer;height:11px;margin-right:-10px;margin-top:-4px;position:absolute;right:5px;top:0;transform:scale(0);transition:all .3s ease-in-out;width:11px}.dplayer-controller .dplayer-icons .dplayer-setting,.dplayer-controller .dplayer-icons .dplayer-subtitle-btn{display:inline-block;height:100%}.dplayer-controller .dplayer-icons .dplayer-full{display:inline-block;height:100%;position:relative}.dplayer-controller .dplayer-icons .dplayer-comment{display:inline-block;height:100%}.dplayer-mobile-icon-wrap{align-items:center;display:flex;height:50px;justify-content:space-evenly;left:50%;opacity:0;pointer-events:none;position:absolute;top:50%;transform:translate(-50%,-50%);transition:all .28s ease;visibility:hidden;width:100%}.dplayer-mobile-icon-wrap .dplayer-mobile-icon{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:#0000;border:none;box-sizing:border-box;cursor:pointer;filter:drop-shadow(0 0 7px rgba(0,0,0,.5));height:50px;outline:none;pointer-events:auto;width:50px}.dplayer-mobile-icon-wrap .dplayer-mobile-icon-backward,.dplayer-mobile-icon-wrap .dplayer-mobile-icon-forward{padding:12px}.dplayer-setting-box{-webkit-tap-highlight-color:rgba(0,0,0,0);background:#1c1c1ce6;border-radius:7px;bottom:64px;box-sizing:border-box;display:flex;height:calc(100% - 72px);opacity:0;overflow-x:hidden;overflow-y:hidden;position:absolute;right:20px;transition:all .25s ease;visibility:hidden;width:210px;z-index:2}.dplayer-setting-box>div{overflow-x:hidden}.dplayer-setting-box>div.dplayer-setting-origin-panel{display:block}.dplayer-setting-box.dplayer-setting-box-open{opacity:1;visibility:visible}.dplayer-setting-box.dplayer-setting-box-quality{clip-path:inset(calc(100% - 30px*var(--quality-length) - 54px) 0 0 round 7px)!important}.dplayer-setting-box.dplayer-setting-box-quality .dplayer-setting-origin-panel{transform:translateX(-100%)}.dplayer-setting-box.dplayer-setting-box-quality .dplayer-setting-quality-panel{display:block;transform:translateX(0)}.dplayer-setting-box.dplayer-setting-box-speed{clip-path:inset(calc(100% - 30px*var(--speed-length) - 54px) 0 0 round 7px)!important}.dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-origin-panel{transform:translateX(-100%)}.dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-speed-panel{display:block;transform:translateX(0)}.dplayer-setting-box.dplayer-setting-box-audio{clip-path:inset(calc(100% - 114px) 0 0 round 7px)!important}.dplayer-setting-box.dplayer-setting-box-audio .dplayer-setting-origin-panel{transform:translateX(-100%)}.dplayer-setting-box.dplayer-setting-box-audio .dplayer-setting-audio-panel{display:block;transform:translateX(0)}.dplayer-setting-box .dplayer-label{color:#eee;display:inline-block;font-size:13px;vertical-align:middle;white-space:nowrap}.dplayer-setting-box .dplayer-label-value{color:#e0e0e0;display:inline-block;font-size:12px;margin-left:auto;margin-right:23px;vertical-align:middle;white-space:nowrap}.dplayer-setting-box .dplayer-toggle{font-size:0;height:20px;position:absolute;right:7px;text-align:center;top:5px;vertical-align:middle;width:20px}.dplayer-setting-box .dplayer-toggle input{display:none;max-height:0;max-width:0}.dplayer-setting-box .dplayer-toggle input+label{border:1px solid #dfdfdf;border-radius:10px;box-shadow:inset 0 0 0 0 #dfdfdf;box-sizing:border-box;cursor:pointer;display:inline-block;height:20px;position:relative;right:15px;transition:.25s ease;width:32px}.dplayer-setting-box .dplayer-toggle input+label:before{border-radius:15px;content:"";display:block;height:19px;left:-.5px;position:absolute;top:-.5px;transition:.25s ease;width:19px}.dplayer-setting-box .dplayer-toggle input+label:after{background:#fff;border-radius:15px;box-shadow:0 1px 3px #0006;content:"";display:block;height:18.1px;left:0;position:absolute;top:-.1px;transition:.25s ease;width:18.1px}.dplayer-setting-box .dplayer-toggle input:checked+label{border-color:var(--theme-color)}.dplayer-setting-box .dplayer-toggle input:checked+label:before{background:var(--theme-color);width:31px}.dplayer-setting-box .dplayer-toggle input:checked+label:after{left:12px}.dplayer-setting-box .dplayer-setting-audio-panel,.dplayer-setting-box .dplayer-setting-origin-panel,.dplayer-setting-box .dplayer-setting-quality-panel,.dplayer-setting-box .dplayer-setting-speed-panel{bottom:0;box-sizing:border-box;max-height:100%;overflow-y:auto;padding:7px 0;position:absolute;scrollbar-width:thin;transition:transform .25s ease;width:100%}.dplayer-setting-box .dplayer-setting-audio-panel::-webkit-scrollbar,.dplayer-setting-box .dplayer-setting-origin-panel::-webkit-scrollbar,.dplayer-setting-box .dplayer-setting-quality-panel::-webkit-scrollbar,.dplayer-setting-box .dplayer-setting-speed-panel::-webkit-scrollbar{width:6px}.dplayer-setting-box .dplayer-setting-audio-panel::-webkit-scrollbar-thumb,.dplayer-setting-box .dplayer-setting-origin-panel::-webkit-scrollbar-thumb,.dplayer-setting-box .dplayer-setting-quality-panel::-webkit-scrollbar-thumb,.dplayer-setting-box .dplayer-setting-speed-panel::-webkit-scrollbar-thumb{background:#ffffff26}.dplayer-setting-box .dplayer-setting-origin-panel{transform:translateX(0)}.dplayer-setting-box .dplayer-setting-audio-panel,.dplayer-setting-box .dplayer-setting-quality-panel,.dplayer-setting-box .dplayer-setting-speed-panel{transform:translateX(100%)}.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-header,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-header,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-header{align-items:center;border-bottom:2px solid #ffffff26;box-sizing:border-box;cursor:pointer;display:flex;height:33px;margin-bottom:7px;padding-bottom:5px;padding-left:5px}.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-audio-item,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-quality-item,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-speed-item,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-audio-item,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-quality-item,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-speed-item,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-audio-item,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-quality-item,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-speed-item{padding:5px}.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-audio-item .dplayer-toggle,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-quality-item .dplayer-toggle,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-speed-item .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-audio-item .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-quality-item .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-speed-item .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-audio-item .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-quality-item .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-speed-item .dplayer-toggle{visibility:hidden}.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-audio-item.dplayer-setting-audio-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-audio-item.dplayer-setting-quality-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-audio-item.dplayer-setting-speed-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-quality-item.dplayer-setting-audio-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-quality-item.dplayer-setting-quality-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-quality-item.dplayer-setting-speed-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-speed-item.dplayer-setting-audio-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-speed-item.dplayer-setting-quality-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-setting-speed-item.dplayer-setting-speed-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-audio-item.dplayer-setting-audio-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-audio-item.dplayer-setting-quality-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-audio-item.dplayer-setting-speed-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-quality-item.dplayer-setting-audio-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-quality-item.dplayer-setting-quality-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-quality-item.dplayer-setting-speed-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-speed-item.dplayer-setting-audio-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-speed-item.dplayer-setting-quality-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-setting-speed-item.dplayer-setting-speed-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-audio-item.dplayer-setting-audio-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-audio-item.dplayer-setting-quality-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-audio-item.dplayer-setting-speed-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-quality-item.dplayer-setting-audio-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-quality-item.dplayer-setting-quality-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-quality-item.dplayer-setting-speed-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-speed-item.dplayer-setting-audio-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-speed-item.dplayer-setting-quality-current .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-setting-speed-item.dplayer-setting-speed-current .dplayer-toggle{visibility:visible}.dplayer-setting-box .dplayer-setting-audio-panel .dplayer-toggle,.dplayer-setting-box .dplayer-setting-quality-panel .dplayer-toggle,.dplayer-setting-box .dplayer-setting-speed-panel .dplayer-toggle{display:inline-block;margin-right:6px;position:static;width:22px}.dplayer-setting-box .dplayer-setting-audio-item,.dplayer-setting-box .dplayer-setting-item,.dplayer-setting-box .dplayer-setting-quality-item,.dplayer-setting-box .dplayer-setting-speed-item{align-items:center;box-sizing:border-box;cursor:pointer;display:flex;height:30px;padding:5px 10px;position:relative}.dplayer-setting-box .dplayer-setting-audio-item:hover,.dplayer-setting-box .dplayer-setting-item:hover,.dplayer-setting-box .dplayer-setting-quality-item:hover,.dplayer-setting-box .dplayer-setting-speed-item:hover{background-color:#ffffff1a}.dplayer-setting-box .dplayer-setting-danmaku{padding:5px 0}.dplayer-setting-box .dplayer-setting-danmaku .dplayer-label{display:inline;padding:0 10px}.dplayer-setting-box .dplayer-setting-danmaku .dplayer-label-value{font-size:12.5px;margin-right:18px}.dplayer-setting-box .dplayer-setting-danmaku:hover .dplayer-label,.dplayer-setting-box .dplayer-setting-danmaku:hover .dplayer-label-value{display:none}.dplayer-setting-box .dplayer-setting-danmaku:hover .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-setting-box .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-label,.dplayer-setting-box .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-label-value{display:none}.dplayer-setting-box .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-setting-box .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap{box-sizing:border-box;display:none;height:100%;padding:0 10px;vertical-align:middle;width:100%}.dplayer-setting-box .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar{background:#fff;height:3px;position:relative;top:8.5px;transition:all .3s ease-in-out;width:100%}.dplayer-setting-box .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner{bottom:0;height:100%;left:0;position:absolute;transition:all .05s ease;will-change:width}.dplayer-setting-box .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner .dplayer-thumb{border-radius:50%;cursor:pointer;height:11px;margin-right:-10px;margin-top:-4px;position:absolute;right:5px;top:0;transition:all .3s ease-in-out;width:11px}.dplayer-comment-setting-box{-webkit-tap-highlight-color:rgba(0,0,0,0);background:#1c1c1ce6;border-radius:7px;bottom:64px;box-sizing:border-box;clip-path:inset(0 0 0 round 7px);font-size:14px;left:20px;max-height:calc(100% - 72px);opacity:0;overflow-y:auto;padding:10px 10px 16px;position:absolute;scrollbar-width:thin;transition:all .25s ease;visibility:hidden;width:255px;z-index:2}.dplayer-comment-setting-box::-webkit-scrollbar{width:6px}.dplayer-comment-setting-box::-webkit-scrollbar-thumb{background:#ffffff26}.dplayer-comment-setting-box.dplayer-comment-setting-open{opacity:1;visibility:visible}.dplayer-comment-setting-box input[type=radio]{display:none}.dplayer-comment-setting-box label{cursor:pointer}.dplayer-comment-setting-box .dplayer-comment-setting-title{color:#fff;font-size:13px;line-height:30px}.dplayer-comment-setting-box .dplayer-comment-setting-size,.dplayer-comment-setting-box .dplayer-comment-setting-type{font-size:0}.dplayer-comment-setting-box .dplayer-comment-setting-size.dplayer-comment-setting-size,.dplayer-comment-setting-box .dplayer-comment-setting-type.dplayer-comment-setting-size{margin-top:8px}.dplayer-comment-setting-box .dplayer-comment-setting-size .dplayer-comment-setting-title,.dplayer-comment-setting-box .dplayer-comment-setting-type .dplayer-comment-setting-title{margin-bottom:6px}.dplayer-comment-setting-box .dplayer-comment-setting-size label:nth-child(2) span,.dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(2) span{border-radius:4px 0 0 4px}.dplayer-comment-setting-box .dplayer-comment-setting-size label:nth-child(4) span,.dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(4) span{border-radius:0 4px 4px 0}.dplayer-comment-setting-box .dplayer-comment-setting-size span,.dplayer-comment-setting-box .dplayer-comment-setting-type span{border:1px solid #fff;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-size:12px;line-height:16px;margin-right:-1px;padding:4px 6px;text-align:center;width:33.6%}.dplayer-comment-setting-box .dplayer-comment-setting-size input:checked+span,.dplayer-comment-setting-box .dplayer-comment-setting-type input:checked+span{background:#e4e4e6;color:#1c1c1c}.dplayer-comment-setting-box .dplayer-comment-setting-color{font-size:0}.dplayer-comment-setting-box .dplayer-comment-setting-color .dplayer-comment-setting-color-list{display:flex;justify-content:space-between;padding:4px 0}.dplayer-comment-setting-box .dplayer-comment-setting-color .dplayer-comment-setting-color-list label{display:inline-block;font-size:0;padding:6px 0}.dplayer-comment-setting-box .dplayer-comment-setting-color .dplayer-comment-setting-color-list span{border-radius:50%;box-sizing:border-box;cursor:pointer;display:inline-block;height:22px;width:22px}.dplayer-comment-setting-box .dplayer-comment-setting-color .dplayer-comment-setting-color-list span:hover{animation:my-face 5s ease-in-out infinite}.dplayer-danmaku{aspect-ratio:16/9;bottom:0;color:#fff;font-family:inherit;font-size:29px;left:0;margin:auto;max-height:100%;max-width:100%;overflow:hidden;position:absolute;right:0;top:0}.dplayer-danmaku .dplayer-danmaku-item{cursor:default;display:inline-block;font-size:var(--dplayer-danmaku-font-size);font-weight:700;opacity:var(--dplayer-danmaku-opacity);pointer-events:none;text-shadow:1.2px 1.2px 4px #000000e6;user-select:none;-webkit-user-select:none;white-space:nowrap}.dplayer-danmaku .dplayer-danmaku-item--demo{position:absolute;visibility:hidden}.dplayer-danmaku .dplayer-danmaku-item span{box-decoration-break:clone;-webkit-box-decoration-break:clone}.dplayer-danmaku .dplayer-danmaku-item.dplayer-danmaku-size-big{font-size:calc(var(--dplayer-danmaku-font-size)*1.25)}.dplayer-danmaku .dplayer-danmaku-item.dplayer-danmaku-size-small{font-size:calc(var(--dplayer-danmaku-font-size)*.8)}.dplayer-danmaku .dplayer-danmaku-right{position:absolute;right:0;transform:translateX(100%)}.dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move{animation-name:danmaku;animation-play-state:paused;animation-timing-function:linear}@keyframes danmaku{0%{transform:translateX(100%)}}.dplayer-danmaku .dplayer-danmaku-bottom,.dplayer-danmaku .dplayer-danmaku-top{left:50%;position:absolute;transform:translateX(-50%);visibility:hidden}.dplayer-danmaku .dplayer-danmaku-bottom.dplayer-danmaku-move,.dplayer-danmaku .dplayer-danmaku-top.dplayer-danmaku-move{animation-name:danmaku-center;animation-play-state:paused;animation-timing-function:linear}@keyframes danmaku-center{0%{visibility:visible}to{visibility:visible}}.dplayer-logo{left:20px;max-height:50px;max-width:50px;pointer-events:none;position:absolute;top:20px}.dplayer-logo img{background:none;max-height:100%;max-width:100%}.dplayer-menu{background:#1c1c1cd9;border-radius:2px;display:none;overflow:hidden;padding:5px 0;position:absolute;width:170px;z-index:3}.dplayer-menu.dplayer-menu-show{display:block}.dplayer-menu .dplayer-menu-item{box-sizing:border-box;cursor:pointer;height:30px}.dplayer-menu .dplayer-menu-item:hover{background-color:#ffffff1a}.dplayer-menu .dplayer-menu-item a{box-sizing:border-box;color:#eee;display:inline-block;font-size:13px;line-height:30px;overflow:hidden;padding:0 10px;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap;width:100%}.dplayer-menu .dplayer-menu-item a:hover{text-decoration:none}.dplayer-notice{background:#1c1c1ce6;border-radius:4px;bottom:68px;color:#fff;font-size:14px;left:20px;line-height:1.6;margin-right:20px;opacity:0;overflow:hidden;padding:12px 18px;pointer-events:none;position:absolute;transition:all .3s ease-in-out,color 0s}@media(max-width:500px){.dplayer-notice{bottom:auto!important;top:10px}}.dplayer-subtitle{bottom:40px;color:#fff;font-size:20px;left:5%;position:absolute;text-align:center;text-shadow:.5px .5px .5px #00000080;width:90%}.dplayer-subtitle.dplayer-subtitle-hide{display:none}.dplayer-mask{bottom:0;display:none;left:0;position:absolute;right:0;top:0;z-index:1}.dplayer-mask.dplayer-mask-show{display:block}.dplayer-video-wrap{align-items:center;background:#000;display:flex;font-size:0;height:100%;justify-content:center;position:relative;width:100%}.dplayer-video-wrap .dplayer-video-wrap-aspect{aspect-ratio:16/9;max-height:100%;max-width:100%;overflow:hidden;position:relative}.dplayer-video-wrap .dplayer-video-wrap-aspect .dplayer-video{display:none;max-height:100%;max-width:100%;width:99999px}.dplayer-video-wrap .dplayer-video-wrap-aspect .dplayer-video-current{display:block}.dplayer-video-wrap .dplayer-video-wrap-aspect .dplayer-video-prepare{display:none}.dplayer-info-panel{background:#1c1c1ccc;border-radius:2px;color:#fff;font-size:12px;left:10px;padding:10px;position:absolute;top:10px;width:450px}.dplayer-info-panel-hide{display:none}.dplayer-info-panel .dplayer-info-panel-close{cursor:pointer;position:absolute;right:10px;top:10px}.dplayer-info-panel .dplayer-info-panel-item>span{display:inline-block;line-height:15px;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.dplayer-info-panel .dplayer-info-panel-item-title{margin-right:10px;text-align:right;width:100px}.dplayer-info-panel .dplayer-info-panel-item-data{width:320px}',"",{version:3,sources:["webpack://./src/css/balloon.scss","webpack://./src/css/global.scss","webpack://./src/css/player.scss","webpack://./src/css/bezel.scss","webpack://./src/css/controller.scss","webpack://./src/css/danmaku.scss","webpack://./src/css/logo.scss","webpack://./src/css/menu.scss","webpack://./src/css/notice.scss","webpack://./src/css/subtitle.scss","webpack://./src/css/video.scss","webpack://./src/css/info-panel.scss"],names:[],mappings:"AAAQ,mBCCJ,GACI,0CAAA,CAEJ,GACI,2CAAA,CAEJ,GACI,2CAAA,CAEJ,GACI,4CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,2CAAA,CAEJ,IACI,2CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,2CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,wCAAA,CAEJ,IACI,yCAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,2CAAA,CAEJ,IACI,2CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,2CAAA,CAEJ,IACI,yCAAA,CAEJ,IACI,2CAAA,CAEJ,IACI,yCAAA,CAEJ,IACI,wCAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,2CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,yCAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,2CAAA,CAEJ,IACI,yCAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,yCAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,yCAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,4CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,yCAAA,CAEJ,IACI,yCAAA,CAEJ,IACI,0CAAA,CAEJ,IACI,2CAAA,CAEJ,MAEI,mCAAA,CAAA,CCtJR,SAKI,aAAA,CAHA,eAAA,CADA,iBAAA,CAEA,gBAAA,CACA,wBACA,CAEA,WACI,kBAAA,CAGJ,aAEI,WAAA,CADA,UACA,CAEA,sCAEI,SAAA,CAIR,wDAGI,eAAA,CADA,qBAAA,CAIA,MAAA,CAEA,QAAA,CACA,SAAA,CALA,cAAA,CAGA,KAAA,CAGA,sBAAA,CATA,oBAAA,CAIA,cAKA,CAiCA,0fACI,YAAA,CAEJ,sCACI,WAAA,CAKJ,yFACI,YAAA,CAEJ,8EACI,WAAA,CACA,iBAAA,CAEJ,uGACI,YAAA,CAGJ,8FACI,WAAA,CACA,4BAAA,CAGA,4HACI,WAAA,CACA,4BAAA,CAMR,yCACI,cAAA,CAEJ,sCACI,aAAA,CAKJ,gEACI,4BAAA,CAMJ,+FACI,SAAA,CAOA,2GACI,SAAA,CAMR,8DACI,aAAA,CAMJ,gLAEI,2BAAA,CAQJ,+GACI,SAAA,CAIR,wBAMI,qBAAA,CAHA,MAAA,CAFA,wBAAA,CAGA,KAAA,CACA,oBAAA,CAHA,cAIA,CAEA,gDACI,WAAA,CAIA,6IACI,mBAAA,CAMR,wDACI,WAAA,CAIA,6JACI,mBAAA,CAMR,4CACI,WAAA,CACA,2DAEI,kBAAA,CADA,eACA,CACA,0OAGI,YAAA,CAMJ,0LAEI,oBAAA,CADA,eACA,CAKZ,iDACI,+CAAA,CACA,WAAA,CAOA,6HACI,SAAA,CAKJ,yEACI,SAAA,CAEJ,oEACI,SAAA,CACA,0BAAA,CAIR,0CACI,WAAA,CACA,4DACI,YAAA,CAIR,kGACI,WAAA,CACA,4BAAA,CAIA,0EAEI,SAAA,CADA,iBACA,CAIR,kDAEI,UAAA,CADA,kBACA,CAMZ,4BAGI,MAAA,CACA,QAAA,CACA,SAAA,CAJA,cAAA,CACA,KAGA,CFjQJ,sBACI,0BAAA,CAGJ,6BACI,YAAA,CAGJ,4BAEI,8BAAA,CACA,6BAAA,CAFA,2BAEA,CAGJ,iDACI,yBAAA,CGjBJ,eAKI,QAAA,CAEA,UAAA,CADA,cAAA,CAJA,MAAA,CAMA,mBAAA,CAPA,iBAAA,CAEA,OAAA,CACA,KAIA,CACA,mCASI,oBAAA,CACA,iBAAA,CAFA,qBAAA,CAHA,WAAA,CAFA,QAAA,CACA,sBAAA,CAOA,SAAA,CAJA,YAAA,CAKA,mBAAA,CAXA,iBAAA,CACA,OAAA,CAIA,UAAA,CAOA,qBAAA,CACA,4DACI,+BAAA,CAEJ,sBACI,GACI,SAAA,CACA,kBAAA,CAEJ,GACI,SAAA,CACA,kBAAA,CAAA,CAIZ,mCAQI,yCAAA,CAFA,cAAA,CACA,gBAAA,CAJA,eAAA,CAFA,iBAAA,CAIA,iBAAA,CAHA,OAAA,CAEA,UAIA,CAEJ,qCACI,YAAA,CAKA,WAAA,CAFA,QAAA,CACA,sBAAA,CAGA,mBAAA,CANA,iBAAA,CACA,OAAA,CAIA,UACA,CACA,2DACI,YAAA,CAEJ,0DACI,oDAAA,CACA,SAAA,CACA,wBAAA,CACA,qBAAA,CAEI,gFACI,mBAAA,CADJ,gFACI,mBAAA,CADJ,gFACI,mBAAA,CADJ,gFACI,mBAAA,CADJ,gFACI,mBAAA,CADJ,gFACI,mBAAA,CADJ,gFACI,mBAAA,CAIZ,oCACI,GACI,UAAA,CACA,oBAAA,CAEJ,IACI,WAAA,CACA,mBAAA,CAEJ,GACI,WAAA,CACA,oBAAA,CAAA,CChFhB,yBAKI,+CAAA,CAFA,WAAA,CADA,UAIA,CAGJ,6CALI,QAAA,CAHA,iBAAA,CAKA,uBAYA,CATJ,oBAKI,WAAA,CAFA,MAAA,CAGA,cAAA,CAFA,OAAA,CAGA,gBAAA,CACA,wBACA,CAEI,8DACI,YAAA,CAEJ,kFACI,aAAA,CAGR,sCAOI,yCAAA,CAHA,WAAA,CAEA,cAAA,CAHA,UAAA,CAEA,cAAA,CAJA,iBAAA,CACA,uBAKA,CAGA,4CAEI,4BAAA,CAIA,QAAA,CACA,eAAA,CAHA,iBAAA,CACA,OAAA,CAGA,UAAA,CAGA,wFACI,kBAAA,CAEJ,+DACI,aAAA,CAIA,UAAA,CADA,OAAA,CADA,0BAAA,CADA,SAGA,CAGR,yDAOI,qBAAA,CADA,iBAAA,CADA,UAAA,CAHA,iBAAA,CAMA,iBAAA,CALA,OAAA,CAMA,0BAAA,CACA,8BAAA,CANA,SAAA,CAHA,UASA,CAEI,uFACI,aAAA,CAKJ,qKACI,SAAA,CAGR,iFAMI,0BAAA,CAEA,iBAAA,CADA,UAAA,CANA,YAAA,CAQA,cAAA,CANA,QAAA,CAEA,eAAA,CAHA,iBAAA,CAEA,SAAA,CAOA,0BAAA,CADA,kBACA,CAGR,2DAGI,iBAAA,CAEA,kBAAA,CACA,qCAAA,CAGA,2BAAA,CADA,4BAAA,CAJA,iBAAA,CAQA,8BAAA,CAXA,YAAA,CASA,yCAAA,CACA,2BAAA,CAJA,mBAAA,CALA,iBAUA,CAEJ,wDAeI,gBAAA,CANA,0BAAA,CAFA,iBAAA,CAGA,UAAA,CACA,cAAA,CANA,MAAA,CAQA,SAAA,CALA,iBAAA,CAUA,mBAAA,CAdA,iBAAA,CAQA,iBAAA,CANA,SAAA,CAQA,kCAAA,CAEA,iBAAA,CACA,SACA,CAjBA,+DACI,SAAA,CAkBR,mDAII,gBAAA,CACA,cAAA,CAHA,UAAA,CADA,iBAAA,CAEA,UAEA,CACA,mEAKI,eAAA,CAEA,uBACA,CAEJ,sIANI,QAAA,CAEA,UAAA,CAJA,MAAA,CADA,iBAAA,CAEA,KAAA,CAKA,iBAQA,CACA,kFAQI,iBAAA,CACA,cAAA,CAHA,WAAA,CADA,kBAAA,CADA,eAAA,CAHA,iBAAA,CAEA,SAAA,CADA,KAAA,CASA,kBAAA,CADA,8BAAA,CAHA,UAIA,CAKhB,mCAMI,yCAAA,CADA,QAAA,CAHA,WAAA,CAEA,kBAAA,CADA,eAAA,CAFA,iBAKA,CACA,uDAMI,QAAA,CAGA,UAAA,CARA,YAAA,CAIA,WAAA,CAEA,SAAA,CALA,iBAAA,CAMA,UAAA,CALA,8BAAA,CACA,SAKA,CACA,qEACI,WAAA,CAEJ,qFAEI,MAAA,CADA,iBAAA,CAEA,KAAA,CAEJ,0EACI,iBAAA,CACA,OAAA,CACA,KAAA,CACA,4FACI,QAAA,CAGR,8EASI,eAAA,CAPA,WAAA,CAMA,iBAAA,CAIA,qBAAA,CAEA,UAAA,CATA,mBAAA,CADA,cAAA,CAOA,WAAA,CALA,gBAAA,CAIA,QAAA,CATA,YAAA,CAEA,aAAA,CAIA,iBAAA,CAMA,UACA,CACA,2FACI,UAAA,CACA,UAAA,CAEJ,gGACI,QAAA,CAEJ,yFACI,YAAA,CAGR,wBACI,oFACI,qBAAA,CACA,mHACI,cAAA,CACA,gBAAA,CAGR,8EACI,cAAA,CAAA,CAKR,oEACI,WAAA,CAEJ,wBACI,oEACI,eAAA,CAAA,CAGR,wBACI,oEACI,eAAA,CAAA,CAIZ,uDACI,UAAA,CACA,qEACI,WAAA,CACA,wBACI,qEAEI,WAAA,CADA,UACA,CAAA,CAGR,wBACI,qEAEI,WAAA,CADA,UACA,CAAA,CAKhB,iDAEI,UAAA,CAIA,mBAAA,CADA,cAAA,CAJA,gBAAA,CAEA,6BAAA,CACA,qBAEA,CACA,wBACI,iDACI,cAAA,CAAA,CAIZ,uDAUI,kBAAA,CARA,UAAA,CAIA,cAAA,CAGA,mBAAA,CAFA,mBAAA,CAFA,cAAA,CAGA,WAAA,CAPA,gBAAA,CAEA,6BAAA,CACA,qBAMA,CAEJ,qDAOI,iBAAA,CADA,UAAA,CALA,oBAAA,CAEA,UAAA,CAEA,gBAAA,CADA,iBAAA,CAFA,SAKA,CAEJ,iDAII,sBAAA,CADA,WAAA,CAMA,qBAAA,CAFA,cAAA,CAGA,oBAAA,CARA,WAAA,CAGA,gBAAA,CACA,YAAA,CAEA,qBAAA,CAPA,UASA,CACA,uEAEI,UAAA,CADA,8BACA,CAGA,6EACI,SAAA,CAGR,mEACI,QAAA,CAEJ,sEACI,wBAAA,CACA,wBACI,sEACI,mBAAA,CAAA,CAGR,wBACI,sEACI,uBAAA,CAAA,CAIZ,qEACI,UAAA,CAEJ,qFACI,OAAA,CAEJ,wBACI,iDACI,UAAA,CAAA,CAIZ,mDAGI,cAAA,CADA,oBAAA,CAEA,WAAA,CAHA,iBAGA,CAEI,sGACI,UAAA,CAEJ,+IACI,kBAAA,CAIJ,sHACI,UAAA,CAEJ,+JACI,kBAAA,CAGR,4EACI,oBAAA,CAGA,WAAA,CAFA,oBAAA,CACA,qBACA,CACA,gGAKI,eAAA,CADA,UAAA,CAHA,iBAAA,CACA,QAAA,CAIA,8BAAA,CAHA,OAGA,CACA,0HAEI,QAAA,CAEA,WAAA,CADA,MAAA,CAFA,iBAAA,CAIA,uBAAA,CACA,iBAAA,CACA,yIAQI,iBAAA,CACA,cAAA,CAHA,WAAA,CADA,kBAAA,CADA,eAAA,CAHA,iBAAA,CAEA,SAAA,CADA,KAAA,CASA,kBAAA,CADA,8BAAA,CAHA,UAIA,CAUpB,6GACI,oBAAA,CACA,WAAA,CAEJ,iDACI,oBAAA,CACA,WAAA,CACA,iBAAA,CAEJ,oDACI,oBAAA,CACA,WAAA,CAKZ,0BAEI,kBAAA,CADA,YAAA,CAOA,WAAA,CALA,4BAAA,CAGA,QAAA,CAKA,SAAA,CAEA,mBAAA,CATA,iBAAA,CACA,OAAA,CAIA,8BAAA,CACA,wBAAA,CAEA,iBAAA,CALA,UAMA,CAEA,+CAKI,yCAAA,CADA,sBAAA,CADA,WAAA,CAIA,qBAAA,CACA,cAAA,CAFA,0CAAA,CAJA,WAAA,CAOA,YAAA,CACA,mBAAA,CATA,UASA,CAEA,+GACI,YAAA,CAKZ,qBAgBI,yCAAA,CARA,oBAAA,CADA,iBAAA,CAHA,WAAA,CAMA,qBAAA,CATA,YAAA,CAKA,wBAAA,CAQA,SAAA,CAHA,iBAAA,CACA,iBAAA,CAVA,iBAAA,CACA,UAAA,CAMA,wBAAA,CAIA,iBAAA,CARA,WAAA,CAUA,SACA,CACA,yBACI,iBAAA,CACA,sDACI,aAAA,CAGR,8CAEI,SAAA,CADA,kBACA,CAEJ,iDACI,uFAAA,CACA,+EACI,2BAAA,CAEJ,gFACI,aAAA,CACA,uBAAA,CAGR,+CACI,qFAAA,CACA,6EACI,2BAAA,CAEJ,4EACI,aAAA,CACA,uBAAA,CAGR,+CACI,2DAAA,CACA,6EACI,2BAAA,CAEJ,4EACI,aAAA,CACA,uBAAA,CAGR,oCAEI,UAAA,CADA,oBAAA,CAEA,cAAA,CACA,qBAAA,CACA,kBAAA,CAEJ,0CAII,aAAA,CAHA,oBAAA,CAIA,cAAA,CAHA,gBAAA,CACA,iBAAA,CAGA,qBAAA,CACA,kBAAA,CAEJ,qCAOI,WAAA,CAFA,WAAA,CAJA,iBAAA,CAEA,SAAA,CAGA,iBAAA,CAJA,OAAA,CAMA,qBAAA,CAJA,UAIA,CACA,2CAGI,YAAA,CAFA,YAAA,CACA,WACA,CAEJ,iDAUI,wBAAA,CAJA,kBAAA,CAGA,gCAAA,CAFA,qBAAA,CAIA,cAAA,CAVA,oBAAA,CAIA,WAAA,CAHA,iBAAA,CACA,UAAA,CAKA,oBAAA,CAJA,UAOA,CAEJ,wDAQI,kBAAA,CAPA,UAAA,CAEA,aAAA,CACA,WAAA,CAGA,UAAA,CALA,iBAAA,CAIA,SAAA,CAGA,oBAAA,CAJA,UAIA,CAEJ,uDASI,eAAA,CADA,kBAAA,CAGA,0BAAA,CAVA,UAAA,CACA,aAAA,CAEA,aAAA,CAGA,MAAA,CAJA,iBAAA,CAGA,SAAA,CAIA,oBAAA,CALA,YAMA,CAEJ,yDACI,+BAAA,CAEJ,gEAEI,6BAAA,CADA,UACA,CAEJ,+DACI,SAAA,CAGR,2MAKI,QAAA,CAKA,qBAAA,CAHA,eAAA,CAKA,eAAA,CAJA,aAAA,CAJA,iBAAA,CAOA,oBAAA,CAFA,8BAAA,CAHA,UAMA,CACA,uRACI,SAAA,CAEJ,+SACI,oBAAA,CAGR,mDACI,uBAAA,CAEJ,wJAGI,0BAAA,CACA,gOAEI,kBAAA,CAKA,iCAAA,CACA,qBAAA,CACA,cAAA,CARA,YAAA,CAEA,WAAA,CAGA,iBAAA,CADA,kBAAA,CADA,gBAKA,CAEJ,0sBAGI,WAAA,CACA,01BACI,iBAAA,CAEJ,00GAGI,kBAAA,CAGR,wMACI,oBAAA,CAGA,gBAAA,CAFA,eAAA,CACA,UACA,CAGR,gMAKI,kBAAA,CAGA,qBAAA,CACA,cAAA,CALA,YAAA,CAEA,WAAA,CACA,gBAAA,CAGA,iBAAA,CACA,wNACI,0BAAA,CAGR,8CACI,aAAA,CACA,6DAEI,cAAA,CADA,cACA,CAEJ,mEAEI,gBAAA,CADA,iBACA,CAGA,4IACI,YAAA,CAEJ,8EACI,oBAAA,CAIJ,8LACI,YAAA,CAEJ,uGACI,oBAAA,CAGR,wEAEI,qBAAA,CACA,YAAA,CAEA,WAAA,CAJA,cAAA,CAGA,qBAAA,CAEA,UAAA,CACA,6FAKI,eAAA,CADA,UAAA,CAHA,iBAAA,CACA,SAAA,CAIA,8BAAA,CAHA,UAGA,CACA,wHAEI,QAAA,CAEA,WAAA,CADA,MAAA,CAFA,iBAAA,CAIA,wBAAA,CACA,iBAAA,CACA,uIAQI,iBAAA,CACA,cAAA,CAHA,WAAA,CADA,kBAAA,CADA,eAAA,CAHA,iBAAA,CAEA,SAAA,CADA,KAAA,CAQA,8BAAA,CAHA,UAGA,CAQxB,6BAkBI,yCAAA,CAVA,oBAAA,CADA,iBAAA,CAJA,WAAA,CAYA,qBAAA,CATA,gCAAA,CAIA,cAAA,CARA,SAAA,CAGA,4BAAA,CASA,SAAA,CAEA,eAAA,CAPA,sBAAA,CARA,iBAAA,CAWA,oBAAA,CADA,wBAAA,CAEA,iBAAA,CATA,WAAA,CAaA,SACA,CACA,gDACI,SAAA,CAEJ,sDACI,oBAAA,CAEJ,0DAEI,SAAA,CADA,kBACA,CAEJ,+CACI,YAAA,CAEJ,mCACI,cAAA,CAEJ,4DAEI,UAAA,CADA,cAAA,CAEA,gBAAA,CAEJ,sHACI,WAAA,CACA,gLACI,cAAA,CAEJ,oLACI,iBAAA,CAII,sKACI,yBAAA,CAIJ,sKACI,yBAAA,CAIZ,gIAOI,qBAAA,CAEA,qBAAA,CAHA,UAAA,CAKA,cAAA,CAPA,oBAAA,CACA,cAAA,CAFA,gBAAA,CAKA,iBAAA,CANA,eAAA,CAQA,iBAAA,CATA,WAUA,CAEJ,4JACI,kBAAA,CACA,aAAA,CAGR,4DACI,WAAA,CACA,gGACI,YAAA,CACA,6BAAA,CACA,aAAA,CACA,sGACI,oBAAA,CACA,WAAA,CACA,aAAA,CAEJ,qGAII,iBAAA,CACA,qBAAA,CACA,cAAA,CALA,oBAAA,CAEA,WAAA,CADA,UAIA,CACA,2GACI,yCAAA,CCp0BpB,iBAQI,iBAAA,CAHA,QAAA,CAOA,UAAA,CADA,mBAAA,CADA,cAAA,CAPA,MAAA,CAMA,WAAA,CAFA,eAAA,CADA,cAAA,CAOA,eAAA,CAZA,iBAAA,CAGA,OAAA,CAFA,KAWA,CACA,uCAOI,cAAA,CANA,oBAAA,CAEA,0CAAA,CADA,eAAA,CAEA,sCAAA,CAMA,mBAAA,CAJA,qCAAA,CAEA,gBAAA,CACA,wBAAA,CAJA,kBAKA,CACA,6CACI,iBAAA,CACA,iBAAA,CAEJ,4CACI,0BAAA,CACA,kCAAA,CAEJ,gEACI,qDAAA,CAEJ,kEACI,mDAAA,CAGR,wCACI,iBAAA,CACA,OAAA,CACA,0BAAA,CACA,6DACI,sBAAA,CAEA,2BAAA,CADA,gCACA,CAGR,mBACI,GACI,0BAAA,CAAA,CAGR,+EAGI,QAAA,CADA,iBAAA,CAEA,0BAAA,CACA,iBAAA,CACA,yHACI,6BAAA,CAEA,2BAAA,CADA,gCACA,CAGR,0BACI,GACI,kBAAA,CAEJ,GACI,kBAAA,CAAA,CCxEZ,cAGI,SAAA,CAGA,eAAA,CADA,cAAA,CAJA,mBAAA,CACA,iBAAA,CAEA,QAEA,CACA,kBAGI,eAAA,CADA,eAAA,CADA,cAEA,CCVR,cAII,oBAAA,CADA,iBAAA,CAKA,YAAA,CAFA,eAAA,CADA,aAAA,CAJA,iBAAA,CACA,WAAA,CAKA,SACA,CACA,gCACI,aAAA,CAEJ,iCAEI,qBAAA,CACA,cAAA,CAFA,WAEA,CACA,uCACI,0BAAA,CAEJ,mCASI,qBAAA,CALA,UAAA,CAEA,oBAAA,CADA,cAAA,CAFA,gBAAA,CASA,eAAA,CAVA,cAAA,CASA,sBAAA,CAJA,qBAAA,CAGA,kBAAA,CAFA,UAIA,CACA,yCACI,oBAAA,CCjChB,gBAOI,oBAAA,CADA,iBAAA,CAJA,WAAA,CAMA,UAAA,CACA,cAAA,CANA,SAAA,CAOA,eAAA,CALA,iBAAA,CAOA,SAAA,CACA,eAAA,CATA,iBAAA,CAUA,mBAAA,CAbA,iBAAA,CAUA,uCAGA,CAEJ,wBACI,gBAEI,qBAAA,CADA,QACA,CAAA,CCnBR,kBAEI,WAAA,CAIA,UAAA,CAEA,cAAA,CAJA,OAAA,CAHA,iBAAA,CAIA,iBAAA,CAEA,oCAAA,CAJA,SAKA,CACA,wCACI,YAAA,CCVR,cAGI,QAAA,CAIA,YAAA,CAHA,MAAA,CAHA,iBAAA,CAIA,OAAA,CAHA,KAAA,CAIA,SACA,CACA,gCACI,aAAA,CAIR,oBAGI,kBAAA,CAEA,eAAA,CAJA,YAAA,CAKA,WAAA,CAEA,WAAA,CAJA,sBAAA,CAFA,iBAAA,CAKA,UACA,CAEA,+CAII,iBAAA,CADA,eAAA,CADA,cAAA,CAGA,eAAA,CAJA,iBAIA,CAEA,8DAII,YAAA,CADA,eAAA,CADA,cAAA,CADA,aAGA,CAEJ,sEACI,aAAA,CAEJ,sEACI,YAAA,CCxCZ,oBAKI,oBAAA,CAIA,iBAAA,CAFA,UAAA,CACA,cAAA,CALA,SAAA,CAGA,YAAA,CALA,iBAAA,CACA,QAAA,CAEA,WAKA,CAEA,yBACI,YAAA,CAGJ,8CACI,cAAA,CACA,iBAAA,CACA,UAAA,CACA,QAAA,CAIA,kDACI,oBAAA,CAEA,gBAAA,CAGA,eAAA,CADA,sBAAA,CAHA,qBAAA,CAEA,kBAEA,CAIR,mDAGI,iBAAA,CADA,gBAAA,CADA,WAEA,CAGJ,kDACI,WAAA",sourcesContent:[`@import '../../node_modules/balloon-css/balloon.css';

.dplayer [aria-label] {
    --balloon-font-size: 11.5px;
}

.dplayer [aria-label]:before {
    display: none;
}

.dplayer [aria-label]:after {
    padding: .3em .8em !important;
    background: rgba(17, 17, 17, 0.7) !important;
    font-family: inherit !important;
}

.dplayer [aria-label][data-balloon-pos="up"]:after {
    margin-bottom: 0 !important;
}
`,`@keyframes my-face {
    2% {
        transform: translate(0, 1.5px) rotate(1.5deg);
    }
    4% {
        transform: translate(0, -1.5px) rotate(-0.5deg);
    }
    6% {
        transform: translate(0, 1.5px) rotate(-1.5deg);
    }
    8% {
        transform: translate(0, -1.5px) rotate(-1.5deg);
    }
    10% {
        transform: translate(0, 2.5px) rotate(1.5deg);
    }
    12% {
        transform: translate(0, -0.5px) rotate(1.5deg);
    }
    14% {
        transform: translate(0, -1.5px) rotate(1.5deg);
    }
    16% {
        transform: translate(0, -0.5px) rotate(-1.5deg);
    }
    18% {
        transform: translate(0, 0.5px) rotate(-1.5deg);
    }
    20% {
        transform: translate(0, -1.5px) rotate(2.5deg);
    }
    22% {
        transform: translate(0, 0.5px) rotate(-1.5deg);
    }
    24% {
        transform: translate(0, 1.5px) rotate(1.5deg);
    }
    26% {
        transform: translate(0, 0.5px) rotate(0.5deg);
    }
    28% {
        transform: translate(0, 0.5px) rotate(1.5deg);
    }
    30% {
        transform: translate(0, -0.5px) rotate(2.5deg);
    }
    32% {
        transform: translate(0, 1.5px) rotate(-0.5deg);
    }
    34% {
        transform: translate(0, 1.5px) rotate(-0.5deg);
    }
    36% {
        transform: translate(0, -1.5px) rotate(2.5deg);
    }
    38% {
        transform: translate(0, 1.5px) rotate(-1.5deg);
    }
    40% {
        transform: translate(0, -0.5px) rotate(2.5deg);
    }
    42% {
        transform: translate(0, 2.5px) rotate(-1.5deg);
    }
    44% {
        transform: translate(0, 1.5px) rotate(0.5deg);
    }
    46% {
        transform: translate(0, -1.5px) rotate(2.5deg);
    }
    48% {
        transform: translate(0, -0.5px) rotate(0.5deg);
    }
    50% {
        transform: translate(0, 0.5px) rotate(0.5deg);
    }
    52% {
        transform: translate(0, 2.5px) rotate(2.5deg);
    }
    54% {
        transform: translate(0, -1.5px) rotate(1.5deg);
    }
    56% {
        transform: translate(0, 2.5px) rotate(2.5deg);
    }
    58% {
        transform: translate(0, 0.5px) rotate(2.5deg);
    }
    60% {
        transform: translate(0, 2.5px) rotate(2.5deg);
    }
    62% {
        transform: translate(0, -0.5px) rotate(2.5deg);
    }
    64% {
        transform: translate(0, -0.5px) rotate(1.5deg);
    }
    66% {
        transform: translate(0, 1.5px) rotate(-0.5deg);
    }
    68% {
        transform: translate(0, -1.5px) rotate(-0.5deg);
    }
    70% {
        transform: translate(0, 1.5px) rotate(0.5deg);
    }
    72% {
        transform: translate(0, 2.5px) rotate(1.5deg);
    }
    74% {
        transform: translate(0, -0.5px) rotate(0.5deg);
    }
    76% {
        transform: translate(0, -0.5px) rotate(2.5deg);
    }
    78% {
        transform: translate(0, -0.5px) rotate(1.5deg);
    }
    80% {
        transform: translate(0, 1.5px) rotate(1.5deg);
    }
    82% {
        transform: translate(0, -0.5px) rotate(0.5deg);
    }
    84% {
        transform: translate(0, 1.5px) rotate(2.5deg);
    }
    86% {
        transform: translate(0, -1.5px) rotate(-1.5deg);
    }
    88% {
        transform: translate(0, -0.5px) rotate(2.5deg);
    }
    90% {
        transform: translate(0, 2.5px) rotate(-0.5deg);
    }
    92% {
        transform: translate(0, 0.5px) rotate(-0.5deg);
    }
    94% {
        transform: translate(0, 2.5px) rotate(0.5deg);
    }
    96% {
        transform: translate(0, -0.5px) rotate(1.5deg);
    }
    98% {
        transform: translate(0, -1.5px) rotate(-0.5deg);
    }
    0%,
    100% {
        transform: translate(0, 0) rotate(0deg);
    }
}
`,`.dplayer {
    position: relative;
    overflow: hidden;
    user-select: none;
    -webkit-user-select: none;
    line-height: 1;

    * {
        box-sizing: content-box;
    }

    svg {
        width: 100%;
        height: 100%;

        path,
        circle {
            fill: #fff;
        }
    }

    &.dplayer-fulled, &.dplayer-fulled-browser {
        width: 100% !important;
        height: 100% !important;
        background: #000;
        position: fixed;
        z-index: 100000;
        left: 0;
        top: 0;
        margin: 0;
        padding: 0;
        transform: translate(0, 0);
    }

    &.dplayer-no-danmaku {
        .dplayer-setting-box {
            .dplayer-setting-showdan,
            .dplayer-setting-danmaku,
            .dplayer-setting-danunlimit {
                display: none;
            }
        }

        .dplayer-controller .dplayer-icons .dplayer-comment {
            display: none;
        }

        .dplayer-danmaku {
            display: none;
        }
    }

    &.dplayer-no-audio-switching {
        .dplayer-setting-box {
            .dplayer-setting-audio {
                display: none;
            }
        }
    }

    &.dplayer-live {
        .dplayer-time {
            display: none;
        }
        .dplayer-bar-wrap {
            display: none;
        }
        .dplayer-notice {
            bottom: 56px;
        }
        .dplayer-setting-speed {
            display: none;
        }
        .dplayer-setting-loop {
            display: none;
        }
        .dplayer-controller .dplayer-icons .dplayer-setting-box {
            height: auto;
            overflow-y: hidden;
        }
        .dplayer-mobile-icon-backward, .dplayer-mobile-icon-forward {
            display: none;
        }

        .dplayer-setting-box, .dplayer-comment-setting-box {
            bottom: 58px;
            max-height: calc(100% - 58px - 8px);
        }
        &.dplayer-mobile {
            .dplayer-setting-box, .dplayer-comment-setting-box {
                bottom: 52px;
                max-height: calc(100% - 52px - 8px);
            }
        }
    }

    &.dplayer-narrow {
        .dplayer-danmaku {
            font-size: 18px;
        }
        .dplayer-icon {
            margin: 0 -3px;
        }
    }

    &.dplayer-playing {
        .dplayer-danmaku .dplayer-danmaku-move {
            animation-play-state: running;
        }

        .dplayer-controller-mask {
            opacity: 0;
        }
        .dplayer-controller {
            opacity: 0;
        }

        &:hover {
            .dplayer-controller-mask {
                opacity: 1;
            }
            .dplayer-controller {
                opacity: 1;
            }
        }
    }

    &.dplayer-loading {
        .dplayer-bezel .dplayer-loading-icon {
            display: block;
        }
    }

    &.dplayer-loading,
    &.dplayer-paused {
        .dplayer-danmaku,
        .dplayer-danmaku-move {
            animation-play-state: paused;
        }
    }

    &.dplayer-show-controller {
        .dplayer-controller-mask {
            opacity: 1;
        }
        .dplayer-controller {
            opacity: 1;
        }
    }

    &.dplayer-fulled {
        position: fixed !important;
        z-index: 100000;
        left: 0;
        top: 0;
        width: 100% !important;
        height: 100% !important;

        &.dplayer-hide-controller {
            cursor: none;
            .dplayer-controller-mask {
                opacity: 0 !important;
            }
            .dplayer-controller {
                opacity: 0 !important;
            }
        }
    }

    &.dplayer-fulled-browser {
        &.dplayer-hide-controller {
            cursor: none;
            .dplayer-controller-mask {
                opacity: 0 !important;
            }
            .dplayer-controller {
                opacity: 0 !important;
            }
        }
    }

    &.dplayer-mobile {
        .dplayer-controller {
            height: 44px;
            .dplayer-icons {
                padding-top: 3px;
                padding-bottom: 3px;
                .dplayer-volume,
                .dplayer-airplay-icon,
                .dplayer-play-icon {
                    display: none;
                }
                .dplayer-full .dplayer-full-in-icon {
                    position: static;
                    display: inline-block;
                }
                .dplayer-full .dplayer-pip-icon {
                    position: static;
                    display: inline-block;
                }
            }
        }

        .dplayer-controller-mask {
            background: linear-gradient(rgba(0, 0, 0, 0.55) 78%, rgba(0, 0, 0, 0.8) 100%);
            height: 100%;
        }

        &.dplayer-playing {
            .dplayer-controller-mask {
                opacity: 1;
            }
            .dplayer-controller {
                opacity: 1;
            }
        }

        &.dplayer-hide-controller {
            .dplayer-controller-mask {
                opacity: 0;
            }
            .dplayer-controller {
                opacity: 0;
                transform: translateY(100%);
            }
        }

        .dplayer-bar-wrap {
            bottom: 35px;
            .dplayer-bar-time {
                display: none;
            }
        }

        .dplayer-setting-box, .dplayer-comment-setting-box {
            bottom: 58px;
            max-height: calc(100% - 58px - 8px);
        }

        &.dplayer-hide-controller {
            .dplayer-mobile-icon-wrap {
                visibility: hidden;
                opacity: 0;
            }
        }

        .dplayer-mobile-icon-wrap {
            visibility: visible;
            opacity: 0.7;
        }
    }
}

// To hide scroll bar, apply this class to <body>
.dplayer-web-fullscreen-fix {
    position: fixed;
    top: 0;
    left: 0;
    margin: 0;
    padding: 0;
}
`,`.dplayer-bezel {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    font-size: 22px;
    color: #fff;
    pointer-events: none;
    .dplayer-bezel-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        margin: -26px 0 0 -26px;
        height: 52px;
        width: 52px;
        padding: 12px;
        box-sizing: border-box;
        background: rgba(0, 0, 0, .5);
        border-radius: 50%;
        opacity: 0;
        pointer-events: none;
        will-change: transform;
        &.dplayer-bezel-transition {
            animation: bezel-hide .5s linear;
        }
        @keyframes bezel-hide {
            from {
                opacity: 1;
                transform: scale(1);
            }
            to {
                opacity: 0;
                transform: scale(2);
            }
        }
    }
    .dplayer-danloading {
        position: absolute;
        top: 50%;
        margin-top: -7px;
        width: 100%;
        text-align: center;
        font-size: 14px;
        line-height: 14px;
        animation: my-face 5s infinite ease-in-out;
    }
    .dplayer-loading-icon {
        display: none;
        position: absolute;
        top: 50%;
        left: 50%;
        margin: -18px 0 0 -18px;
        height: 36px;
        width: 36px;
        pointer-events: none;
        .dplayer-loading-hide {
            display: none;
        }
        .dplayer-loading-dot {
            animation: dplayer-loading-dot-fade .8s ease infinite;
            opacity: 0;
            transform-origin: 4px 4px;
            will-change: transform;
            @for $i from 7 through 1 {
                &.dplayer-loading-dot-#{$i} {
                    animation-delay: .1s * $i;
                }
            }
        }
        @keyframes dplayer-loading-dot-fade {
            0% {
                opacity: .7;
                transform: scale(1.2, 1.2);
            }
            50% {
                opacity: .25;
                transform: scale(.9, .9);
            }
            to {
                opacity: .25;
                transform: scale(.85, .85);
            }
        }
    }
}
`,`
.dplayer-controller-mask {
    position: absolute;
    width: 100%;
    height: 98px;
    bottom: 0;
    background: linear-gradient(rgba(0, 0, 0, 0.0) 15%, rgba(0, 0, 0, 0.7) 100%);
    transition: all 0.3s ease;
}

.dplayer-controller {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 50px;
    padding: 0 20px;
    user-select: none;
    -webkit-user-select: none;
    transition: all 0.3s ease;
    &.dplayer-controller-comment {
        .dplayer-icons {
            display: none;
        }
        .dplayer-icons.dplayer-comment-box {
            display: block;
        }
    }
    .dplayer-bar-wrap {
        position: absolute;
        width: calc(100% - 40px);
        height: 3px;
        bottom: 41px;
        padding: 10px 0;
        cursor: pointer;
        -webkit-tap-highlight-color: transparent;
        // for preload thumbnails
        // ref: https://stackoverflow.com/a/14390213/17124142
        &:after {
            // load thumbnails (if exists)
            content: var(--thumbnail-url);
            // hide the element
            position: absolute;
            width: 0;
            height: 0;
            overflow: hidden;
            z-index: -1;
        }
        &:hover {
            .dplayer-bar .dplayer-played .dplayer-thumb {
                transform: scale(1);
            }
            .dplayer-highlight {
                display: block;
                width: 8px;
                transform: translateX(-4px);
                top: 4px;
                height: 40%;
            }
        }
        .dplayer-highlight {
            z-index: 12;
            position: absolute;
            top: 5px;
            width: 6px;
            height: 20%;
            border-radius: 6px;
            background-color: #fff;
            text-align: center;
            transform: translateX(-3px);
            transition: all .2s ease-in-out;
            &:hover {
                .dplayer-highlight-text {
                    display: block;
                }
                &~.dplayer-bar-preview {
                    opacity: 0;
                }
                &~.dplayer-bar-time {
                    opacity: 0;
                }
            }
            .dplayer-highlight-text {
                display: none;
                position: absolute;
                left: 50%;
                top: -24px;
                padding: 5px 8px;
                background-color: rgba(0, 0, 0, .62);
                color: #fff;
                border-radius: 4px;
                font-size: 12px;
                white-space: nowrap;
                transform: translateX(-50%);
            }
        }
        .dplayer-bar-preview {
            display: none;
            position: absolute;
            aspect-ratio: 16 / 9;
            border-radius: 6px;
            background: #131313;
            background-image: var(--thumbnail-url);
            pointer-events: none;
            background-size: 16000px 100%;
            background-repeat: no-repeat;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.3);
        }
        .dplayer-bar-time {
            &.hidden {
                opacity: 0;
            }
            position: absolute;
            left: 0px;
            top: -22px;
            border-radius: 4px;
            padding: 6.5px 7px;
            background-color: rgba(31, 31, 31, 0.85);
            color: #fff;
            font-size: 12px;
            text-align: center;
            opacity: 1;
            transition: opacity .1s ease-in-out;
            word-wrap: normal;
            word-break: normal;
            z-index: 2;
            pointer-events: none;
        }
        .dplayer-bar {
            position: relative;
            height: 4px;
            width: 100%;
            background: rgba(255, 255, 255, .2);
            cursor: pointer;
            .dplayer-loaded {
                position: absolute;
                left: 0;
                top: 0;
                bottom: 0;
                background: #fff;
                height: 4px;
                transition: all 0.5s ease;
                will-change: width;
            }
            .dplayer-played {
                position: absolute;
                left: 0;
                top: 0;
                bottom: 0;
                height: 4px;
                will-change: width;
                .dplayer-thumb {
                    position: absolute;
                    top: 0;
                    right: 5px;
                    margin-top: -4px;
                    margin-right: -10px;
                    height: 11px;
                    width: 11px;
                    border-radius: 50%;
                    cursor: pointer;
                    transition: all .3s ease-in-out;
                    transform: scale(0);
                }
            }
        }
    }
    .dplayer-icons {
        position: absolute;
        height: 38px;
        padding-top: 6px;
        padding-bottom: 6px;
        bottom: 0;
        -webkit-tap-highlight-color: transparent;
        &.dplayer-comment-box {
            display: none;
            position: absolute;
            transition: all .3s ease-in-out;
            z-index: 2;
            height: 38px;
            bottom: 0;
            left: 20px;
            right: 20px;
            color: #fff;
            .dplayer-icon {
                padding: 7px;
            }
            .dplayer-comment-setting-icon {
                position: absolute;
                left: 0;
                top: 0;
            }
            .dplayer-send-icon {
                position: absolute;
                right: 0;
                top: 0;
                &[aria-label]:after {
                    left: 14%;
                }
            }
            .dplayer-comment-input {
                outline: none;
                border: none;
                padding: 8px 0px;
                font-size: 14px;
                font-family: inherit;
                line-height: 18px;
                text-align: center;
                border-radius: 4px;
                background: none;
                margin: 0;
                height: 100%;
                box-sizing: border-box;
                width: 100%;
                color: #fff;
                &::placeholder {
                    color: #fff;
                    opacity: 0.8;
                }
                &::-moz-focus-inner {
                    border: 0;
                }
                &::-ms-clear {
                    display: none;
                }
            }
            @media (max-width: 350px){
                .dplayer-comment-setting-box {
                    padding: 9px 10px 15px;
                    .dplayer-comment-setting-title {
                        font-size: 12px;
                        line-height: 24px;
                    }
                }
                .dplayer-comment-input {
                    font-size: 12px;
                }
            }
        }
        &.dplayer-icons-left {
            .dplayer-icon {
                padding: 7px;
            }
            @media (max-width: 500px){
                .dplayer-icon {
                    padding-top: 6px;
                }
            }
            @media (max-width: 350px){
                .dplayer-icon {
                    padding-top: 7px;
                }
            }
        }
        &.dplayer-icons-right {
            right: 20px;
            .dplayer-icon {
                padding: 8px;
                @media (max-width: 500px){
                    & {
                        width: 38px;
                        padding: 7px;
                    }
                }
                @media (max-width: 350px){
                    & {
                        width: 31px;
                        padding: 5px;
                    }
                }
            }
        }
        .dplayer-time {
            line-height: 38px;
            color: #eee;
            text-shadow: 0 0 2px rgba(0, 0, 0, .5);
            vertical-align: middle;
            font-size: 13px;
            font-family: inherit;
            @media (max-width: 350px){
                & {
                    font-size: 12px;
                }
            }
        }
        .dplayer-live-badge {
            line-height: 18px;
            color: #eee;
            text-shadow: 0 0 2px rgba(0, 0, 0, .5);
            vertical-align: middle;
            font-size: 13px;
            cursor: pointer;
            font-family: inherit;
            height: 100%;
            display: inline-flex;
            align-items: center;
        }
        .dplayer-live-dot {
            display: inline-block;
            width: 6px;
            height: 6px;
            vertical-align: 4%;
            margin-right: 5px;
            content: '';
            border-radius: 6px;
        }
        .dplayer-icon {
            width: 40px;
            height: 100%;
            border: none;
            background-color: transparent;
            line-height: 18px;
            outline: none;
            cursor: pointer;
            vertical-align: middle;
            box-sizing: border-box;
            display: inline-block;
            .dplayer-icon-content {
                transition: all .2s ease-in-out;
                opacity: .8;
            }
            &:hover {
                .dplayer-icon-content {
                    opacity: 1;
                }
            }
            &::-moz-focus-inner {
                border: 0;
            }
            &.dplayer-comment-icon {
                padding: 10.5px 9.5px 8px;
                @media (max-width: 500px){
                    & {
                        padding: 9px 9px 8px;
                    }
                }
                @media (max-width: 350px){
                    & {
                        padding: 6.5px 6.5px 6px;
                    }
                }
            }
            &.dplayer-volume-icon {
                width: 43px;
            }
            &.dplayer-full-icon[aria-label]:after {
                left: 1%;
            }
            @media (max-width: 350px){
                & {
                    width: 35px;
                }
            }
        }
        .dplayer-volume {
            position: relative;
            display: inline-block;
            cursor: pointer;
            height: 100%;
            &:hover {
                .dplayer-volume-bar-wrap .dplayer-volume-bar {
                    width: 45px;
                }
                .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb {
                    transform: scale(1);
                }
            }
            &.dplayer-volume-active {
                .dplayer-volume-bar-wrap .dplayer-volume-bar {
                    width: 45px;
                }
                .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb {
                    transform: scale(1);
                }
            }
            .dplayer-volume-bar-wrap {
                display: inline-block;
                margin: 0 10px 0 -5px;
                vertical-align: middle;
                height: 100%;
                .dplayer-volume-bar {
                    position: relative;
                    top: 17px;
                    width: 0;
                    height: 4px;
                    background: #FFF;
                    transition: all 0.3s ease-in-out;
                    .dplayer-volume-bar-inner {
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        height: 100%;
                        transition: all 0.1s ease;
                        will-change: width;
                        .dplayer-thumb {
                            position: absolute;
                            top: 0;
                            right: 5px;
                            margin-top: -4px;
                            margin-right: -10px;
                            height: 11px;
                            width: 11px;
                            border-radius: 50%;
                            cursor: pointer;
                            transition: all .3s ease-in-out;
                            transform: scale(0);
                        }
                    }
                }
            }
        }
        .dplayer-subtitle-btn {
            display: inline-block;
            height: 100%;
        }
        .dplayer-setting {
            display: inline-block;
            height: 100%;
        }
        .dplayer-full {
            display: inline-block;
            height: 100%;
            position: relative;
        }
        .dplayer-comment {
            display: inline-block;
            height: 100%;
        }
    }
}

.dplayer-mobile-icon-wrap {
    display: flex;
    align-items: center;
    justify-content: space-evenly;
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 50px;
    transform: translate(-50%, -50%);
    transition: all 0.28s ease;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;

    .dplayer-mobile-icon {
        width: 50px;
        height: 50px;
        border: none;
        background-color: transparent;
        -webkit-tap-highlight-color: transparent;
        filter: drop-shadow(0 0 7px rgba(0, 0, 0, 0.5));
        box-sizing: border-box;
        cursor: pointer;
        outline: none;
        pointer-events: auto;

        &-backward, &-forward {
            padding: 12px;
        }
    }
}

.dplayer-setting-box {
    display: flex;
    position: absolute;
    right: 20px;
    bottom: 64px;
    width: 210px;
    height: calc(100% - 64px - 8px);
    border-radius: 7px;
    background: rgba(28, 28, 28, 0.9);
    transition: all .25s ease;
    box-sizing: border-box;
    overflow-x: hidden;
    overflow-y: hidden;
    visibility: hidden;
    opacity: 0;
    z-index: 2;
    -webkit-tap-highlight-color: transparent;
    &>div {
        overflow-x: hidden;
        &.dplayer-setting-origin-panel {
            display: block;
        }
    }
    &.dplayer-setting-box-open {
        visibility: visible;
        opacity: 1;
    }
    &.dplayer-setting-box-quality {
        clip-path: inset(calc(100% - (30px * var(--quality-length)) - 54px) 0 0 round 7px) !important;
        .dplayer-setting-origin-panel {
            transform: translateX(-100%);
        }
        .dplayer-setting-quality-panel {
            display: block;
            transform: translateX(0%);
        }
    }
    &.dplayer-setting-box-speed {
        clip-path: inset(calc(100% - (30px * var(--speed-length)) - 54px) 0 0 round 7px) !important;
        .dplayer-setting-origin-panel {
            transform: translateX(-100%);
        }
        .dplayer-setting-speed-panel {
            display: block;
            transform: translateX(0%);
        }
    }
    &.dplayer-setting-box-audio {
        clip-path: inset(calc(100% - 114px) 0 0 round 7px) !important;
        .dplayer-setting-origin-panel {
            transform: translateX(-100%);
        }
        .dplayer-setting-audio-panel {
            display: block;
            transform: translateX(0%);
        }
    }
    .dplayer-label {
        display: inline-block;
        color: #eee;
        font-size: 13px;
        vertical-align: middle;
        white-space: nowrap;
    }
    .dplayer-label-value {
        display: inline-block;
        margin-left: auto;
        margin-right: 23px;
        color: #e0e0e0;
        font-size: 12px;
        vertical-align: middle;
        white-space: nowrap;
    }
    .dplayer-toggle {
        position: absolute;
        top: 5px;
        right: 7px;
        width: 20px;
        height: 20px;
        text-align: center;
        font-size: 0;
        vertical-align: middle;
        input {
            max-height: 0;
            max-width: 0;
            display: none;
        }
        input+label {
            display: inline-block;
            position: relative;
            right: 15px;
            width: 32px;
            height: 20px;
            border-radius: 10px;
            box-sizing: border-box;
            transition: .25s ease;
            box-shadow: rgb(223, 223, 223) 0 0 0 0 inset;
            border: 1px solid rgb(223, 223, 223);
            cursor: pointer;
        }
        input+label:before {
            content: "";
            position: absolute;
            display: block;
            height: 19px;
            width: 19px;
            top: -0.5px;
            left: -0.5px;
            border-radius: 15px;
            transition: .25s ease;
        }
        input+label:after {
            content: "";
            display: block;
            position: absolute;
            height: 18.1px;
            width: 18.1px;
            top: -0.1px;
            left: 0;
            border-radius: 15px;
            background: #fff;
            transition: .25s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
        }
        input:checked+label {
            border-color: var(--theme-color);
        }
        input:checked+label:before {
            width: 31px;
            background: var(--theme-color);
        }
        input:checked+label:after {
            left: 12px;
        }
    }
    .dplayer-setting-origin-panel,
    .dplayer-setting-quality-panel,
    .dplayer-setting-speed-panel,
    .dplayer-setting-audio-panel {
        position: absolute;
        bottom: 0px;
        width: 100%;
        max-height: 100%;
        padding: 7px 0;
        transition: transform .25s ease;
        box-sizing: border-box;
        scrollbar-width: thin;
        overflow-y: auto;
        &::-webkit-scrollbar {
            width: 6px;
        }
        &::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, .15);
        }
    }
    .dplayer-setting-origin-panel {
        transform: translateX(0%);
    }
    .dplayer-setting-quality-panel,
    .dplayer-setting-speed-panel,
    .dplayer-setting-audio-panel {
        transform: translateX(100%);
        .dplayer-setting-header {
            display: flex;
            align-items: center;
            height: 33px;
            padding-left: 5px;
            padding-bottom: 5px;
            margin-bottom: 7px;
            border-bottom: 2px solid rgba(255, 255, 255, .15);
            box-sizing: border-box;
            cursor: pointer;
        }
        .dplayer-setting-quality-item,
        .dplayer-setting-speed-item,
        .dplayer-setting-audio-item {
            padding: 5px;
            .dplayer-toggle {
                visibility: hidden;
            }
            &.dplayer-setting-quality-current .dplayer-toggle,
            &.dplayer-setting-speed-current .dplayer-toggle,
            &.dplayer-setting-audio-current .dplayer-toggle {
                visibility: visible;
            }
        }
        .dplayer-toggle {
            display: inline-block;
            position: static;
            width: 22px;
            margin-right: 6px;
        }
    }
    .dplayer-setting-item,
    .dplayer-setting-quality-item,
    .dplayer-setting-speed-item,
    .dplayer-setting-audio-item {
        display: flex;
        align-items: center;
        height: 30px;
        padding: 5px 10px;
        box-sizing: border-box;
        cursor: pointer;
        position: relative;
        &:hover {
            background-color: rgba(255, 255, 255, .1);
        }
    }
    .dplayer-setting-danmaku {
        padding: 5px 0;
        .dplayer-label {
            padding: 0 10px;
            display: inline;
        }
        .dplayer-label-value {
            margin-right: 18px;
            font-size: 12.5px;
        }
        &:hover {
            .dplayer-label, .dplayer-label-value {
                display: none;
            }
            .dplayer-danmaku-bar-wrap {
                display: inline-block;
            }
        }
        &.dplayer-setting-danmaku-active {
            .dplayer-label, .dplayer-label-value {
                display: none;
            }
            .dplayer-danmaku-bar-wrap {
                display: inline-block;
            }
        }
        .dplayer-danmaku-bar-wrap {
            padding: 0 10px;
            box-sizing: border-box;
            display: none;
            vertical-align: middle;
            height: 100%;
            width: 100%;
            .dplayer-danmaku-bar {
                position: relative;
                top: 8.5px;
                width: 100%;
                height: 3px;
                background: #fff;
                transition: all 0.3s ease-in-out;
                .dplayer-danmaku-bar-inner {
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    height: 100%;
                    transition: all 0.05s ease;
                    will-change: width;
                    .dplayer-thumb {
                        position: absolute;
                        top: 0;
                        right: 5px;
                        margin-top: -4px;
                        margin-right: -10px;
                        height: 11px;
                        width: 11px;
                        border-radius: 50%;
                        cursor: pointer;
                        transition: all .3s ease-in-out;
                    }
                }
            }
        }
    }
}

.dplayer-comment-setting-box {
    position: absolute;
    left: 20px;
    bottom: 64px;
    width: 255px;
    max-height: calc(100% - 64px - 8px);
    clip-path: inset(0 0 0 round 7px);
    border-radius: 7px;
    background: rgba(28, 28, 28, 0.9);
    padding: 10px 10px 16px;
    font-size: 14px;
    transition: all .25s ease;
    scrollbar-width: thin;
    visibility: hidden;
    opacity: 0;
    box-sizing: border-box;
    overflow-y: auto;
    z-index: 2;
    -webkit-tap-highlight-color: transparent;
    &::-webkit-scrollbar {
        width: 6px;
    }
    &::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, .15);
    }
    &.dplayer-comment-setting-open {
        visibility: visible;
        opacity: 1;
    }
    input[type=radio] {
        display: none;
    }
    label {
        cursor: pointer;
    }
    .dplayer-comment-setting-title {
        font-size: 13px;
        color: #fff;
        line-height: 30px;
    }
    .dplayer-comment-setting-type, .dplayer-comment-setting-size {
        font-size: 0;
        &.dplayer-comment-setting-size {
            margin-top: 8px;
        }
        .dplayer-comment-setting-title {
            margin-bottom: 6px;
        }
        label {
            &:nth-child(2) {
                span {
                    border-radius: 4px 0 0 4px;
                }
            }
            &:nth-child(4) {
                span {
                    border-radius: 0 4px 4px 0;
                }
            }
        }
        span {
            width: 33.6%;
            padding: 4px 6px;
            line-height: 16px;
            display: inline-block;
            font-size: 12px;
            color: #fff;
            border: 1px solid #fff;
            margin-right: -1px;
            box-sizing: border-box;
            text-align: center;
            cursor: pointer;
        }
        input:checked+span {
            background: #E4E4E6;
            color: #1c1c1c;
        }
    }
    .dplayer-comment-setting-color {
        font-size: 0;
        .dplayer-comment-setting-color-list {
            display: flex;
            justify-content: space-between;
            padding: 4px 0px;
            label {
                display: inline-block;
                font-size: 0;
                padding: 6px 0px;
            }
            span {
                display: inline-block;
                width: 22px;
                height: 22px;
                border-radius: 50%;
                box-sizing: border-box;
                cursor: pointer;
                &:hover {
                    animation: my-face 5s infinite ease-in-out;
                }
            }
        }
    }
}
`,`.dplayer-danmaku {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    max-width: 100%;
    max-height: 100%;
    aspect-ratio: 16/9;
    margin: auto;
    font-size: 29px;
    font-family: inherit;
    color: #fff;
    overflow: hidden;
    .dplayer-danmaku-item {
        display: inline-block;
        font-weight: bold;
        font-size: var(--dplayer-danmaku-font-size);
        opacity: var(--dplayer-danmaku-opacity);
        white-space: nowrap;
        text-shadow: 1.2px 1.2px 4px rgba(0, 0, 0, 0.9);
        cursor: default;
        user-select: none;
        -webkit-user-select: none;
        pointer-events: none;
        &--demo {
            position: absolute;
            visibility: hidden;
        }
        span {
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }
        &.dplayer-danmaku-size-big {
            font-size: calc(var(--dplayer-danmaku-font-size) * 1.25);
        }
        &.dplayer-danmaku-size-small {
            font-size: calc(var(--dplayer-danmaku-font-size) * 0.8);
        }
    }
    .dplayer-danmaku-right {
        position: absolute;
        right: 0;
        transform: translateX(100%);
        &.dplayer-danmaku-move {
            animation-name: danmaku;
            animation-timing-function: linear;
            animation-play-state: paused;
        }
    }
    @keyframes danmaku {
        from {
            transform: translateX(100%);
        }
    }
    .dplayer-danmaku-top,
    .dplayer-danmaku-bottom {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        visibility: hidden;
        &.dplayer-danmaku-move {
            animation-name: danmaku-center;
            animation-timing-function: linear;
            animation-play-state: paused;
        }
    }
    @keyframes danmaku-center {
        from {
            visibility: visible;
        }
        to {
            visibility: visible;
        }
    }
}
`,`.dplayer-logo {
    pointer-events: none;
    position: absolute;
    left: 20px;
    top: 20px;
    max-width: 50px;
    max-height: 50px;
    img {
        max-width: 100%;
        max-height: 100%;
        background: none;
    }
}
`,`.dplayer-menu {
    position: absolute;
    width: 170px;
    border-radius: 2px;
    background: rgba(28, 28, 28, 0.85);
    padding: 5px 0;
    overflow: hidden;
    z-index: 3;
    display: none;
    &.dplayer-menu-show {
        display: block;
    }
    .dplayer-menu-item {
        height: 30px;
        box-sizing: border-box;
        cursor: pointer;
        &:hover {
            background-color: rgba(255, 255, 255, .1);
        }
        a {
            display: inline-block;
            padding: 0 10px;
            line-height: 30px;
            color: #eee;
            font-size: 13px;
            display: inline-block;
            vertical-align: middle;
            width: 100%;
            box-sizing: border-box;
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
            &:hover {
                text-decoration: none;
            }
        }
    }
}
`,`.dplayer-notice {
    position: absolute;
    bottom: 68px;
    left: 20px;
    padding: 12px 18px;
    margin-right: 20px;
    border-radius: 4px;
    background: rgba(28, 28, 28, 0.9);
    color: #fff;
    font-size: 14px;
    line-height: 1.6;
    transition: all .3s ease-in-out, color 0s;
    opacity: 0;
    overflow: hidden;
    pointer-events: none;
}
@media (max-width: 500px){
    .dplayer-notice {
        top: 10px;
        bottom: auto !important;
    }
}
`,`.dplayer-subtitle {
    position: absolute;
    bottom: 40px;
    width: 90%;
    left: 5%;
    text-align: center;
    color: #fff;
    text-shadow: 0.5px 0.5px 0.5px rgba(0, 0, 0, 0.5);
    font-size: 20px;
    &.dplayer-subtitle-hide {
        display: none;
    }
}
`,`.dplayer-mask {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1;
    display: none;
    &.dplayer-mask-show {
        display: block;
    }
}

.dplayer-video-wrap {
    display: flex;
    position: relative;
    align-items: center;
    justify-content: center;
    background: #000;
    font-size: 0;
    width: 100%;
    height: 100%;

    .dplayer-video-wrap-aspect {
        position: relative;
        max-width: 100%;
        max-height: 100%;
        aspect-ratio: 16 / 9;
        overflow: hidden;

        .dplayer-video {
            width: 99999px;  // magic!!
            max-width: 100%;
            max-height: 100%;
            display: none;
        }
        .dplayer-video-current {
            display: block;
        }
        .dplayer-video-prepare {
            display: none;
        }
    }
}
`,`.dplayer-info-panel {
    position: absolute;
    top: 10px;
    left: 10px;
    width: 450px;
    background: rgba(28, 28, 28, 0.8);
    padding: 10px;
    color: #fff;
    font-size: 12px;
    border-radius: 2px;

    &-hide {
        display: none;
    }

    .dplayer-info-panel-close {
        cursor: pointer;
        position: absolute;
        right: 10px;
        top: 10px;
    }

    .dplayer-info-panel-item {
        & > span {
            display: inline-block;
            vertical-align: middle;
            line-height: 15px;
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
        }
    }

    .dplayer-info-panel-item-title {
        width: 100px;
        text-align: right;
        margin-right: 10px;
    }

    .dplayer-info-panel-item-data {
        width: 320px;
    }
}
`],sourceRoot:""}]);const A=y},454:r=>{r.exports='<svg version="1.1" viewBox="0 0 22 22"><svg x="7" y="1"><circle class="dplayer-loading-dot dplayer-loading-dot-0" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="3"><circle class="dplayer-loading-dot dplayer-loading-dot-1" cx="4" cy="4" r="2"></circle></svg><svg x="13" y="7"><circle class="dplayer-loading-dot dplayer-loading-dot-2" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="11"><circle class="dplayer-loading-dot dplayer-loading-dot-3" cx="4" cy="4" r="2"></circle></svg><svg x="7" y="13"><circle class="dplayer-loading-dot dplayer-loading-dot-4" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="11"><circle class="dplayer-loading-dot dplayer-loading-dot-5" cx="4" cy="4" r="2"></circle></svg><svg x="1" y="7"><circle class="dplayer-loading-dot dplayer-loading-dot-6" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="3"><circle class="dplayer-loading-dot dplayer-loading-dot-7" cx="4" cy="4" r="2"></circle></svg></svg>'},456:(r,o,d)=>{var c=d(143);r.exports=function(l){var f,p="",g=(l=l||{}).video,y=l.options,A=c.$escape,C=l.tran,I=l.icons,P=c.$each,M=(l.$value,l.$index,l.index);return p+=`<div class="dplayer-mask"></div>
<div class="dplayer-video-wrap">
    <div class="dplayer-video-wrap-aspect">
      `,f=d(194)(g),p+=f,p+=`
    </div>
    `,y.logo&&(p+=`
    <div class="dplayer-logo">
        <img src="`,p+=A(y.logo),p+=`">
    </div>
    `),p+=`
    <div class="dplayer-danmaku"`,y.danmaku&&y.danmaku.bottom&&(p+=' style="margin-bottom:',p+=A(y.danmaku.bottom),p+='"'),p+=`>
        <div class="dplayer-danmaku-item dplayer-danmaku-item--demo"></div>
    </div>
    <div class="dplayer-subtitle"></div>
    <div class="dplayer-bezel">
        <span class="dplayer-bezel-icon"></span>
        <span class="dplayer-danloading" style="display: none">`,p+=A(C("Danmaku is loading")),p+=`</span>
        <span class="dplayer-loading-icon">`,p+=I.loading,p+=`</span>
    </div>
</div>
<div class="dplayer-controller-mask"></div>
<div class="dplayer-controller">
    <div class="dplayer-icons dplayer-comment-box">
        <button class="dplayer-icon dplayer-comment-setting-icon" aria-label="`,p+=A(C("Setting")),p+=`" data-balloon-nofocus data-balloon-pos="up">
            <span class="dplayer-icon-content">`,p+=I.pallette,p+=`</span>
        </button>
        <input class="dplayer-comment-input" type="search" enterkeyhint="send" placeholder="`,p+=A(C("Input danmaku, hit Enter")),p+=`" spellcheck="false" maxlength="60">
        <button class="dplayer-icon dplayer-send-icon" aria-label="`,p+=A(C("Send")),p+=`" data-balloon-nofocus data-balloon-pos="up">
            <span class="dplayer-icon-content">`,p+=I.send,p+=`</span>
        </button>
    </div>
    <div class="dplayer-icons dplayer-icons-left">
        <button class="dplayer-icon dplayer-play-icon">
            <span class="dplayer-icon-content">`,p+=I.play,p+=`</span>
        </button>
        <div class="dplayer-volume">
            <button class="dplayer-icon dplayer-volume-icon">
                <span class="dplayer-icon-content">`,p+=I.volumeDown,p+=`</span>
            </button>
            <div class="dplayer-volume-bar-wrap" data-balloon-nofocus data-balloon-pos="up">
                <div class="dplayer-volume-bar">
                    <div class="dplayer-volume-bar-inner" style="background: `,p+=A(y.theme),p+=`;">
                        <span class="dplayer-thumb" style="background: `,p+=A(y.theme),p+=`;"></span>
                    </div>
                </div>
            </div>
        </div>
        <span class="dplayer-time">
            <span class="dplayer-ptime">00:00</span> /
            <span class="dplayer-dtime">00:00</span>
        </span>
        `,y.live&&(p+=`
        <span class="dplayer-live-badge" aria-label="`,p+=A(C("Synchronize")),p+=`" data-balloon-nofocus data-balloon-pos="up">
            <span class="dplayer-icon-content">
                <span class="dplayer-live-dot" style="background: `,p+=A(y.theme),p+=';"></span>',p+=A(C("Live")),p+=`
            </span>
        </span>
        `),p+=`
    </div>
    <div class="dplayer-icons dplayer-icons-right">
        `,y.screenshot&&(p+=`
        <div class="dplayer-icon dplayer-camera-icon" aria-label="`,p+=A(C("Screenshot")),p+=`" data-balloon-nofocus data-balloon-pos="up">
            <span class="dplayer-icon-content">`,p+=I.camera,p+=`</span>
        </div>
        `),p+=`
        `,y.airplay&&(p+=`
        <div class="dplayer-icon dplayer-airplay-icon" aria-label="`,p+=A(C("AirPlay")),p+=`" data-balloon-nofocus data-balloon-pos="up">
            <span class="dplayer-icon-content">`,p+=I.airplay,p+=`</span>
        </div>
        `),p+=`
        <div class="dplayer-comment">
            <button class="dplayer-icon dplayer-comment-icon" aria-label="`,p+=A(C("Send danmaku")),p+=`" data-balloon-nofocus data-balloon-pos="up">
                <span class="dplayer-icon-content">`,p+=I.comment,p+=`</span>
            </button>
        </div>
        `,y.subtitle&&(p+=`
        <div class="dplayer-subtitle-btn">
            <button class="dplayer-icon dplayer-subtitle-icon" aria-label="`,p+=A(C("Hide subtitle")),p+=`" data-balloon-nofocus data-balloon-pos="up">
                <span class="dplayer-icon-content">`,p+=I.subtitle,p+=`</span>
            </button>
        </div>
        `),p+=`
        <div class="dplayer-setting">
            <button class="dplayer-icon dplayer-setting-icon" aria-label="`,p+=A(C("Setting")),p+=`" data-balloon-nofocus data-balloon-pos="up">
                <span class="dplayer-icon-content">`,p+=I.setting,p+=`</span>
            </button>
        </div>
        <div class="dplayer-full">
            <button class="dplayer-icon dplayer-pip-icon" aria-label="`,p+=A(C("Picture-in-Picture")),p+=`" data-balloon-nofocus data-balloon-pos="up">
                <span class="dplayer-icon-content">`,p+=I.pip,p+=`</span>
            </button>
            <button class="dplayer-icon dplayer-full-in-icon" aria-label="`,p+=A(C("Web full screen")),p+=`" data-balloon-nofocus data-balloon-pos="up">
                <span class="dplayer-icon-content">`,p+=I.fullWeb,p+=`</span>
            </button>
            <button class="dplayer-icon dplayer-full-icon" aria-label="`,p+=A(C("Full screen")),p+=`" data-balloon-nofocus data-balloon-pos="up">
                <span class="dplayer-icon-content">`,p+=I.full,p+=`</span>
            </button>
        </div>
    </div>
    <div class="dplayer-bar-wrap">
        <div class="dplayer-bar-time hidden">00:00</div>
        <div class="dplayer-bar-preview"></div>
        <div class="dplayer-bar">
            <div class="dplayer-loaded" style="width: 0;"></div>
            <div class="dplayer-played" style="width: 0; background: `,p+=A(y.theme),p+=`;">
                <span class="dplayer-thumb" style="background: `,p+=A(y.theme),p+=`;"></span>
            </div>
        </div>
    </div>
</div>
<div class="dplayer-setting-box" style="`,p+=A(y.video.quality?`--quality-length:${y.video.quality.length};`:""),p+=" ",p+=A(y.playbackSpeed?`--speed-length:${y.playbackSpeed.length};`:""),p+=`">
    <div class="dplayer-setting-origin-panel">
        `,y.video.quality&&(p+=`
        <div class="dplayer-setting-item dplayer-setting-quality">
            <span class="dplayer-label">`,p+=A(C("Quality")),p+=`</span>
            <span class="dplayer-label-value">`,p+=A(y.video.quality[y.video.defaultQuality].name),p+=`</span>
            <div class="dplayer-toggle">`,p+=I.right,p+=`</div>
        </div>
        `),p+=`
        <div class="dplayer-setting-item dplayer-setting-audio">
            <span class="dplayer-label">`,p+=A(C("Audio")),p+=`</span>
            <span class="dplayer-label-value">`,p+=A(C("Primary audio")),p+=`</span>
            <div class="dplayer-toggle">`,p+=I.right,p+=`</div>
        </div>
        <div class="dplayer-setting-item dplayer-setting-speed">
            <span class="dplayer-label">`,p+=A(C("Speed")),p+=`</span>
            <span class="dplayer-label-value">`,p+=A(C("Normal")),p+=`</span>
            <div class="dplayer-toggle">`,p+=I.right,p+=`</div>
        </div>
        <div class="dplayer-setting-item dplayer-setting-loop">
            <span class="dplayer-label">`,p+=A(C("Loop")),p+=`</span>
            <div class="dplayer-toggle">
                <input class="dplayer-toggle-setting-input" type="checkbox" name="dplayer-toggle">
                <label for="dplayer-toggle" style="--theme-color:`,p+=A(y.theme),p+=`"></label>
            </div>
        </div>
        <div class="dplayer-setting-item dplayer-setting-showdan">
            <span class="dplayer-label">`,p+=A(C("Show danmaku")),p+=`</span>
            <div class="dplayer-toggle">
                <input class="dplayer-showdan-setting-input" type="checkbox" name="dplayer-toggle-dan">
                <label for="dplayer-toggle-dan" style="--theme-color:`,p+=A(y.theme),p+=`"></label>
            </div>
        </div>
        <div class="dplayer-setting-item dplayer-setting-danunlimit">
            <span class="dplayer-label">`,p+=A(C("Unlimited danmaku")),p+=`</span>
            <div class="dplayer-toggle">
                <input class="dplayer-danunlimit-setting-input" type="checkbox" name="dplayer-toggle-danunlimit">
                <label for="dplayer-toggle-danunlimit" style="--theme-color:`,p+=A(y.theme),p+=`"></label>
            </div>
        </div>
        <div class="dplayer-setting-item dplayer-setting-danmaku">
            <span class="dplayer-label">`,p+=A(C("Opacity for danmaku")),p+=`</span>
            <span class="dplayer-label-value">1.0</span>
            <div class="dplayer-danmaku-bar-wrap">
                <div class="dplayer-danmaku-bar">
                    <div class="dplayer-danmaku-bar-inner" style="background: `,p+=A(y.theme),p+=`;">
                        <span class="dplayer-thumb" style="background: `,p+=A(y.theme),p+=`;"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    `,y.video.quality&&(p+=`
    <div class="dplayer-setting-quality-panel">
        <div class="dplayer-setting-header dplayer-setting-quality-header">
            <div class="dplayer-toggle">`,p+=I.left,p+=`</div>
            <span class="dplayer-label">`,p+=A(C("Quality")),p+=`</span>
        </div>
        `,P(y.video.quality,function(G,Z){p+=`
            <div class="dplayer-setting-quality-item `,p+=A(G.name===y.video.quality[y.video.defaultQuality].name?"dplayer-setting-quality-current":""),p+='" data-index="',p+=A(Z),p+=`">
                <div class="dplayer-toggle">`,p+=I.check,p+=`</div>
                <span class="dplayer-label">`,p+=A(G.name),p+=`</span>
            </div>
        `}),p+=`
    </div>
    `),p+=`
    <div class="dplayer-setting-speed-panel">
        <div class="dplayer-setting-header dplayer-setting-speed-header">
            <div class="dplayer-toggle">`,p+=I.left,p+=`</div>
            <span class="dplayer-label">`,p+=A(C("Speed")),p+=`</span>
        </div>
        `,P(y.playbackSpeed,function(G,Z){p+=`
            <div class="dplayer-setting-speed-item `,p+=A(G===1?"dplayer-setting-speed-current":""),p+='" data-speed="',p+=A(G),p+=`">
                <div class="dplayer-toggle">`,p+=I.check,p+=`</div>
                <span class="dplayer-label">`,p+=A(G===1?C("Normal"):G),p+=`</span>
            </div>
        `}),p+=`
    </div>
    <div class="dplayer-setting-audio-panel">
        <div class="dplayer-setting-header dplayer-setting-audio-header">
            <div class="dplayer-toggle">`,p+=I.left,p+=`</div>
            <span class="dplayer-label">`,p+=A(C("Audio")),p+=`</span>
        </div>
        <div class="dplayer-setting-audio-item dplayer-setting-audio-current" data-audio="primary">
            <div class="dplayer-toggle">`,p+=I.check,p+=`</div>
            <span class="dplayer-label">`,p+=A(C("Primary audio")),p+=`</span>
        </div>
        <div class="dplayer-setting-audio-item" data-audio="secondary">
            <div class="dplayer-toggle">`,p+=I.check,p+=`</div>
            <span class="dplayer-label">`,p+=A(C("Secondary audio")),p+=`</span>
        </div>
    </div>
</div>
<div class="dplayer-comment-setting-box">
    <div class="dplayer-comment-setting-color">
        <div class="dplayer-comment-setting-title">`,p+=A(C("Set danmaku color")),p+=`</div>
        <div class="dplayer-comment-setting-color-list">
            <label>
                <input type="radio" name="dplayer-danmaku-color-`,p+=A(M),p+=`" value="#ffeaea" checked>
                <span style="background: #ffeaea"></span>
            </label>
            <label>
                <input type="radio" name="dplayer-danmaku-color-`,p+=A(M),p+=`" value="#f02840">
                <span style="background: #f02840"></span>
            </label>
            <label>
                <input type="radio" name="dplayer-danmaku-color-`,p+=A(M),p+=`" value="#fd7e80">
                <span style="background: #fd7e80"></span>
            </label>
            <label>
                <input type="radio" name="dplayer-danmaku-color-`,p+=A(M),p+=`" value="#fda708">
                <span style="background: #fda708"></span>
            </label>
            <label>
                <input type="radio" name="dplayer-danmaku-color-`,p+=A(M),p+=`" value="#ffe133">
                <span style="background: #ffe133"></span>
            </label>
            <label>
                <input type="radio" name="dplayer-danmaku-color-`,p+=A(M),p+=`" value="#64dd17">
                <span style="background: #64dd17"></span>
            </label>
            <label>
                <input type="radio" name="dplayer-danmaku-color-`,p+=A(M),p+=`" value="#00d4f5">
                <span style="background: #00d4f5"></span>
            </label>
            <label>
                <input type="radio" name="dplayer-danmaku-color-`,p+=A(M),p+=`" value="#4763ff">
                <span style="background: #4763ff"></span>
            </label>
        </div>
    </div>
    <div class="dplayer-comment-setting-type">
        <div class="dplayer-comment-setting-title">`,p+=A(C("Set danmaku type")),p+=`</div>
        <label>
            <input type="radio" name="dplayer-danmaku-type-`,p+=A(M),p+=`" value="top">
            <span>`,p+=A(C("Top")),p+=`</span>
        </label>
        <label>
            <input type="radio" name="dplayer-danmaku-type-`,p+=A(M),p+=`" value="right" checked>
            <span>`,p+=A(C("Rolling")),p+=`</span>
        </label>
        <label>
            <input type="radio" name="dplayer-danmaku-type-`,p+=A(M),p+=`" value="bottom">
            <span>`,p+=A(C("Bottom")),p+=`</span>
        </label>
    </div>
    <div class="dplayer-comment-setting-size">
        <div class="dplayer-comment-setting-title">`,p+=A(C("Set danmaku size")),p+=`</div>
        <label>
            <input type="radio" name="dplayer-danmaku-size-`,p+=A(M),p+=`" value="big">
            <span>`,p+=A(C("Big")),p+=`</span>
        </label>
        <label>
            <input type="radio" name="dplayer-danmaku-size-`,p+=A(M),p+=`" value="medium" checked>
            <span>`,p+=A(C("Medium")),p+=`</span>
        </label>
        <label>
            <input type="radio" name="dplayer-danmaku-size-`,p+=A(M),p+=`" value="small">
            <span>`,p+=A(C("Small")),p+=`</span>
        </label>
    </div>
</div>
<div class="dplayer-info-panel dplayer-info-panel-hide">
    <div class="dplayer-info-panel-close">[x]</div>
    <div class="dplayer-info-panel-item dplayer-info-panel-item-version">
        <span class="dplayer-info-panel-item-title">Player Version</span>
        <span class="dplayer-info-panel-item-data"></span>
    </div>
    <div class="dplayer-info-panel-item dplayer-info-panel-item-mimetype">
        <span class="dplayer-info-panel-item-title">Mime Type</span>
        <span class="dplayer-info-panel-item-data"></span>
    </div>
    <div class="dplayer-info-panel-item dplayer-info-panel-item-video-fps">
        <span class="dplayer-info-panel-item-title">Video FPS</span>
        <span class="dplayer-info-panel-item-data"></span>
    </div>
    <div class="dplayer-info-panel-item dplayer-info-panel-item-page-fps">
        <span class="dplayer-info-panel-item-title">Page FPS</span>
        <span class="dplayer-info-panel-item-data"></span>
    </div>
    <div class="dplayer-info-panel-item dplayer-info-panel-item-dropped-frames">
        <span class="dplayer-info-panel-item-title">Dropped Frames</span>
        <span class="dplayer-info-panel-item-data"></span>
    </div>
    <div class="dplayer-info-panel-item dplayer-info-panel-item-type">
        <span class="dplayer-info-panel-item-title">Video Type</span>
        <span class="dplayer-info-panel-item-data"></span>
    </div>
    <div class="dplayer-info-panel-item dplayer-info-panel-item-url">
        <span class="dplayer-info-panel-item-title">Video URL</span>
        <span class="dplayer-info-panel-item-data"></span>
    </div>
    <div class="dplayer-info-panel-item dplayer-info-panel-item-resolution">
        <span class="dplayer-info-panel-item-title">Video Resolution</span>
        <span class="dplayer-info-panel-item-data"></span>
    </div>
    <div class="dplayer-info-panel-item dplayer-info-panel-item-duration">
        <span class="dplayer-info-panel-item-title">Video Duration</span>
        <span class="dplayer-info-panel-item-data"></span>
    </div>
    <div class="dplayer-info-panel-item dplayer-info-panel-item-buffer-remain">
        <span class="dplayer-info-panel-item-title">Buffer Remain</span>
        <span class="dplayer-info-panel-item-data"></span>
    </div>
    <div class="dplayer-info-panel-item dplayer-info-panel-item-download-speed">
        <span class="dplayer-info-panel-item-title">Download Speed</span>
        <span class="dplayer-info-panel-item-data"></span>
    </div>
</div>
<div class="dplayer-menu">
    `,P(y.contextmenu,function(G,Z){p+=`
        <div class="dplayer-menu-item">
            <a`,G.link&&(p+=' target="_blank"'),p+=' href="',p+=A(G.link||"javascript:void(0);"),p+='">',p+=A(C(G.text)),p+=`</a>
        </div>
    `}),p+=`
</div>
<div class="dplayer-notice"></div>
<div class="dplayer-mobile-icon-wrap">
    <button class="dplayer-mobile-icon dplayer-mobile-icon-backward">
        `,p+=I.backward,p+=`
    </button>
    <button class="dplayer-mobile-icon dplayer-mobile-icon-play">
        `,p+=I.play,p+=`
    </button>
    <button class="dplayer-mobile-icon dplayer-mobile-icon-forward">
        `,p+=I.forward,p+=`
    </button>
</div>
`}},460:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},484:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M13.725 30l3.9-5.325-3.9-1.125v6.45zM0 17.5l11.050 3.35 13.6-11.55-10.55 12.425 11.8 3.65 6.1-23.375-32 15.5z"></path></svg>'},513:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"></path></svg>'},540:r=>{r.exports=function(o){var d=document.createElement("style");return o.setAttributes(d,o.attributes),o.insert(d,o.options),d}},631:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>'},642:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 24 24"><path d="M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg>'},657:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M26.3,15.1H14.5v8.6h11.8V15.1z M32.2,26.6V6.4c0-1.6-1.3-2.8-2.9-2.8H2.8c-1.6,0-2.9,1.3-2.9,2.8v20.1c0,1.6,1.3,2.9,2.9,2.9h26.4C30.8,29.4,32.2,28.1,32.2,26.6z M29.2,26.6H2.8V6.4h26.4V26.6z"></path></svg>'},659:r=>{var o={};r.exports=function(d,c){var l=function(f){if(o[f]===void 0){var p=document.querySelector(f);if(window.HTMLIFrameElement&&p instanceof window.HTMLIFrameElement)try{p=p.contentDocument.head}catch{p=null}o[f]=p}return o[f]}(d);if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(c)}},717:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z"></path></svg>'},825:r=>{r.exports=function(o){if(typeof document>"u")return{update:function(){},remove:function(){}};var d=o.insertStyleElement(o);return{update:function(c){(function(l,f,p){var g="";p.supports&&(g+="@supports (".concat(p.supports,") {")),p.media&&(g+="@media ".concat(p.media," {"));var y=p.layer!==void 0;y&&(g+="@layer".concat(p.layer.length>0?" ".concat(p.layer):""," {")),g+=p.css,y&&(g+="}"),p.media&&(g+="}"),p.supports&&(g+="}");var A=p.sourceMap;A&&typeof btoa<"u"&&(g+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(A))))," */")),f.styleTagTransform(g,l,f.options)})(d,o,c)},remove:function(){(function(c){if(c.parentNode===null)return!1;c.parentNode.removeChild(c)})(d)}}}},833:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 512 512"><path d="M500.5 231.4l-192-160C287.9 54.3 256 68.6 256 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2zm-256 0l-192-160C31.9 54.3 0 68.6 0 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2z"></path></svg>'},845:r=>{/*! art-template@runtime | https://github.com/aui/art-template */var o=typeof self<"u"?self:typeof window<"u"?window:o!==void 0?o:{},d=Object.create(o),c=/["&'<>]/;function l(f){return typeof f!="string"&&(f=f==null?"":typeof f=="function"?l(f.call(f)):JSON.stringify(f)),f}d.$escape=function(f){return function(p){var g=""+p,y=c.exec(g);if(!y)return p;var A="",C=void 0,I=void 0,P=void 0;for(C=y.index,I=0;C<g.length;C++){switch(g.charCodeAt(C)){case 34:P="&#34;";break;case 38:P="&#38;";break;case 39:P="&#39;";break;case 60:P="&#60;";break;case 62:P="&#62;";break;default:continue}I!==C&&(A+=g.substring(I,C)),I=C+1,A+=P}return I!==C?A+g.substring(I,C):A}(l(f))},d.$each=function(f,p){if(Array.isArray(f))for(var g=0,y=f.length;g<y;g++)p(f[g],g);else for(var A in f)p(f[A],A)},r.exports=d},880:(r,o,d)=>{d.d(o,{A:()=>g});var c=d(34),l=d.n(c),f=d(122),p=d.n(f)()(l());p.push([r.id,':root{--balloon-border-radius:2px;--balloon-color:#101010f2;--balloon-text-color:#fff;--balloon-font-size:12px;--balloon-move:4px}button[aria-label][data-balloon-pos]{overflow:visible}[aria-label][data-balloon-pos]{cursor:pointer;position:relative}[aria-label][data-balloon-pos]:after{background:var(--balloon-color);border-radius:2px;border-radius:var(--balloon-border-radius);color:var(--balloon-text-color);content:attr(aria-label);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:var(--balloon-font-size);font-style:normal;font-weight:400;padding:.5em 1em;text-indent:0;text-shadow:none;white-space:nowrap}[aria-label][data-balloon-pos]:after,[aria-label][data-balloon-pos]:before{opacity:0;pointer-events:none;position:absolute;transition:all .18s ease-out .18s;z-index:10}[aria-label][data-balloon-pos]:before{border:5px solid #0000;border-top:5px solid var(--balloon-color);content:"";height:0;width:0}[aria-label][data-balloon-pos]:hover:after,[aria-label][data-balloon-pos]:hover:before,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:after,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:before,[aria-label][data-balloon-pos][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-visible]:before{opacity:1;pointer-events:none}[aria-label][data-balloon-pos].font-awesome:after{font-family:FontAwesome,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}[aria-label][data-balloon-pos][data-balloon-break]:after{white-space:pre}[aria-label][data-balloon-pos][data-balloon-break][data-balloon-length]:after{white-space:pre-line;word-break:break-word}[aria-label][data-balloon-pos][data-balloon-blunt]:after,[aria-label][data-balloon-pos][data-balloon-blunt]:before{transition:none}[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:before{transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:after{left:0}[aria-label][data-balloon-pos][data-balloon-pos*=-left]:before{left:5px}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:after{right:0}[aria-label][data-balloon-pos][data-balloon-pos*=-right]:before{right:5px}[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:after,[aria-label][data-balloon-pos][data-balloon-po*=-left]:hover:before,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-po*=-left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos*=-right][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after,[aria-label][data-balloon-pos][data-balloon-pos^=up]:before{bottom:100%;transform:translateY(var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos^=up]:after{margin-bottom:10px}[aria-label][data-balloon-pos][data-balloon-pos=up]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:before{left:50%;transform:translate(-50%,var(--balloon-move))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after,[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos^=down]:after{margin-top:10px}[aria-label][data-balloon-pos][data-balloon-pos^=down]:before{border:5px solid #0000;border-bottom:5px solid var(--balloon-color);height:0;width:0}[aria-label][data-balloon-pos][data-balloon-pos=down]:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:before{left:50%;transform:translate(-50%,calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:before,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:before{transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:before{right:100%;top:50%;transform:translate(var(--balloon-move),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after{margin-right:10px}[aria-label][data-balloon-pos][data-balloon-pos=left]:before{border:5px solid #0000;border-left:5px solid var(--balloon-color);height:0;width:0}[aria-label][data-balloon-pos][data-balloon-pos=right]:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:before{left:100%;top:50%;transform:translate(calc(var(--balloon-move)*-1),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after{margin-left:10px}[aria-label][data-balloon-pos][data-balloon-pos=right]:before{border:5px solid #0000;border-right:5px solid var(--balloon-color);height:0;width:0}[aria-label][data-balloon-pos][data-balloon-length]:after{white-space:normal}[aria-label][data-balloon-pos][data-balloon-length=small]:after{width:80px}[aria-label][data-balloon-pos][data-balloon-length=medium]:after{width:150px}[aria-label][data-balloon-pos][data-balloon-length=large]:after{width:260px}[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:380px}@media screen and (max-width:768px){[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{width:90vw}}[aria-label][data-balloon-pos][data-balloon-length=fit]:after{width:100%}',"",{version:3,sources:["webpack://./node_modules/balloon-css/balloon.css"],names:[],mappings:"AAAA,MACE,2BAA4B,CAC5B,yBAAuC,CACvC,yBAA0B,CAC1B,wBAAyB,CACzB,kBAAqB,CAEvB,qCACE,gBAAmB,CAErB,+BAEE,cAAe,CADf,iBACiB,CACjB,qCAUE,+BAAgC,CAChC,iBAAkB,CAElB,0CAA2C,CAD3C,+BAAgC,CAEhC,wBAAyB,CATzB,wHAAwI,CAIxI,kCAAmC,CAFnC,iBAAkB,CADlB,eAAmB,CASnB,gBAAiB,CAXjB,aAAc,CAId,gBAAiB,CASjB,kBACa,CACf,2EAlBE,SAAU,CACV,mBAAoB,CAcpB,iBAAkB,CAblB,iCAAoC,CAepC,UAWa,CAVf,sCAIE,sBAAsC,CAAtC,yCAAsC,CAItC,UAAW,CANX,QAAS,CADT,OASa,CACf,6VACE,SAAU,CACV,mBAAsB,CACxB,kDACE,oIAAuJ,CACzJ,yDACE,eAAkB,CACpB,8EACE,oBAAqB,CACrB,qBAAwB,CAC1B,mHACE,eAAkB,CAGpB,4kBACE,yBAA+B,CACjC,8DACE,MAAS,CACX,+DACE,QAAW,CACb,+DACE,OAAU,CACZ,gEACE,SAAY,CAGd,omBACE,sBAA4B,CAC9B,uHACE,WAAY,CAEZ,yCAA4C,CAD5C,oBAC8C,CAChD,2DACE,kBAAqB,CACvB,qHACE,QAAS,CACT,6CAAiD,CACnD,2HACE,QAAS,CACT,kDAAyD,CAC3D,6DACE,eAAkB,CACpB,8DAIE,sBAAyC,CAAzC,4CAAyC,CAFzC,QAAS,CADT,OAG2C,CAC7C,yHACE,QAAS,CACT,sDAA4D,CAG9D,wlBACE,0BAA+B,CACjC,yHACE,UAAW,CACX,OAAQ,CACR,6CAAiD,CACnD,4DACE,iBAAoB,CACtB,6DAIE,sBAAuC,CAAvC,0CAAuC,CAFvC,QAAS,CADT,OAGyC,CAC3C,2HACE,SAAU,CACV,OAAQ,CACR,sDAA4D,CAC9D,6DACE,gBAAmB,CACrB,8DAIE,sBAAwC,CAAxC,2CAAwC,CAFxC,QAAS,CADT,OAG0C,CAC5C,0DACE,kBAAqB,CACvB,gEACE,UAAa,CACf,iEACE,WAAc,CAChB,gEACE,WAAc,CAChB,iEACE,WAAc,CACd,oCACE,iEACE,UAAa,CAAE,CACrB,8DACE,UAAa",sourcesContent:[`:root {
  --balloon-border-radius: 2px;
  --balloon-color: rgba(16, 16, 16, 0.95);
  --balloon-text-color: #fff;
  --balloon-font-size: 12px;
  --balloon-move: 4px; }

button[aria-label][data-balloon-pos] {
  overflow: visible; }

[aria-label][data-balloon-pos] {
  position: relative;
  cursor: pointer; }
  [aria-label][data-balloon-pos]:after {
    opacity: 0;
    pointer-events: none;
    transition: all 0.18s ease-out 0.18s;
    text-indent: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    font-weight: normal;
    font-style: normal;
    text-shadow: none;
    font-size: var(--balloon-font-size);
    background: var(--balloon-color);
    border-radius: 2px;
    color: var(--balloon-text-color);
    border-radius: var(--balloon-border-radius);
    content: attr(aria-label);
    padding: .5em 1em;
    position: absolute;
    white-space: nowrap;
    z-index: 10; }
  [aria-label][data-balloon-pos]:before {
    width: 0;
    height: 0;
    border: 5px solid transparent;
    border-top-color: var(--balloon-color);
    opacity: 0;
    pointer-events: none;
    transition: all 0.18s ease-out 0.18s;
    content: "";
    position: absolute;
    z-index: 10; }
  [aria-label][data-balloon-pos]:hover:before, [aria-label][data-balloon-pos]:hover:after, [aria-label][data-balloon-pos][data-balloon-visible]:before, [aria-label][data-balloon-pos][data-balloon-visible]:after, [aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:before, [aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:after {
    opacity: 1;
    pointer-events: none; }
  [aria-label][data-balloon-pos].font-awesome:after {
    font-family: FontAwesome, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; }
  [aria-label][data-balloon-pos][data-balloon-break]:after {
    white-space: pre; }
  [aria-label][data-balloon-pos][data-balloon-break][data-balloon-length]:after {
    white-space: pre-line;
    word-break: break-word; }
  [aria-label][data-balloon-pos][data-balloon-blunt]:before, [aria-label][data-balloon-pos][data-balloon-blunt]:after {
    transition: none; }
  [aria-label][data-balloon-pos][data-balloon-pos="up"]:hover:after, [aria-label][data-balloon-pos][data-balloon-pos="up"][data-balloon-visible]:after, [aria-label][data-balloon-pos][data-balloon-pos="down"]:hover:after, [aria-label][data-balloon-pos][data-balloon-pos="down"][data-balloon-visible]:after {
    transform: translate(-50%, 0); }
  [aria-label][data-balloon-pos][data-balloon-pos="up"]:hover:before, [aria-label][data-balloon-pos][data-balloon-pos="up"][data-balloon-visible]:before, [aria-label][data-balloon-pos][data-balloon-pos="down"]:hover:before, [aria-label][data-balloon-pos][data-balloon-pos="down"][data-balloon-visible]:before {
    transform: translate(-50%, 0); }
  [aria-label][data-balloon-pos][data-balloon-pos*="-left"]:after {
    left: 0; }
  [aria-label][data-balloon-pos][data-balloon-pos*="-left"]:before {
    left: 5px; }
  [aria-label][data-balloon-pos][data-balloon-pos*="-right"]:after {
    right: 0; }
  [aria-label][data-balloon-pos][data-balloon-pos*="-right"]:before {
    right: 5px; }
  [aria-label][data-balloon-pos][data-balloon-po*="-left"]:hover:after, [aria-label][data-balloon-pos][data-balloon-po*="-left"][data-balloon-visible]:after, [aria-label][data-balloon-pos][data-balloon-pos*="-right"]:hover:after, [aria-label][data-balloon-pos][data-balloon-pos*="-right"][data-balloon-visible]:after {
    transform: translate(0, 0); }
  [aria-label][data-balloon-pos][data-balloon-po*="-left"]:hover:before, [aria-label][data-balloon-pos][data-balloon-po*="-left"][data-balloon-visible]:before, [aria-label][data-balloon-pos][data-balloon-pos*="-right"]:hover:before, [aria-label][data-balloon-pos][data-balloon-pos*="-right"][data-balloon-visible]:before {
    transform: translate(0, 0); }
  [aria-label][data-balloon-pos][data-balloon-pos^="up"]:before, [aria-label][data-balloon-pos][data-balloon-pos^="up"]:after {
    bottom: 100%;
    transform-origin: top;
    transform: translate(0, var(--balloon-move)); }
  [aria-label][data-balloon-pos][data-balloon-pos^="up"]:after {
    margin-bottom: 10px; }
  [aria-label][data-balloon-pos][data-balloon-pos="up"]:before, [aria-label][data-balloon-pos][data-balloon-pos="up"]:after {
    left: 50%;
    transform: translate(-50%, var(--balloon-move)); }
  [aria-label][data-balloon-pos][data-balloon-pos^="down"]:before, [aria-label][data-balloon-pos][data-balloon-pos^="down"]:after {
    top: 100%;
    transform: translate(0, calc(var(--balloon-move) * -1)); }
  [aria-label][data-balloon-pos][data-balloon-pos^="down"]:after {
    margin-top: 10px; }
  [aria-label][data-balloon-pos][data-balloon-pos^="down"]:before {
    width: 0;
    height: 0;
    border: 5px solid transparent;
    border-bottom-color: var(--balloon-color); }
  [aria-label][data-balloon-pos][data-balloon-pos="down"]:after, [aria-label][data-balloon-pos][data-balloon-pos="down"]:before {
    left: 50%;
    transform: translate(-50%, calc(var(--balloon-move) * -1)); }
  [aria-label][data-balloon-pos][data-balloon-pos="left"]:hover:after, [aria-label][data-balloon-pos][data-balloon-pos="left"][data-balloon-visible]:after, [aria-label][data-balloon-pos][data-balloon-pos="right"]:hover:after, [aria-label][data-balloon-pos][data-balloon-pos="right"][data-balloon-visible]:after {
    transform: translate(0, -50%); }
  [aria-label][data-balloon-pos][data-balloon-pos="left"]:hover:before, [aria-label][data-balloon-pos][data-balloon-pos="left"][data-balloon-visible]:before, [aria-label][data-balloon-pos][data-balloon-pos="right"]:hover:before, [aria-label][data-balloon-pos][data-balloon-pos="right"][data-balloon-visible]:before {
    transform: translate(0, -50%); }
  [aria-label][data-balloon-pos][data-balloon-pos="left"]:after, [aria-label][data-balloon-pos][data-balloon-pos="left"]:before {
    right: 100%;
    top: 50%;
    transform: translate(var(--balloon-move), -50%); }
  [aria-label][data-balloon-pos][data-balloon-pos="left"]:after {
    margin-right: 10px; }
  [aria-label][data-balloon-pos][data-balloon-pos="left"]:before {
    width: 0;
    height: 0;
    border: 5px solid transparent;
    border-left-color: var(--balloon-color); }
  [aria-label][data-balloon-pos][data-balloon-pos="right"]:after, [aria-label][data-balloon-pos][data-balloon-pos="right"]:before {
    left: 100%;
    top: 50%;
    transform: translate(calc(var(--balloon-move) * -1), -50%); }
  [aria-label][data-balloon-pos][data-balloon-pos="right"]:after {
    margin-left: 10px; }
  [aria-label][data-balloon-pos][data-balloon-pos="right"]:before {
    width: 0;
    height: 0;
    border: 5px solid transparent;
    border-right-color: var(--balloon-color); }
  [aria-label][data-balloon-pos][data-balloon-length]:after {
    white-space: normal; }
  [aria-label][data-balloon-pos][data-balloon-length="small"]:after {
    width: 80px; }
  [aria-label][data-balloon-pos][data-balloon-length="medium"]:after {
    width: 150px; }
  [aria-label][data-balloon-pos][data-balloon-length="large"]:after {
    width: 260px; }
  [aria-label][data-balloon-pos][data-balloon-length="xlarge"]:after {
    width: 380px; }
    @media screen and (max-width: 768px) {
      [aria-label][data-balloon-pos][data-balloon-length="xlarge"]:after {
        width: 90vw; } }
  [aria-label][data-balloon-pos][data-balloon-length="fit"]:after {
    width: 100%; }
`],sourceRoot:""}]);const g=p},894:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 28"><path d="M28.633 17.104c0.035 0.21 0.026 0.463-0.026 0.76s-0.14 0.598-0.262 0.904c-0.122 0.306-0.271 0.581-0.445 0.825s-0.367 0.419-0.576 0.524c-0.209 0.105-0.393 0.157-0.55 0.157s-0.332-0.035-0.524-0.105c-0.175-0.052-0.393-0.1-0.655-0.144s-0.528-0.052-0.799-0.026c-0.271 0.026-0.541 0.083-0.812 0.17s-0.502 0.236-0.694 0.445c-0.419 0.437-0.664 0.934-0.734 1.493s0.009 1.092 0.236 1.598c0.175 0.349 0.148 0.699-0.079 1.048-0.105 0.14-0.271 0.284-0.498 0.432s-0.476 0.284-0.747 0.406-0.555 0.218-0.851 0.288c-0.297 0.070-0.559 0.105-0.786 0.105-0.157 0-0.306-0.061-0.445-0.183s-0.236-0.253-0.288-0.393h-0.026c-0.192-0.541-0.52-1.009-0.982-1.402s-1-0.589-1.611-0.589c-0.594 0-1.131 0.197-1.611 0.589s-0.816 0.851-1.009 1.375c-0.087 0.21-0.218 0.362-0.393 0.458s-0.367 0.144-0.576 0.144c-0.244 0-0.52-0.044-0.825-0.131s-0.611-0.197-0.917-0.327c-0.306-0.131-0.581-0.284-0.825-0.458s-0.428-0.349-0.55-0.524c-0.087-0.122-0.135-0.266-0.144-0.432s0.057-0.397 0.197-0.694c0.192-0.402 0.266-0.86 0.223-1.375s-0.266-0.991-0.668-1.428c-0.244-0.262-0.541-0.432-0.891-0.511s-0.681-0.109-0.995-0.092c-0.367 0.017-0.742 0.087-1.127 0.21-0.244 0.070-0.489 0.052-0.734-0.052-0.192-0.070-0.371-0.231-0.537-0.485s-0.314-0.533-0.445-0.838c-0.131-0.306-0.231-0.62-0.301-0.943s-0.087-0.59-0.052-0.799c0.052-0.384 0.227-0.629 0.524-0.734 0.524-0.21 0.995-0.555 1.415-1.035s0.629-1.017 0.629-1.611c0-0.611-0.21-1.144-0.629-1.598s-0.891-0.786-1.415-0.996c-0.157-0.052-0.288-0.179-0.393-0.38s-0.157-0.406-0.157-0.616c0-0.227 0.035-0.48 0.105-0.76s0.162-0.55 0.275-0.812 0.244-0.502 0.393-0.72c0.148-0.218 0.31-0.38 0.485-0.485 0.14-0.087 0.275-0.122 0.406-0.105s0.275 0.052 0.432 0.105c0.524 0.21 1.070 0.275 1.637 0.197s1.070-0.327 1.506-0.747c0.21-0.209 0.362-0.467 0.458-0.773s0.157-0.607 0.183-0.904c0.026-0.297 0.026-0.568 0-0.812s-0.048-0.419-0.065-0.524c-0.035-0.105-0.066-0.227-0.092-0.367s-0.013-0.262 0.039-0.367c0.105-0.244 0.293-0.458 0.563-0.642s0.563-0.336 0.878-0.458c0.314-0.122 0.62-0.214 0.917-0.275s0.533-0.092 0.707-0.092c0.227 0 0.406 0.074 0.537 0.223s0.223 0.301 0.275 0.458c0.192 0.471 0.507 0.886 0.943 1.244s0.952 0.537 1.546 0.537c0.611 0 1.153-0.17 1.624-0.511s0.803-0.773 0.996-1.297c0.070-0.14 0.179-0.284 0.327-0.432s0.301-0.223 0.458-0.223c0.244 0 0.511 0.035 0.799 0.105s0.572 0.166 0.851 0.288c0.279 0.122 0.537 0.279 0.773 0.472s0.423 0.402 0.563 0.629c0.087 0.14 0.113 0.293 0.079 0.458s-0.070 0.284-0.105 0.354c-0.227 0.506-0.297 1.039-0.21 1.598s0.341 1.048 0.76 1.467c0.419 0.419 0.934 0.651 1.546 0.694s1.179-0.057 1.703-0.301c0.14-0.087 0.31-0.122 0.511-0.105s0.371 0.096 0.511 0.236c0.262 0.244 0.493 0.616 0.694 1.113s0.336 1 0.406 1.506c0.035 0.297-0.013 0.528-0.144 0.694s-0.266 0.275-0.406 0.327c-0.542 0.192-1.004 0.528-1.388 1.009s-0.576 1.026-0.576 1.637c0 0.594 0.162 1.113 0.485 1.559s0.747 0.764 1.27 0.956c0.122 0.070 0.227 0.14 0.314 0.21 0.192 0.157 0.323 0.358 0.393 0.602v0zM16.451 19.462c0.786 0 1.528-0.149 2.227-0.445s1.305-0.707 1.821-1.231c0.515-0.524 0.921-1.131 1.218-1.821s0.445-1.428 0.445-2.214c0-0.786-0.148-1.524-0.445-2.214s-0.703-1.292-1.218-1.808c-0.515-0.515-1.122-0.921-1.821-1.218s-1.441-0.445-2.227-0.445c-0.786 0-1.524 0.148-2.214 0.445s-1.292 0.703-1.808 1.218c-0.515 0.515-0.921 1.118-1.218 1.808s-0.445 1.428-0.445 2.214c0 0.786 0.149 1.524 0.445 2.214s0.703 1.297 1.218 1.821c0.515 0.524 1.118 0.934 1.808 1.231s1.428 0.445 2.214 0.445v0z"></path></svg>'},928:r=>{r.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M24.965 24.38h-18.132c-1.366 0-2.478-1.113-2.478-2.478v-11.806c0-1.364 1.111-2.478 2.478-2.478h18.132c1.366 0 2.478 1.113 2.478 2.478v11.806c0 1.364-1.11 2.478-2.478 2.478zM6.833 10.097v11.806h18.134l-0.002-11.806h-18.132zM2.478 28.928h5.952c0.684 0 1.238-0.554 1.238-1.239 0-0.684-0.554-1.238-1.238-1.238h-5.952v-5.802c0-0.684-0.554-1.239-1.238-1.239s-1.239 0.556-1.239 1.239v5.802c0 1.365 1.111 2.478 2.478 2.478zM30.761 19.412c-0.684 0-1.238 0.554-1.238 1.238v5.801h-5.951c-0.686 0-1.239 0.554-1.239 1.238 0 0.686 0.554 1.239 1.239 1.239h5.951c1.366 0 2.478-1.111 2.478-2.478v-5.801c0-0.683-0.554-1.238-1.239-1.238zM0 5.55v5.802c0 0.683 0.554 1.238 1.238 1.238s1.238-0.555 1.238-1.238v-5.802h5.952c0.684 0 1.238-0.554 1.238-1.238s-0.554-1.238-1.238-1.238h-5.951c-1.366-0.001-2.478 1.111-2.478 2.476zM32 11.35v-5.801c0-1.365-1.11-2.478-2.478-2.478h-5.951c-0.686 0-1.239 0.554-1.239 1.238s0.554 1.238 1.239 1.238h5.951v5.801c0 0.683 0.554 1.237 1.238 1.237 0.686 0.002 1.239-0.553 1.239-1.236z"></path></svg>'}},i={};function n(r){var o=i[r];if(o!==void 0)return o.exports;var d=i[r]={id:r,exports:{}};return t[r].call(d.exports,d,d.exports,n),d.exports}n.n=r=>{var o=r&&r.__esModule?()=>r.default:()=>r;return n.d(o,{a:o}),o},n.d=(r,o)=>{for(var d in o)n.o(o,d)&&!n.o(r,d)&&Object.defineProperty(r,d,{enumerable:!0,get:o[d]})},n.o=(r,o)=>Object.prototype.hasOwnProperty.call(r,o),n.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.nc=void 0;var a={};return(()=>{n.d(a,{default:()=>Xp});var r={};n.r(r),n.d(r,{hasBrowserEnv:()=>ui,hasStandardBrowserEnv:()=>qi,hasStandardBrowserWebWorkerEnv:()=>Li,navigator:()=>Oi,origin:()=>Vi});var o=n(72),d=n.n(o),c=n(825),l=n.n(c),f=n(659),p=n.n(f),g=n(56),y=n.n(g),A=n(540),C=n.n(A),I=n(113),P=n.n(I),M=n(420),G={};G.styleTagTransform=P(),G.setAttributes=y(),G.insert=p().bind(null,"head"),G.domAPI=l(),G.insertStyleElement=C(),d()(M.A,G),M.A&&M.A.locals&&M.A.locals;var Z=n(149);const le=/iPhone|iPad|iPod|Windows|Macintosh|Android|Mobile/i.test(navigator.userAgent)&&"ontouchend"in document,W={secondToTime:v=>{if((v=v||0)===0||v===1/0||v.toString()==="NaN")return"00:00";const L=Math.floor(v/3600),q=Math.floor((v-3600*L)/60),ee=Math.floor(v-3600*L-60*q);return(L>0?[L,q,ee]:[q,ee]).map(_e=>_e<10?"0"+_e:""+_e).join(":")},getVideoDuration:(v,L)=>{let q=v.duration;return q===1/0&&(v.seekable.length>0?(L.dtime.textContent=W.secondToTime(v.seekable.end(0)),q=v.seekable.end(0)):v.buffered.length>0&&(L.dtime.textContent=W.secondToTime(v.buffered.end(0)),q=v.buffered.end(0))),q},getRelativeX:(v,L)=>{const q=L.getBoundingClientRect();let ee;return ee="touches"in v?v.touches.length>0?v.touches[0].clientX:v.changedTouches&&v.changedTouches.length>0?v.changedTouches[0].clientX:0:v.clientX,ee-q.left},getScrollPosition:()=>({left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}),setScrollPosition({left:v=0,top:L=0}){this.isFirefox?(document.documentElement.scrollLeft=v,document.documentElement.scrollTop=L):window.scrollTo(v,L)},isMobile:le,isFirefox:/firefox/i.test(window.navigator.userAgent),isWebKit:/AppleWebKit/.test(window.navigator.userAgent)&&!/Chrome/.test(window.navigator.userAgent)||/\b(iPad|iPhone|iPod)\b/.test(window.navigator.userAgent),storage:{set:(v,L)=>{localStorage.setItem(v,L)},get:v=>localStorage.getItem(v)},nameMap:{dragStart:le?"touchstart":"mousedown",dragMove:le?"touchmove":"mousemove",dragEnd:le?"touchend":"mouseup"},color2Number:v=>(v[0]==="#"&&(v=v.substr(1)),v.length===3&&(v=`${v[0]}${v[0]}${v[1]}${v[1]}${v[2]}${v[2]}`),parseInt(v,16)+0&16777215),number2Color:v=>"#"+("00000"+v.toString(16)).slice(-6),number2Type:v=>{switch(v){case 0:default:return"right";case 1:return"top";case 2:return"bottom"}}},N=W;function U(v,L){return function(){return v.apply(L,arguments)}}const{toString:O}=Object.prototype,{getPrototypeOf:z}=Object,{iterator:ce,toStringTag:be}=Symbol,Le=(xe=Object.create(null),v=>{const L=O.call(v);return xe[L]||(xe[L]=L.slice(8,-1).toLowerCase())});var xe;const ve=v=>(v=v.toLowerCase(),L=>Le(L)===v),ze=v=>L=>typeof L===v,{isArray:Pe}=Array,Y=ze("undefined");function b(v){return v!==null&&!Y(v)&&v.constructor!==null&&!Y(v.constructor)&&R(v.constructor.isBuffer)&&v.constructor.isBuffer(v)}const S=ve("ArrayBuffer"),k=ze("string"),R=ze("function"),w=ze("number"),$=v=>v!==null&&typeof v=="object",X=v=>{if(Le(v)!=="object")return!1;const L=z(v);return!(L!==null&&L!==Object.prototype&&Object.getPrototypeOf(L)!==null||be in v||ce in v)},ie=ve("Date"),se=ve("File"),me=ve("Blob"),ge=ve("FileList"),Re=ve("URLSearchParams"),[Ge,Je,st,xt]=["ReadableStream","Request","Response","Headers"].map(ve);function qe(v,L,{allOwnKeys:q=!1}={}){if(v==null)return;let ee,_e;if(typeof v!="object"&&(v=[v]),Pe(v))for(ee=0,_e=v.length;ee<_e;ee++)L.call(null,v[ee],ee,v);else{if(b(v))return;const Ae=q?Object.getOwnPropertyNames(v):Object.keys(v),we=Ae.length;let Xe;for(ee=0;ee<we;ee++)Xe=Ae[ee],L.call(null,v[Xe],Xe,v)}}function bt(v,L){if(b(v))return null;L=L.toLowerCase();const q=Object.keys(v);let ee,_e=q.length;for(;_e-- >0;)if(ee=q[_e],L===ee.toLowerCase())return ee;return null}const St=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,Ue=v=>!Y(v)&&v!==St,Vt=(Kt=typeof Uint8Array<"u"&&z(Uint8Array),v=>Kt&&v instanceof Kt);var Kt;const It=ve("HTMLFormElement"),Yt=(({hasOwnProperty:v})=>(L,q)=>v.call(L,q))(Object.prototype),Te=ve("RegExp"),$e=(v,L)=>{const q=Object.getOwnPropertyDescriptors(v),ee={};qe(q,(_e,Ae)=>{let we;(we=L(_e,Ae,v))!==!1&&(ee[Ae]=we||_e)}),Object.defineProperties(v,ee)},lt=ve("AsyncFunction"),vt=(_t=typeof setImmediate=="function",Wt=R(St.postMessage),_t?setImmediate:Wt?(Tt=`axios@${Math.random()}`,Ct=[],St.addEventListener("message",({source:v,data:L})=>{v===St&&L===Tt&&Ct.length&&Ct.shift()()},!1),v=>{Ct.push(v),St.postMessage(Tt,"*")}):v=>setTimeout(v));var _t,Wt,Tt,Ct;const ri=typeof queueMicrotask<"u"?queueMicrotask.bind(St):typeof process<"u"&&process.nextTick||vt,H={isArray:Pe,isArrayBuffer:S,isBuffer:b,isFormData:v=>{let L;return v&&(typeof FormData=="function"&&v instanceof FormData||R(v.append)&&((L=Le(v))==="formdata"||L==="object"&&R(v.toString)&&v.toString()==="[object FormData]"))},isArrayBufferView:function(v){let L;return L=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(v):v&&v.buffer&&S(v.buffer),L},isString:k,isNumber:w,isBoolean:v=>v===!0||v===!1,isObject:$,isPlainObject:X,isEmptyObject:v=>{if(!$(v)||b(v))return!1;try{return Object.keys(v).length===0&&Object.getPrototypeOf(v)===Object.prototype}catch{return!1}},isReadableStream:Ge,isRequest:Je,isResponse:st,isHeaders:xt,isUndefined:Y,isDate:ie,isFile:se,isBlob:me,isRegExp:Te,isFunction:R,isStream:v=>$(v)&&R(v.pipe),isURLSearchParams:Re,isTypedArray:Vt,isFileList:ge,forEach:qe,merge:function v(){const{caseless:L,skipUndefined:q}=Ue(this)&&this||{},ee={},_e=(Ae,we)=>{const Xe=L&&bt(ee,we)||we;X(ee[Xe])&&X(Ae)?ee[Xe]=v(ee[Xe],Ae):X(Ae)?ee[Xe]=v({},Ae):Pe(Ae)?ee[Xe]=Ae.slice():q&&Y(Ae)||(ee[Xe]=Ae)};for(let Ae=0,we=arguments.length;Ae<we;Ae++)arguments[Ae]&&qe(arguments[Ae],_e);return ee},extend:(v,L,q,{allOwnKeys:ee}={})=>(qe(L,(_e,Ae)=>{q&&R(_e)?v[Ae]=U(_e,q):v[Ae]=_e},{allOwnKeys:ee}),v),trim:v=>v.trim?v.trim():v.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:v=>(v.charCodeAt(0)===65279&&(v=v.slice(1)),v),inherits:(v,L,q,ee)=>{v.prototype=Object.create(L.prototype,ee),v.prototype.constructor=v,Object.defineProperty(v,"super",{value:L.prototype}),q&&Object.assign(v.prototype,q)},toFlatObject:(v,L,q,ee)=>{let _e,Ae,we;const Xe={};if(L=L||{},v==null)return L;do{for(_e=Object.getOwnPropertyNames(v),Ae=_e.length;Ae-- >0;)we=_e[Ae],ee&&!ee(we,v,L)||Xe[we]||(L[we]=v[we],Xe[we]=!0);v=q!==!1&&z(v)}while(v&&(!q||q(v,L))&&v!==Object.prototype);return L},kindOf:Le,kindOfTest:ve,endsWith:(v,L,q)=>{v=String(v),(q===void 0||q>v.length)&&(q=v.length),q-=L.length;const ee=v.indexOf(L,q);return ee!==-1&&ee===q},toArray:v=>{if(!v)return null;if(Pe(v))return v;let L=v.length;if(!w(L))return null;const q=new Array(L);for(;L-- >0;)q[L]=v[L];return q},forEachEntry:(v,L)=>{const q=(v&&v[ce]).call(v);let ee;for(;(ee=q.next())&&!ee.done;){const _e=ee.value;L.call(v,_e[0],_e[1])}},matchAll:(v,L)=>{let q;const ee=[];for(;(q=v.exec(L))!==null;)ee.push(q);return ee},isHTMLForm:It,hasOwnProperty:Yt,hasOwnProp:Yt,reduceDescriptors:$e,freezeMethods:v=>{$e(v,(L,q)=>{if(R(v)&&["arguments","caller","callee"].indexOf(q)!==-1)return!1;const ee=v[q];R(ee)&&(L.enumerable=!1,"writable"in L?L.writable=!1:L.set||(L.set=()=>{throw Error("Can not rewrite read-only method '"+q+"'")}))})},toObjectSet:(v,L)=>{const q={},ee=_e=>{_e.forEach(Ae=>{q[Ae]=!0})};return Pe(v)?ee(v):ee(String(v).split(L)),q},toCamelCase:v=>v.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(L,q,ee){return q.toUpperCase()+ee}),noop:()=>{},toFiniteNumber:(v,L)=>v!=null&&Number.isFinite(v=+v)?v:L,findKey:bt,global:St,isContextDefined:Ue,isSpecCompliantForm:function(v){return!!(v&&R(v.append)&&v[be]==="FormData"&&v[ce])},toJSONObject:v=>{const L=new Array(10),q=(ee,_e)=>{if($(ee)){if(L.indexOf(ee)>=0)return;if(b(ee))return ee;if(!("toJSON"in ee)){L[_e]=ee;const Ae=Pe(ee)?[]:{};return qe(ee,(we,Xe)=>{const ht=q(we,_e+1);!Y(ht)&&(Ae[Xe]=ht)}),L[_e]=void 0,Ae}}return ee};return q(v,0)},isAsyncFn:lt,isThenable:v=>v&&($(v)||R(v))&&R(v.then)&&R(v.catch),setImmediate:vt,asap:ri,isIterable:v=>v!=null&&R(v[ce])};function fe(v,L,q,ee,_e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=v,this.name="AxiosError",L&&(this.code=L),q&&(this.config=q),ee&&(this.request=ee),_e&&(this.response=_e,this.status=_e.status?_e.status:null)}H.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const J=fe.prototype,K={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(v=>{K[v]={value:v}}),Object.defineProperties(fe,K),Object.defineProperty(J,"isAxiosError",{value:!0}),fe.from=(v,L,q,ee,_e,Ae)=>{const we=Object.create(J);H.toFlatObject(v,we,function(ot){return ot!==Error.prototype},ot=>ot!=="isAxiosError");const Xe=v&&v.message?v.message:"Error",ht=L==null&&v?v.code:L;return fe.call(we,Xe,ht,q,ee,_e),v&&we.cause==null&&Object.defineProperty(we,"cause",{value:v,configurable:!0}),we.name=v&&v.name||"Error",Ae&&Object.assign(we,Ae),we};const ue=fe;function Ce(v){return H.isPlainObject(v)||H.isArray(v)}function ye(v){return H.endsWith(v,"[]")?v.slice(0,-2):v}function Oe(v,L,q){return v?v.concat(L).map(function(ee,_e){return ee=ye(ee),!q&&_e?"["+ee+"]":ee}).join(q?".":""):L}const Ye=H.toFlatObject(H,{},null,function(v){return/^is[A-Z]/.test(v)}),Be=function(v,L,q){if(!H.isObject(v))throw new TypeError("target must be an object");L=L||new FormData;const ee=(q=H.toFlatObject(q,{metaTokens:!0,dots:!1,indexes:!1},!1,function(At,Rt){return!H.isUndefined(Rt[At])})).metaTokens,_e=q.visitor||ot,Ae=q.dots,we=q.indexes,Xe=(q.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(L);if(!H.isFunction(_e))throw new TypeError("visitor must be a function");function ht(At){if(At===null)return"";if(H.isDate(At))return At.toISOString();if(H.isBoolean(At))return At.toString();if(!Xe&&H.isBlob(At))throw new ue("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(At)||H.isTypedArray(At)?Xe&&typeof Blob=="function"?new Blob([At]):Buffer.from(At):At}function ot(At,Rt,Ft){let Ot=At;if(At&&!Ft&&typeof At=="object"){if(H.endsWith(Rt,"{}"))Rt=ee?Rt:Rt.slice(0,-2),At=JSON.stringify(At);else if(H.isArray(At)&&function(di){return H.isArray(di)&&!di.some(Ce)}(At)||(H.isFileList(At)||H.endsWith(Rt,"[]"))&&(Ot=H.toArray(At)))return Rt=ye(Rt),Ot.forEach(function(di,$t){!H.isUndefined(di)&&di!==null&&L.append(we===!0?Oe([Rt],$t,Ae):we===null?Rt:Rt+"[]",ht(di))}),!1}return!!Ce(At)||(L.append(Oe(Ft,Rt,Ae),ht(At)),!1)}const yt=[],Xt=Object.assign(Ye,{defaultVisitor:ot,convertValue:ht,isVisitable:Ce});if(!H.isObject(v))throw new TypeError("data must be an object");return function At(Rt,Ft){if(!H.isUndefined(Rt)){if(yt.indexOf(Rt)!==-1)throw Error("Circular reference detected in "+Ft.join("."));yt.push(Rt),H.forEach(Rt,function(Ot,di){(!(H.isUndefined(Ot)||Ot===null)&&_e.call(L,Ot,H.isString(di)?di.trim():di,Ft,Xt))===!0&&At(Ot,Ft?Ft.concat(di):[di])}),yt.pop()}}(v),L};function et(v){const L={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(v).replace(/[!'()~]|%20|%00/g,function(q){return L[q]})}function Ze(v,L){this._pairs=[],v&&Be(v,this,L)}const nt=Ze.prototype;nt.append=function(v,L){this._pairs.push([v,L])},nt.toString=function(v){const L=v?function(q){return v.call(this,q,et)}:et;return this._pairs.map(function(q){return L(q[0])+"="+L(q[1])},"").join("&")};const at=Ze;function kt(v){return encodeURIComponent(v).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function qt(v,L,q){if(!L)return v;const ee=q&&q.encode||kt;H.isFunction(q)&&(q={serialize:q});const _e=q&&q.serialize;let Ae;if(Ae=_e?_e(L,q):H.isURLSearchParams(L)?L.toString():new at(L,q).toString(ee),Ae){const we=v.indexOf("#");we!==-1&&(v=v.slice(0,we)),v+=(v.indexOf("?")===-1?"?":"&")+Ae}return v}const gi=class{constructor(){this.handlers=[]}use(v,L,q){return this.handlers.push({fulfilled:v,rejected:L,synchronous:!!q&&q.synchronous,runWhen:q?q.runWhen:null}),this.handlers.length-1}eject(v){this.handlers[v]&&(this.handlers[v]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(v){H.forEach(this.handlers,function(L){L!==null&&v(L)})}},xi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ai={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:at,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},ui=typeof window<"u"&&typeof document<"u",Oi=typeof navigator=="object"&&navigator||void 0,qi=ui&&(!Oi||["ReactNative","NativeScript","NS"].indexOf(Oi.product)<0),Li=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Vi=ui&&window.location.href||"http://localhost",Di={...r,...Ai},Un=function(v){function L(q,ee,_e,Ae){let we=q[Ae++];if(we==="__proto__")return!0;const Xe=Number.isFinite(+we),ht=Ae>=q.length;return we=!we&&H.isArray(_e)?_e.length:we,ht?(H.hasOwnProp(_e,we)?_e[we]=[_e[we],ee]:_e[we]=ee,!Xe):(_e[we]&&H.isObject(_e[we])||(_e[we]=[]),L(q,ee,_e[we],Ae)&&H.isArray(_e[we])&&(_e[we]=function(ot){const yt={},Xt=Object.keys(ot);let At;const Rt=Xt.length;let Ft;for(At=0;At<Rt;At++)Ft=Xt[At],yt[Ft]=ot[Ft];return yt}(_e[we])),!Xe)}if(H.isFormData(v)&&H.isFunction(v.entries)){const q={};return H.forEachEntry(v,(ee,_e)=>{L(function(Ae){return H.matchAll(/\w+|\[(\w*)]/g,Ae).map(we=>we[0]==="[]"?"":we[1]||we[0])}(ee),_e,q,0)}),q}return null},Ci={transitional:xi,adapter:["xhr","http","fetch"],transformRequest:[function(v,L){const q=L.getContentType()||"",ee=q.indexOf("application/json")>-1,_e=H.isObject(v);if(_e&&H.isHTMLForm(v)&&(v=new FormData(v)),H.isFormData(v))return ee?JSON.stringify(Un(v)):v;if(H.isArrayBuffer(v)||H.isBuffer(v)||H.isStream(v)||H.isFile(v)||H.isBlob(v)||H.isReadableStream(v))return v;if(H.isArrayBufferView(v))return v.buffer;if(H.isURLSearchParams(v))return L.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),v.toString();let Ae;if(_e){if(q.indexOf("application/x-www-form-urlencoded")>-1)return function(we,Xe){return Be(we,new Di.classes.URLSearchParams,{visitor:function(ht,ot,yt,Xt){return Di.isNode&&H.isBuffer(ht)?(this.append(ot,ht.toString("base64")),!1):Xt.defaultVisitor.apply(this,arguments)},...Xe})}(v,this.formSerializer).toString();if((Ae=H.isFileList(v))||q.indexOf("multipart/form-data")>-1){const we=this.env&&this.env.FormData;return Be(Ae?{"files[]":v}:v,we&&new we,this.formSerializer)}}return _e||ee?(L.setContentType("application/json",!1),function(we,Xe,ht){if(H.isString(we))try{return(Xe||JSON.parse)(we),H.trim(we)}catch(ot){if(ot.name!=="SyntaxError")throw ot}return(ht||JSON.stringify)(we)}(v)):v}],transformResponse:[function(v){const L=this.transitional||Ci.transitional,q=L&&L.forcedJSONParsing,ee=this.responseType==="json";if(H.isResponse(v)||H.isReadableStream(v))return v;if(v&&H.isString(v)&&(q&&!this.responseType||ee)){const _e=!(L&&L.silentJSONParsing)&&ee;try{return JSON.parse(v,this.parseReviver)}catch(Ae){if(_e)throw Ae.name==="SyntaxError"?ue.from(Ae,ue.ERR_BAD_RESPONSE,this,null,this.response):Ae}}return v}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Di.classes.FormData,Blob:Di.classes.Blob},validateStatus:function(v){return v>=200&&v<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],v=>{Ci.headers[v]={}});const Zi=Ci,gn=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),E=Symbol("internals");function F(v){return v&&String(v).trim().toLowerCase()}function h(v){return v===!1||v==null?v:H.isArray(v)?v.map(h):String(v)}function m(v,L,q,ee,_e){return H.isFunction(ee)?ee.call(this,L,q):(_e&&(L=q),H.isString(L)?H.isString(ee)?L.indexOf(ee)!==-1:H.isRegExp(ee)?ee.test(L):void 0:void 0)}class u{constructor(L){L&&this.set(L)}set(L,q,ee){const _e=this;function Ae(Xe,ht,ot){const yt=F(ht);if(!yt)throw new Error("header name must be a non-empty string");const Xt=H.findKey(_e,yt);(!Xt||_e[Xt]===void 0||ot===!0||ot===void 0&&_e[Xt]!==!1)&&(_e[Xt||ht]=h(Xe))}const we=(Xe,ht)=>H.forEach(Xe,(ot,yt)=>Ae(ot,yt,ht));if(H.isPlainObject(L)||L instanceof this.constructor)we(L,q);else if(H.isString(L)&&(L=L.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(L.trim()))we((Xe=>{const ht={};let ot,yt,Xt;return Xe&&Xe.split(`
`).forEach(function(At){Xt=At.indexOf(":"),ot=At.substring(0,Xt).trim().toLowerCase(),yt=At.substring(Xt+1).trim(),!ot||ht[ot]&&gn[ot]||(ot==="set-cookie"?ht[ot]?ht[ot].push(yt):ht[ot]=[yt]:ht[ot]=ht[ot]?ht[ot]+", "+yt:yt)}),ht})(L),q);else if(H.isObject(L)&&H.isIterable(L)){let Xe,ht,ot={};for(const yt of L){if(!H.isArray(yt))throw TypeError("Object iterator must return a key-value pair");ot[ht=yt[0]]=(Xe=ot[ht])?H.isArray(Xe)?[...Xe,yt[1]]:[Xe,yt[1]]:yt[1]}we(ot,q)}else L!=null&&Ae(q,L,ee);return this}get(L,q){if(L=F(L)){const ee=H.findKey(this,L);if(ee){const _e=this[ee];if(!q)return _e;if(q===!0)return function(Ae){const we=Object.create(null),Xe=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let ht;for(;ht=Xe.exec(Ae);)we[ht[1]]=ht[2];return we}(_e);if(H.isFunction(q))return q.call(this,_e,ee);if(H.isRegExp(q))return q.exec(_e);throw new TypeError("parser must be boolean|regexp|function")}}}has(L,q){if(L=F(L)){const ee=H.findKey(this,L);return!(!ee||this[ee]===void 0||q&&!m(0,this[ee],ee,q))}return!1}delete(L,q){const ee=this;let _e=!1;function Ae(we){if(we=F(we)){const Xe=H.findKey(ee,we);!Xe||q&&!m(0,ee[Xe],Xe,q)||(delete ee[Xe],_e=!0)}}return H.isArray(L)?L.forEach(Ae):Ae(L),_e}clear(L){const q=Object.keys(this);let ee=q.length,_e=!1;for(;ee--;){const Ae=q[ee];L&&!m(0,this[Ae],Ae,L,!0)||(delete this[Ae],_e=!0)}return _e}normalize(L){const q=this,ee={};return H.forEach(this,(_e,Ae)=>{const we=H.findKey(ee,Ae);if(we)return q[we]=h(_e),void delete q[Ae];const Xe=L?function(ht){return ht.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(ot,yt,Xt)=>yt.toUpperCase()+Xt)}(Ae):String(Ae).trim();Xe!==Ae&&delete q[Ae],q[Xe]=h(_e),ee[Xe]=!0}),this}concat(...L){return this.constructor.concat(this,...L)}toJSON(L){const q=Object.create(null);return H.forEach(this,(ee,_e)=>{ee!=null&&ee!==!1&&(q[_e]=L&&H.isArray(ee)?ee.join(", "):ee)}),q}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([L,q])=>L+": "+q).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(L){return L instanceof this?L:new this(L)}static concat(L,...q){const ee=new this(L);return q.forEach(_e=>ee.set(_e)),ee}static accessor(L){const q=(this[E]=this[E]={accessors:{}}).accessors,ee=this.prototype;function _e(Ae){const we=F(Ae);q[we]||(function(Xe,ht){const ot=H.toCamelCase(" "+ht);["get","set","has"].forEach(yt=>{Object.defineProperty(Xe,yt+ot,{value:function(Xt,At,Rt){return this[yt].call(this,ht,Xt,At,Rt)},configurable:!0})})}(ee,Ae),q[we]=!0)}return H.isArray(L)?L.forEach(_e):_e(L),this}}u.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),H.reduceDescriptors(u.prototype,({value:v},L)=>{let q=L[0].toUpperCase()+L.slice(1);return{get:()=>v,set(ee){this[q]=ee}}}),H.freezeMethods(u);const _=u;function x(v,L){const q=this||Zi,ee=L||q,_e=_.from(ee.headers);let Ae=ee.data;return H.forEach(v,function(we){Ae=we.call(q,Ae,_e.normalize(),L?L.status:void 0)}),_e.normalize(),Ae}function T(v){return!(!v||!v.__CANCEL__)}function D(v,L,q){ue.call(this,v??"canceled",ue.ERR_CANCELED,L,q),this.name="CanceledError"}H.inherits(D,ue,{__CANCEL__:!0});const B=D;function j(v,L,q){const ee=q.config.validateStatus;q.status&&ee&&!ee(q.status)?L(new ue("Request failed with status code "+q.status,[ue.ERR_BAD_REQUEST,ue.ERR_BAD_RESPONSE][Math.floor(q.status/100)-4],q.config,q.request,q)):v(q)}const Q=function(v,L){v=v||10;const q=new Array(v),ee=new Array(v);let _e,Ae=0,we=0;return L=L!==void 0?L:1e3,function(Xe){const ht=Date.now(),ot=ee[we];_e||(_e=ht),q[Ae]=Xe,ee[Ae]=ht;let yt=we,Xt=0;for(;yt!==Ae;)Xt+=q[yt++],yt%=v;if(Ae=(Ae+1)%v,Ae===we&&(we=(we+1)%v),ht-_e<L)return;const At=ot&&ht-ot;return At?Math.round(1e3*Xt/At):void 0}},ne=function(v,L){let q,ee,_e=0,Ae=1e3/L;const we=(Xe,ht=Date.now())=>{_e=ht,q=null,ee&&(clearTimeout(ee),ee=null),v(...Xe)};return[(...Xe)=>{const ht=Date.now(),ot=ht-_e;ot>=Ae?we(Xe,ht):(q=Xe,ee||(ee=setTimeout(()=>{ee=null,we(q)},Ae-ot)))},()=>q&&we(q)]},te=(v,L,q=3)=>{let ee=0;const _e=Q(50,250);return ne(Ae=>{const we=Ae.loaded,Xe=Ae.lengthComputable?Ae.total:void 0,ht=we-ee,ot=_e(ht);ee=we,v({loaded:we,total:Xe,progress:Xe?we/Xe:void 0,bytes:ht,rate:ot||void 0,estimated:ot&&Xe&&we<=Xe?(Xe-we)/ot:void 0,event:Ae,lengthComputable:Xe!=null,[L?"download":"upload"]:!0})},q)},ae=(v,L)=>{const q=v!=null;return[ee=>L[0]({lengthComputable:q,total:v,loaded:ee}),L[1]]},re=v=>(...L)=>H.asap(()=>v(...L)),de=Di.hasStandardBrowserEnv?((v,L)=>q=>(q=new URL(q,Di.origin),v.protocol===q.protocol&&v.host===q.host&&(L||v.port===q.port)))(new URL(Di.origin),Di.navigator&&/(msie|trident)/i.test(Di.navigator.userAgent)):()=>!0,he=Di.hasStandardBrowserEnv?{write(v,L,q,ee,_e,Ae,we){if(typeof document>"u")return;const Xe=[`${v}=${encodeURIComponent(L)}`];H.isNumber(q)&&Xe.push(`expires=${new Date(q).toUTCString()}`),H.isString(ee)&&Xe.push(`path=${ee}`),H.isString(_e)&&Xe.push(`domain=${_e}`),Ae===!0&&Xe.push("secure"),H.isString(we)&&Xe.push(`SameSite=${we}`),document.cookie=Xe.join("; ")},read(v){if(typeof document>"u")return null;const L=document.cookie.match(new RegExp("(?:^|; )"+v+"=([^;]*)"));return L?decodeURIComponent(L[1]):null},remove(v){this.write(v,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function pe(v,L,q){let ee=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(L);return v&&(ee||q==0)?function(_e,Ae){return Ae?_e.replace(/\/?\/$/,"")+"/"+Ae.replace(/^\/+/,""):_e}(v,L):L}const oe=v=>v instanceof _?{...v}:v;function Ie(v,L){L=L||{};const q={};function ee(ot,yt,Xt,At){return H.isPlainObject(ot)&&H.isPlainObject(yt)?H.merge.call({caseless:At},ot,yt):H.isPlainObject(yt)?H.merge({},yt):H.isArray(yt)?yt.slice():yt}function _e(ot,yt,Xt,At){return H.isUndefined(yt)?H.isUndefined(ot)?void 0:ee(void 0,ot,0,At):ee(ot,yt,0,At)}function Ae(ot,yt){if(!H.isUndefined(yt))return ee(void 0,yt)}function we(ot,yt){return H.isUndefined(yt)?H.isUndefined(ot)?void 0:ee(void 0,ot):ee(void 0,yt)}function Xe(ot,yt,Xt){return Xt in L?ee(ot,yt):Xt in v?ee(void 0,ot):void 0}const ht={url:Ae,method:Ae,data:Ae,baseURL:we,transformRequest:we,transformResponse:we,paramsSerializer:we,timeout:we,timeoutMessage:we,withCredentials:we,withXSRFToken:we,adapter:we,responseType:we,xsrfCookieName:we,xsrfHeaderName:we,onUploadProgress:we,onDownloadProgress:we,decompress:we,maxContentLength:we,maxBodyLength:we,beforeRedirect:we,transport:we,httpAgent:we,httpsAgent:we,cancelToken:we,socketPath:we,responseEncoding:we,validateStatus:Xe,headers:(ot,yt,Xt)=>_e(oe(ot),oe(yt),0,!0)};return H.forEach(Object.keys({...v,...L}),function(ot){const yt=ht[ot]||_e,Xt=yt(v[ot],L[ot],ot);H.isUndefined(Xt)&&yt!==Xe||(q[ot]=Xt)}),q}const Ee=v=>{const L=Ie({},v);let{data:q,withXSRFToken:ee,xsrfHeaderName:_e,xsrfCookieName:Ae,headers:we,auth:Xe}=L;if(L.headers=we=_.from(we),L.url=qt(pe(L.baseURL,L.url,L.allowAbsoluteUrls),v.params,v.paramsSerializer),Xe&&we.set("Authorization","Basic "+btoa((Xe.username||"")+":"+(Xe.password?unescape(encodeURIComponent(Xe.password)):""))),H.isFormData(q)){if(Di.hasStandardBrowserEnv||Di.hasStandardBrowserWebWorkerEnv)we.setContentType(void 0);else if(H.isFunction(q.getHeaders)){const ht=q.getHeaders(),ot=["content-type","content-length"];Object.entries(ht).forEach(([yt,Xt])=>{ot.includes(yt.toLowerCase())&&we.set(yt,Xt)})}}if(Di.hasStandardBrowserEnv&&(ee&&H.isFunction(ee)&&(ee=ee(L)),ee||ee!==!1&&de(L.url))){const ht=_e&&Ae&&he.read(Ae);ht&&we.set(_e,ht)}return L},Ne=typeof XMLHttpRequest<"u"&&function(v){return new Promise(function(L,q){const ee=Ee(v);let _e=ee.data;const Ae=_.from(ee.headers).normalize();let we,Xe,ht,ot,yt,{responseType:Xt,onUploadProgress:At,onDownloadProgress:Rt}=ee;function Ft(){ot&&ot(),yt&&yt(),ee.cancelToken&&ee.cancelToken.unsubscribe(we),ee.signal&&ee.signal.removeEventListener("abort",we)}let Ot=new XMLHttpRequest;function di(){if(!Ot)return;const _i=_.from("getAllResponseHeaders"in Ot&&Ot.getAllResponseHeaders());j(function(Ki){L(Ki),Ft()},function(Ki){q(Ki),Ft()},{data:Xt&&Xt!=="text"&&Xt!=="json"?Ot.response:Ot.responseText,status:Ot.status,statusText:Ot.statusText,headers:_i,config:v,request:Ot}),Ot=null}Ot.open(ee.method.toUpperCase(),ee.url,!0),Ot.timeout=ee.timeout,"onloadend"in Ot?Ot.onloadend=di:Ot.onreadystatechange=function(){Ot&&Ot.readyState===4&&(Ot.status!==0||Ot.responseURL&&Ot.responseURL.indexOf("file:")===0)&&setTimeout(di)},Ot.onabort=function(){Ot&&(q(new ue("Request aborted",ue.ECONNABORTED,v,Ot)),Ot=null)},Ot.onerror=function(_i){const Ki=_i&&_i.message?_i.message:"Network Error",Ss=new ue(Ki,ue.ERR_NETWORK,v,Ot);Ss.event=_i||null,q(Ss),Ot=null},Ot.ontimeout=function(){let _i=ee.timeout?"timeout of "+ee.timeout+"ms exceeded":"timeout exceeded";const Ki=ee.transitional||xi;ee.timeoutErrorMessage&&(_i=ee.timeoutErrorMessage),q(new ue(_i,Ki.clarifyTimeoutError?ue.ETIMEDOUT:ue.ECONNABORTED,v,Ot)),Ot=null},_e===void 0&&Ae.setContentType(null),"setRequestHeader"in Ot&&H.forEach(Ae.toJSON(),function(_i,Ki){Ot.setRequestHeader(Ki,_i)}),H.isUndefined(ee.withCredentials)||(Ot.withCredentials=!!ee.withCredentials),Xt&&Xt!=="json"&&(Ot.responseType=ee.responseType),Rt&&([ht,yt]=te(Rt,!0),Ot.addEventListener("progress",ht)),At&&Ot.upload&&([Xe,ot]=te(At),Ot.upload.addEventListener("progress",Xe),Ot.upload.addEventListener("loadend",ot)),(ee.cancelToken||ee.signal)&&(we=_i=>{Ot&&(q(!_i||_i.type?new B(null,v,Ot):_i),Ot.abort(),Ot=null)},ee.cancelToken&&ee.cancelToken.subscribe(we),ee.signal&&(ee.signal.aborted?we():ee.signal.addEventListener("abort",we)));const $t=function(_i){const Ki=/^([-+\w]{1,25})(:?\/\/|:)/.exec(_i);return Ki&&Ki[1]||""}(ee.url);$t&&Di.protocols.indexOf($t)===-1?q(new ue("Unsupported protocol "+$t+":",ue.ERR_BAD_REQUEST,v)):Ot.send(_e||null)})},Me=(v,L)=>{const{length:q}=v=v?v.filter(Boolean):[];if(L||q){let ee,_e=new AbortController;const Ae=function(ot){if(!ee){ee=!0,Xe();const yt=ot instanceof Error?ot:this.reason;_e.abort(yt instanceof ue?yt:new B(yt instanceof Error?yt.message:yt))}};let we=L&&setTimeout(()=>{we=null,Ae(new ue(`timeout ${L} of ms exceeded`,ue.ETIMEDOUT))},L);const Xe=()=>{v&&(we&&clearTimeout(we),we=null,v.forEach(ot=>{ot.unsubscribe?ot.unsubscribe(Ae):ot.removeEventListener("abort",Ae)}),v=null)};v.forEach(ot=>ot.addEventListener("abort",Ae));const{signal:ht}=_e;return ht.unsubscribe=()=>H.asap(Xe),ht}},De=function*(v,L){let q=v.byteLength;if(q<L)return void(yield v);let ee,_e=0;for(;_e<q;)ee=_e+L,yield v.slice(_e,ee),_e=ee},We=async function*(v){if(v[Symbol.asyncIterator])return void(yield*v);const L=v.getReader();try{for(;;){const{done:q,value:ee}=await L.read();if(q)break;yield ee}}finally{await L.cancel()}},Ke=(v,L,q,ee)=>{const _e=async function*(ht,ot){for await(const yt of We(ht))yield*De(yt,ot)}(v,L);let Ae,we=0,Xe=ht=>{Ae||(Ae=!0,ee&&ee(ht))};return new ReadableStream({async pull(ht){try{const{done:ot,value:yt}=await _e.next();if(ot)return Xe(),void ht.close();let Xt=yt.byteLength;if(q){let At=we+=Xt;q(At)}ht.enqueue(new Uint8Array(yt))}catch(ot){throw Xe(ot),ot}},cancel:ht=>(Xe(ht),_e.return())},{highWaterMark:2})},{isFunction:Fe}=H,ke=(({Request:v,Response:L})=>({Request:v,Response:L}))(H.global),{ReadableStream:He,TextEncoder:it}=H.global,ft=(v,...L)=>{try{return!!v(...L)}catch{return!1}},ct=v=>{v=H.merge.call({skipUndefined:!0},ke,v);const{fetch:L,Request:q,Response:ee}=v,_e=L?Fe(L):typeof fetch=="function",Ae=Fe(q),we=Fe(ee);if(!_e)return!1;const Xe=_e&&Fe(He),ht=_e&&(typeof it=="function"?(ot=new it,Ft=>ot.encode(Ft)):async Ft=>new Uint8Array(await new q(Ft).arrayBuffer()));var ot;const yt=Ae&&Xe&&ft(()=>{let Ft=!1;const Ot=new q(Di.origin,{body:new He,method:"POST",get duplex(){return Ft=!0,"half"}}).headers.has("Content-Type");return Ft&&!Ot}),Xt=we&&Xe&&ft(()=>H.isReadableStream(new ee("").body)),At={stream:Xt&&(Ft=>Ft.body)};_e&&["text","arrayBuffer","blob","formData","stream"].forEach(Ft=>{!At[Ft]&&(At[Ft]=(Ot,di)=>{let $t=Ot&&Ot[Ft];if($t)return $t.call(Ot);throw new ue(`Response type '${Ft}' is not supported`,ue.ERR_NOT_SUPPORT,di)})});const Rt=async(Ft,Ot)=>{const di=H.toFiniteNumber(Ft.getContentLength());return di??(async $t=>$t==null?0:H.isBlob($t)?$t.size:H.isSpecCompliantForm($t)?(await new q(Di.origin,{method:"POST",body:$t}).arrayBuffer()).byteLength:H.isArrayBufferView($t)||H.isArrayBuffer($t)?$t.byteLength:(H.isURLSearchParams($t)&&($t+=""),H.isString($t)?(await ht($t)).byteLength:void 0))(Ot)};return async Ft=>{let{url:Ot,method:di,data:$t,signal:_i,cancelToken:Ki,timeout:Ss,onDownloadProgress:Ba,onUploadProgress:ac,responseType:ar,headers:Fa,withCredentials:Es="same-origin",fetchOptions:oc}=Ee(Ft),lc=L||fetch;ar=ar?(ar+"").toLowerCase():"text";let xs=Me([_i,Ki&&Ki.toAbortSignal()],Ss),ns=null;const mr=xs&&xs.unsubscribe&&(()=>{xs.unsubscribe()});let cc;try{if(ac&&yt&&di!=="get"&&di!=="head"&&(cc=await Rt(Fa,$t))!==0){let gr,yr=new q(Ot,{method:"POST",body:$t,duplex:"half"});if(H.isFormData($t)&&(gr=yr.headers.get("content-type"))&&Fa.setContentType(gr),yr.body){const[Na,Ts]=ae(cc,te(re(ac)));$t=Ke(yr.body,65536,Na,Ts)}}H.isString(Es)||(Es=Es?"include":"omit");const Gn=Ae&&"credentials"in q.prototype,dc={...oc,signal:xs,method:di.toUpperCase(),headers:Fa.normalize().toJSON(),body:$t,duplex:"half",credentials:Gn?Es:void 0};ns=Ae&&new q(Ot,dc);let or=await(Ae?lc(ns,oc):lc(Ot,dc));const uc=Xt&&(ar==="stream"||ar==="response");if(Xt&&(Ba||uc&&mr)){const gr={};["status","statusText","headers"].forEach(hc=>{gr[hc]=or[hc]});const yr=H.toFiniteNumber(or.headers.get("content-length")),[Na,Ts]=Ba&&ae(yr,te(re(Ba),!0))||[];or=new ee(Ke(or.body,65536,Na,()=>{Ts&&Ts(),mr&&mr()}),gr)}ar=ar||"text";let Jp=await At[H.findKey(At,ar)||"text"](or,Ft);return!uc&&mr&&mr(),await new Promise((gr,yr)=>{j(gr,yr,{data:Jp,headers:_.from(or.headers),status:or.status,statusText:or.statusText,config:Ft,request:ns})})}catch(Gn){throw mr&&mr(),Gn&&Gn.name==="TypeError"&&/Load failed|fetch/i.test(Gn.message)?Object.assign(new ue("Network Error",ue.ERR_NETWORK,Ft,ns),{cause:Gn.cause||Gn}):ue.from(Gn,Gn&&Gn.code,Ft,ns)}}},tt=new Map,dt=v=>{let L=v&&v.env||{};const{fetch:q,Request:ee,Response:_e}=L,Ae=[ee,_e,q];let we,Xe,ht=Ae.length,ot=tt;for(;ht--;)we=Ae[ht],Xe=ot.get(we),Xe===void 0&&ot.set(we,Xe=ht?new Map:ct(L)),ot=Xe;return Xe},pt=(dt(),{http:null,xhr:Ne,fetch:{get:dt}});H.forEach(pt,(v,L)=>{if(v){try{Object.defineProperty(v,"name",{value:L})}catch{}Object.defineProperty(v,"adapterName",{value:L})}});const ut=v=>`- ${v}`,Jt=v=>H.isFunction(v)||v===null||v===!1,Nt={getAdapter:function(v,L){v=H.isArray(v)?v:[v];const{length:q}=v;let ee,_e;const Ae={};for(let we=0;we<q;we++){let Xe;if(ee=v[we],_e=ee,!Jt(ee)&&(_e=pt[(Xe=String(ee)).toLowerCase()],_e===void 0))throw new ue(`Unknown adapter '${Xe}'`);if(_e&&(H.isFunction(_e)||(_e=_e.get(L))))break;Ae[Xe||"#"+we]=_e}if(!_e){const we=Object.entries(Ae).map(([ht,ot])=>`adapter ${ht} `+(ot===!1?"is not supported by the environment":"is not available in the build"));let Xe=q?we.length>1?`since :
`+we.map(ut).join(`
`):" "+ut(we[0]):"as no adapter specified";throw new ue("There is no suitable adapter to dispatch the request "+Xe,"ERR_NOT_SUPPORT")}return _e},adapters:pt};function Lt(v){if(v.cancelToken&&v.cancelToken.throwIfRequested(),v.signal&&v.signal.aborted)throw new B(null,v)}function Dt(v){return Lt(v),v.headers=_.from(v.headers),v.data=x.call(v,v.transformRequest),["post","put","patch"].indexOf(v.method)!==-1&&v.headers.setContentType("application/x-www-form-urlencoded",!1),Nt.getAdapter(v.adapter||Zi.adapter,v)(v).then(function(L){return Lt(v),L.data=x.call(v,v.transformResponse,L),L.headers=_.from(L.headers),L},function(L){return T(L)||(Lt(v),L&&L.response&&(L.response.data=x.call(v,v.transformResponse,L.response),L.response.headers=_.from(L.response.headers))),Promise.reject(L)})}const jt="1.13.2",gt={};["object","boolean","number","function","string","symbol"].forEach((v,L)=>{gt[v]=function(q){return typeof q===v||"a"+(L<1?"n ":" ")+v}});const Bt={};gt.transitional=function(v,L,q){function ee(_e,Ae){return"[Axios v"+jt+"] Transitional option '"+_e+"'"+Ae+(q?". "+q:"")}return(_e,Ae,we)=>{if(v===!1)throw new ue(ee(Ae," has been removed"+(L?" in "+L:"")),ue.ERR_DEPRECATED);return L&&!Bt[Ae]&&(Bt[Ae]=!0,console.warn(ee(Ae," has been deprecated since v"+L+" and will be removed in the near future"))),!v||v(_e,Ae,we)}},gt.spelling=function(v){return(L,q)=>(console.warn(`${q} is likely a misspelling of ${v}`),!0)};const Qt={assertOptions:function(v,L,q){if(typeof v!="object")throw new ue("options must be an object",ue.ERR_BAD_OPTION_VALUE);const ee=Object.keys(v);let _e=ee.length;for(;_e-- >0;){const Ae=ee[_e],we=L[Ae];if(we){const Xe=v[Ae],ht=Xe===void 0||we(Xe,Ae,v);if(ht!==!0)throw new ue("option "+Ae+" must be "+ht,ue.ERR_BAD_OPTION_VALUE);continue}if(q!==!0)throw new ue("Unknown option "+Ae,ue.ERR_BAD_OPTION)}},validators:gt},Et=Qt.validators;class ei{constructor(L){this.defaults=L||{},this.interceptors={request:new gi,response:new gi}}async request(L,q){try{return await this._request(L,q)}catch(ee){if(ee instanceof Error){let _e={};Error.captureStackTrace?Error.captureStackTrace(_e):_e=new Error;const Ae=_e.stack?_e.stack.replace(/^.+\n/,""):"";try{ee.stack?Ae&&!String(ee.stack).endsWith(Ae.replace(/^.+\n.+\n/,""))&&(ee.stack+=`
`+Ae):ee.stack=Ae}catch{}}throw ee}}_request(L,q){typeof L=="string"?(q=q||{}).url=L:q=L||{},q=Ie(this.defaults,q);const{transitional:ee,paramsSerializer:_e,headers:Ae}=q;ee!==void 0&&Qt.assertOptions(ee,{silentJSONParsing:Et.transitional(Et.boolean),forcedJSONParsing:Et.transitional(Et.boolean),clarifyTimeoutError:Et.transitional(Et.boolean)},!1),_e!=null&&(H.isFunction(_e)?q.paramsSerializer={serialize:_e}:Qt.assertOptions(_e,{encode:Et.function,serialize:Et.function},!0)),q.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?q.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:q.allowAbsoluteUrls=!0),Qt.assertOptions(q,{baseUrl:Et.spelling("baseURL"),withXsrfToken:Et.spelling("withXSRFToken")},!0),q.method=(q.method||this.defaults.method||"get").toLowerCase();let we=Ae&&H.merge(Ae.common,Ae[q.method]);Ae&&H.forEach(["delete","get","head","post","put","patch","common"],Ft=>{delete Ae[Ft]}),q.headers=_.concat(we,Ae);const Xe=[];let ht=!0;this.interceptors.request.forEach(function(Ft){typeof Ft.runWhen=="function"&&Ft.runWhen(q)===!1||(ht=ht&&Ft.synchronous,Xe.unshift(Ft.fulfilled,Ft.rejected))});const ot=[];let yt;this.interceptors.response.forEach(function(Ft){ot.push(Ft.fulfilled,Ft.rejected)});let Xt,At=0;if(!ht){const Ft=[Dt.bind(this),void 0];for(Ft.unshift(...Xe),Ft.push(...ot),Xt=Ft.length,yt=Promise.resolve(q);At<Xt;)yt=yt.then(Ft[At++],Ft[At++]);return yt}Xt=Xe.length;let Rt=q;for(;At<Xt;){const Ft=Xe[At++],Ot=Xe[At++];try{Rt=Ft(Rt)}catch(di){Ot.call(this,di);break}}try{yt=Dt.call(this,Rt)}catch(Ft){return Promise.reject(Ft)}for(At=0,Xt=ot.length;At<Xt;)yt=yt.then(ot[At++],ot[At++]);return yt}getUri(L){return qt(pe((L=Ie(this.defaults,L)).baseURL,L.url,L.allowAbsoluteUrls),L.params,L.paramsSerializer)}}H.forEach(["delete","get","head","options"],function(v){ei.prototype[v]=function(L,q){return this.request(Ie(q||{},{method:v,url:L,data:(q||{}).data}))}}),H.forEach(["post","put","patch"],function(v){function L(q){return function(ee,_e,Ae){return this.request(Ie(Ae||{},{method:v,headers:q?{"Content-Type":"multipart/form-data"}:{},url:ee,data:_e}))}}ei.prototype[v]=L(),ei.prototype[v+"Form"]=L(!0)});const ii=ei;class hi{constructor(L){if(typeof L!="function")throw new TypeError("executor must be a function.");let q;this.promise=new Promise(function(_e){q=_e});const ee=this;this.promise.then(_e=>{if(!ee._listeners)return;let Ae=ee._listeners.length;for(;Ae-- >0;)ee._listeners[Ae](_e);ee._listeners=null}),this.promise.then=_e=>{let Ae;const we=new Promise(Xe=>{ee.subscribe(Xe),Ae=Xe}).then(_e);return we.cancel=function(){ee.unsubscribe(Ae)},we},L(function(_e,Ae,we){ee.reason||(ee.reason=new B(_e,Ae,we),q(ee.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(L){this.reason?L(this.reason):this._listeners?this._listeners.push(L):this._listeners=[L]}unsubscribe(L){if(!this._listeners)return;const q=this._listeners.indexOf(L);q!==-1&&this._listeners.splice(q,1)}toAbortSignal(){const L=new AbortController,q=ee=>{L.abort(ee)};return this.subscribe(q),L.signal.unsubscribe=()=>this.unsubscribe(q),L.signal}static source(){let L;return{token:new hi(function(q){L=q}),cancel:L}}}const ci=hi,wi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(wi).forEach(([v,L])=>{wi[L]=v});const pi=wi,ai=function v(L){const q=new ii(L),ee=U(ii.prototype.request,q);return H.extend(ee,ii.prototype,q,{allOwnKeys:!0}),H.extend(ee,q,null,{allOwnKeys:!0}),ee.create=function(_e){return v(Ie(L,_e))},ee}(Zi);ai.Axios=ii,ai.CanceledError=B,ai.CancelToken=ci,ai.isCancel=T,ai.VERSION=jt,ai.toFormData=Be,ai.AxiosError=ue,ai.Cancel=ai.CanceledError,ai.all=function(v){return Promise.all(v)},ai.spread=function(v){return function(L){return v.apply(null,L)}},ai.isAxiosError=function(v){return H.isObject(v)&&v.isAxiosError===!0},ai.mergeConfig=Ie,ai.AxiosHeaders=_,ai.formToJSON=v=>Un(H.isHTMLForm(v)?new FormData(v):v),ai.getAdapter=Nt.getAdapter,ai.HttpStatusCode=pi,ai.default=ai;const en=ai,dn={send:v=>{v.url!==void 0?en.post(v.url,v.data).then(L=>{const q=L.data;q&&q.code===0?v.success&&v.success():v.error&&v.error(q&&q.msg)}).catch(L=>{console.error(L),v.error&&v.error()}):v.error&&v.error()},read:v=>{v.url!==void 0?en.get(v.url).then(L=>{const q=L.data;q&&q.code===0?q.data?v.success&&v.success(q.data.map(ee=>({author:ee[3],time:ee[0],text:ee[4],color:ee[2],type:ee[1],size:ee[5]&&(ee[5]==="big"||ee[5]==="small")?ee[5]:"medium"}))):v.success&&v.success([{author:"",time:0,text:"",color:"#ffeaea",type:"right",size:"medium"}]):v.error&&v.error(q&&q.msg)}).catch(L=>{console.error(L),v.error&&v.error()}):v.error&&v.error()}},tn=dn,nn={"zh-cn":{"Danmaku is loading":"ÂºπÂπïÂä†ËΩΩ‰∏≠",Top:"È°∂ÈÉ®",Bottom:"Â∫ïÈÉ®",Rolling:"ÊªöÂä®",Big:"Â§ßÁöÑ",Medium:"‰∏≠Á≠âÁöÑ",Small:"Â∞èÁöÑ","Input danmaku, hit Enter":"ËæìÂÖ•ÂºπÂπïÔºåÂõûËΩ¶ÂèëÈÄÅ","About author":"ÂÖ≥‰∫é‰ΩúËÄÖ","DPlayer feedback":"Êí≠ÊîæÂô®ÊÑèËßÅÂèçÈ¶à","About DPlayer":"ÂÖ≥‰∫é DPlayer Êí≠ÊîæÂô®",Loop:"Ê¥óËÑëÂæ™ÁéØ",Speed:"ÈÄüÂ∫¶",Audio:"Èü≥È¢ë","Primary audio":"‰∏ªË¶ÅÈü≥È¢ë","Secondary audio":"ËæÖÂä©Èü≥È¢ë","Opacity for danmaku":"ÂºπÂπïÈÄèÊòéÂ∫¶",Normal:"Ê≠£Â∏∏","Please input danmaku content!":"Ë¶ÅËæìÂÖ•ÂºπÂπïÂÜÖÂÆπÂïäÂñÇÔºÅ","Set danmaku color":"ËÆæÁΩÆÂºπÂπïÈ¢úËâ≤","Set danmaku type":"ËÆæÁΩÆÂºπÂπïÁ±ªÂûã","Set danmaku size":"ËÆæÁΩÆÂºπÂπïÂ§ßÂ∞è","Show danmaku":"ÊòæÁ§∫ÂºπÂπï","Video load failed":"ËßÜÈ¢ëÂä†ËΩΩÂ§±Ë¥•","Danmaku load failed":"ÂºπÂπïÂä†ËΩΩÂ§±Ë¥•","Danmaku send failed":"ÂºπÂπïÂèëÈÄÅÂ§±Ë¥•","Switching to":"Ê≠£Âú®ÂàáÊç¢Ëá≥","Switched to":"Â∑≤ÁªèÂàáÊç¢Ëá≥",Synchronize:"ÂêåÊ≠•",Synchronized:"ÂêåÊ≠•ÁöÑ",Quality:"ÁîªË¥®",quality:"ÁîªË¥®",FF:"Âø´Ëøõ",REW:"Âø´ÈÄÄ","Unlimited danmaku":"Êµ∑ÈáèÂºπÂπï","Send danmaku":"ÂèëÈÄÅÂºπÂπï",Setting:"ËÆæÁΩÆ","Full screen":"ÂÖ®Â±è","Web full screen":"È°µÈù¢ÂÖ®Â±è","Picture-in-Picture":"Â≠êÊØçÁîªÈù¢",Send:"ÂèëÈÄÅ",Screenshot:"Êà™Âõæ",AirPlay:"Êó†Á∫øÊäïÂ±è",s:"Áßí","Show comment":"ÊòæÁ§∫ÂºπÂπï","Hide comment":"ÈöêËóèÂºπÂπï","Show subtitle":"ÊòæÁ§∫Â≠óÂπï","Hide subtitle":"ÈöêËóèÂ≠óÂπï",Volume:"Èü≥Èáè",Live:"Áõ¥Êí≠","Video info":"ËßÜÈ¢ëÁªüËÆ°‰ø°ÊÅØ"},"zh-tw":{"Danmaku is loading":"ÂΩàÂπïËºâÂÖ•‰∏≠",Top:"È†ÇÈÉ®",Bottom:"Â∫ïÈÉ®",Rolling:"ÊªæÂãï",Big:"Â§ßÁöÑ",Medium:"‰∏≠Á≠âÁöÑ",Small:"Â∞èÁöÑ","Input danmaku, hit Enter":"Ëº∏ÂÖ•ÂΩàÂπïÔºåEnter ÁôºÈÄÅ","About author":"ÈóúÊñº‰ΩúËÄÖ","DPlayer feedback":"Êí≠ÊîæÂô®ÊÑèË¶ãÂõûÈ•ã","About DPlayer":"ÈóúÊñº DPlayer Êí≠ÊîæÂô®",Loop:"Âæ™Áí∞Êí≠Êîæ",Speed:"ÈÄüÂ∫¶",Audio:"Èü≥È†ª","Primary audio":"‰∏ªË¶ÅÈü≥È†ª","Secondary audio":"ËºîÂä©Èü≥È†ª","Opacity for danmaku":"ÂΩàÂπïÈÄèÊòéÂ∫¶",Normal:"Ê≠£Â∏∏","Please input danmaku content!":"Ë´ãËº∏ÂÖ•ÂΩàÂπïÂÖßÂÆπÂïäÔºÅ","Set danmaku color":"Ë®≠ÂÆöÂΩàÂπïÈ°èËâ≤","Set danmaku type":"Ë®≠ÂÆöÂΩàÂπïÈ°ûÂûã","Set danmaku size":"ËÆæÁΩÆÂºπÂπïÂ§ßÂ∞è","Show danmaku":"È°ØÁ§∫ÂΩàÂπï","Video load failed":"ÂΩ±ÁâáËºâÂÖ•Â§±Êïó","Danmaku load failed":"ÂΩàÂπïËºâÂÖ•Â§±Êïó","Danmaku send failed":"ÂΩàÂπïÁôºÈÄÅÂ§±Êïó","Switching to":"Ê≠£Âú®ÂàáÊèõËá≥","Switched to":"Â∑≤Á∂ìÂàáÊèõËá≥",Synchronize:"ÂêåÊ≠•",Synchronized:"ÂêåÊ≠•ÁöÑ",Quality:"Áï´Ë≥™",quality:"Áï´Ë≥™",FF:"Âø´ÈÄ≤",REW:"Âø´ÈÄÄ","Unlimited danmaku":"Â∑®ÈáèÂΩàÂπï","Send danmaku":"ÁôºÈÄÅÂΩàÂπï",Setting:"Ë®≠ÂÆö","Full screen":"ÂÖ®Ëû¢Âπï","Web full screen":"È†ÅÈù¢ÂÖ®Ëû¢Âπï","Picture-in-Picture":"Â≠êÊØçÁï´Èù¢",Send:"ÁôºÈÄÅ",Screenshot:"Êà™Âúñ",AirPlay:"ÁÑ°Á∑öÊäïÂ±è",s:"Áßí","Show comment":"È°ØÁ§∫ÂΩàÂπï","Hide comment":"Èö±ËóèÂΩàÂπï","Show subtitle":"È°ØÁ§∫Â≠óÂπï","Hide subtitle":"Èö±ËóèÂ≠óÂπï",Volume:"Èü≥Èáè",Live:"Áõ¥Êí≠","Video info":"ÂΩ±ÁâáÁµ±Ë®àË®äÊÅØ"},"ja-jp":{"Danmaku is loading":"„Ç≥„É°„É≥„Éà„ÇíË™≠„ÅøËæº„Åø‰∏≠‚Ä¶",Top:"‰∏äÂõ∫ÂÆö",Bottom:"‰∏ãÂõ∫ÂÆö",Rolling:"„Çπ„ÇØ„É≠„Éº„É´",Big:"Â§ß„Åç„ÇÅ",Medium:"Ê®ôÊ∫ñ",Small:"Â∞è„Åï„ÇÅ","Input danmaku, hit Enter":"Âè≥„ÅÆ„Éú„Çø„É≥„ÇíÊäº„Åô„Å®„Ç≥„É°„É≥„Éà„Åß„Åç„Åæ„Åô","About author":"‰ΩúËÄÖ„Å´„Å§„ÅÑ„Å¶","DPlayer feedback":"„Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ","About DPlayer":"DPlayer „Å´„Å§„ÅÑ„Å¶",Loop:"„É™„Éî„Éº„ÉàÂÜçÁîü",Speed:"ÂÜçÁîüÈÄüÂ∫¶",Audio:"Èü≥Â£∞","Primary audio":"‰∏ªÈü≥Â£∞","Secondary audio":"ÂâØÈü≥Â£∞","Opacity for danmaku":"„Ç≥„É°„É≥„Éà„ÅÆÈÄèÊòéÂ∫¶",Normal:"Ê®ôÊ∫ñ","Please input danmaku content!":"„Ç≥„É°„É≥„ÉàÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶‰∏ã„Åï„ÅÑÔºÅ","Set danmaku color":"„Ç≥„É°„É≥„Éà„ÅÆËâ≤","Set danmaku type":"„Ç≥„É°„É≥„Éà„ÅÆ‰ΩçÁΩÆ","Set danmaku size":"„Ç≥„É°„É≥„Éà„ÅÆ„Çµ„Ç§„Ç∫","Show danmaku":"„Ç≥„É°„É≥„Éà„ÇíË°®Á§∫","Video load failed":"ÂãïÁîª„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü‚Ä¶","Danmaku load failed":"„Ç≥„É°„É≥„Éà„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü‚Ä¶","Danmaku send failed":"„Ç≥„É°„É≥„Éà„ÅÆÈÄÅ‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü‚Ä¶","Switching to":"ÁîªË≥™„ÇíÂàá„ÇäÊõø„Åà„Å¶„ÅÑ„Åæ„Åô‚Ä¶","Switched to":"ÁîªË≥™„ÇíÂàá„ÇäÊõø„Åà„Åæ„Åó„Åü",Synchronize:"ÂêåÊúü„Åô„Çã",Synchronized:"ÂêåÊúü„Åó„Åæ„Åó„Åü",Quality:"ÁîªË≥™",quality:"ÁîªË≥™",FF:"Êó©ÈÄÅ„Çä",REW:"Êó©Êàª„Åó","Unlimited danmaku":"„Ç≥„É°„É≥„Éà„ÇíÁÑ°Âà∂Èôê„Å´Ë°®Á§∫","Send danmaku":"„Ç≥„É°„É≥„Éà„Åô„Çã",Setting:"Ë®≠ÂÆö","Full screen":"„Éï„É´„Çπ„ÇØ„É™„Éº„É≥","Web full screen":"„Éñ„É©„Ç¶„Ç∂„Éï„É´„Çπ„ÇØ„É™„Éº„É≥","Picture-in-Picture":"Picture-in-Picture",Send:"„Ç≥„É°„É≥„Éà„Åô„Çã",Screenshot:"„Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà",s:"Áßí","Show comment":"„Ç≥„É°„É≥„Éà„ÇíË°®Á§∫„Åô„Çã","Hide comment":"„Ç≥„É°„É≥„Éà„ÇíË°®Á§∫„Åó„Å™„ÅÑ","Show subtitle":"Â≠óÂπï„ÇíË°®Á§∫„Åô„Çã","Hide subtitle":"Â≠óÂπï„ÇíË°®Á§∫„Åó„Å™„ÅÑ",Volume:"Èü≥Èáè",Live:"Live","Video info":"ÂãïÁîª„ÅÆÁµ±Ë®àÊÉÖÂ†±"}},Si=function(v){this.lang=v,this.lang==="ja"&&(this.lang="ja-jp"),this.tran=L=>nn[this.lang]&&nn[this.lang][L]?nn[this.lang][L]:L};var Ti=n(416),mt=n.n(Ti),zt=n(32),zi=n.n(zt),_n=n(177),an=n.n(_n),Ui=n(833),Ei=n.n(Ui),Qi=n(278),Rn=n.n(Qi),Bn=n(513),si=n.n(Bn),Zt=n(204),Ut=n.n(Zt),fi=n(717),ki=n.n(fi),vn=n(928),Sn=n.n(vn),$n=n(657),bs=n.n($n),Rr=n(894),is=n.n(Rr),op=n(105),lp=n.n(op),cp=n(460),dp=n.n(cp),up=n(642),hp=n.n(up),fp=n(1),pp=n.n(fp),mp=n(165),gp=n.n(mp),yp=n(484),_p=n.n(yp),vp=n(137),Ap=n.n(vp),bp=n(631),Sp=n.n(bp),Ep=n(28),xp=n.n(Ep),Tp=n(30),Cp=n.n(Tp),wp=n(454),kp=n.n(wp);const Ln={play:mt(),pause:zi(),backward:an(),forward:Ei(),volumeUp:Rn(),volumeDown:si(),volumeOff:Ut(),full:ki(),fullWeb:Sn(),pip:bs(),setting:is(),left:lp(),right:dp(),check:hp(),comment:pp(),commentOff:gp(),send:_p(),pallette:Ap(),camera:Sp(),subtitle:Cp(),loading:kp(),airplay:xp()};var Ip=n(456),Rp=n.n(Ip);const Lp=class{constructor(v){Se(this,"container");Se(this,"options");Se(this,"index");Se(this,"tran");Se(this,"volumeBar");Se(this,"volumeBarWrap");Se(this,"volumeBarWrapWrap");Se(this,"volumeButton");Se(this,"volumeButtonIcon");Se(this,"volumeIcon");Se(this,"playedBar");Se(this,"loadedBar");Se(this,"playedBarWrap");Se(this,"playedBarTime");Se(this,"danmaku");Se(this,"danmakuLoading");Se(this,"video");Se(this,"bezel");Se(this,"playButton");Se(this,"playIcon");Se(this,"mobileBackwardButton");Se(this,"mobilePlayButton");Se(this,"mobileForwardButton");Se(this,"videoWrap");Se(this,"videoWrapAspect");Se(this,"controllerMask");Se(this,"ptime");Se(this,"settingButton");Se(this,"settingBox");Se(this,"settingOriginPanel");Se(this,"mask");Se(this,"syncButton");Se(this,"loop");Se(this,"loopToggle");Se(this,"showDanmaku");Se(this,"showDanmakuToggle");Se(this,"unlimitDanmaku");Se(this,"unlimitDanmakuToggle");Se(this,"quality");Se(this,"qualityValue");Se(this,"qualityHeader");Se(this,"qualityItem");Se(this,"speed");Se(this,"speedValue");Se(this,"speedHeader");Se(this,"speedItem");Se(this,"audio");Se(this,"audioValue");Se(this,"audioHeader");Se(this,"audioItem");Se(this,"danmakuOpacityBar");Se(this,"danmakuOpacityBarWrap");Se(this,"danmakuOpacityBarWrapWrap");Se(this,"danmakuOpacityBox");Se(this,"danmakuOpacityValue");Se(this,"dtime");Se(this,"controller");Se(this,"commentInput");Se(this,"commentButton");Se(this,"commentSettingBox");Se(this,"commentSettingButton");Se(this,"commentSettingFill");Se(this,"commentSendButton");Se(this,"commentSendFill");Se(this,"commentColorSettingBox");Se(this,"browserFullButton");Se(this,"webFullButton");Se(this,"pipButton");Se(this,"menu");Se(this,"menuItem");Se(this,"cameraButton");Se(this,"airplayButton");Se(this,"subtitleButton");Se(this,"subtitleButtonInner");Se(this,"subtitle");Se(this,"barPreview");Se(this,"barWrap");Se(this,"notice");Se(this,"infoPanel");Se(this,"infoPanelClose");Se(this,"infoMimeType");Se(this,"infoVersion");Se(this,"infoVideoFPS");Se(this,"infoPageFPS");Se(this,"infoDroppedFrames");Se(this,"infoType");Se(this,"infoUrl");Se(this,"infoResolution");Se(this,"infoDuration");Se(this,"infoBufferRemain");Se(this,"infoDownloadSpeed");this.container=v.container,this.options=v.options,this.index=v.index,this.tran=v.tran,this.init()}init(){this.container.innerHTML=Rp()({options:this.options,index:this.index,tran:this.tran,icons:Ln,mobile:N.isMobile,video:{current:!0,pic:this.options.video.pic,screenshot:this.options.screenshot,airplay:this.options.airplay,preload:this.options.preload,url:this.options.video.url,subtitle:this.options.subtitle,crossOrigin:this.options.crossOrigin}}),this.volumeBar=this.container.querySelector(".dplayer-volume-bar-inner"),this.volumeBarWrap=this.container.querySelector(".dplayer-volume-bar"),this.volumeBarWrapWrap=this.container.querySelector(".dplayer-volume-bar-wrap"),this.volumeButton=this.container.querySelector(".dplayer-volume"),this.volumeButtonIcon=this.container.querySelector(".dplayer-volume-icon"),this.volumeIcon=this.container.querySelector(".dplayer-volume-icon .dplayer-icon-content"),this.playedBar=this.container.querySelector(".dplayer-played"),this.loadedBar=this.container.querySelector(".dplayer-loaded"),this.playedBarWrap=this.container.querySelector(".dplayer-bar-wrap"),this.playedBarTime=this.container.querySelector(".dplayer-bar-time"),this.danmaku=this.container.querySelector(".dplayer-danmaku"),this.danmakuLoading=this.container.querySelector(".dplayer-danloading"),this.video=this.container.querySelector(".dplayer-video-current"),this.bezel=this.container.querySelector(".dplayer-bezel-icon"),this.playButton=this.container.querySelector(".dplayer-play-icon"),this.playIcon=this.container.querySelector(".dplayer-play-icon .dplayer-icon-content"),this.mobileBackwardButton=this.container.querySelector(".dplayer-mobile-icon-backward"),this.mobilePlayButton=this.container.querySelector(".dplayer-mobile-icon-play"),this.mobileForwardButton=this.container.querySelector(".dplayer-mobile-icon-forward"),this.videoWrap=this.container.querySelector(".dplayer-video-wrap"),this.videoWrapAspect=this.container.querySelector(".dplayer-video-wrap-aspect"),this.controllerMask=this.container.querySelector(".dplayer-controller-mask"),this.ptime=this.container.querySelector(".dplayer-ptime"),this.settingButton=this.container.querySelector(".dplayer-setting-icon"),this.settingBox=this.container.querySelector(".dplayer-setting-box"),this.settingOriginPanel=this.container.querySelector(".dplayer-setting-origin-panel"),this.mask=this.container.querySelector(".dplayer-mask"),this.syncButton=this.container.querySelector(".dplayer-live-badge"),this.loop=this.container.querySelector(".dplayer-setting-loop"),this.loopToggle=this.container.querySelector(".dplayer-setting-loop .dplayer-toggle-setting-input"),this.showDanmaku=this.container.querySelector(".dplayer-setting-showdan"),this.showDanmakuToggle=this.container.querySelector(".dplayer-showdan-setting-input"),this.unlimitDanmaku=this.container.querySelector(".dplayer-setting-danunlimit"),this.unlimitDanmakuToggle=this.container.querySelector(".dplayer-danunlimit-setting-input"),this.quality=this.container.querySelector(".dplayer-setting-quality"),this.qualityValue=this.container.querySelector(".dplayer-setting-quality .dplayer-label-value"),this.qualityHeader=this.container.querySelector(".dplayer-setting-quality-header"),this.qualityItem=this.container.querySelectorAll(".dplayer-setting-quality-item"),this.speed=this.container.querySelector(".dplayer-setting-speed"),this.speedValue=this.container.querySelector(".dplayer-setting-speed .dplayer-label-value"),this.speedHeader=this.container.querySelector(".dplayer-setting-speed-header"),this.speedItem=this.container.querySelectorAll(".dplayer-setting-speed-item"),this.audio=this.container.querySelector(".dplayer-setting-audio"),this.audioValue=this.container.querySelector(".dplayer-setting-audio .dplayer-label-value"),this.audioHeader=this.container.querySelector(".dplayer-setting-audio-header"),this.audioItem=this.container.querySelectorAll(".dplayer-setting-audio-item"),this.danmakuOpacityBar=this.container.querySelector(".dplayer-danmaku-bar-inner"),this.danmakuOpacityBarWrap=this.container.querySelector(".dplayer-danmaku-bar"),this.danmakuOpacityBarWrapWrap=this.container.querySelector(".dplayer-danmaku-bar-wrap"),this.danmakuOpacityBox=this.container.querySelector(".dplayer-setting-danmaku"),this.danmakuOpacityValue=this.container.querySelector(".dplayer-setting-danmaku .dplayer-label-value"),this.dtime=this.container.querySelector(".dplayer-dtime"),this.controller=this.container.querySelector(".dplayer-controller"),this.commentInput=this.container.querySelector(".dplayer-comment-input"),this.commentButton=this.container.querySelector(".dplayer-comment-icon"),this.commentSettingBox=this.container.querySelector(".dplayer-comment-setting-box"),this.commentSettingButton=this.container.querySelector(".dplayer-comment-setting-icon"),this.commentSettingFill=this.container.querySelector(".dplayer-comment-setting-icon path"),this.commentSendButton=this.container.querySelector(".dplayer-send-icon"),this.commentSendFill=this.container.querySelector(".dplayer-send-icon path"),this.commentColorSettingBox=this.container.querySelector(".dplayer-comment-setting-color"),this.browserFullButton=this.container.querySelector(".dplayer-full-icon"),this.webFullButton=this.container.querySelector(".dplayer-full-in-icon"),this.pipButton=this.container.querySelector(".dplayer-pip-icon"),this.menu=this.container.querySelector(".dplayer-menu"),this.menuItem=this.container.querySelectorAll(".dplayer-menu-item"),this.cameraButton=this.container.querySelector(".dplayer-camera-icon"),this.airplayButton=this.container.querySelector(".dplayer-airplay-icon"),this.subtitleButton=this.container.querySelector(".dplayer-subtitle-icon"),this.subtitleButtonInner=this.container.querySelector(".dplayer-subtitle-icon .dplayer-icon-content"),this.subtitle=this.container.querySelector(".dplayer-subtitle"),this.barPreview=this.container.querySelector(".dplayer-bar-preview"),this.barWrap=this.container.querySelector(".dplayer-bar-wrap"),this.notice=this.container.querySelector(".dplayer-notice"),this.infoPanel=this.container.querySelector(".dplayer-info-panel"),this.infoPanelClose=this.container.querySelector(".dplayer-info-panel-close"),this.infoMimeType=this.container.querySelector(".dplayer-info-panel-item-mimetype .dplayer-info-panel-item-data"),this.infoVersion=this.container.querySelector(".dplayer-info-panel-item-version .dplayer-info-panel-item-data"),this.infoVideoFPS=this.container.querySelector(".dplayer-info-panel-item-video-fps .dplayer-info-panel-item-data"),this.infoPageFPS=this.container.querySelector(".dplayer-info-panel-item-page-fps .dplayer-info-panel-item-data"),this.infoDroppedFrames=this.container.querySelector(".dplayer-info-panel-item-dropped-frames .dplayer-info-panel-item-data"),this.infoType=this.container.querySelector(".dplayer-info-panel-item-type .dplayer-info-panel-item-data"),this.infoUrl=this.container.querySelector(".dplayer-info-panel-item-url .dplayer-info-panel-item-data"),this.infoResolution=this.container.querySelector(".dplayer-info-panel-item-resolution .dplayer-info-panel-item-data"),this.infoDuration=this.container.querySelector(".dplayer-info-panel-item-duration .dplayer-info-panel-item-data"),this.infoBufferRemain=this.container.querySelector(".dplayer-info-panel-item-buffer-remain .dplayer-info-panel-item-data"),this.infoDownloadSpeed=this.container.querySelector(".dplayer-info-panel-item-download-speed .dplayer-info-panel-item-data")}},Dp=class{constructor(v){Se(this,"options");Se(this,"player");Se(this,"container");Se(this,"danTunnel");Se(this,"danIndex");Se(this,"danFontSize");Se(this,"dan");Se(this,"_opacity");Se(this,"events");Se(this,"unlimited");Se(this,"context",null);Se(this,"showing");Se(this,"paused",!1);this.options=v,this.player=this.options.player,this.container=this.options.container,this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.danFontSize=24,this.dan=[],this.showing=!0,this._opacity=this.options.opacity,this.events=this.options.events,this.unlimited=this.options.unlimited===1,this._measure("",0),this.load()}load(){let v;if(this.options.api.address){const q=Object.assign({},this.options.api.id?{id:this.options.api.id}:{},this.options.api.maximum?{max:this.options.api.maximum}:{}),ee=Object.entries(q).map(([_e,Ae])=>`${_e}=${Ae}`).join("&");v=ee?`${this.options.api.address}?${ee}`:this.options.api.address}const L=(this.options.api.addition||[]).slice(0);v&&L.push(v),this.options.apiBackend!==tn&&L.push("apiBackend"),this.events&&this.events.trigger("danmaku_load_start",L),this._readAllEndpoints(L,q=>{this.dan=[].concat(...q).sort((ee,_e)=>ee.time-_e.time),window.requestAnimationFrame(()=>{this.frame()}),this.options.callback(),this.events&&this.events.trigger("danmaku_load_end")})}reload(v){this.options.api=v,this.dan=[],this.clear(),this.load()}_readAllEndpoints(v,L){const q=[];let ee=0,_e=0;for(let Ae=0;Ae<v.length;++Ae)this.options.apiBackend.read({url:v[Ae],success:we=>{q[Ae]=we,++_e,_e===v.length&&L(q)},error:we=>{we&&this.options.error(we),q[Ae]=[],++ee,++_e,_e===v.length&&(ee!==v.length?this.options.error(this.options.tran("Danmaku load partial failed")):this.options.error(this.options.tran("Danmaku load failed")),L(q))}})}send(v,L,q=!1){const ee={token:this.options.api.token,id:this.options.api.id,author:this.options.api.user,time:this.options.time(),text:v.text,color:v.color,type:v.type,size:v.size};this.options.apiBackend.send({url:this.options.api.address,data:ee,success:()=>{this.dan.splice(this.danIndex,0,ee),this.danIndex++,this.draw({text:ee.text,color:ee.color,type:ee.type,size:ee.size,border:!0}),this.events&&this.events.trigger("danmaku_send",ee),L()},error:_e=>{this.options.error(_e||this.options.tran("Danmaku send failed")),q===!0&&L()}})}frame(){if(this.dan.length&&!this.paused&&this.showing){let v=this.dan[this.danIndex];const L=[];for(;v&&this.options.time()>(typeof v.time=="number"?v.time:parseFloat(v.time));)L.push(v),v=this.dan[++this.danIndex];this.draw(L)}window.requestAnimationFrame(()=>{this.frame()})}opacity(v){return v!==void 0&&(this.container.style.setProperty("--dplayer-danmaku-opacity",`${v}`),this._opacity=v,this.events&&this.events.trigger("danmaku_opacity",this._opacity)),this._opacity}draw(v){if(this.showing){let L;L=Object.prototype.toString.call(v)!=="[object Array]"?[v]:v;let ee=this.container.offsetWidth/1024*1.25;ee>=1&&(ee=1);let _e=this.options.fontSize*ee;const Ae=_e+6*ee,we=this.container.offsetWidth,Xe=this.container.offsetHeight/Ae,ht=At=>{const Rt=At.offsetWidth||parseInt(At.style.width),Ft=At.getBoundingClientRect().right||this.container.getBoundingClientRect().right+Rt;return this.container.getBoundingClientRect().right-Ft},ot=At=>(we+At)/5,yt=(At,Rt,Ft)=>{const Ot=we/ot(Ft);for(let di=0;this.unlimited||di<Xe;di++){const $t=this.danTunnel[Rt][di+""];if(!$t||!$t.length)return this.danTunnel[Rt][di+""]=[At],At.addEventListener("animationend",()=>{this.danTunnel[Rt][di+""].splice(0,1)}),di%Xe;if(Rt==="right")for(let _i=0;_i<$t.length;_i++){const Ki=ht($t[_i])-10;if(Ki<=we-Ot*ot(parseInt($t[_i].style.width))||Ki<=0)break;if(_i===$t.length-1)return this.danTunnel[Rt][di+""].push(At),At.addEventListener("animationend",()=>{this.danTunnel[Rt][di+""].splice(0,1)}),di%Xe}}return-1},Xt=document.createDocumentFragment();for(let At=0;At<L.length;At++){const Rt=L[At];switch(typeof Rt.color=="number"&&isFinite(Rt.color)&&(Rt.color=N.number2Color(Rt.color)),typeof Rt.type=="number"&&isFinite(Rt.type)&&(Rt.type=N.number2Type(Rt.type)),Rt.color||(Rt.color="#ffeaea"),(!Rt.type||Rt.type!=="right"&&Rt.type!=="top"&&Rt.type!=="bottom")&&(Rt.type="right"),Rt.size||(Rt.size="medium"),Rt.size){case"big":_e*=1.25;break;case"small":_e*=.8}const Ft=(()=>{let di=0;for(const $t of Rt.text.split(`
`)){const _i=this._measure($t,_e);_i>di&&(di=_i)}return di})(),Ot=Rt.text.split(`
`);for(const di of Rt.type==="bottom"?Ot.reverse():Ot){const $t=document.createElement("div");if($t.classList.add("dplayer-danmaku-item"),$t.classList.add(`dplayer-danmaku-${Rt.type}`),$t.classList.add(`dplayer-danmaku-size-${Rt.size}`),$t.style.color=Rt.color,"border"in Rt&&Rt.border){const Ki=document.createElement("span");Ki.style.border=`2px solid ${this.options.borderColor}`,Ki.textContent=di,$t.appendChild(Ki)}else $t.textContent=di;$t.addEventListener("animationend",()=>{this.container.removeChild($t)});const _i=yt($t,Rt.type,Ft);switch(Rt.type){case"right":_i>=0&&($t.style.width=Ft+1+"px",$t.style.top=Ae*_i+8+"px",$t.style.transform=`translateX(-${we}px)`,$t.style.willChange="transform",N.isWebKit&&($t.style.display="none"));break;case"top":_i>=0&&($t.style.width=Ft+1+"px",$t.style.top=Ae*_i+8+"px",$t.style.willChange="visibility");break;case"bottom":_i>=0&&($t.style.width=Ft+1+"px",$t.style.bottom=Ae*_i+8+"px",$t.style.willChange="visibility");break;default:console.error(`Can't handled danmaku type: ${Rt.type}`)}_i>=0&&($t.classList.add("dplayer-danmaku-move"),$t.style.animationDuration=this._danAnimation(Rt.type),Xt.appendChild($t),N.isWebKit&&Rt.type==="right"&&setTimeout(()=>{$t.style.display=""},0))}}return this.container.style.setProperty("--dplayer-danmaku-font-size",`${_e}px`),this.container.appendChild(Xt),Xt}return null}play(){this.paused=!1}pause(){this.paused=!0}_measure(v,L){this.context&&this.danFontSize===L||(this.danFontSize=L,this.context=document.createElement("canvas").getContext("2d"),this.context.font=`bold ${this.danFontSize}px "Segoe UI", Arial`);const q=v.split(`
`);let ee=0;for(let _e=0;_e<q.length;_e++)ee=Math.max(ee,this.context.measureText(q[_e]).width);return ee}seek(){this.clear();for(let v=0;v<this.dan.length;v++){if(this.dan[v].time>=this.options.time()){this.danIndex=v;break}this.danIndex=this.dan.length}}clear(){this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.options.container.innerHTML="",this.events&&this.events.trigger("danmaku_clear")}resize(){const v=this.container.offsetWidth,L=this.container.querySelectorAll(".dplayer-danmaku-item");for(let q=0;q<L.length;q++)L[q].style.transform=`translateX(-${v}px)`}hide(){this.showing=!1,this.pause(),this.clear(),this.events&&this.events.trigger("danmaku_hide")}show(){this.seek(),this.showing=!0,this.play(),this.events&&this.events.trigger("danmaku_show")}toggle(){this.showing?this.hide():this.show()}unlimit(v){this.unlimited=v}speed(v){this.options.speedRate=v}_danAnimation(v){const L=this.options.speedRate,q=this.player.fullScreen.isFullScreen("browser")||this.player.fullScreen.isFullScreen("web");return{top:(q?4.5:4)/L+"s",right:(q?5.5:5)/L+"s",bottom:(q?4.5:4)/L+"s"}[v]}},Pp=class{constructor(){Se(this,"events");Se(this,"videoEvents");Se(this,"playerEvents");this.events={},this.videoEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["screenshot","thumbnails_show","thumbnails_hide","danmaku_show","danmaku_hide","danmaku_clear","danmaku_load_start","danmaku_load_end","danmaku_send","danmaku_opacity","contextmenu_show","contextmenu_hide","notice_show","notice_hide","quality_start","quality_end","destroy","resize","fullscreen","fullscreen_cancel","webfullscreen","webfullscreen_cancel","subtitle_show","subtitle_hide","subtitle_change"]}on(v,L,q=!1){this.type(v)&&typeof L=="function"&&(this.events[v]||(this.events[v]=[]),this.events[v].push({callback:L,once:q}))}off(v,L){if(this.type(v)&&typeof L=="function"&&this.events[v])for(const q of this.events[v])q.callback===L&&this.events[v].splice(this.events[v].indexOf(q),1)}trigger(v,L){if(this.events[v]&&this.events[v].length)for(const q of this.events[v])q.callback(L),q.once&&this.off(v,q.callback)}type(v){return this.playerEvents.indexOf(v)!==-1?"player":this.videoEvents.indexOf(v)!==-1?"video":(console.error(`Unknown event name: ${v}`),null)}},Op=class{constructor(v){Se(this,"player");Se(this,"lastScrollPosition");Se(this,"fullscreenchange");this.player=v,this.lastScrollPosition={left:0,top:0},this.player.events.on("webfullscreen",()=>{this.player.resize()}),this.player.events.on("webfullscreen_cancel",()=>{this.player.resize(),N.setScrollPosition(this.lastScrollPosition)}),this.fullscreenchange=()=>{this.player.resize(),this.isFullScreen("browser")?this.player.events.trigger("fullscreen"):(N.setScrollPosition(this.lastScrollPosition),this.player.container.classList.remove("dplayer-fulled-browser"),this.player.events.trigger("fullscreen_cancel"))},this.player.container.onfullscreenchange!==void 0?this.player.container.addEventListener("fullscreenchange",this.fullscreenchange):this.player.container.addEventListener("webkitfullscreenchange",this.fullscreenchange)}isFullScreen(v="browser"){switch(v){case"browser":{const L=document.fullscreenElement||document.webkitFullscreenElement;return!(!L||L!==this.player.container)}case"web":return this.player.container.classList.contains("dplayer-fulled")}}request(v="browser"){const L=v==="browser"?"web":"browser",q=this.isFullScreen(L);switch(q||(this.lastScrollPosition=N.getScrollPosition()),v){case"browser":if(this.player.container.requestFullscreen=this.player.container.requestFullscreen||this.player.container.webkitRequestFullscreen,this.player.container.requestFullscreen!==void 0?this.player.container.requestFullscreen():this.player.video.webkitEnterFullscreen&&this.player.video.webkitEnterFullscreen(),screen.orientation)try{screen.orientation.lock("landscape").catch(()=>{})}catch{}this.player.container.requestFullscreen!==void 0&&this.player.container.classList.add("dplayer-fulled-browser");break;case"web":this.player.container.classList.add("dplayer-fulled"),document.body.classList.add("dplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen")}q&&this.cancel(L)}cancel(v="browser"){switch(v){case"browser":if(document.exitFullscreen=document.exitFullscreen||document.webkitExitFullscreen,document.exitFullscreen&&document.exitFullscreen(),screen.orientation)try{screen.orientation.unlock()}catch{}this.player.container.classList.remove("dplayer-fulled-browser");break;case"web":this.player.container.classList.remove("dplayer-fulled"),document.body.classList.remove("dplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen_cancel")}}toggle(v="browser"){this.isFullScreen(v)?this.cancel(v):this.request(v)}destroy(){this.player.container.removeEventListener("fullscreenchange",this.fullscreenchange),this.player.container.removeEventListener("webkitfullscreenchange",this.fullscreenchange)}},Mp=class{constructor(v){Se(this,"storageName");Se(this,"default");Se(this,"data");this.storageName={opacity:"dplayer-danmaku-opacity",volume:"dplayer-volume",unlimited:"dplayer-danmaku-unlimited",danmaku:"dplayer-danmaku-show",subtitle:"dplayer-subtitle-show",speed:"dplayer-speed",loop:"dplayer-loop"},this.default={opacity:1,volume:Object.prototype.hasOwnProperty.call(v.options,"volume")?v.options.volume:1,unlimited:(v.options.danmaku&&v.options.danmaku.unlimited?1:0)||0,danmaku:1,subtitle:1,speed:1,loop:v.options.loop?1:0},this.data={},this.init()}init(){for(const v in this.storageName){const L=this.storageName[v];this.data[v]=parseFloat(N.storage.get(L)||this.default[v].toString())}}get(v){return this.data[v]}set(v,L){this.data[v]=L,N.storage.set(this.storageName[v],L)}},Bp=class{constructor(v,L,q,ee,_e){Se(this,"container");Se(this,"video");Se(this,"plugins");Se(this,"options");Se(this,"events");this.container=v,this.video=L,this.plugins=q,this.options=ee,this.events=_e,this.init()}init(){if(this.container.style.fontSize=this.options.fontSize,this.container.style.bottom=this.options.bottom,this.container.style.color=this.options.color,this.options.type==="webvtt"&&this.video.textTracks&&this.video.textTracks[0]){const v=this.video.textTracks[0];v.oncuechange=()=>{if(!v.activeCues)return;const L=v.activeCues[0];if(this.container.innerHTML="",L){const q=document.createElement("div");q.appendChild(L.getCueAsHTML());const ee=q.innerHTML.split(/\r?\n/).map(_e=>`<p>${_e}</p>`).join("");this.container.innerHTML=ee}this.events.trigger("subtitle_change")}}}show(){this.container.classList.remove("dplayer-subtitle-hide"),this.options.type==="aribb24"&&this.plugins.aribb24Caption&&this.plugins.aribb24Caption.show(),this.events.trigger("subtitle_show")}hide(){this.container.classList.add("dplayer-subtitle-hide"),this.options.type==="aribb24"&&this.plugins.aribb24Caption&&this.plugins.aribb24Caption.hide(),this.events.trigger("subtitle_hide")}toggle(){this.container.classList.contains("dplayer-subtitle-hide")?this.show():this.hide()}},Fp=class{constructor(v){Se(this,"elements");this.elements={},this.elements.volume=v.volumeBar,this.elements.played=v.playedBar,this.elements.loaded=v.loadedBar,this.elements.danmaku=v.danmakuOpacityBar}set(v,L,q){L=Math.max(L,0),L=Math.min(L,1),this.elements[v].style[q]=100*L+"%"}get(v){return parseFloat(this.elements[v].style.width)/100}},Np=class{constructor(v){Se(this,"player");Se(this,"types");Se(this,"enablefpsChecker");Se(this,"enableinfoChecker");Se(this,"enableloadingChecker");Se(this,"fpsIndex");Se(this,"fpsStart");Se(this,"fpsChecker");Se(this,"infoChecker");Se(this,"loadingChecker");this.player=v,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(L){window.setTimeout(L,1e3/60)},this.types=["loading","info","fps"],this.init()}init(){this.types.map(v=>(v!=="fps"&&this[`init${v}Checker`](),v))}initloadingChecker(){let v=0,L=0,q=!1;this.loadingChecker=window.setInterval(()=>{this.enableloadingChecker&&(L=this.player.video.currentTime,q||L!==v||this.player.video.paused||(this.player.container.classList.add("dplayer-loading"),q=!0),q&&L>v&&!this.player.video.paused&&(this.player.container.classList.remove("dplayer-loading"),q=!1),v=L)},100)}initfpsChecker(){window.requestAnimationFrame(()=>{if(this.enablefpsChecker)if(this.initfpsChecker(),this.fpsStart){this.fpsIndex++;const v=new Date;v-this.fpsStart>1e3&&(this.player.infoPanel.fps(this.fpsIndex/(v-this.fpsStart)*1e3),this.fpsStart=new Date,this.fpsIndex=0)}else this.fpsStart=new Date,this.fpsIndex=0;else this.fpsStart=0,this.fpsIndex=0})}initinfoChecker(){this.infoChecker=window.setInterval(()=>{this.enableinfoChecker&&this.player.infoPanel.update()},1e3)}enable(v){this[`enable${v}Checker`]=!0,v==="fps"&&this.initfpsChecker()}disable(v){this[`enable${v}Checker`]=!1}destroy(){this.types.map(v=>(this[`enable${v}Checker`]=!1,this[`${v}Checker`]&&window.clearInterval(this[`${v}Checker`]),v))}},Up=class{constructor(v){Se(this,"container");this.container=v,this.container.addEventListener("animationend",()=>{this.container.classList.remove("dplayer-bezel-transition")})}switch(v){this.container.innerHTML=v,this.container.classList.add("dplayer-bezel-transition")}},$p=class{constructor(v){Se(this,"player");Se(this,"container");Se(this,"barWidth");Se(this,"events");Se(this,"viewportWidth",180);Se(this,"viewportHeight",101);Se(this,"thumbnailSpace",N.isMobile?6:26);Se(this,"width");Se(this,"height");Se(this,"interval");Se(this,"totalCount");Se(this,"columnCount");Se(this,"magnificationScale");this.player=v.player,this.container=this.player.template.barPreview,this.barWidth=this.player.template.barWrap.offsetWidth,this.events=v.events,this.interval=v.interval,v.interval?this.totalCount=Math.ceil(this.player.video.duration/v.interval):this.totalCount=v.totalCount||100,this.width=v.width||160,this.height=v.height||Math.floor(9*this.width/16),this.columnCount=v.columnCount||100,this.magnificationScale=this.viewportWidth/this.width,this.player.template.barWrap.style.setProperty("--thumbnail-url",`url(${v.url})`),this.container.style.width=`${this.viewportWidth}px`,this.container.style.height=`${this.viewportHeight}px`,this.container.style.top=-this.viewportHeight-this.thumbnailSpace+"px",this.container.style.backgroundPosition="0 0",this.player.on("durationchange",()=>{this.resize(this.width,this.height,this.barWidth)})}resize(v,L,q){this.width=v,this.height=L,this.barWidth=q,this.interval&&(this.totalCount=Math.ceil(this.player.video.duration/this.interval));const ee=Math.ceil(this.totalCount/this.columnCount),_e=this.columnCount*v*this.magnificationScale,Ae=ee*L*this.magnificationScale;this.container.style.width=`${this.viewportWidth}px`,this.container.style.height=`${this.viewportHeight}px`,this.container.style.top=-this.viewportHeight-this.thumbnailSpace+"px",this.container.style.backgroundSize=`${_e}px ${Ae}px`}show(){this.container.style.display="block",this.events&&this.events.trigger("thumbnails_show")}move(v){const L=Math.max(0,Math.min(Math.floor(v/this.barWidth*this.totalCount),this.totalCount-1)),q=L%this.columnCount,ee=Math.floor(L/this.columnCount),_e=q*this.width,Ae=ee*this.height;this.container.style.backgroundPosition=`-${_e*this.magnificationScale}px -${Ae*this.magnificationScale}px`;const we=Math.min(Math.max(v-this.container.offsetWidth/2,-10),this.barWidth-(this.viewportWidth-10));this.container.style.left=`${we}px`}hide(){this.container.style.display="none",this.events&&this.events.trigger("thumbnails_hide")}},Gp=class{constructor(v){Se(this,"player");Se(this,"disableAutoHide",!1);Se(this,"autoHideTimer");Se(this,"mobileSkipTimer");Se(this,"mobileBackwardTime");Se(this,"mobileForwardTime");Se(this,"setAutoHideHandler");Se(this,"thumbnails",null);this.player=v,this.autoHideTimer=0,this.mobileSkipTimer=0,this.mobileBackwardTime=0,this.mobileForwardTime=0,this.setAutoHideHandler=()=>this.setAutoHide(),N.isMobile?this.player.container.addEventListener("touchmove",this.setAutoHideHandler):(this.player.container.addEventListener("mousemove",this.setAutoHideHandler),this.player.container.addEventListener("click",this.setAutoHideHandler)),this.player.on("play",this.setAutoHideHandler),this.player.on("pause",this.setAutoHideHandler),this.initPlayButton(),this.initThumbnails(),this.initPlayedBar(),this.initFullButton(),this.initPipButton(),this.initSyncButton(),this.initScreenshotButton(),this.initSubtitleButton(),this.initHighlights(),this.initAirplayButton(),N.isMobile||this.initVolumeButton()}initPlayButton(){this.player.template.playButton.addEventListener("click",()=>{this.player.toggle()}),this.player.template.mobilePlayButton.addEventListener("click",()=>{this.player.toggle()}),N.isMobile?(this.player.template.videoWrap.addEventListener("click",()=>{this.toggle(),this.isShow()&&this.setAutoHide()}),this.player.template.controllerMask.addEventListener("click",()=>{this.toggle(),this.isShow()&&this.setAutoHide()})):(this.player.template.videoWrap.addEventListener("click",()=>{this.player.toggle()}),this.player.template.controllerMask.addEventListener("click",()=>{this.player.toggle()})),this.player.template.mobileBackwardButton.addEventListener("click",()=>{this.mobileBackwardTime+=10,this.player.seek(this.player.video.currentTime-10),this.player.options.lang.includes("ja")?this.player.notice(`${this.mobileBackwardTime.toFixed(0)}ÁßíÊó©Êàª„Åó`):this.player.notice(`${this.player.tran("REW")} ${this.mobileBackwardTime.toFixed(0)} ${this.player.tran("s")}`),window.clearTimeout(this.mobileSkipTimer),this.mobileSkipTimer=window.setTimeout(()=>{this.mobileBackwardTime=0},1e3),this.setAutoHide()}),this.player.template.mobileForwardButton.addEventListener("click",()=>{this.mobileForwardTime+=10,this.player.seek(this.player.video.currentTime+10),this.player.options.lang.includes("ja")?this.player.notice(`${this.mobileForwardTime.toFixed(0)}ÁßíÊó©ÈÄÅ„Çä`):this.player.notice(`${this.player.tran("FF")} ${this.mobileForwardTime.toFixed(0)} ${this.player.tran("s")}`),window.clearTimeout(this.mobileSkipTimer),this.mobileSkipTimer=window.setTimeout(()=>{this.mobileForwardTime=0},1e3),this.setAutoHide()})}initHighlights(){this.player.on("durationchange",()=>{if(this.player.video.duration!==1&&this.player.video.duration!==1/0&&this.player.options.highlight){const v=this.player.template.playedBarWrap.querySelectorAll(".dplayer-highlight");[].slice.call(v,0).forEach(L=>{this.player.template.playedBarWrap.removeChild(L)});for(let L=0;L<this.player.options.highlight.length;L++){if(!this.player.options.highlight[L].text||!this.player.options.highlight[L].time)continue;const q=document.createElement("div");q.classList.add("dplayer-highlight"),q.style.left=this.player.options.highlight[L].time/this.player.video.duration*100+"%";const ee=document.createElement("span");ee.classList.add("dplayer-highlight-text"),ee.textContent=this.player.options.highlight[L].text,q.appendChild(ee),this.player.template.playedBarWrap.insertBefore(q,this.player.template.playedBarTime)}}})}initThumbnails(){if(this.player.options.video.thumbnails){const v=this.player.options.video.thumbnails;this.thumbnails=new $p({player:this.player,url:v.url,events:this.player.events,interval:v.interval,totalCount:v.totalCount,width:v.width,height:v.height,columnCount:v.columnCount}),this.player.on("loadedmetadata",()=>{const L=v.width||160,q=v.height||Math.floor(9*L/16);this.thumbnails.resize(L,q,this.player.template.barWrap.offsetWidth)})}}initPlayedBar(){let v;const L=ee=>{const _e=ee;ee.preventDefault();let Ae=N.getRelativeX(_e,this.player.template.playedBarWrap)/this.player.template.playedBarWrap.clientWidth;Ae=Math.max(Ae,0),Ae=Math.min(Ae,1),this.player.bar.set("played",Ae,"width");const we=N.getVideoDuration(this.player.video,this.player.template);this.player.template.ptime.textContent=N.secondToTime(Ae*we),this.player.container.classList.add("dplayer-seeking"),this.player.video.paused||this.player.video.pause()},q=ee=>{const _e=ee;document.removeEventListener(N.nameMap.dragEnd,q),document.removeEventListener(N.nameMap.dragMove,L),this.player.container.removeEventListener(N.nameMap.dragEnd,q),this.player.container.removeEventListener(N.nameMap.dragMove,L);let Ae=N.getRelativeX(_e,this.player.template.playedBarWrap)/this.player.template.playedBarWrap.clientWidth;Ae=Math.max(Ae,0),Ae=Math.min(Ae,1),this.player.bar.set("played",Ae,"width");const we=N.getVideoDuration(this.player.video,this.player.template);this.player.seek(this.player.bar.get("played")*we,!0),v||this.player.video.play(),this.player.container.classList.remove("dplayer-seeking")};this.player.template.playedBarWrap.addEventListener(N.nameMap.dragStart,ee=>{ee.preventDefault(),v=this.player.video.paused,document.addEventListener(N.nameMap.dragMove,L,{passive:!1}),document.addEventListener(N.nameMap.dragEnd,q),this.player.container.addEventListener(N.nameMap.dragMove,L,{passive:!1}),this.player.container.addEventListener(N.nameMap.dragEnd,q)},{passive:!1}),this.player.template.playedBarWrap.addEventListener(N.nameMap.dragMove,ee=>{ee.preventDefault();const _e=ee,Ae=N.getVideoDuration(this.player.video,this.player.template);if(Ae){const we=N.getRelativeX(_e,this.player.template.playedBarWrap);if(we<0||we>this.player.template.playedBarWrap.offsetWidth)return;const Xe=Ae*(we/this.player.template.playedBarWrap.offsetWidth);N.isMobile&&this.thumbnails&&this.thumbnails.show(),this.thumbnails&&this.thumbnails.move(we),this.player.template.playedBarTime.style.left=we-(Xe>=3600?27.5:22.5)+"px",this.player.template.playedBarTime.textContent=N.secondToTime(Xe),this.player.template.playedBarTime.classList.remove("hidden")}},{passive:!1}),this.player.template.playedBarWrap.addEventListener(N.nameMap.dragEnd,()=>{N.isMobile&&this.thumbnails&&this.thumbnails.hide()}),N.isMobile||(this.player.template.playedBarWrap.addEventListener("mouseenter",()=>{this.player.video.duration&&(this.thumbnails&&this.thumbnails.show(),this.player.template.playedBarTime.classList.remove("hidden"))}),this.player.template.playedBarWrap.addEventListener("mouseleave",()=>{this.player.video.duration&&(this.thumbnails&&this.thumbnails.hide(),this.player.template.playedBarTime.classList.add("hidden"))}))}initFullButton(){this.player.template.browserFullButton.addEventListener("click",()=>{this.player.fullScreen.toggle("browser")}),this.player.template.webFullButton.addEventListener("click",()=>{this.player.fullScreen.toggle("web")})}initPipButton(){document.pictureInPictureEnabled?this.player.template.pipButton.addEventListener("click",()=>{document.pictureInPictureElement?document.exitPictureInPicture():this.player.video.requestPictureInPicture().catch(v=>{console.error(v),this.player.options.lang.includes("ja")?this.player.notice("Picture-in-Picture „ÇíÈñãÂßã„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ",void 0,void 0,"#FF6F6A"):this.player.notice("Picture-in-Picture could not be started.",void 0,void 0,"#FF6F6A")})}):this.player.template.pipButton.style.display="none"}initVolumeButton(){const v=q=>{const ee=q,_e=(N.getRelativeX(ee,this.player.template.volumeBarWrap)-5.5)/35;this.player.volume(_e)},L=()=>{document.removeEventListener(N.nameMap.dragEnd,L),document.removeEventListener(N.nameMap.dragMove,v),this.player.container.removeEventListener(N.nameMap.dragEnd,L),this.player.container.removeEventListener(N.nameMap.dragMove,v),this.player.template.volumeButton.classList.remove("dplayer-volume-active")};this.player.template.volumeBarWrapWrap.addEventListener("click",q=>{const ee=q,_e=(N.getRelativeX(ee,this.player.template.volumeBarWrap)-5.5)/35;this.player.volume(_e)}),this.player.template.volumeBarWrapWrap.addEventListener(N.nameMap.dragStart,()=>{document.addEventListener(N.nameMap.dragMove,v),document.addEventListener(N.nameMap.dragEnd,L),this.player.container.addEventListener(N.nameMap.dragMove,v),this.player.container.addEventListener(N.nameMap.dragEnd,L),this.player.template.volumeButton.classList.add("dplayer-volume-active")}),this.player.template.volumeButtonIcon.addEventListener("click",()=>{this.player.video.muted?(this.player.video.muted=!1,this.player.switchVolumeIcon(),this.player.bar.set("volume",this.player.volume(),"width")):(this.player.video.muted=!0,this.player.template.volumeIcon.innerHTML=Ln.volumeOff,this.player.bar.set("volume",0,"width"))})}initSyncButton(){this.player.options.live&&this.player.template.syncButton.addEventListener("click",()=>{this.player.sync()})}initScreenshotButton(){this.player.options.screenshot&&this.player.template.cameraButton.addEventListener("click",()=>{const v=document.createElement("canvas");v.width=this.player.video.videoWidth,v.height=this.player.video.videoHeight,v.getContext("2d").drawImage(this.player.video,0,0,v.width,v.height),v.toBlob(L=>{if(L===null)return;const q=new Date,ee=`Capture_${q.getFullYear()}${("0"+(q.getMonth()+1)).slice(-2)}${("0"+q.getDate()).slice(-2)}-${("0"+q.getHours()).slice(-2)}${("0"+q.getMinutes()).slice(-2)}${("0"+q.getSeconds()).slice(-2)}.jpg`,_e=URL.createObjectURL(L),Ae=document.createElement("a");Ae.download!==void 0?(Ae.download=ee,Ae.href=_e,Ae.click(),URL.revokeObjectURL(_e),this.player.events.trigger("screenshot",L)):this.player.notice("Error: Screenshot download is not supported.",void 0,void 0,"#FF6F6A")},"image/jpeg",1)})}initAirplayButton(){this.player.options.airplay&&(window.WebKitPlaybackTargetAvailabilityEvent?this.player.video.addEventListener("webkitplaybacktargetavailabilitychanged",(function(v){v.availability==="available"?this.template.airplayButton.disable=!1:this.template.airplayButton.disable=!0,this.template.airplayButton.addEventListener("click",(function(){this.video.webkitShowPlaybackTargetPicker()}).bind(this))}).bind(this.player)):this.player.template.airplayButton.style.display="none")}initSubtitleButton(){this.player.options.subtitle&&(this.player.events.on("subtitle_show",()=>{this.player.template.subtitleButton.ariaLabel=this.player.tran("Hide subtitle"),this.player.template.subtitleButtonInner.style.opacity="",this.player.user.set("subtitle",1)}),this.player.events.on("subtitle_hide",()=>{this.player.template.subtitleButton.ariaLabel=this.player.tran("Show subtitle"),this.player.template.subtitleButtonInner.style.opacity="0.4",this.player.user.set("subtitle",0)}),this.player.template.subtitleButton.addEventListener("click",()=>{this.player.subtitle!==null&&this.player.subtitle.toggle()}))}setAutoHide(v=3e3){this.show(),window.clearTimeout(this.autoHideTimer),this.autoHideTimer=window.setTimeout(()=>{!this.player.video.played.length||this.player.paused||this.disableAutoHide||this.hide()},v)}show(){this.player.container.classList.remove("dplayer-hide-controller")}hide(){this.player.container.classList.add("dplayer-hide-controller"),this.player.setting.hide(),this.player.comment&&this.player.comment.hide()}isShow(){return!this.player.container.classList.contains("dplayer-hide-controller")}toggle(){this.isShow()?this.hide():this.show()}destroy(){N.isMobile?this.player.container.removeEventListener("touchmove",this.setAutoHideHandler):(this.player.container.removeEventListener("mousemove",this.setAutoHideHandler),this.player.container.removeEventListener("click",this.setAutoHideHandler)),window.clearTimeout(this.autoHideTimer)}},Vp=class{constructor(v){Se(this,"player");Se(this,"loop");Se(this,"showDanmaku");Se(this,"unlimitDanmaku");Se(this,"currentAudio","primary");Se(this,"resizeObserver");this.player=v,this.player.template.mask.addEventListener("click",()=>{this.hide()}),this.player.template.settingButton.addEventListener("click",()=>{this.show()});const L=()=>{const q=this.player.template.settingOriginPanel.scrollHeight;this.player.template.settingBox.style.clipPath=`inset(calc(100% - ${q}px) 0 0 round 7px)`};if(L(),this.resizeObserver=new ResizeObserver(L),this.resizeObserver.observe(this.player.template.settingOriginPanel),this.player.options.video.quality){this.player.template.quality.addEventListener("click",()=>{this.player.template.settingBox.classList.add("dplayer-setting-box-quality")}),this.player.template.qualityHeader.addEventListener("click",()=>{this.player.template.settingBox.classList.remove("dplayer-setting-box-quality")});for(let q=0;q<this.player.template.qualityItem.length;q++)this.player.template.qualityItem[q].addEventListener("click",()=>{this.player.switchingQuality||this.player.switchQuality(parseInt(this.player.template.qualityItem[q].dataset.index))})}this.player.template.speed.addEventListener("click",()=>{this.player.template.settingBox.classList.add("dplayer-setting-box-speed")}),this.player.template.speedHeader.addEventListener("click",()=>{this.player.template.settingBox.classList.remove("dplayer-setting-box-speed")});for(let q=0;q<this.player.template.speedItem.length;q++)this.player.template.speedItem[q].addEventListener("click",ee=>{this.player.speed(parseFloat(ee.target.dataset.speed))});this.player.template.audio.addEventListener("click",()=>{this.player.template.settingBox.classList.add("dplayer-setting-box-audio")}),this.player.template.audioHeader.addEventListener("click",()=>{this.player.template.settingBox.classList.remove("dplayer-setting-box-audio")});for(let q=0;q<this.player.template.audioItem.length;q++)this.player.template.audioItem[q].addEventListener("click",()=>{if(this.player.plugins.mpegts&&window.mpegts&&this.player.plugins.mpegts instanceof window.mpegts.MSEPlayer){if(this.player.template.audioItem[q].dataset.audio===this.currentAudio)return;this.player.template.audioItem[q].dataset.audio==="primary"?(this.currentAudio="primary",this.player.template.audioItem[0].classList.add("dplayer-setting-audio-current"),this.player.template.audioItem[1].classList.remove("dplayer-setting-audio-current"),this.player.template.audioValue.textContent=this.player.tran("Primary audio"),this.player.plugins.mpegts.switchPrimaryAudio()):this.player.template.audioItem[q].dataset.audio==="secondary"&&(this.currentAudio="secondary",this.player.template.audioItem[0].classList.remove("dplayer-setting-audio-current"),this.player.template.audioItem[1].classList.add("dplayer-setting-audio-current"),this.player.template.audioValue.textContent=this.player.tran("Secondary audio"),this.player.plugins.mpegts.switchSecondaryAudio()),this.player.template.settingBox.classList.remove("dplayer-setting-box-audio")}else if(this.player.plugins.hls&&window.Hls&&this.player.plugins.hls instanceof window.Hls){const ee=this.player.plugins.hls;if(ee.audioTracks.length<=1||this.player.template.audioItem[q].dataset.audio===this.currentAudio)return;this.player.template.audioItem[q].dataset.audio==="primary"?(this.currentAudio="primary",this.player.template.audioItem[0].classList.add("dplayer-setting-audio-current"),this.player.template.audioItem[1].classList.remove("dplayer-setting-audio-current"),this.player.template.audioValue.textContent=this.player.tran("Primary audio"),ee.audioTrack=0):this.player.template.audioItem[q].dataset.audio==="secondary"&&(this.currentAudio="secondary",this.player.template.audioItem[0].classList.remove("dplayer-setting-audio-current"),this.player.template.audioItem[1].classList.add("dplayer-setting-audio-current"),this.player.template.audioValue.textContent=this.player.tran("Secondary audio"),ee.audioTrack=1),this.player.template.settingBox.classList.remove("dplayer-setting-box-audio")}});if(this.loop=this.player.user.get("loop")===1,this.player.template.loopToggle.checked=this.loop,this.player.template.loop.addEventListener("click",()=>{this.player.template.loopToggle.checked=!this.player.template.loopToggle.checked,this.player.template.loopToggle.checked?this.loop=!0:this.loop=!1,this.player.user.set("loop",this.loop?1:0)}),this.showDanmaku=this.player.user.get("danmaku")===1,this.showDanmaku||this.player.danmaku&&this.player.danmaku.hide(),this.player.template.showDanmakuToggle.checked=this.showDanmaku,this.player.template.showDanmaku.addEventListener("click",()=>{this.player.template.showDanmakuToggle.checked=!this.player.template.showDanmakuToggle.checked,this.player.template.showDanmakuToggle.checked?(this.showDanmaku=!0,this.player.danmaku!==null&&this.player.danmaku.show()):(this.showDanmaku=!1,this.player.danmaku!==null&&this.player.danmaku.hide()),this.player.user.set("danmaku",this.showDanmaku?1:0)}),this.unlimitDanmaku=this.player.user.get("unlimited")===1,this.player.template.unlimitDanmakuToggle.checked=this.unlimitDanmaku,this.player.template.unlimitDanmaku.addEventListener("click",()=>{this.player.template.unlimitDanmakuToggle.checked=!this.player.template.unlimitDanmakuToggle.checked,this.player.template.unlimitDanmakuToggle.checked?(this.unlimitDanmaku=!0,this.player.danmaku!==null&&this.player.danmaku.unlimit(!0)):(this.unlimitDanmaku=!1,this.player.danmaku!==null&&this.player.danmaku.unlimit(!1)),this.player.user.set("unlimited",this.unlimitDanmaku?1:0)}),this.player.danmaku){this.player.on("danmaku_opacity",_e=>{this.player.bar.set("danmaku",_e,"width"),this.player.user.set("opacity",_e),this.player.template.danmakuOpacityValue.textContent=_e.toFixed(1)}),this.player.danmaku.opacity(this.player.user.get("opacity")),this.player.template.danmakuOpacityValue.textContent=this.player.user.get("opacity").toFixed(1);const q=_e=>{const Ae=_e,we=this.player.template.danmakuOpacityBarWrap.clientWidth;let Xe=N.getRelativeX(Ae,this.player.template.danmakuOpacityBarWrap)/we;Xe=Math.max(Xe,0),Xe=Math.min(Xe,1),this.player.danmaku!==null&&this.player.danmaku.opacity(Xe)},ee=()=>{document.removeEventListener(N.nameMap.dragEnd,ee),document.removeEventListener(N.nameMap.dragMove,q),this.player.container.removeEventListener(N.nameMap.dragEnd,ee),this.player.container.removeEventListener(N.nameMap.dragMove,q),this.player.template.danmakuOpacityBox.classList.remove("dplayer-setting-danmaku-active")};this.player.template.danmakuOpacityBarWrapWrap.addEventListener("click",_e=>{const Ae=_e,we=this.player.template.danmakuOpacityBarWrap.clientWidth;let Xe=N.getRelativeX(Ae,this.player.template.danmakuOpacityBarWrap)/we;Xe=Math.max(Xe,0),Xe=Math.min(Xe,1),this.player.danmaku!==null&&this.player.danmaku.opacity(Xe)}),this.player.template.danmakuOpacityBarWrapWrap.addEventListener(N.nameMap.dragStart,()=>{document.addEventListener(N.nameMap.dragMove,q),document.addEventListener(N.nameMap.dragEnd,ee),this.player.container.addEventListener(N.nameMap.dragMove,q),this.player.container.addEventListener(N.nameMap.dragEnd,ee),this.player.template.danmakuOpacityBox.classList.add("dplayer-setting-danmaku-active")})}}hide(){this.player.template.container.classList.remove("dplayer-show-controller"),this.player.template.settingBox.classList.remove("dplayer-setting-box-open"),this.player.template.mask.classList.remove("dplayer-mask-show"),window.setTimeout(()=>{this.player.template.settingBox.classList.remove("dplayer-setting-box-speed"),this.player.template.settingBox.classList.remove("dplayer-setting-box-audio")},300),this.player.controller.disableAutoHide=!1}show(){this.player.template.container.classList.add("dplayer-show-controller"),this.player.template.settingBox.classList.add("dplayer-setting-box-open"),this.player.template.mask.classList.add("dplayer-mask-show"),this.player.controller.disableAutoHide=!0}destroy(){this.resizeObserver.disconnect()}},jp=class{constructor(v){Se(this,"player");this.player=v,this.player.template.mask.addEventListener("click",()=>{this.hide()}),this.player.template.commentButton.addEventListener("click",()=>{this.show()}),this.player.template.commentSettingButton.addEventListener("click",()=>{this.toggleSetting()}),this.player.template.commentColorSettingBox.addEventListener("click",()=>{if(this.player.template.commentColorSettingBox.querySelector("input:checked+span")){const L=this.player.template.commentColorSettingBox.querySelector("input:checked").value;this.player.template.commentSettingFill.style.fill=L,this.player.template.commentInput.style.color=L,this.player.template.commentSendFill.style.fill=L}}),this.player.template.commentInput.addEventListener("click",()=>{this.hideSetting()}),this.player.template.commentInput.addEventListener("keydown",L=>{(L||window.event).keyCode===13&&this.send()}),this.player.template.commentSendButton.addEventListener("click",()=>{this.send()})}show(){this.player.controller.disableAutoHide=!0,this.player.template.controller.classList.add("dplayer-controller-comment"),this.player.template.mask.classList.add("dplayer-mask-show"),this.player.container.classList.add("dplayer-show-controller"),this.player.template.commentInput.focus()}hide(){this.player.template.controller.classList.remove("dplayer-controller-comment"),this.player.template.mask.classList.remove("dplayer-mask-show"),this.player.container.classList.remove("dplayer-show-controller"),this.player.controller.disableAutoHide=!1,this.hideSetting()}showSetting(){this.player.template.commentSettingBox.classList.add("dplayer-comment-setting-open")}hideSetting(){this.player.template.commentSettingBox.classList.remove("dplayer-comment-setting-open")}toggleSetting(){this.player.template.commentSettingBox.classList.contains("dplayer-comment-setting-open")?this.hideSetting():this.showSetting()}send(){var v;((v=this.player.options.danmaku)==null?void 0:v.closeCommentFormAfterSend)===!0&&this.player.template.commentInput.blur(),this.player.template.commentInput.value.replace(/^\s+|\s+$/g,"")?(this.player.danmaku!==null&&this.player.danmaku.send({text:this.player.template.commentInput.value,color:this.player.container.querySelector(".dplayer-comment-setting-color input:checked").value,type:this.player.container.querySelector(".dplayer-comment-setting-type input:checked").value,size:this.player.container.querySelector(".dplayer-comment-setting-size input:checked").value},()=>{var L;((L=this.player.options.danmaku)==null?void 0:L.closeCommentFormAfterSend)===!0&&(this.hide(),this.player.controller.setAutoHide(750))},!0),this.player.template.commentInput.value=""):this.player.notice(this.player.tran("Please input danmaku content!"),void 0,void 0,"#FF6F6A")}},Hp=class{constructor(v){Se(this,"player");Se(this,"doHotKeyHandler");Se(this,"cancelFullScreenHandler");this.player=v,this.doHotKeyHandler=this.doHotKey.bind(this),this.cancelFullScreenHandler=this.cancelFullScreen.bind(this),this.player.options.hotkey&&document.addEventListener("keydown",this.doHotKeyHandler),document.addEventListener("keydown",this.cancelFullScreenHandler)}doHotKey(v){var ee,_e;const L=(ee=document.activeElement)==null?void 0:ee.tagName.toUpperCase(),q=(_e=document.activeElement)==null?void 0:_e.getAttribute("contenteditable");if(L!=="INPUT"&&L!=="TEXTAREA"&&q!==""&&q!=="true"){const Ae=v||window.event;let we;switch(Ae.keyCode){case 32:(this.player.focus||this.player.options.hotkey)&&(Ae.preventDefault(),this.player.toggle());break;case 37:(this.player.focus||this.player.options.hotkey)&&(Ae.preventDefault(),Ae.altKey?this.player.seek(this.player.video.currentTime-60):Ae.shiftKey?this.player.seek(this.player.video.currentTime-30):Ae.ctrlKey||Ae.metaKey?this.player.seek(this.player.video.currentTime-15):this.player.seek(this.player.video.currentTime-5),this.player.controller.setAutoHide());break;case 39:(this.player.focus||this.player.options.hotkey)&&(Ae.preventDefault(),Ae.altKey?this.player.seek(this.player.video.currentTime+60):Ae.shiftKey?this.player.seek(this.player.video.currentTime+30):Ae.ctrlKey||Ae.metaKey?this.player.seek(this.player.video.currentTime+15):this.player.seek(this.player.video.currentTime+5),this.player.controller.setAutoHide());break;case 38:this.player.focus&&(Ae.preventDefault(),we=this.player.volume()+.1,this.player.volume(we));break;case 40:this.player.focus&&(Ae.preventDefault(),we=this.player.volume()-.1,this.player.volume(we));break;case 70:Ae.ctrlKey||Ae.metaKey||(Ae.preventDefault(),this.player.fullScreen.toggle("browser"));break;case 87:Ae.ctrlKey||Ae.metaKey||(Ae.preventDefault(),this.player.fullScreen.toggle("web"));break;case 76:this.player.options.live&&(Ae.preventDefault(),this.player.sync());break;case 80:this.player.options.pictureInPicture&&document.pictureInPictureEnabled&&(Ae.preventDefault(),this.player.template.pipButton.click());break;case 67:typeof this.player.options.danmaku=="object"&&this.player.options.danmaku&&(Ae.ctrlKey||Ae.metaKey||(Ae.preventDefault(),this.player.controller.show(),this.player.comment!=null&&this.player.comment.show()));break;case 68:typeof this.player.options.danmaku=="object"&&this.player.options.danmaku&&(Ae.ctrlKey||Ae.metaKey||(Ae.preventDefault(),this.player.template.showDanmaku.click(),this.player.template.showDanmakuToggle.checked?this.player.notice(`${this.player.tran("Show comment")}`):this.player.notice(`${this.player.tran("Hide comment")}`)));break;case 83:this.player.options.subtitle&&(Ae.ctrlKey||Ae.metaKey||(Ae.preventDefault(),this.player.subtitle!==null&&(this.player.subtitle.container.classList.contains("dplayer-subtitle-hide")?this.player.notice(`${this.player.tran("Show subtitle")}`):this.player.notice(`${this.player.tran("Hide subtitle")}`),this.player.subtitle.toggle())))}}}cancelFullScreen(v){(v||window.event).keyCode===27&&this.player.fullScreen.isFullScreen("web")&&this.player.fullScreen.cancel("web")}destroy(){this.player.options.hotkey&&document.removeEventListener("keydown",this.doHotKeyHandler),document.removeEventListener("keydown",this.cancelFullScreenHandler)}},qp=class{constructor(v){Se(this,"contextmenuHandler");Se(this,"player");Se(this,"shown");this.player=v,this.shown=!1,Array.prototype.slice.call(this.player.template.menuItem).forEach((L,q)=>{this.player.options.contextmenu[q].click&&L.addEventListener("click",()=>{const ee=this.player.options.contextmenu[q];ee.click&&ee.click(this.player),this.hide()})}),this.contextmenuHandler=L=>{const q=L||window.event;if(q.preventDefault(),this.shown)return void this.hide();const ee=this.player.container.getBoundingClientRect();this.show(q.clientX-ee.left,q.clientY-ee.top),this.player.template.mask.addEventListener("click",()=>{this.hide()})},this.player.container.addEventListener("contextmenu",this.contextmenuHandler)}show(v,L){this.player.template.menu.classList.add("dplayer-menu-show");const q=this.player.container.getBoundingClientRect();v+this.player.template.menu.offsetWidth>=q.width?(this.player.template.menu.style.right=q.width-v+"px",this.player.template.menu.style.left="initial"):(this.player.template.menu.style.left=v+"px",this.player.template.menu.style.right="initial"),L+this.player.template.menu.offsetHeight>=q.height?(this.player.template.menu.style.bottom=q.height-L+"px",this.player.template.menu.style.top="initial"):(this.player.template.menu.style.top=L+"px",this.player.template.menu.style.bottom="initial"),this.player.template.mask.classList.add("dplayer-mask-show"),this.shown=!0,this.player.events.trigger("contextmenu_show")}hide(){this.player.template.mask.classList.remove("dplayer-mask-show"),this.player.template.menu.classList.remove("dplayer-menu-show"),this.shown=!1,this.player.events.trigger("contextmenu_hide")}destroy(){this.player.container.removeEventListener("contextmenu",this.contextmenuHandler)}},zp=class{constructor(v){Se(this,"player");Se(this,"container");Se(this,"template");Se(this,"video");Se(this,"beginTime",0);this.player=v,this.container=v.template.infoPanel,this.template=v.template,this.video=v.video,this.template.infoPanelClose.addEventListener("click",()=>{this.hide()})}show(){this.beginTime=Date.now(),this.update(),this.player.timer.enable("info"),this.player.timer.enable("fps"),this.container.classList.remove("dplayer-info-panel-hide")}hide(){this.player.timer.disable("info"),this.player.timer.disable("fps"),this.container.classList.add("dplayer-info-panel-hide")}toggle(){this.container.classList.contains("dplayer-info-panel-hide")?this.show():this.hide()}update(){var v;if(this.template.infoVersion.textContent="v1.32.7 27c0a1c",this.template.infoType.textContent=this.player.type,this.template.infoUrl.textContent=this.player.options.video.url??"N/A",this.template.infoResolution.textContent=`${this.player.video.videoWidth} x ${this.player.video.videoHeight}`,this.template.infoDuration.textContent=`${this.player.video.duration}`,this.player.video.getVideoPlaybackQuality!=null){const L=this.player.video.getVideoPlaybackQuality();this.template.infoDroppedFrames.textContent=`${L.droppedVideoFrames} / ${L.totalVideoFrames}`}else if(this.player.video.webkitDecodedFrameCount!=null){const L=this.player.video.webkitDecodedFrameCount,q=this.player.video.webkitDroppedFrameCount;this.template.infoDroppedFrames.textContent=`${q} / ${L}`}else this.template.infoDroppedFrames.textContent="N/A";if(this.player.video.buffered.length>0){const L=this.player.video.buffered.length,q=this.player.video.buffered.end(L-1)-this.player.video.currentTime;this.template.infoBufferRemain.textContent=`${q.toFixed(3)} s`}else this.template.infoBufferRemain.textContent="N/A";if(this.player.type==="mpegts"||this.player.type==="flv"){const L=this.player.plugins.mpegts||this.player.plugins.flvjs;if(L){const q=L.mediaInfo,ee=L.statisticsInfo;this.template.infoMimeType.textContent=q.mimeType??"N/A",this.template.infoVideoFPS.textContent=`${((v=q.fps)==null?void 0:v.toFixed(3))??"N/A"}`,ee.speed!=null?this.template.infoDownloadSpeed.textContent=`${ee.speed.toFixed(3)} KB/s`:this.template.infoDownloadSpeed.textContent="N/A"}}else this.template.infoMimeType.textContent="N/A",this.template.infoVideoFPS.textContent="N/A",this.template.infoDownloadSpeed.textContent="N/A"}fps(v){this.template.infoPageFPS.textContent=`${v.toFixed(1)}`}};var Kp=n(194),Wp=n.n(Kp);let sc=0;const Lr=[],Yp=class{constructor(v){Se(this,"bar");Se(this,"bezel");Se(this,"comment",null);Se(this,"contextmenu");Se(this,"controller");Se(this,"danmaku",null);Se(this,"events");Se(this,"fullScreen");Se(this,"hotkey");Se(this,"infoPanel");Se(this,"setting");Se(this,"subtitle",null);Se(this,"template");Se(this,"timer");Se(this,"user");Se(this,"container");Se(this,"containerClickFun");Se(this,"docClickFun");Se(this,"focus",!1);Se(this,"narrow",!1);Se(this,"noticeTime",null);Se(this,"options");Se(this,"paused",!1);Se(this,"plugins");Se(this,"prevVideoCurrentTime",0);Se(this,"prevVideo",null);Se(this,"quality",null);Se(this,"qualityIndex",null);Se(this,"switchingQuality",!1);Se(this,"resizeObserver");Se(this,"tran");Se(this,"type","auto");Se(this,"video");this.options=(L=>{const q={container:L.container||document.querySelector(".dplayer")||void 0,live:!1,liveSyncMinBufferSize:.8,syncWhenPlayingLive:!0,autoplay:!1,theme:"#b7daff",loop:!1,lang:navigator.language.toLowerCase(),screenshot:!1,pictureInPicture:!0,airplay:!0,hotkey:!0,preload:"metadata",crossOrigin:null,volume:1,playbackSpeed:[.25,.5,.75,1,1.25,1.5,1.75,2],apiBackend:tn,video:{},contextmenu:[],mutex:!0,pluginOptions:{}};for(const ee in q)Object.prototype.hasOwnProperty.call(q,ee)&&!Object.prototype.hasOwnProperty.call(L,ee)&&(L[ee]=q[ee]);return L.video&&(!L.video.type&&(L.video.type="auto"),L.video.thumbnails&&(typeof L.video.thumbnails=="string"&&(L.video.thumbnails={url:L.video.thumbnails}),!L.video.thumbnails.width&&(L.video.thumbnails.width=160),!L.video.thumbnails.columnCount&&(L.video.thumbnails.columnCount=100),L.video.thumbnails.interval?delete L.video.thumbnails.totalCount:L.video.thumbnails.totalCount||(L.video.thumbnails.totalCount=100))),typeof L.danmaku=="object"&&L.danmaku&&(!L.danmaku.user&&(L.danmaku.user="DPlayer"),!L.danmaku.speedRate&&(L.danmaku.speedRate=1),!L.danmaku.fontSize&&(L.danmaku.fontSize=35),L.danmaku.closeCommentFormAfterSend!==!1&&(L.danmaku.closeCommentFormAfterSend=!0)),L.subtitle&&(!L.subtitle.type&&(L.subtitle.type="webvtt"),!L.subtitle.fontSize&&(L.subtitle.fontSize="20px"),!L.subtitle.bottom&&(L.subtitle.bottom="40px"),!L.subtitle.color&&(L.subtitle.color="#fff")),L.video.quality&&(typeof L.video.defaultQuality=="string"&&(L.video.quality.forEach((ee,_e)=>{L.video.defaultQuality===ee.name&&(L.video.defaultQuality=_e)}),typeof L.video.defaultQuality=="string"&&(L.video.defaultQuality=0)),L.video.defaultQuality===void 0&&(L.video.defaultQuality=0),L.video.type=L.video.quality[L.video.defaultQuality].type,L.video.url=L.video.quality[L.video.defaultQuality].url),L.lang&&(L.lang=L.lang.toLowerCase()),L.contextmenu=L.contextmenu.concat([{text:"Video info",click:ee=>{ee.infoPanel.toggle()}},{text:"DPlayer v1.32.7",link:"https://github.com/tsukumijima/DPlayer"}]),{container:L.container,live:L.live,liveSyncMinBufferSize:L.liveSyncMinBufferSize,syncWhenPlayingLive:L.syncWhenPlayingLive,autoplay:L.autoplay,theme:L.theme,loop:L.loop,lang:L.lang,screenshot:L.screenshot,pictureInPicture:L.pictureInPicture,airplay:L.airplay,hotkey:L.hotkey,preload:L.preload,crossOrigin:L.crossOrigin,volume:L.volume,playbackSpeed:L.playbackSpeed,logo:L.logo,apiBackend:L.apiBackend,video:L.video,subtitle:L.subtitle,danmaku:L.danmaku,contextmenu:L.contextmenu,highlight:L.highlight,mutex:L.mutex,pluginOptions:L.pluginOptions}})({preload:v.video.type==="webtorrent"?"none":"metadata",...v}),this.options.video.quality&&(this.qualityIndex=this.options.video.defaultQuality,this.quality=this.options.video.quality[this.options.video.defaultQuality]),this.tran=new Si(this.options.lang).tran,this.events=new Pp,this.user=new Mp(this),this.container=this.options.container,this.container.classList.add("dplayer"),this.options.live?this.container.classList.add("dplayer-live"):this.container.classList.remove("dplayer-live"),N.isMobile&&this.container.classList.add("dplayer-mobile"),this.narrow=this.container.offsetWidth<=500,this.narrow&&this.container.classList.add("dplayer-narrow"),this.resizeObserver=new ResizeObserver(L=>{for(const q of L)q.target===this.container&&(this.narrow=this.container.offsetWidth<=500,this.narrow?this.container.classList.add("dplayer-narrow"):this.container.classList.remove("dplayer-narrow"));this.resize()}),this.resizeObserver.observe(this.container),this.template=new Lp({container:this.container,options:this.options,index:sc,tran:this.tran}),this.video=this.template.video,this.bar=new Fp(this.template),this.bezel=new Up(this.template.bezel),this.fullScreen=new Op(this),this.controller=new Gp(this),this.initDanmaku(this.options.danmaku,this.options.apiBackend),this.plugins={},this.docClickFun=()=>{this.focus=!1},this.containerClickFun=()=>{this.focus=!0},document.addEventListener("click",this.docClickFun,!0),this.container.addEventListener("click",this.containerClickFun,!0),this.paused=!0,this.timer=new Np(this),this.hotkey=new Hp(this),this.contextmenu=new qp(this),this.initVideo(this.video,this.quality&&this.quality.type||this.options.video.type),this.setting=new Vp(this),this.infoPanel=new zp(this),!this.danmaku&&this.options.autoplay&&this.play(),sc++,Lr.push(this)}seek(v,L=!1){v=Math.max(v,0);const q=N.getVideoDuration(this.video,this.template);q&&(v=Math.min(v,q)),L||(this.video.currentTime<v?this.options.lang.includes("ja")?this.notice(`${(v-this.video.currentTime).toFixed(0)}ÁßíÊó©ÈÄÅ„Çä`):this.notice(`${this.tran("FF")} ${(v-this.video.currentTime).toFixed(0)} ${this.tran("s")}`):this.video.currentTime>v&&(this.options.lang.includes("ja")?this.notice(`${(this.video.currentTime-v).toFixed(0)}ÁßíÊó©Êàª„Åó`):this.notice(`${this.tran("REW")} ${(this.video.currentTime-v).toFixed(0)} ${this.tran("s")}`))),isFinite(v)&&(this.video.currentTime=v),this.danmaku&&this.danmaku.seek(),this.bar.set("played",v/q,"width"),this.template.ptime.textContent=N.secondToTime(v)}sync(v=!1){if(this.options.live){const L=N.getVideoDuration(this.video,this.template)-this.options.liveSyncMinBufferSize;try{this.video.currentTime=L}catch{return}this.danmaku&&this.danmaku.seek(),this.template.ptime.textContent=N.secondToTime(L),v||this.notice(this.tran("Synchronized"))}}play(v=!1){if(this.paused=!1,this.video.paused&&!N.isMobile&&this.bezel.switch(Ln.play),this.template.playIcon.innerHTML=Ln.pause,this.template.mobilePlayButton.innerHTML=Ln.pause,this.options.live&&this.options.syncWhenPlayingLive&&this.sync(!0),!v){const L=this.type==="mpegts"&&this.plugins.mpegts&&this.plugins.mpegts.play.bind(this.plugins.mpegts)||this.video.play.bind(this.video);Promise.resolve(L()).catch(()=>{this.pause()}).then(()=>{})}if(this.timer.enable("loading"),this.container.classList.remove("dplayer-paused"),this.container.classList.add("dplayer-playing"),this.danmaku&&this.danmaku.play(),this.options.mutex)for(let L=0;L<Lr.length;L++)this!==Lr[L]&&Lr[L].pause()}pause(v=!1){this.paused=!0,this.container.classList.remove("dplayer-loading"),this.video.paused||N.isMobile||this.bezel.switch(Ln.pause),this.template.playIcon.innerHTML=Ln.play,this.template.mobilePlayButton.innerHTML=Ln.play,v||this.video.pause(),this.timer.disable("loading"),this.container.classList.remove("dplayer-playing"),this.container.classList.add("dplayer-paused"),this.danmaku&&this.danmaku.pause()}switchVolumeIcon(){this.volume()>=.95?this.template.volumeIcon.innerHTML=Ln.volumeUp:this.volume()>0?this.template.volumeIcon.innerHTML=Ln.volumeDown:this.template.volumeIcon.innerHTML=Ln.volumeOff}volume(v=NaN,L=!1,q=!1){if(typeof v=="string"&&(v=parseFloat(v)),!isNaN(v)){v=Math.max(v,0),v=Math.min(v,1),this.bar.set("volume",v,"width");const ee=`${(100*v).toFixed(0)}%`;this.template.volumeBarWrapWrap.ariaLabel=ee,L||this.user.set("volume",v),q||this.notice(`${this.tran("Volume")} ${(100*v).toFixed(0)}%`),this.video.volume=v,this.video.muted&&(this.video.muted=!1),this.switchVolumeIcon()}return this.video.volume}muted(v){return typeof v=="boolean"&&(v?(this.video.muted=!0,this.template.volumeIcon.innerHTML=Ln.volumeOff,this.bar.set("volume",0,"width")):(this.video.muted=!1,this.switchVolumeIcon(),this.bar.set("volume",this.volume(),"width"))),this.video.muted}toggle(){this.video.paused?this.play():this.pause()}on(v,L,q=!1){this.events.on(v,L,q)}off(v,L){this.events.off(v,L)}switchVideo(v,L,q=!1,ee=tn){this.pause();const _e=this.video.currentTime,Ae=this.video.playbackRate;this.video.poster=v.pic?v.pic:"",this.video.src=v.url,this.initMSE(this.video,v.type||"auto"),L&&(this.danmaku?(q||(this.bar.set("played",0,"width"),this.bar.set("loaded",0,"width"),this.template.ptime.textContent="00:00"),this.template.danmaku.innerHTML="",this.danmaku.options.apiBackend=ee,typeof L=="object"?this.danmaku.reload({id:L.id,address:L.api,token:L.token,maximum:L.maximum,addition:L.addition,user:L.user}):this.danmaku.reload({})):this.initDanmaku(L,ee)),q&&!this.options.live&&(_e!==0&&this.seek(_e),Ae!==1&&this.speed(Ae))}initDanmaku(v,L=tn){v?(this.container.classList.remove("dplayer-no-danmaku"),this.template.danmakuLoading.style.display="block",this.danmaku=new Dp({player:this,container:this.template.danmaku,opacity:this.user.get("opacity"),callback:()=>{setTimeout(()=>{this.template.danmakuLoading.style.display="none",this.options.autoplay&&this.play()},0)},error:q=>{this.notice(q,void 0,void 0,"#FF6F6A")},apiBackend:L,borderColor:this.options.theme,fontSize:typeof v=="boolean"?24:v.fontSize||24,time:()=>this.video.currentTime,unlimited:this.user.get("unlimited"),speedRate:typeof v=="boolean"?1:v.speedRate||1,api:typeof v=="boolean"?{}:{id:v.id,address:v.api,token:v.token,maximum:v.maximum,addition:v.addition,user:v.user},events:this.events,tran:q=>this.tran(q)}),this.comment=new jp(this)):this.container.classList.add("dplayer-no-danmaku")}initMSE(v,L){if(this.type=L,this.options.video.customType&&this.options.video.customType[L])Object.prototype.toString.call(this.options.video.customType[L])==="[object Function]"?this.options.video.customType[L](this.video,this):console.error(`Illegal customType: ${L}`);else switch(this.type==="auto"&&(/m3u8(#|\?|$)/i.exec(v.src)?this.type="hls":/.ts(#|\?|$)/i.exec(v.src)?this.type="mpegts":/.flv(#|\?|$)/i.exec(v.src)?this.type="flv":/.mpd(#|\?|$)/i.exec(v.src)?this.type="dash":this.type="normal"),this.type!=="mpegts"&&this.container.classList.add("dplayer-no-audio-switching"),this.type){case"hls":if(window.Hls)if(window.Hls.isSupported()){this.plugins.hls&&(this.plugins.aribb24Caption&&(this.plugins.aribb24Caption.dispose(),delete this.plugins.aribb24Caption),this.plugins.aribb24Superimpose&&(this.plugins.aribb24Superimpose.dispose(),delete this.plugins.aribb24Superimpose),this.plugins.hls.destroy(),delete this.plugins.hls);const q=this.options.pluginOptions.hls,ee=new window.Hls(q);if(this.plugins.hls=ee,ee.loadSource(v.src),ee.attachMedia(v),ee.on(window.Hls.Events.AUDIO_TRACKS_UPDATED,()=>{ee.audioTracks.length>=2?this.container.classList.remove("dplayer-no-audio-switching"):this.container.classList.add("dplayer-no-audio-switching")}),this.events.on("destroy",()=>{this.plugins.aribb24Caption&&(this.plugins.aribb24Caption.dispose(),delete this.plugins.aribb24Caption),this.plugins.aribb24Superimpose&&(this.plugins.aribb24Superimpose.dispose(),delete this.plugins.aribb24Superimpose),ee.destroy(),delete this.plugins.hls}),this.options.subtitle&&this.options.subtitle.type==="aribb24"){this.options.pluginOptions.aribb24===void 0&&(this.options.pluginOptions.aribb24={}),this.options.pluginOptions.aribb24.enableAutoInBandMetadataTextTrackDetection=!1;const _e=this.options.pluginOptions.aribb24,Ae=this.plugins.aribb24Caption=new Z.CanvasRenderer({..._e,data_identifier:128});if(Ae.attachMedia(v),Ae.show(),this.options.pluginOptions.aribb24.disableSuperimposeRenderer!==!0){const we=this.plugins.aribb24Superimpose=new Z.CanvasRenderer({..._e,data_identifier:129});we.attachMedia(v),we.show()}ee.on(window.Hls.Events.FRAG_PARSING_METADATA,(we,Xe)=>{for(const ht of Xe.samples)this.plugins.aribb24Caption&&this.plugins.aribb24Caption.pushID3v2Data(ht.pts,ht.data),this.plugins.aribb24Superimpose&&this.plugins.aribb24Superimpose.pushID3v2Data(ht.pts,ht.data)})}}else if(v.canPlayType("application/x-mpegURL")||v.canPlayType("application/vnd.apple.mpegURL")){if(this.plugins.aribb24Caption&&(this.plugins.aribb24Caption.dispose(),delete this.plugins.aribb24Caption),this.plugins.aribb24Superimpose&&(this.plugins.aribb24Superimpose.dispose(),delete this.plugins.aribb24Superimpose),this.events.on("destroy",()=>{this.plugins.aribb24Caption&&(this.plugins.aribb24Caption.dispose(),delete this.plugins.aribb24Caption),this.plugins.aribb24Superimpose&&(this.plugins.aribb24Superimpose.dispose(),delete this.plugins.aribb24Superimpose)}),this.options.subtitle&&this.options.subtitle.type==="aribb24"){this.options.pluginOptions.aribb24===void 0&&(this.options.pluginOptions.aribb24={}),this.options.pluginOptions.aribb24.enableAutoInBandMetadataTextTrackDetection=!0;const q=this.options.pluginOptions.aribb24,ee=this.plugins.aribb24Caption=new Z.CanvasRenderer({...q,data_identifier:128});if(ee.attachMedia(v),ee.show(),this.options.pluginOptions.aribb24.disableSuperimposeRenderer!==!0){const _e=this.plugins.aribb24Superimpose=new Z.CanvasRenderer({...q,data_identifier:129});_e.attachMedia(v),_e.show()}}}else this.notice("Error: HLS is not supported.",void 0,void 0,"#FF6F6A");else this.notice("Error: Can't find hls.js.",void 0,void 0,"#FF6F6A");break;case"mpegts":if(window.mpegts)if(window.mpegts.isSupported()){this.plugins.mpegts&&(this.plugins.aribb24Caption&&(this.plugins.aribb24Caption.dispose(),delete this.plugins.aribb24Caption),this.plugins.aribb24Superimpose&&(this.plugins.aribb24Superimpose.dispose(),delete this.plugins.aribb24Superimpose),this.plugins.mpegts.unload(),this.plugins.mpegts.detachMediaElement(),this.plugins.mpegts.destroy(),delete this.plugins.mpegts),this.options.pluginOptions.mpegts===void 0&&(this.options.pluginOptions.mpegts={});const q=window.mpegts.createPlayer(Object.assign(this.options.pluginOptions.mpegts.mediaDataSource||{},{type:"mpegts",isLive:this.options.live,url:v.src}),this.options.pluginOptions.mpegts.config);if(this.plugins.mpegts=q,q.attachMediaElement(v),q.load(),this.events.on("destroy",()=>{this.plugins.aribb24Caption&&(this.plugins.aribb24Caption.dispose(),delete this.plugins.aribb24Caption),this.plugins.aribb24Superimpose&&(this.plugins.aribb24Superimpose.dispose(),delete this.plugins.aribb24Superimpose),q.unload(),q.detachMediaElement(),q.destroy(),delete this.plugins.mpegts}),this.options.subtitle&&this.options.subtitle.type==="aribb24"){this.options.pluginOptions.aribb24===void 0&&(this.options.pluginOptions.aribb24={}),this.options.pluginOptions.aribb24.enableAutoInBandMetadataTextTrackDetection=!1;const ee=this.options.pluginOptions.aribb24,_e=this.plugins.aribb24Caption=new Z.CanvasRenderer({...ee,data_identifier:128});if(_e.attachMedia(v),_e.show(),this.options.pluginOptions.aribb24.disableSuperimposeRenderer!==!0){const Ae=this.plugins.aribb24Superimpose=new Z.CanvasRenderer({...ee,data_identifier:129});Ae.attachMedia(v),Ae.show()}q.on(window.mpegts.Events.TIMED_ID3_METADATA_ARRIVED,Ae=>{this.plugins.aribb24Caption&&this.plugins.aribb24Caption.pushID3v2Data(Ae.pts/1e3,Ae.data),this.plugins.aribb24Superimpose&&this.plugins.aribb24Superimpose.pushID3v2Data(Ae.pts/1e3,Ae.data)})}}else this.notice("Error: mpegts.js is not supported.",void 0,void 0,"#FF6F6A");else this.notice("Error: Can't find mpegts.js.",void 0,void 0,"#FF6F6A");break;case"flv":if(window.flvjs)if(window.flvjs.isSupported()){this.options.pluginOptions.flv===void 0&&(this.options.pluginOptions.flv={});const q=window.flvjs.createPlayer(Object.assign(this.options.pluginOptions.flv.mediaDataSource||{},{type:"flv",url:v.src}),this.options.pluginOptions.flv.config);this.plugins.flvjs=q,q.attachMediaElement(v),q.load(),this.events.on("destroy",()=>{q.unload(),q.detachMediaElement(),q.destroy(),delete this.plugins.flvjs})}else this.notice("Error: flv.js is not supported.",void 0,void 0,"#FF6F6A");else this.notice("Error: Can't find flv.js.",void 0,void 0,"#FF6F6A");break;case"dash":if(window.dashjs){const q=window.dashjs.MediaPlayer().create();q.initialize(v,v.src,!1);const ee=this.options.pluginOptions.dash;q.updateSettings(ee??{}),this.plugins.dash=q,this.events.on("destroy",()=>{q.reset(),delete this.plugins.dash})}else this.notice("Error: Can't find dash.js.",void 0,void 0,"#FF6F6A");break;case"webtorrent":if(window.WebTorrent)if(window.WebTorrent.WEBRTC_SUPPORT){this.container.classList.add("dplayer-loading");const q=this.options.pluginOptions.webtorrent,ee=new window.WebTorrent(q);this.plugins.webtorrent=ee;const _e=v.src;v.src="",v.preload="metadata",v.addEventListener("durationchange",()=>this.container.classList.remove("dplayer-loading"),{once:!0}),ee.add(_e,Ae=>{const we=Ae.files.find(Xe=>Xe.name.endsWith(".mp4"));we&&we.renderTo(this.video,{autoplay:this.options.autoplay,controls:!1})}),this.events.on("destroy",()=>{ee.remove(_e),ee.destroy(),delete this.plugins.webtorrent})}else this.notice("Error: Webtorrent is not supported.",void 0,void 0,"#FF6F6A");else this.notice("Error: Can't find Webtorrent.",void 0,void 0,"#FF6F6A")}}initVideo(v,L){this.initMSE(v,L),this.on("durationchange",()=>{v.duration!==1&&v.duration!==1/0&&(this.template.dtime.textContent=N.secondToTime(v.duration))}),this.on("progress",()=>{const ee=N.getVideoDuration(this.video,this.template),_e=v.buffered.length?v.buffered.end(v.buffered.length-1)/ee:0;this.bar.set("loaded",_e,"width")}),this.on("error",()=>{this.video.error&&(this.switchingQuality&&(this.prevVideo!==null&&this.template.videoWrapAspect.removeChild(this.prevVideo),this.video.classList.add("dplayer-video-current"),this.prevVideo=null,this.switchingQuality=!1,this.events.trigger("quality_end")),this.tran&&this.notice&&this.type!=="webtorrent"&&this.notice(this.tran("Video load failed"),-1,void 0,"#FF6F6A"),this.container.classList.remove("dplayer-loading"))}),this.on("ended",()=>{this.bar.set("played",1,"width"),this.setting.loop?(this.seek(0),this.play()):this.pause(),this.danmaku&&(this.danmaku.danIndex=0)}),this.on("play",()=>{this.paused&&this.play(!0)}),this.on("pause",()=>{this.paused||this.pause(!0)}),this.on("timeupdate",()=>{const ee=N.getVideoDuration(this.video,this.template);this.bar.set("played",this.video.currentTime/ee,"width");const _e=N.secondToTime(this.video.currentTime);this.template.ptime.textContent!==_e&&(this.template.ptime.textContent=_e)});for(let ee=0;ee<this.events.videoEvents.length;ee++)v.addEventListener(this.events.videoEvents[ee],_e=>{this.events.trigger(this.events.videoEvents[ee],_e)});this.volume(this.user.get("volume"),!0,!0);const q=this.user.get("speed");q&&q!==1&&this.speed(q),this.options.subtitle&&(this.subtitle=new Bp(this.template.subtitle,this.video,this.plugins,this.options.subtitle,this.events),this.user.get("subtitle")||this.subtitle.hide())}switchQuality(v){if(v=typeof v=="string"?parseInt(v):v,this.options.video.quality===void 0||this.qualityIndex===v||this.switchingQuality)return;this.qualityIndex=v,this.switchingQuality=!0,this.quality=this.options.video.quality[v];const L=this.video.paused;this.video.pause();const q=Wp()({current:!1,pic:null,screenshot:this.options.screenshot,preload:"auto",url:this.quality.url,subtitle:this.options.subtitle,crossOrigin:this.options.crossOrigin}),ee=new DOMParser().parseFromString(q,"text/html").body.firstChild;this.template.videoWrapAspect.insertBefore(ee,this.template.videoWrapAspect.getElementsByTagName("div")[0]),this.prevVideoCurrentTime=this.video.currentTime,this.prevVideo=this.video,this.video=ee,this.initVideo(this.video,this.quality.type||this.options.video.type),this.options.live||this.seek(this.prevVideoCurrentTime),L||this.video.play(),this.options.lang.includes("ja")?this.notice(`ÁîªË≥™„Çí ${this.quality.name} „Å´Âàá„ÇäÊõø„Åà„Å¶„ÅÑ„Åæ„Åô‚Ä¶`,-1):this.notice(`${this.tran("Switching to")} ${this.quality.name} ${this.tran("quality")}`,-1),this.container.classList.add("dplayer-loading"),this.events.trigger("quality_start",this.quality),this.template.qualityItem.forEach(_e=>{_e.classList.remove("dplayer-setting-quality-current"),parseInt(_e.dataset.index)===v&&(_e.classList.add("dplayer-setting-quality-current"),this.template.qualityValue.textContent=this.quality.name,this.template.settingBox.classList.remove("dplayer-setting-box-quality"))}),this.on("canplay",()=>{if(this.prevVideo!==null){if(!this.options.live&&this.video.currentTime!==this.prevVideoCurrentTime)return void this.seek(this.prevVideoCurrentTime);this.template.videoWrapAspect.removeChild(this.prevVideo),this.video.classList.add("dplayer-video-current"),L||this.video.play(),this.prevVideo=null,this.options.lang.includes("ja")?this.notice(`ÁîªË≥™„Çí ${this.quality.name} „Å´Âàá„ÇäÊõø„Åà„Åæ„Åó„Åü„ÄÇ`,1e3):this.notice(`${this.tran("Switched to")} ${this.quality.name} ${this.tran("quality")}`),this.switchingQuality=!1;const _e=parseFloat(this.template.settingBox.querySelector(".dplayer-setting-speed-current").dataset.speed);if(this.speed(_e),this.template.settingBox.querySelector(".dplayer-setting-audio-current").dataset.audio==="secondary"){if(window.mpegts&&this.plugins.mpegts&&this.plugins.mpegts instanceof window.mpegts.MSEPlayer)this.plugins.mpegts.switchSecondaryAudio();else if(window.Hls&&this.plugins.hls&&this.plugins.hls instanceof window.Hls){const Ae=this.plugins.hls;Ae.audioTracks.length>=2&&(Ae.audioTrack=1)}}else if(window.Hls&&this.plugins.hls&&this.plugins.hls instanceof window.Hls){const Ae=this.plugins.hls;Ae.audioTracks.length>=2&&(Ae.audioTrack=0)}this.container.classList.remove("dplayer-loading"),this.events.trigger("quality_end")}})}notice(v,L=2e3,q=.8,ee){this.template.notice.textContent=v,this.template.notice.style.opacity=`${q}`,this.template.notice.style.color=ee&&ee!==""?ee:"",this.noticeTime&&window.clearTimeout(this.noticeTime),this.events.trigger("notice_show",v),L>0&&(this.noticeTime=window.setTimeout(()=>{this.hideNotice()},L))}hideNotice(){this.template.notice.style.opacity="0",this.events.trigger("notice_hide")}resize(){if(this.danmaku&&this.danmaku.resize(),this.plugins.aribb24Caption&&this.plugins.aribb24Caption.refresh(),this.plugins.aribb24Superimpose&&this.plugins.aribb24Superimpose.refresh(),this.controller.thumbnails){const v=this.options.video.thumbnails,L=v&&v.width||160,q=v&&v.height||Math.floor(9*L/16);this.controller.thumbnails.resize(L,q,this.template.barWrap.offsetWidth)}this.events.trigger("resize")}speed(v){this.video.playbackRate=v,this.user.set("speed",v),this.template.speedItem.forEach(L=>{L.classList.remove("dplayer-setting-speed-current"),parseFloat(L.dataset.speed)===v&&(L.classList.add("dplayer-setting-speed-current"),parseFloat(L.dataset.speed)===1?this.template.speedValue.textContent=this.tran("Normal"):this.template.speedValue.textContent=`${v}`,this.template.settingBox.classList.remove("dplayer-setting-box-speed"))})}destroy(v=!1){Lr.splice(Lr.indexOf(this),1),this.pause(),document.removeEventListener("click",this.docClickFun,!0),this.container.removeEventListener("click",this.containerClickFun,!0),this.fullScreen.destroy(),this.hotkey.destroy(),this.contextmenu.destroy(),this.controller.destroy(),this.timer.destroy(),this.setting.destroy(),this.resizeObserver.disconnect(),this.video.removeAttribute("src"),v||(this.container.innerHTML=""),this.events.trigger("destroy")}static get version(){return"1.32.7"}};console.log(`
 %c DPlayer v1.32.7 27c0a1c %c http://dplayer.js.org 

`,"color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;");const Xp=Yp})(),a=a.default})())})(wh);var Hv=wh.exports;const qv=bl(Hv),wt=Number.isFinite||function(s){return typeof s=="number"&&isFinite(s)},zv=Number.isSafeInteger||function(s){return typeof s=="number"&&Math.abs(s)<=Kv},Kv=Number.MAX_SAFE_INTEGER||9007199254740991;let Gt=function(s){return s.NETWORK_ERROR="networkError",s.MEDIA_ERROR="mediaError",s.KEY_SYSTEM_ERROR="keySystemError",s.MUX_ERROR="muxError",s.OTHER_ERROR="otherError",s}({}),je=function(s){return s.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",s.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",s.KEY_SYSTEM_NO_SESSION="keySystemNoSession",s.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",s.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",s.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",s.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",s.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",s.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",s.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",s.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",s.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",s.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",s.MANIFEST_LOAD_ERROR="manifestLoadError",s.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",s.MANIFEST_PARSING_ERROR="manifestParsingError",s.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",s.LEVEL_EMPTY_ERROR="levelEmptyError",s.LEVEL_LOAD_ERROR="levelLoadError",s.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",s.LEVEL_PARSING_ERROR="levelParsingError",s.LEVEL_SWITCH_ERROR="levelSwitchError",s.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",s.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",s.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",s.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",s.FRAG_LOAD_ERROR="fragLoadError",s.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",s.FRAG_DECRYPT_ERROR="fragDecryptError",s.FRAG_PARSING_ERROR="fragParsingError",s.FRAG_GAP="fragGap",s.REMUX_ALLOC_ERROR="remuxAllocError",s.KEY_LOAD_ERROR="keyLoadError",s.KEY_LOAD_TIMEOUT="keyLoadTimeOut",s.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",s.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",s.BUFFER_APPEND_ERROR="bufferAppendError",s.BUFFER_APPENDING_ERROR="bufferAppendingError",s.BUFFER_STALLED_ERROR="bufferStalledError",s.BUFFER_FULL_ERROR="bufferFullError",s.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",s.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",s.ASSET_LIST_LOAD_ERROR="assetListLoadError",s.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",s.ASSET_LIST_PARSING_ERROR="assetListParsingError",s.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",s.INTERNAL_EXCEPTION="internalException",s.INTERNAL_ABORTED="aborted",s.ATTACH_MEDIA_ERROR="attachMediaError",s.UNKNOWN="unknown",s}({}),V=function(s){return s.MEDIA_ATTACHING="hlsMediaAttaching",s.MEDIA_ATTACHED="hlsMediaAttached",s.MEDIA_DETACHING="hlsMediaDetaching",s.MEDIA_DETACHED="hlsMediaDetached",s.MEDIA_ENDED="hlsMediaEnded",s.STALL_RESOLVED="hlsStallResolved",s.BUFFER_RESET="hlsBufferReset",s.BUFFER_CODECS="hlsBufferCodecs",s.BUFFER_CREATED="hlsBufferCreated",s.BUFFER_APPENDING="hlsBufferAppending",s.BUFFER_APPENDED="hlsBufferAppended",s.BUFFER_EOS="hlsBufferEos",s.BUFFERED_TO_END="hlsBufferedToEnd",s.BUFFER_FLUSHING="hlsBufferFlushing",s.BUFFER_FLUSHED="hlsBufferFlushed",s.MANIFEST_LOADING="hlsManifestLoading",s.MANIFEST_LOADED="hlsManifestLoaded",s.MANIFEST_PARSED="hlsManifestParsed",s.LEVEL_SWITCHING="hlsLevelSwitching",s.LEVEL_SWITCHED="hlsLevelSwitched",s.LEVEL_LOADING="hlsLevelLoading",s.LEVEL_LOADED="hlsLevelLoaded",s.LEVEL_UPDATED="hlsLevelUpdated",s.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",s.LEVELS_UPDATED="hlsLevelsUpdated",s.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",s.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",s.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",s.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",s.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",s.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",s.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",s.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",s.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",s.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",s.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",s.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",s.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",s.CUES_PARSED="hlsCuesParsed",s.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",s.INIT_PTS_FOUND="hlsInitPtsFound",s.FRAG_LOADING="hlsFragLoading",s.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",s.FRAG_LOADED="hlsFragLoaded",s.FRAG_DECRYPTED="hlsFragDecrypted",s.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",s.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",s.FRAG_PARSING_METADATA="hlsFragParsingMetadata",s.FRAG_PARSED="hlsFragParsed",s.FRAG_BUFFERED="hlsFragBuffered",s.FRAG_CHANGED="hlsFragChanged",s.FPS_DROP="hlsFpsDrop",s.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",s.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",s.ERROR="hlsError",s.DESTROYING="hlsDestroying",s.KEY_LOADING="hlsKeyLoading",s.KEY_LOADED="hlsKeyLoaded",s.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",s.BACK_BUFFER_REACHED="hlsBackBufferReached",s.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",s.ASSET_LIST_LOADING="hlsAssetListLoading",s.ASSET_LIST_LOADED="hlsAssetListLoaded",s.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",s.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",s.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",s.INTERSTITIAL_STARTED="hlsInterstitialStarted",s.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",s.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",s.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",s.INTERSTITIAL_ENDED="hlsInterstitialEnded",s.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",s.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",s.EVENT_CUE_ENTER="hlsEventCueEnter",s}({});var yi={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Mt={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Or{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Wv{constructor(e,t,i,n=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Or(e),this.fast_=new Or(t),this.defaultTTFB_=n,this.ttfb_=new Or(e)}update(e,t){const{slow_:i,fast_:n,ttfb_:a}=this;i.halfLife!==e&&(this.slow_=new Or(e,i.getEstimate(),i.getTotalWeight())),n.halfLife!==t&&(this.fast_=new Or(t,n.getEstimate(),n.getTotalWeight())),a.halfLife!==e&&(this.ttfb_=new Or(e,a.getEstimate(),a.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const i=8*t,n=e/1e3,a=i/n;this.fast_.sample(n,a),this.slow_.sample(n,a)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Yv(s,e,t){return(e=Jv(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function Pi(){return Pi=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},Pi.apply(null,arguments)}function od(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function Ii(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?od(Object(t),!0).forEach(function(i){Yv(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):od(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function Xv(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function Jv(s){var e=Xv(s,"string");return typeof e=="symbol"?e:e+""}class Mn{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const i=`[${e}]:`;this.trace=dr,this.debug=t.debug.bind(null,i),this.log=t.log.bind(null,i),this.warn=t.warn.bind(null,i),this.info=t.info.bind(null,i),this.error=t.error.bind(null,i)}}const dr=function(){},Qv={trace:dr,debug:dr,log:dr,warn:dr,info:dr,error:dr};function Zo(){return Pi({},Qv)}function Zv(s,e){const t=self.console[s];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${s}] >`):dr}function ld(s,e,t){return e[s]?e[s].bind(e):Zv(s,t)}const el=Zo();function eA(s,e,t){const i=Zo();if(typeof console=="object"&&s===!0||typeof s=="object"){const n=["debug","log","info","warn","error"];n.forEach(a=>{i[a]=ld(a,s,t)});try{i.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return Zo()}n.forEach(a=>{el[a]=ld(a,s)})}else Pi(el,i);return i}const Ri=el;function fr(s=!0){return typeof self>"u"?void 0:(s||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function tA(s){return typeof self<"u"&&s===self.ManagedMediaSource}function kh(s,e){const t=Object.keys(s),i=Object.keys(e),n=t.length,a=i.length;return!n||!a||n===a&&!t.some(r=>i.indexOf(r)===-1)}function kn(s,e=!1){if(typeof TextDecoder<"u"){const c=new TextDecoder("utf-8").decode(s);if(e){const l=c.indexOf("\0");return l!==-1?c.substring(0,l):c}return c.replace(/\0/g,"")}const t=s.length;let i,n,a,r="",o=0;for(;o<t;){if(i=s[o++],i===0&&e)return r;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(i);break;case 12:case 13:n=s[o++],r+=String.fromCharCode((i&31)<<6|n&63);break;case 14:n=s[o++],a=s[o++],r+=String.fromCharCode((i&15)<<12|(n&63)<<6|(a&63)<<0);break}}return r}function fn(s){let e="";for(let t=0;t<s.length;t++){let i=s[t].toString(16);i.length<2&&(i="0"+i),e+=i}return e}function Ih(s){return Uint8Array.from(s.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function iA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var vo={exports:{}},cd;function nA(){return cd||(cd=1,function(s,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(d,c,l){if(l=l||{},d=d.trim(),c=c.trim(),!c){if(!l.alwaysNormalize)return d;var f=o.parseURL(d);if(!f)throw new Error("Error trying to parse base URL.");return f.path=o.normalizePath(f.path),o.buildURLFromParts(f)}var p=o.parseURL(c);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return l.alwaysNormalize?(p.path=o.normalizePath(p.path),o.buildURLFromParts(p)):c;var g=o.parseURL(d);if(!g)throw new Error("Error trying to parse base URL.");if(!g.netLoc&&g.path&&g.path[0]!=="/"){var y=n.exec(g.path);g.netLoc=y[1],g.path=y[2]}g.netLoc&&!g.path&&(g.path="/");var A={scheme:g.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(A.netLoc=g.netLoc,p.path[0]!=="/"))if(!p.path)A.path=g.path,p.params||(A.params=g.params,p.query||(A.query=g.query));else{var C=g.path,I=C.substring(0,C.lastIndexOf("/")+1)+p.path;A.path=o.normalizePath(I)}return A.path===null&&(A.path=l.alwaysNormalize?o.normalizePath(p.path):p.path),o.buildURLFromParts(A)},parseURL:function(d){var c=i.exec(d);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(d){for(d=d.split("").reverse().join("").replace(a,"");d.length!==(d=d.replace(r,"")).length;);return d.split("").reverse().join("")},buildURLFromParts:function(d){return d.scheme+d.netLoc+d.path+d.params+d.query+d.fragment}};s.exports=o})()}(vo)),vo.exports}var Ml=nA();class Bl{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Fi={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class Rh{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,sA(this,"stats")}setByteRange(e,t){const i=e.split("@",2);let n;i.length===1?n=(t==null?void 0:t.byteRangeEndOffset)||0:n=parseInt(i[1]),this._byteRange=[n,parseInt(i[0])+n]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Fi.AUDIO]:null,[Fi.VIDEO]:null,[Fi.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Bl),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Ml.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Fi.AUDIO]=null,e[Fi.VIDEO]=null,e[Fi.AUDIOVIDEO]=null}}function Ji(s){return s.sn!=="initSegment"}class Ao extends Rh{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(wt(e)&&wt(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const i=Object.keys(t);if(i.length===1){const n=this._decryptdata=t[i[0]]||null;n&&(this._decryptdata=n.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=wt(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const i=Object.keys(this.levelkeys),n=i.length;if(n>1||n===1&&(t=this.levelkeys[i[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!wt(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return Ji(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var i;const n=t[e];n&&!((i=this._decryptdata)!=null&&i.keyId)&&(this._decryptdata=n.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,i,n,a,r=!1){const{elementaryStreams:o}=this,d=o[e];if(!d){o[e]={startPTS:t,endPTS:i,startDTS:n,endDTS:a,partial:r};return}d.startPTS=Math.min(d.startPTS,t),d.endPTS=Math.max(d.endPTS,i),d.startDTS=Math.min(d.startDTS,n),d.endDTS=Math.max(d.endDTS,a)}}class rA extends Rh{constructor(e,t,i,n,a){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=n;const r=e.enumeratedString("BYTERANGE");r&&this.setByteRange(r,a),a&&(this.fragOffset=a.fragOffset+a.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function Lh(s,e){const t=Object.getPrototypeOf(s);if(t){const i=Object.getOwnPropertyDescriptor(t,e);return i||Lh(t,e)}}function sA(s,e){const t=Lh(s,e);t&&(t.enumerable=!0,Object.defineProperty(s,e,t))}const dd=Math.pow(2,32)-1,aA=[].push,Dh={video:1,audio:2,id3:3,text:4};function rn(s){return String.fromCharCode.apply(null,s)}function Ph(s,e){const t=s[e]<<8|s[e+1];return t<0?65536+t:t}function oi(s,e){const t=Oh(s,e);return t<0?4294967296+t:t}function ud(s,e){let t=oi(s,e);return t*=Math.pow(2,32),t+=oi(s,e+4),t}function Oh(s,e){return s[e]<<24|s[e+1]<<16|s[e+2]<<8|s[e+3]}function oA(s){const e=s.byteLength;for(let t=0;t<e;){const i=oi(s,t);if(i>8&&s[t+4]===109&&s[t+5]===111&&s[t+6]===111&&s[t+7]===102)return!0;t=i>1?t+i:e}return!1}function mi(s,e){const t=[];if(!e.length)return t;const i=s.byteLength;for(let n=0;n<i;){const a=oi(s,n),r=rn(s.subarray(n+4,n+8)),o=a>1?n+a:i;if(r===e[0])if(e.length===1)t.push(s.subarray(n+8,o));else{const d=mi(s.subarray(n+8,o),e.slice(1));d.length&&aA.apply(t,d)}n=o}return t}function lA(s){const e=[],t=s[0];let i=8;const n=oi(s,i);i+=4;let a=0,r=0;t===0?(a=oi(s,i),r=oi(s,i+4),i+=8):(a=ud(s,i),r=ud(s,i+8),i+=16),i+=2;let o=s.length+r;const d=Ph(s,i);i+=2;for(let c=0;c<d;c++){let l=i;const f=oi(s,l);l+=4;const p=f&2147483647;if((f&2147483648)>>>31===1)return Ri.warn("SIDX has hierarchical references (not supported)"),null;const y=oi(s,l);l+=4,e.push({referenceSize:p,subsegmentDuration:y,info:{duration:y/n,start:o,end:o+p-1}}),o+=p,l+=4,i=l}return{earliestPresentationTime:a,timescale:n,version:t,referencesCount:d,references:e}}function Mh(s){const e=[],t=mi(s,["moov","trak"]);for(let n=0;n<t.length;n++){const a=t[n],r=mi(a,["tkhd"])[0];if(r){let o=r[0];const d=oi(r,o===0?12:20),c=mi(a,["mdia","mdhd"])[0];if(c){o=c[0];const l=oi(c,o===0?12:20),f=mi(a,["mdia","hdlr"])[0];if(f){const p=rn(f.subarray(8,12)),g={soun:Fi.AUDIO,vide:Fi.VIDEO}[p],y=mi(a,["mdia","minf","stbl","stsd"])[0],A=cA(y);g?(e[d]={timescale:l,type:g,stsd:A},e[g]=Ii({timescale:l,id:d},A)):e[d]={timescale:l,type:p,stsd:A}}}}}return mi(s,["moov","mvex","trex"]).forEach(n=>{const a=oi(n,4),r=e[a];r&&(r.default={duration:oi(n,12),flags:oi(n,20)})}),e}function cA(s){const e=s.subarray(8),t=e.subarray(86),i=rn(e.subarray(4,8));let n=i,a;const r=i==="enca"||i==="encv";if(r){const c=mi(e,[i])[0].subarray(i==="enca"?28:78);mi(c,["sinf"]).forEach(f=>{const p=mi(f,["schm"])[0];if(p){const g=rn(p.subarray(4,8));if(g==="cbcs"||g==="cenc"){const y=mi(f,["frma"])[0];y&&(n=rn(y))}}})}const o=n;switch(n){case"avc1":case"avc2":case"avc3":case"avc4":{const d=mi(t,["avcC"])[0];d&&d.length>3&&(n+="."+Is(d[1])+Is(d[2])+Is(d[3]),a=ks(o==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const d=mi(e,[i])[0],c=mi(d.subarray(28),["esds"])[0];if(c&&c.length>7){let l=4;if(c[l++]!==3)break;l=bo(c,l),l+=2;const f=c[l++];if(f&128&&(l+=2),f&64&&(l+=c[l++]),c[l++]!==4)break;l=bo(c,l);const p=c[l++];if(p===64)n+="."+Is(p);else break;if(l+=12,c[l++]!==5)break;l=bo(c,l);const g=c[l++];let y=(g&248)>>3;y===31&&(y+=1+((g&7)<<3)+((c[l]&224)>>5)),n+="."+y}break}case"hvc1":case"hev1":{const d=mi(t,["hvcC"])[0];if(d&&d.length>12){const c=d[1],l=["","A","B","C"][c>>6],f=c&31,p=oi(d,2),g=(c&32)>>5?"H":"L",y=d[12],A=d.subarray(6,12);n+="."+l+f,n+="."+dA(p).toString(16).toUpperCase(),n+="."+g+y;let C="";for(let I=A.length;I--;){const P=A[I];(P||C)&&(C="."+P.toString(16).toUpperCase()+C)}n+=C}a=ks(o=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{n=ks(n,t)||n;break}case"vp09":{const d=mi(t,["vpcC"])[0];if(d&&d.length>6){const c=d[4],l=d[5],f=d[6]>>4&15;n+="."+qn(c)+"."+qn(l)+"."+qn(f)}break}case"av01":{const d=mi(t,["av1C"])[0];if(d&&d.length>2){const c=d[1]>>>5,l=d[1]&31,f=d[2]>>>7?"H":"M",p=(d[2]&64)>>6,g=(d[2]&32)>>5,y=c===2&&p?g?12:10:p?10:8,A=(d[2]&16)>>4,C=(d[2]&8)>>3,I=(d[2]&4)>>2,P=d[2]&3;n+="."+c+"."+qn(l)+f+"."+qn(y)+"."+A+"."+C+I+P+"."+qn(1)+"."+qn(1)+"."+qn(1)+"."+0,a=ks("dav1",t)}break}}return{codec:n,encrypted:r,supplemental:a}}function ks(s,e){const t=mi(e,["dvvC"]),i=t.length?t[0]:mi(e,["dvcC"])[0];if(i){const n=i[2]>>1&127,a=i[2]<<5&32|i[3]>>3&31;return s+"."+qn(n)+"."+qn(a)}}function dA(s){let e=0;for(let t=0;t<32;t++)e|=(s>>t&1)<<31-t;return e>>>0}function bo(s,e){const t=e+5;for(;s[e++]&128&&e<t;);return e}function Is(s){return("0"+s.toString(16).toUpperCase()).slice(-2)}function qn(s){return(s<10?"0":"")+s}function uA(s,e){if(!s||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&Bh(s,(i,n)=>{const a=i.subarray(8,24);a.some(r=>r!==0)||(Ri.log(`[eme] Patching keyId in 'enc${n?"a":"v"}>sinf>>tenc' box: ${fn(a)} -> ${fn(t)}`),i.set(t,8))})}function hA(s){const e=[];return Bh(s,t=>e.push(t.subarray(8,24))),e}function Bh(s,e){mi(s,["moov","trak"]).forEach(i=>{const n=mi(i,["mdia","minf","stbl","stsd"])[0];if(!n)return;const a=n.subarray(8);let r=mi(a,["enca"]);const o=r.length>0;o||(r=mi(a,["encv"])),r.forEach(d=>{const c=o?d.subarray(28):d.subarray(78);mi(c,["sinf"]).forEach(f=>{const p=Fh(f);p&&e(p,o)})})})}function Fh(s){const e=mi(s,["schm"])[0];if(e){const t=rn(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){const i=mi(s,["schi","tenc"])[0];if(i)return i}}}function fA(s,e,t){const i={},n=mi(s,["moof","traf"]);for(let a=0;a<n.length;a++){const r=n[a],o=mi(r,["tfhd"])[0],d=oi(o,4),c=e[d];if(!c)continue;i[d]||(i[d]={start:NaN,duration:0,sampleCount:0,timescale:c.timescale,type:c.type});const l=i[d],f=mi(r,["tfdt"])[0];if(f){const M=f[0];let G=oi(f,4);M===1&&(G===dd?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(G*=dd+1,G+=oi(f,8))),wt(G)&&(!wt(l.start)||G<l.start)&&(l.start=G)}const p=c.default,g=oi(o,0)|(p==null?void 0:p.flags);let y=(p==null?void 0:p.duration)||0;g&8&&(g&2?y=oi(o,12):y=oi(o,8));const A=mi(r,["trun"]);let C=l.start||0,I=0,P=y;for(let M=0;M<A.length;M++){const G=A[M],Z=oi(G,4),le=l.sampleCount;l.sampleCount+=Z;const W=G[3]&1,N=G[3]&4,U=G[2]&1,O=G[2]&2,z=G[2]&4,ce=G[2]&8;let be=8,Le=Z;for(W&&(be+=4),N&&Z&&(!(G[be+1]&1)&&l.keyFrameIndex===void 0&&(l.keyFrameIndex=le),be+=4,U?(P=oi(G,be),be+=4):P=y,O&&(be+=4),ce&&(be+=4),C+=P,I+=P,Le--);Le--;)U?(P=oi(G,be),be+=4):P=y,O&&(be+=4),z&&(G[be+1]&1||l.keyFrameIndex===void 0&&(l.keyFrameIndex=l.sampleCount-(Le+1),l.keyFrameStart=C),be+=4),ce&&(be+=4),C+=P,I+=P;!I&&y&&(I+=y*Z)}l.duration+=I}if(!Object.keys(i).some(a=>i[a].duration)){let a=1/0,r=0;const o=mi(s,["sidx"]);for(let d=0;d<o.length;d++){const c=lA(o[d]);if(c!=null&&c.references){a=Math.min(a,c.earliestPresentationTime/c.timescale);const l=c.references.reduce((f,p)=>f+p.info.duration||0,0);r=Math.max(r,l+c.earliestPresentationTime/c.timescale)}}r&&wt(r)&&Object.keys(i).forEach(d=>{i[d].duration||(i[d].duration=r*i[d].timescale-i[d].start)})}return i}function pA(s){const e={valid:null,remainder:null},t=mi(s,["moof"]);if(t.length<2)return e.remainder=s,e;const i=t[t.length-1];return e.valid=s.slice(0,i.byteOffset-8),e.remainder=s.slice(i.byteOffset-8),e}function On(s,e){const t=new Uint8Array(s.length+e.length);return t.set(s),t.set(e,s.length),t}function hd(s,e){const t=[],i=e.samples,n=e.timescale,a=e.id;let r=!1;return mi(i,["moof"]).map(d=>{const c=d.byteOffset-8;mi(d,["traf"]).map(f=>{const p=mi(f,["tfdt"]).map(g=>{const y=g[0];let A=oi(g,4);return y===1&&(A*=Math.pow(2,32),A+=oi(g,8)),A/n})[0];return p!==void 0&&(s=p),mi(f,["tfhd"]).map(g=>{const y=oi(g,4),A=oi(g,0)&16777215,C=(A&1)!==0,I=(A&2)!==0,P=(A&8)!==0;let M=0;const G=(A&16)!==0;let Z=0;const le=(A&32)!==0;let W=8;y===a&&(C&&(W+=8),I&&(W+=4),P&&(M=oi(g,W),W+=4),G&&(Z=oi(g,W),W+=4),le&&(W+=4),e.type==="video"&&(r=Pa(e.codec)),mi(f,["trun"]).map(N=>{const U=N[0],O=oi(N,0)&16777215,z=(O&1)!==0;let ce=0;const be=(O&4)!==0,Le=(O&256)!==0;let xe=0;const ve=(O&512)!==0;let ze=0;const Pe=(O&1024)!==0,Y=(O&2048)!==0;let b=0;const S=oi(N,4);let k=8;z&&(ce=oi(N,k),k+=4),be&&(k+=4);let R=ce+c;for(let w=0;w<S;w++){if(Le?(xe=oi(N,k),k+=4):xe=M,ve?(ze=oi(N,k),k+=4):ze=Z,Pe&&(k+=4),Y&&(U===0?b=oi(N,k):b=Oh(N,k),k+=4),e.type===Fi.VIDEO){let $=0;for(;$<ze;){const X=oi(i,R);if(R+=4,mA(r,i[R])){const ie=i.subarray(R,R+X);Fl(ie,r?2:1,s+b/n,t)}R+=X,$+=X+4}}s+=xe/n}}))})})}),t}function Pa(s){if(!s)return!1;const e=s.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function mA(s,e){if(s){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Fl(s,e,t,i){const n=Nh(s);let a=0;a+=e;let r=0,o=0,d=0;for(;a<n.length;){r=0;do{if(a>=n.length)break;d=n[a++],r+=d}while(d===255);o=0;do{if(a>=n.length)break;d=n[a++],o+=d}while(d===255);const c=n.length-a;let l=a;if(o<c)a+=o;else if(o>c){Ri.error(`Malformed SEI payload. ${o} is too small, only ${c} bytes left to parse.`);break}if(r===4){if(n[l++]===181){const p=Ph(n,l);if(l+=2,p===49){const g=oi(n,l);if(l+=4,g===1195456820){const y=n[l++];if(y===3){const A=n[l++],C=31&A,I=64&A,P=I?2+C*3:0,M=new Uint8Array(P);if(I){M[0]=A;for(let G=1;G<P;G++)M[G]=n[l++]}i.push({type:y,payloadType:r,pts:t,bytes:M})}}}}}else if(r===5&&o>16){const f=[];for(let y=0;y<16;y++){const A=n[l++].toString(16);f.push(A.length==1?"0"+A:A),(y===3||y===5||y===7||y===9)&&f.push("-")}const p=o-16,g=new Uint8Array(p);for(let y=0;y<p;y++)g[y]=n[l++];i.push({payloadType:r,pts:t,uuid:f.join(""),userData:kn(g),userDataBytes:g})}}}function Nh(s){const e=s.byteLength,t=[];let i=1;for(;i<e-2;)s[i]===0&&s[i+1]===0&&s[i+2]===3?(t.push(i+2),i+=2):i++;if(t.length===0)return s;const n=e-t.length,a=new Uint8Array(n);let r=0;for(i=0;i<n;r++,i++)r===t[0]&&(r++,t.shift()),a[i]=s[r];return a}function gA(s){const e=s[0];let t="",i="",n=0,a=0,r=0,o=0,d=0,c=0;if(e===0){for(;rn(s.subarray(c,c+1))!=="\0";)t+=rn(s.subarray(c,c+1)),c+=1;for(t+=rn(s.subarray(c,c+1)),c+=1;rn(s.subarray(c,c+1))!=="\0";)i+=rn(s.subarray(c,c+1)),c+=1;i+=rn(s.subarray(c,c+1)),c+=1,n=oi(s,12),a=oi(s,16),o=oi(s,20),d=oi(s,24),c=28}else if(e===1){c+=4,n=oi(s,c),c+=4;const f=oi(s,c);c+=4;const p=oi(s,c);for(c+=4,r=2**32*f+p,zv(r)||(r=Number.MAX_SAFE_INTEGER,Ri.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=oi(s,c),c+=4,d=oi(s,c),c+=4;rn(s.subarray(c,c+1))!=="\0";)t+=rn(s.subarray(c,c+1)),c+=1;for(t+=rn(s.subarray(c,c+1)),c+=1;rn(s.subarray(c,c+1))!=="\0";)i+=rn(s.subarray(c,c+1)),c+=1;i+=rn(s.subarray(c,c+1)),c+=1}const l=s.subarray(c,s.byteLength);return{schemeIdUri:t,value:i,timeScale:n,presentationTime:r,presentationTimeDelta:a,eventDuration:o,id:d,payload:l}}function yA(s,...e){const t=e.length;let i=8,n=t;for(;n--;)i+=e[n].byteLength;const a=new Uint8Array(i);for(a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=i&255,a.set(s,4),n=0,i=8;n<t;n++)a.set(e[n],i),i+=e[n].byteLength;return a}function _A(s,e,t){if(s.byteLength!==16)throw new RangeError("Invalid system id");let i,n;i=0,n=new Uint8Array;let a;i>0?(a=new Uint8Array(4),e.length>0&&new DataView(a.buffer).setUint32(0,e.length,!1)):a=new Uint8Array;const r=new Uint8Array(4);return t.byteLength>0&&new DataView(r.buffer).setUint32(0,t.byteLength,!1),yA([112,115,115,104],new Uint8Array([i,0,0,0]),s,a,n,r,t)}function vA(s){const e=[];if(s instanceof ArrayBuffer){const t=s.byteLength;let i=0;for(;i+32<t;){const n=new DataView(s,i),a=AA(n);e.push(a),i+=a.size}}return e}function AA(s){const e=s.getUint32(0),t=s.byteOffset,i=s.byteLength;if(i<e)return{offset:t,size:i};if(s.getUint32(4)!==1886614376)return{offset:t,size:e};const a=s.getUint32(8)>>>24;if(a!==0&&a!==1)return{offset:t,size:e};const r=s.buffer,o=fn(new Uint8Array(r,t+12,16));let d=null,c=null,l=0;if(a===0)l=28;else{const p=s.getUint32(28);if(!p||i<32+p*16)return{offset:t,size:e};d=[];for(let g=0;g<p;g++)d.push(new Uint8Array(r,t+32+g*16,16));l=32+p*16}if(!l)return{offset:t,size:e};const f=s.getUint32(l);return e-32<f?{offset:t,size:e}:(c=new Uint8Array(r,t+l+4,f),{version:a,systemId:o,kids:d,data:c,offset:t,size:e})}const Uh=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Qr={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Nl(s,e){const t=Qr[e];return!!t&&!!t[s.slice(0,4)]}function ds(s,e,t=!0){return!s.split(",").some(i=>!Ul(i,e,t))}function Ul(s,e,t=!0){var i;const n=fr(t);return(i=n==null?void 0:n.isTypeSupported(us(s,e)))!=null?i:!1}function us(s,e){return`${e}/mp4;codecs=${s}`}function fd(s){if(s){const e=s.substring(0,4);return Qr.video[e]}return 2}function pa(s){const e=Uh();return s.split(",").reduce((t,i)=>{const a=e&&Pa(i)?9:Qr.video[i];return a?(a*2+t)/(t?3:2):(Qr.audio[i]+t)/(t?2:1)},0)}const So={};function bA(s,e=!0){if(So[s])return So[s];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[s];for(let n=0;n<t.length;n++){var i;if(Ul(t[n],"audio",e))return So[s]=t[n],t[n];if(t[n]==="mp3"&&(i=fr(e))!=null&&i.isTypeSupported("audio/mpeg"))return""}return s}const SA=/flac|opus|mp4a\.40\.34/i;function ma(s,e=!0){return s.replace(SA,t=>bA(t.toLowerCase(),e))}function EA(s,e){const t=[];if(s){const i=s.split(",");for(let n=0;n<i.length;n++)Nl(i[n],"video")||t.push(i[n])}return e&&t.push(e),t.join(",")}function Qs(s,e){if(s&&(s.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(s)!==-1)&&(pd(s,"audio")||pd(s,"video")))return s;if(e){const t=e.split(",");if(t.length>1){if(s){for(let i=t.length;i--;)if(t[i].substring(0,4)===s.substring(0,4))return t[i]}return t[0]}}return e||s}function pd(s,e){return Nl(s,e)&&Ul(s,e)}function xA(s){const e=s.split(",");for(let t=0;t<e.length;t++){const i=e[t].split(".");i.length>2&&i[0]==="avc1"&&(e[t]=`avc1.${parseInt(i[1]).toString(16)}${("000"+parseInt(i[2]).toString(16)).slice(-4)}`)}return e.join(",")}function TA(s){if(s.startsWith("av01.")){const e=s.split("."),t=["0","111","01","01","01","0"];for(let i=e.length;i>4&&i<10;i++)e[i]=t[i-4];return e.join(".")}return s}function md(s){const e=fr(s)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function tl(s){return s.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const CA={supported:!0,powerEfficient:!0,smooth:!0},wA={supported:!1,smooth:!1,powerEfficient:!1},$h={supported:!0,configurations:[],decodingInfoResults:[CA]};function Gh(s,e){return{supported:!1,configurations:e,decodingInfoResults:[wA],error:s}}function kA(s,e,t,i,n,a){const r=s.videoCodec,o=s.audioCodec?s.audioGroups:null,d=a==null?void 0:a.audioCodec,c=a==null?void 0:a.channels,l=c?parseInt(c):d?1/0:2;let f=null;if(o!=null&&o.length)try{o.length===1&&o[0]?f=e.groups[o[0]].channels:f=o.reduce((p,g)=>{if(g){const y=e.groups[g];if(!y)throw new Error(`Audio track group ${g} not found`);Object.keys(y.channels).forEach(A=>{p[A]=(p[A]||0)+y.channels[A]})}return p},{2:0})}catch{return!0}return r!==void 0&&(r.split(",").some(p=>Pa(p))||s.width>1920&&s.height>1088||s.height>1920&&s.width>1088||s.frameRate>Math.max(i,30)||s.videoRange!=="SDR"&&s.videoRange!==t||s.bitrate>Math.max(n,8e6))||!!f&&wt(l)&&Object.keys(f).some(p=>parseInt(p)>l)}function Vh(s,e,t,i={}){const n=s.videoCodec;if(!n&&!s.audioCodec||!t)return Promise.resolve($h);const a=[],r=IA(s),o=r.length,d=RA(s,e,o>0),c=d.length;for(let l=o||1*c||1;l--;){const f={type:"media-source"};if(o&&(f.video=r[l%o]),c){f.audio=d[l%c];const p=f.audio.bitrate;f.video&&p&&(f.video.bitrate-=p)}a.push(f)}if(n){const l=navigator.userAgent;if(n.split(",").some(f=>Pa(f))&&Uh())return Promise.resolve(Gh(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${l})`),a))}return Promise.all(a.map(l=>{const f=DA(l);return i[f]||(i[f]=t.decodingInfo(l))})).then(l=>({supported:!l.some(f=>!f.supported),configurations:a,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:a,decodingInfoResults:[],error:l}))}function IA(s){var e;const t=(e=s.videoCodec)==null?void 0:e.split(","),i=jh(s),n=s.width||640,a=s.height||480,r=s.frameRate||30,o=s.videoRange.toLowerCase();return t?t.map(d=>{const c={contentType:us(TA(d),"video"),width:n,height:a,bitrate:i,framerate:r};return o!=="sdr"&&(c.transferFunction=o),c}):[]}function RA(s,e,t){var i;const n=(i=s.audioCodec)==null?void 0:i.split(","),a=jh(s);return n&&s.audioGroups?s.audioGroups.reduce((r,o)=>{var d;const c=o?(d=e.groups[o])==null?void 0:d.tracks:null;return c?c.reduce((l,f)=>{if(f.groupId===o){const p=parseFloat(f.channels||"");n.forEach(g=>{const y={contentType:us(g,"audio"),bitrate:t?LA(g,a):a};p&&(y.channels=""+p),l.push(y)})}return l},r):r},[]):[]}function LA(s,e){if(e<=1)return 1;let t=128e3;return s==="ec-3"?t=768e3:s==="ac-3"&&(t=64e4),Math.min(e/2,t)}function jh(s){return Math.ceil(Math.max(s.bitrate*.9,s.averageBitrate)/1e3)*1e3||1}function DA(s){let e="";const{audio:t,video:i}=s;if(i){const n=tl(i.contentType);e+=`${n}_r${i.height}x${i.width}f${Math.ceil(i.framerate)}${i.transferFunction||"sd"}_${Math.ceil(i.bitrate/1e5)}`}if(t){const n=tl(t.contentType);e+=`${i?"_":""}${n}_c${t.channels}`}return e}const il=["NONE","TYPE-0","TYPE-1",null];function PA(s){return il.indexOf(s)>-1}const ga=["SDR","PQ","HLG"];function OA(s){return!!s&&ga.indexOf(s)>-1}var Zs={No:"",Yes:"YES",v2:"v2"};function gd(s){const{canSkipUntil:e,canSkipDateRanges:t,age:i}=s,n=i<e/2;return e&&n?t?Zs.v2:Zs.Yes:Zs.No}class yd{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class hs{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(i=>!!i).map(i=>i.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const i=(t=e.supplemental)==null?void 0:t.videoCodec;i&&i!==e.videoCodec&&(this.codecSet+=`,${i.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return _d(this._audioGroups,e)}hasSubtitleGroup(e){return _d(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(t)===-1&&i.push(t)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(t)===-1&&i.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function _d(s,e){return!e||!s?!1:s.indexOf(e)!==-1}function MA(){if(typeof matchMedia=="function"){const s=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(s.media!==e.media)return s.matches===!0}return!1}function BA(s,e){let t=!1,i=[];if(s&&(t=s!=="SDR",i=[s]),e){i=e.allowedVideoRanges||ga.slice(0);const n=i.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:n&&MA(),t||(i=["SDR"])}return{preferHDR:t,allowedVideoRanges:i}}const FA=s=>{const e=new WeakSet;return(t,i)=>{if(s&&(i=s(t,i)),typeof i=="object"&&i!==null){if(e.has(i))return;e.add(i)}return i}},Ni=(s,e)=>JSON.stringify(s,FA(e));function NA(s,e,t,i,n){const a=Object.keys(s),r=i==null?void 0:i.channels,o=i==null?void 0:i.audioCodec,d=n==null?void 0:n.videoCodec,c=r&&parseInt(r)===2;let l=!1,f=!1,p=1/0,g=1/0,y=1/0,A=1/0,C=0,I=[];const{preferHDR:P,allowedVideoRanges:M}=BA(e,n);for(let N=a.length;N--;){const U=s[a[N]];l||(l=U.channels[2]>0),p=Math.min(p,U.minHeight),g=Math.min(g,U.minFramerate),y=Math.min(y,U.minBitrate),M.filter(z=>U.videoRanges[z]>0).length>0&&(f=!0)}p=wt(p)?p:0,g=wt(g)?g:0;const G=Math.max(1080,p),Z=Math.max(30,g);y=wt(y)?y:t,t=Math.max(y,t),f||(e=void 0);const le=a.length>1;return{codecSet:a.reduce((N,U)=>{const O=s[U];if(U===N)return N;if(I=f?M.filter(z=>O.videoRanges[z]>0):[],le){if(O.minBitrate>t)return Vn(U,`min bitrate of ${O.minBitrate} > current estimate of ${t}`),N;if(!O.hasDefaultAudio)return Vn(U,"no renditions with default or auto-select sound found"),N;if(o&&U.indexOf(o.substring(0,4))%5!==0)return Vn(U,`audio codec preference "${o}" not found`),N;if(r&&!c){if(!O.channels[r])return Vn(U,`no renditions with ${r} channel sound found (channels options: ${Object.keys(O.channels)})`),N}else if((!o||c)&&l&&O.channels[2]===0)return Vn(U,"no renditions with stereo sound found"),N;if(O.minHeight>G)return Vn(U,`min resolution of ${O.minHeight} > maximum of ${G}`),N;if(O.minFramerate>Z)return Vn(U,`min framerate of ${O.minFramerate} > maximum of ${Z}`),N;if(!I.some(z=>O.videoRanges[z]>0))return Vn(U,`no variants with VIDEO-RANGE of ${Ni(I)} found`),N;if(d&&U.indexOf(d.substring(0,4))%5!==0)return Vn(U,`video codec preference "${d}" not found`),N;if(O.maxScore<C)return Vn(U,`max score of ${O.maxScore} < selected max of ${C}`),N}return N&&(pa(U)>=pa(N)||O.fragmentError>s[N].fragmentError)?N:(A=O.minIndex,C=O.maxScore,U)},void 0),videoRanges:I,preferHDR:P,minFramerate:g,minBitrate:y,minIndex:A}}function Vn(s,e){Ri.log(`[abr] start candidates with "${s}" ignored because ${e}`)}function Hh(s){return s.reduce((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);const n=t.channels||"2";return i.channels[n]=(i.channels[n]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function UA(s,e,t,i){return s.slice(t,i+1).reduce((n,a,r)=>{if(!a.codecSet)return n;const o=a.audioGroups;let d=n[a.codecSet];d||(n[a.codecSet]=d={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:r,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),d.minBitrate=Math.min(d.minBitrate,a.bitrate);const c=Math.min(a.height,a.width);return d.minHeight=Math.min(d.minHeight,c),d.minFramerate=Math.min(d.minFramerate,a.frameRate),d.minIndex=Math.min(d.minIndex,r),d.maxScore=Math.max(d.maxScore,a.score),d.fragmentError+=a.fragmentError,d.videoRanges[a.videoRange]=(d.videoRanges[a.videoRange]||0)+1,o&&o.forEach(l=>{if(!l)return;const f=e.groups[l];f&&(d.hasDefaultAudio=d.hasDefaultAudio||e.hasDefaultAudio?f.hasDefault:f.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(f.channels).forEach(p=>{d.channels[p]=(d.channels[p]||0)+f.channels[p]}))}),n},{})}function vd(s){if(!s)return s;const{lang:e,assocLang:t,characteristics:i,channels:n,audioCodec:a}=s;return{lang:e,assocLang:t,characteristics:i,channels:n,audioCodec:a}}function Kn(s,e,t){if("attrs"in s){const i=e.indexOf(s);if(i!==-1)return i}for(let i=0;i<e.length;i++){const n=e[i];if(kr(s,n,t))return i}return-1}function kr(s,e,t){const{groupId:i,name:n,lang:a,assocLang:r,default:o}=s,d=s.forced;return(i===void 0||e.groupId===i)&&(n===void 0||e.name===n)&&(a===void 0||$A(a,e.lang))&&(a===void 0||e.assocLang===r)&&(o===void 0||e.default===o)&&(d===void 0||e.forced===d)&&(!("characteristics"in s)||GA(s.characteristics||"",e.characteristics))&&(t===void 0||t(s,e))}function $A(s,e="--"){return s.length===e.length?s===e:s.startsWith(e)||e.startsWith(s)}function GA(s,e=""){const t=s.split(","),i=e.split(",");return t.length===i.length&&!t.some(n=>i.indexOf(n)===-1)}function br(s,e){const{audioCodec:t,channels:i}=s;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function VA(s,e,t,i,n){const a=e[i],o=e.reduce((p,g,y)=>{const A=g.uri;return(p[A]||(p[A]=[])).push(y),p},{})[a.uri];o.length>1&&(i=Math.max.apply(Math,o));const d=a.videoRange,c=a.frameRate,l=a.codecSet.substring(0,4),f=Ad(e,i,p=>{if(p.videoRange!==d||p.frameRate!==c||p.codecSet.substring(0,4)!==l)return!1;const g=p.audioGroups,y=t.filter(A=>!g||g.indexOf(A.groupId)!==-1);return Kn(s,y,n)>-1});return f>-1?f:Ad(e,i,p=>{const g=p.audioGroups,y=t.filter(A=>!g||g.indexOf(A.groupId)!==-1);return Kn(s,y,n)>-1})}function Ad(s,e,t){for(let i=e;i>-1;i--)if(t(s[i]))return i;for(let i=e+1;i<s.length;i++)if(t(s[i]))return i;return-1}function ya(s,e){var t;return!!s&&s!==((t=e.loadLevelObj)==null?void 0:t.uri)}class jA extends Mn{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var i;const{fragCurrent:n,partCurrent:a,hls:r}=this,{autoLevelEnabled:o,media:d}=r;if(!n||!d)return;const c=performance.now(),l=a?a.stats:n.stats,f=a?a.duration:n.duration,p=c-l.loading.start,g=r.minAutoLevel,y=n.level,A=this._nextAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||y<=g){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const C=A>-1&&A!==y,I=!!t||C;if(!I&&(d.paused||!d.playbackRate||!d.readyState))return;const P=r.mainForwardBufferInfo;if(!I&&P===null)return;const M=this.bwEstimator.getEstimateTTFB(),G=Math.abs(d.playbackRate);if(p<=Math.max(M,1e3*(f/(G*2))))return;const Z=P?P.len/G:0,le=l.loading.first?l.loading.first-l.loading.start:-1,W=l.loaded&&le>-1,N=this.getBwEstimate(),U=r.levels,O=U[y],z=Math.max(l.loaded,Math.round(f*(n.bitrate||O.averageBitrate)/8));let ce=W?p-le:p;ce<1&&W&&(ce=Math.min(p,l.loaded*8/N));const be=W?l.loaded*1e3/ce:0,Le=M/1e3,xe=be?(z-l.loaded)/be:z*8/N+Le;if(xe<=Z)return;const ve=be?be*8:N,ze=((i=(t==null?void 0:t.details)||this.hls.latestLevelDetails)==null?void 0:i.live)===!0,Pe=this.hls.config.abrBandWidthUpFactor;let Y=Number.POSITIVE_INFINITY,b;for(b=y-1;b>g;b--){const w=U[b].maxBitrate,$=!U[b].details||ze;if(Y=this.getTimeToLoadFrag(Le,ve,f*w,$),Y<Math.min(Z,f+Le))break}if(Y>=xe||Y>f*10)return;W?this.bwEstimator.sample(p-Math.min(M,le),l.loaded):this.bwEstimator.sampleTTFB(p);const S=U[b].maxBitrate;this.getBwEstimate()*Pe>S&&this.resetEstimator(S);const k=this.findBestLevel(S,g,b,0,Z,1,1);k>-1&&(b=k),this.warn(`Fragment ${n.sn}${a?" part "+a.index:""} of level ${y} is loading too slowly;
      Fragment duration: ${n.duration.toFixed(3)}
      Time to underbuffer: ${Z.toFixed(3)} s
      Estimated load time for current fragment: ${xe.toFixed(3)} s
      Estimated load time for down switch fragment: ${Y.toFixed(3)} s
      TTFB estimate: ${le|0} ms
      Current BW estimate: ${wt(N)?N|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${b} @ ${S|0} bps`),r.nextLoadLevel=r.nextAutoLevel=b,this.clearTimer();const R=()=>{if(this.clearTimer(),this.fragCurrent===n&&this.hls.loadLevel===b&&b>0){const w=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${b>0?"and switching down":""}
      Fragment duration: ${n.duration.toFixed(3)} s
      Time to underbuffer: ${w.toFixed(3)} s`),n.abortRequests(),this.fragCurrent=this.partCurrent=null,b>g){let $=this.findBestLevel(this.hls.levels[g].bitrate,g,b,0,w,1,1);$===-1&&($=g),this.hls.nextLoadLevel=this.hls.nextAutoLevel=$,this.resetEstimator(this.hls.levels[$].bitrate)}}};C||xe>Y*2?R():this.timer=self.setInterval(R,Y*1e3),r.trigger(V.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:a,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Wv(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.FRAG_LOADING,this.onFragLoading,this),e.on(V.FRAG_LOADED,this.onFragLoaded,this),e.on(V.FRAG_BUFFERED,this.onFragBuffered,this),e.on(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(V.LEVEL_LOADED,this.onLevelLoaded,this),e.on(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(V.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.FRAG_LOADING,this.onFragLoading,this),e.off(V.FRAG_LOADED,this.onFragLoaded,this),e.off(V.FRAG_BUFFERED,this.onFragBuffered,this),e.off(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(V.LEVEL_LOADED,this.onLevelLoaded,this),e.off(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(V.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(V.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const i=t.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var n;this.fragCurrent=i,this.partCurrent=(n=t.part)!=null?n:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case je.BUFFER_ADD_CODEC_ERROR:case je.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case je.FRAG_LOAD_TIMEOUT:{const i=t.frag,{fragCurrent:n,partCurrent:a}=this;if(i&&n&&i.sn===n.sn&&i.level===n.level){const r=performance.now(),o=a?a.stats:i.stats,d=r-o.loading.start,c=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&c>-1){const f=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(d-Math.min(f,c),o.loaded)}else this.bwEstimator.sampleTTFB(d)}break}}}getTimeToLoadFrag(e,t,i,n){const a=e+i/t,r=n?e+this.lastLevelLoadSec:0;return a+r}onLevelLoaded(e,t){const i=this.hls.config,{loading:n}=t.stats,a=n.end-n.first;wt(a)&&(this.lastLevelLoadSec=a/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:i}){const n=i?i.stats:t.stats;if(t.type===Mt.MAIN&&this.bwEstimator.sampleTTFB(n.loading.first-n.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const a=i?i.duration:t.duration,r=this.hls.levels[t.level],o=(r.loaded?r.loaded.bytes:0)+n.loaded,d=(r.loaded?r.loaded.duration:0)+a;r.loaded={bytes:o,duration:d},r.realBitrate=Math.round(8*o/d)}if(t.bitrateTest){const a={stats:n,frag:t,part:i,id:t.type};this.onFragBuffered(V.FRAG_BUFFERED,a),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:i,part:n}=t,a=n!=null&&n.stats.loaded?n.stats:i.stats;if(a.aborted||this.ignoreFragment(i))return;const r=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(r,a.loaded),a.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Mt.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),n=this.hls.config.maxStarvationDelay,a=this.findBestLevel(i,t,e,0,n,1,1);if(a>-1)return a;const r=this.hls.firstLevel,o=Math.min(Math.max(r,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${r} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!n||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const a=i&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const r=this.hls.levels;if(r.length>Math.max(e,a)&&r[e].loadError<=r[a].loadError)return e}return this._nextAutoLevel=a,this.nextAutoLevelKey=this.getAutoLevelKey(),a}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this;if(i.levels.length<=1)return i.loadLevel;const{maxAutoLevel:n,config:a,minAutoLevel:r}=i,o=t?t.duration:e?e.duration:0,d=this.getBwEstimate(),c=this.getStarvationDelay();let l=a.abrBandWidthFactor,f=a.abrBandWidthUpFactor;if(c){const C=this.findBestLevel(d,r,n,c,0,l,f);if(C>=0)return this.rebufferNotice=-1,C}let p=o?Math.min(o,a.maxStarvationDelay):a.maxStarvationDelay;if(!c){const C=this.bitrateTestDelay;C&&(p=(o?Math.min(o,a.maxLoadingDelay):a.maxLoadingDelay)-C,this.info(`bitrate test took ${Math.round(1e3*C)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),l=f=1)}const g=this.findBestLevel(d,r,n,c,p,l,f);if(this.rebufferNotice!==g&&(this.rebufferNotice=g,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${g}`)),g>-1)return g;const y=i.levels[r],A=i.loadLevelObj;return A&&(y==null?void 0:y.bitrate)<A.bitrate?r:i.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const i=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,n=e.mainForwardBufferInfo;return(n?n.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,n,a,r,o){var d;const c=n+a,l=this.lastLoadedFragLevel,f=l===-1?this.hls.firstLevel:l,{fragCurrent:p,partCurrent:g}=this,{levels:y,allAudioTracks:A,loadLevel:C,config:I}=this.hls;if(y.length===1)return 0;const P=y[f],M=!!((d=this.hls.latestLevelDetails)!=null&&d.live),G=C===-1||l===-1;let Z,le="SDR",W=(P==null?void 0:P.frameRate)||0;const{audioPreference:N,videoPreference:U}=I,O=this.audioTracksByGroup||(this.audioTracksByGroup=Hh(A));let z=-1;if(G){if(this.firstSelection!==-1)return this.firstSelection;const ve=this.codecTiers||(this.codecTiers=UA(y,O,t,i)),ze=NA(ve,le,e,N,U),{codecSet:Pe,videoRanges:Y,minFramerate:b,minBitrate:S,minIndex:k,preferHDR:R}=ze;z=k,Z=Pe,le=R?Y[Y.length-1]:Y[0],W=b,e=Math.max(e,S),this.log(`picked start tier ${Ni(ze)}`)}else Z=P==null?void 0:P.codecSet,le=P==null?void 0:P.videoRange;const ce=g?g.duration:p?p.duration:0,be=this.bwEstimator.getEstimateTTFB()/1e3,Le=[];for(let ve=i;ve>=t;ve--){var xe;const ze=y[ve],Pe=ve>f;if(!ze)continue;if(I.useMediaCapabilities&&!ze.supportedResult&&!ze.supportedPromise){const $=navigator.mediaCapabilities;typeof($==null?void 0:$.decodingInfo)=="function"&&kA(ze,O,le,W,e,N)?(ze.supportedPromise=Vh(ze,O,$,this.supportedCache),ze.supportedPromise.then(X=>{if(!this.hls)return;ze.supportedResult=X;const ie=this.hls.levels,se=ie.indexOf(ze);X.error?this.warn(`MediaCapabilities decodingInfo error: "${X.error}" for level ${se} ${Ni(X)}`):X.supported?X.decodingInfoResults.some(me=>me.smooth===!1||me.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${se} not smooth or powerEfficient: ${Ni(X)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${se} ${Ni(X)}`),se>-1&&ie.length>1&&(this.log(`Removing unsupported level ${se}`),this.hls.removeLevel(se),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(X=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${X}`)})):ze.supportedResult=$h}if((Z&&ze.codecSet!==Z||le&&ze.videoRange!==le||Pe&&W>ze.frameRate||!Pe&&W>0&&W<ze.frameRate||(xe=ze.supportedResult)!=null&&(xe=xe.decodingInfoResults)!=null&&xe.some($=>$.smooth===!1))&&(!G||ve!==z)){Le.push(ve);continue}const Y=ze.details,b=(g?Y==null?void 0:Y.partTarget:Y==null?void 0:Y.averagetargetduration)||ce;let S;Pe?S=o*e:S=r*e;const k=ce&&n>=ce*2&&a===0?ze.averageBitrate:ze.maxBitrate,R=this.getTimeToLoadFrag(be,S,k*b,Y===void 0);if(S>=k&&(ve===l||ze.loadError===0&&ze.fragmentError===0)&&(R<=be||!wt(R)||M&&!this.bitrateTestDelay||R<c)){const $=this.forcedAutoLevel;return ve!==C&&($===-1||$!==C)&&(Le.length&&this.trace(`Skipped level(s) ${Le.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${y[Le[0]].codecs}" ${y[Le[0]].videoRange}; not compatible with "${Z}" ${le}`),this.info(`switch candidate:${f}->${ve} adjustedbw(${Math.round(S)})-bitrate=${Math.round(S-k)} ttfb:${be.toFixed(1)} avgDuration:${b.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${R.toFixed(1)} firstSelection:${G} codecSet:${ze.codecSet} videoRange:${ze.videoRange} hls.loadLevel:${C}`)),G&&(this.firstSelection=ve),ve}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:i}=this.hls;return Math.min(Math.max(e,i),t)}}const qh={search:function(s,e){let t=0,i=s.length-1,n=null,a=null;for(;t<=i;){n=(t+i)/2|0,a=s[n];const r=e(a);if(r>0)t=n+1;else if(r<0)i=n-1;else return a}return null}};function HA(s,e,t){if(e===null||!Array.isArray(s)||!s.length||!wt(e))return null;const i=s[0].programDateTime;if(e<(i||0))return null;const n=s[s.length-1].endProgramDateTime;if(e>=(n||0))return null;for(let a=0;a<s.length;++a){const r=s[a];if(zA(e,t,r))return r}return null}function Ir(s,e,t=0,i=0,n=.005){let a=null;if(s){a=e[1+s.sn-e[0].sn]||null;const o=s.endDTS-t;o>0&&o<15e-7&&(t+=15e-7),a&&s.level!==a.level&&a.end<=s.end&&(a=e[2+s.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(a=e[0]);if(a&&((!s||s.level===a.level)&&bd(t,i,a)===0||qA(a,s,Math.min(n,i))))return a;const r=qh.search(e,bd.bind(null,t,i));return r&&(r!==s||!a)?r:a}function qA(s,e,t){if(e&&e.start===0&&e.level<s.level&&(e.endPTS||0)>0){const i=e.tagList.reduce((n,a)=>(a[0]==="INF"&&(n+=parseFloat(a[1])),n),t);return s.start<=i}return!1}function bd(s=0,e=0,t){if(t.start<=s&&t.start+t.duration>s)return 0;const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-i<=s?1:t.start-i>s&&t.start?-1:0}function zA(s,e,t){const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-i>s}function zh(s,e,t){if(s&&s.startCC<=e&&s.endCC>=e){let i=s.fragments;const{fragmentHint:n}=s;n&&(i=i.concat(n));let a;return qh.search(i,r=>r.cc<e?1:r.cc>e?-1:(a=r,r.end<=t?1:r.start>t?-1:0)),a||null}return null}function _a(s){switch(s.details){case je.FRAG_LOAD_TIMEOUT:case je.KEY_LOAD_TIMEOUT:case je.LEVEL_LOAD_TIMEOUT:case je.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Kh(s){return s.details.startsWith("key")}function Wh(s){return Kh(s)&&!!s.frag&&!s.frag.decryptdata}function Sd(s,e){const t=_a(e);return s.default[`${t?"timeout":"error"}Retry`]}function $l(s,e){const t=s.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*s.retryDelayMs,s.maxRetryDelayMs)}function Ed(s){return Ii(Ii({},s),{errorRetry:null,timeoutRetry:null})}function va(s,e,t,i){if(!s)return!1;const n=i==null?void 0:i.code,a=e<s.maxNumRetry&&(KA(n)||!!t);return s.shouldRetry?s.shouldRetry(s,e,t,i,a):a}function KA(s){return nl(s)||!!s&&(s<400||s>499)}function nl(s){return s===0&&navigator.onLine===!1}var un={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},xn={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class WA extends Mn{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(V.ERROR,this.onError,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(V.ERROR,this.onError,this),e.off(V.ERROR,this.onErrorOut,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Mt.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,i=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||i===-1?t.loadLevel:i}variantHasKey(e,t){if(e){var i;if((i=e.details)!=null&&i.hasKey(t))return!0;const n=e.audioGroups;if(n)return this.hls.allAudioTracks.filter(r=>n.indexOf(r.groupId)>=0).some(r=>{var o;return(o=r.details)==null?void 0:o.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var i;if(t.fatal)return;const n=this.hls,a=t.context;switch(t.details){case je.FRAG_LOAD_ERROR:case je.FRAG_LOAD_TIMEOUT:case je.KEY_LOAD_ERROR:case je.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case je.FRAG_PARSING_ERROR:if((i=t.frag)!=null&&i.gap){t.errorAction=zr();return}case je.FRAG_GAP:case je.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=un.SendAlternateToPenaltyBox;return}case je.LEVEL_EMPTY_ERROR:case je.LEVEL_PARSING_ERROR:{var r;const d=t.parent===Mt.MAIN?t.level:n.loadLevel;t.details===je.LEVEL_EMPTY_ERROR&&((r=t.context)!=null&&(r=r.levelDetails)!=null&&r.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,d):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,d))}return;case je.LEVEL_LOAD_ERROR:case je.LEVEL_LOAD_TIMEOUT:typeof(a==null?void 0:a.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level));return;case je.AUDIO_TRACK_LOAD_ERROR:case je.AUDIO_TRACK_LOAD_TIMEOUT:case je.SUBTITLE_LOAD_ERROR:case je.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const d=n.loadLevelObj;if(d&&(a.type===yi.AUDIO_TRACK&&d.hasAudioGroup(a.groupId)||a.type===yi.SUBTITLE_TRACK&&d.hasSubtitleGroup(a.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,n.loadLevel),t.errorAction.action=un.SendAlternateToPenaltyBox,t.errorAction.flags=xn.MoveAllAlternatesMatchingHost;return}}return;case je.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:un.SendAlternateToPenaltyBox,flags:xn.MoveAllAlternatesMatchingHDCP};return;case je.KEY_SYSTEM_SESSION_UPDATE_FAILED:case je.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case je.KEY_SYSTEM_NO_SESSION:t.errorAction={action:un.SendAlternateToPenaltyBox,flags:xn.MoveAllAlternatesMatchingKey};return;case je.BUFFER_ADD_CODEC_ERROR:case je.REMUX_ALLOC_ERROR:case je.BUFFER_APPEND_ERROR:if(!t.errorAction){var o;t.errorAction=this.getLevelSwitchAction(t,(o=t.level)!=null?o:n.loadLevel)}return;case je.INTERNAL_EXCEPTION:case je.BUFFER_APPENDING_ERROR:case je.BUFFER_FULL_ERROR:case je.LEVEL_SWITCH_ERROR:case je.BUFFER_STALLED_ERROR:case je.BUFFER_SEEK_OVER_HOLE:case je.BUFFER_NUDGE_ON_STALL:t.errorAction=zr();return}t.type===Gt.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=zr())}getPlaylistRetryOrSwitchAction(e,t){const i=this.hls,n=Sd(i.config.playlistLoadPolicy,e),a=this.playlistError++;if(va(n,a,_a(e),e.response))return{action:un.RetryRequest,flags:xn.None,retryConfig:n,retryCount:a};const o=this.getLevelSwitchAction(e,t);return n&&(o.retryConfig=n,o.retryCount=a),o}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),n=t.levels[i],{fragLoadPolicy:a,keyLoadPolicy:r}=t.config,o=Sd(Kh(e)?r:a,e),d=t.levels.reduce((l,f)=>l+f.fragmentError,0);if(n&&(e.details!==je.FRAG_GAP&&n.fragmentError++,!Wh(e)&&va(o,d,_a(e),e.response)))return{action:un.RetryRequest,flags:xn.None,retryConfig:o,retryCount:d};const c=this.getLevelSwitchAction(e,i);return o&&(c.retryConfig=o,c.retryCount=d),c}getLevelSwitchAction(e,t){const i=this.hls;t==null&&(t=i.loadLevel);const n=this.hls.levels[t];if(n){var a,r;const c=e.details;n.loadError++,c===je.BUFFER_APPEND_ERROR&&n.fragmentError++;let l=-1;const{levels:f,loadLevel:p,minAutoLevel:g,maxAutoLevel:y}=i;!i.autoLevelEnabled&&!i.config.preserveManualLevelOnError&&(i.loadLevel=-1);const A=(a=e.frag)==null?void 0:a.type,I=(A===Mt.AUDIO&&c===je.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===je.BUFFER_ADD_CODEC_ERROR||c===je.BUFFER_APPEND_ERROR))&&f.some(({audioCodec:le})=>n.audioCodec!==le),M=e.sourceBufferName==="video"&&(c===je.BUFFER_ADD_CODEC_ERROR||c===je.BUFFER_APPEND_ERROR)&&f.some(({codecSet:le,audioCodec:W})=>n.codecSet!==le&&n.audioCodec===W),{type:G,groupId:Z}=(r=e.context)!=null?r:{};for(let le=f.length;le--;){const W=(le+p)%f.length;if(W!==p&&W>=g&&W<=y&&f[W].loadError===0){var o,d;const N=f[W];if(c===je.FRAG_GAP&&A===Mt.MAIN&&e.frag){const U=f[W].details;if(U){const O=Ir(e.frag,U.fragments,e.frag.start);if(O!=null&&O.gap)continue}}else{if(G===yi.AUDIO_TRACK&&N.hasAudioGroup(Z)||G===yi.SUBTITLE_TRACK&&N.hasSubtitleGroup(Z))continue;if(A===Mt.AUDIO&&(o=n.audioGroups)!=null&&o.some(U=>N.hasAudioGroup(U))||A===Mt.SUBTITLE&&(d=n.subtitleGroups)!=null&&d.some(U=>N.hasSubtitleGroup(U))||I&&n.audioCodec===N.audioCodec||M&&n.codecSet===N.codecSet||!I&&n.codecSet!==N.codecSet)continue}l=W;break}}if(l>-1&&i.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:un.SendAlternateToPenaltyBox,flags:xn.None,nextAutoLevel:l}}return{action:un.SendAlternateToPenaltyBox,flags:xn.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var i;switch((i=t.errorAction)==null?void 0:i.action){case un.DoNothing:break;case un.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==je.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:n}=i,a=i.nextAutoLevel;switch(n){case xn.None:this.switchLevel(e,a);break;case xn.MoveAllAlternatesMatchingHDCP:{const d=this.getVariantLevelIndex(e.frag),c=t.levels[d],l=c==null?void 0:c.attrs["HDCP-LEVEL"];if(i.hdcpLevel=l,l==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(l){t.maxHdcpLevel=il[il.indexOf(l)-1],i.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case xn.MoveAllAlternatesMatchingKey:{const d=e.decryptdata;if(d){const c=this.hls.levels,l=c.length;for(let p=l;p--;)if(this.variantHasKey(c[p],d)){var r,o;this.log(`Banned key found in level ${p} (${c[p].bitrate}bps) or audio group "${(r=c[p].audioGroups)==null?void 0:r.join(",")}" (${(o=e.frag)==null?void 0:o.type} fragment) ${fn(d.keyId||[])}`),c[p].fragmentError++,c[p].loadError++,this.log(`Removing level ${p} with key error (${e.error})`),this.hls.removeLevel(p)}const f=e.frag;if(this.hls.levels.length<l)i.resolved=!0;else if(f&&f.type!==Mt.MAIN){const p=f.decryptdata;p&&!d.matches(p)&&(i.resolved=!0)}}break}}i.resolved||this.switchLevel(e,a)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===je.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const i=tl(e.mimeType),n=this.hls.levels;for(let a=n.length;a--;)n[a][`${e.sourceBufferName}Codec`]===i&&(this.log(`Removing level ${a} for ${e.details} ("${i}" not supported)`),this.hls.removeLevel(a))}}}function zr(s){const e={action:un.DoNothing,flags:xn.None};return s&&(e.resolved=!0),e}var sn={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class YA{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.BUFFER_APPENDED,this.onBufferAppended,this),e.on(V.FRAG_BUFFERED,this.onFragBuffered,this),e.on(V.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.BUFFER_APPENDED,this.onBufferAppended,this),e.off(V.FRAG_BUFFERED,this.onFragBuffered,this),e.off(V.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let n=i.length;n--;){const a=i[n];if(!a)break;if(a.start<=e&&e<=a.end&&a.loaded)return a}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,i){const{fragments:n}=this,a=Object.keys(n);for(let r=a.length;r--;){const o=n[a[r]];if((o==null?void 0:o.body.type)===t&&(!i||o.buffered)){const d=o.body;if(d.start<=e&&e<=d.end)return d}}return null}detectEvictedFragments(e,t,i,n,a){this.timeRanges&&(this.timeRanges[e]=t);const r=(n==null?void 0:n.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const d=this.fragments[o];if(!d||r>=d.body.sn)return;if(!d.buffered&&(!d.loaded||a)){d.body.type===i&&this.removeFragment(d.body);return}const c=d.range[e];if(c){if(c.time.length===0){this.removeFragment(d.body);return}c.time.some(l=>{const f=!this.isTimeBuffered(l.startPTS,l.endPTS,t);return f&&this.removeFragment(d.body),f})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const i=e.frag,n=Mr(i),a=this.fragments[n];if(!a||a.buffered&&i.gap)return;const r=!i.relurl;Object.keys(t).forEach(o=>{const d=i.elementaryStreams[o];if(!d)return;const c=t[o],l=r||d.partial===!0;a.range[o]=this.getBufferedTimes(i,e.part,l,c)}),a.loaded=null,Object.keys(a.range).length?(this.bufferedEnd(a,i),Rs(a)||this.removeParts(i.sn-1,i.type)):this.removeFragment(a.body)}bufferedEnd(e,t){e.buffered=!0,(e.body.endList=t.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=xd(i,n=>n.fragment.sn>=e))}fragBuffered(e,t){const i=Mr(e);let n=this.fragments[i];!n&&t&&(n=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),n&&(n.loaded=null,this.bufferedEnd(n,e))}getBufferedTimes(e,t,i,n){const a={time:[],partial:i},r=e.start,o=e.end,d=e.minEndPTS||o,c=e.maxStartPTS||r;for(let l=0;l<n.length;l++){const f=n.start(l)-this.bufferPadding,p=n.end(l)+this.bufferPadding;if(c>=f&&d<=p){a.time.push({startPTS:Math.max(r,n.start(l)),endPTS:Math.min(o,n.end(l))});break}else if(r<p&&o>f){const g=Math.max(r,n.start(l)),y=Math.min(o,n.end(l));y>g&&(a.partial=!0,a.time.push({startPTS:g,endPTS:y}))}else if(o<=f)break}return a}getPartialFragment(e){let t=null,i,n,a,r=0;const{bufferPadding:o,fragments:d}=this;return Object.keys(d).forEach(c=>{const l=d[c];l&&Rs(l)&&(n=l.body.start-o,a=l.body.end+o,e>=n&&e<=a&&(i=Math.min(e-n,a-e),r<=i&&(t=l.body,r=i)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||Rs(t))}getState(e){const t=Mr(e),i=this.fragments[t];return i?i.buffered?Rs(i)?sn.PARTIAL:sn.OK:sn.APPENDING:sn.NOT_LOADED}isTimeBuffered(e,t,i){let n,a;for(let r=0;r<i.length;r++){if(n=i.start(r)-this.bufferPadding,a=i.end(r)+this.bufferPadding,e>=n&&t<=a)return!0;if(t<=n)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const i=t.frag,n=t.part?null:t,a=Mr(i);this.fragments[a]={body:i,appendedPTS:null,loaded:n,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:n,timeRanges:a,type:r}=t;if(i.sn==="initSegment")return;const o=i.type;if(n){let c=this.activePartLists[o];c||(this.activePartLists[o]=c=[]),c.push(n)}this.timeRanges=a;const d=a[r];this.detectEvictedFragments(r,d,o,n)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Mr(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,i=Object.keys(t);if(!e)return i.length>0;for(let n=i.length;n--;){const a=t[i[n]];if((a==null?void 0:a.body.type)===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,i,n,a){n&&!this.hasGaps||Object.keys(this.fragments).forEach(r=>{const o=this.fragments[r];if(!o)return;const d=o.body;d.type!==i||n&&!d.gap||d.start<t&&d.end>e&&(o.buffered||a)&&this.removeFragment(d)})}removeFragment(e){const t=Mr(e);e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const n=e.sn;this.activePartLists[e.type]=xd(i,a=>a.fragment.sn!==n)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(i=>i.clearElementaryStreamInfo())}}function Rs(s){var e,t,i;return s.buffered&&!!(s.body.gap||(e=s.range.video)!=null&&e.partial||(t=s.range.audio)!=null&&t.partial||(i=s.range.audiovideo)!=null&&i.partial)}function Mr(s){return`${s.type}_${s.level}_${s.sn}`}function xd(s,e){return s.filter(t=>{const i=e(t);return i||t.clearElementaryStreamInfo(),i})}var pr={cbc:0,ctr:1};class XA{constructor(e,t,i){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=i}decrypt(e,t){switch(this.aesMode){case pr.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case pr.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function JA(s){const e=s.byteLength,t=e&&new DataView(s.buffer).getUint8(e-1);return t?s.slice(0,e-t):s}class QA{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let n=0;n<4;n++)i[n]=t.getUint32(n*4);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,n=i[0],a=i[1],r=i[2],o=i[3],d=this.invSubMix,c=d[0],l=d[1],f=d[2],p=d[3],g=new Uint32Array(256);let y=0,A=0,C=0;for(C=0;C<256;C++)C<128?g[C]=C<<1:g[C]=C<<1^283;for(C=0;C<256;C++){let I=A^A<<1^A<<2^A<<3^A<<4;I=I>>>8^I&255^99,e[y]=I,t[I]=y;const P=g[y],M=g[P],G=g[M];let Z=g[I]*257^I*16843008;n[y]=Z<<24|Z>>>8,a[y]=Z<<16|Z>>>16,r[y]=Z<<8|Z>>>24,o[y]=Z,Z=G*16843009^M*65537^P*257^y*16843008,c[I]=Z<<24|Z>>>8,l[I]=Z<<16|Z>>>16,f[I]=Z<<8|Z>>>24,p[I]=Z,y?(y=P^g[g[g[G^P]]],A^=g[g[A]]):y=A=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,n=0;for(;n<t.length&&i;)i=t[n]===this.key[n],n++;if(i)return;this.key=t;const a=this.keySize=t.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);const r=this.ksRows=(a+6+1)*4;let o,d;const c=this.keySchedule=new Uint32Array(r),l=this.invKeySchedule=new Uint32Array(r),f=this.sBox,p=this.rcon,g=this.invSubMix,y=g[0],A=g[1],C=g[2],I=g[3];let P,M;for(o=0;o<r;o++){if(o<a){P=c[o]=t[o];continue}M=P,o%a===0?(M=M<<8|M>>>24,M=f[M>>>24]<<24|f[M>>>16&255]<<16|f[M>>>8&255]<<8|f[M&255],M^=p[o/a|0]<<24):a>6&&o%a===4&&(M=f[M>>>24]<<24|f[M>>>16&255]<<16|f[M>>>8&255]<<8|f[M&255]),c[o]=P=(c[o-a]^M)>>>0}for(d=0;d<r;d++)o=r-d,d&3?M=c[o]:M=c[o-4],d<4||o<=4?l[d]=M:l[d]=y[f[M>>>24]]^A[f[M>>>16&255]]^C[f[M>>>8&255]]^I[f[M&255]],l[d]=l[d]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,i){const n=this.keySize+6,a=this.invKeySchedule,r=this.invSBox,o=this.invSubMix,d=o[0],c=o[1],l=o[2],f=o[3],p=this.uint8ArrayToUint32Array_(i);let g=p[0],y=p[1],A=p[2],C=p[3];const I=new Int32Array(e),P=new Int32Array(I.length);let M,G,Z,le,W,N,U,O,z,ce,be,Le,xe,ve;const ze=this.networkToHostOrderSwap;for(;t<I.length;){for(z=ze(I[t]),ce=ze(I[t+1]),be=ze(I[t+2]),Le=ze(I[t+3]),W=z^a[0],N=Le^a[1],U=be^a[2],O=ce^a[3],xe=4,ve=1;ve<n;ve++)M=d[W>>>24]^c[N>>16&255]^l[U>>8&255]^f[O&255]^a[xe],G=d[N>>>24]^c[U>>16&255]^l[O>>8&255]^f[W&255]^a[xe+1],Z=d[U>>>24]^c[O>>16&255]^l[W>>8&255]^f[N&255]^a[xe+2],le=d[O>>>24]^c[W>>16&255]^l[N>>8&255]^f[U&255]^a[xe+3],W=M,N=G,U=Z,O=le,xe=xe+4;M=r[W>>>24]<<24^r[N>>16&255]<<16^r[U>>8&255]<<8^r[O&255]^a[xe],G=r[N>>>24]<<24^r[U>>16&255]<<16^r[O>>8&255]<<8^r[W&255]^a[xe+1],Z=r[U>>>24]<<24^r[O>>16&255]<<16^r[W>>8&255]<<8^r[N&255]^a[xe+2],le=r[O>>>24]<<24^r[W>>16&255]<<16^r[N>>8&255]<<8^r[U&255]^a[xe+3],P[t]=ze(M^g),P[t+1]=ze(le^y),P[t+2]=ze(Z^A),P[t+3]=ze(G^C),g=z,y=ce,A=be,C=Le,t=t+4}return P.buffer}}class ZA{constructor(e,t,i){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=i}expandKey(){const e=eb(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function eb(s){switch(s){case pr.cbc:return"AES-CBC";case pr.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${s}`)}}const tb=16;class Gl{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?JA(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i,n){return this.useSoftware?new Promise((a,r)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,i,n);const d=this.flush();d?a(d.buffer):r(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,i,n)}softwareDecrypt(e,t,i,n){const{currentIV:a,currentResult:r,remainderData:o}=this;if(n!==pr.cbc||t.byteLength!==16)return Ri.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=On(o,e),this.remainderData=null);const d=this.getValidChunk(e);if(!d.length)return null;a&&(i=a);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new QA),c.expandKey(t);const l=r;return this.currentResult=c.decrypt(d.buffer,0,i),this.currentIV=d.slice(-16).buffer,l||null}webCryptoDecrypt(e,t,i,n){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i,n));this.key=t,this.fastAesKey=new ZA(this.subtle,t,n)}return this.fastAesKey.expandKey().then(a=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new XA(this.subtle,new Uint8Array(i),n).decrypt(e.buffer,a)):Promise.reject(new Error("web crypto not initialized"))).catch(a=>(Ri.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${a.name}: ${a.message}`),this.onWebCryptoError(e,t,i,n)))}onWebCryptoError(e,t,i,n){const a=this.enableSoftwareAES;if(a){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i,n);const r=this.flush();if(r)return r.buffer}throw new Error("WebCrypto"+(a?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%tb;return i!==e.length&&(t=e.slice(0,i),this.remainderData=e.slice(i)),t}logOnce(e){this.logEnabled&&(Ri.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const Td=Math.pow(2,17);class ib{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new nr({type:Gt.NETWORK_ERROR,details:je.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${i?"part list":"url"}`),networkDetails:null}));this.abort();const n=this.config,a=n.fLoader,r=n.loader;return new Promise((o,d)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(y=>y[0]==="GAP")){d(wd(e));return}else e.gap=!1;const c=this.loader=a?new a(n):new r(n),l=Cd(e);e.loader=c;const f=Ed(n.fragLoadPolicy.default),p={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:Td};e.stats=c.stats;const g={onSuccess:(y,A,C,I)=>{this.resetLoader(e,c);let P=y.data;C.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(P.slice(0,16)),P=P.slice(16)),o({frag:e,part:null,payload:P,networkDetails:I})},onError:(y,A,C,I)=>{this.resetLoader(e,c),d(new nr({type:Gt.NETWORK_ERROR,details:je.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Ii({url:i,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:C,stats:I}))},onAbort:(y,A,C)=>{this.resetLoader(e,c),d(new nr({type:Gt.NETWORK_ERROR,details:je.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:C,stats:y}))},onTimeout:(y,A,C)=>{this.resetLoader(e,c),d(new nr({type:Gt.NETWORK_ERROR,details:je.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:C,stats:y}))}};t&&(g.onProgress=(y,A,C,I)=>t({frag:e,part:null,payload:C,networkDetails:I})),c.load(l,p,g)})}loadPart(e,t,i){this.abort();const n=this.config,a=n.fLoader,r=n.loader;return new Promise((o,d)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){d(wd(e,t));return}const c=this.loader=a?new a(n):new r(n),l=Cd(e,t);e.loader=c;const f=Ed(n.fragLoadPolicy.default),p={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Td};t.stats=c.stats,c.load(l,p,{onSuccess:(g,y,A,C)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const I={frag:e,part:t,payload:g.data,networkDetails:C};i(I),o(I)},onError:(g,y,A,C)=>{this.resetLoader(e,c),d(new nr({type:Gt.NETWORK_ERROR,details:je.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Ii({url:l.url,data:void 0},g),error:new Error(`HTTP Error ${g.code} ${g.text}`),networkDetails:A,stats:C}))},onAbort:(g,y,A)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),d(new nr({type:Gt.NETWORK_ERROR,details:je.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:A,stats:g}))},onTimeout:(g,y,A)=>{this.resetLoader(e,c),d(new nr({type:Gt.NETWORK_ERROR,details:je.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:A,stats:g}))}})})}updateStatsFromPart(e,t){const i=e.stats,n=t.stats,a=n.total;if(i.loaded+=n.loaded,a){const d=Math.round(e.duration/t.duration),c=Math.min(Math.round(i.loaded/a),d),f=(d-c)*Math.round(i.loaded/c);i.total=i.loaded+f}else i.total=Math.max(i.loaded,i.total);const r=i.loading,o=n.loading;r.start?r.first+=o.first-o.start:(r.start=o.start,r.first=o.first),r.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Cd(s,e=null){const t=e||s,i={frag:s,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},n=t.byteRangeStartOffset,a=t.byteRangeEndOffset;if(wt(n)&&wt(a)){var r;let o=n,d=a;if(s.sn==="initSegment"&&nb((r=s.decryptdata)==null?void 0:r.method)){const c=a-n;c%16&&(d=a+(16-c%16)),n!==0&&(i.resetIV=!0,o=n-16)}i.rangeStart=o,i.rangeEnd=d}return i}function wd(s,e){const t=new Error(`GAP ${s.gap?"tag":"attribute"} found`),i={type:Gt.MEDIA_ERROR,details:je.FRAG_GAP,fatal:!1,frag:s,error:t,networkDetails:null};return e&&(i.part=e),(e||s).stats.aborted=!0,new nr(i)}function nb(s){return s==="AES-128"||s==="AES-256"}class nr extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class Yh extends Mn{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class Vl{constructor(e,t,i,n=0,a=-1,r=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Ls(),this.buffering={audio:Ls(),video:Ls(),audiovideo:Ls()},this.level=e,this.sn=t,this.id=i,this.size=n,this.part=a,this.partial=r}}function Ls(){return{start:0,executeStart:0,executeEnd:0,end:0}}const kd={length:0,start:()=>0,end:()=>0};class li{static isBuffered(e,t){if(e){const i=li.getBuffered(e);for(let n=i.length;n--;)if(t>=i.start(n)&&t<=i.end(n))return!0}return!1}static bufferedRanges(e){if(e){const t=li.getBuffered(e);return li.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}static bufferInfo(e,t,i){if(e){const n=li.bufferedRanges(e);if(n.length)return li.bufferedInfo(n,t,i)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.length>1&&e.sort((l,f)=>l.start-f.start||f.end-l.end);let n=-1,a=[];if(i)for(let l=0;l<e.length;l++){t>=e[l].start&&t<=e[l].end&&(n=l);const f=a.length;if(f){const p=a[f-1].end;e[l].start-p<i?e[l].end>p&&(a[f-1].end=e[l].end):a.push(e[l])}else a.push(e[l])}else a=e;let r=0,o,d=t,c=t;for(let l=0;l<a.length;l++){const f=a[l].start,p=a[l].end;if(n===-1&&t>=f&&t<=p&&(n=l),t+i>=f&&t<p)d=f,c=p,r=c-t;else if(t+i<f){o=f;break}}return{len:r,start:d||0,end:c||0,nextStart:o,buffered:e,bufferedIndex:n}}static getBuffered(e){try{return e.buffered||kd}catch(t){return Ri.log("failed to get media.buffered",t),kd}}}const Xh=/\{\$([a-zA-Z0-9-_]+)\}/g;function Id(s){return Xh.test(s)}function rl(s,e){if(s.variableList!==null||s.hasVariableRefs){const t=s.variableList;return e.replace(Xh,i=>{const n=i.substring(2,i.length-1),a=t==null?void 0:t[n];return a===void 0?(s.playlistParsingError||(s.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${n}"`)),i):a})}return e}function Rd(s,e,t){let i=s.variableList;i||(s.variableList=i={});let n,a;if("QUERYPARAM"in e){n=e.QUERYPARAM;try{const r=new self.URL(t).searchParams;if(r.has(n))a=r.get(n);else throw new Error(`"${n}" does not match any query parameter in URI: "${t}"`)}catch(r){s.playlistParsingError||(s.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${r.message}`))}}else n=e.NAME,a=e.VALUE;n in i?s.playlistParsingError||(s.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${n}"`)):i[n]=a||""}function rb(s,e,t){const i=e.IMPORT;if(t&&i in t){let n=s.variableList;n||(s.variableList=n={}),n[i]=t[i]}else s.playlistParsingError||(s.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}const sb=/^(\d+)x(\d+)$/,Ld=/(.+?)=(".*?"|.*?)(?:,|$)/g;class ji{constructor(e,t){typeof e=="string"&&(e=ji.parseAttrList(e,t)),Pi(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const i=new Uint8Array(t.length/2);for(let n=0;n<t.length/2;n++)i[n]=parseInt(t.slice(n*2,n*2+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const i=this[e];return(i?i.split(/[ ,]+/):[]).reduce((n,a)=>(n[a.toLowerCase()]=!0,n),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=sb.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let i;const n={},a='"';for(Ld.lastIndex=0;(i=Ld.exec(e))!==null;){const r=i[1].trim();let o=i[2];const d=o.indexOf(a)===0&&o.lastIndexOf(a)===o.length-1;let c=!1;if(d)o=o.slice(1,-1);else switch(r){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(t&&(d||c))o=rl(t,o);else if(!c&&!d)switch(r){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Ri.warn(`${e}: attribute ${r} is missing quotes`)}n[r]=o}return n}}const ab="com.apple.hls.interstitial";function ob(s){return s!=="ID"&&s!=="CLASS"&&s!=="CUE"&&s!=="START-DATE"&&s!=="DURATION"&&s!=="END-DATE"&&s!=="END-ON-NEXT"}function lb(s){return s==="SCTE35-OUT"||s==="SCTE35-IN"||s==="SCTE35-CMD"}class Jh{constructor(e,t,i=0){var n;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(t==null?void 0:t.tagAnchor)||null,this.tagOrder=(n=t==null?void 0:t.tagOrder)!=null?n:i,t){const a=t.attr;for(const r in a)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r]!==a[r]){Ri.warn(`DATERANGE tag attribute: "${r}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=r;break}e=Pi(new ji({}),a,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const a=(t==null?void 0:t.endDate)||new Date(this.attr["END-DATE"]);wt(a.getTime())&&(this._endDate=a)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Ri.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(wt(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===ab}get isValid(){return!!this.id&&!this._badValueForSameId&&wt(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const cb=10;class db{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let i=t.decryptdata;return i||(t.setKeyFormat(e.keyFormat),i=t.decryptdata),!!i&&e.matches(i)})}get hasProgramDateTime(){return this.fragments.length?wt(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||cb}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let i=e.length;i--;)if(e[i].index>t)return e[i].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function Aa(s,e){return s.length===e.length?!s.some((t,i)=>t!==e[i]):!1}function Dd(s,e){return!s&&!e?!0:!s||!e?!1:Aa(s,e)}function Kr(s){return s==="AES-128"||s==="AES-256"||s==="AES-256-CTR"}function jl(s){switch(s){case"AES-128":case"AES-256":return pr.cbc;case"AES-256-CTR":return pr.ctr;default:throw new Error(`invalid full segment method ${s}`)}}function Hl(s){return Uint8Array.from(atob(s),e=>e.charCodeAt(0))}function sl(s){return Uint8Array.from(unescape(encodeURIComponent(s)),e=>e.charCodeAt(0))}function ub(s){const e=sl(s).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function Qh(s){const e=function(i,n,a){const r=i[n];i[n]=i[a],i[a]=r};e(s,0,3),e(s,1,2),e(s,4,5),e(s,6,7)}function Zh(s){const e=s.split(":");let t=null;if(e[0]==="data"&&e.length===2){const i=e[1].split(";"),n=i[i.length-1].split(",");if(n.length===2){const a=n[0]==="base64",r=n[1];a?(i.splice(-1,1),t=Hl(r)):t=ub(r)}}return t}const ba=typeof self<"u"?self:void 0;var Hi={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},mn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function ea(s){switch(s){case mn.FAIRPLAY:return Hi.FAIRPLAY;case mn.PLAYREADY:return Hi.PLAYREADY;case mn.WIDEVINE:return Hi.WIDEVINE;case mn.CLEARKEY:return Hi.CLEARKEY}}function Eo(s){switch(s){case Hi.FAIRPLAY:return mn.FAIRPLAY;case Hi.PLAYREADY:return mn.PLAYREADY;case Hi.WIDEVINE:return mn.WIDEVINE;case Hi.CLEARKEY:return mn.CLEARKEY}}function ss(s){const{drmSystems:e,widevineLicenseUrl:t}=s,i=e?[Hi.FAIRPLAY,Hi.WIDEVINE,Hi.PLAYREADY,Hi.CLEARKEY].filter(n=>!!e[n]):[];return!i[Hi.WIDEVINE]&&t&&i.push(Hi.WIDEVINE),i}const ef=function(s){return ba!=null&&(s=ba.navigator)!=null&&s.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function hb(s,e,t,i){let n;switch(s){case Hi.FAIRPLAY:n=["cenc","sinf"];break;case Hi.WIDEVINE:case Hi.PLAYREADY:n=["cenc"];break;case Hi.CLEARKEY:n=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${s}`)}return fb(n,e,t,i)}function fb(s,e,t,i){return[{initDataTypes:s,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(a=>({contentType:`audio/mp4; codecs=${a}`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:t.map(a=>({contentType:`video/mp4; codecs=${a}`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function pb(s){var e;return!!s&&(s.sessionType==="persistent-license"||!!((e=s.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function tf(s){const e=new Uint16Array(s.buffer,s.byteOffset,s.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),i=t.substring(t.indexOf("<"),t.length),r=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("KID")[0];if(r){const o=r.childNodes[0]?r.childNodes[0].nodeValue:r.getAttribute("VALUE");if(o){const d=Hl(o).subarray(0,16);return Qh(d),d}}return null}let Br={};class hr{static clearKeyUriToKeyIdMap(){Br={}}static setKeyIdForUri(e,t){Br[e]=t}static addKeyIdForUri(e){const t=Object.keys(Br).length%Number.MAX_SAFE_INTEGER,i=new Uint8Array(16);return new DataView(i.buffer,12,4).setUint32(0,t),Br[e]=i,i}constructor(e,t,i,n=[1],a=null,r){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=n,this.iv=a,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Kr(e),r!=null&&r.startsWith("0x")&&(this.keyId=new Uint8Array(Ih(r)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&Aa(e.keyFormatVersions,this.keyFormatVersions)&&Dd(e.iv,this.iv)&&Dd(e.keyId,this.keyId)}isSupported(){if(this.method){if(Kr(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case mn.FAIRPLAY:case mn.WIDEVINE:case mn.PLAYREADY:case mn.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(Kr(this.method)){let a=this.iv;return a||(typeof e!="number"&&(Ri.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),a=gb(e)),new hr(this.method,this.uri,"identity",this.keyFormatVersions,a)}if(this.keyId){const a=Br[this.uri];if(a&&!Aa(this.keyId,a)&&hr.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const i=Zh(this.uri);if(i)switch(this.keyFormat){case mn.WIDEVINE:if(this.pssh=i,!this.keyId){const a=vA(i.buffer);if(a.length){var n;const r=a[0];this.keyId=(n=r.kids)!=null&&n.length?r.kids[0]:null}}this.keyId||(this.keyId=Pd(t));break;case mn.PLAYREADY:{const a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=_A(a,null,i),this.keyId=tf(i);break}default:{let a=i.subarray(0,16);if(a.length!==16){const r=new Uint8Array(16);r.set(a,16-a.length),a=r}this.keyId=a;break}}if(!this.keyId||this.keyId.byteLength!==16){let a;a=mb(t),a||(a=Pd(t),a||(a=Br[this.uri])),a&&(this.keyId=a,hr.setKeyIdForUri(this.uri,a))}return this}}function mb(s){const e=s==null?void 0:s[mn.WIDEVINE];return e?e.keyId:null}function Pd(s){const e=s==null?void 0:s[mn.PLAYREADY];if(e){const t=Zh(e.uri);if(t)return tf(t)}return null}function gb(s){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=s>>8*(15-t)&255;return e}const Od=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Md=/#EXT-X-MEDIA:(.*)/g,yb=/^#EXT(?:INF|-X-TARGETDURATION):/m,xo=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),_b=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Wn{static findGroup(e,t){for(let i=0;i<e.length;i++){const n=e[i];if(n.id===t)return n}}static resolve(e,t){return Ml.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return yb.test(e)}static parseMasterPlaylist(e,t){const i=Id(e),n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},a=[];if(Od.lastIndex=0,!e.startsWith("#EXTM3U"))return n.playlistParsingError=new Error("no EXTM3U delimiter"),n;let r;for(;(r=Od.exec(e))!=null;)if(r[1]){var o;const c=new ji(r[1],n),l=rl(n,r[2]),f={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:Wn.resolve(l,t)},p=c.decimalResolution("RESOLUTION");p&&(f.width=p.width,f.height=p.height),Nd(c.CODECS,f);const g=c["SUPPLEMENTAL-CODECS"];g&&(f.supplemental={},Nd(g,f.supplemental)),(o=f.unknownCodecs)!=null&&o.length||a.push(f),n.levels.push(f)}else if(r[3]){const c=r[3],l=r[4];switch(c){case"SESSION-DATA":{const f=new ji(l,n),p=f["DATA-ID"];p&&(n.sessionData===null&&(n.sessionData={}),n.sessionData[p]=f);break}case"SESSION-KEY":{const f=Bd(l,t,n);f.encrypted&&f.isSupported()?(n.sessionKeys===null&&(n.sessionKeys=[]),n.sessionKeys.push(f)):Ri.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${l}"`);break}case"DEFINE":{{const f=new ji(l,n);Rd(n,f,t)}break}case"CONTENT-STEERING":{const f=new ji(l,n);n.contentSteering={uri:Wn.resolve(f["SERVER-URI"],t),pathwayId:f["PATHWAY-ID"]||"."};break}case"START":{n.startTimeOffset=Fd(l);break}}}const d=a.length>0&&a.length<n.levels.length;return n.levels=d?a:n.levels,n.levels.length===0&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,i){let n;const a={},r=i.levels,o={AUDIO:r.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:r.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let d=0;for(Md.lastIndex=0;(n=Md.exec(e))!==null;){const c=new ji(n[1],i),l=c.TYPE;if(l){const f=o[l],p=a[l]||[];a[l]=p;const g=c.LANGUAGE,y=c["ASSOC-LANGUAGE"],A=c.CHANNELS,C=c.CHARACTERISTICS,I=c["INSTREAM-ID"],P={attrs:c,bitrate:0,id:d++,groupId:c["GROUP-ID"]||"",name:c.NAME||g||"",type:l,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:g,url:c.URI?Wn.resolve(c.URI,t):""};if(y&&(P.assocLang=y),A&&(P.channels=A),C&&(P.characteristics=C),I&&(P.instreamId=I),f!=null&&f.length){const M=Wn.findGroup(f,P.groupId)||f[0];Ud(P,M,"audioCodec"),Ud(P,M,"textCodec")}p.push(P)}}return a}static parseLevelPlaylist(e,t,i,n,a,r){var o;const d={url:t},c=new db(t),l=c.fragments,f=[];let p=null,g=0,y=0,A=0,C=0,I=0,P=null,M=new Ao(n,d),G,Z,le,W=-1,N=!1,U=null,O;if(xo.lastIndex=0,c.m3u8=e,c.hasVariableRefs=Id(e),((o=xo.exec(e))==null?void 0:o[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(G=xo.exec(e))!==null;){N&&(N=!1,M=new Ao(n,d),M.playlistOffset=A,M.setStart(A),M.sn=g,M.cc=C,I&&(M.bitrate=I),M.level=i,p&&(M.initSegment=p,p.rawProgramDateTime&&(M.rawProgramDateTime=p.rawProgramDateTime,p.rawProgramDateTime=null),U&&(M.setByteRange(U),U=null)));const Le=G[1];if(Le){M.duration=parseFloat(Le);const xe=(" "+G[2]).slice(1);M.title=xe||null,M.tagList.push(xe?["INF",Le,xe]:["INF",Le])}else if(G[3]){if(wt(M.duration)){M.playlistOffset=A,M.setStart(A),le&&Gd(M,le,c),M.sn=g,M.level=i,M.cc=C,l.push(M);const xe=(" "+G[3]).slice(1);M.relurl=rl(c,xe),al(M,P,f),P=M,A+=M.duration,g++,y=0,N=!0}}else{if(G=G[0].match(_b),!G){Ri.warn("No matches on slow regex match for level playlist!");continue}for(Z=1;Z<G.length&&G[Z]===void 0;Z++);const xe=(" "+G[Z]).slice(1),ve=(" "+G[Z+1]).slice(1),ze=G[Z+2]?(" "+G[Z+2]).slice(1):null;switch(xe){case"BYTERANGE":P?M.setByteRange(ve,P):M.setByteRange(ve);break;case"PROGRAM-DATE-TIME":M.rawProgramDateTime=ve,M.tagList.push(["PROGRAM-DATE-TIME",ve]),W===-1&&(W=l.length);break;case"PLAYLIST-TYPE":c.type&&tr(c,xe,G),c.type=ve.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?tr(c,xe,G):l.length>0&&Vd(c,xe,G),g=c.startSN=parseInt(ve);break;case"SKIP":{c.skippedSegments&&tr(c,xe,G);const Pe=new ji(ve,c),Y=Pe.decimalInteger("SKIPPED-SEGMENTS");if(wt(Y)){c.skippedSegments+=Y;for(let S=Y;S--;)l.push(null);g+=Y}const b=Pe.enumeratedString("RECENTLY-REMOVED-DATERANGES");b&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(b.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&tr(c,xe,G),c.targetduration=Math.max(parseInt(ve),1);break;case"VERSION":c.version!==null&&tr(c,xe,G),c.version=parseInt(ve);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||tr(c,xe,G),c.live=!1;break;case"#":(ve||ze)&&M.tagList.push(ze?[ve,ze]:[ve]);break;case"DISCONTINUITY":C++,M.tagList.push(["DIS"]);break;case"GAP":M.gap=!0,M.tagList.push([xe]);break;case"BITRATE":M.tagList.push([xe,ve]),I=parseInt(ve)*1e3,wt(I)?M.bitrate=I:I=0;break;case"DATERANGE":{const Pe=new ji(ve,c),Y=new Jh(Pe,c.dateRanges[Pe.ID],c.dateRangeTagCount);c.dateRangeTagCount++,Y.isValid||c.skippedSegments?c.dateRanges[Y.id]=Y:Ri.warn(`Ignoring invalid DATERANGE tag: "${ve}"`),M.tagList.push(["EXT-X-DATERANGE",ve]);break}case"DEFINE":{{const Pe=new ji(ve,c);"IMPORT"in Pe?rb(c,Pe,r):Rd(c,Pe,t)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?tr(c,xe,G):l.length>0&&Vd(c,xe,G),c.startCC=C=parseInt(ve);break;case"KEY":{const Pe=Bd(ve,t,c);if(Pe.isSupported()){if(Pe.method==="NONE"){le=void 0;break}le||(le={});const Y=le[Pe.keyFormat];Y!=null&&Y.matches(Pe)||(Y&&(le=Pi({},le)),le[Pe.keyFormat]=Pe)}else Ri.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${ve}"`);break}case"START":c.startTimeOffset=Fd(ve);break;case"MAP":{const Pe=new ji(ve,c);if(M.duration){const Y=new Ao(n,d);$d(Y,Pe,i,le),p=Y,M.initSegment=p,p.rawProgramDateTime&&!M.rawProgramDateTime&&(M.rawProgramDateTime=p.rawProgramDateTime)}else{const Y=M.byteRangeEndOffset;if(Y){const b=M.byteRangeStartOffset;U=`${Y-b}@${b}`}else U=null;$d(M,Pe,i,le),p=M,N=!0}p.cc=C;break}case"SERVER-CONTROL":{O&&tr(c,xe,G),O=new ji(ve),c.canBlockReload=O.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=O.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&O.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=O.optionalFloat("PART-HOLD-BACK",0),c.holdBack=O.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&tr(c,xe,G);const Pe=new ji(ve);c.partTarget=Pe.decimalFloatingPoint("PART-TARGET");break}case"PART":{let Pe=c.partList;Pe||(Pe=c.partList=[]);const Y=y>0?Pe[Pe.length-1]:void 0,b=y++,S=new ji(ve,c),k=new rA(S,M,d,b,Y);Pe.push(k),M.duration+=k.duration;break}case"PRELOAD-HINT":{const Pe=new ji(ve,c);c.preloadHint=Pe;break}case"RENDITION-REPORT":{const Pe=new ji(ve,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(Pe);break}default:Ri.warn(`line parsed but not handled: ${G}`);break}}}P&&!P.relurl?(l.pop(),A-=P.duration,c.partList&&(c.fragmentHint=P)):c.partList&&(al(M,P,f),M.cc=C,c.fragmentHint=M,le&&Gd(M,le,c)),c.targetduration||(c.playlistParsingError=new Error("Missing Target Duration"));const z=l.length,ce=l[0],be=l[z-1];if(A+=c.skippedSegments*c.targetduration,A>0&&z&&be){c.averagetargetduration=A/z;const Le=be.sn;c.endSN=Le!=="initSegment"?Le:0,c.live||(be.endList=!0),W>0&&(Ab(l,W),ce&&f.unshift(ce))}return c.fragmentHint&&(A+=c.fragmentHint.duration),c.totalduration=A,f.length&&c.dateRangeTagCount&&ce&&nf(f,c),c.endCC=C,c}}function nf(s,e){let t=s.length;if(!t)if(e.hasProgramDateTime){const o=e.fragments[e.fragments.length-1];s.push(o),t++}else return;const i=s[t-1],n=e.live?1/0:e.totalduration,a=Object.keys(e.dateRanges);for(let o=a.length;o--;){const d=e.dateRanges[a[o]],c=d.startDate.getTime();d.tagAnchor=i.ref;for(let l=t;l--;){var r;if(((r=s[l])==null?void 0:r.sn)<e.startSN)break;const f=vb(e,c,s,l,n);if(f!==-1){d.tagAnchor=e.fragments[f].ref;break}}}}function vb(s,e,t,i,n){const a=t[i];if(a){const o=a.programDateTime;if(e>=o||i===0){var r;const d=(((r=t[i+1])==null?void 0:r.start)||n)-a.start;if(e<=o+d*1e3){const c=t[i].sn-s.startSN;if(c<0)return-1;const l=s.fragments;if(l.length>t.length){const p=(t[i+1]||l[l.length-1]).sn-s.startSN;for(let g=p;g>c;g--){const y=l[g].programDateTime;if(e>=y&&e<y+l[g].duration*1e3)return g}}return c}}}return-1}function Bd(s,e,t){var i,n;const a=new ji(s,t),r=(i=a.METHOD)!=null?i:"",o=a.URI,d=a.hexadecimalInteger("IV"),c=a.KEYFORMATVERSIONS,l=(n=a.KEYFORMAT)!=null?n:"identity";o&&a.IV&&!d&&Ri.error(`Invalid IV: ${a.IV}`);const f=o?Wn.resolve(o,e):"",p=(c||"1").split("/").map(Number).filter(Number.isFinite);return new hr(r,f,l,p,d,a.KEYID)}function Fd(s){const t=new ji(s).decimalFloatingPoint("TIME-OFFSET");return wt(t)?t:null}function Nd(s,e){let t=(s||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{const n=t.filter(a=>Nl(a,i));n.length&&(e[`${i}Codec`]=n.map(a=>a.split("/")[0]).join(","),t=t.filter(a=>n.indexOf(a)===-1))}),e.unknownCodecs=t}function Ud(s,e,t){const i=e[t];i&&(s[t]=i)}function Ab(s,e){let t=s[e];for(let i=e;i--;){const n=s[i];if(!n)return;n.programDateTime=t.programDateTime-n.duration*1e3,t=n}}function al(s,e,t){s.rawProgramDateTime?t.push(s):e!=null&&e.programDateTime&&(s.programDateTime=e.endProgramDateTime)}function $d(s,e,t,i){s.relurl=e.URI,e.BYTERANGE&&s.setByteRange(e.BYTERANGE),s.level=t,s.sn="initSegment",i&&(s.levelkeys=i),s.initSegment=null}function Gd(s,e,t){s.levelkeys=e;const{encryptedFragments:i}=t;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(n=>e[n].isCommonEncryption)&&i.push(s)}function tr(s,e,t){s.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function Vd(s,e,t){s.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function To(s,e){const t=e.startPTS;if(wt(t)){let i=0,n;e.sn>s.sn?(i=t-s.start,n=s):(i=s.start-t,n=e),n.duration!==i&&n.setDuration(i)}else e.sn>s.sn?s.cc===e.cc&&s.minEndPTS?e.setStart(s.start+(s.minEndPTS-s.start)):e.setStart(s.start+s.duration):e.setStart(Math.max(s.start-e.duration,0))}function rf(s,e,t,i,n,a,r){i-t<=0&&(r.warn("Fragment should have a positive duration",e),i=t+e.duration,a=n+e.duration);let d=t,c=i;const l=e.startPTS,f=e.endPTS;if(wt(l)){const I=Math.abs(l-t);s&&I>s.totalduration?r.warn(`media timestamps and playlist times differ by ${I}s for level ${e.level} ${s.url}`):wt(e.deltaPTS)?e.deltaPTS=Math.max(I,e.deltaPTS):e.deltaPTS=I,d=Math.max(t,l),t=Math.min(t,l),n=e.startDTS!==void 0?Math.min(n,e.startDTS):n,c=Math.min(i,f),i=Math.max(i,f),a=e.endDTS!==void 0?Math.max(a,e.endDTS):a}const p=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(i-e.start),e.startPTS=t,e.maxStartPTS=d,e.startDTS=n,e.endPTS=i,e.minEndPTS=c,e.endDTS=a;const g=e.sn;if(!s||g<s.startSN||g>s.endSN)return 0;let y;const A=g-s.startSN,C=s.fragments;for(C[A]=e,y=A;y>0;y--)To(C[y],C[y-1]);for(y=A;y<C.length-1;y++)To(C[y],C[y+1]);return s.fragmentHint&&To(C[C.length-1],s.fragmentHint),s.PTSKnown=s.alignedSliding=!0,p}function bb(s,e,t){if(s===e)return;let i=null;const n=s.fragments;for(let l=n.length-1;l>=0;l--){const f=n[l].initSegment;if(f){i=f;break}}s.fragmentHint&&delete s.fragmentHint.endPTS;let a;xb(s,e,(l,f,p,g)=>{if((!e.startCC||e.skippedSegments)&&f.cc!==l.cc){const y=l.cc-f.cc;for(let A=p;A<g.length;A++)g[A].cc+=y;e.endCC=g[g.length-1].cc}wt(l.startPTS)&&wt(l.endPTS)&&(f.setStart(f.startPTS=l.startPTS),f.startDTS=l.startDTS,f.maxStartPTS=l.maxStartPTS,f.endPTS=l.endPTS,f.endDTS=l.endDTS,f.minEndPTS=l.minEndPTS,f.setDuration(l.endPTS-l.startPTS),f.duration&&(a=f),e.PTSKnown=e.alignedSliding=!0),l.hasStreams&&(f.elementaryStreams=l.elementaryStreams),f.loader=l.loader,l.hasStats&&(f.stats=l.stats),l.initSegment&&(f.initSegment=l.initSegment,i=l.initSegment)});const r=e.fragments,o=e.fragmentHint?r.concat(e.fragmentHint):r;if(i&&o.forEach(l=>{var f;l&&(!l.initSegment||l.initSegment.relurl===((f=i)==null?void 0:f.relurl))&&(l.initSegment=i)}),e.skippedSegments){if(e.deltaUpdateFailed=r.some(l=>!l),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let l=e.skippedSegments;l--;)r.shift();e.startSN=r[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=Sb(s.dateRanges,e,t));const l=s.fragments.filter(f=>f.rawProgramDateTime);if(s.hasProgramDateTime&&!e.hasProgramDateTime)for(let f=1;f<o.length;f++)o[f].programDateTime===null&&al(o[f],o[f-1],l);nf(l,e)}e.endCC=r[r.length-1].cc}if(!e.startCC){var d;const l=of(s,e.startSN-1);e.startCC=(d=l==null?void 0:l.cc)!=null?d:r[0].cc}Eb(s.partList,e.partList,(l,f)=>{f.elementaryStreams=l.elementaryStreams,f.stats=l.stats}),a?rf(e,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS,t):sf(s,e),r.length&&(e.totalduration=e.edge-r[0].start),e.driftStartTime=s.driftStartTime,e.driftStart=s.driftStart;const c=e.advancedDateTime;if(e.advanced&&c){const l=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=l),e.driftEndTime=c,e.driftEnd=l}else e.driftEndTime=s.driftEndTime,e.driftEnd=s.driftEnd,e.advancedDateTime=s.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=s.requestScheduled)}function Sb(s,e,t){const{dateRanges:i,recentlyRemovedDateranges:n}=e,a=Pi({},s);n&&n.forEach(d=>{delete a[d]});const o=Object.keys(a).length;return o?(Object.keys(i).forEach(d=>{const c=a[d],l=new Jh(i[d].attr,c);l.isValid?(a[d]=l,c||(l.tagOrder+=o)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Ni(i[d].attr)}"`)}),a):i}function Eb(s,e,t){if(s&&e){let i=0;for(let n=0,a=s.length;n<=a;n++){const r=s[n],o=e[n+i];r&&o&&r.index===o.index&&r.fragment.sn===o.fragment.sn?t(r,o):i--}}}function xb(s,e,t){const i=e.skippedSegments,n=Math.max(s.startSN,e.startSN)-e.startSN,a=(s.fragmentHint?1:0)+(i?e.endSN:Math.min(s.endSN,e.endSN))-e.startSN,r=e.startSN-s.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,d=s.fragmentHint?s.fragments.concat(s.fragmentHint):s.fragments;for(let c=n;c<=a;c++){const l=d[r+c];let f=o[c];if(i&&!f&&l&&(f=e.fragments[c]=l),l&&f){t(l,f,c,o);const p=l.relurl,g=f.relurl;if(p&&Tb(p,g)){e.playlistParsingError=jd(`media sequence mismatch ${f.sn}:`,s,e,l,f);return}else if(l.cc!==f.cc){e.playlistParsingError=jd(`discontinuity sequence mismatch (${l.cc}!=${f.cc})`,s,e,l,f);return}}}}function jd(s,e,t,i,n){return new Error(`${s} ${n.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function sf(s,e,t=!0){const i=e.startSN+e.skippedSegments-s.startSN,n=s.fragments,a=i>=0;let r=0;if(a&&i<n.length)r=n[i].start;else if(a&&e.startSN===s.endSN+1)r=s.fragmentEnd;else if(a&&t)r=s.fragmentStart+i*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)r=s.fragmentStart;else return;ol(e,r)}function ol(s,e){if(e){const t=s.fragments;for(let i=s.skippedSegments;i<t.length;i++)t[i].addStart(e);s.fragmentHint&&s.fragmentHint.addStart(e)}}function af(s,e=1/0){let t=1e3*s.targetduration;if(s.updated){const i=s.fragments;if(i.length&&t*4>e){const a=i[i.length-1].duration*1e3;a<t&&(t=a)}}else t/=2;return Math.round(t)}function of(s,e,t){if(!s)return null;let i=s.fragments[e-s.startSN];return i||(i=s.fragmentHint,i&&i.sn===e)?i:e<s.startSN&&t&&t.sn===e?t:null}function Hd(s,e,t){return s?lf(s.partList,e,t):null}function lf(s,e,t){if(s)for(let i=s.length;i--;){const n=s[i];if(n.index===t&&n.fragment.sn===e)return n}return null}function cf(s){s.forEach((e,t)=>{var i;(i=e.details)==null||i.fragments.forEach(n=>{n.level=t,n.initSegment&&(n.initSegment.level=t)})})}function Tb(s,e){return s!==e&&e?qd(s)!==qd(e):!1}function qd(s){return s.replace(/\?[^?]*$/,"")}function as(s,e){for(let i=0,n=s.length;i<n;i++){var t;if(((t=s[i])==null?void 0:t.cc)===e)return s[i]}return null}function Cb(s,e){return!!(s&&e.startCC<s.endCC&&e.endCC>s.startCC)}function zd(s,e){const t=s.start+e;s.startPTS=t,s.setStart(t),s.endPTS=t+s.duration}function df(s,e){const t=e.fragments;for(let i=0,n=t.length;i<n;i++)zd(t[i],s);e.fragmentHint&&zd(e.fragmentHint,s),e.alignedSliding=!0}function wb(s,e){s&&(uf(e,s),e.alignedSliding||Sa(e,s),!e.alignedSliding&&!e.skippedSegments&&sf(s,e,!1))}function uf(s,e){if(!Cb(e,s))return;const t=Math.min(e.endCC,s.endCC),i=as(e.fragments,t),n=as(s.fragments,t);if(!i||!n)return;Ri.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const a=i.start-n.start;df(a,s)}function Sa(s,e){if(!s.hasProgramDateTime||!e.hasProgramDateTime)return;const t=s.fragments,i=e.fragments;if(!t.length||!i.length)return;let n,a;const r=Math.min(e.endCC,s.endCC);e.startCC<r&&s.startCC<r&&(n=as(i,r),a=as(t,r)),(!n||!a)&&(n=i[Math.floor(i.length/2)],a=as(t,n.cc)||t[Math.floor(t.length/2)]);const o=n.programDateTime,d=a.programDateTime;if(!o||!d)return;const c=(d-o)/1e3-(a.start-n.start);df(c,s)}function yn(s,e,t){bn(s,e,t),s.addEventListener(e,t)}function bn(s,e,t){s.removeEventListener(e,t)}const kb={toString:function(s){let e="";const t=s.length;for(let i=0;i<t;i++)e+=`[${s.start(i).toFixed(3)}-${s.end(i).toFixed(3)}]`;return e}},rt={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class ql extends Yh{constructor(e,t,i,n,a){super(n,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=rt.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:r,fragCurrent:o,media:d,mediaBuffer:c,state:l}=this,f=d?d.currentTime:0,p=li.bufferInfo(c||d,f,r.maxBufferHole),g=!p.len;if(this.log(`Media seeking to ${wt(f)?f.toFixed(3):f}, state: ${l}, ${g?"out of":"in"} buffer`),this.state===rt.ENDED)this.resetLoadingState();else if(o){const y=r.maxFragLookUpTolerance,A=o.start-y,C=o.start+o.duration+y;if(g||C<p.start||A>p.end){const I=f>C;(f<A||I)&&(I&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(d){this.fragmentTracker.removeFragmentsInRange(f,1/0,this.playlistType,!0);const y=this.lastCurrentTime;if(f>y&&(this.lastCurrentTime=f),!this.loadingParts){const A=Math.max(p.end,f),C=this.shouldLoadParts(this.getLevelDetails(),A);C&&(this.log(`LL-Part loading ON after seeking to ${f.toFixed(2)} with buffer @${A.toFixed(2)}`),this.loadingParts=C)}}this.hls.hasEnoughToStart||(this.log(`Setting ${g?"startPosition":"nextLoadPosition"} to ${f} for seek without enough to start`),this.nextLoadPosition=f,g&&(this.startPosition=f)),g&&this.state===rt.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=a,this.hls=e,this.fragmentLoader=new ib(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Gl(e.config)}registerListeners(){const{hls:e}=this;e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(V.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===rt.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=rt.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const i=e.end||0,n=this.config.timelineOffset||0;if(i<=n)return!1;const a=e.buffered;this.config.maxBufferHole&&a&&a.length>1&&(e=li.bufferedInfo(a,e.start,0));const r=e.nextStart;if(r&&r>n&&r<t.edge||this.media.currentTime<e.start)return!1;const d=t.partList;if(d!=null&&d.length){const l=d[d.length-1];return li.isBuffered(this.media,l.start+l.duration/2)}const c=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(c)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;yn(i,"seeking",this.onMediaSeeking),yn(i,"ended",this.onMediaEnded);const n=this.config;this.levels&&n.autoStartLoad&&this.state===rt.STOPPED&&this.startLoad(n.startPosition)}onMediaDetaching(e,t){const i=!!t.transferMedia,n=this.media;if(n!==null){if(n.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),bn(n,"seeking",this.onMediaSeeking),bn(n,"ended",this.onMediaEnded),this.keyLoader&&!i&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,i){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=rt.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this.startFragRequested=!0,this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){const n=a=>{const r=a.frag;if(this.fragContextChanged(r)){this.warn(`${r.type} sn: ${r.sn}${a.part?" part: "+a.part.index:""} of ${this.fragInfo(r,!1,a.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(r);return}r.stats.chunkCount++,this._handleFragmentLoadProgress(a)};this._doFragLoad(e,t,i,n).then(a=>{if(!a)return;const r=this.state,o=a.frag;if(this.fragContextChanged(o)){(r===rt.FRAG_LOADING||!this.fragCurrent&&r===rt.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=rt.IDLE);return}"payload"in a&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(V.FRAG_LOADED,a)),this._handleFragmentLoadComplete(a)}).catch(a=>{this.state===rt.STOPPED||this.state===rt.ERROR||(this.warn(`Frag error: ${(a==null?void 0:a.message)||a}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this;if(i.getState(e)===sn.APPENDING){const a=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,a),o=Math.max(e.duration,r?r.len:this.config.maxBufferLength),d=this.backtrackFragment;((d?e.sn-d.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&i.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===sn.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(t==null?void 0:t.live)&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,i=null){if(!(e-t))return;const n={startOffset:e,endOffset:t,type:i};this.hls.trigger(V.BUFFER_FLUSHING,n)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(i=>{const n=i==null?void 0:i.frag;if(!n||this.fragContextChanged(n)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:n}=this,{frag:a,payload:r}=i,o=a.decryptdata;if(r&&r.byteLength>0&&o!=null&&o.key&&o.iv&&Kr(o.method)){const d=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),o.key.buffer,o.iv.buffer,jl(o.method)).catch(c=>{throw n.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:a}),c}).then(c=>{const l=self.performance.now();return n.trigger(V.FRAG_DECRYPTED,{frag:a,payload:c,stats:{tstart:d,tdecrypt:l}}),i.payload=c,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===rt.STOPPED||this.state===rt.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state!==rt.STOPPED&&(this.state=rt.IDLE),e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var i,n;const a=e.tracks;if(a&&!t.encrypted&&((i=a.audio)!=null&&i.encrypted||(n=a.video)!=null&&n.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const r=this.media,o=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${r?"attached mediaKeys: "+r.mediaKeys:"detached"})`);return this.warn(o.message),!r||r.mediaKeys?!1:(this.hls.trigger(V.ERROR,{type:Gt.KEY_SYSTEM_ERROR,details:je.KEY_SYSTEM_NO_KEYS,fatal:!1,error:o,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const i=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${i?kb.toString(li.getBuffered(i)):"(detached)"})`),Ji(e)){var n;if(e.type!==Mt.SUBTITLE){const r=e.elementaryStreams;if(!Object.keys(r).some(o=>!!r[o])){this.state=rt.IDLE;return}}const a=(n=this.levels)==null?void 0:n[e.level];a!=null&&a.fragmentError&&(this.log(`Resetting level fragment error count of ${a.fragmentError} on frag buffered`),a.fragmentError=0)}this.state=rt.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:n,partsLoaded:a}=e,r=!a||a.length===0||a.some(d=>!d),o=new Vl(i.level,i.sn,i.stats.chunkCount+1,0,n?n.index:-1,!r);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,n){var a;this.fragCurrent=e;const r=t.details;if(!this.levels||!r)throw new Error(`frag load aborted, missing level${r?"":" detail"}s`);let o=null;if(e.encrypted&&!((a=e.decryptdata)!=null&&a.key)){if(this.log(`Loading key for ${e.sn} of [${r.startSN}-${r.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=rt.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(p=>{if(!this.fragContextChanged(p.frag))return this.hls.trigger(V.KEY_LOADED,p),this.state===rt.KEY_LOADING&&(this.state=rt.IDLE),p}),this.hls.trigger(V.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(o=this.keyLoader.loadClear(e,r.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const d=this.fragPrevious;if(Ji(e)&&(!d||e.sn!==d.sn)){const p=this.shouldLoadParts(t.details,e.end);p!==this.loadingParts&&(this.log(`LL-Part loading ${p?"ON":"OFF"} loading sn ${d==null?void 0:d.sn}->${e.sn}`),this.loadingParts=p)}if(i=Math.max(e.start,i||0),this.loadingParts&&Ji(e)){const p=r.partList;if(p&&n){i>r.fragmentEnd&&r.fragmentHint&&(e=r.fragmentHint);const g=this.getNextPart(p,e,i);if(g>-1){const y=p[g];e=this.fragCurrent=y.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${y.index} (${g}/${p.length-1}) of ${this.fragInfo(e,!1,y)}) cc: ${e.cc} [${r.startSN}-${r.endSN}], target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=y.start+y.duration,this.state=rt.FRAG_LOADING;let A;return o?A=o.then(C=>!C||this.fragContextChanged(C.frag)?null:this.doFragPartsLoad(e,y,t,n)).catch(C=>this.handleFragLoadError(C)):A=this.doFragPartsLoad(e,y,t,n).catch(C=>this.handleFragLoadError(C)),this.hls.trigger(V.FRAG_LOADING,{frag:e,part:y,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):A}else if(!e.url||this.loadedEndOfParts(p,i))return Promise.resolve(null)}}if(Ji(e)&&this.loadingParts){var c;this.log(`LL-Part loading OFF after next part miss @${i.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(c=r.partList)==null?void 0:c.filter(p=>p.loaded).map(p=>`[${p.start}-${p.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+r.startSN+"-"+r.endSN+"]"}, target: ${parseFloat(i.toFixed(3))}`),wt(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=rt.FRAG_LOADING;const l=this.config.progressive&&e.type!==Mt.SUBTITLE;let f;return l&&o?f=o.then(p=>!p||this.fragContextChanged(p.frag)?null:this.fragmentLoader.load(e,n)).catch(p=>this.handleFragLoadError(p)):f=Promise.all([this.fragmentLoader.load(e,l?n:void 0),o]).then(([p])=>(!l&&n&&n(p),p)).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(V.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):f}doFragPartsLoad(e,t,i,n){return new Promise((a,r)=>{var o;const d=[],c=(o=i.details)==null?void 0:o.partList,l=f=>{this.fragmentLoader.loadPart(e,f,n).then(p=>{d[f.index]=p;const g=p.part;this.hls.trigger(V.FRAG_LOADED,p);const y=Hd(i.details,e.sn,f.index+1)||lf(c,e.sn,f.index+1);if(y)l(y);else return a({frag:e,part:g,partsLoaded:d})}).catch(r)};l(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===je.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===Gt.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(V.ERROR,t)}else this.hls.trigger(V.ERROR,{type:Gt.OTHER_ERROR,details:je.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==rt.PARSING){!this.fragCurrent&&this.state!==rt.STOPPED&&this.state!==rt.ERROR&&(this.state=rt.IDLE);return}const{frag:i,part:n,level:a}=t,r=self.performance.now();i.stats.parsing.end=r,n&&(n.stats.parsing.end=r);const o=this.getLevelDetails(),c=o&&i.sn>o.endSN||this.shouldLoadParts(o,i.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} after parsing segment ending @${i.end.toFixed(2)}`),this.loadingParts=c),this.updateLevelTiming(i,n,a,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var i;const a=e.partList[0];if(a.fragment.type===Mt.SUBTITLE)return!1;const r=a.end+(((i=e.fragmentHint)==null?void 0:i.duration)||0);if(t>=r){var n;if((this.hls.hasEnoughToStart?((n=this.media)==null?void 0:n.currentTime)||this.lastCurrentTime:this.getLoadPosition())>a.start-a.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:n,sn:a,part:r}=e;if(!(t!=null&&t[n]))return this.warn(`Levels object was unset while buffering fragment ${a} of ${this.playlistLabel()} ${n}. The current chunk will not be buffered.`),null;const o=t[n],d=o.details,c=r>-1?Hd(d,a,r):null,l=c?c.fragment:of(d,a,i);return l?(i&&i!==l&&(l.stats=i.stats),{frag:l,part:c,level:o}):null}bufferFragmentData(e,t,i,n,a){if(this.state!==rt.PARSING)return;const{data1:r,data2:o}=e;let d=r;if(o&&(d=On(r,o)),!d.length)return;const c=this.initPTS[t.cc],l=c?-c.baseTime/c.timescale:void 0,f={type:e.type,frag:t,part:i,chunkMeta:n,offset:l,parent:t.type,data:d};if(this.hls.trigger(V.BUFFER_APPENDING,f),e.dropped&&e.independent&&!i){if(a)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!li.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const i=t.currentTime,n=li.bufferInfo(t,i,0),a=e.duration,r=Math.min(this.config.maxFragLookUpTolerance*2,a*.25),o=Math.max(Math.min(e.start-r,n.end-r),i+r);e.start-o>r&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var i;const n=this.getLoadPosition();if(!wt(n))return null;const r=this.lastCurrentTime>n||(i=this.media)!=null&&i.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,n,t,r)}getFwdBufferInfoAtPos(e,t,i,n){const a=li.bufferInfo(e,t,n);if(a.len===0&&a.nextStart!==void 0){const r=this.fragmentTracker.getBufferedFrag(t,i);if(r&&(a.nextStart<=r.end||r.gap)){const o=Math.max(Math.min(a.nextStart,r.end)-t,n);return li.bufferInfo(e,t,o)}}return a}getMaxBufferLength(e){const{config:t}=this;let i;return e?i=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):i=t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const i=this.config,n=Math.max(Math.min(e-t,i.maxBufferLength),t),a=Math.max(e-t*3,i.maxMaxBufferLength/2,n);return a>=n?(i.maxMaxBufferLength=a,this.warn(`Reduce max buffer length to ${a}s`),!0):!1}getAppendedFrag(e,t=Mt.MAIN){const i=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){const i=t.fragments,n=i.length;if(!n)return null;const{config:a}=this,r=i[0].start,o=a.lowLatencyMode&&!!t.partList;let d=null;if(t.live){const f=a.initialLiveManifestSize;if(n<f)return this.warn(`Not enough fragments to start playback (have: ${n}, need: ${f})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<r){var c;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),d=this.getInitialLiveFragment(t);const p=this.hls.startPosition,g=this.hls.liveSyncPosition,y=d?(p!==-1&&p>=r?p:g)||d.start:e;this.log(`Setting startPosition to ${y} to match start frag at live edge. mainStart: ${p} liveSyncPosition: ${g} frag.start: ${(c=d)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=y}}else e<=r&&(d=i[0]);if(!d){const f=this.loadingParts?t.partEnd:t.fragmentEnd;d=this.getFragmentAtPosition(e,f,t)}let l=this.filterReplacedPrimary(d,t);if(!l&&d){const f=d.sn-t.startSN;l=this.filterReplacedPrimary(i[f+1]||null,t)}return this.mapToInitFragWhenRequired(l)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===sn.OK||i===sn.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,n,a){let r=null;if(e.gap&&(r=this.getNextFragment(this.nextLoadPosition,t),r&&!r.gap&&i.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,n,0);if(o!==null&&i.len+o.len>=a){const d=r.sn;return this.loopSn!==d&&(this.log(`buffer full after gaps in "${n}" playlist starting at sn: ${d}`),this.loopSn=d),null}}return this.loopSn=void 0,r}get primaryPrefetch(){if(Kd(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(Kd(this.config)&&e.type!==Mt.SUBTITLE){const i=this.hls.interstitialsManager,n=i==null?void 0:i.bufferingItem;if(n){const r=n.event;if(r){if(r.appendInPlace||Math.abs(e.start-n.start)>1||n.start===0)return null}else if(e.end<=n.start&&(t==null?void 0:t.live)===!1||e.start>n.end&&n.nextEvent&&(n.nextEvent.appendInPlace||e.start-n.end>1))return null}const a=i==null?void 0:i.playerQueue;if(a)for(let r=a.length;r--;){const o=a[r].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,i){let n=-1,a=!1,r=!0;for(let o=0,d=e.length;o<d;o++){const c=e[o];if(r=r&&!c.independent,n>-1&&i<c.start)break;const l=c.loaded;l?n=-1:(a||(c.independent||r)&&c.fragment===t)&&(c.fragment!==t&&this.warn(`Need buffer at ${i} but next unloaded part starts at ${c.start}`),n=o),a=l}return n}loadedEndOfParts(e,t){let i;for(let n=e.length;n--;){if(i=e[n],!i.loaded)return!1;if(t>i.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,i=this.fragPrevious;let n=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),n=HA(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){const a=i.sn+1;if(a>=e.startSN&&a<=e.endSN){const r=t[a-e.startSN];i.cc===r.cc&&(n=r,this.log(`Live playlist, switching playlist, load frag with next SN: ${n.sn}`))}n||(n=zh(e,i.cc,i.end),n&&this.log(`Live playlist, switching playlist, load frag with same CC: ${n.sn}`))}}else{const a=this.hls.liveSyncPosition;a!==null&&(n=this.getFragmentAtPosition(a,this.bitrateTest?e.fragmentEnd:e.edge,e))}return n}getFragmentAtPosition(e,t,i){const{config:n}=this;let{fragPrevious:a}=this,{fragments:r,endSN:o}=i;const{fragmentHint:d}=i,{maxFragLookUpTolerance:c}=n,l=i.partList,f=!!(this.loadingParts&&l!=null&&l.length&&d);f&&!this.bitrateTest&&l[l.length-1].fragment.sn===d.sn&&(r=r.concat(d),o=d.sn);let p;if(e<t){var g;const A=e<this.lastCurrentTime||e>t-c||(g=this.media)!=null&&g.paused||!this.startFragRequested?0:c;p=Ir(a,r,e,A)}else p=r[r.length-1];if(p){const y=p.sn-i.startSN,A=this.fragmentTracker.getState(p);if((A===sn.OK||A===sn.PARTIAL&&p.gap)&&(a=p),a&&p.sn===a.sn&&(!f||l[0].fragment.sn>p.sn||!i.live)&&p.level===a.level){const I=r[y+1];p.sn<o&&this.fragmentTracker.getState(I)!==sn.OK?p=I:p=null}}return p}alignPlaylists(e,t,i){const n=e.fragments.length;if(!n)return this.warn("No fragments in live playlist"),0;const a=e.fragmentStart,r=!t,o=e.alignedSliding&&wt(a);if(r||!o&&!a){wb(i,e);const d=e.fragmentStart;return this.log(`Live playlist sliding: ${d.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${n}`),d}return a}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let i=this.startPosition;i<t&&(i=-1);const n=this.timelineOffset;if(i===-1){const a=this.startTimeOffset!==null,r=a?this.startTimeOffset:e.startTimeOffset;r!==null&&wt(r)?(i=t+r,r<0&&(i+=e.edge),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Setting startPosition to ${i} for start time offset ${r} found in ${a?"multivariant":"media"} playlist`),this.startPosition=i):e.live?(i=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${i}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=i=0),this.lastCurrentTime=i+n}this.nextLoadPosition=i+n}getLoadPosition(){var e;const{media:t}=this;let i=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?i=t.currentTime:this.nextLoadPosition>=0&&(i=this.nextLoadPosition),i}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&Ji(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==rt.FRAG_LOADING_WAITING_RETRY)&&(this.state=rt.IDLE)}onFragmentOrKeyLoadError(e,t){var i;if(t.chunkMeta&&!t.frag){const I=this.getCurrentContext(t.chunkMeta);I&&(t.frag=I.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;if(this.fragContextChanged(n)){var a;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(a=this.fragCurrent)==null?void 0:a.url}`);return}const r=t.details===je.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(n,!0);const o=t.errorAction;if(!o){this.state=rt.ERROR;return}const{action:d,flags:c,retryCount:l=0,retryConfig:f}=o,p=!!f,g=p&&d===un.RetryRequest,y=p&&!o.resolved&&c===xn.MoveAllAlternatesMatchingHost,A=(i=this.hls.latestLevelDetails)==null?void 0:i.live;if(!g&&y&&Ji(n)&&!n.endList&&A&&!Wh(t))this.resetFragmentErrors(e),this.treatAsGap(n),o.resolved=!0;else if((g||y)&&l<f.maxNumRetry){var C;const I=nl((C=t.response)==null?void 0:C.code),P=$l(f,l);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+P,this.state=rt.FRAG_LOADING_WAITING_RETRY,o.resolved=!0,I){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${l+1}/${f.maxNumRetry} in ${P}ms`)}else if(f)if(this.resetFragmentErrors(e),l<f.maxNumRetry)!r&&d!==un.RemoveAlternatePermanently&&(o.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${l})`);return}else d===un.SendAlternateToPenaltyBox?this.state=rt.WAITING_LEVEL:this.state=rt.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,i=t===1/0;(!t||e>=t||i&&!nl(0))&&(i&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=rt.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===rt.PARSING||this.state===rt.PARSED){const t=e.frag,i=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,i),a=n&&n.len>.5;a&&this.reduceMaxBufferLength(n.len,(t==null?void 0:t.duration)||10);const r=!a;return r&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${i} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),r}return!1}resetFragmentErrors(e){e===Mt.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==rt.STOPPED&&(this.state=rt.IDLE)}afterBufferFlushed(e,t,i){if(!e)return;const n=li.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,n,i),this.state===rt.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==rt.STOPPED&&(this.state=rt.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,n){const a=i.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((d,c)=>{const l=e.elementaryStreams[c];if(l){const f=l.endPTS-l.startPTS;if(f<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${f})`),d||!1;const p=n?0:rf(a,e,l.startPTS,l.endPTS,l.startDTS,l.endDTS,this);return this.hls.trigger(V.LEVEL_PTS_UPDATED,{details:a,level:i,drift:p,type:c,frag:e,start:l.startPTS,end:l.endPTS}),!0}return d},!1)){var o;const d=((o=this.transmuxer)==null?void 0:o.error)===null;if((i.fragmentError===0||d&&(i.fragmentError<2||e.endList))&&this.treatAsGap(e,i),d){const c=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(c.message),this.hls.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=rt.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(V.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Mt.MAIN?"level":"track"}fragInfo(e,t=!0,i){var n,a;return`${this.playlistLabel()} ${e.level} (${i?"part":"frag"}:[${((n=t&&!i?e.startPTS:(i||e).start)!=null?n:NaN).toFixed(3)}-${((a=t&&!i?e.endPTS:(i||e).end)!=null?a:NaN).toFixed(3)}]${i&&e.type==="main"?"INDEPENDENT="+(i.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function Kd(s){return!!s.interstitialsController&&s.enableInterstitialPlayback!==!1}class hf{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;if(e.length)e.length===1?i=e[0]:i=Ib(e,t);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}}function Ib(s,e){const t=new Uint8Array(e);let i=0;for(let n=0;n<s.length;n++){const a=s[n];t.set(a,i),i+=a.length}return t}var Co={exports:{}},Wd;function Rb(){return Wd||(Wd=1,function(s){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function n(d,c,l){this.fn=d,this.context=c,this.once=l||!1}function a(d,c,l,f,p){if(typeof l!="function")throw new TypeError("The listener must be a function");var g=new n(l,f||d,p),y=t?t+c:c;return d._events[y]?d._events[y].fn?d._events[y]=[d._events[y],g]:d._events[y].push(g):(d._events[y]=g,d._eventsCount++),d}function r(d,c){--d._eventsCount===0?d._events=new i:delete d._events[c]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],l,f;if(this._eventsCount===0)return c;for(f in l=this._events)e.call(l,f)&&c.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},o.prototype.listeners=function(c){var l=t?t+c:c,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,g=f.length,y=new Array(g);p<g;p++)y[p]=f[p].fn;return y},o.prototype.listenerCount=function(c){var l=t?t+c:c,f=this._events[l];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,l,f,p,g,y){var A=t?t+c:c;if(!this._events[A])return!1;var C=this._events[A],I=arguments.length,P,M;if(C.fn){switch(C.once&&this.removeListener(c,C.fn,void 0,!0),I){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,l),!0;case 3:return C.fn.call(C.context,l,f),!0;case 4:return C.fn.call(C.context,l,f,p),!0;case 5:return C.fn.call(C.context,l,f,p,g),!0;case 6:return C.fn.call(C.context,l,f,p,g,y),!0}for(M=1,P=new Array(I-1);M<I;M++)P[M-1]=arguments[M];C.fn.apply(C.context,P)}else{var G=C.length,Z;for(M=0;M<G;M++)switch(C[M].once&&this.removeListener(c,C[M].fn,void 0,!0),I){case 1:C[M].fn.call(C[M].context);break;case 2:C[M].fn.call(C[M].context,l);break;case 3:C[M].fn.call(C[M].context,l,f);break;case 4:C[M].fn.call(C[M].context,l,f,p);break;default:if(!P)for(Z=1,P=new Array(I-1);Z<I;Z++)P[Z-1]=arguments[Z];C[M].fn.apply(C[M].context,P)}}return!0},o.prototype.on=function(c,l,f){return a(this,c,l,f,!1)},o.prototype.once=function(c,l,f){return a(this,c,l,f,!0)},o.prototype.removeListener=function(c,l,f,p){var g=t?t+c:c;if(!this._events[g])return this;if(!l)return r(this,g),this;var y=this._events[g];if(y.fn)y.fn===l&&(!p||y.once)&&(!f||y.context===f)&&r(this,g);else{for(var A=0,C=[],I=y.length;A<I;A++)(y[A].fn!==l||p&&!y[A].once||f&&y[A].context!==f)&&C.push(y[A]);C.length?this._events[g]=C.length===1?C[0]:C:r(this,g)}return this},o.prototype.removeAllListeners=function(c){var l;return c?(l=t?t+c:c,this._events[l]&&r(this,l)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,s.exports=o}(Co)),Co.exports}var Lb=Rb(),zl=iA(Lb);const fs="1.6.15",Zr={};function Db(){return typeof __HLS_WORKER_BUNDLE__=="function"}function Pb(){const s=Zr[fs];if(s)return s.clientCount++,s;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),n={worker:new self.Worker(t),objectURL:t,clientCount:1};return Zr[fs]=n,n}function Ob(s){const e=Zr[s];if(e)return e.clientCount++,e;const t=new self.URL(s,self.location.href).href,n={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Zr[s]=n,n}function Mb(s){const e=Zr[s||fs];if(e&&e.clientCount--===1){const{worker:i,objectURL:n}=e;delete Zr[s||fs],n&&self.URL.revokeObjectURL(n),i.terminate()}}function ff(s,e){return e+10<=s.length&&s[e]===51&&s[e+1]===68&&s[e+2]===73&&s[e+3]<255&&s[e+4]<255&&s[e+6]<128&&s[e+7]<128&&s[e+8]<128&&s[e+9]<128}function Kl(s,e){return e+10<=s.length&&s[e]===73&&s[e+1]===68&&s[e+2]===51&&s[e+3]<255&&s[e+4]<255&&s[e+6]<128&&s[e+7]<128&&s[e+8]<128&&s[e+9]<128}function Oa(s,e){let t=0;return t=(s[e]&127)<<21,t|=(s[e+1]&127)<<14,t|=(s[e+2]&127)<<7,t|=s[e+3]&127,t}function ps(s,e){const t=e;let i=0;for(;Kl(s,e);){i+=10;const n=Oa(s,e+6);i+=n,ff(s,e+10)&&(i+=10),e+=i}if(i>0)return s.subarray(t,t+i)}function Bb(s,e,t,i){const n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=e[t+2],r=a>>2&15;if(r>12){const g=new Error(`invalid ADTS sampling index:${r}`);s.emit(V.ERROR,V.ERROR,{type:Gt.MEDIA_ERROR,details:je.FRAG_PARSING_ERROR,fatal:!0,error:g,reason:g.message});return}const o=(a>>6&3)+1,d=e[t+3]>>6&3|(a&1)<<2,c="mp4a.40."+o,l=n[r];let f=r;(o===5||o===29)&&(f-=3);const p=[o<<3|(f&14)>>1,(f&1)<<7|d<<3];return Ri.log(`manifest codec:${i}, parsed codec:${c}, channels:${d}, rate:${l} (ADTS object type:${o} sampling index:${r})`),{config:p,samplerate:l,channelCount:d,codec:c,parsedCodec:c,manifestCodec:i}}function pf(s,e){return s[e]===255&&(s[e+1]&246)===240}function mf(s,e){return s[e+1]&1?7:9}function Wl(s,e){return(s[e+3]&3)<<11|s[e+4]<<3|(s[e+5]&224)>>>5}function Fb(s,e){return e+5<s.length}function Ea(s,e){return e+1<s.length&&pf(s,e)}function Nb(s,e){return Fb(s,e)&&pf(s,e)&&Wl(s,e)<=s.length-e}function Ub(s,e){if(Ea(s,e)){const t=mf(s,e);if(e+t>=s.length)return!1;const i=Wl(s,e);if(i<=t)return!1;const n=e+i;return n===s.length||Ea(s,n)}return!1}function gf(s,e,t,i,n){if(!s.samplerate){const a=Bb(e,t,i,n);if(!a)return;Pi(s,a)}}function yf(s){return 1024*9e4/s}function $b(s,e){const t=mf(s,e);if(e+t<=s.length){const i=Wl(s,e)-t;if(i>0)return{headerLength:t,frameLength:i}}}function _f(s,e,t,i,n){const a=yf(s.samplerate),r=i+n*a,o=$b(e,t);let d;if(o){const{frameLength:f,headerLength:p}=o,g=p+f,y=Math.max(0,t+g-e.length);y?(d=new Uint8Array(g-p),d.set(e.subarray(t+p,e.length),0)):d=e.subarray(t+p,t+g);const A={unit:d,pts:r};return y||s.samples.push(A),{sample:A,length:g,missing:y}}const c=e.length-t;return d=new Uint8Array(c),d.set(e.subarray(t,e.length),0),{sample:{unit:d,pts:r},length:c,missing:-1}}function Gb(s,e){return Kl(s,e)&&Oa(s,e+6)+10<=s.length-e}function Vb(s){return s instanceof ArrayBuffer?s:s.byteOffset==0&&s.byteLength==s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer}function wo(s,e=0,t=1/0){return jb(s,e,t,Uint8Array)}function jb(s,e,t,i){const n=Hb(s);let a=1;"BYTES_PER_ELEMENT"in i&&(a=i.BYTES_PER_ELEMENT);const r=qb(s)?s.byteOffset:0,o=(r+s.byteLength)/a,d=(r+e)/a,c=Math.floor(Math.max(0,Math.min(d,o))),l=Math.floor(Math.min(c+Math.max(t,0),o));return new i(n,c,l-c)}function Hb(s){return s instanceof ArrayBuffer?s:s.buffer}function qb(s){return s&&s.buffer instanceof ArrayBuffer&&s.byteLength!==void 0&&s.byteOffset!==void 0}function zb(s){const e={key:s.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(s.size<2)return;if(s.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const i=s.data.subarray(1).indexOf(0);if(i===-1)return;const n=kn(wo(s.data,1,i)),a=s.data[2+i],r=s.data.subarray(3+i).indexOf(0);if(r===-1)return;const o=kn(wo(s.data,3+i,r));let d;return n==="-->"?d=kn(wo(s.data,4+i+r)):d=Vb(s.data.subarray(4+i+r)),e.mimeType=n,e.pictureType=a,e.description=o,e.data=d,e}function Kb(s){if(s.size<2)return;const e=kn(s.data,!0),t=new Uint8Array(s.data.subarray(e.length+1));return{key:s.type,info:e,data:t.buffer}}function Wb(s){if(s.size<2)return;if(s.type==="TXXX"){let t=1;const i=kn(s.data.subarray(t),!0);t+=i.length+1;const n=kn(s.data.subarray(t));return{key:s.type,info:i,data:n}}const e=kn(s.data.subarray(1));return{key:s.type,info:"",data:e}}function Yb(s){if(s.type==="WXXX"){if(s.size<2)return;let t=1;const i=kn(s.data.subarray(t),!0);t+=i.length+1;const n=kn(s.data.subarray(t));return{key:s.type,info:i,data:n}}const e=kn(s.data);return{key:s.type,info:"",data:e}}function Xb(s){return s.type==="PRIV"?Kb(s):s.type[0]==="W"?Yb(s):s.type==="APIC"?zb(s):Wb(s)}function Jb(s){const e=String.fromCharCode(s[0],s[1],s[2],s[3]),t=Oa(s,4),i=10;return{type:e,size:t,data:s.subarray(i,i+t)}}const Ds=10,Qb=10;function vf(s){let e=0;const t=[];for(;Kl(s,e);){const i=Oa(s,e+6);s[e+5]>>6&1&&(e+=Ds),e+=Ds;const n=e+i;for(;e+Qb<n;){const a=Jb(s.subarray(e)),r=Xb(a);r&&t.push(r),e+=a.size+Ds}ff(s,e)&&(e+=Ds)}return t}function Af(s){return s&&s.key==="PRIV"&&s.info==="com.apple.streaming.transportStreamTimestamp"}function Zb(s){if(s.data.byteLength===8){const e=new Uint8Array(s.data),t=e[3]&1;let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,t&&(i+=4772185884e-2),Math.round(i)}}function Yl(s){const e=vf(s);for(let t=0;t<e.length;t++){const i=e[t];if(Af(i))return Zb(i)}}let Cn=function(s){return s.audioId3="org.id3",s.dateRange="com.apple.quicktime.HLS",s.emsg="https://aomedia.org/emsg/ID3",s.misbklv="urn:misb:KLV:bin:1910.1",s}({});function zn(s="",e=9e4){return{type:s,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Xl{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=On(this.cachedData,e),this.cachedData=null);let i=ps(e,0),n=i?i.length:0,a;const r=this._audioTrack,o=this._id3Track,d=i?Yl(i):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&wt(d))&&(this.basePTS=e1(d,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Cn.audioId3,duration:Number.POSITIVE_INFINITY});n<c;){if(this.canParse(e,n)){const l=this.appendFrame(r,e,n);l?(this.frameIndex++,this.lastPTS=l.sample.pts,n+=l.length,a=n):n=c}else Gb(e,n)?(i=ps(e,n),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Cn.audioId3,duration:Number.POSITIVE_INFINITY}),n+=i.length,a=n):n++;if(n===c&&a!==c){const l=e.slice(a);this.cachedData?this.cachedData=On(this.cachedData,l):this.cachedData=l}}return{audioTrack:r,videoTrack:zn(),id3Track:o,textTrack:zn()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:zn(),id3Track:this._id3Track,textTrack:zn()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const e1=(s,e,t)=>{if(wt(s))return s*90;const i=t?t.baseTime*9e4/t.timescale:0;return e*9e4+i};let Ps=null;const t1=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],i1=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],n1=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],r1=[0,1,1,4];function bf(s,e,t,i,n){if(t+24>e.length)return;const a=Sf(e,t);if(a&&t+a.frameLength<=e.length){const r=a.samplesPerFrame*9e4/a.sampleRate,o=i+n*r,d={unit:e.subarray(t,t+a.frameLength),pts:o,dts:o};return s.config=[],s.channelCount=a.channelCount,s.samplerate=a.sampleRate,s.samples.push(d),{sample:d,length:a.frameLength,missing:0}}}function Sf(s,e){const t=s[e+1]>>3&3,i=s[e+1]>>1&3,n=s[e+2]>>4&15,a=s[e+2]>>2&3;if(t!==1&&n!==0&&n!==15&&a!==3){const r=s[e+2]>>1&1,o=s[e+3]>>6,d=t===3?3-i:i===3?3:4,c=t1[d*14+n-1]*1e3,f=i1[(t===3?0:t===2?1:2)*3+a],p=o===3?1:2,g=n1[t][i],y=r1[i],A=g*8*y,C=Math.floor(g*c/f+r)*y;if(Ps===null){const M=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ps=M?parseInt(M[1]):0}return!!Ps&&Ps<=87&&i===2&&c>=224e3&&o===0&&(s[e+3]=s[e+3]|128),{sampleRate:f,channelCount:p,frameLength:C,samplesPerFrame:A}}}function Jl(s,e){return s[e]===255&&(s[e+1]&224)===224&&(s[e+1]&6)!==0}function Ef(s,e){return e+1<s.length&&Jl(s,e)}function s1(s,e){return Jl(s,e)&&4<=s.length-e}function xf(s,e){if(e+1<s.length&&Jl(s,e)){const i=Sf(s,e);let n=4;i!=null&&i.frameLength&&(n=i.frameLength);const a=e+n;return a===s.length||Ef(s,a)}return!1}class a1 extends Xl{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,n){super.resetInitSegment(e,t,i,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const i=ps(e,0);let n=(i==null?void 0:i.length)||0;if(xf(e,n))return!1;for(let a=e.length;n<a;n++)if(Ub(e,n))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return Nb(e,t)}appendFrame(e,t,i){gf(e,this.observer,t,i,e.manifestCodec);const n=_f(e,t,i,this.basePTS,this.frameIndex);if(n&&n.missing===0)return n}}const Tf=(s,e)=>{let t=0,i=5;e+=i;const n=new Uint32Array(1),a=new Uint32Array(1),r=new Uint8Array(1);for(;i>0;){r[0]=s[e];const o=Math.min(i,8),d=8-o;a[0]=4278190080>>>24+d<<d,n[0]=(r[0]&a[0])>>d,t=t?t<<o|n[0]:n[0],e+=1,i-=o}return t};class o1 extends Xl{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,n){super.resetInitSegment(e,t,i,n),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){const n=Cf(e,t,i,this.basePTS,this.frameIndex);if(n!==-1)return{sample:e.samples[e.samples.length-1],length:n,missing:0}}static probe(e){if(!e)return!1;const t=ps(e,0);if(!t)return!1;const i=t.length;return e[i]===11&&e[i+1]===119&&Yl(t)!==void 0&&Tf(e,i)<16}}function Cf(s,e,t,i,n){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const a=e[t+4]>>6;if(a>=3)return-1;const o=[48e3,44100,32e3][a],d=e[t+4]&63,l=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][d*3+a]*2;if(t+l>e.length)return-1;const f=e[t+6]>>5;let p=0;f===2?p+=2:(f&1&&f!==1&&(p+=2),f&4&&(p+=2));const g=(e[t+6]<<8|e[t+7])>>12-p&1,A=[2,1,2,3,3,4,4,5][f]+g,C=e[t+5]>>3,I=e[t+5]&7,P=new Uint8Array([a<<6|C<<1|I>>2,(I&3)<<6|f<<3|g<<2|d>>4,d<<4&224]),M=1536/o*9e4,G=i+n*M,Z=e.subarray(t,t+l);return s.config=P,s.channelCount=A,s.samplerate=o,s.samples.push({unit:Z,pts:G}),l}class l1 extends Xl{resetInitSegment(e,t,i,n){super.resetInitSegment(e,t,i,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=ps(e,0);let i=(t==null?void 0:t.length)||0;if(t&&e[i]===11&&e[i+1]===119&&Yl(t)!==void 0&&Tf(e,i)<=16)return!1;for(let n=e.length;i<n;i++)if(xf(e,i))return Ri.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return s1(e,t)}appendFrame(e,t,i){if(this.basePTS!==null)return bf(e,t,i,this.basePTS,this.frameIndex)}}const c1=/\/emsg[-/]ID3/i;class d1{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,n){const a=this.videoTrack=zn("video",1),r=this.audioTrack=zn("audio",1),o=this.txtTrack=zn("text",1);if(this.id3Track=zn("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const d=Mh(e);if(d.video){const{id:c,timescale:l,codec:f,supplemental:p}=d.video;a.id=c,a.timescale=o.timescale=l,a.codec=f,a.supplemental=p}if(d.audio){const{id:c,timescale:l,codec:f}=d.audio;r.id=c,r.timescale=l,r.codec=f}o.id=Dh.text,a.sampleDuration=0,a.duration=r.duration=n}resetContiguity(){this.remainderData=null}static probe(e){return oA(e)}demux(e,t){this.timeOffset=t;let i=e;const n=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=On(this.remainderData,e));const o=pA(i);this.remainderData=o.remainder,n.samples=o.valid||new Uint8Array}else n.samples=i;const r=this.extractID3Track(n,t);return a.samples=hd(t,n),{videoTrack:n,audioTrack:this.audioTrack,id3Track:r,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const n=this.extractID3Track(t,this.timeOffset);return i.samples=hd(e,t),{videoTrack:t,audioTrack:zn(),id3Track:n,textTrack:zn()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const n=mi(e.samples,["emsg"]);n&&n.forEach(a=>{const r=gA(a);if(c1.test(r.schemeIdUri)){const o=Yd(r,t);let d=r.eventDuration===4294967295?Number.POSITIVE_INFINITY:r.eventDuration/r.timeScale;d<=.001&&(d=Number.POSITIVE_INFINITY);const c=r.payload;i.samples.push({data:c,len:c.byteLength,dts:o,pts:o,type:Cn.emsg,duration:d})}else if(this.config.enableEmsgKLVMetadata&&r.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=Yd(r,t);i.samples.push({data:r.payload,len:r.payload.byteLength,dts:o,pts:o,type:Cn.misbklv,duration:Number.POSITIVE_INFINITY})}})}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function Yd(s,e){return wt(s.presentationTime)?s.presentationTime/s.timeScale:e+s.presentationTimeDelta/s.timeScale}class u1{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new Gl(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,pr.cbc)}decryptAacSample(e,t,i){const n=e[t].unit;if(n.length<=16)return;const a=n.subarray(16,n.length-n.length%16),r=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(r).then(o=>{const d=new Uint8Array(o);n.set(d,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)}).catch(i)}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length){i();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(t);let n=0;for(let a=32;a<e.length-16;a+=160,n+=16)i.set(e.subarray(a,a+16),n);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let n=0;for(let a=32;a<e.length-16;a+=160,n+=16)e.set(i.subarray(n,n+16),a);return e}decryptAvcSample(e,t,i,n,a){const r=Nh(a.data),o=this.getAvcEncryptedData(r);this.decryptBuffer(o.buffer).then(d=>{a.data=this.getAvcDecryptedUnit(r,d),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,n)}).catch(n)}decryptAvcSamples(e,t,i,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length){n();return}const a=e[t].units;for(;!(i>=a.length);i++){const r=a[i];if(!(r.data.length<=48||r.type!==1&&r.type!==5)&&(this.decryptAvcSample(e,t,i,n,r),!this.decrypter.isSync()))return}}}}class wf{constructor(){this.VideoSample=null}createVideoSample(e,t,i){return{key:e,frame:!1,pts:t,dts:i,units:[],length:0}}getLastNalUnit(e){var t;let i=this.VideoSample,n;if((!i||i.units.length===0)&&(i=e[e.length-1]),(t=i)!=null&&t.units){const a=i.units;n=a[a.length-1]}return n}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const i=t.samples,n=i.length;if(n){const a=i[n-1];e.pts=a.pts,e.dts=a.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,i){const n=t.byteLength;let a=e.naluState||0;const r=a,o=[];let d=0,c,l,f,p=-1,g=0;for(a===-1&&(p=0,g=this.getNALuType(t,0),a=0,d=1);d<n;){if(c=t[d++],!a){a=c?0:1;continue}if(a===1){a=c?0:2;continue}if(!c)a=3;else if(c===1){if(l=d-a-1,p>=0){const y={data:t.subarray(p,l),type:g};o.push(y)}else{const y=this.getLastNalUnit(e.samples);y&&(r&&d<=4-r&&y.state&&(y.data=y.data.subarray(0,y.data.byteLength-r)),l>0&&(y.data=On(y.data,t.subarray(0,l)),y.state=0))}d<n?(f=this.getNALuType(t,d),p=d,g=f,a=0):a=-1}else a=0}if(p>=0&&a>=0){const y={data:t.subarray(p,n),type:g,state:a};o.push(y)}if(o.length===0){const y=this.getLastNalUnit(e.samples);y&&(y.data=On(y.data,t))}return e.naluState=a,o}}class os{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,n=new Uint8Array(4),a=Math.min(4,t);if(a===0)throw new Error("no bytes available");n.set(e.subarray(i,i+a)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=a*8,this.bytesAvailable-=a}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&Ri.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class h1 extends wf{parsePES(e,t,i,n){const a=this.parseNALu(e,i.data,n);let r=this.VideoSample,o,d=!1;i.data=null,r&&a.length&&!e.audFound&&(this.pushAccessUnit(r,e),r=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),a.forEach(c=>{var l,f;switch(c.type){case 1:{let A=!1;o=!0;const C=c.data;if(d&&C.length>4){const I=this.readSliceType(C);(I===2||I===4||I===7||I===9)&&(A=!0)}if(A){var p;(p=r)!=null&&p.frame&&!r.key&&(this.pushAccessUnit(r,e),r=this.VideoSample=null)}r||(r=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),r.frame=!0,r.key=A;break}case 5:o=!0,(l=r)!=null&&l.frame&&!r.key&&(this.pushAccessUnit(r,e),r=this.VideoSample=null),r||(r=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),r.key=!0,r.frame=!0;break;case 6:{o=!0,Fl(c.data,1,i.pts,t.samples);break}case 7:{var g,y;o=!0,d=!0;const A=c.data,C=this.readSPS(A);if(!e.sps||e.width!==C.width||e.height!==C.height||((g=e.pixelRatio)==null?void 0:g[0])!==C.pixelRatio[0]||((y=e.pixelRatio)==null?void 0:y[1])!==C.pixelRatio[1]){e.width=C.width,e.height=C.height,e.pixelRatio=C.pixelRatio,e.sps=[A];const I=A.subarray(1,4);let P="avc1.";for(let M=0;M<3;M++){let G=I[M].toString(16);G.length<2&&(G="0"+G),P+=G}e.codec=P}break}case 8:o=!0,e.pps=[c.data];break;case 9:o=!0,e.audFound=!0,(f=r)!=null&&f.frame&&(this.pushAccessUnit(r,e),r=null),r||(r=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;case 12:o=!0;break;default:o=!1;break}r&&o&&r.units.push(c)}),n&&r&&(this.pushAccessUnit(r,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new os(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let i=8,n=8,a;for(let r=0;r<e;r++)n!==0&&(a=t.readEG(),n=(i+a+256)%256),i=n===0?i:n}readSPS(e){const t=new os(e);let i=0,n=0,a=0,r=0,o,d,c;const l=t.readUByte.bind(t),f=t.readBits.bind(t),p=t.readUEG.bind(t),g=t.readBoolean.bind(t),y=t.skipBits.bind(t),A=t.skipEG.bind(t),C=t.skipUEG.bind(t),I=this.skipScalingList.bind(this);l();const P=l();if(f(5),y(3),l(),C(),P===100||P===110||P===122||P===244||P===44||P===83||P===86||P===118||P===128){const N=p();if(N===3&&y(1),C(),C(),y(1),g())for(d=N!==3?8:12,c=0;c<d;c++)g()&&(c<6?I(16,t):I(64,t))}C();const M=p();if(M===0)p();else if(M===1)for(y(1),A(),A(),o=p(),c=0;c<o;c++)A();C(),y(1);const G=p(),Z=p(),le=f(1);le===0&&y(1),y(1),g()&&(i=p(),n=p(),a=p(),r=p());let W=[1,1];if(g()&&g())switch(l()){case 1:W=[1,1];break;case 2:W=[12,11];break;case 3:W=[10,11];break;case 4:W=[16,11];break;case 5:W=[40,33];break;case 6:W=[24,11];break;case 7:W=[20,11];break;case 8:W=[32,11];break;case 9:W=[80,33];break;case 10:W=[18,11];break;case 11:W=[15,11];break;case 12:W=[64,33];break;case 13:W=[160,99];break;case 14:W=[4,3];break;case 15:W=[3,2];break;case 16:W=[2,1];break;case 255:{W=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((G+1)*16-i*2-n*2),height:(2-le)*(Z+1)*16-(le?2:4)*(a+r),pixelRatio:W}}}class f1 extends wf{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,i,n){const a=this.parseNALu(e,i.data,n);let r=this.VideoSample,o,d=!1;i.data=null,r&&a.length&&!e.audFound&&(this.pushAccessUnit(r,e),r=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),a.forEach(c=>{var l,f;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:r||(r=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),r.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,d){var p;(p=r)!=null&&p.frame&&!r.key&&(this.pushAccessUnit(r,e),r=this.VideoSample=null)}r||(r=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),r.key=!0,r.frame=!0;break;case 19:case 20:o=!0,(l=r)!=null&&l.frame&&!r.key&&(this.pushAccessUnit(r,e),r=this.VideoSample=null),r||(r=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),r.key=!0,r.frame=!0;break;case 39:o=!0,Fl(c.data,2,i.pts,t.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=Pi(e.params,this.readVPS(c.data)),this.initVPS=c.data),e.vps=[c.data];break;case 33:if(o=!0,d=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],c.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const g=this.readSPS(c.data);e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.codec=g.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const y in g.params)e.params[y]=g.params[y]}this.pushParameterSet(e.sps,c.data,e.vps),r||(r=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),r.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const g=this.readPPS(c.data);for(const y in g)e.params[y]=g[y]}this.pushParameterSet(e.pps,c.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(f=r)!=null&&f.frame&&(this.pushAccessUnit(r,e),r=null),r||(r=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;default:o=!1;break}r&&o&&r.units.push(c)}),n&&r&&(this.pushAccessUnit(r,e),this.VideoSample=null)}pushParameterSet(e,t,i){(i&&i[0]===this.initVPS||!i&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let i=0;for(let n=0;n<e.byteLength;n++)n>=2&&e[n]===3&&e[n-1]===0&&e[n-2]===0||(t[i]=e[n],i++);return new Uint8Array(t.buffer,0,i)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new os(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const i=t.readBits(3),n=t.readBoolean();return{numTemporalLayers:i+1,temporalIdNested:n}}readSPS(e){const t=new os(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const i=t.readBits(3);t.readBoolean();const n=t.readBits(2),a=t.readBoolean(),r=t.readBits(5),o=t.readUByte(),d=t.readUByte(),c=t.readUByte(),l=t.readUByte(),f=t.readUByte(),p=t.readUByte(),g=t.readUByte(),y=t.readUByte(),A=t.readUByte(),C=t.readUByte(),I=t.readUByte(),P=[],M=[];for(let qe=0;qe<i;qe++)P.push(t.readBoolean()),M.push(t.readBoolean());if(i>0)for(let qe=i;qe<8;qe++)t.readBits(2);for(let qe=0;qe<i;qe++)P[qe]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),M[qe]&&t.readUByte();t.readUEG();const G=t.readUEG();G==3&&t.skipBits(1);const Z=t.readUEG(),le=t.readUEG(),W=t.readBoolean();let N=0,U=0,O=0,z=0;W&&(N+=t.readUEG(),U+=t.readUEG(),O+=t.readUEG(),z+=t.readUEG());const ce=t.readUEG(),be=t.readUEG(),Le=t.readUEG(),xe=t.readBoolean();for(let qe=xe?0:i;qe<=i;qe++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let bt=0;bt<4;bt++)for(let St=0;St<(bt===3?2:6);St++)if(!t.readBoolean())t.readUEG();else{const Vt=Math.min(64,1<<4+(bt<<1));bt>1&&t.readEG();for(let Kt=0;Kt<Vt;Kt++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const Pe=t.readUEG();let Y=0;for(let qe=0;qe<Pe;qe++){let bt=!1;if(qe!==0&&(bt=t.readBoolean()),bt){qe===Pe&&t.readUEG(),t.readBoolean(),t.readUEG();let St=0;for(let Ue=0;Ue<=Y;Ue++){const Vt=t.readBoolean();let Kt=!1;Vt||(Kt=t.readBoolean()),(Vt||Kt)&&St++}Y=St}else{const St=t.readUEG(),Ue=t.readUEG();Y=St+Ue;for(let Vt=0;Vt<St;Vt++)t.readUEG(),t.readBoolean();for(let Vt=0;Vt<Ue;Vt++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const qe=t.readUEG();for(let bt=0;bt<qe;bt++){for(let St=0;St<Le+4;St++)t.readBits(1);t.readBits(1)}}let S=0,k=1,R=1,w=!0,$=1,X=0;t.readBoolean(),t.readBoolean();let ie=!1;if(t.readBoolean()){if(t.readBoolean()){const It=t.readUByte(),Yt=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Te=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];It>0&&It<16?(k=Yt[It-1],R=Te[It-1]):It===255&&(k=t.readBits(16),R=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),ie=t.readBoolean(),ie&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&($=t.readBits(32),X=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const Te=t.readBoolean(),$e=t.readBoolean();let lt=!1;(Te||$e)&&(lt=t.readBoolean(),lt&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),lt&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let vt=0;vt<=i;vt++){w=t.readBoolean();const _t=w||t.readBoolean();let Wt=!1;_t?t.readEG():Wt=t.readBoolean();const Tt=Wt?1:t.readUEG()+1;if(Te)for(let Ct=0;Ct<Tt;Ct++)t.readUEG(),t.readUEG(),lt&&(t.readUEG(),t.readUEG()),t.skipBits(1);if($e)for(let Ct=0;Ct<Tt;Ct++)t.readUEG(),t.readUEG(),lt&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),S=t.readUEG())}let me=Z,ge=le;if(W){let qe=1,bt=1;G===1?qe=bt=2:G==2&&(qe=2),me=Z-qe*U-qe*N,ge=le-bt*z-bt*O}const Re=n?["A","B","C"][n]:"",Ge=o<<24|d<<16|c<<8|l;let Je=0;for(let qe=0;qe<32;qe++)Je=(Je|(Ge>>qe&1)<<31-qe)>>>0;let st=Je.toString(16);return r===1&&st==="2"&&(st="6"),{codecString:`hvc1.${Re}${r}.${st}.${a?"H":"L"}${I}.B0`,params:{general_tier_flag:a,general_profile_idc:r,general_profile_space:n,general_profile_compatibility_flags:[o,d,c,l],general_constraint_indicator_flags:[f,p,g,y,A,C],general_level_idc:I,bit_depth:ce+8,bit_depth_luma_minus8:ce,bit_depth_chroma_minus8:be,min_spatial_segmentation_idc:S,chroma_format_idc:G,frame_rate:{fixed:w,fps:X/$}},width:me,height:ge,pixelRatio:[k,R]}}readPPS(e){const t=new os(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const n=t.readBoolean(),a=t.readBoolean();let r=1;return a&&n?r=0:a?r=3:n&&(r=2),{parallelismType:r}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const on=188;class ur{constructor(e,t,i,n){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=n,this.videoParser=null}static probe(e,t){const i=ur.syncOffset(e);return i>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${i}`),i!==-1}static syncOffset(e){const t=e.length;let i=Math.min(on*5,t-on)+1,n=0;for(;n<i;){let a=!1,r=-1,o=0;for(let d=n;d<t;d+=on)if(e[d]===71&&(t-d===on||e[d+on]===71)){if(o++,r===-1&&(r=d,r!==0&&(i=Math.min(r+on*99,e.length-on)+1)),a||(a=ll(e,d)===0),a&&o>1&&(r===0&&o>2||d+on>i))return r}else{if(o)return-1;break}n++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:Dh[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,i,n){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=ur.createTrack("video"),this._videoTrack.duration=n,this._audioTrack=ur.createTrack("audio",n),this._id3Track=ur.createTrack("id3"),this._txtTrack=ur.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,n=!1){i||(this.sampleAes=null);let a;const r=this._videoTrack,o=this._audioTrack,d=this._id3Track,c=this._txtTrack;let l=r.pid,f=r.pesData,p=o.pid,g=d.pid,y=o.pesData,A=d.pesData,C=null,I=this.pmtParsed,P=this._pmtId,M=e.length;if(this.remainderData&&(e=On(this.remainderData,e),M=e.length,this.remainderData=null),M<on&&!n)return this.remainderData=e,{audioTrack:o,videoTrack:r,id3Track:d,textTrack:c};const G=Math.max(0,ur.syncOffset(e));M-=(M-G)%on,M<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,M,e.buffer.byteLength-M));let Z=0;for(let W=G;W<M;W+=on)if(e[W]===71){const N=!!(e[W+1]&64),U=ll(e,W),O=(e[W+3]&48)>>4;let z;if(O>1){if(z=W+5+e[W+4],z===W+on)continue}else z=W+4;switch(U){case l:N&&(f&&(a=Fr(f,this.logger))&&(this.readyVideoParser(r.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(r,c,a,!1)),f={data:[],size:0}),f&&(f.data.push(e.subarray(z,W+on)),f.size+=W+on-z);break;case p:if(N){if(y&&(a=Fr(y,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,a);break;case"mp3":this.parseMPEGPES(o,a);break;case"ac3":this.parseAC3PES(o,a);break}y={data:[],size:0}}y&&(y.data.push(e.subarray(z,W+on)),y.size+=W+on-z);break;case g:N&&(A&&(a=Fr(A,this.logger))&&this.parseID3PES(d,a),A={data:[],size:0}),A&&(A.data.push(e.subarray(z,W+on)),A.size+=W+on-z);break;case 0:N&&(z+=e[z]+1),P=this._pmtId=p1(e,z);break;case P:{N&&(z+=e[z]+1);const ce=m1(e,z,this.typeSupported,i,this.observer,this.logger);l=ce.videoPid,l>0&&(r.pid=l,r.segmentCodec=ce.segmentVideoCodec),p=ce.audioPid,p>0&&(o.pid=p,o.segmentCodec=ce.segmentAudioCodec),g=ce.id3Pid,g>0&&(d.pid=g),C!==null&&!I&&(this.logger.warn(`MPEG-TS PMT found at ${W} after unknown PID '${C}'. Backtracking to sync byte @${G} to parse all TS packets.`),C=null,W=G-188),I=this.pmtParsed=!0;break}case 17:case 8191:break;default:C=U;break}}else Z++;Z>0&&cl(this.observer,new Error(`Found ${Z} TS packet/s that do not start with 0x47`),void 0,this.logger),r.pesData=f,o.pesData=y,d.pesData=A;const le={audioTrack:o,videoTrack:r,id3Track:d,textTrack:c};return n&&this.extractRemainingSamples(le),le}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:n,textTrack:a}=e,r=i.pesData,o=t.pesData,d=n.pesData;let c;if(r&&(c=Fr(r,this.logger))?(this.readyVideoParser(i.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(i,a,c,!0),i.pesData=null)):i.pesData=r,o&&(c=Fr(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;d&&(c=Fr(d,this.logger))?(this.parseID3PES(n,c),n.pesData=null):n.pesData=d}demuxSampleAes(e,t,i){const n=this.demux(e,i,!0,!this.config.progressive),a=this.sampleAes=new u1(this.observer,this.config,t);return this.decrypt(n,a)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new h1:e==="hevc"&&(this.videoParser=new f1))}decrypt(e,t){return new Promise(i=>{const{audioTrack:n,videoTrack:a}=e;n.samples&&n.segmentCodec==="aac"?t.decryptAacSamples(n.samples,0,()=>{a.samples?t.decryptAvcSamples(a.samples,0,0,()=>{i(e)}):i(e)}):a.samples&&t.decryptAvcSamples(a.samples,0,0,()=>{i(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let i=0;const n=this.aacOverFlow;let a=t.data;if(n){this.aacOverFlow=null;const f=n.missing,p=n.sample.unit.byteLength;if(f===-1)a=On(n.sample.unit,a);else{const g=p-f;n.sample.unit.set(a.subarray(0,f),g),e.samples.push(n.sample),i=n.missing}}let r,o;for(r=i,o=a.length;r<o-1&&!Ea(a,r);r++);if(r!==i){let f;const p=r<o-1;if(p?f=`AAC PES did not start with ADTS header,offset:${r}`:f="No ADTS header found in AAC PES",cl(this.observer,new Error(f),p,this.logger),!p)return}gf(e,this.observer,a,r,this.audioCodec);let d;if(t.pts!==void 0)d=t.pts;else if(n){const f=yf(e.samplerate);d=n.sample.pts+f}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,l;for(;r<o;)if(l=_f(e,a,r,d,c),r+=l.length,l.missing){this.aacOverFlow=l;break}else for(c++;r<o-1&&!Ea(a,r);r++);}parseMPEGPES(e,t){const i=t.data,n=i.length;let a=0,r=0;const o=t.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;r<n;)if(Ef(i,r)){const d=bf(e,i,r,o,a);if(d)r+=d.length,a++;else break}else r++}parseAC3PES(e,t){{const i=t.data,n=t.pts;if(n===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const a=i.length;let r=0,o=0,d;for(;o<a&&(d=Cf(e,i,o,n,r++))>0;)o+=d}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const i=Pi({},t,{type:this._videoTrack?Cn.emsg:Cn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function ll(s,e){return((s[e+1]&31)<<8)+s[e+2]}function p1(s,e){return(s[e+10]&31)<<8|s[e+11]}function m1(s,e,t,i,n,a){const r={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(s[e+1]&15)<<8|s[e+2],d=e+3+o-4,c=(s[e+10]&15)<<8|s[e+11];for(e+=12+c;e<d;){const l=ll(s,e),f=(s[e+3]&15)<<8|s[e+4];switch(s[e]){case 207:if(!i){ko("ADTS AAC",a);break}case 15:r.audioPid===-1&&(r.audioPid=l);break;case 21:r.id3Pid===-1&&(r.id3Pid=l);break;case 219:if(!i){ko("H.264",a);break}case 27:r.videoPid===-1&&(r.videoPid=l);break;case 3:case 4:!t.mpeg&&!t.mp3?a.log("MPEG audio found, not supported in this browser"):r.audioPid===-1&&(r.audioPid=l,r.segmentAudioCodec="mp3");break;case 193:if(!i){ko("AC-3",a);break}case 129:t.ac3?r.audioPid===-1&&(r.audioPid=l,r.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(r.audioPid===-1&&f>0){let p=e+5,g=f;for(;g>2;){switch(s[p]){case 106:t.ac3!==!0?a.log("AC-3 audio found, not supported in this browser for now"):(r.audioPid=l,r.segmentAudioCodec="ac3");break}const A=s[p+1]+2;p+=A,g-=A}}break;case 194:case 135:return cl(n,new Error("Unsupported EC-3 in M2TS found"),void 0,a),r;case 36:r.videoPid===-1&&(r.videoPid=l,r.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"));break}e+=f+5}return r}function cl(s,e,t,i){i.warn(`parsing error: ${e.message}`),s.emit(V.ERROR,V.ERROR,{type:Gt.MEDIA_ERROR,details:je.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function ko(s,e){e.log(`${s} with AES-128-CBC encryption found in unencrypted stream`)}function Fr(s,e){let t=0,i,n,a,r,o;const d=s.data;if(!s||s.size===0)return null;for(;d[0].length<19&&d.length>1;)d[0]=On(d[0],d[1]),d.splice(1,1);if(i=d[0],(i[0]<<16)+(i[1]<<8)+i[2]===1){if(n=(i[4]<<8)+i[5],n&&n>s.size-6)return null;const l=i[7];l&192&&(r=(i[9]&14)*536870912+(i[10]&255)*4194304+(i[11]&254)*16384+(i[12]&255)*128+(i[13]&254)/2,l&64?(o=(i[14]&14)*536870912+(i[15]&255)*4194304+(i[16]&254)*16384+(i[17]&255)*128+(i[18]&254)/2,r-o>60*9e4&&(e.warn(`${Math.round((r-o)/9e4)}s delta between PTS and DTS, align them`),r=o)):o=r),a=i[8];let f=a+9;if(s.size<=f)return null;s.size-=f;const p=new Uint8Array(s.size);for(let g=0,y=d.length;g<y;g++){i=d[g];let A=i.byteLength;if(f)if(f>A){f-=A;continue}else i=i.subarray(f),A-=f,f=0;p.set(i,t),t+=A}return n&&(n-=a+3),{data:p,pts:r,dts:o,len:n}}return null}class g1{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const lr=Math.pow(2,32)-1;class Ve{static init(){Ve.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in Ve.types)Ve.types.hasOwnProperty(e)&&(Ve.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Ve.HDLR_TYPES={video:t,audio:i};const n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);Ve.STTS=Ve.STSC=Ve.STCO=a,Ve.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ve.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Ve.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Ve.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const r=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),d=new Uint8Array([0,0,0,1]);Ve.FTYP=Ve.box(Ve.types.ftyp,r,d,r,o),Ve.DINF=Ve.box(Ve.types.dinf,Ve.box(Ve.types.dref,n))}static box(e,...t){let i=8,n=t.length;const a=n;for(;n--;)i+=t[n].byteLength;const r=new Uint8Array(i);for(r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(e,4),n=0,i=8;n<a;n++)r.set(t[n],i),i+=t[n].byteLength;return r}static hdlr(e){return Ve.box(Ve.types.hdlr,Ve.HDLR_TYPES[e])}static mdat(e){return Ve.box(Ve.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(lr+1)),n=Math.floor(t%(lr+1));return Ve.box(Ve.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,n>>24,n>>16&255,n>>8&255,n&255,85,196,0,0]))}static mdia(e){return Ve.box(Ve.types.mdia,Ve.mdhd(e.timescale||0,e.duration||0),Ve.hdlr(e.type),Ve.minf(e))}static mfhd(e){return Ve.box(Ve.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?Ve.box(Ve.types.minf,Ve.box(Ve.types.smhd,Ve.SMHD),Ve.DINF,Ve.stbl(e)):Ve.box(Ve.types.minf,Ve.box(Ve.types.vmhd,Ve.VMHD),Ve.DINF,Ve.stbl(e))}static moof(e,t,i){return Ve.box(Ve.types.moof,Ve.mfhd(e),Ve.traf(i,t))}static moov(e){let t=e.length;const i=[];for(;t--;)i[t]=Ve.trak(e[t]);return Ve.box.apply(null,[Ve.types.moov,Ve.mvhd(e[0].timescale||0,e[0].duration||0)].concat(i).concat(Ve.mvex(e)))}static mvex(e){let t=e.length;const i=[];for(;t--;)i[t]=Ve.trex(e[t]);return Ve.box.apply(null,[Ve.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(lr+1)),n=Math.floor(t%(lr+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,n>>24,n>>16&255,n>>8&255,n&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ve.box(Ve.types.mvhd,a)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let n,a;for(n=0;n<t.length;n++)a=t[n].flags,i[n+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return Ve.box(Ve.types.sdtp,i)}static stbl(e){return Ve.box(Ve.types.stbl,Ve.stsd(e),Ve.box(Ve.types.stts,Ve.STTS),Ve.box(Ve.types.stsc,Ve.STSC),Ve.box(Ve.types.stsz,Ve.STSZ),Ve.box(Ve.types.stco,Ve.STCO))}static avc1(e){let t=[],i=[],n,a,r;for(n=0;n<e.sps.length;n++)a=e.sps[n],r=a.byteLength,t.push(r>>>8&255),t.push(r&255),t=t.concat(Array.prototype.slice.call(a));for(n=0;n<e.pps.length;n++)a=e.pps[n],r=a.byteLength,i.push(r>>>8&255),i.push(r&255),i=i.concat(Array.prototype.slice.call(a));const o=Ve.box(Ve.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(i))),d=e.width,c=e.height,l=e.pixelRatio[0],f=e.pixelRatio[1];return Ve.box(Ve.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,d&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,Ve.box(Ve.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ve.box(Ve.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,l&255,f>>24,f>>16&255,f>>8&255,f&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return Ve.box(Ve.types.mp4a,Ve.audioStsd(e),Ve.box(Ve.types.esds,Ve.esds(e)))}static mp3(e){return Ve.box(Ve.types[".mp3"],Ve.audioStsd(e))}static ac3(e){return Ve.box(Ve.types["ac-3"],Ve.audioStsd(e),Ve.box(Ve.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return Ve.box(Ve.types.stsd,Ve.STSD,Ve.mp4a(e));if(t==="ac3"&&e.config)return Ve.box(Ve.types.stsd,Ve.STSD,Ve.ac3(e));if(t==="mp3"&&e.codec==="mp3")return Ve.box(Ve.types.stsd,Ve.STSD,Ve.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return Ve.box(Ve.types.stsd,Ve.STSD,Ve.avc1(e));if(t==="hevc"&&e.vps)return Ve.box(Ve.types.stsd,Ve.STSD,Ve.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,i=(e.duration||0)*(e.timescale||0),n=e.width||0,a=e.height||0,r=Math.floor(i/(lr+1)),o=Math.floor(i%(lr+1));return Ve.box(Ve.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,n&255,0,0,a>>8&255,a&255,0,0]))}static traf(e,t){const i=Ve.sdtp(e),n=e.id,a=Math.floor(t/(lr+1)),r=Math.floor(t%(lr+1));return Ve.box(Ve.types.traf,Ve.box(Ve.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255])),Ve.box(Ve.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,r>>24,r>>16&255,r>>8&255,r&255])),Ve.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,Ve.box(Ve.types.trak,Ve.tkhd(e),Ve.mdia(e))}static trex(e){const t=e.id;return Ve.box(Ve.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],n=i.length,a=12+16*n,r=new Uint8Array(a);let o,d,c,l,f,p;for(t+=8+a,r.set([e.type==="video"?1:0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,n&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<n;o++)d=i[o],c=d.duration,l=d.size,f=d.flags,p=d.cts,r.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,l>>>24&255,l>>>16&255,l>>>8&255,l&255,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|f.isNonSync,f.degradPrio&61440,f.degradPrio&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*o);return Ve.box(Ve.types.trun,r)}static initSegment(e){Ve.types||Ve.init();const t=Ve.moov(e);return On(Ve.FTYP,t)}static hvc1(e){const t=e.params,i=[e.vps,e.sps,e.pps],n=4,a=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),n-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),i.length]);let r=a.length;for(let y=0;y<i.length;y+=1){r+=3;for(let A=0;A<i[y].length;A+=1)r+=2+i[y][A].length}const o=new Uint8Array(r);o.set(a,0),r=a.length;const d=i.length-1;for(let y=0;y<i.length;y+=1){o.set(new Uint8Array([32+y|(y===d?128:0),0,i[y].length]),r),r+=3;for(let A=0;A<i[y].length;A+=1)o.set(new Uint8Array([i[y][A].length>>8,i[y][A].length&255]),r),r+=2,o.set(i[y][A],r),r+=i[y][A].length}const c=Ve.box(Ve.types.hvcC,o),l=e.width,f=e.height,p=e.pixelRatio[0],g=e.pixelRatio[1];return Ve.box(Ve.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,f>>8&255,f&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,Ve.box(Ve.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ve.box(Ve.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,p&255,g>>24,g>>16&255,g>>8&255,g&255])))}}Ve.types=void 0;Ve.HDLR_TYPES=void 0;Ve.STTS=void 0;Ve.STSC=void 0;Ve.STCO=void 0;Ve.STSZ=void 0;Ve.VMHD=void 0;Ve.SMHD=void 0;Ve.STSD=void 0;Ve.FTYP=void 0;Ve.DINF=void 0;const kf=9e4;function Ql(s,e,t=1,i=!1){const n=s*e*t;return i?Math.round(n):n}function y1(s,e,t=1,i=!1){return Ql(s,e,1/t,i)}function rs(s,e=!1){return Ql(s,1e3,1/kf,e)}function _1(s,e=1){return Ql(s,kf,1/e)}function Xd(s){const{baseTime:e,timescale:t,trackId:i}=s;return`${e/t} (${e}/${t}) trackId: ${i}`}const v1=10*1e3,A1=1024,b1=1152,S1=1536;let Nr=null,Io=null;function Jd(s,e,t,i){return{duration:e,size:t,cts:i,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:s?2:1,isNonSync:s?0:1}}}class ta extends Mn{constructor(e,t,i,n){if(super("mp4-remuxer",n),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,Nr===null){const r=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Nr=r?parseInt(r[1]):0}if(Io===null){const a=navigator.userAgent.match(/Safari\/(\d+)/i);Io=a?parseInt(a[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&Xd(t)} > ${e&&Xd(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const i=e[0].pts,n=e.reduce((a,r)=>{let o=r.pts,d=o-a;return d<-4294967296&&(t=!0,o=Tn(o,i),d=o-a),d>0?a:o},i);return t&&this.debug("PTS rollover detected"),n}remux(e,t,i,n,a,r,o,d){let c,l,f,p,g,y,A=a,C=a;const I=e.pid>-1,P=t.pid>-1,M=t.samples.length,G=e.samples.length>0,Z=o&&M>0||M>1;if((!I||G)&&(!P||Z)||this.ISGenerated||o){if(this.ISGenerated){var W,N,U,O;const Le=this.videoTrackConfig;(Le&&(t.width!==Le.width||t.height!==Le.height||((W=t.pixelRatio)==null?void 0:W[0])!==((N=Le.pixelRatio)==null?void 0:N[0])||((U=t.pixelRatio)==null?void 0:U[1])!==((O=Le.pixelRatio)==null?void 0:O[1]))||!Le&&Z||this.nextAudioTs===null&&G)&&this.resetInitSegment()}this.ISGenerated||(f=this.generateIS(e,t,a,r));const z=this.isVideoContiguous;let ce=-1,be;if(Z&&(ce=E1(t.samples),!z&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,ce>0){this.warn(`Dropped ${ce} out of ${M} video samples due to a missing keyframe`);const Le=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(ce),t.dropped+=ce,C+=(t.samples[0].pts-Le)/t.inputTimeScale,be=C}else ce===-1&&(this.warn(`No keyframe found out of ${M} video samples`),y=!1);if(this.ISGenerated){if(G&&Z){const Le=this.getVideoStartPts(t.samples),ve=(Tn(e.samples[0].pts,Le)-Le)/t.inputTimeScale;A+=Math.max(0,ve),C+=Math.max(0,-ve)}if(G){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),f=this.generateIS(e,t,a,r)),l=this.remuxAudio(e,A,this.isAudioContiguous,r,P||Z||d===Mt.AUDIO?C:void 0),Z){const Le=l?l.endPTS-l.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),f=this.generateIS(e,t,a,r)),c=this.remuxVideo(t,C,z,Le)}}else Z&&(c=this.remuxVideo(t,C,z,0));c&&(c.firstKeyFrame=ce,c.independent=ce!==-1,c.firstKeyFramePTS=be)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(g=If(i,a,this._initPTS,this._initDTS)),n.samples.length&&(p=Rf(n,a,this._initPTS))),{audio:l,video:c,initSegment:f,independent:y,text:p,id3:g}}computeInitPts(e,t,i,n){const a=Math.round(i*t);let r=Tn(e,a);if(r<a+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(a-r)/t} ${n}`);r<a+t;)r+=8589934592;return r-a}generateIS(e,t,i,n){const a=e.samples,r=t.samples,o=this.typeSupported,d={},c=this._initPTS;let l=!c||n,f="audio/mp4",p,g,y,A=-1;if(l&&(p=g=1/0),e.config&&a.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(f="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}d.audio={id:"audio",container:f,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):Ve.initSegment([e]),metadata:{channelCount:e.channelCount}},l&&(A=e.id,y=e.inputTimeScale,!c||y!==c.timescale?p=g=this.computeInitPts(a[0].pts,y,i,"audio"):l=!1)}if(t.sps&&t.pps&&r.length){if(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Ve.initSegment([t]),metadata:{width:t.width,height:t.height}},l)if(A=t.id,y=t.inputTimeScale,!c||y!==c.timescale){const C=this.getVideoStartPts(r),I=Tn(r[0].dts,C),P=this.computeInitPts(I,y,i,"video"),M=this.computeInitPts(C,y,i,"video");g=Math.min(g,P),p=Math.min(p,M)}else l=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(d).length)return this.ISGenerated=!0,l?(c&&this.warn(`Timestamps at playlist time: ${n?"":"~"}${i} ${p/y} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${i} offset: ${p/y} (${p}/${y}) trackId: ${A}`),this._initPTS={baseTime:p,timescale:y,trackId:A},this._initDTS={baseTime:g,timescale:y,trackId:A}):p=y=void 0,{tracks:d,initPTS:p,timescale:y,trackId:A}}remuxVideo(e,t,i,n){const a=e.inputTimeScale,r=e.samples,o=[],d=r.length,c=this._initPTS,l=c.baseTime*a/c.timescale;let f=this.nextVideoTs,p=8,g=this.videoSampleDuration,y,A,C=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY,P=!1;if(!i||f===null){const S=l+t*a,k=r[0].pts-Tn(r[0].dts,r[0].pts);Nr&&f!==null&&Math.abs(S-k-(f+l))<15e3?i=!0:f=S-k-l}const M=f+l;for(let S=0;S<d;S++){const k=r[S];k.pts=Tn(k.pts,M),k.dts=Tn(k.dts,M),k.dts<r[S>0?S-1:S].dts&&(P=!0)}P&&r.sort(function(S,k){const R=S.dts-k.dts,w=S.pts-k.pts;return R||w}),y=r[0].dts,A=r[r.length-1].dts;const G=A-y,Z=G?Math.round(G/(d-1)):g||e.inputTimeScale/30;if(i){const S=y-M,k=S>Z,R=S<-1;if((k||R)&&(k?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${rs(S,!0)} ms (${S}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${rs(-S,!0)} ms (${S}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!R||M>=r[0].pts||Nr)){y=M;const w=r[0].pts-S;if(k)r[0].dts=y,r[0].pts=w;else{let $=!0;for(let X=0;X<r.length&&!(r[X].dts>w&&$);X++){const ie=r[X].pts;if(r[X].dts-=S,r[X].pts-=S,X<r.length-1){const se=r[X+1].pts,me=r[X].pts,ge=se<=me,Re=se<=ie;$=ge==Re}}}this.log(`Video: Initial PTS/DTS adjusted: ${rs(w,!0)}/${rs(y,!0)}, delta: ${rs(S,!0)} ms`)}}y=Math.max(0,y);let le=0,W=0,N=y;for(let S=0;S<d;S++){const k=r[S],R=k.units,w=R.length;let $=0;for(let X=0;X<w;X++)$+=R[X].data.length;W+=$,le+=w,k.length=$,k.dts<N?(k.dts=N,N+=Z/4|0||1):N=k.dts,C=Math.min(k.pts,C),I=Math.max(k.pts,I)}A=r[d-1].dts;const U=W+4*le+8;let O;try{O=new Uint8Array(U)}catch(S){this.observer.emit(V.ERROR,V.ERROR,{type:Gt.MUX_ERROR,details:je.REMUX_ALLOC_ERROR,fatal:!1,error:S,bytes:U,reason:`fail allocating video mdat ${U}`});return}const z=new DataView(O.buffer);z.setUint32(0,U),O.set(Ve.types.mdat,4);let ce=!1,be=Number.POSITIVE_INFINITY,Le=Number.POSITIVE_INFINITY,xe=Number.NEGATIVE_INFINITY,ve=Number.NEGATIVE_INFINITY;for(let S=0;S<d;S++){const k=r[S],R=k.units;let w=0;for(let ie=0,se=R.length;ie<se;ie++){const me=R[ie],ge=me.data,Re=me.data.byteLength;z.setUint32(p,Re),p+=4,O.set(ge,p),p+=Re,w+=4+Re}let $;if(S<d-1)g=r[S+1].dts-k.dts,$=r[S+1].pts-k.pts;else{const ie=this.config,se=S>0?k.dts-r[S-1].dts:Z;if($=S>0?k.pts-r[S-1].pts:Z,ie.stretchShortVideoTrack&&this.nextAudioTs!==null){const me=Math.floor(ie.maxBufferHole*a),ge=(n?C+n*a:this.nextAudioTs+l)-k.pts;ge>me?(g=ge-se,g<0?g=se:ce=!0,this.log(`It is approximately ${ge/90} ms to the next segment; using duration ${g/90} ms for the last video frame.`)):g=se}else g=se}const X=Math.round(k.pts-k.dts);be=Math.min(be,g),xe=Math.max(xe,g),Le=Math.min(Le,$),ve=Math.max(ve,$),o.push(Jd(k.key,g,w,X))}if(o.length){if(Nr){if(Nr<70){const S=o[0].flags;S.dependsOn=2,S.isNonSync=0}}else if(Io&&ve-Le<xe-be&&Z/xe<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let S=y;for(let k=0,R=o.length;k<R;k++){const w=S+o[k].duration,$=S+o[k].cts;if(k<R-1){const X=w+o[k+1].cts;o[k].duration=X-$}else o[k].duration=k?o[k-1].duration:Z;o[k].cts=0,S=w}}}g=ce||!g?Z:g;const ze=A+g;this.nextVideoTs=f=ze-l,this.videoSampleDuration=g,this.isVideoContiguous=!0;const b={data1:Ve.moof(e.sequenceNumber++,y,Pi(e,{samples:o})),data2:O,startPTS:(C-l)/a,endPTS:(I+g-l)/a,startDTS:(y-l)/a,endDTS:f/a,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,b}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return b1;case"ac3":return S1;default:return A1}}remuxAudio(e,t,i,n,a){const r=e.inputTimeScale,o=e.samplerate?e.samplerate:r,d=r/o,c=this.getSamplesPerFrame(e),l=c*d,f=this._initPTS,p=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,g=[],y=a!==void 0;let A=e.samples,C=p?0:8,I=this.nextAudioTs||-1;const P=f.baseTime*r/f.timescale,M=P+t*r;if(this.isAudioContiguous=i=i||A.length&&I>0&&(n&&Math.abs(M-(I+P))<9e3||Math.abs(Tn(A[0].pts,M)-(I+P))<20*l),A.forEach(function(ve){ve.pts=Tn(ve.pts,M)}),!i||I<0){const ve=A.length;if(A=A.filter(ze=>ze.pts>=0),ve!==A.length&&this.warn(`Removed ${A.length-ve} of ${ve} samples (initPTS ${P} / ${r})`),!A.length)return;a===0?I=0:n&&!y?I=Math.max(0,M-P):I=A[0].pts-P}if(e.segmentCodec==="aac"){const ve=this.config.maxAudioFramesDrift;for(let ze=0,Pe=I+P;ze<A.length;ze++){const Y=A[ze],b=Y.pts,S=b-Pe,k=Math.abs(1e3*S/r);if(S<=-ve*l&&y)ze===0&&(this.warn(`Audio frame @ ${(b/r).toFixed(3)}s overlaps marker by ${Math.round(1e3*S/r)} ms.`),this.nextAudioTs=I=b-P,Pe=b);else if(S>=ve*l&&k<v1&&y){let R=Math.round(S/l);for(Pe=b-R*l;Pe<0&&R&&l;)R--,Pe+=l;ze===0&&(this.nextAudioTs=I=Pe-P),this.warn(`Injecting ${R} audio frames @ ${((Pe-P)/r).toFixed(3)}s due to ${Math.round(1e3*S/r)} ms gap.`);for(let w=0;w<R;w++){let $=g1.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);$||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),$=Y.unit.subarray()),A.splice(ze,0,{unit:$,pts:Pe}),Pe+=l,ze++}}Y.pts=Pe,Pe+=l}}let G=null,Z=null,le,W=0,N=A.length;for(;N--;)W+=A[N].unit.byteLength;for(let ve=0,ze=A.length;ve<ze;ve++){const Pe=A[ve],Y=Pe.unit;let b=Pe.pts;if(Z!==null){const k=g[ve-1];k.duration=Math.round((b-Z)/d)}else if(i&&e.segmentCodec==="aac"&&(b=I+P),G=b,W>0){W+=C;try{le=new Uint8Array(W)}catch(k){this.observer.emit(V.ERROR,V.ERROR,{type:Gt.MUX_ERROR,details:je.REMUX_ALLOC_ERROR,fatal:!1,error:k,bytes:W,reason:`fail allocating audio mdat ${W}`});return}p||(new DataView(le.buffer).setUint32(0,W),le.set(Ve.types.mdat,4))}else return;le.set(Y,C);const S=Y.byteLength;C+=S,g.push(Jd(!0,c,S,0)),Z=b}const U=g.length;if(!U)return;const O=g[g.length-1];I=Z-P,this.nextAudioTs=I+d*O.duration;const z=p?new Uint8Array(0):Ve.moof(e.sequenceNumber++,G/d,Pi({},e,{samples:g}));e.samples=[];const ce=(G-P)/r,be=this.nextAudioTs/r,xe={data1:z,data2:le,startPTS:ce,endPTS:be,startDTS:ce,endDTS:be,type:"audio",hasAudio:!0,hasVideo:!1,nb:U};return this.isAudioContiguous=!0,xe}}function Tn(s,e){let t;if(e===null)return s;for(e<s?t=-8589934592:t=8589934592;Math.abs(s-e)>4294967296;)s+=t;return s}function E1(s){for(let e=0;e<s.length;e++)if(s[e].key)return e;return-1}function If(s,e,t,i){const n=s.samples.length;if(!n)return;const a=s.inputTimeScale;for(let o=0;o<n;o++){const d=s.samples[o];d.pts=Tn(d.pts-t.baseTime*a/t.timescale,e*a)/a,d.dts=Tn(d.dts-i.baseTime*a/i.timescale,e*a)/a}const r=s.samples;return s.samples=[],{samples:r}}function Rf(s,e,t){const i=s.samples.length;if(!i)return;const n=s.inputTimeScale;for(let r=0;r<i;r++){const o=s.samples[r];o.pts=Tn(o.pts-t.baseTime*n/t.timescale,e*n)/n}s.samples.sort((r,o)=>r.pts-o.pts);const a=s.samples;return s.samples=[],{samples:a}}class x1 extends Mn{constructor(e,t,i,n){super("passthrough-remuxer",n),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,i,n){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(e,n),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:i,videoCodec:n}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:a,video:r}=this.initData=Mh(e);if(t)uA(e,t);else{const d=a||r;d!=null&&d.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${d.codec}")!`)}a&&(i=Qd(a,Fi.AUDIO,this)),r&&(n=Qd(r,Fi.VIDEO,this));const o={};a&&r?o.audiovideo={container:"video/mp4",codec:i+","+n,supplemental:r.supplemental,encrypted:r.encrypted,initSegment:e,id:"main"}:a?o.audio={container:"audio/mp4",codec:i,encrypted:a.encrypted,initSegment:e,id:"audio"}:r?o.video={container:"video/mp4",codec:n,supplemental:r.supplemental,encrypted:r.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,t,i,n,a,r){var o,d;let{initPTS:c,lastEndTime:l}=this;const f={audio:void 0,video:void 0,text:n,id3:i,initSegment:void 0};wt(l)||(l=this.lastEndTime=a||0);const p=t.samples;if(!p.length)return f;const g={initPTS:void 0,timescale:void 0,trackId:void 0};let y=this.initData;if((o=y)!=null&&o.length||(this.generateInitSegment(p),y=this.initData),!((d=y)!=null&&d.length))return this.warn("Failed to generate initSegment."),f;this.emitInitSegment&&(g.tracks=this.initTracks,this.emitInitSegment=!1);const A=fA(p,y,this),C=y.audio?A[y.audio.id]:null,I=y.video?A[y.video.id]:null,P=Os(I,1/0),M=Os(C,1/0),G=Os(I,0,!0),Z=Os(C,0,!0);let le=a,W=0;const N=C&&(!I||!c&&M<P||c&&c.trackId===y.audio.id),U=N?C:I;if(U){const Pe=U.timescale,Y=U.start-a*Pe,b=N?y.audio.id:y.video.id;le=U.start/Pe,W=N?Z-M:G-P,(r||!c)&&(T1(c,le,a,W)||Pe!==c.timescale)&&(c&&this.warn(`Timestamps at playlist time: ${r?"":"~"}${a} ${Y/Pe} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${a} offset: ${le-a} (${Y}/${Pe}) trackId: ${b}`),c=null,g.initPTS=Y,g.timescale=Pe,g.trackId=b)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${a}`);c?(g.initPTS=c.baseTime,g.timescale=c.timescale,g.trackId=c.trackId):((!g.timescale||g.trackId===void 0||g.initPTS===void 0)&&(this.warn("Could not set initPTS"),g.initPTS=le,g.timescale=1,g.trackId=-1),this.initPTS=c={baseTime:g.initPTS,timescale:g.timescale,trackId:g.trackId});const O=le-c.baseTime/c.timescale,z=O+W;W>0?this.lastEndTime=z:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const ce=!!y.audio,be=!!y.video;let Le="";ce&&(Le+="audio"),be&&(Le+="video");const xe=(y.audio?y.audio.encrypted:!1)||(y.video?y.video.encrypted:!1),ve={data1:p,startPTS:O,startDTS:O,endPTS:z,endDTS:z,type:Le,hasAudio:ce,hasVideo:be,nb:1,dropped:0,encrypted:xe};f.audio=ce&&!be?ve:void 0,f.video=be?ve:void 0;const ze=I==null?void 0:I.sampleCount;if(ze){const Pe=I.keyFrameIndex,Y=Pe!==-1;ve.nb=ze,ve.dropped=Pe===0||this.isVideoContiguous?0:Y?Pe:ze,ve.independent=Y,ve.firstKeyFrame=Pe,Y&&I.keyFrameStart&&(ve.firstKeyFramePTS=(I.keyFrameStart-c.baseTime)/c.timescale),this.isVideoContiguous||(f.independent=Y),this.isVideoContiguous||(this.isVideoContiguous=Y),ve.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${Pe}/${ze} dropped: ${ve.dropped} start: ${ve.firstKeyFramePTS||"NA"}`)}return f.initSegment=g,f.id3=If(i,a,c,c),n.samples.length&&(f.text=Rf(n,a,c)),f}}function Os(s,e,t=!1){return(s==null?void 0:s.start)!==void 0?(s.start+(t?s.duration:0))/s.timescale:e}function T1(s,e,t,i){if(s===null)return!0;const n=Math.max(i,1),a=e-s.baseTime/s.timescale;return Math.abs(a-t)>n}function Qd(s,e,t){const i=s.codec;return i&&i.length>4?i:e===Fi.AUDIO?i==="ec-3"||i==="ac-3"||i==="alac"?i:i==="fLaC"||i==="Opus"?ma(i,!1):(t.warn(`Unhandled audio codec "${i}" in mp4 MAP`),i||"mp4a"):(t.warn(`Unhandled video codec "${i}" in mp4 MAP`),i||"avc1")}let rr;try{rr=self.performance.now.bind(self.performance)}catch{rr=Date.now}const ia=[{demux:d1,remux:x1},{demux:ur,remux:ta},{demux:a1,remux:ta},{demux:l1,remux:ta}];ia.splice(2,0,{demux:o1,remux:ta});class Zd{constructor(e,t,i,n,a,r){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.id=a,this.logger=r}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,n){const a=i.transmuxing;a.executeStart=rr();let r=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:d}=this;n&&(this.currentTransmuxState=n);const{contiguous:c,discontinuity:l,trackSwitch:f,accurateTimeOffset:p,timeOffset:g,initSegmentChange:y}=n||o,{audioCodec:A,videoCodec:C,defaultInitPts:I,duration:P,initSegmentData:M}=d,G=C1(r,t);if(G&&Kr(G.method)){const N=this.getDecrypter(),U=jl(G.method);if(N.isSync()){let O=N.softwareDecrypt(r,G.key.buffer,G.iv.buffer,U);if(i.part>-1){const ce=N.flush();O=ce&&ce.buffer}if(!O)return a.executeEnd=rr(),Ro(i);r=new Uint8Array(O)}else return this.asyncResult=!0,this.decryptionPromise=N.webCryptoDecrypt(r,G.key.buffer,G.iv.buffer,U).then(O=>{const z=this.push(O,null,i);return this.decryptionPromise=null,z}),this.decryptionPromise}const Z=this.needsProbing(l,f);if(Z){const N=this.configureTransmuxer(r);if(N)return this.logger.warn(`[transmuxer] ${N.message}`),this.observer.emit(V.ERROR,V.ERROR,{type:Gt.MEDIA_ERROR,details:je.FRAG_PARSING_ERROR,fatal:!1,error:N,reason:N.message}),a.executeEnd=rr(),Ro(i)}(l||f||y||Z)&&this.resetInitSegment(M,A,C,P,t),(l||y||Z)&&this.resetInitialTimestamp(I),c||this.resetContiguity();const le=this.transmux(r,G,g,p,i);this.asyncResult=ms(le);const W=this.currentTransmuxState;return W.contiguous=!0,W.discontinuity=!1,W.trackSwitch=!1,a.executeEnd=rr(),le}flush(e){const t=e.transmuxing;t.executeStart=rr();const{decrypter:i,currentTransmuxState:n,decryptionPromise:a}=this;if(a)return this.asyncResult=!0,a.then(()=>this.flush(e));const r=[],{timeOffset:o}=n;if(i){const f=i.flush();f&&r.push(this.push(f.buffer,null,e))}const{demuxer:d,remuxer:c}=this;if(!d||!c){t.executeEnd=rr();const f=[Ro(e)];return this.asyncResult?Promise.resolve(f):f}const l=d.flush(o);return ms(l)?(this.asyncResult=!0,l.then(f=>(this.flushRemux(r,f,e),r))):(this.flushRemux(r,l,e),this.asyncResult?Promise.resolve(r):r)}flushRemux(e,t,i){const{audioTrack:n,videoTrack:a,id3Track:r,textTrack:o}=t,{accurateTimeOffset:d,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${i.sn}${i.part>-1?" part: "+i.part:""} of ${this.id===Mt.MAIN?"level":"track"} ${i.level}`);const l=this.remuxer.remux(n,a,r,o,c,d,!0,this.id);e.push({remuxResult:l,chunkMeta:i}),i.transmuxing.executeEnd=rr()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;!t||!i||(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,n,a){const{demuxer:r,remuxer:o}=this;!r||!o||(r.resetInitSegment(e,t,i,n),o.resetInitSegment(e,t,i,a))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,n,a){let r;return t&&t.method==="SAMPLE-AES"?r=this.transmuxSampleAes(e,t,i,n,a):r=this.transmuxUnencrypted(e,i,n,a),r}transmuxUnencrypted(e,t,i,n){const{audioTrack:a,videoTrack:r,id3Track:o,textTrack:d}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(a,r,o,d,t,i,!1,this.id),chunkMeta:n}}transmuxSampleAes(e,t,i,n,a){return this.demuxer.demuxSampleAes(e,t,i).then(r=>({remuxResult:this.remuxer.remux(r.audioTrack,r.videoTrack,r.id3Track,r.textTrack,i,n,!1,this.id),chunkMeta:a}))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:n}=this;let a;for(let f=0,p=ia.length;f<p;f++){var r;if((r=ia[f].demux)!=null&&r.probe(e,this.logger)){a=ia[f];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,d=this.remuxer,c=a.remux,l=a.demux;(!d||!(d instanceof c))&&(this.remuxer=new c(i,t,n,this.logger)),(!o||!(o instanceof l))&&(this.demuxer=new l(i,t,n,this.logger),this.probe=l.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Gl(this.config)),e}}function C1(s,e){let t=null;return s.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const Ro=s=>({remuxResult:{},chunkMeta:s});function ms(s){return"then"in s&&s.then instanceof Function}class w1{constructor(e,t,i,n,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=n,this.defaultInitPts=a||null}}class k1{constructor(e,t,i,n,a,r){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=n,this.timeOffset=a,this.initSegmentChange=r}}let eu=0;class Lf{constructor(e,t,i,n){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=eu++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=d=>{const c=d.data,l=this.hls;if(!(!l||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var f;const p=(f=this.workerContext)==null?void 0:f.objectURL;p&&self.URL.revokeObjectURL(p);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{l.logger[c.data.logType]&&l.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,l.trigger(c.event,c.data);break}}},this.onWorkerError=d=>{if(!this.hls)return;const c=new Error(`${d.message}  (${d.filename}:${d.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(V.ERROR,{type:Gt.OTHER_ERROR,details:je.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};const a=e.config;this.hls=e,this.id=t,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=i,this.onFlush=n;const r=(d,c)=>{c=c||{},c.frag=this.frag||void 0,d===V.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(d,c)};this.observer=new zl,this.observer.on(V.FRAG_DECRYPTED,r),this.observer.on(V.ERROR,r);const o=md(a.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const d=this.hls.logger;if(a.workerPath||Db()){try{a.workerPath?(d.log(`loading Web Worker ${a.workerPath} for "${t}"`),this.workerContext=Ob(a.workerPath)):(d.log(`injecting Web Worker for "${t}"`),this.workerContext=Pb());const{worker:l}=this.workerContext;l.addEventListener("message",this.onWorkerMessage),l.addEventListener("error",this.onWorkerError),l.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:Ni(a)})}catch(l){d.warn(`Error setting up "${t}" Web Worker, fallback to inline`,l),this.terminateWorker(),this.error=null,this.transmuxer=new Zd(this.observer,o,a,"",t,e.logger)}return}}this.transmuxer=new Zd(this.observer,o,a,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=eu++;const t=this.hls.config,i=md(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:i,id:this.id,config:Ni(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),Mb(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,i,n,a,r,o,d,c,l){var f,p;c.transmuxing.start=self.performance.now();const{instanceNo:g,transmuxer:y}=this,A=r?r.start:a.start,C=a.decryptdata,I=this.frag,P=!(I&&a.cc===I.cc),M=!(I&&c.level===I.level),G=I?c.sn-I.sn:-1,Z=this.part?c.part-this.part.index:-1,le=G===0&&c.id>1&&c.id===(I==null?void 0:I.stats.chunkCount),W=!M&&(G===1||G===0&&(Z===1||le&&Z<=0)),N=self.performance.now();(M||G||a.stats.parsing.start===0)&&(a.stats.parsing.start=N),r&&(Z||!W)&&(r.stats.parsing.start=N);const U=!(I&&((f=a.initSegment)==null?void 0:f.url)===((p=I.initSegment)==null?void 0:p.url)),O=new k1(P,W,d,M,A,U);if(!W||P||U){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${a.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===Mt.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${P}
        trackSwitch: ${M}
        contiguous: ${W}
        accurateTimeOffset: ${d}
        timeOffset: ${A}
        initSegmentChange: ${U}`);const z=new w1(i,n,t,o,l);this.configureTransmuxer(z)}if(this.frag=a,this.part=r,this.workerContext)this.workerContext.worker.postMessage({instanceNo:g,cmd:"demux",data:e,decryptdata:C,chunkMeta:c,state:O},e instanceof ArrayBuffer?[e]:[]);else if(y){const z=y.push(e,C,c,O);ms(z)?z.then(ce=>{this.handleTransmuxComplete(ce)}).catch(ce=>{this.transmuxerError(ce,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(z)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:i}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(i){const n=i.flush(e);ms(n)?n.then(a=>{this.handleFlushResult(a,e)}).catch(a=>{this.transmuxerError(a,e,"transmuxer-interface flush error")}):this.handleFlushResult(n,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:i}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):i&&i.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const tu=100;class I1 extends ql{constructor(e,t,i){super(e,t,i,"audio-stream-controller",Mt.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(V.LEVEL_LOADED,this.onLevelLoaded,this),e.on(V.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(V.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(V.BUFFER_RESET,this.onBufferReset,this),e.on(V.BUFFER_CREATED,this.onBufferCreated,this),e.on(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(V.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(V.FRAG_LOADING,this.onFragLoading,this),e.on(V.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(V.LEVEL_LOADED,this.onLevelLoaded,this),e.off(V.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(V.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(V.BUFFER_RESET,this.onBufferReset,this),e.off(V.BUFFER_CREATED,this.onBufferCreated,this),e.off(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(V.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(V.FRAG_LOADING,this.onFragLoading,this),e.off(V.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:i,initPTS:n,timescale:a,trackId:r}){if(i===Mt.MAIN){const o=t.cc,d=this.fragCurrent;if(this.initPTS[o]={baseTime:n,timescale:a,trackId:r},this.log(`InitPTS for cc: ${o} found from main: ${n/a} (${n}/${a}) trackId: ${r}`),this.mainAnchor=t,this.state===rt.WAITING_INIT_PTS){const c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==o)&&this.syncWithAnchor(t,c==null?void 0:c.frag)}else!this.hls.hasEnoughToStart&&d&&d.cc!==o?(d.abortRequests(),this.syncWithAnchor(t,d)):this.state===rt.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var i;const n=((i=this.mainFragLoading)==null?void 0:i.frag)||null;if(t&&(n==null?void 0:n.cc)===t.cc)return;const a=(n||e).cc,r=this.getLevelDetails(),o=this.getLoadPosition(),d=zh(r,a,o);d&&(this.log(`Syncing with main frag at ${d.start} cc ${d.cc}`),this.startFragRequested=!1,this.nextLoadPosition=d.start,this.resetLoadingState(),this.state===rt.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=rt.STOPPED;return}const i=this.lastCurrentTime;this.stopLoad(),this.setInterval(tu),i>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i,this.state=rt.IDLE):this.state=rt.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case rt.IDLE:this.doTickIdle();break;case rt.WAITING_TRACK:{const{levels:e,trackId:t}=this,i=e==null?void 0:e[t],n=i==null?void 0:i.details;if(n&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(n))break;this.state=rt.WAITING_INIT_PTS}break}case rt.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case rt.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:i,cache:n,complete:a}=e,r=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=rt.FRAG_LOADING;const o=n.flush().buffer,d={frag:t,part:i,payload:o,networkDetails:null};this._handleFragmentLoadProgress(d),a&&super._handleFragmentLoadComplete(d)}else r&&r.cc!==e.frag.cc&&this.syncWithAnchor(r,e.frag)}else this.state=rt.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:i,media:n,trackId:a}=this,r=t.config;if(!this.buffering||!n&&!this.primaryPrefetch&&(this.startFragRequested||!r.startFragPrefetch)||!(i!=null&&i[a]))return;const o=i[a],d=o.details;if(!d||this.waitForLive(o)||this.waitForCdnTuneIn(d)){this.state=rt.WAITING_TRACK,this.startFragRequested=!1;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,Fi.AUDIO,Mt.AUDIO));const l=this.getFwdBufferInfo(c,Mt.AUDIO);if(l===null)return;if(!this.switchingTrack&&this._streamEnded(l,d)){t.trigger(V.BUFFER_EOS,{type:"audio"}),this.state=rt.ENDED;return}const f=l.len,p=t.maxBufferLength,g=d.fragments,y=g[0].start,A=this.getLoadPosition(),C=this.flushing?A:l.end;if(this.switchingTrack&&n){const M=A;d.PTSKnown&&M<y&&(l.end>y||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=y+.05)}if(f>=p&&!this.switchingTrack&&C<g[g.length-1].start)return;let I=this.getNextFragment(C,d);if(I&&this.isLoopLoading(I,C)&&(I=this.getNextFragmentLoopLoading(I,d,l,Mt.MAIN,p)),!I){this.bufferFlushed=!0;return}let P=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&P&&Ji(I)&&!I.endList&&(!d.live||!this.loadingParts&&C<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(P)===sn.OK&&(this.mainFragLoading=P=null),P&&Ji(P))){if(I.start>P.end){const G=this.fragmentTracker.getFragAtPos(C,Mt.MAIN);G&&G.end>P.end&&(P=G,this.mainFragLoading={frag:G,targetBufferTime:null})}if(I.start>P.end)return}this.loadFragment(I,o,C)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(i=>new hs(i))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:n}=this;n&&(n.abortRequests(),this.removeUnbufferedFrags(n.start)),this.resetLoadingState(),i?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==rt.STOPPED&&(this.setInterval(tu),this.state=rt.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const i=this.cachedTrackLoadedData;i&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(V.AUDIO_TRACK_LOADED,i))}onAudioTrackLoaded(e,t){var i;const{levels:n}=this,{details:a,id:r,groupId:o,track:d}=t;if(!n){this.warn(`Audio tracks reset while loading track ${r} "${d.name}" of "${o}"`);return}const c=this.mainDetails;if(!c||a.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=t,this.state!==rt.STOPPED&&(this.state=rt.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${r} "${d.name}" of "${o}" loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`);const l=n[r];let f=0;if(a.live||(i=l.details)!=null&&i.live){if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;if(l.details){var p;f=this.alignPlaylists(a,l.details,(p=this.levelLastLoaded)==null?void 0:p.details)}a.alignedSliding||(uf(a,c),a.alignedSliding||Sa(a,c),f=a.fragmentStart)}l.details=a,this.levelLastLoaded=l,this.startFragRequested||this.setStartPosition(c,f),this.hls.trigger(V.AUDIO_TRACK_UPDATED,{details:a,id:r,groupId:t.groupId}),this.state===rt.WAITING_TRACK&&!this.waitForCdnTuneIn(a)&&(this.state=rt.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:n,payload:a}=e,{config:r,trackId:o,levels:d}=this;if(!d){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const c=d[o];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const l=c.details;if(!l){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}const f=r.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let p=this.transmuxer;p||(p=this.transmuxer=new Lf(this.hls,Mt.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const g=this.initPTS[i.cc],y=(t=i.initSegment)==null?void 0:t.data;if(g!==void 0){const C=n?n.index:-1,I=C!==-1,P=new Vl(i.level,i.sn,i.stats.chunkCount,a.byteLength,C,I);p.push(a,y,f,"",i,n,l.totalduration,!1,P,g)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${l.startSN} ,${l.endSN}],track ${o}`);const{cache:A}=this.waitingData=this.waitingData||{frag:i,part:n,cache:new hf,complete:!1};A.push(new Uint8Array(a)),this.state!==rt.STOPPED&&(this.state=rt.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Mt.MAIN&&Ji(t.frag)&&(this.mainFragLoading=t,this.state===rt.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:i,part:n}=t;if(i.type!==Mt.AUDIO){!this.audioOnly&&i.type===Mt.MAIN&&!i.elementaryStreams.video&&!i.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${n?" p: "+n.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Ji(i)){this.fragPrevious=i;const a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(V.AUDIO_TRACK_SWITCHED,Ii({},a)))}this.fragBufferedComplete(i,n),this.media&&this.tick()}onError(e,t){var i;if(t.fatal){this.state=rt.ERROR;return}switch(t.details){case je.FRAG_GAP:case je.FRAG_PARSING_ERROR:case je.FRAG_DECRYPT_ERROR:case je.FRAG_LOAD_ERROR:case je.FRAG_LOAD_TIMEOUT:case je.KEY_LOAD_ERROR:case je.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Mt.AUDIO,t);break;case je.AUDIO_TRACK_LOAD_ERROR:case je.AUDIO_TRACK_LOAD_TIMEOUT:case je.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===rt.WAITING_TRACK&&((i=t.context)==null?void 0:i.type)===yi.AUDIO_TRACK&&(this.state=rt.IDLE);break;case je.BUFFER_ADD_CODEC_ERROR:case je.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case je.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case je.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==Fi.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Fi.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===rt.ENDED&&(this.state=rt.IDLE);const i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,t,Mt.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const i="audio",{hls:n}=this,{remuxResult:a,chunkMeta:r}=e,o=this.getCurrentContext(r);if(!o){this.resetWhenMissingContext(r);return}const{frag:d,part:c,level:l}=o,{details:f}=l,{audio:p,text:g,id3:y,initSegment:A}=a;if(this.fragContextChanged(d)||!f){this.fragmentTracker.removeFragment(d);return}if(this.state=rt.PARSING,this.switchingTrack&&p&&this.completeAudioSwitch(this.switchingTrack),A!=null&&A.tracks){const C=d.initSegment||d;if(this.unhandledEncryptionError(A,d))return;this._bufferInitSegment(l,A.tracks,C,r),n.trigger(V.FRAG_PARSING_INIT_SEGMENT,{frag:C,id:i,tracks:A.tracks})}if(p){const{startPTS:C,endPTS:I,startDTS:P,endDTS:M}=p;c&&(c.elementaryStreams[Fi.AUDIO]={startPTS:C,endPTS:I,startDTS:P,endDTS:M}),d.setElementaryStreamInfo(Fi.AUDIO,C,I,P,M),this.bufferFragmentData(p,d,c,r)}if(y!=null&&(t=y.samples)!=null&&t.length){const C=Pi({id:i,frag:d,details:f},y);n.trigger(V.FRAG_PARSING_METADATA,C)}if(g){const C=Pi({id:i,frag:d,details:f},g);n.trigger(V.FRAG_PARSING_USERDATA,C)}}_bufferInitSegment(e,t,i,n){if(this.state!==rt.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const a=t.audio;a.id=Mt.AUDIO;const r=e.audioCodec;this.log(`Init audio buffer, container:${a.container}, codecs[level/parsed]=[${r}/${a.codec}]`),r&&r.split(",").length===1&&(a.levelCodec=r),this.hls.trigger(V.BUFFER_CODECS,t);const o=a.initSegment;if(o!=null&&o.byteLength){const d={type:"audio",frag:i,part:null,chunkMeta:n,parent:i.type,data:o};this.hls.trigger(V.BUFFER_APPENDING,d)}this.tickImmediate()}loadFragment(e,t,i){const n=this.fragmentTracker.getState(e);if(this.switchingTrack||n===sn.NOT_LOADED||n===sn.PARTIAL){var a;if(!Ji(e))this._loadInitSegment(e,t);else if((a=t.details)!=null&&a.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=rt.WAITING_INIT_PTS;const r=this.mainDetails;r&&r.fragmentStart!==t.details.fragmentStart&&Sa(t.details,r)}else super.loadFragment(e,t,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:i,assocLang:n,characteristics:a,audioCodec:r,channels:o}=this.bufferedTrack;kr({name:t,lang:i,assocLang:n,characteristics:a,audioCodec:r,channels:o},e,br)||(ya(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(V.AUDIO_TRACK_SWITCHED,Ii({},e))}}class Zl extends Mn{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){const n=t==null?void 0:t.renditionReports;if(n){let a=-1;for(let r=0;r<n.length;r++){const o=n[r];let d;try{d=new self.URL(o.URI,t.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),d=o.URI||""}if(d===e){a=r;break}else d===e.substring(0,d.length)&&(a=r)}if(a!==-1){const r=n[a],o=parseInt(r["LAST-MSN"])||t.lastPartSn;let d=parseInt(r["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const l=Math.min(t.age-t.partTarget,t.targetduration);d>=0&&l>t.partTarget&&(d+=1)}const c=i&&gd(i);return new yd(o,d>=0?d:void 0,c)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}return e}playlistLoaded(e,t,i){const{details:n,stats:a}=t,r=self.performance.now(),o=a.loading.first?Math.max(0,r-a.loading.first):0;n.advancedDateTime=Date.now()-o;const d=this.hls.config.timelineOffset;if(d!==n.appliedTimelineOffset){const l=Math.max(d||0,0);n.appliedTimelineOffset=l,n.fragments.forEach(f=>{f.setStart(f.playlistOffset+l)})}if(n.live||i!=null&&i.live){const l="levelInfo"in t?t.levelInfo:t.track;if(n.reloaded(i),i&&n.fragments.length>0){bb(i,n,this);const P=n.playlistParsingError;if(P){this.warn(P);const M=this.hls;if(!M.config.ignorePlaylistParsingErrors){var c;const{networkDetails:G}=t;M.trigger(V.ERROR,{type:Gt.NETWORK_ERROR,details:je.LEVEL_PARSING_ERROR,fatal:!1,url:n.url,error:P,reason:P.message,level:t.level||void 0,parent:(c=n.fragments[0])==null?void 0:c.type,networkDetails:G,stats:a});return}n.playlistParsingError=null}}n.requestScheduled===-1&&(n.requestScheduled=a.loading.start);const f=this.hls.mainForwardBufferInfo,p=f?f.end-f.len:0,g=(n.edge-p)*1e3,y=af(n,g);if(n.requestScheduled+y<r?n.requestScheduled=r:n.requestScheduled+=y,this.log(`live playlist ${e} ${n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:n.updated?"UPDATED":"MISSED"}`),!this.canLoad||!n.live)return;let A,C,I;if(n.canBlockReload&&n.endSN&&n.advanced){const P=this.hls.config.lowLatencyMode,M=n.lastPartSn,G=n.endSN,Z=n.lastPartIndex,le=Z!==-1,W=M===G;le?W?(C=G+1,I=P?0:Z):(C=M,I=P?Z+1:n.maxPartIndex):C=G+1;const N=n.age,U=N+n.ageHeader;let O=Math.min(U-n.partTarget,n.targetduration*1.5);if(O>0){if(U>n.targetduration*3)this.log(`Playlist last advanced ${N.toFixed(2)}s ago. Omitting segment and part directives.`),C=void 0,I=void 0;else if(i!=null&&i.tuneInGoal&&U-n.partTarget>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${O} with playlist age: ${n.age}`),O=0;else{const z=Math.floor(O/n.targetduration);if(C+=z,I!==void 0){const ce=Math.round(O%n.targetduration/n.partTarget);I+=ce}this.log(`CDN Tune-in age: ${n.ageHeader}s last advanced ${N.toFixed(2)}s goal: ${O} skip sn ${z} to part ${I}`)}n.tuneInGoal=O}if(A=this.getDeliveryDirectives(n,t.deliveryDirectives,C,I),P||!W){n.requestScheduled=r,this.loadingPlaylist(l,A);return}}else(n.canBlockReload||n.canSkipUntil)&&(A=this.getDeliveryDirectives(n,t.deliveryDirectives,C,I));A&&C!==void 0&&n.canBlockReload&&(n.requestScheduled=a.loading.first+Math.max(y-o*2,y/2)),this.scheduleLoading(l,A,n)}else this.clearTimer()}scheduleLoading(e,t,i){const n=i||e.details;if(!n){this.loadingPlaylist(e,t);return}const a=self.performance.now(),r=n.requestScheduled;if(a>=r){this.loadingPlaylist(e,t);return}const o=r-a;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),o)}getDeliveryDirectives(e,t,i,n){let a=gd(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,n=t.part,a=Zs.No),new yd(i,n,a)}checkRetry(e){const t=e.details,i=_a(e),n=e.errorAction,{action:a,retryCount:r=0,retryConfig:o}=n||{},d=!!n&&!!o&&(a===un.RetryRequest||!n.resolved&&a===un.SendAlternateToPenaltyBox);if(d){var c;if(r>=o.maxNumRetry)return!1;if(i&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${r+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const l=$l(o,r);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),l),this.warn(`Retrying playlist loading ${r+1}/${o.maxNumRetry} after "${t}" in ${l}ms`)}e.levelRetry=!0,n.resolved=!0}return d}}function Df(s,e){if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(!gs(s[t].attrs,e[t].attrs))return!1;return!0}function gs(s,e,t){const i=s["STABLE-RENDITION-ID"];return i&&!t?i===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(n=>s[n]!==e[n])}function dl(s,e){return e.label.toLowerCase()===s.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(s.lang||"").toLowerCase())}class R1 extends Zl{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.LEVEL_LOADING,this.onLevelLoading,this),e.on(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(V.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.LEVEL_LOADING,this.onLevelLoading,this),e.off(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(V.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(V.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:n,details:a}=t,r=this.tracksInGroup[i];if(!r||r.groupId!==n){this.warn(`Audio track with id:${i} and group:${n} not found in active group ${r==null?void 0:r.groupId}`);return}const o=r.details;r.details=t.details,this.log(`Audio track ${i} "${r.name}" lang:${r.lang} group:${n} loaded [${a.startSN}-${a.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.audioGroups||null,n=this.groupIds;let a=this.currentTrack;if(!i||(n==null?void 0:n.length)!==(i==null?void 0:i.length)||i!=null&&i.some(o=>(n==null?void 0:n.indexOf(o))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(p=>!i||i.indexOf(p.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(p=>p.default)&&(this.selectDefaultTrack=!1),o.forEach((p,g)=>{p.id=g});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const d=this.hls.config.audioPreference;if(!a&&d){const p=Kn(d,o,br);if(p>-1)a=o[p];else{const g=Kn(d,this.tracks);a=this.tracks[g]}}let c=this.findTrackId(a);c===-1&&a&&(c=this.findTrackId(null));const l={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${i==null?void 0:i.join(",")}`),this.hls.trigger(V.AUDIO_TRACKS_UPDATED,l);const f=this.trackId;if(c!==-1&&f===-1)this.setAudioTrack(c);else if(o.length&&f===-1){var r;const p=new Error(`No audio track selected for current audio group-ID(s): ${(r=this.groupIds)==null?void 0:r.join(",")} track count: ${o.length}`);this.warn(p.message),this.hls.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:p})}}}onError(e,t){t.fatal||!t.context||t.context.type===yi.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const n=this.currentTrack;if(n&&kr(e,n,br))return n;const a=Kn(e,this.tracksInGroup,br);if(a>-1){const r=this.tracksInGroup[a];return this.setAudioTrack(a),r}else if(n){let r=t.loadLevel;r===-1&&(r=t.firstAutoLevel);const o=VA(e,t.levels,i,r,br);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const r=Kn(e,i);if(r>-1)return i[r]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,n=t[e],a=n.details&&!n.details.live;if(e===this.trackId&&n===i&&a||(this.log(`Switching to audio-track ${e} "${n.name}" lang:${n.lang} group:${n.groupId} channels:${n.channels}`),this.trackId=e,this.currentTrack=n,this.hls.trigger(V.AUDIO_TRACK_SWITCHING,Ii({},n)),a))return;const r=this.switchParams(n.url,i==null?void 0:i.details,n.details);this.loadPlaylist(r)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const n=t[i];if(!(this.selectDefaultTrack&&!n.default)&&(!e||kr(e,n,br)))return i}if(e){const{name:i,lang:n,assocLang:a,characteristics:r,audioCodec:o,channels:d}=e;for(let c=0;c<t.length;c++){const l=t[c];if(kr({name:i,lang:n,assocLang:a,characteristics:r,audioCodec:o,channels:d},l,br))return c}for(let c=0;c<t.length;c++){const l=t[c];if(gs(e.attrs,l.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const l=t[c];if(gs(e.attrs,l.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&ya(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,n=e.groupId,a=this.getUrlWithDirectives(e.url,t),r=e.details,o=r==null?void 0:r.age;this.log(`Loading audio-track ${i} "${e.name}" lang:${e.lang} group:${n}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&r.live?" age "+o.toFixed(1)+(r.type&&" "+r.type||""):""} ${a}`),this.hls.trigger(V.AUDIO_TRACK_LOADING,{url:a,id:i,groupId:n,deliveryDirectives:t||null,track:e})}}class L1{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,i){if(this.queues===null||this.tracks===null)return;const n=this.queues[t];n.push(e),n.length===1&&!i&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const i={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(i,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const i={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(i)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const i=(t=e[0])==null?void 0:t.label;(i==="async-blocker"||i==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const n=t[0];try{n.execute()}catch(a){var i;if(n.onError(a),this.queues===null||this.tracks===null)return;const r=(i=this.tracks[e])==null?void 0:i.buffer;r!=null&&r.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,i;return(t=this.queues)!=null&&t[e]||(i=this.tracks)!=null&&i[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const i=(t=this.tracks)==null?void 0:t[e],n=i==null?void 0:i.buffer;return n?`SourceBuffer${n.updating?" updating":""}${i.ended?" ended":""}${i.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(i=>i.label).join(", "))||""}}const iu=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,Pf="HlsJsTrackRemovedError";class D1 extends Error{constructor(e){super(e),this.name=Pf}}class P1 extends Mn{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=i=>{var n;this.hls&&((n=this.mediaSource)==null?void 0:n.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=i=>{const{media:n,mediaSource:a}=this;i&&this.log("Media source opened"),!(!n||!a)&&(a.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(V.MEDIA_ATTACHED,{media:n,mediaSource:a}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:i,_objectUrl:n}=this;i!==n&&this.error(`Media element src was set while attaching MediaSource (${n} > ${i})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=tA(fr(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.BUFFER_RESET,this.onBufferReset,this),e.on(V.BUFFER_APPENDING,this.onBufferAppending,this),e.on(V.BUFFER_CODECS,this.onBufferCodecs,this),e.on(V.BUFFER_EOS,this.onBufferEos,this),e.on(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(V.FRAG_PARSED,this.onFragParsed,this),e.on(V.FRAG_CHANGED,this.onFragChanged,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.BUFFER_RESET,this.onBufferReset,this),e.off(V.BUFFER_APPENDING,this.onBufferAppending,this),e.off(V.BUFFER_CODECS,this.onBufferCodecs,this),e.off(V.BUFFER_EOS,this.onBufferEos,this),e.off(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(V.FRAG_PARSED,this.onFragParsed,this),e.off(V.FRAG_CHANGED,this.onFragChanged,this),e.off(V.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const i={};if(this.operationQueue){const a=this.isUpdating();a||this.operationQueue.removeBlockers();const r=this.isQueued();(a||r)&&this.warn(`Transfering MediaSource with${r?" operations in queue":""}${a?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const n=this.transferData;return!this.sourceBufferCount&&n&&n.mediaSource===t?Pi(i,n.tracks):this.sourceBuffers.forEach(a=>{const[r]=a;r&&(i[r]=Pi({},this.tracks[r]),this.removeBuffer(r)),a[0]=a[1]=null}),{media:e,mediaSource:t,tracks:i}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var i;let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsTotal=n,this.log(`${n} bufferCodec event(s) expected.`),(i=this.transferData)!=null&&i.mediaSource&&this.sourceBufferCount&&n&&this.bufferCreated()}onMediaAttaching(e,t){const i=this.media=t.media;this.transferData=this.overrides=void 0;const n=fr(this.appendSource);if(n){const a=!!t.mediaSource;(a||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const r=this.mediaSource=t.mediaSource||new n;if(this.assignMediaSource(r),a)this._objectUrl=i.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(r);if(this.appendSource)try{i.removeAttribute("src");const d=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||d&&r instanceof d,nu(i),O1(i,o),i.load()}catch{i.src=o}else i.src=o}i.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,i;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(i=e.constructor)==null?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const i=this.tracks,n=t.tracks,a=n?Object.keys(n):null,r=a?a.length:0,o=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(n&&a&&r){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Ni(i,(d,c)=>d==="initSegment"?void 0:c)};
transfer tracks: ${Ni(n,(d,c)=>d==="initSegment"?void 0:c)}}`),!kh(n,i)){t.mediaSource=null,t.tracks=void 0;const d=e.currentTime,c=this.details,l=Math.max(d,(c==null?void 0:c.fragments[0].start)||0);if(l-d>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${d} -> ${l}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(n)}"->"${Object.keys(i)}") start time: ${l} currentTime: ${d}`),this.onMediaDetaching(V.MEDIA_DETACHING,{}),this.onMediaAttaching(V.MEDIA_ATTACHING,t),e.currentTime=l;return}this.transferData=void 0,a.forEach(d=>{const c=d,l=n[c];if(l){const f=l.buffer;if(f){const p=this.fragmentTracker,g=l.id;if(p.hasFragments(g)||p.hasParts(g)){const C=li.getBuffered(f);p.detectEvictedFragments(c,C,g,null,!0)}const y=Lo(c),A=[c,f];this.sourceBuffers[y]=A,f.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,l)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const i=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:n,mediaSource:a,_objectUrl:r}=this;if(a){if(this.log(`media source ${i?"transferring":"detaching"}`),i)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=a.readyState==="open";try{const d=a.sourceBuffers;for(let c=d.length;c--;)o&&d[c].abort(),a.removeSourceBuffer(d[c]);o&&a.endOfStream()}catch(d){this.warn(`onMediaDetaching: ${d.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.removeEventListener("startstreaming",this._onStartStreaming),a.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}n&&(n.removeEventListener("emptied",this._onMediaEmptied),i||(r&&self.URL.revokeObjectURL(r),this.mediaSrc===r?(n.removeAttribute("src"),this.appendSource&&nu(n),n.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(V.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const i=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),i)try{var n;(n=this.mediaSource)!=null&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(i)}catch(a){this.warn(`onBufferReset ${e}`,a)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Lo(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new L1(this.tracks)}onBufferCodecs(e,t){var i;const n=this.tracks,a=Object.keys(t);this.log(`BUFFER_CODECS: "${a}" (current SB count ${this.sourceBufferCount})`);const r="audiovideo"in t&&(n.audio||n.video)||n.audiovideo&&("audio"in t||"video"in t),o=!r&&this.sourceBufferCount&&this.media&&a.some(d=>!n[d]);if(r||o){this.warn(`Unsupported transition between "${Object.keys(n)}" and "${a}" SourceBuffers`);return}a.forEach(d=>{var c,l;const f=t[d],{id:p,codec:g,levelCodec:y,container:A,metadata:C,supplemental:I}=f;let P=n[d];const M=(c=this.transferData)==null||(c=c.tracks)==null?void 0:c[d],G=M!=null&&M.buffer?M:P,Z=(G==null?void 0:G.pendingCodec)||(G==null?void 0:G.codec),le=G==null?void 0:G.levelCodec;P||(P=n[d]={buffer:void 0,listeners:[],codec:g,supplemental:I,container:A,levelCodec:y,metadata:C,id:p});const W=Qs(Z,le),N=W==null?void 0:W.replace(iu,"$1");let U=Qs(g,y);const O=(l=U)==null?void 0:l.replace(iu,"$1");U&&W&&N!==O&&(d.slice(0,5)==="audio"&&(U=ma(U,this.appendSource)),this.log(`switching codec ${Z} to ${U}`),U!==(P.pendingCodec||P.codec)&&(P.pendingCodec=U),P.container=A,this.appendChangeType(d,A,U))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((i=t.audio)==null?void 0:i.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const i=this.tracks[t];return e[t]={id:i.id,container:i.container,codec:i.codec,levelCodec:i.levelCodec},e},{})}appendChangeType(e,t,i){const n=`${t};codecs=${i}`,a={label:`change-type=${n}`,execute:()=>{const r=this.tracks[e];if(r){const o=r.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${n}`),o.changeType(n),r.codec=i,r.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:r=>{this.warn(`Failed to change ${e} SourceBuffer type`,r)}};this.append(a,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const i=e.start,n=i+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(i,Mt.MAIN))==null?void 0:t.gap)===!0)return;const r={label:"block-audio",execute:()=>{var o;const d=this.tracks.video;(this.lastVideoAppendEnd>n||d!=null&&d.buffer&&li.isBuffered(d.buffer,n)||((o=this.fragmentTracker.getAppendedFrag(n,Mt.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:r,frag:e},this.append(r,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:i}=this,{data:n,type:a,parent:r,frag:o,part:d,chunkMeta:c,offset:l}=t,f=c.buffering[a],{sn:p,cc:g}=o,y=self.performance.now();f.start=y;const A=o.stats.buffering,C=d?d.stats.buffering:null;A.start===0&&(A.start=y),C&&C.start===0&&(C.start=y);const I=i.audio;let P=!1;a==="audio"&&(I==null?void 0:I.container)==="audio/mpeg"&&(P=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const M=i.video,G=M==null?void 0:M.buffer;if(G&&p!=="initSegment"){const W=d||o,N=this.blockedAudioAppend;if(a==="audio"&&r!=="main"&&!this.blockedAudioAppend&&!(M.ending||M.ended)){const O=W.start+W.duration*.05,z=G.buffered,ce=this.currentOp("video");!z.length&&!ce?this.blockAudio(W):!ce&&!li.isBuffered(G,O)&&this.lastVideoAppendEnd<O&&this.blockAudio(W)}else if(a==="video"){const U=W.end;if(N){const O=N.frag.start;(U>O||U<this.lastVideoAppendEnd||li.isBuffered(G,O))&&this.unblockAudio()}this.lastVideoAppendEnd=U}}const Z=(d||o).start,le={label:`append-${a}`,execute:()=>{var W;f.executeStart=self.performance.now();const N=(W=this.tracks[a])==null?void 0:W.buffer;N&&(P?this.updateTimestampOffset(N,Z,.1,a,p,g):l!==void 0&&wt(l)&&this.updateTimestampOffset(N,l,1e-6,a,p,g)),this.appendExecutor(n,a)},onStart:()=>{},onComplete:()=>{const W=self.performance.now();f.executeEnd=f.end=W,A.first===0&&(A.first=W),C&&C.first===0&&(C.first=W);const N={};this.sourceBuffers.forEach(([U,O])=>{U&&(N[U]=li.getBuffered(O))}),this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(V.BUFFER_APPENDED,{type:a,frag:o,part:d,chunkMeta:c,parent:o.type,timeRanges:N})},onError:W=>{var N;const U={type:Gt.MEDIA_ERROR,parent:o.type,details:je.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:o,part:d,chunkMeta:c,error:W,err:W,fatal:!1},O=(N=this.media)==null?void 0:N.error;if(W.code===DOMException.QUOTA_EXCEEDED_ERR||W.name=="QuotaExceededError"||"quota"in W)U.details=je.BUFFER_FULL_ERROR;else if(W.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!O)U.errorAction=zr(!0);else if(W.name===Pf&&this.sourceBufferCount===0)U.errorAction=zr(!0);else{const z=++this.appendErrors[a];this.warn(`Failed ${z}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer (${O||"no media error"})`),(z>=this.hls.config.appendErrorMaxRetry||O)&&(U.fatal=!0)}this.hls.trigger(V.ERROR,U)}};this.log(`queuing "${a}" append sn: ${p}${d?" p: "+d.index:""} of ${o.type===Mt.MAIN?"level":"track"} ${o.level} cc: ${g}`),this.append(le,a,this.isPending(this.tracks[a]))}getFlushOp(e,t,i){return this.log(`queuing "${e}" remove ${t}-${i}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,i)},onStart:()=>{},onComplete:()=>{this.hls.trigger(V.BUFFER_FLUSHED,{type:e})},onError:n=>{this.warn(`Failed to remove ${t}-${i} from "${e}" SourceBuffer`,n)}}}onBufferFlushing(e,t){const{type:i,startOffset:n,endOffset:a}=t;i?this.append(this.getFlushOp(i,n,a),i):this.sourceBuffers.forEach(([r])=>{r&&this.append(this.getFlushOp(r,n,a),r)})}onFragParsed(e,t){const{frag:i,part:n}=t,a=[],r=n?n.elementaryStreams:i.elementaryStreams;r[Fi.AUDIOVIDEO]?a.push("audiovideo"):(r[Fi.AUDIO]&&a.push("audio"),r[Fi.VIDEO]&&a.push("video"));const o=()=>{const d=self.performance.now();i.stats.buffering.end=d,n&&(n.stats.buffering.end=d);const c=n?n.stats:i.stats;this.hls.trigger(V.FRAG_BUFFERED,{frag:i,part:n,stats:c,id:i.type})};a.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(o,a).catch(d=>{this.warn(`Fragment buffered callback ${d}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var i;this.sourceBuffers.forEach(([r])=>{if(r){const o=this.tracks[r];(!t.type||t.type===r)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${r} buffer reached EOS`)))}});const n=((i=this.overrides)==null?void 0:i.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([r])=>{var o;return r&&!((o=this.tracks[r])!=null&&o.ended)})?n?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:r}=this;if(!r||r.readyState!=="open"){r&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${r.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),r.endOfStream(),this.hls.trigger(V.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(V.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===je.BUFFER_APPEND_ERROR&&t.frag){var i;const n=(i=t.errorAction)==null?void 0:i.nextAutoLevel;wt(n)&&n!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:i}=this;if(!i||t===null||!this.sourceBufferCount)return;const n=e.config,a=i.currentTime,r=t.levelTargetDuration,o=t.live&&n.liveBackBufferLength!==null?n.liveBackBufferLength:n.backBufferLength;if(wt(o)&&o>=0){const c=Math.max(o,r),l=Math.floor(a/r)*r-c;this.flushBackBuffer(a,r,l)}const d=n.frontBufferFlushThreshold;if(wt(d)&&d>0){const c=Math.max(n.maxBufferLength,d),l=Math.max(c,r),f=Math.floor(a/r)*r+l;this.flushFrontBuffer(a,r,f)}}flushBackBuffer(e,t,i){this.sourceBuffers.forEach(([n,a])=>{if(a){const o=li.getBuffered(a);if(o.length>0&&i>o.start(0)){var r;this.hls.trigger(V.BACK_BUFFER_REACHED,{bufferEnd:i});const d=this.tracks[n];if((r=this.details)!=null&&r.live)this.hls.trigger(V.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(d!=null&&d.ended){this.log(`Cannot flush ${n} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(V.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:n})}}})}flushFrontBuffer(e,t,i){this.sourceBuffers.forEach(([n,a])=>{if(a){const r=li.getBuffered(a),o=r.length;if(o<2)return;const d=r.start(o-1),c=r.end(o-1);if(i>d||e>=d&&e<=c)return;this.hls.trigger(V.BUFFER_FLUSHING,{startOffset:d,endOffset:1/0,type:n})}})}getDurationAndRange(){var e;const{details:t,mediaSource:i}=this;if(!t||!this.media||(i==null?void 0:i.readyState)!=="open")return null;const n=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&i.setLiveSeekableRange){const c=Math.max(0,t.fragmentStart),l=Math.max(c,n);return{duration:1/0,start:c,end:l}}return{duration:1/0}}const a=(e=this.overrides)==null?void 0:e.duration;if(a)return wt(a)?{duration:a}:null;const r=this.media.duration,o=wt(i.duration)?i.duration:0;return n>o&&n>r||!wt(r)?{duration:n}:null}updateMediaSource({duration:e,start:t,end:i}){const n=this.mediaSource;!this.media||!n||n.readyState!=="open"||(n.duration!==e&&(wt(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),n.duration=e),t!==void 0&&i!==void 0&&(this.log(`MediaSource duration is set to ${n.duration}. Setting seekable range to ${t}-${i}.`),n.setLiveSeekableRange(t,i)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:i}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Ni(i)}`),this.tracksReady){var n;const a=(n=this.transferData)==null?void 0:n.tracks;a&&Object.keys(a).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,i])=>{if(t){const n=this.tracks[t];e[t]={buffer:i,container:n.container,codec:n.codec,supplemental:n.supplemental,levelCodec:n.levelCodec,id:n.id,metadata:n.metadata}}}),this.hls.trigger(V.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:i}=this;if(!i)throw new Error("createSourceBuffers called when mediaSource was null");for(const a in e){const r=a,o=e[r];if(this.isPending(o)){const d=this.getTrackCodec(o,r),c=`${o.container};codecs=${d}`;o.codec=d,this.log(`creating sourceBuffer(${c})${this.currentOp(r)?" Queued":""} ${Ni(o)}`);try{const l=i.addSourceBuffer(c),f=Lo(r),p=[r,l];t[f]=p,o.buffer=l}catch(l){var n;this.error(`error while trying to add sourceBuffer: ${l.message}`),this.shiftAndExecuteNext(r),(n=this.operationQueue)==null||n.removeBlockers(),delete this.tracks[r],this.hls.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:l,sourceBufferName:r,mimeType:c,parent:o.id});return}this.trackSourceBuffer(r,o)}}this.bufferCreated()}getTrackCodec(e,t){const i=e.supplemental;let n=e.codec;i&&(t==="video"||t==="audiovideo")&&ds(i,"video")&&(n=EA(n,i));const a=Qs(n,e.levelCodec);return a?t.slice(0,5)==="audio"?ma(a,this.appendSource):a:""}trackSourceBuffer(e,t){const i=t.buffer;if(!i)return;const n=this.getTrackCodec(t,e);this.tracks[e]={buffer:i,codec:n,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(a,r)=>{const o=r.removedRanges;o!=null&&o.length&&this.hls.trigger(V.BUFFER_FLUSHED,{type:a})})}get mediaSrc(){var e,t;const i=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return i==null?void 0:i.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const i=this.currentOp(e);i&&(i.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var i;const n=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(i=this.mediaSource)==null?void 0:i.readyState}`);this.error(`${n}`,t),this.hls.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:n,fatal:!1});const a=this.currentOp(e);a&&a.onError(n)}updateTimestampOffset(e,t,i,n,a,r){const o=t-e.timestampOffset;Math.abs(o)>=i&&(this.log(`Updating ${n} SourceBuffer timestampOffset to ${t} (sn: ${a} cc: ${r})`),e.timestampOffset=t)}removeExecutor(e,t,i){const{media:n,mediaSource:a}=this,r=this.tracks[e],o=r==null?void 0:r.buffer;if(!n||!a||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const d=wt(n.duration)?n.duration:1/0,c=wt(a.duration)?a.duration:1/0,l=Math.max(0,t),f=Math.min(i,d,c);f>l&&(!r.ending||r.ended)?(r.ended=!1,this.log(`Removing [${l},${f}] from the ${e} SourceBuffer`),o.remove(l,f)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const i=this.tracks[t],n=i==null?void 0:i.buffer;if(!n)throw new D1(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);i.ending=!1,i.ended=!1,n.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:i}=this,n=t.map(r=>this.appendBlocker(r));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(n).then(r=>{i===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var i;const n=(i=this.tracks[t])==null?void 0:i.buffer;!n||n.updating||this.shiftAndExecuteNext(t)})}append(e,t,i){this.operationQueue&&this.operationQueue.append(e,t,i)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,i){const n=this.tracks[e];if(!n)return;const a=n.buffer;if(!a)return;const r=i.bind(this,e);n.listeners.push({event:t,listener:r}),a.addEventListener(t,r)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const i=t.buffer;i&&(t.listeners.forEach(n=>{i.removeEventListener(n.event,n.listener)}),t.listeners.length=0)}}function nu(s){const e=s.querySelectorAll("source");[].slice.call(e).forEach(t=>{s.removeChild(t)})}function O1(s,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,s.appendChild(t)}function Lo(s){return s==="audio"?1:0}class ec{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(V.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(V.BUFFER_CODECS,this.onBufferCodecs,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(V.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(V.BUFFER_CODECS,this.onBufferCodecs,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&wt(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=i,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter((n,a)=>this.isLevelAllowed(n)&&a<=e);return this.clientRect=null,ec.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,!t.width&&!t.height&&(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,t,i){if(!(e!=null&&e.length))return-1;const n=(o,d)=>d?o.width!==d.width||o.height!==d.height:!0;let a=e.length-1;const r=Math.max(t,i);for(let o=0;o<e.length;o+=1){const d=e[o];if((d.width>=r||d.height>=r)&&n(d,e[o+1])){a=o;break}}return a}}const M1={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},An=M1,B1={HLS:"h"},F1=B1;class Xn{constructor(e,t){Array.isArray(e)&&(e=e.map(i=>i instanceof Xn?i:new Xn(i))),this.value=e,this.params=t}}const N1="Dict";function U1(s){return Array.isArray(s)?JSON.stringify(s):s instanceof Map?"Map{}":s instanceof Set?"Set{}":typeof s=="object"?JSON.stringify(s):String(s)}function $1(s,e,t,i){return new Error(`failed to ${s} "${U1(e)}" as ${t}`,{cause:i})}function Jn(s,e,t){return $1("serialize",s,e,t)}class Of{constructor(e){this.description=e}}const ru="Bare Item",G1="Boolean";function V1(s){if(typeof s!="boolean")throw Jn(s,G1);return s?"?1":"?0"}function j1(s){return btoa(String.fromCharCode(...s))}const H1="Byte Sequence";function q1(s){if(ArrayBuffer.isView(s)===!1)throw Jn(s,H1);return`:${j1(s)}:`}const z1="Integer";function K1(s){return s<-999999999999999||999999999999999<s}function Mf(s){if(K1(s))throw Jn(s,z1);return s.toString()}function W1(s){return`@${Mf(s.getTime()/1e3)}`}function Bf(s,e){if(s<0)return-Bf(-s,e);const t=Math.pow(10,e);if(Math.abs(s*t%1-.5)<Number.EPSILON){const n=Math.floor(s*t);return(n%2===0?n:n+1)/t}else return Math.round(s*t)/t}const Y1="Decimal";function X1(s){const e=Bf(s,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Jn(s,Y1);const t=e.toString();return t.includes(".")?t:`${t}.0`}const J1="String",Q1=/[\x00-\x1f\x7f]+/;function Z1(s){if(Q1.test(s))throw Jn(s,J1);return`"${s.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function eS(s){return s.description||s.toString().slice(7,-1)}const tS="Token";function su(s){const e=eS(s);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Jn(e,tS);return e}function ul(s){switch(typeof s){case"number":if(!wt(s))throw Jn(s,ru);return Number.isInteger(s)?Mf(s):X1(s);case"string":return Z1(s);case"symbol":return su(s);case"boolean":return V1(s);case"object":if(s instanceof Date)return W1(s);if(s instanceof Uint8Array)return q1(s);if(s instanceof Of)return su(s);default:throw Jn(s,ru)}}const iS="Key";function hl(s){if(/^[a-z*][a-z0-9\-_.*]*$/.test(s)===!1)throw Jn(s,iS);return s}function tc(s){return s==null?"":Object.entries(s).map(([e,t])=>t===!0?`;${hl(e)}`:`;${hl(e)}=${ul(t)}`).join("")}function Ff(s){return s instanceof Xn?`${ul(s.value)}${tc(s.params)}`:ul(s)}function nS(s){return`(${s.value.map(Ff).join(" ")})${tc(s.params)}`}function rS(s,e={whitespace:!0}){if(typeof s!="object"||s==null)throw Jn(s,N1);const t=s instanceof Map?s.entries():Object.entries(s),i=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([n,a])=>{a instanceof Xn||(a=new Xn(a));let r=hl(n);return a.value===!0?r+=tc(a.params):(r+="=",Array.isArray(a.value)?r+=nS(a):r+=Ff(a)),r}).join(`,${i}`)}function Nf(s,e){return rS(s,e)}const jn="CMCD-Object",Wi="CMCD-Request",vr="CMCD-Session",cr="CMCD-Status",sS={br:jn,ab:jn,d:jn,ot:jn,tb:jn,tpb:jn,lb:jn,tab:jn,lab:jn,url:jn,pb:Wi,bl:Wi,tbl:Wi,dl:Wi,ltc:Wi,mtp:Wi,nor:Wi,nrr:Wi,rc:Wi,sn:Wi,sta:Wi,su:Wi,ttfb:Wi,ttfbb:Wi,ttlb:Wi,cmsdd:Wi,cmsds:Wi,smrt:Wi,df:Wi,cs:Wi,ts:Wi,cid:vr,pr:vr,sf:vr,sid:vr,st:vr,v:vr,msd:vr,bs:cr,bsd:cr,cdn:cr,rtp:cr,bg:cr,pt:cr,ec:cr,e:cr},aS={REQUEST:Wi};function oS(s){return Object.keys(s).reduce((e,t)=>{var i;return(i=s[t])===null||i===void 0||i.forEach(n=>e[n]=t),e},{})}function lS(s,e){const t={};if(!s)return t;const i=Object.keys(s),n=e?oS(e):{};return i.reduce((a,r)=>{var o;const d=sS[r]||n[r]||aS.REQUEST,c=(o=a[d])!==null&&o!==void 0?o:a[d]={};return c[r]=s[r],a},t)}function cS(s){return["ot","sf","st","e","sta"].includes(s)}function dS(s){return typeof s=="number"?wt(s):s!=null&&s!==""&&s!==!1}const Uf="event";function uS(s,e){const t=new URL(s),i=new URL(e);if(t.origin!==i.origin)return s;const n=t.pathname.split("/").slice(1),a=i.pathname.split("/").slice(1,-1);for(;n[0]===a[0];)n.shift(),a.shift();for(;a.length;)a.shift(),n.unshift("..");return n.join("/")+t.search+t.hash}const na=s=>Math.round(s),fl=(s,e)=>Array.isArray(s)?s.map(t=>fl(t,e)):s instanceof Xn&&typeof s.value=="string"?new Xn(fl(s.value,e),s.params):(e.baseUrl&&(s=uS(s,e.baseUrl)),e.version===1?encodeURIComponent(s):s),Ms=s=>na(s/100)*100,hS=(s,e)=>{let t=s;return e.version>=2&&(s instanceof Xn&&typeof s.value=="string"?t=new Xn([s]):typeof s=="string"&&(t=[s])),fl(t,e)},fS={br:na,d:na,bl:Ms,dl:Ms,mtp:Ms,nor:hS,rtp:Ms,tb:na},$f="request",Gf="response",ic=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],pS=["e"],mS=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Ma(s){return mS.test(s)}function gS(s){return ic.includes(s)||pS.includes(s)||Ma(s)}const Vf=["d","dl","nor","ot","rtp","su"];function yS(s){return ic.includes(s)||Vf.includes(s)||Ma(s)}const _S=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function vS(s){return ic.includes(s)||Vf.includes(s)||_S.includes(s)||Ma(s)}const AS=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function bS(s){return AS.includes(s)||Ma(s)}const SS={[Gf]:vS,[Uf]:gS,[$f]:yS};function jf(s,e={}){const t={};if(s==null||typeof s!="object")return t;const i=e.version||s.v||1,n=e.reportingMode||$f,a=i===1?bS:SS[n];let r=Object.keys(s).filter(a);const o=e.filter;typeof o=="function"&&(r=r.filter(o));const d=n===Gf||n===Uf;d&&!r.includes("ts")&&r.push("ts"),i>1&&!r.includes("v")&&r.push("v");const c=Pi({},fS,e.formatters),l={version:i,reportingMode:n,baseUrl:e.baseUrl};return r.sort().forEach(f=>{let p=s[f];const g=c[f];if(typeof g=="function"&&(p=g(p,l)),f==="v"){if(i===1)return;p=i}f=="pr"&&p===1||(d&&f==="ts"&&!wt(p)&&(p=Date.now()),dS(p)&&(cS(f)&&typeof p=="string"&&(p=new Of(p)),t[f]=p))}),t}function ES(s,e={}){const t={};if(!s)return t;const i=jf(s,e),n=lS(i,e==null?void 0:e.customHeaderMap);return Object.entries(n).reduce((a,[r,o])=>{const d=Nf(o,{whitespace:!1});return d&&(a[r]=d),a},t)}function xS(s,e,t){return Pi(s,ES(e,t))}const TS="CMCD";function CS(s,e={}){return s?Nf(jf(s,e),{whitespace:!1}):""}function wS(s,e={}){if(!s)return"";const t=CS(s,e);return encodeURIComponent(t)}function kS(s,e={}){if(!s)return"";const t=wS(s,e);return`${TS}=${t}`}const au=/CMCD=[^&#]+/;function IS(s,e,t){const i=kS(e,t);if(!i)return s;if(au.test(s))return s.replace(au,i);const n=s.includes("?")?"&":"?";return`${s}${n}${i}`}class RS{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=n=>{try{this.apply(n,{ot:An.MANIFEST,su:!this.initialized})}catch(a){this.hls.logger.warn("Could not generate manifest CMCD data.",a)}},this.applyFragmentData=n=>{try{const{frag:a,part:r}=n,o=this.hls.levels[a.level],d=this.getObjectType(a),c={d:(r||a).duration*1e3,ot:d};(d===An.VIDEO||d===An.AUDIO||d==An.MUXED)&&(c.br=o.bitrate/1e3,c.tb=this.getTopBandwidth(d)/1e3,c.bl=this.getBufferLength(d));const l=r?this.getNextPart(r):this.getNextFrag(a);l!=null&&l.url&&l.url!==a.url&&(c.nor=l.url),this.apply(n,c)}catch(a){this.hls.logger.warn("Could not generate segment CMCD data.",a)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;i!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||e.sessionId,this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHED,this.onMediaDetached,this),e.on(V.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHED,this.onMediaDetached,this),e.off(V.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,n;this.audioBuffer=(i=t.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(n=t.tracks.video)==null?void 0:n.buffer}createData(){var e;return{v:1,sf:F1.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Pi(t,this.createData());const i=t.ot===An.INIT||t.ot===An.VIDEO||t.ot===An.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:n}=this;n&&(t=Object.keys(t).reduce((r,o)=>(n.includes(o)&&(r[o]=t[o]),r),{}));const a={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),xS(e.headers,t,a)):e.url=IS(e.url,t,a)}getNextFrag(e){var t;const i=(t=this.hls.levels[e.level])==null?void 0:t.details;if(i){const n=e.sn-i.startSN;return i.fragments[n+1]}}getNextPart(e){var t;const{index:i,fragment:n}=e,a=(t=this.hls.levels[n.level])==null||(t=t.details)==null?void 0:t.partList;if(a){const{sn:r}=n;for(let o=a.length-1;o>=0;o--){const d=a[o];if(d.index===i&&d.fragment.sn===r)return a[o+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return An.TIMED_TEXT;if(e.sn==="initSegment")return An.INIT;if(t==="audio")return An.AUDIO;if(t==="main")return this.hls.audioTracks.length?An.VIDEO:An.MUXED}getTopBandwidth(e){let t=0,i;const n=this.hls;if(e===An.AUDIO)i=n.audioTracks;else{const a=n.maxAutoLevel,r=a>-1?a+1:n.levels.length;i=n.levels.slice(0,r)}return i.forEach(a=>{a.bitrate>t&&(t=a.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,i=e===An.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!t?NaN:li.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new i(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,r,o){t(a),this.loader.load(a,r,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new i(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,r,o){t(a),this.loader.load(a,r,o)}}}}const LS=3e5;class DS extends Mn{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if((i==null?void 0:i.action)===un.SendAlternateToPenaltyBox&&i.flags===xn.MoveAllAlternatesMatchingHost){const n=this.levels;let a=this._pathwayPriority,r=this.pathwayId;if(t.context){const{groupId:o,pathwayId:d,type:c}=t.context;o&&n?r=this.getPathwayForGroupId(o,c,r):d&&(r=d)}r in this.penalizedPathways||(this.penalizedPathways[r]=performance.now()),!a&&n&&(a=this.pathways()),a&&a.length>1&&(this.updatePathwayPriority(a),i.resolved=this.pathwayId!==r),t.details===je.BUFFER_APPEND_ERROR&&!t.fatal?i.resolved=!0:i.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${r} levels: ${n&&n.length} priorities: ${Ni(a)} penalized: ${Ni(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const i=this.penalizedPathways,n=performance.now();Object.keys(i).forEach(a=>{n-i[a]>LS&&delete i[a]});for(let a=0;a<e.length;a++){const r=e[a];if(r in i)continue;if(r===this.pathwayId)return;const o=this.hls.nextLoadLevel,d=this.hls.levels[o];if(t=this.getLevelsForPathway(r),t.length>0){this.log(`Setting Pathway to "${r}"`),this.pathwayId=r,cf(t),this.hls.trigger(V.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[o];d&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==d.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==d.bitrate&&this.log(`Unstable Pathways change from bitrate ${d.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,i){const n=this.getLevelsForPathway(i).concat(this.levels||[]);for(let a=0;a<n.length;a++)if(t===yi.AUDIO_TRACK&&n[a].hasAudioGroup(e)||t===yi.SUBTITLE_TRACK&&n[a].hasSubtitleGroup(e))return n[a].pathwayId;return i}clonePathways(e){const t=this.levels;if(!t)return;const i={},n={};e.forEach(a=>{const{ID:r,"BASE-ID":o,"URI-REPLACEMENT":d}=a;if(t.some(l=>l.pathwayId===r))return;const c=this.getLevelsForPathway(o).map(l=>{const f=new ji(l.attrs);f["PATHWAY-ID"]=r;const p=f.AUDIO&&`${f.AUDIO}_clone_${r}`,g=f.SUBTITLES&&`${f.SUBTITLES}_clone_${r}`;p&&(i[f.AUDIO]=p,f.AUDIO=p),g&&(n[f.SUBTITLES]=g,f.SUBTITLES=g);const y=Hf(l.uri,f["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",d),A=new hs({attrs:f,audioCodec:l.audioCodec,bitrate:l.bitrate,height:l.height,name:l.name,url:y,videoCodec:l.videoCodec,width:l.width});if(l.audioGroups)for(let C=1;C<l.audioGroups.length;C++)A.addGroupId("audio",`${l.audioGroups[C]}_clone_${r}`);if(l.subtitleGroups)for(let C=1;C<l.subtitleGroups.length;C++)A.addGroupId("text",`${l.subtitleGroups[C]}_clone_${r}`);return A});t.push(...c),ou(this.audioTracks,i,d,r),ou(this.subtitleTracks,n,d,r)})}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;this.loader&&this.loader.destroy(),this.loader=new i(t);let n;try{n=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(n.protocol!=="data:"){const l=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;n.searchParams.set("_HLS_pathway",this.pathwayId),n.searchParams.set("_HLS_throughput",""+l)}const a={responseType:"json",url:n.href},r=t.steeringManifestLoadPolicy.default,o=r.errorRetry||r.timeoutRetry||{},d={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},c={onSuccess:(l,f,p,g)=>{this.log(`Loaded steering manifest: "${n}"`);const y=l.data;if((y==null?void 0:y.VERSION)!==1){this.log(`Steering VERSION ${y.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=y.TTL;const{"RELOAD-URI":A,"PATHWAY-CLONES":C,"PATHWAY-PRIORITY":I}=y;if(A)try{this.uri=new self.URL(A,n).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${A}`);return}this.scheduleRefresh(this.uri||p.url),C&&this.clonePathways(C);const P={steeringManifest:y,url:n.toString()};this.hls.trigger(V.STEERING_MANIFEST_LOADED,P),I&&this.updatePathwayPriority(I)},onError:(l,f,p,g)=>{if(this.log(`Error loading steering manifest: ${l.code} ${l.text} (${f.url})`),this.stopLoad(),l.code===410){this.enabled=!1,this.log(`Steering manifest ${f.url} no longer available`);return}let y=this.timeToLoad*1e3;if(l.code===429){const A=this.loader;if(typeof(A==null?void 0:A.getResponseHeader)=="function"){const C=A.getResponseHeader("Retry-After");C&&(y=parseFloat(C)*1e3)}this.log(`Steering manifest ${f.url} rate limited`);return}this.scheduleRefresh(this.uri||f.url,y)},onTimeout:(l,f,p)=>{this.log(`Timeout loading steering manifest (${f.url})`),this.scheduleRefresh(this.uri||f.url)}};this.log(`Requesting steering manifest: ${n}`),this.loader.load(a,d,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;const n=(i=this.hls)==null?void 0:i.media;if(n&&!n.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function ou(s,e,t,i){s&&Object.keys(e).forEach(n=>{const a=s.filter(r=>r.groupId===n).map(r=>{const o=Pi({},r);return o.details=void 0,o.attrs=new ji(o.attrs),o.url=o.attrs.URI=Hf(r.url,r.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[n],o.attrs["PATHWAY-ID"]=i,o});s.push(...a)})}function Hf(s,e,t,i){const{HOST:n,PARAMS:a,[t]:r}=i;let o;e&&(o=r==null?void 0:r[e],o&&(s=o));const d=new self.URL(s);return n&&!o&&(d.host=n),a&&Object.keys(a).sort().forEach(c=>{c&&d.searchParams.set(c,a[c])}),d.href}class Wr extends Mn{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Wr.CDMCleanupPromise?[Wr.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:i,initData:n}=t,a=`"${t.type}" event: init data type: "${i}"`;if(this.debug(a),n!==null){if(!this.keyFormatPromise){let r=Object.keys(this.keySystemAccessPromises);r.length||(r=ss(this.config));const o=r.map(Eo).filter(d=>!!d);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(r=>{const o=ea(r);if(i!=="sinf"||o!==Hi.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${i}" for selected key-system ${o}`);return}let d;try{const g=rn(new Uint8Array(n)),y=Hl(JSON.parse(g).sinf),A=Fh(y);if(!A)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");d=new Uint8Array(A.subarray(8,24))}catch(g){this.warn(`${a} Failed to parse sinf: ${g}`);return}const c=fn(d),{keyIdToKeySessionPromise:l,mediaKeySessions:f}=this;let p=l[c];for(let g=0;g<f.length;g++){const y=f[g],A=y.decryptdata;if(!A.keyId)continue;const C=fn(A.keyId);if(Aa(d,A.keyId)||A.uri.replace(/-/g,"").indexOf(c)!==-1){if(p=l[C],!p)continue;if(A.pssh)break;delete l[C],A.pssh=new Uint8Array(n),A.keyId=d,p=l[c]=p.then(()=>this.generateRequestWithPreferredKeySession(y,i,n,"encrypted-event-key-match")),p.catch(I=>this.handleError(I));break}}p||this.handleError(new Error(`Key ID ${c} not encountered in playlist. Key-system sessions ${f.length}.`))}).catch(r=>this.handleError(r))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(V.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(V.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(V.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(V.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(V.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(V.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(V.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(V.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,n=t==null?void 0:t[e];if(n)return n.licenseUrl;if(e===Hi.WIDEVINE&&i)return i}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t==null?void 0:t[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,i=(r,o,d)=>!!r&&d.indexOf(r)===o,n=t.map(r=>r.audioCodec).filter(i),a=t.map(r=>r.videoCodec).filter(i);return n.length+a.length===0&&a.push("avc1.42e01e"),new Promise((r,o)=>{const d=c=>{const l=c.shift();this.getMediaKeysPromise(l,n,a).then(f=>r({keySystem:l,mediaKeys:f})).catch(f=>{c.length?d(c):f instanceof En?o(f):o(new En({type:Gt.KEY_SYSTEM_ERROR,details:je.KEY_SYSTEM_NO_ACCESS,error:f,fatal:!0},f.message))})};d(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let n=`Configured requestMediaKeySystemAccess is not a function ${i}`;return ef===null&&self.location.protocol==="http:"&&(n=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(n))}return i(e,t)}getMediaKeysPromise(e,t,i){var n;const a=hb(e,t,i,this.config.drmSystemOptions||{});let r=this.keySystemAccessPromises[e],o=(n=r)==null?void 0:n.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Ni(a)}`),o=this.requestMediaKeySystemAccess(e,a);const d=r=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),o.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const l=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const f=d.mediaKeys=c.createMediaKeys().then(p=>(this.log(`Media-keys created for "${e}"`),d.hasMediaKeys=!0,l.then(g=>g?this.setMediaKeysServerCertificate(p,e,g):p)));return f.catch(p=>{this.error(`Failed to create media-keys for "${e}"}: ${p}`)}),f})}return o.then(()=>r.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${fn(e.keyId||[])} keyUri: ${e.uri}`);const n=i.createSession(),a={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:n,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),n=Bs(t),a="cenc";this.keyIdToKeySessionPromise[n]=this.generateRequestWithPreferredKeySession(i,a,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyId ${fn(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),i.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Eo(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:i})=>this.attemptSetMediaKeys(t,i))}selectKeySystem(e){return new Promise((t,i)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:n})=>{const a=Eo(n);a?t(a):i(new Error(`Unable to find format for key-system "${n}"`))}).catch(i)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=ss(this.config),i=e.map(ea).filter(n=>!!n&&t.indexOf(n)!==-1);return this.selectKeySystem(i)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let i=0;i<t.length;i++){const n=PS(e,t[i]);if(n)return n}}loadKey(e){const t=e.keyInfo.decryptdata,i=Bs(t),n=this.bannedKeyIds[i];if(n||this.getKeyStatus(t)==="internal-error"){const o=lu(n||"internal-error",t);return this.handleError(o,e.frag),Promise.reject(o)}const a=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${a}`);const r=this.keyIdToKeySessionPromise[i];if(!r){const o=this.getKeySystemForKeyPromise(t).then(({keySystem:d,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${a}`),this.attemptSetMediaKeys(d,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:d,mediaKeys:c,decryptdata:t}))))).then(d=>{const c="cenc",l=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(d,c,l,"playlist-key")});return o.catch(d=>this.handleError(d,e.frag)),this.keyIdToKeySessionPromise[i]=o,o}return r.catch(o=>{if(o instanceof En){const d=Ii({},o.data);this.getKeyStatus(t)==="internal-error"&&(d.decryptdata=t);const c=new En(d,o.message);this.handleError(c,e.frag)}}),r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof En){t&&(e.data.frag=t);const i=e.data.decryptdata;this.error(`${e.message}${i?` (${fn(i.keyId||[])})`:""}`),this.hls.trigger(V.ERROR,e.data)}else this.error(e.message),this.hls.trigger(V.ERROR,{type:Gt.KEY_SYSTEM_ERROR,details:je.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=Bs(e),i=this.keyIdToKeySessionPromise[t];if(!i){const n=ea(e.keyFormat),a=n?[n]:ss(this.config);return this.attemptKeySystemAccess(a)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=ss(this.config)),e.length===0)throw new En({type:Gt.KEY_SYSTEM_ERROR,details:je.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Ni({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const n=Promise.all(i).then(()=>this.media?this.media.setMediaKeys(t):new Promise((a,r)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return r(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(a).catch(r)}}));return this.mediaKeys=t,this.setMediaKeysQueue.push(n),n.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(n),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(a=>i.indexOf(a)===-1)})}generateRequestWithPreferredKeySession(e,t,i,n){var a;const r=(a=this.config.drmSystems)==null||(a=a[e.keySystem])==null?void 0:a.generateRequest;if(r)try{const y=r.call(this.hls,t,i,e);if(!y)throw new Error("Invalid response from configured generateRequest filter");t=y.initDataType,i=y.initData?y.initData:null,e.decryptdata.pssh=i?new Uint8Array(i):null}catch(y){if(this.warn(y.message),this.hls&&this.hls.config.debug)throw y}if(i===null)return this.log(`Skipping key-session request for "${n}" (no initData)`),Promise.resolve(e);const o=Bs(e.decryptdata),d=e.decryptdata.uri;this.log(`Generating key-session request for "${n}" keyId: ${o} URI: ${d} (init data type: ${t} length: ${i.byteLength})`);const c=new zl,l=e._onmessage=y=>{const A=e.mediaKeysSession;if(!A){c.emit("error",new Error("invalid state"));return}const{messageType:C,message:I}=y;this.log(`"${C}" message event for session "${A.sessionId}" message size: ${I.byteLength}`),C==="license-request"||C==="license-renewal"?this.renewLicense(e,I).catch(P=>{c.eventNames().length?c.emit("error",P):this.handleError(P)}):C==="license-release"?e.keySystem===Hi.FAIRPLAY&&this.updateKeySession(e,sl("acknowledged")).then(()=>this.removeSession(e)).catch(P=>this.handleError(P)):this.warn(`unhandled media key message type "${C}"`)},f=(y,A)=>{A.keyStatus=y;let C;y.startsWith("usable")?c.emit("resolved"):y==="internal-error"||y==="output-restricted"||y==="output-downscaled"?C=lu(y,A.decryptdata):y==="expired"?C=new Error(`key expired (keyId: ${o})`):y==="released"?C=new Error("key released"):y==="status-pending"||this.warn(`unhandled key status change "${y}" (keyId: ${o})`),C&&(c.eventNames().length?c.emit("error",C):this.handleError(C))},p=e._onkeystatuseschange=y=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}const C=this.getKeyStatuses(e);if(!Object.keys(C).some(G=>C[G]!=="status-pending"))return;if(C[o]==="expired"){this.log(`Expired key ${Ni(C)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let P=C[o];if(P)f(P,e);else{var M;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(M=e.keyStatusTimeouts)[o]||(M[o]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const Z=this.getKeyStatus(e.decryptdata);if(Z&&Z!=="status-pending")return this.log(`No status for keyId ${o} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${Z} from other session.`),f(Z,e);this.log(`key status for ${o} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),P="internal-error",f(P,e)},1e3)),this.log(`No status for keyId ${o} (${Ni(C)}).`)}};yn(e.mediaKeysSession,"message",l),yn(e.mediaKeysSession,"keystatuseschange",p);const g=new Promise((y,A)=>{c.on("error",A),c.on("resolved",y)});return e.mediaKeysSession.generateRequest(t,i).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${o} URI: ${d}`)}).catch(y=>{throw new En({type:Gt.KEY_SYSTEM_ERROR,details:je.KEY_SYSTEM_NO_SESSION,error:y,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${y}`)}).then(()=>g).catch(y=>(c.removeAllListeners(),this.removeSession(e).then(()=>{throw y}))).then(()=>(c.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((i,n)=>{if(typeof n=="string"&&typeof i=="object"){const o=n;n=i,i=o}const a="buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n);if(e.keySystem===Hi.PLAYREADY&&a.length===16){const o=fn(a);t[o]=i,Qh(a)}const r=fn(a);i==="internal-error"&&(this.bannedKeyIds[r]=i),this.log(`key status change "${i}" for keyStatuses keyId: ${r} key-session "${e.mediaKeysSession.sessionId}"`),t[r]=i}),t}fetchServerCertificate(e){const t=this.config,i=t.loader,n=new i(t),a=this.getServerCertificateUrl(e);return a?(this.log(`Fetching server certificate for "${e}"`),new Promise((r,o)=>{const d={responseType:"arraybuffer",url:a},c=t.certLoadPolicy.default,l={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(p,g,y,A)=>{r(p.data)},onError:(p,g,y,A)=>{o(new En({type:Gt.KEY_SYSTEM_ERROR,details:je.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:Ii({url:d.url,data:void 0},p)},`"${e}" certificate request failed (${a}). Status: ${p.code} (${p.text})`))},onTimeout:(p,g,y)=>{o(new En({type:Gt.KEY_SYSTEM_ERROR,details:je.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:{url:d.url,data:void 0}},`"${e}" certificate request timed out (${a})`))},onAbort:(p,g,y)=>{o(new Error("aborted"))}};n.load(d,l,f)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise((n,a)=>{e.setServerCertificate(i).then(r=>{this.log(`setServerCertificate ${r?"success":"not supported by CDM"} (${i.byteLength}) on "${t}"`),n(e)}).catch(r=>{a(new En({type:Gt.KEY_SYSTEM_ERROR,details:je.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:r,fatal:!0},r.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(n=>{throw new En({type:Gt.KEY_SYSTEM_ERROR,details:je.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:n,fatal:!1},n.message)}))}unpackPlayReadyKeyMessage(e,t){const i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const n=new DOMParser().parseFromString(i,"application/xml"),a=n.querySelectorAll("HttpHeader");if(a.length>0){let l;for(let f=0,p=a.length;f<p;f++){var r,o;l=a[f];const g=(r=l.querySelector("name"))==null?void 0:r.textContent,y=(o=l.querySelector("value"))==null?void 0:o.textContent;g&&y&&e.setRequestHeader(g,y)}}const d=n.querySelector("Challenge"),c=d==null?void 0:d.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return sl(atob(c))}setupLicenseXHR(e,t,i,n){const a=this.config.licenseXhrSetup;return a?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return a.call(this.hls,e,t,i,n)}).catch(r=>{if(!i.decryptdata)throw r;return e.open("POST",t,!0),a.call(this.hls,e,t,i,n)}).then(r=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:r||n})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:n}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise((n,a)=>{const r=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${r}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let d=o.response;this.log(`License received ${d instanceof ArrayBuffer?d.byteLength:d}`);const c=this.config.licenseResponseCallback;if(c)try{d=c.call(this.hls,o,r,e)}catch(l){this.error(l)}n(d)}else{const d=i.errorRetry,c=d?d.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||o.status>=400&&o.status<500)a(new En({type:Gt.KEY_SYSTEM_ERROR,details:je.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:o,response:{url:r,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${r}). Status: ${o.status} (${o.statusText})`));else{const l=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${l} attempts left`),this.requestLicense(e,t).then(n,a)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,r,e,t).then(({xhr:d,licenseChallenge:c})=>{e.keySystem==Hi.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(d,c)),d.send(c)}).catch(a)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,yn(i,"encrypted",this.onMediaEncrypted),yn(i,"waitingforkey",this.onWaitingForKey);const n=this.mediaResolved;n?n():this.mediaKeys=i.mediaKeys}onMediaDetached(){const e=this.media;e&&(bn(e,"encrypted",this.onMediaEncrypted),bn(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const i=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,hr.clearKeyUriToKeyIdMap();const a=n.length;Wr.CDMCleanupPromise=Promise.all(n.map(r=>this.removeSession(r)).concat((i==null||(e=i.setMediaKeys(null))==null?void 0:e.catch(r=>{this.log(`Could not clear media keys: ${r}`),this.hls&&this.hls.trigger(V.ERROR,{type:Gt.OTHER_ERROR,details:je.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${r}`)})}))||Promise.resolve())).catch(r=>{this.log(`Could not close sessions and clear media keys: ${r}`),this.hls&&this.hls.trigger(V.ERROR,{type:Gt.OTHER_ERROR,details:je.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${r}`)})}).then(()=>{a&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const i=t.reduce((n,a)=>(n.indexOf(a.keyFormat)===-1&&n.push(a.keyFormat),n),[]);this.log(`Selecting key-system from session-keys ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i,decryptdata:n}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${fn((n==null?void 0:n.keyId)||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const a=this.mediaKeySessions.indexOf(e);a>-1&&this.mediaKeySessions.splice(a,1);const{keyStatusTimeouts:r}=e;r&&Object.keys(r).forEach(c=>self.clearTimeout(r[c]));const{drmSystemOptions:o}=this.config;return(pb(o)?new Promise((c,l)=>{self.setTimeout(()=>l(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(c).catch(l)}):Promise.resolve()).catch(c=>{this.log(`Could not remove session: ${c}`),this.hls&&this.hls.trigger(V.ERROR,{type:Gt.OTHER_ERROR,details:je.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${c}`)})}).then(()=>t.close()).catch(c=>{this.log(`Could not close session: ${c}`),this.hls&&this.hls.trigger(V.ERROR,{type:Gt.OTHER_ERROR,details:je.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${c}`)})})}return Promise.resolve()}}Wr.CDMCleanupPromise=void 0;function Bs(s){if(!s)throw new Error("Could not read keyId of undefined decryptdata");if(s.keyId===null)throw new Error("keyId is null");return fn(s.keyId)}function PS(s,e){if(s.keyId&&e.mediaKeysSession.keyStatuses.has(s.keyId))return e.mediaKeysSession.keyStatuses.get(s.keyId);if(s.matches(e.decryptdata))return e.keyStatus}class En extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function lu(s,e){const t=s==="output-restricted",i=t?je.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:je.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new En({type:Gt.KEY_SYSTEM_ERROR,details:i,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${s}"`)}class OS{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(V.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(V.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const n=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=n,n&&typeof n.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,i){const n=performance.now();if(t){if(this.lastTime){const a=n-this.lastTime,r=i-this.lastDroppedFrames,o=t-this.lastDecodedFrames,d=1e3*r/a,c=this.hls;if(c.trigger(V.FPS_DROP,{currentDropped:r,currentDecoded:o,totalDroppedFrames:i}),d>0&&r>c.config.fpsDroppedMonitoringThreshold*o){let l=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),l>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=l)&&(l=l-1,c.trigger(V.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:c.currentLevel}),c.autoLevelCapping=l,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function qf(s,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=s,e.dispatchEvent(t)}function zf(s,e){const t=s.mode;if(t==="disabled"&&(s.mode="hidden"),s.cues&&!s.cues.getCueById(e.id))try{if(s.addCue(e),!s.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){Ri.debug(`[texttrack-utils]: ${i}`);try{const n=new self.TextTrackCue(e.startTime,e.endTime,e.text);n.id=e.id,s.addCue(n)}catch(n){Ri.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${n}`)}}t==="disabled"&&(s.mode=t)}function Vr(s,e){const t=s.mode;if(t==="disabled"&&(s.mode="hidden"),s.cues)for(let i=s.cues.length;i--;)e&&s.cues[i].removeEventListener("enter",e),s.removeCue(s.cues[i]);t==="disabled"&&(s.mode=t)}function pl(s,e,t,i){const n=s.mode;if(n==="disabled"&&(s.mode="hidden"),s.cues&&s.cues.length>0){const a=BS(s.cues,e,t);for(let r=0;r<a.length;r++)(!i||i(a[r]))&&s.removeCue(a[r])}n==="disabled"&&(s.mode=n)}function MS(s,e){if(e<=s[0].startTime)return 0;const t=s.length-1;if(e>s[t].endTime)return-1;let i=0,n=t,a;for(;i<=n;)if(a=Math.floor((n+i)/2),e<s[a].startTime)n=a-1;else if(e>s[a].startTime&&i<t)i=a+1;else return a;return s[i].startTime-e<e-s[n].startTime?i:n}function BS(s,e,t){const i=[],n=MS(s,e);if(n>-1)for(let a=n,r=s.length;a<r;a++){const o=s[a];if(o.startTime>=e&&o.endTime<=t)i.push(o);else if(o.startTime>t)return i}return i}function ra(s){const e=[];for(let t=0;t<s.length;t++){const i=s[t];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(s[t])}return e}class FS extends Zl{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const i=ra(this.media.textTracks);for(let a=0;a<i.length;a++)if(i[a].mode==="hidden")t=i[a];else if(i[a].mode==="showing"){t=i[a];break}const n=this.findTrackForTextTrack(t);this.subtitleTrack!==n&&this.setSubtitleTrack(n)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.LEVEL_LOADING,this.onLevelLoading,this),e.on(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(V.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.LEVEL_LOADING,this.onLevelLoading,this),e.off(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(V.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(V.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const i=this.media;if(!i)return;const n=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||i.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,n)return;ra(i.textTracks).forEach(r=>{Vr(r)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,groupId:n,details:a}=t,r=this.tracksInGroup[i];if(!r||r.groupId!==n){this.warn(`Subtitle track with id:${i} and group:${n} not found in active group ${r==null?void 0:r.groupId}`);return}const o=r.details;r.details=t.details,this.log(`Subtitle track ${i} "${r.name}" lang:${r.lang} group:${n} loaded [${a.startSN}-${a.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.subtitleGroups||null,n=this.groupIds;let a=this.currentTrack;if(!i||(n==null?void 0:n.length)!==(i==null?void 0:i.length)||i!=null&&i.some(r=>(n==null?void 0:n.indexOf(r))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const r=this.tracks.filter(l=>!i||i.indexOf(l.groupId)!==-1);if(r.length)this.selectDefaultTrack&&!r.some(l=>l.default)&&(this.selectDefaultTrack=!1),r.forEach((l,f)=>{l.id=f});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=r;const o=this.hls.config.subtitlePreference;if(!a&&o){this.selectDefaultTrack=!1;const l=Kn(o,r);if(l>-1)a=r[l];else{const f=Kn(o,this.tracks);a=this.tracks[f]}}let d=this.findTrackId(a);d===-1&&a&&(d=this.findTrackId(null));const c={subtitleTracks:r};this.log(`Updating subtitle tracks, ${r.length} track(s) found in "${i==null?void 0:i.join(",")}" group-id`),this.hls.trigger(V.SUBTITLE_TRACKS_UPDATED,c),d!==-1&&this.trackId===-1&&this.setSubtitleTrack(d)}}findTrackId(e){const t=this.tracksInGroup,i=this.selectDefaultTrack;for(let n=0;n<t.length;n++){const a=t[n];if(!(i&&!a.default||!i&&!e)&&(!e||kr(a,e)))return n}if(e){for(let n=0;n<t.length;n++){const a=t[n];if(gs(e.attrs,a.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const a=t[n];if(gs(e.attrs,a.attrs,["LANGUAGE"]))return n}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const n=t[i];if(dl(n,e))return i}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===yi.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const i=this.currentTrack;if(i&&kr(e,i))return i;const n=Kn(e,this.tracksInGroup);if(n>-1){const a=this.tracksInGroup[n];return this.setSubtitleTrack(n),a}else{if(i)return null;{const a=Kn(e,t);if(a>-1)return t[a]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,n=e.groupId,a=this.getUrlWithDirectives(e.url,t),r=e.details,o=r==null?void 0:r.age;this.log(`Loading subtitle ${i} "${e.name}" lang:${e.lang} group:${n}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&r.live?" age "+o.toFixed(1)+(r.type&&" "+r.type||""):""} ${a}`),this.hls.trigger(V.SUBTITLE_TRACK_LOADING,{url:a,id:i,groupId:n,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=ra(e.textTracks),i=this.currentTrack;let n;if(i&&(n=t.filter(a=>dl(i,a))[0],n||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(t).forEach(a=>{a.mode!=="disabled"&&a!==n&&(a.mode="disabled")}),n){const a=this.subtitleDisplay?"showing":"hidden";n.mode!==a&&(n.mode=a)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!wt(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,n=t[e]||null;if(this.trackId=e,this.currentTrack=n,this.toggleTrackModes(),!n){this.hls.trigger(V.SUBTITLE_TRACK_SWITCH,{id:e});return}const a=!!n.details&&!n.details.live;if(e===this.trackId&&n===i&&a)return;this.log(`Switching to subtitle-track ${e}`+(n?` "${n.name}" lang:${n.lang} group:${n.groupId}`:""));const{id:r,groupId:o="",name:d,type:c,url:l}=n;this.hls.trigger(V.SUBTITLE_TRACK_SWITCH,{id:r,groupId:o,name:d,type:c,url:l});const f=this.switchParams(n.url,i==null?void 0:i.details,n.details);this.loadPlaylist(f)}}function NS(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const a=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n=="x"?a:a&3|8).toString(16)})}}}function ls(s){let e=5381,t=s.length;for(;t;)e=e*33^s.charCodeAt(--t);return(e>>>0).toString()}const Yr=.025;let xa=function(s){return s[s.Point=0]="Point",s[s.Range=1]="Range",s}({});function US(s,e,t){return`${s.identifier}-${t+1}-${ls(e)}`}class $S{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const i=this.playoutLimit;return e<=0||isNaN(i)?!1:i===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>i}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Do(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,i=Do(t,e);return t-i<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=wt(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Do(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Yr))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?xa.Range:xa.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return GS(this)}}function Do(s,e){return s-e.start<e.duration/2&&!(Math.abs(s-(e.start+e.duration))<Yr)?e.start:e.start+e.duration}function Kf(s,e,t){const i=new self.URL(s,t);return i.protocol!=="data:"&&i.searchParams.set("_HLS_primary_id",e),i}function Po(s,e){for(;(t=s.assetList[++e])!=null&&t.error;)var t;return e}function GS(s){return`["${s.identifier}" ${s.cue.pre?"<pre>":s.cue.post?"<post>":""}${s.timelineStart.toFixed(2)}-${s.resumeTime.toFixed(2)}]`}function $r(s){const e=s.timelineStart,t=s.duration||0;return`["${s.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class VS{constructor(e,t,i,n){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(V.PLAYOUT_LIMIT_REACHED,{})};const a=this.hls=new e(t);this.interstitial=i,this.assetItem=n;const r=()=>{this.hasDetails=!0};a.once(V.LEVEL_LOADED,r),a.once(V.AUDIO_TRACK_LOADED,r),a.once(V.SUBTITLE_TRACK_LOADED,r),a.on(V.MEDIA_ATTACHING,(o,{media:d})=>{this.removeMediaListeners(),this.mediaAttached=d,this.interstitial.playoutLimit&&(d.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&a.on(V.BUFFER_APPENDED,()=>{const l=this.bufferedEnd;this.reachedPlayout(l)&&(this._bufferedEosTime=l,a.trigger(V.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=Kf(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const i=Math.min(this._bufferedEosTime||1/0,this.duration),n=this.timelineOffset,a=li.bufferInfo(e,n,0);return this.getAssetTime(a.end)>=i-.02}reachedPlayout(e){const i=this.interstitial.playoutLimit;return this.startOffset+e>=i}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=li.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const i=t-this.startOffset;if(i>0&&i<e)return i}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const i=e-t;if(Math.abs(i)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,i=this.duration;return Math.min(Math.max(0,e-t),i)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=i=>delete i.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,i){var n;(n=this.hls)==null||n.on(e,t)}once(e,t,i){var n;(n=this.hls)==null||n.once(e,t)}off(e,t,i){var n;(n=this.hls)==null||n.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${$r(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const cu=.033;class jS extends Mn{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((i,n)=>e<=n.startOffset&&t>n.startOffset?(delete n.error,i+1):i,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let i=-1;e.nextEvent?i=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(i=this.findEventIndex(e.previousEvent.identifier)+1);const n=this.items;if(n)for(n[i]||(t===void 0&&(t=e.start),i=this.findItemIndexAtTime(t));i>=0&&(a=n[i])!=null&&a.event;){var a;i--}return i}findItemIndexAtTime(e,t){const i=this.items;if(i)for(let n=0;n<i.length;n++){let a=i[n];if(t&&t!=="primary"&&(a=a[t]),e===a.start||e>a.start&&e<a.end)return n}return-1}findJumpRestrictedIndex(e,t){const i=this.items;if(i)for(let n=e;n<=t&&i[n];n++){const a=i[n].event;if(a!=null&&a.restrictions.jump&&!a.appendInPlace)return n}return-1}findEventIndex(e){const t=this.items;if(t)for(let n=t.length;n--;){var i;if(((i=t[n].event)==null?void 0:i.identifier)===e)return n}return-1}findAssetIndex(e,t){const i=e.assetList,n=i.length;if(n>1)for(let a=0;a<n;a++){const r=i[a];if(!r.error){const o=r.timelineStart;if(t===o||t>o&&(t<o+(r.duration||0)||a===n-1))return a}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const i=t.assetList,n=i[i.length-1];if(n)return n.identifier}return null}parseInterstitialDateRanges(e,t){const i=e.main.details,{dateRanges:n}=i,a=this.events,r=this.parseDateRanges(n,{url:i.url},t),o=Object.keys(n),d=a?a.filter(c=>!o.includes(c.identifier)):[];r.length&&r.sort((c,l)=>{const f=c.cue.pre,p=c.cue.post,g=l.cue.pre,y=l.cue.post;if(f&&!g)return-1;if(g&&!f||p&&!y)return 1;if(y&&!p)return-1;if(!f&&!g&&!p&&!y){const A=c.startTime,C=l.startTime;if(A!==C)return A-C}return c.dateRange.tagOrder-l.dateRange.tagOrder}),this.events=r,d.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(e,d)}updateSchedule(e,t=[],i=!1){const n=this.events||[];if(n.length||t.length||this.length<2){const a=this.items,r=this.parseSchedule(n,e);(i||t.length||(a==null?void 0:a.length)!==r.length||r.some((d,c)=>Math.abs(d.playout.start-a[c].playout.start)>.005||Math.abs(d.playout.end-a[c].playout.end)>.005))&&(this.items=r,this.onScheduleUpdate(t,a))}}parseDateRanges(e,t,i){const n=[],a=Object.keys(e);for(let r=0;r<a.length;r++){const o=a[r],d=e[o];if(d.isInterstitial){let c=this.eventMap[o];c?c.setDateRange(d):(c=new $S(d,t),this.eventMap[o]=c,i===!1&&(c.appendInPlace=i)),n.push(c)}}return n}parseSchedule(e,t){const i=[],n=t.main.details,a=n.live?1/0:n.edge;let r=0;if(e=e.filter(d=>!d.error&&!(d.cue.once&&d.hasPlayed)),e.length){this.resolveOffsets(e,t);let d=0,c=0;if(e.forEach((l,f)=>{const p=l.cue.pre,g=l.cue.post,y=e[f-1]||null,A=l.appendInPlace,C=g?a:l.startOffset,I=l.duration,P=l.timelineOccupancy===xa.Range?I:0,M=l.resumptionOffset,G=(y==null?void 0:y.startTime)===C,Z=C+l.cumulativeDuration;let le=A?Z+I:C+M;if(p||!g&&C<=0){const N=c;c+=P,l.timelineStart=Z;const U=r;r+=I,i.push({event:l,start:Z,end:le,playout:{start:U,end:r},integrated:{start:N,end:c}})}else if(C<=a){if(!G){const O=C-d;if(O>cu){const z=d,ce=c;c+=O;const be=r;r+=O;const Le={previousEvent:e[f-1]||null,nextEvent:l,start:z,end:z+O,playout:{start:be,end:r},integrated:{start:ce,end:c}};i.push(Le)}else O>0&&y&&(y.cumulativeDuration+=O,i[i.length-1].end=C)}g&&(le=Z),l.timelineStart=Z;const N=c;c+=P;const U=r;r+=I,i.push({event:l,start:Z,end:le,playout:{start:U,end:r},integrated:{start:N,end:c}})}else return;const W=l.resumeTime;g||W>a?d=a:d=W}),d<a){var o;const l=d,f=c,p=a-d;c+=p;const g=r;r+=p,i.push({previousEvent:((o=i[i.length-1])==null?void 0:o.event)||null,nextEvent:null,start:d,end:l+p,playout:{start:g,end:r},integrated:{start:f,end:c}})}this.setDurations(a,r,c)}else i.push({previousEvent:null,nextEvent:null,start:0,end:a,playout:{start:0,end:a},integrated:{start:0,end:a}}),this.setDurations(a,a,a);return i}setDurations(e,t,i){this.durations={primary:e,playout:t,integrated:i}}resolveOffsets(e,t){const i=t.main.details,n=i.live?1/0:i.edge;let a=0,r=-1;e.forEach((o,d)=>{const c=o.cue.pre,l=o.cue.post,f=c?0:l?n:o.startTime;this.updateAssetDurations(o),r===f?o.cumulativeDuration=a:(a=0,r=f),!l&&o.snapOptions.in&&(o.resumeAnchor=Ir(null,i.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&d+1<e.length&&e[d+1].startTime-e[d].resumeTime<cu&&(e[d+1].appendInPlace=!1,e[d+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const g=wt(o.resumeOffset)?o.resumeOffset:o.duration;a+=g})}primaryCanResumeInPlaceAt(e,t){const i=e.resumeTime,n=e.startTime+e.resumptionOffset;return Math.abs(i-n)>Yr?(this.log(`"${e.identifier}" resumption ${i} not aligned with estimated timeline end ${n}`),!1):!Object.keys(t).some(r=>{const o=t[r].details,d=o.edge;if(i>=d)return this.log(`"${e.identifier}" resumption ${i} past ${r} playlist end ${d}`),!1;const c=Ir(null,o.fragments,i);if(!c)return this.log(`"${e.identifier}" resumption ${i} does not align with any fragments in ${r} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const l=r==="audio"?.175:0;return Math.abs(c.start-i)<Yr+l||Math.abs(c.end-i)<Yr+l?!1:(this.log(`"${e.identifier}" resumption ${i} not aligned with ${r} fragment bounds (${c.start}-${c.end} sn: ${c.sn} cc: ${c.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let i=0,n=!1,a=!1;for(let r=0;r<e.assetList.length;r++){const o=e.assetList[r],d=t+i;o.startOffset=i,o.timelineStart=d,n||(n=o.duration===null),a||(a=!!o.error);const c=o.error?0:o.duration||0;i+=c}n&&!a?e.duration=Math.max(i,e.duration):e.duration=i}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Fn(s){return`[${s.event?'"'+s.event.identifier+'"':"primary"}: ${s.start.toFixed(2)}-${s.end.toFixed(2)}]`}class HS{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const i=e.assetListUrl;let n;try{n=Kf(i,this.hls.sessionId,e.baseUrl)}catch(p){const g=this.assignAssetListError(e,je.ASSET_LIST_LOAD_ERROR,p,i);this.hls.trigger(V.ERROR,g);return}t&&n.protocol!=="data:"&&n.searchParams.set("_HLS_start_offset",""+t);const a=this.hls.config,r=a.loader,o=new r(a),d={responseType:"json",url:n.href},c=a.interstitialAssetListLoadPolicy.default,l={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(p,g,y,A)=>{const C=p.data,I=C==null?void 0:C.ASSETS;if(!Array.isArray(I)){const P=this.assignAssetListError(e,je.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),y.url,g,A);this.hls.trigger(V.ERROR,P);return}e.assetListResponse=C,this.hls.trigger(V.ASSET_LIST_LOADED,{event:e,assetListResponse:C,networkDetails:A})},onError:(p,g,y,A)=>{const C=this.assignAssetListError(e,je.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${p.code} ${p.text} (${g.url})`),g.url,A,y);this.hls.trigger(V.ERROR,C)},onTimeout:(p,g,y)=>{const A=this.assignAssetListError(e,je.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${g.url})`),g.url,p,y);this.hls.trigger(V.ERROR,A)}};return o.load(d,l,f),this.hls.trigger(V.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,t,i,n,a,r){return e.error=i,{type:Gt.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:n,error:i,networkDetails:r,stats:a}}}function du(s){var e;s==null||(e=s.play())==null||e.catch(()=>{})}function Fs(s,e){return`[${s}] Advancing timeline position to ${e}`}class qS extends Mn{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled||!this.schedule)return;const n=i-this.timelinePos;if(Math.abs(n)<1/7056e5)return;const r=n<=-.01;this.timelinePos=i,this.bufferedPos=i;const o=this.playingItem;if(!o){this.checkBuffer();return}if(r&&this.schedule.resetErrorsInRange(i,i-n)&&this.updateSchedule(!0),this.checkBuffer(),r&&i<o.start||i>=o.end){var d;const g=this.findItemIndex(o);let y=this.schedule.findItemIndexAtTime(i);if(y===-1&&(y=g+(r?-1:1),this.log(`seeked ${r?"back ":""}to position not covered by schedule ${i} (resolving from ${g} to ${y})`)),!this.isInterstitial(o)&&(d=this.media)!=null&&d.paused&&(this.shouldPlay=!1),!r&&y>g){const A=this.schedule.findJumpRestrictedIndex(g+1,y);if(A>g){this.setSchedulePosition(A);return}}this.setSchedulePosition(y);return}const c=this.playingAsset;if(!c){if(this.playingLastItem&&this.isInterstitial(o)){const g=o.event.assetList[0];g&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(i,g))}return}const l=c.timelineStart,f=c.duration||0;if(r&&i<l||i>=l+f){var p;(p=o.event)!=null&&p.appendInPlace&&(this.clearAssetPlayers(o.event,o),this.flushFrontBuffer(i)),this.setScheduleToAssetAtTime(i,c)}},this.onTimeupdate=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled)return;if(i>this.timelinePos)this.timelinePos=i,i>this.bufferedPos&&this.checkBuffer();else return;const n=this.playingItem;if(!n||this.playingLastItem)return;if(i>=n.end){this.timelinePos=n.end;const o=this.findItemIndex(n);this.setSchedulePosition(o+1)}const a=this.playingAsset;if(!a)return;const r=a.timelineStart+(a.duration||0);i>=r&&this.setScheduleToAssetAtTime(i,a)},this.onScheduleUpdate=(i,n)=>{const a=this.schedule;if(!a)return;const r=this.playingItem,o=a.events||[],d=a.items||[],c=a.durations,l=i.map(A=>A.identifier),f=!!(o.length||l.length);(f||n)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${d.map(A=>Fn(A))} pos: ${this.timelinePos}`),l.length&&this.log(`Removed events ${l}`);let p=null,g=null;r&&(p=this.updateItem(r,this.timelinePos),this.itemsMatch(r,p)?this.playingItem=p:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const y=this.bufferingItem;if(y&&(g=this.updateItem(y,this.bufferedPos),this.itemsMatch(y,g)?this.bufferingItem=g:y.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(y.event,null))),i.forEach(A=>{A.assetList.forEach(C=>{this.clearAssetPlayer(C.identifier,null)})}),this.playerQueue.forEach(A=>{if(A.interstitial.appendInPlace){const C=A.assetItem.timelineStart,I=A.timelineOffset-C;if(I)try{A.timelineOffset=C}catch(P){Math.abs(I)>Yr&&this.warn(`${P} ("${A.assetId}" ${A.timelineOffset}->${C})`)}}}),f||n){if(this.hls.trigger(V.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:d.slice(0),durations:c,removedIds:l}),this.isInterstitial(r)&&l.includes(r.event.identifier)){this.warn(`Interstitial "${r.event.identifier}" removed while playing`),this.primaryFallback(r.event);return}r&&this.trimInPlace(p,r),y&&g!==p&&this.trimInPlace(g,y),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new HS(e),this.schedule=new jS(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(V.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(V.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(V.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(V.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(V.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(V.BUFFER_APPENDED,this.onBufferAppended,this),e.on(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(V.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(V.MEDIA_ENDED,this.onMediaEnded,this),e.on(V.ERROR,this.onError,this),e.on(V.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(V.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(V.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(V.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(V.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(V.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(V.BUFFER_CODECS,this.onBufferCodecs,this),e.off(V.BUFFER_APPENDED,this.onBufferAppended,this),e.off(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(V.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(V.MEDIA_ENDED,this.onMediaEnded,this),e.off(V.ERROR,this.onError,this),e.off(V.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){bn(e,"play",this.onPlay),bn(e,"pause",this.onPause),bn(e,"seeking",this.onSeeking),bn(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const i=this.media=t.media;yn(i,"seeking",this.onSeeking),yn(i,"timeupdate",this.onTimeupdate),yn(i,"play",this.onPlay),yn(i,"pause",this.onPause)}onMediaAttached(e,t){const i=this.effectivePlayingItem,n=this.detachedData;if(this.detachedData=null,i===null)this.checkStart();else if(!n){this.clearScheduleState();const a=this.findItemIndex(i);this.setSchedulePosition(a)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const i=!!t.transferMedia,n=this.media;if(this.media=null,!i&&(n&&this.removeMediaListeners(n),this.detachedData)){const a=this.getBufferingPlayer();a&&(this.log(`Removing schedule state for detachedData and ${a}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,a.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,i=f=>f&&e.getAssetPlayer(f.identifier),n=(f,p,g,y,A)=>{if(f){let C=f[p].start;const I=f.event;if(I){if(p==="playout"||I.timelineOccupancy!==xa.Point){const P=i(g);(P==null?void 0:P.interstitial)===I&&(C+=P.assetItem.startOffset+P[A])}}else{const P=y==="bufferedPos"?r():e[y];C+=P-f.start}return C}return 0},a=(f,p)=>{var g;if(f!==0&&p!=="primary"&&(g=e.schedule)!=null&&g.length){var y;const A=e.schedule.findItemIndexAtTime(f),C=(y=e.schedule.items)==null?void 0:y[A];if(C){const I=C[p].start-C.start;return f+I}}return f},r=()=>{const f=e.bufferedPos;return f===Number.MAX_VALUE?o("primary"):Math.max(f,0)},o=f=>{var p,g;return(p=e.primaryDetails)!=null&&p.live?e.primaryDetails.edge:((g=e.schedule)==null?void 0:g.durations[f])||0},d=(f,p)=>{var g,y;const A=e.effectivePlayingItem;if(A!=null&&(g=A.event)!=null&&g.restrictions.skip||!e.schedule)return;e.log(`seek to ${f} "${p}"`);const C=e.effectivePlayingItem,I=e.schedule.findItemIndexAtTime(f,p),P=(y=e.schedule.items)==null?void 0:y[I],M=e.getBufferingPlayer(),G=M==null?void 0:M.interstitial,Z=G==null?void 0:G.appendInPlace,le=C&&e.itemsMatch(C,P);if(C&&(Z||le)){const W=i(e.playingAsset),N=(W==null?void 0:W.media)||e.primaryMedia;if(N){const U=p==="primary"?N.currentTime:n(C,p,e.playingAsset,"timelinePos","currentTime"),O=f-U,z=(Z?U:N.currentTime)+O;if(z>=0&&(!W||Z||z<=W.duration)){N.currentTime=z;return}}}if(P){let W=f;if(p!=="primary"){const U=P[p].start,O=f-U;W=P.start+O}const N=!e.isInterstitial(P);if((!e.isInterstitial(C)||C.event.appendInPlace)&&(N||P.event.appendInPlace)){const U=e.media||(Z?M==null?void 0:M.media:null);U&&(U.currentTime=W)}else if(C){const U=e.findItemIndex(C);if(I>U){const z=e.schedule.findJumpRestrictedIndex(U+1,I);if(z>U){e.setSchedulePosition(z);return}}let O=0;if(N)e.timelinePos=W,e.checkBuffer();else{const z=P.event.assetList,ce=f-(P[p]||P).start;for(let be=z.length;be--;){const Le=z[be];if(Le.duration&&ce>=Le.startOffset&&ce<Le.startOffset+Le.duration){O=be;break}}}e.setSchedulePosition(I,O)}}},c=()=>{const f=e.effectivePlayingItem;if(e.isInterstitial(f))return f;const p=t();return e.isInterstitial(p)?p:null},l={get bufferedEnd(){const f=t(),p=e.bufferingItem;if(p&&p===f){var g;return n(p,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-p.playout.start||((g=e.bufferingAsset)==null?void 0:g.startOffset)||0}return 0},get currentTime(){const f=c(),p=e.effectivePlayingItem;return p&&p===f?n(p,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-p.playout.start:0},set currentTime(f){const p=c(),g=e.effectivePlayingItem;g&&g===p&&d(f+g.playout.start,"playout")},get duration(){const f=c();return f?f.playout.end-f.playout.start:0},get assetPlayers(){var f;const p=(f=c())==null?void 0:f.event.assetList;return p?p.map(g=>e.getAssetPlayer(g.identifier)):[]},get playingIndex(){var f;const p=(f=c())==null?void 0:f.event;return p&&e.effectivePlayingAsset?p.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return c()}};return this.manager={get events(){var f;return((f=e.schedule)==null||(f=f.events)==null?void 0:f.slice(0))||[]},get schedule(){var f;return((f=e.schedule)==null||(f=f.items)==null?void 0:f.slice(0))||[]},get interstitialPlayer(){return c()?l:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const f=t();return e.findItemIndex(f)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const f=e.effectivePlayingItem;return e.findItemIndex(f)},primary:{get bufferedEnd(){return r()},get currentTime(){const f=e.timelinePos;return f>0?f:0},set currentTime(f){d(f,"primary")},get duration(){return o("primary")},get seekableStart(){var f;return((f=e.primaryDetails)==null?void 0:f.fragmentStart)||0}},integrated:{get bufferedEnd(){return n(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return n(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(f){d(f,"integrated")},get duration(){return o("integrated")},get seekableStart(){var f;return a(((f=e.primaryDetails)==null?void 0:f.fragmentStart)||0,"integrated")}},skip:()=>{const f=e.effectivePlayingItem,p=f==null?void 0:f.event;if(p&&!p.restrictions.skip){const g=e.findItemIndex(f);if(p.appendInPlace){const y=f.playout.start+f.event.duration;d(y+.001,"playout")}else e.advanceAfterAssetEnded(p,g,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,i=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!i?!1:this.findItemIndex(t)===i.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const i=this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&!i.event.appendInPlace)return;let n=this.media;!n&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(n=this.primaryMedia);const a=(t=n)==null?void 0:t.currentTime;if(!(a===void 0||!wt(a)))return a}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const i=this.getAssetPlayer(e);i&&this.transferMediaFromPlayer(i,t)}transferMediaFromPlayer(e,t){const i=e.interstitial.appendInPlace,n=e.media;if(i&&n===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&n){this.detachedData={media:n};return}const a=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Ni(a)}`),this.detachedData=a}else t&&n&&(this.shouldPlay||(this.shouldPlay=!n.paused))}transferMediaTo(e,t){var i,n;if(e.media===t)return;let a=null;const r=this.hls,o=e!==r,d=o&&e.interstitial.appendInPlace,c=(i=this.detachedData)==null?void 0:i.mediaSource;let l;if(r.media)d&&(a=r.transferMedia(),this.detachedData=a),l="Primary";else if(c){const y=this.getBufferingPlayer();y?(a=y.transferMedia(),l=`${y}`):l="detached MediaSource"}else l="detached media";if(!a){if(c)a=this.detachedData,this.log(`using detachedData: MediaSource ${Ni(a)}`);else if(!this.detachedData||r.media===t){const y=this.playerQueue;y.length>1&&y.forEach(A=>{if(o&&A.interstitial.appendInPlace!==d){const C=A.interstitial;this.clearInterstitial(A.interstitial,null),C.appendInPlace=!1,C.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${C}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const f=a&&"mediaSource"in a&&((n=a.mediaSource)==null?void 0:n.readyState)!=="closed",p=f&&a?a:t;this.log(`${f?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${l} (media.currentTime: ${t.currentTime})`);const g=this.schedule;if(p===a&&g){const y=o&&e.assetId===g.assetIdAtEnd;p.overrides={duration:g.duration,endOfStream:!o||y,cueRemoval:!o}}e.attachMedia(p)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e==null?void 0:e.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const i=this.timelinePos,n=this.effectivePlayingItem;if(i===-1){const a=this.hls.startPosition;if(this.log(Fs("checkStart",a)),this.timelinePos=a,t.length&&t[0].cue.pre){const r=e.findEventIndex(t[0].identifier);this.setSchedulePosition(r)}else if(a>=0||!this.primaryLive){const r=this.timelinePos=a>0?a:0,o=e.findItemIndexAtTime(r);this.setSchedulePosition(o)}}else if(n&&!this.playingItem){const a=e.findItemIndex(n);this.setSchedulePosition(a)}}advanceAssetBuffering(e,t){const i=e.event,n=i.findAssetIndex(t),a=Po(i,n);if(!i.isAssetPastPlayoutLimit(a))this.bufferedToEvent(e,a);else if(this.schedule){var r;const o=(r=this.schedule.items)==null?void 0:r[this.findItemIndex(e)+1];o&&this.bufferedToItem(o)}}advanceAfterAssetEnded(e,t,i){const n=Po(e,i);if(e.isAssetPastPlayoutLimit(n)){if(this.schedule){const a=this.schedule.items;if(a){const r=t+1,o=a.length;if(r>=o){this.setSchedulePosition(-1);return}const d=e.resumeTime;this.timelinePos<d&&(this.log(Fs("advanceAfterAssetEnded",d)),this.timelinePos=d,e.appendInPlace&&this.advanceInPlace(d),this.checkBuffer(this.bufferedPos<d)),this.setSchedulePosition(r)}}}else{if(e.appendInPlace){const a=e.assetList[n];a&&this.advanceInPlace(a.timelineStart)}this.setSchedulePosition(t,n)}}setScheduleToAssetAtTime(e,t){const i=this.schedule;if(!i)return;const n=t.parentIdentifier,a=i.getEvent(n);if(a){const r=i.findEventIndex(n),o=i.findAssetIndex(a,e);this.advanceAfterAssetEnded(a,r,o-1)}}setSchedulePosition(e,t){var i;const n=(i=this.schedule)==null?void 0:i.items;if(!n||this.playbackDisabled)return;const a=e>=0?n[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${a&&Fn(a)}) pos: ${this.timelinePos}`);const r=this.waitingItem||this.playingItem,o=this.playingLastItem;if(this.isInterstitial(r)){const l=r.event,f=this.playingAsset,p=f==null?void 0:f.identifier,g=p?this.getAssetPlayer(p):null;if(g&&p&&(!this.eventItemsMatch(r,a)||t!==void 0&&p!==l.assetList[t].identifier)){var d;const y=l.findAssetIndex(f);if(this.log(`INTERSTITIAL_ASSET_ENDED ${y+1}/${l.assetList.length} ${$r(f)}`),this.endedAsset=f,this.playingAsset=null,this.hls.trigger(V.INTERSTITIAL_ASSET_ENDED,{asset:f,assetListIndex:y,event:l,schedule:n.slice(0),scheduleIndex:e,player:g}),r!==this.playingItem){this.itemsMatch(r,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(l,this.findItemIndex(this.playingItem),y);return}this.retreiveMediaSource(p,a),g.media&&!((d=this.detachedData)!=null&&d.mediaSource)&&g.detachMedia()}if(!this.eventItemsMatch(r,a)&&(this.endedItem=r,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${l} ${Fn(r)}`),l.hasPlayed=!0,this.hls.trigger(V.INTERSTITIAL_ENDED,{event:l,schedule:n.slice(0),scheduleIndex:e}),l.cue.once)){var c;this.updateSchedule();const y=(c=this.schedule)==null?void 0:c.items;if(a&&y){const A=this.findItemIndex(a);this.advanceSchedule(A,y,t,r,o)}return}}this.advanceSchedule(e,n,t,r,o)}advanceSchedule(e,t,i,n,a){const r=this.schedule;if(!r)return;const o=t[e]||null,d=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(l=>{const f=l.interstitial,p=r.findEventIndex(f.identifier);(p<e||p>e+1)&&this.clearInterstitial(f,o)}),this.isInterstitial(o)){this.timelinePos=Math.min(Math.max(this.timelinePos,o.start),o.end);const l=o.event;if(i===void 0){i=r.findAssetIndex(l,this.timelinePos);const y=Po(l,i-1);if(l.isAssetPastPlayoutLimit(y)||l.appendInPlace&&this.timelinePos===o.end){this.advanceAfterAssetEnded(l,e,i);return}i=y}const f=this.waitingItem;this.assetsBuffered(o,d)||this.setBufferingItem(o);let p=this.preloadAssets(l,i);if(this.eventItemsMatch(o,f||n)||(this.waitingItem=o,this.log(`INTERSTITIAL_STARTED ${Fn(o)} ${l.appendInPlace?"append in place":""}`),this.hls.trigger(V.INTERSTITIAL_STARTED,{event:l,schedule:t.slice(0),scheduleIndex:e})),!l.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${l}`);return}if(l.assetListLoader&&(l.assetListLoader.destroy(),l.assetListLoader=void 0),!d){this.log(`Waiting for attachMedia to start Interstitial ${l}`);return}this.waitingItem=this.endedItem=null,this.playingItem=o;const g=l.assetList[i];if(!g){this.advanceAfterAssetEnded(l,e,i||0);return}if(p||(p=this.getAssetPlayer(g.identifier)),p===null||p.destroyed){const y=l.assetList.length;this.warn(`asset ${i+1}/${y} player destroyed ${l}`),p=this.createAssetPlayer(l,g,i),p.loadSource()}if(!this.eventItemsMatch(o,this.bufferingItem)&&l.appendInPlace&&this.isAssetBuffered(g))return;this.startAssetPlayer(p,i,t,e,d),this.shouldPlay&&du(p.media)}else o?(this.resumePrimary(o,e,n),this.shouldPlay&&du(this.hls.media)):a&&this.isInterstitial(n)&&(this.endedItem=null,this.playingItem=n,n.event.appendInPlace||this.attachPrimary(r.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,i){var n,a;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Fn(e)}`),!((n=this.detachedData)!=null&&n.mediaSource)){let o=this.timelinePos;(o<e.start||o>=e.end)&&(o=this.getPrimaryResumption(e,t),this.log(Fs("resumePrimary",o)),this.timelinePos=o),this.attachPrimary(o,e)}if(!i)return;const r=(a=this.schedule)==null?void 0:a.items;r&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Fn(e)}`),this.hls.trigger(V.INTERSTITIALS_PRIMARY_RESUMED,{schedule:r.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const i=e.start;if(this.primaryLive){const n=this.primaryDetails;if(t===0)return this.hls.startPosition;if(n&&(i<n.fragmentStart||i>n.edge))return this.hls.liveSyncPosition||-1}return i}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:li.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,i){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const n=this.primaryMedia;if(!n)return;const a=this.hls;a.media?this.checkBuffer():(this.transferMediaTo(a,n),i&&this.startLoadingPrimaryAt(e,i)),i||(this.log(Fs("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,i))}startLoadingPrimaryAt(e,t){var i;const n=this.hls;!n.loadingEnabled||!n.media||Math.abs((((i=n.mainForwardBufferInfo)==null?void 0:i.start)||n.media.currentTime)-e)>.5?n.startLoad(e,t):n.bufferingEnabled||n.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(V.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(V.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const i=this.hls.levels[t.level];if(!i.details)return;const n=Ii(Ii({},this.mediaSelection||this.altSelection),{},{main:i});this.mediaSelection=n,this.schedule.parseInterstitialDateRanges(n,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const i=this.hls.audioTracks[t.id],n=this.mediaSelection;if(!n){this.altSelection=Ii(Ii({},this.altSelection),{},{audio:i});return}const a=Ii(Ii({},n),{},{audio:i});this.mediaSelection=a}onSubtitleTrackUpdated(e,t){const i=this.hls.subtitleTracks[t.id],n=this.mediaSelection;if(!n){this.altSelection=Ii(Ii({},this.altSelection),{},{subtitles:i});return}const a=Ii(Ii({},n),{},{subtitles:i});this.mediaSelection=a}onAudioTrackSwitching(e,t){const i=vd(t);this.playerQueue.forEach(({hls:n})=>n&&(n.setAudioOption(t)||n.setAudioOption(i)))}onSubtitleTrackSwitch(e,t){const i=vd(t);this.playerQueue.forEach(({hls:n})=>n&&(n.setSubtitleOption(t)||t.id!==-1&&n.setSubtitleOption(i)))}onBufferCodecs(e,t){const i=t.tracks;i&&(this.requiredTracks=i)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const i=this.playingItem;if(i&&!this.itemsMatch(i,this.bufferingItem)&&!this.isInterstitial(i)){const n=this.timelinePos;this.bufferedPos=n,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let n=0;n<t.length;n++){const a=t[n];if(a.cue.post){var i;const r=this.schedule.findEventIndex(a.identifier),o=(i=this.schedule.items)==null?void 0:i[r];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const i=this.findItemIndex(t);this.setSchedulePosition(i+1)}else this.shouldPlay=!1}updateItem(e,t){var i;const n=(i=this.schedule)==null?void 0:i.items;if(e&&n){const a=this.findItemIndex(e,t);return n[a]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((a,r)=>{e.event.isAssetPastPlayoutLimit(r)&&this.clearAssetPlayer(a.identifier,null)});const i=e.end+.25,n=li.bufferInfo(this.primaryMedia,i,0);(n.end>i||(n.nextStart||0)>i)&&(this.log(`trim buffered interstitial ${Fn(e)} (was ${Fn(t)})`),this.attachPrimary(i,null,!0),this.flushFrontBuffer(i))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var i;return!!t&&(e===t||e.event.identifier===((i=t.event)==null?void 0:i.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const i=this.mediaSelection;i&&((t=this.schedule)==null||t.updateSchedule(i,[],e))}checkBuffer(e){var t;const i=(t=this.schedule)==null?void 0:t.items;if(!i)return;const n=li.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=n.len<1),this.updateBufferedPos(n.end,i,e)}updateBufferedPos(e,t,i){const n=this.schedule,a=this.bufferingItem;if(this.bufferedPos>e||!n)return;if(t.length===1&&this.itemsMatch(t[0],a)){this.bufferedPos=e;return}const r=this.playingItem,o=this.findItemIndex(r);let d=n.findItemIndexAtTime(e);if(this.bufferedPos<e){var c;const l=this.findItemIndex(a),f=Math.min(l+1,t.length-1),p=t[f];if((d===-1&&a&&e>=a.end||(c=p.event)!=null&&c.appendInPlace&&e+.01>=p.start)&&(d=f),this.isInterstitial(a)){const g=a.event;if(f-o>1&&g.appendInPlace===!1||g.assetList.length===0&&g.assetListLoader)return}if(this.bufferedPos=e,d>l&&d>o)this.bufferedToItem(p);else{const g=this.primaryDetails;this.primaryLive&&g&&e>g.edge-g.targetduration&&p.start<g.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(p)&&this.preloadAssets(p.event,0)}}else i&&r&&!this.itemsMatch(r,a)&&(d===o?this.bufferedToItem(r):d===o+1&&this.bufferedToItem(t[d]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(n=>{const a=this.getAssetPlayer(n.identifier);return!(a!=null&&a.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,i=this.schedule;if(!this.itemsMatch(e,t)&&i){const{items:n,events:a}=i;if(!n||!a)return t;const r=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const d=o?o.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Fn(e)}`+(t?` (${d.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(r){const c=i.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((l,f)=>{const p=this.getAssetPlayer(l.identifier);p&&(f===c&&p.loadSource(),p.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering());this.hls.trigger(V.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:a.slice(0),schedule:n.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const i=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(i!==null){this.bufferingAsset=null;const n=this.detachedData;n?n.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),i=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(i)}bufferedToEvent(e,t){const i=e.event,n=i.assetList.length===0&&!i.assetListLoader,a=i.cue.once;if(n||!a){const r=this.preloadAssets(i,t);if(r!=null&&r.interstitial.appendInPlace){const o=this.primaryMedia;o&&this.bufferAssetPlayer(r,o)}}}preloadAssets(e,t){const i=e.assetUrl,n=e.assetList.length,a=n===0&&!e.assetListLoader,r=e.cue.once;if(a){const d=e.timelineStart;if(e.appendInPlace){var o;const p=this.playingItem;!this.isInterstitial(p)&&(p==null||(o=p.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(d+.25)}let c,l=0;if(!this.playingItem&&this.primaryLive&&(l=this.hls.startPosition,l===-1&&(l=this.hls.liveSyncPosition||0)),l&&!(e.cue.pre||e.cue.post)){const p=l-d;p>0&&(c=Math.round(p*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${i?1:n} ${e}${c?` live-start: ${l} start-offset: ${c}`:""}`),i)return this.createAsset(e,0,0,d,e.duration,i);const f=this.assetListLoader.loadAssetList(e,c);f&&(e.assetListLoader=f)}else if(!r&&n){for(let c=t;c<n;c++){const l=e.assetList[c],f=this.getAssetPlayerQueueIndex(l.identifier);(f===-1||this.playerQueue[f].destroyed)&&!l.error&&this.createAssetPlayer(e,l,c)}const d=e.assetList[t];if(d){const c=this.getAssetPlayer(d.identifier);return c&&c.loadSource(),c}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(n=>{this.hls.trigger(V.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:n})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let i=0;i<t.length;i++)if(e===t[i].assetId)return i;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let i=0;i<e.length;i++)if(e[i].media===t)return e[i]}return null}createAsset(e,t,i,n,a,r){const o={parentIdentifier:e.identifier,identifier:US(e,r,t),duration:a,startOffset:i,timelineStart:n,uri:r};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,i){const n=this.hls,a=n.userConfig;let r=a.videoPreference;const o=n.loadLevelObj||n.levels[n.currentLevel];(r||o)&&(r=Pi({},r),o.videoCodec&&(r.videoCodec=o.videoCodec),o.videoRange&&(r.allowedVideoRanges=[o.videoRange]));const d=n.audioTracks[n.audioTrack],c=n.subtitleTracks[n.subtitleTrack];let l=0;if(this.primaryLive||e.appendInPlace){const G=this.timelinePos-t.timelineStart;if(G>1){const Z=t.duration;Z&&G<Z&&(l=G)}}const f=t.identifier,p=Ii(Ii({},a),{},{maxMaxBufferLength:Math.min(180,n.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:n.sessionId,assetPlayerId:f,abrEwmaDefaultEstimate:n.bandwidthEstimate,interstitialsController:void 0,startPosition:l,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:r,audioPreference:d||a.audioPreference,subtitlePreference:c||a.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(p.timelineOffset=t.timelineStart));const g=p.cmcd;g!=null&&g.sessionId&&g.contentId&&(p.cmcd=Pi({},g,{contentId:ls(t.uri)})),this.getAssetPlayer(f)&&this.warn(`Duplicate date range identifier ${e} and asset ${f}`);const y=new VS(this.HlsPlayerClass,p,e,t);this.playerQueue.push(y),e.assetList[i]=t;let A=!0;const C=G=>{if(G.live){var Z;const N=new Error(`Interstitials MUST be VOD assets ${e}`),U={fatal:!0,type:Gt.OTHER_ERROR,details:je.INTERSTITIAL_ASSET_ITEM_ERROR,error:N},O=((Z=this.schedule)==null?void 0:Z.findEventIndex(e.identifier))||-1;this.handleAssetItemError(U,e,O,i,N.message);return}const le=G.edge-G.fragmentStart,W=t.duration;(A||W===null||le>W)&&(A=!1,this.log(`Interstitial asset "${f}" duration change ${W} > ${le}`),t.duration=le,this.updateSchedule())};y.on(V.LEVEL_UPDATED,(G,{details:Z})=>C(Z)),y.on(V.LEVEL_PTS_UPDATED,(G,{details:Z})=>C(Z)),y.on(V.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const I=(G,Z)=>{const le=this.getAssetPlayer(f);if(le&&Z.tracks){le.off(V.BUFFER_CODECS,I),le.tracks=Z.tracks;const W=this.primaryMedia;this.bufferingAsset===le.assetItem&&W&&!le.media&&this.bufferAssetPlayer(le,W)}};y.on(V.BUFFER_CODECS,I);const P=()=>{var G;const Z=this.getAssetPlayer(f);if(this.log(`buffered to end of asset ${Z}`),!Z||!this.schedule)return;const le=this.schedule.findEventIndex(e.identifier),W=(G=this.schedule.items)==null?void 0:G[le];this.isInterstitial(W)&&this.advanceAssetBuffering(W,t)};y.on(V.BUFFERED_TO_END,P);const M=G=>()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;this.shouldPlay=!0;const le=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,le,G)};return y.once(V.MEDIA_ENDED,M(i)),y.once(V.PLAYOUT_LIMIT_REACHED,M(1/0)),y.on(V.ERROR,(G,Z)=>{if(!this.schedule)return;const le=this.getAssetPlayer(f);if(Z.details===je.BUFFER_STALLED_ERROR){if(le!=null&&le.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(Z,e,this.schedule.findEventIndex(e.identifier),i,`Asset player error ${Z.error} ${e}`)}),y.on(V.DESTROYING,()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;const Z=new Error(`Asset player destroyed unexpectedly ${f}`),le={fatal:!0,type:Gt.OTHER_ERROR,details:je.INTERSTITIAL_ASSET_ITEM_ERROR,error:Z};this.handleAssetItemError(le,e,this.schedule.findEventIndex(e.identifier),i,Z.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${$r(t)}`),this.hls.trigger(V.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:i,event:e,player:y}),y}clearInterstitial(e,t){this.clearAssetPlayers(e,t),e.reset()}clearAssetPlayers(e,t){e.assetList.forEach(i=>{this.clearAssetPlayer(i.identifier,t)})}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const i=this.playerQueue[t];this.transferMediaFromPlayer(i,null),i.resetDetails()}}clearAssetPlayer(e,t){const i=this.getAssetPlayerQueueIndex(e);if(i!==-1){const n=this.playerQueue[i];this.log(`clear ${n} toSegment: ${t&&Fn(t)}`),this.transferMediaFromPlayer(n,t),this.playerQueue.splice(i,1),n.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,i,n,a){const{interstitial:r,assetItem:o,assetId:d}=e,c=r.assetList.length,l=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!l||l.identifier!==d)&&(l&&(this.clearAssetPlayer(l.identifier,i[n]),delete l.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${c} ${$r(o)}`),this.hls.trigger(V.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:r,schedule:i.slice(0),scheduleIndex:n,player:e})),this.bufferAssetPlayer(e,a)}bufferAssetPlayer(e,t){var i,n;if(!this.schedule)return;const{interstitial:a,assetItem:r}=e,o=this.schedule.findEventIndex(a.identifier),d=(i=this.schedule.items)==null?void 0:i[o];if(!d)return;e.loadSource(),this.setBufferingItem(d),this.bufferingAsset=r;const c=this.getBufferingPlayer();if(c===e)return;const l=a.appendInPlace;if(l&&(c==null?void 0:c.interstitial.appendInPlace)===!1)return;const f=(c==null?void 0:c.tracks)||((n=this.detachedData)==null?void 0:n.tracks)||this.requiredTracks;if(l&&r!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(f&&!kh(f,e.tracks)){const p=new Error(`Asset ${$r(r)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(f)}')`),g={fatal:!0,type:Gt.OTHER_ERROR,details:je.INTERSTITIAL_ASSET_ITEM_ERROR,error:p},y=a.findAssetIndex(r);this.handleAssetItemError(g,a,o,y,p.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,i=this.primaryMedia;if(!t||!i)return;const n=i.currentTime,a=t.findAssetIndex(e,n),r=e.assetList[a];if(r){const o=this.getAssetPlayer(r.identifier);if(o){const d=o.currentTime||n-r.timelineStart,c=o.duration-d;if(this.warn(`Stalled at ${d} of ${d+c} in ${o} ${e} (media.currentTime: ${n})`),d&&(c/i.playbackRate<.5||o.bufferedInPlaceToEnd(i))&&o.hls){const l=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,l,a)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,i,n,a){if(e.details===je.BUFFER_STALLED_ERROR)return;const r=t.assetList[n]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${r&&$r(r)} ${e.error}`),!this.schedule)return;const o=(r==null?void 0:r.identifier)||"",d=this.getAssetPlayerQueueIndex(o),c=this.playerQueue[d]||null,l=this.schedule.items,f=Pi({},e,{fatal:!1,errorAction:zr(!0),asset:r,assetListIndex:n,event:t,schedule:l,scheduleIndex:i,player:c});if(this.hls.trigger(V.INTERSTITIAL_ASSET_ERROR,f),!e.fatal)return;const p=this.playingAsset,g=this.bufferingAsset,y=new Error(a);if(r&&(this.clearAssetPlayer(o,null),r.error=y),!t.assetList.some(A=>!A.error))t.error=y;else for(let A=n;A<t.assetList.length;A++)this.resetAssetPlayer(t.assetList[A].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):p&&p.identifier===o?this.advanceAfterAssetEnded(t,i,n):g&&g.identifier===o&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,g)}primaryFallback(e){const t=e.timelineStart,i=this.effectivePlayingItem;let n=this.timelinePos;if(i){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${n} playing: ${Fn(i)} error: ${e.error}`),n===-1&&(n=this.hls.startPosition);const r=this.updateItem(i,n);this.itemsMatch(i,r)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}else if(n===-1){this.checkStart();return}if(!this.schedule)return;const a=this.schedule.findItemIndexAtTime(n);this.setSchedulePosition(a)}onAssetListLoaded(e,t){var i,n;const a=t.event,r=a.identifier,o=t.assetListResponse.ASSETS;if(!((i=this.schedule)!=null&&i.hasEvent(r)))return;const d=a.timelineStart,c=a.duration;let l=0;o.forEach((A,C)=>{const I=parseFloat(A.DURATION);this.createAsset(a,C,l,d+l,I,A.URI),l+=I}),a.duration=l,this.log(`Loaded asset-list with duration: ${l} (was: ${c}) ${a}`);const f=this.waitingItem,p=(f==null?void 0:f.event.identifier)===r;this.updateSchedule();const g=(n=this.bufferingItem)==null?void 0:n.event;if(p){var y;const A=this.schedule.findEventIndex(r),C=(y=this.schedule.items)==null?void 0:y[A];if(C){if(!this.playingItem&&this.timelinePos>C.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==A){a.error=new Error(`Interstitial ${o.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${a}`),this.log(a.error.message),this.updateSchedule(!0),this.primaryFallback(a);return}this.setBufferingItem(C)}this.setSchedulePosition(A)}else if((g==null?void 0:g.identifier)===r){const A=a.assetList[0];if(A){const C=this.getAssetPlayer(A.identifier);if(g.appendInPlace){const I=this.primaryMedia;C&&I&&this.bufferAssetPlayer(C,I)}else C&&C.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case je.ASSET_LIST_PARSING_ERROR:case je.ASSET_LIST_LOAD_ERROR:case je.ASSET_LIST_LOAD_TIMEOUT:{const i=t.interstitial;i&&(this.updateSchedule(!0),this.primaryFallback(i));break}case je.BUFFER_STALLED_ERROR:{const i=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&i.event.appendInPlace){this.handleInPlaceStall(i.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const uu=500;class zS extends ql{constructor(e,t,i){super(e,t,i,"subtitle-stream-controller",Mt.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(V.LEVEL_LOADED,this.onLevelLoaded,this),e.on(V.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(V.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(V.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(V.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(V.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(V.LEVEL_LOADED,this.onLevelLoaded,this),e.off(V.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(V.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(V.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(V.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(V.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=rt.IDLE,this.setInterval(uu),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:n}=t;if(this.fragContextChanged(i)||(Ji(i)&&(this.fragPrevious=i),this.state=rt.IDLE),!n)return;const a=this.tracksBuffered[this.currentTrackId];if(!a)return;let r;const o=i.start;for(let c=0;c<a.length;c++)if(o>=a[c].start&&o<=a[c].end){r=a[c];break}const d=i.start+i.duration;r?r.end=d:(r={start:o,end:d},a.push(r)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:i,endOffset:n}=t;if(i===0&&n!==Number.POSITIVE_INFINITY){const a=n-1;if(a<=0)return;t.endOffsetSubtitles=Math.max(0,a),this.tracksBuffered.forEach(r=>{for(let o=0;o<r.length;){if(r[o].end<=a){r.shift();continue}else if(r[o].start<a)r[o].start=a;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(i,a,Mt.SUBTITLE)}}onError(e,t){const i=t.frag;(i==null?void 0:i.type)===Mt.SUBTITLE&&(t.details===je.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==rt.STOPPED&&(this.state=rt.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&Df(this.levels,t)){this.levels=t.map(i=>new hs(i));return}this.tracksBuffered=[],this.levels=t.map(i=>{const n=new hs(i);return this.tracksBuffered[n.id]=[],n}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Mt.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}const n=this.levels[this.currentTrackId];n!=null&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.state!==rt.STOPPED&&this.setInterval(uu)}onSubtitleTrackLoaded(e,t){var i;const{currentTrackId:n,levels:a}=this,{details:r,id:o}=t;if(!a){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const d=a[o];if(o>=a.length||!d)return;this.log(`Subtitle track ${o} loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(r.live||(i=d.details)!=null&&i.live){if(r.deltaUpdateFailed)return;const f=this.mainDetails;if(!f){this.startFragRequested=!1;return}const p=f.fragments[0];if(!d.details)r.hasProgramDateTime&&f.hasProgramDateTime?(Sa(r,f),c=r.fragmentStart):p&&(c=p.start,ol(r,c));else{var l;c=this.alignPlaylists(r,d.details,(l=this.levelLastLoaded)==null?void 0:l.details),c===0&&p&&(c=p.start,ol(r,c))}f&&!this.startFragRequested&&this.setStartPosition(f,c)}d.details=r,this.levelLastLoaded=d,o===n&&(this.hls.trigger(V.SUBTITLE_TRACK_UPDATED,{details:r,id:o,groupId:t.groupId}),this.tick(),r.live&&!this.fragCurrent&&this.media&&this.state===rt.IDLE&&(Ir(null,r.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),d.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,n=t.decryptdata,a=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&n!=null&&n.key&&n.iv&&Kr(n.method)){const r=performance.now();this.decrypter.decrypt(new Uint8Array(i),n.key.buffer,n.iv.buffer,jl(n.method)).catch(o=>{throw a.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const d=performance.now();a.trigger(V.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:r,tdecrypt:d}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=rt.IDLE})}}doTick(){if(!this.media){this.state=rt.IDLE;return}if(this.state===rt.IDLE){const{currentTrackId:e,levels:t}=this,i=t==null?void 0:t[e];if(!i||!t.length||!i.details||this.waitForLive(i))return;const{config:n}=this,a=this.getLoadPosition(),r=li.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a,n.maxBufferHole),{end:o,len:d}=r,c=i.details,l=this.hls.maxBufferLength+c.levelTargetDuration;if(d>l)return;const f=c.fragments,p=f.length,g=c.edge;let y=null;const A=this.fragPrevious;if(o<g){const P=n.maxFragLookUpTolerance,M=o>g-P?0:P;y=Ir(A,f,Math.max(f[0].start,o),M),!y&&A&&A.start<f[0].start&&(y=f[0])}else y=f[p-1];if(y=this.filterReplacedPrimary(y,i.details),!y)return;const C=y.sn-c.startSN,I=f[C-1];if(I&&I.cc===y.cc&&this.fragmentTracker.getState(I)===sn.NOT_LOADED&&(y=I),this.fragmentTracker.getState(y)===sn.NOT_LOADED){const P=this.mapToInitFragWhenRequired(y);P&&this.loadFragment(P,i,o)}}}loadFragment(e,t,i){Ji(e)?super.loadFragment(e,t,i):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new KS(this.tracksBuffered[this.currentTrackId]||[])}}class KS{constructor(e){this.buffered=void 0;const t=(i,n,a)=>{if(n=n>>>0,n>a-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${n}) is greater than the maximum bound (${a})`);return e[n][i]};this.buffered={get length(){return e.length},end(i){return t("end",i,e.length)},start(i){return t("start",i,e.length)}}}}const WS={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Wf=s=>String.fromCharCode(WS[s]||s),Nn=15,ir=100,YS={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},XS={17:2,18:4,21:6,22:8,23:10,19:13,20:15},JS={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},QS={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ZS=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class eE{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i=typeof t=="function"?t():t;Ri.log(`${this.time} [${e}] ${i}`)}}}const Ar=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class Yf{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const n=t[i];e.hasOwnProperty(n)&&(this[n]=e[n])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class tE{constructor(){this.uchar=" ",this.penState=new Yf}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class iE{constructor(e){this.chars=[],this.pos=0,this.currPenState=new Yf,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<ir;t++)this.chars.push(new tE);this.logger=e}equals(e){for(let t=0;t<ir;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<ir;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<ir;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ir&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ir)}moveCursor(e){const t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Wf(e);if(this.pos>=ir){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<ir;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<ir;i++){const n=this.chars[i].uchar;n!==" "&&(t=!1),e.push(n)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Oo{constructor(e){this.rows=[],this.currRow=Nn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Nn;t++)this.rows.push(new iE(e));this.logger=e}reset(){for(let e=0;e<Nn;e++)this.rows[e].clear();this.currRow=Nn-1}equals(e){let t=!0;for(let i=0;i<Nn;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<Nn;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Nn;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Ni(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<Nn;o++)this.rows[o].clear();const a=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){const o=r.rows[a].cueStartTime,d=this.logger.time;if(o!==null&&d!==null&&o<d)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(r.rows[a+c])}}this.currRow=t;const i=this.rows[this.currRow];if(e.indent!==null){const a=e.indent,r=Math.max(a-1,0);i.setCursor(e.indent),e.color=i.chars[r].penState.foreground}const n={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(n)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Ni(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",n=-1;for(let a=0;a<Nn;a++){const r=this.rows[a].getTextString();r&&(n=a+1,e?t.push("Row "+n+": '"+r+"'"):t.push(r.trim()))}return t.length>0&&(e?i="["+t.join(" | ")+"]":i=t.join(`
`)),i}getTextAndFormat(){return this.rows}}class hu{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Oo(i),this.nonDisplayedMemory=new Oo(i),this.lastOutputScreen=new Oo(i),this.currRollUpRow=this.displayedMemory.rows[Nn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Nn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[i]}this.logger.log(2,"MIDROW: "+Ni(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class fu{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=rE(),this.logger=void 0;const n=this.logger=new eE;this.channels=[null,new hu(e,t,n),new hu(e+1,i,n)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let i=0;i<t.length;i+=2){const n=t[i]&127,a=t[i+1]&127;let r=!1,o=null;if(n===0&&a===0)continue;this.logger.log(3,()=>"["+Ar([t[i],t[i+1]])+"] -> ("+Ar([n,a])+")");const d=this.cmdHistory;if(n>=16&&n<=31){if(nE(n,a,d)){Ns(null,null,d),this.logger.log(3,()=>"Repeated command ("+Ar([n,a])+") is dropped");continue}Ns(n,a,this.cmdHistory),r=this.parseCmd(n,a),r||(r=this.parseMidrow(n,a)),r||(r=this.parsePAC(n,a)),r||(r=this.parseBackgroundAttributes(n,a))}else Ns(null,null,d);if(!r&&(o=this.parseChars(n,a),o)){const l=this.currentChannel;l&&l>0?this.channels[l].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!r&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Ar([n,a])+" orig: "+Ar([t[i],t[i+1]]))}}parseCmd(e,t){const i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,n=(e===23||e===31)&&t>=33&&t<=35;if(!(i||n))return!1;const a=e===20||e===21||e===23?1:2,r=this.channels[a];return e===20||e===21||e===28||e===29?t===32?r.ccRCL():t===33?r.ccBS():t===34?r.ccAOF():t===35?r.ccAON():t===36?r.ccDER():t===37?r.ccRU(2):t===38?r.ccRU(3):t===39?r.ccRU(4):t===40?r.ccFON():t===41?r.ccRDC():t===42?r.ccTR():t===43?r.ccRTD():t===44?r.ccEDM():t===45?r.ccCR():t===46?r.ccENM():t===47&&r.ccEOC():r.ccTO(t-32),this.currentChannel=a,!0}parseMidrow(e,t){let i=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const n=this.channels[i];return n?(n.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Ar([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let i;const n=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,a=(e===16||e===24)&&t>=64&&t<=95;if(!(n||a))return!1;const r=e<=23?1:2;t>=64&&t<=95?i=r===1?YS[e]:JS[e]:i=r===1?XS[e]:QS[e];const o=this.channels[r];return o?(o.setPAC(this.interpretPAC(i,t)),this.currentChannel=r,!0):!1}interpretPAC(e,t){let i;const n={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?i=t-96:i=t-64,n.underline=(i&1)===1,i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=Math.floor((i-16)/2)*4,n}parseChars(e,t){let i,n=null,a=null;if(e>=25?(i=2,a=e-8):(i=1,a=e),a>=17&&a<=19){let r;a===17?r=t+80:a===18?r=t+112:r=t+144,this.logger.log(2,()=>"Special char '"+Wf(r)+"' in channel "+i),n=[r]}else e>=32&&e<=127&&(n=t===0?[e]:[e,t]);return n&&this.logger.log(3,()=>"Char codes =  "+Ar(n).join(",")),n}parseBackgroundAttributes(e,t){const i=(e===16||e===24)&&t>=32&&t<=47,n=(e===23||e===31)&&t>=45&&t<=47;if(!(i||n))return!1;let a;const r={};e===16||e===24?(a=Math.floor((t-32)/2),r.background=ZS[a],t%2===1&&(r.background=r.background+"_semi")):t===45?r.background="transparent":(r.foreground="black",t===47&&(r.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(r),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Ns(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function Ns(s,e,t){t.a=s,t.b=e}function nE(s,e,t){return t.a===s&&t.b===e}function rE(){return{a:null,b:null}}var nc=function(){if(ba!=null&&ba.VTTCue)return self.VTTCue;const s=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,d){if(typeof d!="string"||!Array.isArray(o))return!1;const c=d.toLowerCase();return~o.indexOf(c)?c:!1}function i(o){return t(s,o)}function n(o){return t(e,o)}function a(o,...d){let c=1;for(;c<arguments.length;c++){const l=arguments[c];for(const f in l)o[f]=l[f]}return o}function r(o,d,c){const l=this,f={enumerable:!0};l.hasBeenReset=!1;let p="",g=!1,y=o,A=d,C=c,I=null,P="",M=!0,G="auto",Z="start",le=50,W="middle",N=50,U="middle";Object.defineProperty(l,"id",a({},f,{get:function(){return p},set:function(O){p=""+O}})),Object.defineProperty(l,"pauseOnExit",a({},f,{get:function(){return g},set:function(O){g=!!O}})),Object.defineProperty(l,"startTime",a({},f,{get:function(){return y},set:function(O){if(typeof O!="number")throw new TypeError("Start time must be set to a number.");y=O,this.hasBeenReset=!0}})),Object.defineProperty(l,"endTime",a({},f,{get:function(){return A},set:function(O){if(typeof O!="number")throw new TypeError("End time must be set to a number.");A=O,this.hasBeenReset=!0}})),Object.defineProperty(l,"text",a({},f,{get:function(){return C},set:function(O){C=""+O,this.hasBeenReset=!0}})),Object.defineProperty(l,"region",a({},f,{get:function(){return I},set:function(O){I=O,this.hasBeenReset=!0}})),Object.defineProperty(l,"vertical",a({},f,{get:function(){return P},set:function(O){const z=i(O);if(z===!1)throw new SyntaxError("An invalid or illegal string was specified.");P=z,this.hasBeenReset=!0}})),Object.defineProperty(l,"snapToLines",a({},f,{get:function(){return M},set:function(O){M=!!O,this.hasBeenReset=!0}})),Object.defineProperty(l,"line",a({},f,{get:function(){return G},set:function(O){if(typeof O!="number"&&O!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");G=O,this.hasBeenReset=!0}})),Object.defineProperty(l,"lineAlign",a({},f,{get:function(){return Z},set:function(O){const z=n(O);if(!z)throw new SyntaxError("An invalid or illegal string was specified.");Z=z,this.hasBeenReset=!0}})),Object.defineProperty(l,"position",a({},f,{get:function(){return le},set:function(O){if(O<0||O>100)throw new Error("Position must be between 0 and 100.");le=O,this.hasBeenReset=!0}})),Object.defineProperty(l,"positionAlign",a({},f,{get:function(){return W},set:function(O){const z=n(O);if(!z)throw new SyntaxError("An invalid or illegal string was specified.");W=z,this.hasBeenReset=!0}})),Object.defineProperty(l,"size",a({},f,{get:function(){return N},set:function(O){if(O<0||O>100)throw new Error("Size must be between 0 and 100.");N=O,this.hasBeenReset=!0}})),Object.defineProperty(l,"align",a({},f,{get:function(){return U},set:function(O){const z=n(O);if(!z)throw new SyntaxError("An invalid or illegal string was specified.");U=z,this.hasBeenReset=!0}})),l.displayState=void 0}return r.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},r}();class sE{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function Xf(s){function e(i,n,a,r){return(i|0)*3600+(n|0)*60+(a|0)+parseFloat(r||0)}const t=s.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class aE{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function Jf(s,e,t,i){const n=i?s.split(i):[s];for(const a in n){if(typeof n[a]!="string")continue;const r=n[a].split(t);if(r.length!==2)continue;const o=r[0],d=r[1];e(o,d)}}const ml=new nc(0,0,""),Us=ml.align==="middle"?"middle":"center";function oE(s,e,t){const i=s;function n(){const o=Xf(s);if(o===null)throw new Error("Malformed timestamp: "+i);return s=s.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,d){const c=new aE;Jf(o,function(p,g){let y;switch(p){case"region":for(let A=t.length-1;A>=0;A--)if(t[A].id===g){c.set(p,t[A].region);break}break;case"vertical":c.alt(p,g,["rl","lr"]);break;case"line":y=g.split(","),c.integer(p,y[0]),c.percent(p,y[0])&&c.set("snapToLines",!1),c.alt(p,y[0],["auto"]),y.length===2&&c.alt("lineAlign",y[1],["start",Us,"end"]);break;case"position":y=g.split(","),c.percent(p,y[0]),y.length===2&&c.alt("positionAlign",y[1],["start",Us,"end","line-left","line-right","auto"]);break;case"size":c.percent(p,g);break;case"align":c.alt(p,g,["start",Us,"end","left","right"]);break}},/:/,/\s/),d.region=c.get("region",null),d.vertical=c.get("vertical","");let l=c.get("line","auto");l==="auto"&&ml.line===-1&&(l=-1),d.line=l,d.lineAlign=c.get("lineAlign","start"),d.snapToLines=c.get("snapToLines",!0),d.size=c.get("size",100),d.align=c.get("align",Us);let f=c.get("position","auto");f==="auto"&&ml.position===50&&(f=d.align==="start"||d.align==="left"?0:d.align==="end"||d.align==="right"?100:50),d.position=f}function r(){s=s.replace(/^\s+/,"")}if(r(),e.startTime=n(),r(),s.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);s=s.slice(3),r(),e.endTime=n(),r(),a(s,e)}function Qf(s){return s.replace(/<br(?: \/)?>/gi,`
`)}class lE{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new sE,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function i(){let a=t.buffer,r=0;for(a=Qf(a);r<a.length&&a[r]!=="\r"&&a[r]!==`
`;)++r;const o=a.slice(0,r);return a[r]==="\r"&&++r,a[r]===`
`&&++r,t.buffer=a.slice(r),o}function n(a){Jf(a,function(r,o){},/:/)}try{let a="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;a=i();const o=a.match(/^(√Ø¬ª¬ø)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let r=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(r?r=!1:a=i(),t.state){case"HEADER":/:/.test(a)?n(a):a||(t.state="ID");continue;case"NOTE":a||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){t.state="NOTE";break}if(!a)continue;if(t.cue=new nc(0,0,""),t.state="CUE",a.indexOf("-->")===-1){t.cue.id=a;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{oE(a,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=a.indexOf("-->")!==-1;if(!a||o&&(r=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=a}continue;case"BADCUE":a||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const cE=/\r\n|\n\r|\n|\r/g,Mo=function(e,t,i=0){return e.slice(i,i+t.length)===t},dE=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),n=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!wt(t)||!wt(i)||!wt(n)||!wt(a))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=60*1e3*n,t+=60*60*1e3*a,t};function rc(s,e,t){return ls(s.toString())+ls(e.toString())+ls(t)}const uE=function(e,t,i){let n=e[t],a=e[n.prevCC];if(!a||!a.new&&n.new){e.ccOffset=e.presentationOffset=n.start,n.new=!1;return}for(;(r=a)!=null&&r.new;){var r;e.ccOffset+=n.start-a.start,n.new=!1,n=a,a=e[n.prevCC]}e.presentationOffset=i};function hE(s,e,t,i,n,a,r){const o=new lE,d=kn(new Uint8Array(s)).trim().replace(cE,`
`).split(`
`),c=[],l=e?_1(e.baseTime,e.timescale):0;let f="00:00.000",p=0,g=0,y,A=!0;o.oncue=function(C){const I=t[i];let P=t.ccOffset;const M=(p-l)/9e4;if(I!=null&&I.new&&(g!==void 0?P=t.ccOffset=I.start:uE(t,i,M)),M){if(!e){y=new Error("Missing initPTS for VTT MPEGTS");return}P=M-t.presentationOffset}const G=C.endTime-C.startTime,Z=Tn((C.startTime+P-g)*9e4,n*9e4)/9e4;C.startTime=Math.max(Z,0),C.endTime=Math.max(Z+G,0);const le=C.text.trim();C.text=decodeURIComponent(encodeURIComponent(le)),C.id||(C.id=rc(C.startTime,C.endTime,le)),C.endTime>0&&c.push(C)},o.onparsingerror=function(C){y=C},o.onflush=function(){if(y){r(y);return}a(c)},d.forEach(C=>{if(A)if(Mo(C,"X-TIMESTAMP-MAP=")){A=!1,C.slice(16).split(",").forEach(I=>{Mo(I,"LOCAL:")?f=I.slice(6):Mo(I,"MPEGTS:")&&(p=parseInt(I.slice(7)))});try{g=dE(f)/1e3}catch(I){y=I}return}else C===""&&(A=!1);o.parse(C+`
`)}),o.flush()}const Bo="stpp.ttml.im1t",Zf=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ep=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,fE={left:"start",center:"center",right:"end",start:"start",end:"end"};function pu(s,e,t,i){const n=mi(new Uint8Array(s),["mdat"]);if(n.length===0){i(new Error("Could not parse IMSC1 mdat"));return}const a=n.map(o=>kn(o)),r=y1(e.baseTime,1,e.timescale);try{a.forEach(o=>t(pE(o,r)))}catch(o){i(o)}}function pE(s,e){const n=new DOMParser().parseFromString(s,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");const a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},r=Object.keys(a).reduce((f,p)=>(f[p]=n.getAttribute(`ttp:${p}`)||a[p],f),{}),o=n.getAttribute("xml:space")!=="preserve",d=mu(Fo(n,"styling","style")),c=mu(Fo(n,"layout","region")),l=Fo(n,"body","[begin]");return[].map.call(l,f=>{const p=tp(f,o);if(!p||!f.hasAttribute("begin"))return null;const g=Uo(f.getAttribute("begin"),r),y=Uo(f.getAttribute("dur"),r);let A=Uo(f.getAttribute("end"),r);if(g===null)throw gu(f);if(A===null){if(y===null)throw gu(f);A=g+y}const C=new nc(g-e,A-e,p);C.id=rc(C.startTime,C.endTime,C.text);const I=c[f.getAttribute("region")],P=d[f.getAttribute("style")],M=mE(I,P,d),{textAlign:G}=M;if(G){const Z=fE[G];Z&&(C.lineAlign=Z),C.align=G}return Pi(C,M),C}).filter(f=>f!==null)}function Fo(s,e,t){const i=s.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(t)):[]}function mu(s){return s.reduce((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function tp(s,e){return[].slice.call(s.childNodes).reduce((t,i,n)=>{var a;return i.nodeName==="br"&&n?t+`
`:(a=i.childNodes)!=null&&a.length?tp(i,e):e?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}function mE(s,e,t){const i="http://www.w3.org/ns/ttml#styling";let n=null;const a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],r=s!=null&&s.hasAttribute("style")?s.getAttribute("style"):null;return r&&t.hasOwnProperty(r)&&(n=t[r]),a.reduce((o,d)=>{const c=No(e,i,d)||No(s,i,d)||No(n,i,d);return c&&(o[d]=c),o},{})}function No(s,e,t){return s&&s.hasAttributeNS(e,t)?s.getAttributeNS(e,t):null}function gu(s){return new Error(`Could not parse ttml timestamp ${s}`)}function Uo(s,e){if(!s)return null;let t=Xf(s);return t===null&&(Zf.test(s)?t=gE(s,e):ep.test(s)&&(t=yE(s,e))),t}function gE(s,e){const t=Zf.exec(s),i=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+i/e.frameRate}function yE(s,e){const t=ep.exec(s),i=Number(t[1]);switch(t[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}class $s{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class _E{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=_u(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(V.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(V.FRAG_LOADING,this.onFragLoading,this),e.on(V.FRAG_LOADED,this.onFragLoaded,this),e.on(V.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(V.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(V.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(V.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(V.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(V.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(V.FRAG_LOADING,this.onFragLoading,this),e.off(V.FRAG_LOADED,this.onFragLoaded,this),e.off(V.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(V.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(V.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(V.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(V.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new $s(this,"textTrack1"),t=new $s(this,"textTrack2"),i=new $s(this,"textTrack3"),n=new $s(this,"textTrack4");this.cea608Parser1=new fu(1,e,t),this.cea608Parser2=new fu(3,i,n)}addCues(e,t,i,n,a){let r=!1;for(let o=a.length;o--;){const d=a[o],c=vE(d[0],d[1],t,i);if(c>=0&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],i),r=!0,c/(i-t)>.5))return}if(r||a.push([t,i]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,i,n)}else{const o=this.Cues.newCue(null,t,i,n);this.hls.trigger(V.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:n,timescale:a,trackId:r}){const{unparsedVttFrags:o}=this;i===Mt.MAIN&&(this.initPTS[t.cc]={baseTime:n,timescale:a,trackId:r}),o.length&&(this.unparsedVttFrags=[],o.forEach(d=>{this.initPTS[d.frag.cc]?this.onFragLoaded(V.FRAG_LOADED,d):this.hls.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:d.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:i}=this;if(i)for(let n=0;n<i.textTracks.length;n++){const a=i.textTracks[n];if(yu(a,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return a}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:n}=this,{label:a,languageCode:r}=t[e],o=this.getExistingTrack(a,r);if(o)i[e]=o,Vr(i[e]),qf(i[e],n);else{const d=this.createTextTrack("captions",a,r);d&&(d[e]=!0,i[e]=d)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i=t.label,n={_id:e,label:i,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(V.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,i){const n=this.media;if(n)return n.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const i=!!t.transferMedia;if(this.media=null,i)return;const{captionsTracks:n}=this;Object.keys(n).forEach(a=>{Vr(n[a]),delete n[a]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=_u(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let i=0;i<t.length;i++)Vr(t[i])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],n=i.some(a=>a.textCodec===Bo);if(this.config.enableWebVTT||n&&this.config.enableIMSC1){if(Df(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const r=this.media,o=r?ra(r.textTracks):null;if(this.tracks.forEach((d,c)=>{let l;if(o){let f=null;for(let p=0;p<o.length;p++)if(o[p]&&yu(o[p],d)){f=o[p],o[p]=null;break}f&&(l=f)}if(l)Vr(l);else{const f=ip(d);l=this.createTextTrack(f,d.name,d.lang),l&&(l.mode="disabled")}l&&this.textTracks.push(l)}),o!=null&&o.length){const d=o.filter(c=>c!==null).map(c=>c.label);d.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${d.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const r=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(V.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:r})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(i=>{const n=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!n)return;const a=`textTrack${n[1]}`,r=this.captionsProperties[a];r&&(r.label=i.name,i.lang&&(r.languageCode=i.lang),r.media=i)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Mt.MAIN){var i,n;const{cea608Parser1:a,cea608Parser2:r,lastSn:o}=this,{cc:d,sn:c}=t.frag,l=(i=(n=t.part)==null?void 0:n.index)!=null?i:-1;a&&r&&(c!==o+1||c===o&&l!==this.lastPartIndex+1||d!==this.lastCc)&&(a.reset(),r.reset()),this.lastCc=d,this.lastSn=c,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:i,payload:n}=t;if(i.type===Mt.SUBTITLE)if(n.byteLength){const a=i.decryptdata,r="stats"in t;if(a==null||!a.encrypted||r){const o=this.tracks[i.level],d=this.vttCCs;d[i.cc]||(d[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),o&&o.textCodec===Bo?this._parseIMSC1(i,n):this._parseVTTs(t)}}else this.hls.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;pu(t,this.initPTS[e.cc],n=>{this._appendCues(n,e.level),i.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},n=>{i.logger.log(`Failed to parse IMSC1: ${n}`),i.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:n})})}_parseVTTs(e){var t;const{frag:i,payload:n}=e,{initPTS:a,unparsedVttFrags:r}=this,o=a.length-1;if(!a[i.cc]&&o===-1){r.push(e);return}const d=this.hls,c=(t=i.initSegment)!=null&&t.data?On(i.initSegment.data,new Uint8Array(n)).buffer:n;hE(c,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,l=>{this._appendCues(l,i.level),d.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},l=>{const f=l.message==="Missing initPTS for VTT MPEGTS";f?r.push(e):this._fallbackToIMSC1(i,n),d.logger.log(`Failed to parse VTT cue: ${l}`),!(f&&o>i.cc)&&d.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:l})})}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||pu(t,this.initPTS[e.cc],()=>{i.textCodec=Bo,this._parseIMSC1(e,t)},()=>{i.textCodec="wvtt"})}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||n.mode==="disabled")return;e.forEach(a=>zf(n,a))}else{const n=this.tracks[t];if(!n)return;const a=n.default?"default":"subtitles"+t;i.trigger(V.CUES_PARSED,{type:"subtitles",cues:e,track:a})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===Mt.SUBTITLE&&this.onFragLoaded(V.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:i,samples:n}=t;if(!(i.type===Mt.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let a=0;a<n.length;a++){const r=n[a].bytes;if(r){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(r);this.cea608Parser1.addData(n[a].pts,o[0]),this.cea608Parser2.addData(n[a].pts,o[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:n,type:a}){const{media:r}=this;if(!(!r||r.currentTime<i)){if(!a||a==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(d=>pl(o[d],t,i))}if(this.config.renderTextTracksNatively&&t===0&&n!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(d=>pl(o[d],t,n))}}}extractCea608Data(e){const t=[[],[]],i=e[0]&31;let n=2;for(let a=0;a<i;a++){const r=e[n++],o=127&e[n++],d=127&e[n++];if(o===0&&d===0)continue;if((4&r)!==0){const l=3&r;(l===0||l===1)&&(t[l].push(o),t[l].push(d))}}return t}}function ip(s){return s.characteristics&&/transcribes-spoken-dialog/gi.test(s.characteristics)&&/describes-music-and-sound/gi.test(s.characteristics)?"captions":"subtitles"}function yu(s,e){return!!s&&s.kind===ip(e)&&dl(e,s)}function vE(s,e,t,i){return Math.min(e,i)-Math.max(s,t)}function _u(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const AE=/\s/,bE={newCue(s,e,t,i){const n=[];let a,r,o,d,c;const l=self.VTTCue||self.TextTrackCue;for(let p=0;p<i.rows.length;p++)if(a=i.rows[p],o=!0,d=0,c="",!a.isEmpty()){var f;for(let A=0;A<a.chars.length;A++)AE.test(a.chars[A].uchar)&&o?d++:(c+=a.chars[A].uchar,o=!1);a.cueStartTime=e,e===t&&(t+=1e-4),d>=16?d--:d++;const g=Qf(c.trim()),y=rc(e,t,g);s!=null&&(f=s.cues)!=null&&f.getCueById(y)||(r=new l(e,t,g),r.id=y,r.line=p+1,r.align="left",r.position=10+Math.min(80,Math.floor(d*8/32)*10),n.push(r))}return s&&n.length&&(n.sort((p,g)=>p.line==="auto"||g.line==="auto"?0:p.line>8&&g.line>8?g.line-p.line:p.line-g.line),n.forEach(p=>zf(s,p))),n}};function SE(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const EE=/(\d+)-(\d+)\/(\d+)/;class vu{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||wE,this.controller=new self.AbortController,this.stats=new Bl}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const n=this.stats;if(n.loading.start)throw new Error("Loader can only be used once.");n.loading.start=self.performance.now();const a=xE(e,this.controller.signal),r=e.responseType==="arraybuffer",o=r?"byteLength":"length",{maxTimeToFirstByteMs:d,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),t.timeout=d&&wt(d)?d:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(n,e,this.response))},t.timeout),(ms(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(f=>{var p;this.response=this.loader=f;const g=Math.max(self.performance.now(),n.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(n,e,this.response))},c-(g-n.loading.start)),!f.ok){const{status:A,statusText:C}=f;throw new kE(C||"fetch, bad network response",A,f)}n.loading.first=g,n.total=CE(f.headers)||n.total;const y=(p=this.callbacks)==null?void 0:p.onProgress;return y&&wt(t.highWaterMark)?this.loadProgressively(f,n,e,t.highWaterMark,y):r?f.arrayBuffer():e.responseType==="json"?f.json():f.text()}).then(f=>{var p,g;const y=this.response;if(!y)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),n.loading.end=Math.max(self.performance.now(),n.loading.first);const A=f[o];A&&(n.loaded=n.total=A);const C={url:y.url,data:f,code:y.status},I=(p=this.callbacks)==null?void 0:p.onProgress;I&&!wt(t.highWaterMark)&&I(n,e,f,y),(g=this.callbacks)==null||g.onSuccess(C,n,e,y)}).catch(f=>{var p;if(self.clearTimeout(this.requestTimeout),n.aborted)return;const g=f&&f.code||0,y=f?f.message:null;(p=this.callbacks)==null||p.onError({code:g,text:y},e,f?f.details:null,n)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,n=0,a){const r=new hf,o=e.body.getReader(),d=()=>o.read().then(c=>{if(c.done)return r.dataLength&&a(t,i,r.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const l=c.value,f=l.length;return t.loaded+=f,f<n||r.dataLength?(r.push(l),r.dataLength>=n&&a(t,i,r.flush().buffer,e)):a(t,i,l.buffer,e),d()}).catch(()=>Promise.reject());return d()}}function xE(s,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Pi({},s.headers))};return s.rangeEnd&&t.headers.set("Range","bytes="+s.rangeStart+"-"+String(s.rangeEnd-1)),t}function TE(s){const e=EE.exec(s);if(e)return parseInt(e[2])-parseInt(e[1])+1}function CE(s){const e=s.get("Content-Range");if(e){const i=TE(e);if(wt(i))return i}const t=s.get("Content-Length");if(t)return parseInt(t)}function wE(s,e){return new self.Request(s.url,e)}class kE extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const IE=/^age:\s*[\d.]+\s*$/im;class np{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Bl,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const i=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0,n.aborted=!1;const a=this.xhrSetup;a?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return a(i,t.url)}).catch(r=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",t.url,!0),a(i,t.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)}).catch(r=>{var o;(o=this.callbacks)==null||o.onError({code:i.status,text:r.message},t,i,n)}):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const n=t.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:r}=i.loadPolicy;if(n)for(const o in n)e.setRequestHeader(o,n[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=a&&wt(a)?a:r,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const n=t.readyState,a=this.config;if(!i.aborted&&n>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),n===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const c=t.status,l=t.responseType==="text"?t.responseText:null;if(c>=200&&c<300){const y=l??t.response;if(y!=null){var r,o;i.loading.end=Math.max(self.performance.now(),i.loading.first);const A=t.responseType==="arraybuffer"?y.byteLength:y.length;i.loaded=i.total=A,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first);const C=(r=this.callbacks)==null?void 0:r.onProgress;C&&C(i,e,y,t);const I={url:t.responseURL,data:y,code:c};(o=this.callbacks)==null||o.onSuccess(I,i,e,t);return}}const f=a.loadPolicy.errorRetry,p=i.retry,g={url:e.url,data:void 0,code:c};if(va(f,p,!1,g))this.retry(f);else{var d;Ri.error(`${c} while loading ${e.url}`),(d=this.callbacks)==null||d.onError({code:c,text:t.statusText},e,t,i)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(va(e,t,!0))this.retry(e);else{var i;Ri.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const n=this.callbacks;n&&(this.abortInternal(),n.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=$l(e,i.retry),i.retry++,Ri.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&IE.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const RE={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},LE=Ii(Ii({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:np,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:jA,bufferController:P1,capLevelController:ec,errorController:WA,fpsController:OS,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:ef,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:RE},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},DE()),{},{subtitleStreamController:zS,subtitleTrackController:FS,timelineController:_E,audioStreamController:I1,audioTrackController:R1,emeController:Wr,cmcdController:RS,contentSteeringController:DS,interstitialsController:qS});function DE(){return{cueHandler:bE,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function PE(s,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const i=gl(s),n=["manifest","level","frag"],a=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return n.forEach(r=>{const o=`${r==="level"?"playlist":r}LoadPolicy`,d=e[o]===void 0,c=[];a.forEach(l=>{const f=`${r}Loading${l}`,p=e[f];if(p!==void 0&&d){c.push(f);const g=i[o].default;switch(e[o]={default:g},l){case"TimeOut":g.maxLoadTimeMs=p,g.maxTimeToFirstByteMs=p;break;case"MaxRetry":g.errorRetry.maxNumRetry=p,g.timeoutRetry.maxNumRetry=p;break;case"RetryDelay":g.errorRetry.retryDelayMs=p,g.timeoutRetry.retryDelayMs=p;break;case"MaxRetryTimeout":g.errorRetry.maxRetryDelayMs=p,g.timeoutRetry.maxRetryDelayMs=p;break}}}),c.length&&t.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${o}": ${Ni(e[o])}`)}),Ii(Ii({},i),e)}function gl(s){return s&&typeof s=="object"?Array.isArray(s)?s.map(gl):Object.keys(s).reduce((e,t)=>(e[t]=gl(s[t]),e),{}):s}function OE(s,e){const t=s.loader;t!==vu&&t!==np?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),s.progressive=!1):SE()&&(s.loader=vu,s.progressive=!0,s.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const sa=2,ME=.1,BE=.05,FE=100;class NE extends Yh{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var i;(i=this.media)!=null&&i.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var i;this.ended=((i=this.media)==null?void 0:i.currentTime)||1,this.hls.trigger(V.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(FE),this.mediaSource=t.mediaSource;const i=this.media=t.media;yn(i,"playing",this.onMediaPlaying),yn(i,"waiting",this.onMediaWaiting),yn(i,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:i}=this;i&&(bn(i,"playing",this.onMediaPlaying),bn(i,"waiting",this.onMediaWaiting),bn(i,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var i,n;const a=(i=this.hls)==null?void 0:i.config;if(!a)return;const r=this.media;if(!r)return;const{seeking:o}=r,d=this.seeking&&!o,c=!this.seeking&&o,l=r.paused&&!o||r.ended||r.playbackRate===0;if(this.seeking=o,e!==t){t&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,a.nudgeOnVideoHole&&!l&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(c||d){d&&this.stallResolved(e);return}if(l){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&r.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(V.MEDIA_ENDED,{stalled:!1}));return}if(!li.getBuffered(r).length){this.nudgeRetry=0;return}const f=li.bufferInfo(r,e,0),p=f.nextStart||0,g=this.fragmentTracker;if(o&&g&&this.hls){const le=Au(this.hls.inFlightFragments,e),W=f.len>sa,N=!p||le||p-e>sa&&!g.getPartialFragment(e);if(W||N)return;this.moved=!1}const y=(n=this.hls)==null?void 0:n.latestLevelDetails;if(!this.moved&&this.stalled!==null&&g){if(!(f.len>0)&&!p)return;const W=Math.max(p,f.start||0)-e,U=!!(y!=null&&y.live)?y.targetduration*2:sa,O=Gs(e,g);if(W>0&&(W<=U||O)){r.paused||this._trySkipBufferHole(O);return}}const A=a.detectStallWithCurrentTimeMs,C=self.performance.now(),I=this.waiting;let P=this.stalled;if(P===null)if(I>0&&C-I<A)P=this.stalled=I;else{this.stalled=C;return}const M=C-P;if(!o&&(M>=A||I)&&this.hls){var G;if(((G=this.mediaSource)==null?void 0:G.readyState)==="ended"&&!(y!=null&&y.live)&&Math.abs(e-((y==null?void 0:y.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(V.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(f),!this.media||!this.hls)return}const Z=li.bufferInfo(r,e,a.maxBufferHole);this._tryFixBufferStall(Z,M,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const i=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(i)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(V.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var i;const n=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(i=this.buffered.audio)!=null&&i.length&&n&&n.length>1&&e>n.end(0)){const a=li.bufferedInfo(li.timeRangesToArray(this.buffered.audio),e,0);if(a.len>1&&t>=a.start){const r=li.timeRangesToArray(n),o=li.bufferedInfo(r,t,0).bufferedIndex;if(o>-1&&o<r.length-1){const d=li.bufferedInfo(r,e,0).bufferedIndex,c=r[o].end,l=r[o+1].start;if((d===-1||d>o)&&l-c<1&&e-c<2){const f=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${c} -> ${l} buffered index: ${d}`);this.warn(f.message),this.media.currentTime+=1e-6;let p=Gs(e,this.fragmentTracker);p&&"fragment"in p?p=p.fragment:p||(p=void 0);const g=li.bufferInfo(this.media,e,0);this.hls.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:p,buffer:g.len,bufferInfo:g})}}}}}_tryFixBufferStall(e,t,i){var n,a;const{fragmentTracker:r,media:o}=this,d=(n=this.hls)==null?void 0:n.config;if(!o||!r||!d)return;const c=(a=this.hls)==null?void 0:a.latestLevelDetails,l=Gs(i,r);if((l||c!=null&&c.live&&i<c.fragmentStart)&&(this._trySkipBufferHole(l)||!this.media))return;const f=e.buffered,p=this.adjacentTraversal(e,i);(f&&f.length>1&&e.len>d.maxBufferHole||e.nextStart&&(e.nextStart-i<d.maxBufferHole||p))&&(t>d.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const i=this.fragmentTracker,n=e.nextStart;if(i&&n){const a=i.getFragAtPos(t,Mt.MAIN),r=i.getFragAtPos(n,Mt.MAIN);if(a&&r)return r.sn-a.sn<2}return!1}_reportStall(e){const{hls:t,media:i,stallReported:n,stalled:a}=this;if(!n&&a!==null&&i&&t){this.stallReported=!0;const r=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${Ni(e)})`);this.warn(r.message),t.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len,bufferInfo:e,stalled:{start:a}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:i,media:n}=this,a=(t=this.hls)==null?void 0:t.config;if(!n||!i||!a)return 0;const r=n.currentTime,o=li.bufferInfo(n,r,0),d=r<o.start?o.start:o.nextStart;if(d&&this.hls){const l=o.len<=a.maxBufferHole,f=o.len>0&&o.len<1&&n.readyState<3,p=d-r;if(p>0&&(l||f)){if(p>a.maxBufferHole){let y=!1;if(r===0){const A=i.getAppendedFrag(0,Mt.MAIN);A&&d<A.end&&(y=!0)}if(!y&&e){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||Au(this.hls.inFlightFragments,d))return 0;let C=!1,I=e.end;for(;I<d;){const P=Gs(I,i);if(P)I+=P.duration;else{C=!0;break}}if(C)return 0}}const g=Math.max(d+BE,r+ME);if(this.warn(`skipping hole, adjusting currentTime from ${r} to ${g}`),this.moved=!0,n.currentTime=g,!(e!=null&&e.gap)){const y=new Error(`fragment loaded with buffer holes, seeking from ${r} to ${g}`),A={type:Gt.MEDIA_ERROR,details:je.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,buffer:o.len,bufferInfo:o};e&&("fragment"in e?A.part=e:A.frag=e),this.hls.trigger(V.ERROR,A)}return g}}return 0}_tryNudgeBuffer(e){const{hls:t,media:i,nudgeRetry:n}=this,a=t==null?void 0:t.config;if(!i||!a)return 0;const r=i.currentTime;if(this.nudgeRetry++,n<a.nudgeMaxRetry){const o=r+(n+1)*a.nudgeOffset,d=new Error(`Nudging 'currentTime' from ${r} to ${o}`);this.warn(d.message),i.currentTime=o,t.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.BUFFER_NUDGE_ON_STALL,error:d,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${r} after ${a.nudgeMaxRetry} nudges`);this.error(o.message),t.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function Au(s,e){const t=bu(s.main);if(t&&t.start<=e)return t;const i=bu(s.audio);return i&&i.start<=e?i:null}function bu(s){if(!s)return null;switch(s.state){case rt.IDLE:case rt.STOPPED:case rt.ENDED:case rt.ERROR:return null}return s.frag}function Gs(s,e){return e.getAppendedFrag(s,Mt.MAIN)||e.getPartialFragment(s)}const UE=.25;function yl(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function $o(s,e,t,i,n){let a=new s(e,t,"");try{a.value=i,n&&(a.type=n)}catch{a=new s(e,t,Ni(n?Ii({type:n},i):i))}return a}const Vs=(()=>{const s=yl();try{s&&new s(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class $E{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(V.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(V.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(V.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var i;this.media=t.media,((i=t.overrides)==null?void 0:i.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&Vr(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if(i.kind==="metadata"&&i.label==="id3")return qf(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:i,enableID3MetadataCues:n}=this.hls.config;if(!i&&!n)return;const{samples:a}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const r=yl();if(r)for(let o=0;o<a.length;o++){const d=a[o].type;if(d===Cn.emsg&&!i||!n)continue;const c=vf(a[o].data),l=a[o].pts;let f=l+a[o].duration;f>Vs&&(f=Vs),f-l<=0&&(f=l+UE);for(let g=0;g<c.length;g++){const y=c[g];if(!Af(y)){this.updateId3CueEnds(l,d);const A=$o(r,l,f,y,d);A&&this.id3Track.addCue(A)}}}}updateId3CueEnds(e,t){var i;const n=(i=this.id3Track)==null?void 0:i.cues;if(n)for(let a=n.length;a--;){const r=n[a];r.type===t&&r.startTime<e&&r.endTime===Vs&&(r.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:n}){const{id3Track:a,hls:r}=this;if(!r)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:d}}=r;if(a&&(o||d)){let c;n==="audio"?c=l=>l.type===Cn.audioId3&&d:n==="video"?c=l=>l.type===Cn.emsg&&o:c=l=>l.type===Cn.audioId3&&d||l.type===Cn.emsg&&o,pl(a,t,i,c)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:i,timelineOffset:n,enableDateRangeMetadataCues:a,interstitialsController:r}=this.hls.config;if(!a)return;const o=yl();if(i&&n&&!r){const{fragmentStart:A,fragmentEnd:C}=e;let I=this.assetCue;I?(I.startTime=A,I.endTime=C):o&&(I=this.assetCue=$o(o,A,C,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),I&&(I.id=i,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(I),I.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:d}=this,{dateRanges:c}=e,l=Object.keys(c);let f=this.dateRangeCuesAppended;if(d&&t){var p;if((p=d.cues)!=null&&p.length){const A=Object.keys(f).filter(C=>!l.includes(C));for(let C=A.length;C--;){var g;const I=A[C],P=(g=f[I])==null?void 0:g.cues;delete f[I],P&&Object.keys(P).forEach(M=>{const G=P[M];if(G){G.removeEventListener("enter",this.onEventCueEnter);try{d.removeCue(G)}catch{}}})}}else f=this.dateRangeCuesAppended={}}const y=e.fragments[e.fragments.length-1];if(!(l.length===0||!wt(y==null?void 0:y.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let A=0;A<l.length;A++){const C=l[A],I=c[C],P=I.startTime,M=f[C],G=(M==null?void 0:M.cues)||{};let Z=(M==null?void 0:M.durationKnown)||!1,le=Vs;const{duration:W,endDate:N}=I;if(N&&W!==null)le=P+W,Z=!0;else if(I.endOnNext&&!Z){const O=l.reduce((z,ce)=>{if(ce!==I.id){const be=c[ce];if(be.class===I.class&&be.startDate>I.startDate&&(!z||I.startDate<z.startDate))return be}return z},null);O&&(le=O.startTime,Z=!0)}const U=Object.keys(I.attr);for(let O=0;O<U.length;O++){const z=U[O];if(!ob(z))continue;const ce=G[z];if(ce)Z&&!(M!=null&&M.durationKnown)?ce.endTime=le:Math.abs(ce.startTime-P)>.01&&(ce.startTime=P,ce.endTime=le);else if(o){let be=I.attr[z];lb(z)&&(be=Ih(be));const xe=$o(o,P,le,{key:z,data:be},Cn.dateRange);xe&&(xe.id=C,this.id3Track.addCue(xe),G[z]=xe,r&&(z==="X-ASSET-LIST"||z==="X-ASSET-URL")&&xe.addEventListener("enter",this.onEventCueEnter))}}f[C]={cues:G,dateRange:I,durationKnown:Z}}}}}class GE{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,i=this.levelDetails;if(!t||!i)return;this.currentTime=t.currentTime;const n=this.computeLatency();if(n===null)return;this._latency=n;const{lowLatencyMode:a,maxLiveSyncPlaybackRate:r}=this.config;if(!a||r===1||!i.live)return;const o=this.targetLatency;if(o===null)return;const d=n-o,c=Math.min(this.maxLatency,o+i.targetduration);if(d<c&&d>.05&&this.forwardBufferLength>1){const f=Math.min(2,Math.max(1,r)),p=Math.round(2/(1+Math.exp(-.75*d-this.edgeStalled))*20)/20,g=Math.min(f,Math.max(1,p));this.changeMediaPlaybackRate(t,g)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:i,targetduration:n}=e,{liveSyncDuration:a,liveSyncDurationCount:r,lowLatencyMode:o}=this.config,d=this.hls.userConfig;let c=o&&i||t;(this._targetLatencyUpdated||d.liveSyncDuration||d.liveSyncDurationCount||c===0)&&(c=a!==void 0?a:r*n);const l=n;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,l)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const i=this.levelDetails;if(i===null)return null;const n=i.edge,a=e-t-this.edgeStalled,r=n-i.totalduration,o=n-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(r,a),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(V.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(V.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var i;t.details===je.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(i=this.levelDetails)!=null&&i.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var i,n;e.playbackRate!==t&&((i=this.hls)==null||i.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(n=this.targetLatency)==null?void 0:n.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class VE extends Zl{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(V.LEVEL_LOADED,this.onLevelLoaded,this),e.on(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(V.FRAG_BUFFERED,this.onFragBuffered,this),e.on(V.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(V.LEVEL_LOADED,this.onLevelLoaded,this),e.off(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(V.FRAG_BUFFERED,this.onFragBuffered,this),e.off(V.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=this.hls.config.preferManagedMediaSource,n=[],a={},r={};let o=!1,d=!1,c=!1;t.levels.forEach(l=>{const f=l.attrs;let{audioCodec:p,videoCodec:g}=l;p&&(l.audioCodec=p=ma(p,i)||void 0),g&&(g=l.videoCodec=xA(g));const{width:y,height:A,unknownCodecs:C}=l,I=(C==null?void 0:C.length)||0;if(o||(o=!!(y&&A)),d||(d=!!g),c||(c=!!p),I||p&&!this.isAudioSupported(p)||g&&!this.isVideoSupported(g)){this.log(`Some or all CODECS not supported "${f.CODECS}"`);return}const{CODECS:P,"FRAME-RATE":M,"HDCP-LEVEL":G,"PATHWAY-ID":Z,RESOLUTION:le,"VIDEO-RANGE":W}=f,U=`${`${Z||"."}-`}${l.bitrate}-${le}-${M}-${P}-${W}-${G}`;if(a[U])if(a[U].uri!==l.url&&!l.attrs["PATHWAY-ID"]){const O=r[U]+=1;l.attrs["PATHWAY-ID"]=new Array(O+1).join(".");const z=this.createLevel(l);a[U]=z,n.push(z)}else a[U].addGroupId("audio",f.AUDIO),a[U].addGroupId("text",f.SUBTITLES);else{const O=this.createLevel(l);a[U]=O,r[U]=1,n.push(O)}}),this.filterAndSortMediaOptions(n,t,o,d,c)}createLevel(e){const t=new hs(e),i=e.supplemental;if(i!=null&&i.videoCodec&&!this.isVideoSupported(i.videoCodec)){const n=new Error(`SUPPLEMENTAL-CODECS not supported "${i.videoCodec}"`);this.log(n.message),t.supportedResult=Gh(n,[])}return t}isAudioSupported(e){return ds(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return ds(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,i,n,a){var r;let o=[],d=[],c=e;const l=((r=t.stats)==null?void 0:r.parsing)||{};if((i||n)&&a&&(c=c.filter(({videoCodec:P,videoRange:M,width:G,height:Z})=>(!!P||!!(G&&Z))&&OA(M))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let P="no level with compatible codecs found in manifest",M=P;t.levels.length&&(M=`one or more CODECS in variant not supported: ${Ni(t.levels.map(Z=>Z.attrs.CODECS).filter((Z,le,W)=>W.indexOf(Z)===le))}`,this.warn(M),P+=` (${M})`);const G=new Error(P);this.hls.trigger(V.ERROR,{type:Gt.MEDIA_ERROR,details:je.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:G,reason:M})}}),l.end=performance.now();return}t.audioTracks&&(o=t.audioTracks.filter(P=>!P.audioCodec||this.isAudioSupported(P.audioCodec)),Su(o)),t.subtitles&&(d=t.subtitles,Su(d));const f=c.slice(0);c.sort((P,M)=>{if(P.attrs["HDCP-LEVEL"]!==M.attrs["HDCP-LEVEL"])return(P.attrs["HDCP-LEVEL"]||"")>(M.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&P.height!==M.height)return P.height-M.height;if(P.frameRate!==M.frameRate)return P.frameRate-M.frameRate;if(P.videoRange!==M.videoRange)return ga.indexOf(P.videoRange)-ga.indexOf(M.videoRange);if(P.videoCodec!==M.videoCodec){const G=fd(P.videoCodec),Z=fd(M.videoCodec);if(G!==Z)return Z-G}if(P.uri===M.uri&&P.codecSet!==M.codecSet){const G=pa(P.codecSet),Z=pa(M.codecSet);if(G!==Z)return Z-G}return P.averageBitrate!==M.averageBitrate?P.averageBitrate-M.averageBitrate:0});let p=f[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==f.length)){for(let P=0;P<f.length;P++)if(f[P].pathwayId===c[0].pathwayId){p=f[P];break}}this._levels=c;for(let P=0;P<c.length;P++)if(c[P]===p){var g;this._firstLevel=P;const M=p.bitrate,G=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${M}`),((g=this.hls.userConfig)==null?void 0:g.abrEwmaDefaultEstimate)===void 0){const Z=Math.min(M,this.hls.config.abrEwmaDefaultEstimateMax);Z>G&&G===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=Z)}break}const y=a&&!n,A=this.hls.config,C=!!(A.audioStreamController&&A.audioTrackController),I={levels:c,audioTracks:o,subtitleTracks:d,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:a,video:n,altAudio:C&&!y&&o.some(P=>!!P.url)};l.end=performance.now(),this.hls.trigger(V.MANIFEST_PARSED,I)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const l=new Error("invalid level idx"),f=e<0;if(this.hls.trigger(V.ERROR,{type:Gt.OTHER_ERROR,details:je.LEVEL_SWITCH_ERROR,level:e,fatal:f,error:l,reason:l.message}),f)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,n=this.currentLevel,a=n?n.attrs["PATHWAY-ID"]:void 0,r=t[e],o=r.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=r,i===e&&n&&a===o)return;this.log(`Switching to level ${e} (${r.height?r.height+"p ":""}${r.videoRange?r.videoRange+" ":""}${r.codecSet?r.codecSet+" ":""}@${r.bitrate})${o?" with Pathway "+o:""} from level ${i}${a?" with Pathway "+a:""}`);const d={level:e,attrs:r.attrs,details:r.details,bitrate:r.bitrate,averageBitrate:r.averageBitrate,maxBitrate:r.maxBitrate,realBitrate:r.realBitrate,width:r.width,height:r.height,codecSet:r.codecSet,audioCodec:r.audioCodec,videoCodec:r.videoCodec,audioGroups:r.audioGroups,subtitleGroups:r.subtitleGroups,loaded:r.loaded,loadError:r.loadError,fragmentError:r.fragmentError,name:r.name,id:r.id,uri:r.uri,url:r.url,urlId:0,audioGroupIds:r.audioGroupIds,textGroupIds:r.textGroupIds};this.hls.trigger(V.LEVEL_SWITCHING,d);const c=r.details;if(!c||c.live){const l=this.switchParams(r.uri,n==null?void 0:n.details,c);this.loadPlaylist(l)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),i=e.filter(n=>t.indexOf(n)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=i}}onError(e,t){t.fatal||!t.context||t.context.type===yi.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Mt.MAIN){const i=t.elementaryStreams;if(!Object.keys(i).some(a=>!!i[a]))return;const n=this._levels[t.level];n!=null&&n.loadError&&(this.log(`Resetting level error count of ${n.loadError} on frag buffered`),n.loadError=0)}}onLevelLoaded(e,t){var i;const{level:n,details:a}=t,r=t.levelInfo;if(!r){var o;this.warn(`Invalid level index ${n}`),(o=t.deliveryDirectives)!=null&&o.skip&&(a.deltaUpdateFailed=!0);return}if(r===this.currentLevel||t.withoutMultiVariant){r.fragmentError===0&&(r.loadError=0);let d=r.details;d===t.details&&d.advanced&&(d=void 0),this.playlistLoaded(n,t,d)}else(i=t.deliveryDirectives)!=null&&i.skip&&(a.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=this.getUrlWithDirectives(e.uri,t),n=this.currentLevelIndex,a=e.attrs["PATHWAY-ID"],r=e.details,o=r==null?void 0:r.age;this.log(`Loading level index ${n}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${a?" Pathway "+a:""}${o&&r.live?" age "+o.toFixed(1)+(r.type&&" "+r.type||""):""} ${i}`),this.hls.trigger(V.LEVEL_LOADING,{url:i,level:n,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const i=this._levels.filter((a,r)=>r!==e?!0:(this.steering&&this.steering.removeLevel(a),a===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,a.details&&a.details.fragments.forEach(o=>o.level=-1)),!1));cf(i),this._levels=i,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const n=i.length-1;this._firstLevel=Math.min(this._firstLevel,n),this._startLevel&&(this._startLevel=Math.min(this._startLevel,n)),this.hls.trigger(V.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(V.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function Su(s){const e={};s.forEach(t=>{const i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++})}function rp(){return self.SourceBuffer||self.WebKitSourceBuffer}function sp(){if(!fr())return!1;const e=rp();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function jE(){if(!sp())return!1;const s=fr();return typeof(s==null?void 0:s.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>s.isTypeSupported(us(e,"video")))||["mp4a.40.2","fLaC"].some(e=>s.isTypeSupported(us(e,"audio"))))}function HE(){var s;const e=rp();return typeof(e==null||(s=e.prototype)==null?void 0:s.changeType)=="function"}const qE=100;class zE extends ql{constructor(e,t,i){super(e,t,i,"stream-controller",Mt.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const n=this.media,a=n?n.currentTime:null;if(a===null||!wt(a)||(this.log(`Media seeked to ${a.toFixed(3)}`),!this.getBufferedFrag(a)))return;const r=this.getFwdBufferInfoAtPos(n,a,Mt.MAIN,0);if(r===null||r.len===0){this.warn(`Main forward buffer length at ${a} on "seeked" event ${r?r.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.LEVEL_LOADING,this.onLevelLoading,this),e.on(V.LEVEL_LOADED,this.onLevelLoaded,this),e.on(V.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(V.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(V.BUFFER_CREATED,this.onBufferCreated,this),e.on(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(V.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.LEVEL_LOADED,this.onLevelLoaded,this),e.off(V.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(V.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(V.BUFFER_CREATED,this.onBufferCreated,this),e.off(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(V.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:i,hls:n}=this;if(this.stopLoad(),this.setInterval(qE),this.level=-1,!this.startFragRequested){let a=n.startLevel;a===-1&&(n.config.testBandwidth&&this.levels.length>1?(a=0,this.bitrateTest=!0):a=n.firstAutoLevel),n.nextLoadLevel=a,this.level=n.loadLevel,this._hasEnoughToStart=!!t}i>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i),this.state=rt.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=rt.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case rt.WAITING_LEVEL:{const{levels:e,level:t}=this,i=e==null?void 0:e[t],n=i==null?void 0:i.details;if(n&&(!n.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(n))break;this.state=rt.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=rt.IDLE;break}break}case rt.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===rt.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:n}=this;if(t===null||!n&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const a=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(i!=null&&i[a]))return;const r=i[a],o=this.getMainFwdBufferInfo();if(o===null)return;const d=this.getLevelDetails();if(d&&this._streamEnded(o,d)){const A={};this.altAudio===2&&(A.type="video"),this.hls.trigger(V.BUFFER_EOS,A),this.state=rt.ENDED;return}if(!this.buffering)return;e.loadLevel!==a&&e.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=e.nextLoadLevel=a;const c=r.details;if(!c||this.state===rt.WAITING_LEVEL||this.waitForLive(r)){this.level=a,this.state=rt.WAITING_LEVEL,this.startFragRequested=!1;return}const l=o.len,f=this.getMaxBufferLength(r.maxBitrate);if(l>=f)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const p=this.backtrackFragment?this.backtrackFragment.start:o.end;let g=this.getNextFragment(p,c);if(this.couldBacktrack&&!this.fragPrevious&&g&&Ji(g)&&this.fragmentTracker.getState(g)!==sn.OK){var y;const C=((y=this.backtrackFragment)!=null?y:g).sn-c.startSN,I=c.fragments[C-1];I&&g.cc===I.cc&&(g=I,this.fragmentTracker.removeFragment(I))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(g&&this.isLoopLoading(g,p)){if(!g.gap){const C=this.audioOnly&&!this.altAudio?Fi.AUDIO:Fi.VIDEO,I=(C===Fi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;I&&this.afterBufferFlushed(I,C,Mt.MAIN)}g=this.getNextFragmentLoopLoading(g,c,o,Mt.MAIN,f)}g&&(g.initSegment&&!g.initSegment.data&&!this.bitrateTest&&(g=g.initSegment),this.loadFragment(g,r,p))}loadFragment(e,t,i){const n=this.fragmentTracker.getState(e);n===sn.NOT_LOADED||n===sn.PARTIAL?Ji(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,i):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Mt.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let i;const n=this.getAppendedFrag(t.currentTime);n&&n.start>1&&this.flushMainBuffer(0,n.start-1);const a=this.getLevelDetails();if(a!=null&&a.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<a.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,d=e[o],c=this.fragLastKbps;c&&this.fragCurrent?i=this.fragCurrent.duration*d.maxBitrate/(1e3*c)+1:i=0}else i=0;const r=this.getBufferedFrag(t.currentTime+i);if(r){const o=this.followingBufferedFrag(r);if(o){this.abortCurrentFrag();const d=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,l=Math.max(r.end,d+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(l,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case rt.KEY_LOADING:case rt.FRAG_LOADING:case rt.FRAG_LOADING_WAITING_RETRY:case rt.PARSING:case rt.PARSED:this.state=rt.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;yn(i,"playing",this.onMediaPlaying),yn(i,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:i}=this;i&&(bn(i,"playing",this.onMediaPlaying),bn(i,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(V.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let i=!1,n=!1;for(let a=0;a<t.levels.length;a++){const r=t.levels[a].audioCodec;r&&(i=i||r.indexOf("mp4a.40.2")!==-1,n=n||r.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=i&&n&&!HE(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==rt.IDLE)return;const n=t.levelInfo;(!n.details||n.details.live&&(this.levelLastLoaded!==n||n.details.expired)||this.waitForCdnTuneIn(n.details))&&(this.state=rt.WAITING_LEVEL)}onLevelLoaded(e,t){var i;const{levels:n,startFragRequested:a}=this,r=t.level,o=t.details,d=o.totalduration;if(!n){this.warn(`Levels were reset while loading level ${r}`);return}this.log(`Level ${r} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${d}`);const c=t.levelInfo,l=this.fragCurrent;l&&(this.state===rt.FRAG_LOADING||this.state===rt.FRAG_LOADING_WAITING_RETRY)&&l.level!==t.level&&l.loader&&this.abortCurrentFrag();let f=0;if(o.live||(i=c.details)!=null&&i.live){var p;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;f=this.alignPlaylists(o,c.details,(p=this.levelLastLoaded)==null?void 0:p.details)}if(c.details=o,this.levelLastLoaded=c,a||this.setStartPosition(o,f),this.hls.trigger(V.LEVEL_UPDATED,{details:o,level:r}),this.state===rt.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=rt.IDLE}a&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const n=this.hls.liveSyncPosition,a=this.getLoadPosition(),r=e.fragmentStart,o=e.edge,d=a>=r-t.maxFragLookUpTolerance&&a<=o;if(n!==null&&i.duration>n&&(a<n||!d)){const l=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!d&&i.readyState<4||a<o-l)&&(this._hasEnoughToStart||(this.nextLoadPosition=n),i.readyState))if(this.warn(`Playback: ${a.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${n.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var c;const f=li.bufferInfo(i,n,0);if(!((c=f.buffered)!=null&&c.length)){i.currentTime=n;return}if(f.start<=a){i.currentTime=n;return}const{nextStart:g}=li.bufferedInfo(f.buffered,a,0);g&&(i.currentTime=g)}else i.currentTime=n}}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:n,payload:a}=e,{levels:r}=this;if(!r){this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const o=r[i.level];if(!o){this.warn(`Level ${i.level} not found on progress`);return}const d=o.details;if(!d){this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),this.fragmentTracker.removeFragment(i);return}const c=o.videoCodec,l=d.PTSKnown||!d.live,f=(t=i.initSegment)==null?void 0:t.data,p=this._getAudioCodec(o),g=this.transmuxer=this.transmuxer||new Lf(this.hls,Mt.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),y=n?n.index:-1,A=y!==-1,C=new Vl(i.level,i.sn,i.stats.chunkCount,a.byteLength,y,A),I=this.initPTS[i.cc];g.push(a,f,p,c,i,n,d.totalduration,l,C,I)}onAudioTrackSwitching(e,t){const i=this.hls,n=this.altAudio!==0;if(ya(t.url,i))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const r=this.fragCurrent;r&&(this.log("Switching to main audio track, cancel main fragment load"),r.abortRequests(),this.fragmentTracker.removeFragment(r)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(n){this.altAudio=0,this.fragmentTracker.removeAllFragments(),i.once(V.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(V.AUDIO_TRACK_SWITCHED,t)}),i.trigger(V.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}i.trigger(V.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=ya(t.url,this.hls);if(i){const n=this.videoBuffer;n&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=i?2:0,this.tick()}onBufferCreated(e,t){const i=t.tracks;let n,a,r=!1;for(const o in i){const d=i[o];if(d.id==="main"){if(a=o,n=d,o==="video"){const c=i[o];c&&(this.videoBuffer=c.buffer)}}else r=!0}r&&n?(this.log(`Alternate track found, use ${a}.buffered to schedule main fragment loading`),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:n}=t,a=i.type===Mt.MAIN;if(a){if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${n?" p: "+n.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),this.state===rt.PARSED&&(this.state=rt.IDLE);return}const o=n?n.stats:i.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),Ji(i)&&(this.fragPrevious=i),this.fragBufferedComplete(i,n)}const r=this.media;r&&(!this._hasEnoughToStart&&li.getBuffered(r).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),a&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var i;if(t.fatal){this.state=rt.ERROR;return}switch(t.details){case je.FRAG_GAP:case je.FRAG_PARSING_ERROR:case je.FRAG_DECRYPT_ERROR:case je.FRAG_LOAD_ERROR:case je.FRAG_LOAD_TIMEOUT:case je.KEY_LOAD_ERROR:case je.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Mt.MAIN,t);break;case je.LEVEL_LOAD_ERROR:case je.LEVEL_LOAD_TIMEOUT:case je.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===rt.WAITING_LEVEL&&((i=t.context)==null?void 0:i.type)===yi.LEVEL&&(this.state=rt.IDLE);break;case je.BUFFER_ADD_CODEC_ERROR:case je.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case je.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case je.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=rt.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Fi.AUDIO||!this.altAudio){const i=(t===Fi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;i&&(this.afterBufferFlushed(i,t,Mt.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking){this.log(`could not seek to ${i}, already seeking at ${t}`);return}const n=this.timelineOffset;n&&i&&(i+=n);const a=this.getLevelDetails(),r=li.getBuffered(e),o=r.length?r.start(0):0,d=o-i,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||d>0&&(d<c||this.loadingParts&&d<2*((a==null?void 0:a.partTarget)||0)))&&(this.log(`adjusting start position by ${d} to match buffer start`),i+=d,this.startPosition=i),t<i&&(this.log(`seek to target start position ${i} from current time ${t} buffer start ${o}`),e.currentTime=i)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(i=>{const{hls:n}=this,a=i==null?void 0:i.frag;if(!a||this.fragContextChanged(a))return;t.fragmentError=0,this.state=rt.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const r=a.stats;r.parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),n.trigger(V.FRAG_LOADED,i),a.bitrateTest=!1}).catch(i=>{this.state===rt.STOPPED||this.state===rt.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:i}=this,{remuxResult:n,chunkMeta:a}=e,r=this.getCurrentContext(a);if(!r){this.resetWhenMissingContext(a);return}const{frag:o,part:d,level:c}=r,{video:l,text:f,id3:p,initSegment:g}=n,{details:y}=c,A=this.altAudio?void 0:n.audio;if(this.fragContextChanged(o)){this.fragmentTracker.removeFragment(o);return}if(this.state=rt.PARSING,g){const C=g.tracks;if(C){const G=o.initSegment||o;if(this.unhandledEncryptionError(g,o))return;this._bufferInitSegment(c,C,G,a),i.trigger(V.FRAG_PARSING_INIT_SEGMENT,{frag:G,id:t,tracks:C})}const I=g.initPTS,P=g.timescale,M=this.initPTS[o.cc];if(wt(I)&&(!M||M.baseTime!==I||M.timescale!==P)){const G=g.trackId;this.initPTS[o.cc]={baseTime:I,timescale:P,trackId:G},i.trigger(V.INIT_PTS_FOUND,{frag:o,id:t,initPTS:I,timescale:P,trackId:G})}}if(l&&y){A&&l.type==="audiovideo"&&this.logMuxedErr(o);const C=y.fragments[o.sn-1-y.startSN],I=o.sn===y.startSN,P=!C||o.cc>C.cc;if(n.independent!==!1){const{startPTS:M,endPTS:G,startDTS:Z,endDTS:le}=l;if(d)d.elementaryStreams[l.type]={startPTS:M,endPTS:G,startDTS:Z,endDTS:le};else if(l.firstKeyFrame&&l.independent&&a.id===1&&!P&&(this.couldBacktrack=!0),l.dropped&&l.independent){const W=this.getMainFwdBufferInfo(),N=(W?W.end:this.getLoadPosition())+this.config.maxBufferHole,U=l.firstKeyFramePTS?l.firstKeyFramePTS:M;if(!I&&N<U-this.config.maxBufferHole&&!P){this.backtrack(o);return}else P&&(o.gap=!0);o.setElementaryStreamInfo(l.type,o.start,G,o.start,le,!0)}else I&&M-(y.appliedTimelineOffset||0)>sa&&(o.gap=!0);o.setElementaryStreamInfo(l.type,M,G,Z,le),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(l,o,d,a,I||P)}else if(I||P)o.gap=!0;else{this.backtrack(o);return}}if(A){const{startPTS:C,endPTS:I,startDTS:P,endDTS:M}=A;d&&(d.elementaryStreams[Fi.AUDIO]={startPTS:C,endPTS:I,startDTS:P,endDTS:M}),o.setElementaryStreamInfo(Fi.AUDIO,C,I,P,M),this.bufferFragmentData(A,o,d,a)}if(y&&p!=null&&p.samples.length){const C={id:t,frag:o,details:y,samples:p.samples};i.trigger(V.FRAG_PARSING_METADATA,C)}if(y&&f){const C={id:t,frag:o,details:y,samples:f.samples};i.trigger(V.FRAG_PARSING_USERDATA,C)}}logMuxedErr(e){this.warn(`${Ji(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,i,n){if(this.state!==rt.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(i));const{audio:a,video:r,audiovideo:o}=t;if(a){const c=e.audioCodec;let l=Qs(a.codec,c);l==="mp4a"&&(l="mp4a.40.5");const f=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5");const p=a.metadata;p&&"channelCount"in p&&(p.channelCount||1)!==1&&f.indexOf("firefox")===-1&&(l="mp4a.40.5")}l&&l.indexOf("mp4a.40.5")!==-1&&f.indexOf("android")!==-1&&a.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),c&&c!==l&&this.log(`Swapping manifest audio codec "${c}" for "${l}"`),a.levelCodec=l,a.id=Mt.MAIN,this.log(`Init audio buffer, container:${a.container}, codecs[selected/level/parsed]=[${l||""}/${c||""}/${a.codec}]`),delete t.audiovideo}if(r){r.levelCodec=e.videoCodec,r.id=Mt.MAIN;const c=r.codec;if((c==null?void 0:c.length)===4)switch(c){case"hvc1":case"hev1":r.codec="hvc1.1.6.L120.90";break;case"av01":r.codec="av01.0.04M.08";break;case"avc1":r.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${r.container}, codecs[level/parsed]=[${e.videoCodec||""}/${c}]${r.codec!==c?" parsed-corrected="+r.codec:""}${r.supplemental?" supplemental="+r.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);const d=Object.keys(t);if(d.length){if(this.hls.trigger(V.BUFFER_CODECS,t),!this.hls)return;d.forEach(c=>{const f=t[c].initSegment;f!=null&&f.byteLength&&this.hls.trigger(V.BUFFER_APPENDING,{type:c,data:f,frag:i,part:null,chunkMeta:n,parent:i.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Mt.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,i=e==null?void 0:e[t];return i?this.getMaxBufferLength(i.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=rt.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const i=e.currentTime;if(li.isBuffered(e,i)?t=this.getAppendedFrag(i):li.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const n=this.fragPlaying,a=t.level;(!n||t.sn!==n.sn||n.level!==a)&&(this.fragPlaying=t,this.hls.trigger(V.FRAG_CHANGED,{frag:t}),(!n||n.level!==a)&&this.hls.trigger(V.LEVEL_SWITCHED,{level:a}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return wt(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(wt(t)){const i=this.getLevelDetails(),n=this.currentFrag||(i?Ir(null,i.fragments,t):null);if(n){const a=n.programDateTime;if(a!==null){const r=a+(t-n.start)*1e3;return new Date(r)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class KE extends Mn{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyIdToKeyInfo){const n=this.keyIdToKeyInfo[i].loader;if(n){var t;if(e&&e!==((t=n.context)==null?void 0:t.frag.type))return;n.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=je.KEY_LOAD_ERROR,i,n,a){return new nr({type:Gt.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:a,error:i,networkDetails:n})}loadClear(e,t,i){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let n=0,a=t.length;n<a;n++){const r=t[n];if(e.cc<=r.cc&&(!Ji(e)||!Ji(r)||e.sn<r.sn)||!i&&n==a-1)return this.emeController.selectKeySystemFormat(r).then(o=>{if(!this.emeController)return;r.setKeyFormat(o);const d=ea(o);if(d)return this.emeController.getKeySystemAccess([d])})}if(this.config.requireKeySystemAccessOnStart){const n=ss(this.config);if(n.length)return this.emeController.getKeySystemAccess(n)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var i,n;t&&e.setKeyFormat(t);const a=e.decryptdata;if(!a){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,je.KEY_LOAD_ERROR,c))}const r=a.uri;if(!r)return Promise.reject(this.createKeyLoadError(e,je.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${r}"`)));const o=Go(a);let d=this.keyIdToKeyInfo[o];if((i=d)!=null&&i.decryptdata.key)return a.key=d.decryptdata.key,Promise.resolve({frag:e,keyInfo:d});if(this.emeController&&(n=d)!=null&&n.keyLoadPromise)switch(this.emeController.getKeyStatus(d.decryptdata)){case"usable":case"usable-in-future":return d.keyLoadPromise.then(l=>{const{keyInfo:f}=l;return a.key=f.decryptdata.key,{frag:e,keyInfo:f}})}switch(this.log(`${this.keyIdToKeyInfo[o]?"Rel":"L"}oading${a.keyId?" keyId: "+fn(a.keyId):""} URI: ${a.uri} from ${e.type} ${e.level}`),d=this.keyIdToKeyInfo[o]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return a.keyFormat==="identity"?this.loadKeyHTTP(d,e):this.loadKeyEME(d,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(d,e);default:return Promise.reject(this.createKeyLoadError(e,je.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${a.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var n;if(!e.decryptdata.keyId&&(n=t.initSegment)!=null&&n.data){const r=hA(t.initSegment.data);if(r.length){let o=r[0];o.some(d=>d!==0)?(this.log(`Using keyId found in init segment ${fn(o)}`),hr.setKeyIdForUri(e.decryptdata.uri,o)):(o=hr.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${fn(o)}`)),e.decryptdata.keyId=o}}if(!e.decryptdata.keyId&&!Ji(t))return Promise.resolve(i);const a=this.emeController.loadKey(i);return(e.keyLoadPromise=a.then(r=>(e.mediaKeySessionContext=r,i))).catch(r=>{throw e.keyLoadPromise=null,"data"in r&&(r.data.frag=t),r})}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,n=i.loader,a=new n(i);return t.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((r,o)=>{const d={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=i.keyLoadPolicy.default,l={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(p,g,y,A)=>{const{frag:C,keyInfo:I}=y,P=Go(I.decryptdata);if(!C.decryptdata||I!==this.keyIdToKeyInfo[P])return o(this.createKeyLoadError(C,je.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),A));I.decryptdata.key=C.decryptdata.key=new Uint8Array(p.data),C.keyLoader=null,I.loader=null,r({frag:C,keyInfo:I})},onError:(p,g,y,A)=>{this.resetLoader(g),o(this.createKeyLoadError(t,je.KEY_LOAD_ERROR,new Error(`HTTP Error ${p.code} loading key ${p.text}`),y,Ii({url:d.url,data:void 0},p)))},onTimeout:(p,g,y)=>{this.resetLoader(g),o(this.createKeyLoadError(t,je.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),y))},onAbort:(p,g,y)=>{this.resetLoader(g),o(this.createKeyLoadError(t,je.INTERNAL_ABORTED,new Error("key loading aborted"),y))}};a.load(d,l,f)})}resetLoader(e){const{frag:t,keyInfo:i,url:n}=e,a=i.loader;t.keyLoader===a&&(t.keyLoader=null,i.loader=null);const r=Go(i.decryptdata)||n;delete this.keyIdToKeyInfo[r],a&&a.destroy()}}function Go(s){if(s.keyFormat!==mn.FAIRPLAY){const e=s.keyId;if(e)return fn(e)}return s.uri}function Eu(s){const{type:e}=s;switch(e){case yi.AUDIO_TRACK:return Mt.AUDIO;case yi.SUBTITLE_TRACK:return Mt.SUBTITLE;default:return Mt.MAIN}}function Vo(s,e){let t=s.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class WE{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.LEVEL_LOADING,this.onLevelLoading,this),e.on(V.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(V.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(V.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.LEVEL_LOADING,this.onLevelLoading,this),e.off(V.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(V.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(V.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,n=t.loader,a=i||n,r=new a(t);return this.loaders[e.type]=r,r}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:yi.MANIFEST,url:i,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:i,level:n,pathwayId:a,url:r,deliveryDirectives:o,levelInfo:d}=t;this.load({id:i,level:n,pathwayId:a,responseType:"text",type:yi.LEVEL,url:r,deliveryDirectives:o,levelOrTrack:d})}onAudioTrackLoading(e,t){const{id:i,groupId:n,url:a,deliveryDirectives:r,track:o}=t;this.load({id:i,groupId:n,level:null,responseType:"text",type:yi.AUDIO_TRACK,url:a,deliveryDirectives:r,levelOrTrack:o})}onSubtitleTrackLoading(e,t){const{id:i,groupId:n,url:a,deliveryDirectives:r,track:o}=t;this.load({id:i,groupId:n,level:null,responseType:"text",type:yi.SUBTITLE_TRACK,url:a,deliveryDirectives:r,levelOrTrack:o})}onLevelsUpdated(e,t){const i=this.loaders[yi.LEVEL];if(i){const n=i.context;n&&!t.levels.some(a=>a===n.levelOrTrack)&&(i.abort(),delete this.loaders[yi.LEVEL])}}load(e){var t;const i=this.hls.config;let n=this.getInternalLoader(e);if(n){const c=this.hls.logger,l=n.context;if(l&&l.levelOrTrack===e.levelOrTrack&&(l.url===e.url||l.deliveryDirectives&&!e.deliveryDirectives)){l.url===e.url?c.log(`[playlist-loader]: ignore ${e.url} ongoing request`):c.log(`[playlist-loader]: ignore ${e.url} in favor of ${l.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),n.abort()}let a;if(e.type===yi.MANIFEST?a=i.manifestLoadPolicy.default:a=Pi({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),n=this.createInternalLoader(e),wt((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===yi.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===yi.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===yi.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const l=c.partTarget,f=c.targetduration;if(l&&f){const p=Math.max(l*3,f*.8)*1e3;a=Pi({},a,{maxTimeToFirstByteMs:Math.min(p,a.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(p,a.maxTimeToFirstByteMs)})}}}const r=a.errorRetry||a.timeoutRetry||{},o={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:r.maxNumRetry||0,retryDelay:r.retryDelayMs||0,maxRetryDelay:r.maxRetryDelayMs||0},d={onSuccess:(c,l,f,p)=>{const g=this.getInternalLoader(f);this.resetInternalLoader(f.type);const y=c.data;l.parsing.start=performance.now(),Wn.isMediaPlaylist(y)||f.type!==yi.MANIFEST?this.handleTrackOrLevelPlaylist(c,l,f,p||null,g):this.handleMasterPlaylist(c,l,f,p)},onError:(c,l,f,p)=>{this.handleNetworkError(l,f,!1,c,p)},onTimeout:(c,l,f)=>{this.handleNetworkError(l,f,!0,void 0,c)}};n.load(e,o,d)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:i}=this.hls;(e||i)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,i,n){const a=this.hls,r=e.data,o=Vo(e,i),d=Wn.parseMasterPlaylist(r,o);if(d.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,i,d.playlistParsingError,n,t);return}const{contentSteering:c,levels:l,sessionData:f,sessionKeys:p,startTimeOffset:g,variableList:y}=d;this.variableList=y,l.forEach(P=>{const{unknownCodecs:M}=P;if(M){const{preferManagedMediaSource:G}=this.hls.config;let{audioCodec:Z,videoCodec:le}=P;for(let W=M.length;W--;){const N=M[W];ds(N,"audio",G)?(P.audioCodec=Z=Z?`${Z},${N}`:N,Qr.audio[Z.substring(0,4)]=2,M.splice(W,1)):ds(N,"video",G)&&(P.videoCodec=le=le?`${le},${N}`:N,Qr.video[le.substring(0,4)]=2,M.splice(W,1))}}});const{AUDIO:A=[],SUBTITLES:C,"CLOSED-CAPTIONS":I}=Wn.parseMasterPlaylistMedia(r,o,d);A.length&&!A.some(M=>!M.url)&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),A.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new ji({}),bitrate:0,url:""})),a.trigger(V.MANIFEST_LOADED,{levels:l,audioTracks:A,subtitles:C,captions:I,contentSteering:c,url:o,stats:t,networkDetails:n,sessionData:f,sessionKeys:p,startTimeOffset:g,variableList:y})}handleTrackOrLevelPlaylist(e,t,i,n,a){const r=this.hls,{id:o,level:d,type:c}=i,l=Vo(e,i),f=wt(d)?d:wt(o)?o:0,p=Eu(i),g=Wn.parseLevelPlaylist(e.data,l,f,p,0,this.variableList);if(c===yi.MANIFEST){const y={attrs:new ji({}),bitrate:0,details:g,name:"",url:l};g.requestScheduled=t.loading.start+af(g,0),r.trigger(V.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:l,stats:t,networkDetails:n,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=g,this.handlePlaylistLoaded(g,e,t,i,n,a)}handleManifestParsingError(e,t,i,n,a){this.hls.trigger(V.ERROR,{type:Gt.NETWORK_ERROR,details:je.MANIFEST_PARSING_ERROR,fatal:t.type===yi.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:n,stats:a})}handleNetworkError(e,t,i=!1,n,a){let r=`A network ${i?"timeout":"error"+(n?" (status "+n.code+")":"")} occurred while loading ${e.type}`;e.type===yi.LEVEL?r+=`: ${e.level} id: ${e.id}`:(e.type===yi.AUDIO_TRACK||e.type===yi.SUBTITLE_TRACK)&&(r+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(r);this.hls.logger.warn(`[playlist-loader]: ${r}`);let d=je.UNKNOWN,c=!1;const l=this.getInternalLoader(e);switch(e.type){case yi.MANIFEST:d=i?je.MANIFEST_LOAD_TIMEOUT:je.MANIFEST_LOAD_ERROR,c=!0;break;case yi.LEVEL:d=i?je.LEVEL_LOAD_TIMEOUT:je.LEVEL_LOAD_ERROR,c=!1;break;case yi.AUDIO_TRACK:d=i?je.AUDIO_TRACK_LOAD_TIMEOUT:je.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case yi.SUBTITLE_TRACK:d=i?je.SUBTITLE_TRACK_LOAD_TIMEOUT:je.SUBTITLE_LOAD_ERROR,c=!1;break}l&&this.resetInternalLoader(e.type);const f={type:Gt.NETWORK_ERROR,details:d,fatal:c,url:e.url,loader:l,context:e,error:o,networkDetails:t,stats:a};if(n){const p=(t==null?void 0:t.url)||e.url;f.response=Ii({url:p,data:void 0},n)}this.hls.trigger(V.ERROR,f)}handlePlaylistLoaded(e,t,i,n,a,r){const o=this.hls,{type:d,level:c,levelOrTrack:l,id:f,groupId:p,deliveryDirectives:g}=n,y=Vo(t,n),A=Eu(n);let C=typeof n.level=="number"&&A===Mt.MAIN?c:void 0;const I=e.playlistParsingError;if(I){if(this.hls.logger.warn(`${I} ${e.url}`),!o.config.ignorePlaylistParsingErrors){o.trigger(V.ERROR,{type:Gt.NETWORK_ERROR,details:je.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:I,reason:I.message,response:t,context:n,level:C,parent:A,networkDetails:a,stats:i});return}e.playlistParsingError=null}if(!e.fragments.length){const P=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(V.ERROR,{type:Gt.NETWORK_ERROR,details:je.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:P,reason:P.message,response:t,context:n,level:C,parent:A,networkDetails:a,stats:i});return}switch(e.live&&r&&(r.getCacheAge&&(e.ageHeader=r.getCacheAge()||0),(!r.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),d){case yi.MANIFEST:case yi.LEVEL:if(C){if(!l)C=0;else if(l!==o.levels[C]){const P=o.levels.indexOf(l);P>-1&&(C=P)}}o.trigger(V.LEVEL_LOADED,{details:e,levelInfo:l||o.levels[0],level:C||0,id:f||0,stats:i,networkDetails:a,deliveryDirectives:g,withoutMultiVariant:d===yi.MANIFEST});break;case yi.AUDIO_TRACK:o.trigger(V.AUDIO_TRACK_LOADED,{details:e,track:l,id:f||0,groupId:p||"",stats:i,networkDetails:a,deliveryDirectives:g});break;case yi.SUBTITLE_TRACK:o.trigger(V.SUBTITLE_TRACK_LOADED,{details:e,track:l,id:f||0,groupId:p||"",stats:i,networkDetails:a,deliveryDirectives:g});break}}}class sr{static get version(){return fs}static isMSESupported(){return sp()}static isSupported(){return jE()}static getMediaSource(){return fr()}static get Events(){return V}static get MetadataSchema(){return Cn}static get ErrorTypes(){return Gt}static get ErrorDetails(){return je}static get DefaultConfig(){return sr.defaultConfig?sr.defaultConfig:LE}static set DefaultConfig(e){sr.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new zl,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=eA(e.debug||!1,"Hls instance",e.assetPlayerId),i=this.config=PE(sr.DefaultConfig,e,t);this.userConfig=e,i.progressive&&OE(i,t);const{abrController:n,bufferController:a,capLevelController:r,errorController:o,fpsController:d}=i,c=new o(this),l=this.abrController=new n(this),f=new YA(this),p=i.interstitialsController,g=p?this.interstitialsController=new p(this,sr):null,y=this.bufferController=new a(this,f),A=this.capLevelController=new r(this),C=new d(this),I=new WE(this),P=i.contentSteeringController,M=P?new P(this):null,G=this.levelController=new VE(this,M),Z=new $E(this),le=new KE(this.config,this.logger),W=this.streamController=new zE(this,f,le),N=this.gapController=new NE(this,f);A.setStreamController(W),C.setStreamController(W);const U=[I,G,W];g&&U.splice(1,0,g),M&&U.splice(1,0,M),this.networkControllers=U;const O=[l,y,N,A,C,Z,f];this.audioTrackController=this.createController(i.audioTrackController,U);const z=i.audioStreamController;z&&U.push(this.audioStreamController=new z(this,f,le)),this.subtitleTrackController=this.createController(i.subtitleTrackController,U);const ce=i.subtitleStreamController;ce&&U.push(this.subtititleStreamController=new ce(this,f,le)),this.createController(i.timelineController,O),le.emeController=this.emeController=this.createController(i.emeController,O),this.cmcdController=this.createController(i.cmcdController,O),this.latencyController=this.createController(GE,O),this.coreComponents=O,U.push(c);const be=c.onErrorOut;typeof be=="function"&&this.on(V.ERROR,be,c),this.on(V.MANIFEST_LOADED,I.onManifestLoaded,I)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,n){this._emitter.off(e,t,i,n)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(i){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const n=e===V.ERROR;this.trigger(V.ERROR,{type:Gt.OTHER_ERROR,details:je.INTERNAL_EXCEPTION,fatal:n,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(V.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const a=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(V.ERROR,{type:Gt.OTHER_ERROR,details:je.ATTACH_MEDIA_ERROR,fatal:!0,error:a});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,i=t?e.media:e,n=t?e:{media:i};this._media=i,this.trigger(V.MEDIA_ATTACHING,n)}detachMedia(){this.logger.log("detachMedia"),this.trigger(V.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(V.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,i=this._url,n=this._url=Ml.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${n}`),t&&i&&(i!==n||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(V.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let i=0;i<this.networkControllers.length&&(this.networkControllers[i].startLoad(e,t),!(!this.started||!this.networkControllers));i++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Mt.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Mt.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Mt.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=NS()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){PA(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let n=0;n<i;n++)if(e[n].maxBitrate>=t)return n;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let n;if(t===-1&&e!=null&&e.length?n=e.length-1:n=t,i)for(let a=n;a--;){const r=e[a].attrs["HDCP-LEVEL"];if(r&&r<=i)return a}return n}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const i=Hh(t);return Vh(e,i,navigator.mediaCapabilities)}}sr.defaultConfig=void 0;var ap={exports:{}};(function(s,e){(function(t,i){s.exports=i()})(window,function(){return function(t){var i={};function n(a){if(i[a])return i[a].exports;var r=i[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=i,n.d=function(a,r,o){n.o(a,r)||Object.defineProperty(a,r,{enumerable:!0,get:o})},n.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},n.t=function(a,r){if(1&r&&(a=n(a)),8&r||4&r&&typeof a=="object"&&a&&a.__esModule)return a;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:a}),2&r&&typeof a!="string")for(var d in a)n.d(o,d,(function(c){return a[c]}).bind(null,d));return o},n.n=function(a){var r=a&&a.__esModule?function(){return a.default}:function(){return a};return n.d(r,"a",r),r},n.o=function(a,r){return Object.prototype.hasOwnProperty.call(a,r)},n.p="",n(n.s=25)}([function(t,i,n){var a=n(10),r=n.n(a),o=function(){function d(){}return d.e=function(c,l){c&&!d.FORCE_GLOBAL_TAG||(c=d.GLOBAL_TAG);var f="[".concat(c,"] > ").concat(l);d.ENABLE_CALLBACK&&d.emitter.emit("log","error",f),d.ENABLE_ERROR&&(console.error?console.error(f):console.warn?console.warn(f):console.log(f))},d.i=function(c,l){c&&!d.FORCE_GLOBAL_TAG||(c=d.GLOBAL_TAG);var f="[".concat(c,"] > ").concat(l);d.ENABLE_CALLBACK&&d.emitter.emit("log","info",f),d.ENABLE_INFO&&(console.info?console.info(f):console.log(f))},d.w=function(c,l){c&&!d.FORCE_GLOBAL_TAG||(c=d.GLOBAL_TAG);var f="[".concat(c,"] > ").concat(l);d.ENABLE_CALLBACK&&d.emitter.emit("log","warn",f),d.ENABLE_WARN&&(console.warn?console.warn(f):console.log(f))},d.d=function(c,l){c&&!d.FORCE_GLOBAL_TAG||(c=d.GLOBAL_TAG);var f="[".concat(c,"] > ").concat(l);d.ENABLE_CALLBACK&&d.emitter.emit("log","debug",f),d.ENABLE_DEBUG&&(console.debug?console.debug(f):console.log(f))},d.v=function(c,l){c&&!d.FORCE_GLOBAL_TAG||(c=d.GLOBAL_TAG);var f="[".concat(c,"] > ").concat(l);d.ENABLE_CALLBACK&&d.emitter.emit("log","verbose",f),d.ENABLE_VERBOSE&&console.log(f)},d}();o.GLOBAL_TAG="mpegts.js",o.FORCE_GLOBAL_TAG=!1,o.ENABLE_ERROR=!0,o.ENABLE_INFO=!0,o.ENABLE_WARN=!0,o.ENABLE_DEBUG=!0,o.ENABLE_VERBOSE=!0,o.ENABLE_CALLBACK=!1,o.emitter=new r.a,i.a=o},function(t,i,n){var a;(function(r){r.IO_ERROR="io_error",r.DEMUX_ERROR="demux_error",r.INIT_SEGMENT="init_segment",r.MEDIA_SEGMENT="media_segment",r.LOADING_COMPLETE="loading_complete",r.RECOVERED_EARLY_EOF="recovered_early_eof",r.MEDIA_INFO="media_info",r.METADATA_ARRIVED="metadata_arrived",r.SCRIPTDATA_ARRIVED="scriptdata_arrived",r.TIMED_ID3_METADATA_ARRIVED="timed_id3_metadata_arrived",r.SYNCHRONOUS_KLV_METADATA_ARRIVED="synchronous_klv_metadata_arrived",r.ASYNCHRONOUS_KLV_METADATA_ARRIVED="asynchronous_klv_metadata_arrived",r.SMPTE2038_METADATA_ARRIVED="smpte2038_metadata_arrived",r.SCTE35_METADATA_ARRIVED="scte35_metadata_arrived",r.PES_PRIVATE_DATA_DESCRIPTOR="pes_private_data_descriptor",r.PES_PRIVATE_DATA_ARRIVED="pes_private_data_arrived",r.STATISTICS_INFO="statistics_info",r.RECOMMEND_SEEKPOINT="recommend_seekpoint"})(a||(a={})),i.a=a},function(t,i,n){n.d(i,"c",function(){return r}),n.d(i,"b",function(){return o}),n.d(i,"a",function(){return d});var a=n(3),r={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},o={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},d=function(){function c(l){this._type=l||"undefined",this._status=r.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return c.prototype.destroy=function(){this._status=r.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},c.prototype.isWorking=function(){return this._status===r.kConnecting||this._status===r.kBuffering},Object.defineProperty(c.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(l){this._onContentLengthKnown=l},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(l){this._onURLRedirect=l},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(l){this._onDataArrival=l},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onError",{get:function(){return this._onError},set:function(l){this._onError=l},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onComplete",{get:function(){return this._onComplete},set:function(l){this._onComplete=l},enumerable:!1,configurable:!0}),c.prototype.open=function(l,f){throw new a.c("Unimplemented abstract function!")},c.prototype.abort=function(){throw new a.c("Unimplemented abstract function!")},c}()},function(t,i,n){n.d(i,"d",function(){return o}),n.d(i,"a",function(){return d}),n.d(i,"b",function(){return c}),n.d(i,"c",function(){return l});var a,r=(a=function(f,p){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var A in y)Object.prototype.hasOwnProperty.call(y,A)&&(g[A]=y[A])})(f,p)},function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function g(){this.constructor=f}a(f,p),f.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}),o=function(){function f(p){this._message=p}return Object.defineProperty(f.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),f.prototype.toString=function(){return this.name+": "+this.message},f}(),d=function(f){function p(g){return f.call(this,g)||this}return r(p,f),Object.defineProperty(p.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),p}(o),c=function(f){function p(g){return f.call(this,g)||this}return r(p,f),Object.defineProperty(p.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),p}(o),l=function(f){function p(g){return f.call(this,g)||this}return r(p,f),Object.defineProperty(p.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),p}(o)},function(t,i,n){var a;(function(r){r.ERROR="error",r.LOADING_COMPLETE="loading_complete",r.RECOVERED_EARLY_EOF="recovered_early_eof",r.MEDIA_INFO="media_info",r.METADATA_ARRIVED="metadata_arrived",r.SCRIPTDATA_ARRIVED="scriptdata_arrived",r.TIMED_ID3_METADATA_ARRIVED="timed_id3_metadata_arrived",r.SYNCHRONOUS_KLV_METADATA_ARRIVED="synchronous_klv_metadata_arrived",r.ASYNCHRONOUS_KLV_METADATA_ARRIVED="asynchronous_klv_metadata_arrived",r.SMPTE2038_METADATA_ARRIVED="smpte2038_metadata_arrived",r.SCTE35_METADATA_ARRIVED="scte35_metadata_arrived",r.PES_PRIVATE_DATA_DESCRIPTOR="pes_private_data_descriptor",r.PES_PRIVATE_DATA_ARRIVED="pes_private_data_arrived",r.STATISTICS_INFO="statistics_info",r.DESTROYING="destroying"})(a||(a={})),i.a=a},function(t,i,n){var a={};(function(){var r=self.navigator.userAgent.toLowerCase(),o=/(edge)\/([\w.]+)/.exec(r)||/(opr)[\/]([\w.]+)/.exec(r)||/(chrome)[ \/]([\w.]+)/.exec(r)||/(iemobile)[\/]([\w.]+)/.exec(r)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||r.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(r)||r.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(r)||[],d=/(ipad)/.exec(r)||/(ipod)/.exec(r)||/(windows phone)/.exec(r)||/(iphone)/.exec(r)||/(kindle)/.exec(r)||/(android)/.exec(r)||/(windows)/.exec(r)||/(mac)/.exec(r)||/(linux)/.exec(r)||/(cros)/.exec(r)||[],c={browser:o[5]||o[3]||o[1]||"",version:o[2]||o[4]||"0",majorVersion:o[4]||o[2]||"0",platform:d[0]||""},l={};if(c.browser){l[c.browser]=!0;var f=c.majorVersion.split(".");l.version={major:parseInt(c.majorVersion,10),string:c.version},f.length>1&&(l.version.minor=parseInt(f[1],10)),f.length>2&&(l.version.build=parseInt(f[2],10))}c.platform&&(l[c.platform]=!0),(l.chrome||l.opr||l.safari)&&(l.webkit=!0),(l.rv||l.iemobile)&&(l.rv&&delete l.rv,c.browser="msie",l.msie=!0),l.edge&&(delete l.edge,c.browser="msedge",l.msedge=!0),l.opr&&(c.browser="opera",l.opera=!0),l.safari&&l.android&&(c.browser="android",l.android=!0);for(var p in l.name=c.browser,l.platform=c.platform,a)a.hasOwnProperty(p)&&delete a[p];Object.assign(a,l)})(),i.a=a},function(t,i,n){i.a={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},function(t,i,n){var a;(function(r){r.ERROR="error",r.SOURCE_OPEN="source_open",r.UPDATE_END="update_end",r.BUFFER_FULL="buffer_full",r.START_STREAMING="start_streaming",r.END_STREAMING="end_streaming"})(a||(a={})),i.a=a},function(t,i,n){var a=n(3),r=function(){function o(d){this.TAG="ExpGolomb",this._buffer=d,this._buffer_index=0,this._total_bytes=d.byteLength,this._total_bits=8*d.byteLength,this._current_word=0,this._current_word_bits_left=0}return o.prototype.destroy=function(){this._buffer=null},o.prototype._fillCurrentWord=function(){var d=this._total_bytes-this._buffer_index;if(d<=0)throw new a.a("ExpGolomb: _fillCurrentWord() but no bytes available");var c=Math.min(4,d),l=new Uint8Array(4);l.set(this._buffer.subarray(this._buffer_index,this._buffer_index+c)),this._current_word=new DataView(l.buffer).getUint32(0,!1),this._buffer_index+=c,this._current_word_bits_left=8*c},o.prototype.readBits=function(d){if(d>32)throw new a.b("ExpGolomb: readBits() bits exceeded max 32bits!");if(d<=this._current_word_bits_left){var c=this._current_word>>>32-d;return this._current_word<<=d,this._current_word_bits_left-=d,c}var l=this._current_word_bits_left?this._current_word:0;l>>>=32-this._current_word_bits_left;var f=d-this._current_word_bits_left;this._fillCurrentWord();var p=Math.min(f,this._current_word_bits_left),g=this._current_word>>>32-p;return this._current_word<<=p,this._current_word_bits_left-=p,l=l<<p|g},o.prototype.readBool=function(){return this.readBits(1)===1},o.prototype.readByte=function(){return this.readBits(8)},o.prototype._skipLeadingZero=function(){var d;for(d=0;d<this._current_word_bits_left;d++)if(this._current_word&2147483648>>>d)return this._current_word<<=d,this._current_word_bits_left-=d,d;return this._fillCurrentWord(),d+this._skipLeadingZero()},o.prototype.readUEG=function(){var d=this._skipLeadingZero();return this.readBits(d+1)-1},o.prototype.readSEG=function(){var d=this.readUEG();return 1&d?d+1>>>1:-1*(d>>>1)},o}();i.a=r},function(t,i,n){var a=n(10),r=n.n(a),o=n(0),d=function(){function c(){}return Object.defineProperty(c,"forceGlobalTag",{get:function(){return o.a.FORCE_GLOBAL_TAG},set:function(l){o.a.FORCE_GLOBAL_TAG=l,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"globalTag",{get:function(){return o.a.GLOBAL_TAG},set:function(l){o.a.GLOBAL_TAG=l,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableAll",{get:function(){return o.a.ENABLE_VERBOSE&&o.a.ENABLE_DEBUG&&o.a.ENABLE_INFO&&o.a.ENABLE_WARN&&o.a.ENABLE_ERROR},set:function(l){o.a.ENABLE_VERBOSE=l,o.a.ENABLE_DEBUG=l,o.a.ENABLE_INFO=l,o.a.ENABLE_WARN=l,o.a.ENABLE_ERROR=l,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableDebug",{get:function(){return o.a.ENABLE_DEBUG},set:function(l){o.a.ENABLE_DEBUG=l,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableVerbose",{get:function(){return o.a.ENABLE_VERBOSE},set:function(l){o.a.ENABLE_VERBOSE=l,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableInfo",{get:function(){return o.a.ENABLE_INFO},set:function(l){o.a.ENABLE_INFO=l,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableWarn",{get:function(){return o.a.ENABLE_WARN},set:function(l){o.a.ENABLE_WARN=l,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableError",{get:function(){return o.a.ENABLE_ERROR},set:function(l){o.a.ENABLE_ERROR=l,c._notifyChange()},enumerable:!1,configurable:!0}),c.getConfig=function(){return{globalTag:o.a.GLOBAL_TAG,forceGlobalTag:o.a.FORCE_GLOBAL_TAG,enableVerbose:o.a.ENABLE_VERBOSE,enableDebug:o.a.ENABLE_DEBUG,enableInfo:o.a.ENABLE_INFO,enableWarn:o.a.ENABLE_WARN,enableError:o.a.ENABLE_ERROR,enableCallback:o.a.ENABLE_CALLBACK}},c.applyConfig=function(l){o.a.GLOBAL_TAG=l.globalTag,o.a.FORCE_GLOBAL_TAG=l.forceGlobalTag,o.a.ENABLE_VERBOSE=l.enableVerbose,o.a.ENABLE_DEBUG=l.enableDebug,o.a.ENABLE_INFO=l.enableInfo,o.a.ENABLE_WARN=l.enableWarn,o.a.ENABLE_ERROR=l.enableError,o.a.ENABLE_CALLBACK=l.enableCallback},c._notifyChange=function(){var l=c.emitter;if(l.listenerCount("change")>0){var f=c.getConfig();l.emit("change",f)}},c.registerListener=function(l){c.emitter.addListener("change",l)},c.removeListener=function(l){c.emitter.removeListener("change",l)},c.addLogListener=function(l){o.a.emitter.addListener("log",l),o.a.emitter.listenerCount("log")>0&&(o.a.ENABLE_CALLBACK=!0,c._notifyChange())},c.removeLogListener=function(l){o.a.emitter.removeListener("log",l),o.a.emitter.listenerCount("log")===0&&(o.a.ENABLE_CALLBACK=!1,c._notifyChange())},c}();d.emitter=new r.a,i.a=d},function(t,i,n){var a,r=typeof Reflect=="object"?Reflect:null,o=r&&typeof r.apply=="function"?r.apply:function(G,Z,le){return Function.prototype.apply.call(G,Z,le)};a=r&&typeof r.ownKeys=="function"?r.ownKeys:Object.getOwnPropertySymbols?function(G){return Object.getOwnPropertyNames(G).concat(Object.getOwnPropertySymbols(G))}:function(G){return Object.getOwnPropertyNames(G)};var d=Number.isNaN||function(G){return G!=G};function c(){c.init.call(this)}t.exports=c,t.exports.once=function(G,Z){return new Promise(function(le,W){function N(O){G.removeListener(Z,U),W(O)}function U(){typeof G.removeListener=="function"&&G.removeListener("error",N),le([].slice.call(arguments))}M(G,Z,U,{once:!0}),Z!=="error"&&function(O,z,ce){typeof O.on=="function"&&M(O,"error",z,ce)}(G,N,{once:!0})})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function f(G){if(typeof G!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof G)}function p(G){return G._maxListeners===void 0?c.defaultMaxListeners:G._maxListeners}function g(G,Z,le,W){var N,U,O,z;if(f(le),(U=G._events)===void 0?(U=G._events=Object.create(null),G._eventsCount=0):(U.newListener!==void 0&&(G.emit("newListener",Z,le.listener?le.listener:le),U=G._events),O=U[Z]),O===void 0)O=U[Z]=le,++G._eventsCount;else if(typeof O=="function"?O=U[Z]=W?[le,O]:[O,le]:W?O.unshift(le):O.push(le),(N=p(G))>0&&O.length>N&&!O.warned){O.warned=!0;var ce=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(Z)+" listeners added. Use emitter.setMaxListeners() to increase limit");ce.name="MaxListenersExceededWarning",ce.emitter=G,ce.type=Z,ce.count=O.length,z=ce,console&&console.warn&&console.warn(z)}return G}function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function A(G,Z,le){var W={fired:!1,wrapFn:void 0,target:G,type:Z,listener:le},N=y.bind(W);return N.listener=le,W.wrapFn=N,N}function C(G,Z,le){var W=G._events;if(W===void 0)return[];var N=W[Z];return N===void 0?[]:typeof N=="function"?le?[N.listener||N]:[N]:le?function(U){for(var O=new Array(U.length),z=0;z<O.length;++z)O[z]=U[z].listener||U[z];return O}(N):P(N,N.length)}function I(G){var Z=this._events;if(Z!==void 0){var le=Z[G];if(typeof le=="function")return 1;if(le!==void 0)return le.length}return 0}function P(G,Z){for(var le=new Array(Z),W=0;W<Z;++W)le[W]=G[W];return le}function M(G,Z,le,W){if(typeof G.on=="function")W.once?G.once(Z,le):G.on(Z,le);else{if(typeof G.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof G);G.addEventListener(Z,function N(U){W.once&&G.removeEventListener(Z,N),le(U)})}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(G){if(typeof G!="number"||G<0||d(G))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+G+".");l=G}}),c.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(G){if(typeof G!="number"||G<0||d(G))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+G+".");return this._maxListeners=G,this},c.prototype.getMaxListeners=function(){return p(this)},c.prototype.emit=function(G){for(var Z=[],le=1;le<arguments.length;le++)Z.push(arguments[le]);var W=G==="error",N=this._events;if(N!==void 0)W=W&&N.error===void 0;else if(!W)return!1;if(W){var U;if(Z.length>0&&(U=Z[0]),U instanceof Error)throw U;var O=new Error("Unhandled error."+(U?" ("+U.message+")":""));throw O.context=U,O}var z=N[G];if(z===void 0)return!1;if(typeof z=="function")o(z,this,Z);else{var ce=z.length,be=P(z,ce);for(le=0;le<ce;++le)o(be[le],this,Z)}return!0},c.prototype.addListener=function(G,Z){return g(this,G,Z,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(G,Z){return g(this,G,Z,!0)},c.prototype.once=function(G,Z){return f(Z),this.on(G,A(this,G,Z)),this},c.prototype.prependOnceListener=function(G,Z){return f(Z),this.prependListener(G,A(this,G,Z)),this},c.prototype.removeListener=function(G,Z){var le,W,N,U,O;if(f(Z),(W=this._events)===void 0)return this;if((le=W[G])===void 0)return this;if(le===Z||le.listener===Z)--this._eventsCount==0?this._events=Object.create(null):(delete W[G],W.removeListener&&this.emit("removeListener",G,le.listener||Z));else if(typeof le!="function"){for(N=-1,U=le.length-1;U>=0;U--)if(le[U]===Z||le[U].listener===Z){O=le[U].listener,N=U;break}if(N<0)return this;N===0?le.shift():function(z,ce){for(;ce+1<z.length;ce++)z[ce]=z[ce+1];z.pop()}(le,N),le.length===1&&(W[G]=le[0]),W.removeListener!==void 0&&this.emit("removeListener",G,O||Z)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(G){var Z,le,W;if((le=this._events)===void 0)return this;if(le.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):le[G]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete le[G]),this;if(arguments.length===0){var N,U=Object.keys(le);for(W=0;W<U.length;++W)(N=U[W])!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Z=le[G])=="function")this.removeListener(G,Z);else if(Z!==void 0)for(W=Z.length-1;W>=0;W--)this.removeListener(G,Z[W]);return this},c.prototype.listeners=function(G){return C(this,G,!0)},c.prototype.rawListeners=function(G){return C(this,G,!1)},c.listenerCount=function(G,Z){return typeof G.listenerCount=="function"?G.listenerCount(Z):I.call(G,Z)},c.prototype.listenerCount=I,c.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},function(t,i,n){n.d(i,"b",function(){return o}),n.d(i,"a",function(){return d});var a=n(2),r=n(6),o={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},d={NETWORK_EXCEPTION:a.b.EXCEPTION,NETWORK_STATUS_CODE_INVALID:a.b.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:a.b.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:a.b.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:r.a.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:r.a.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:r.a.CODEC_UNSUPPORTED}},function(t,i,n){n.d(i,"d",function(){return a}),n.d(i,"b",function(){return r}),n.d(i,"a",function(){return o}),n.d(i,"c",function(){return d});var a=function(c,l,f,p,g){this.dts=c,this.pts=l,this.duration=f,this.originalDts=p,this.isSyncPoint=g,this.fileposition=null},r=function(){function c(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return c.prototype.appendSyncPoint=function(l){l.isSyncPoint=!0,this.syncPoints.push(l)},c}(),o=function(){function c(){this._list=[]}return c.prototype.clear=function(){this._list=[]},c.prototype.appendArray=function(l){var f=this._list;l.length!==0&&(f.length>0&&l[0].originalDts<f[f.length-1].originalDts&&this.clear(),Array.prototype.push.apply(f,l))},c.prototype.getLastSyncPointBeforeDts=function(l){if(this._list.length==0)return null;var f=this._list,p=0,g=f.length-1,y=0,A=0,C=g;for(l<f[0].dts&&(p=0,A=C+1);A<=C;){if((y=A+Math.floor((C-A)/2))===g||l>=f[y].dts&&l<f[y+1].dts){p=y;break}f[y].dts<l?A=y+1:C=y-1}return this._list[p]},c}(),d=function(){function c(l){this._type=l,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(c.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),c.prototype.isEmpty=function(){return this._list.length===0},c.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},c.prototype._searchNearestSegmentBefore=function(l){var f=this._list;if(f.length===0)return-2;var p=f.length-1,g=0,y=0,A=p,C=0;if(l<f[0].originalBeginDts)return C=-1;for(;y<=A;){if((g=y+Math.floor((A-y)/2))===p||l>f[g].lastSample.originalDts&&l<f[g+1].originalBeginDts){C=g;break}f[g].originalBeginDts<l?y=g+1:A=g-1}return C},c.prototype._searchNearestSegmentAfter=function(l){return this._searchNearestSegmentBefore(l)+1},c.prototype.append=function(l){var f=this._list,p=l,g=this._lastAppendLocation,y=0;g!==-1&&g<f.length&&p.originalBeginDts>=f[g].lastSample.originalDts&&(g===f.length-1||g<f.length-1&&p.originalBeginDts<f[g+1].originalBeginDts)?y=g+1:f.length>0&&(y=this._searchNearestSegmentBefore(p.originalBeginDts)+1),this._lastAppendLocation=y,this._list.splice(y,0,p)},c.prototype.getLastSegmentBefore=function(l){var f=this._searchNearestSegmentBefore(l);return f>=0?this._list[f]:null},c.prototype.getLastSampleBefore=function(l){var f=this.getLastSegmentBefore(l);return f!=null?f.lastSample:null},c.prototype.getLastSyncPointBefore=function(l){for(var f=this._searchNearestSegmentBefore(l),p=this._list[f].syncPoints;p.length===0&&f>0;)f--,p=this._list[f].syncPoints;return p.length>0?p[p.length-1]:null},c}()},function(t,i,n){var a=function(){function r(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return r.prototype.isComplete=function(){var o=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,d=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&o&&d},r.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},r.prototype.getNearestKeyframe=function(o){if(this.keyframesIndex==null)return null;var d=this.keyframesIndex,c=this._search(d.times,o);return{index:c,milliseconds:d.times[c],fileposition:d.filepositions[c]}},r.prototype._search=function(o,d){var c=0,l=o.length-1,f=0,p=0,g=l;for(d<o[0]&&(c=0,p=g+1);p<=g;){if((f=p+Math.floor((g-p)/2))===l||d>=o[f]&&d<o[f+1]){c=f;break}o[f]<d?p=f+1:g=f-1}return c},r}();i.a=a},function(t,i,n){var a,r=n(0),o=n(13),d=n(3),c=function(){function H(){}return H.prototype.destroy=function(){this.onError=null,this.onMediaInfo=null,this.onMetaDataArrived=null,this.onTrackMetadata=null,this.onDataAvailable=null,this.onTimedID3Metadata=null,this.onSynchronousKLVMetadata=null,this.onAsynchronousKLVMetadata=null,this.onSMPTE2038Metadata=null,this.onSCTE35Metadata=null,this.onPESPrivateData=null,this.onPESPrivateDataDescriptor=null},H}(),l=function(){this.program_pmt_pid={}};(function(H){H[H.kMPEG1Audio=3]="kMPEG1Audio",H[H.kMPEG2Audio=4]="kMPEG2Audio",H[H.kPESPrivateData=6]="kPESPrivateData",H[H.kADTSAAC=15]="kADTSAAC",H[H.kLOASAAC=17]="kLOASAAC",H[H.kAC3=129]="kAC3",H[H.kEAC3=135]="kEAC3",H[H.kMetadata=21]="kMetadata",H[H.kSCTE35=134]="kSCTE35",H[H.kH264=27]="kH264",H[H.kH265=36]="kH265"})(a||(a={}));var f,p=function(){this.pid_stream_type={},this.common_pids={h264:void 0,h265:void 0,av1:void 0,adts_aac:void 0,loas_aac:void 0,opus:void 0,ac3:void 0,eac3:void 0,mp3:void 0},this.pes_private_data_pids={},this.timed_id3_pids={},this.synchronous_klv_pids={},this.asynchronous_klv_pids={},this.scte_35_pids={},this.smpte2038_pids={}},g=function(){},y=function(){},A=function(){this.slices=[],this.total_length=0,this.expected_length=0,this.file_position=0};(function(H){H[H.kUnspecified=0]="kUnspecified",H[H.kSliceNonIDR=1]="kSliceNonIDR",H[H.kSliceDPA=2]="kSliceDPA",H[H.kSliceDPB=3]="kSliceDPB",H[H.kSliceDPC=4]="kSliceDPC",H[H.kSliceIDR=5]="kSliceIDR",H[H.kSliceSEI=6]="kSliceSEI",H[H.kSliceSPS=7]="kSliceSPS",H[H.kSlicePPS=8]="kSlicePPS",H[H.kSliceAUD=9]="kSliceAUD",H[H.kEndOfSequence=10]="kEndOfSequence",H[H.kEndOfStream=11]="kEndOfStream",H[H.kFiller=12]="kFiller",H[H.kSPSExt=13]="kSPSExt",H[H.kReserved0=14]="kReserved0"})(f||(f={}));var C,I,P=function(){},M=function(H){var fe=H.data.byteLength;this.type=H.type,this.data=new Uint8Array(4+fe),new DataView(this.data.buffer).setUint32(0,fe),this.data.set(H.data,4)},G=function(){function H(fe){this.TAG="H264AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=fe,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&r.a.e(this.TAG,"Could not find H264 startcode until payload end!")}return H.prototype.findNextStartCodeOffset=function(fe){for(var J=fe,K=this.data_;;){if(J+3>=K.byteLength)return this.eof_flag_=!0,K.byteLength;var ue=K[J+0]<<24|K[J+1]<<16|K[J+2]<<8|K[J+3],Ce=K[J+0]<<16|K[J+1]<<8|K[J+2];if(ue===1||Ce===1)return J;J++}},H.prototype.readNextNaluPayload=function(){for(var fe=this.data_,J=null;J==null&&!this.eof_flag_;){var K=this.current_startcode_offset_,ue=31&fe[K+=(fe[K]<<24|fe[K+1]<<16|fe[K+2]<<8|fe[K+3])===1?4:3],Ce=(128&fe[K])>>>7,ye=this.findNextStartCodeOffset(K);if(this.current_startcode_offset_=ye,!(ue>=f.kReserved0)&&Ce===0){var Oe=fe.subarray(K,ye);(J=new P).type=ue,J.data=Oe}}return J},H}(),Z=function(){function H(fe,J,K){var ue=8+fe.byteLength+1+2+J.byteLength,Ce=!1;fe[3]!==66&&fe[3]!==77&&fe[3]!==88&&(Ce=!0,ue+=4);var ye=this.data=new Uint8Array(ue);ye[0]=1,ye[1]=fe[1],ye[2]=fe[2],ye[3]=fe[3],ye[4]=255,ye[5]=225;var Oe=fe.byteLength;ye[6]=Oe>>>8,ye[7]=255&Oe;var Ye=8;ye.set(fe,8),ye[Ye+=Oe]=1;var Be=J.byteLength;ye[Ye+1]=Be>>>8,ye[Ye+2]=255&Be,ye.set(J,Ye+3),Ye+=3+Be,Ce&&(ye[Ye]=252|K.chroma_format_idc,ye[Ye+1]=248|K.bit_depth_luma-8,ye[Ye+2]=248|K.bit_depth_chroma-8,ye[Ye+3]=0,Ye+=4)}return H.prototype.getData=function(){return this.data},H}(),le=n(23),W=n(8);(function(H){H[H.kNull=0]="kNull",H[H.kAACMain=1]="kAACMain",H[H.kAAC_LC=2]="kAAC_LC",H[H.kAAC_SSR=3]="kAAC_SSR",H[H.kAAC_LTP=4]="kAAC_LTP",H[H.kAAC_SBR=5]="kAAC_SBR",H[H.kAAC_Scalable=6]="kAAC_Scalable",H[H.kLayer1=32]="kLayer1",H[H.kLayer2=33]="kLayer2",H[H.kLayer3=34]="kLayer3"})(C||(C={})),function(H){H[H.k96000Hz=0]="k96000Hz",H[H.k88200Hz=1]="k88200Hz",H[H.k64000Hz=2]="k64000Hz",H[H.k48000Hz=3]="k48000Hz",H[H.k44100Hz=4]="k44100Hz",H[H.k32000Hz=5]="k32000Hz",H[H.k24000Hz=6]="k24000Hz",H[H.k22050Hz=7]="k22050Hz",H[H.k16000Hz=8]="k16000Hz",H[H.k12000Hz=9]="k12000Hz",H[H.k11025Hz=10]="k11025Hz",H[H.k8000Hz=11]="k8000Hz",H[H.k7350Hz=12]="k7350Hz"}(I||(I={}));var N,U,O=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],z=(N=function(H,fe){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,K){J.__proto__=K}||function(J,K){for(var ue in K)Object.prototype.hasOwnProperty.call(K,ue)&&(J[ue]=K[ue])})(H,fe)},function(H,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Class extends value "+String(fe)+" is not a constructor or null");function J(){this.constructor=H}N(H,fe),H.prototype=fe===null?Object.create(fe):(J.prototype=fe.prototype,new J)}),ce=function(){},be=function(H){function fe(){return H!==null&&H.apply(this,arguments)||this}return z(fe,H),fe}(ce),Le=function(){function H(fe){this.TAG="AACADTSParser",this.data_=fe,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&r.a.e(this.TAG,"Could not found ADTS syncword until payload end")}return H.prototype.findNextSyncwordOffset=function(fe){for(var J=fe,K=this.data_;;){if(J+7>=K.byteLength)return this.eof_flag_=!0,K.byteLength;if((K[J+0]<<8|K[J+1])>>>4===4095)return J;J++}},H.prototype.readNextAACFrame=function(){for(var fe=this.data_,J=null;J==null&&!this.eof_flag_;){var K=this.current_syncword_offset_,ue=(8&fe[K+1])>>>3,Ce=(6&fe[K+1])>>>1,ye=1&fe[K+1],Oe=(192&fe[K+2])>>>6,Ye=(60&fe[K+2])>>>2,Be=(1&fe[K+2])<<2|(192&fe[K+3])>>>6,et=(3&fe[K+3])<<11|fe[K+4]<<3|(224&fe[K+5])>>>5;if(fe[K+6],K+et>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var Ze=ye===1?7:9,nt=et-Ze;K+=Ze;var at=this.findNextSyncwordOffset(K+nt);if(this.current_syncword_offset_=at,(ue===0||ue===1)&&Ce===0){var kt=fe.subarray(K,K+nt);(J=new ce).audio_object_type=Oe+1,J.sampling_freq_index=Ye,J.sampling_frequency=O[Ye],J.channel_config=Be,J.data=kt}}return J},H.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},H.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},H}(),xe=function(){function H(fe){this.TAG="AACLOASParser",this.data_=fe,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&r.a.e(this.TAG,"Could not found LOAS syncword until payload end")}return H.prototype.findNextSyncwordOffset=function(fe){for(var J=fe,K=this.data_;;){if(J+1>=K.byteLength)return this.eof_flag_=!0,K.byteLength;if((K[J+0]<<3|K[J+1]>>>5)===695)return J;J++}},H.prototype.getLATMValue=function(fe){for(var J=fe.readBits(2),K=0,ue=0;ue<=J;ue++)K<<=8,K|=fe.readByte();return K},H.prototype.readNextAACFrame=function(fe){for(var J=this.data_,K=null;K==null&&!this.eof_flag_;){var ue=this.current_syncword_offset_,Ce=(31&J[ue+1])<<8|J[ue+2];if(ue+3+Ce>=this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var ye=new W.a(J.subarray(ue+3,ue+3+Ce)),Oe=null;if(ye.readBool()){if(fe==null){r.a.w(this.TAG,"StreamMuxConfig Missing"),this.current_syncword_offset_=this.findNextSyncwordOffset(ue+3+Ce),ye.destroy();continue}Oe=fe}else{var Ye=ye.readBool();if(Ye&&ye.readBool()){r.a.e(this.TAG,"audioMuxVersionA is Not Supported"),ye.destroy();break}if(Ye&&this.getLATMValue(ye),!ye.readBool()){r.a.e(this.TAG,"allStreamsSameTimeFraming zero is Not Supported"),ye.destroy();break}if(ye.readBits(6)!==0){r.a.e(this.TAG,"more than 2 numSubFrames Not Supported"),ye.destroy();break}if(ye.readBits(4)!==0){r.a.e(this.TAG,"more than 2 numProgram Not Supported"),ye.destroy();break}if(ye.readBits(3)!==0){r.a.e(this.TAG,"more than 2 numLayer Not Supported"),ye.destroy();break}var Be=Ye?this.getLATMValue(ye):0,et=ye.readBits(5);Be-=5;var Ze=ye.readBits(4);Be-=4;var nt=ye.readBits(4);Be-=4,ye.readBits(3),(Be-=3)>0&&ye.readBits(Be);var at=ye.readBits(3);if(at!==0){r.a.e(this.TAG,"frameLengthType = ".concat(at,". Only frameLengthType = 0 Supported")),ye.destroy();break}ye.readByte();var kt=ye.readBool();if(kt)if(Ye)this.getLATMValue(ye);else{for(var qt=0;;){qt<<=8;var gi=ye.readBool();if(qt+=ye.readByte(),!gi)break}console.log(qt)}ye.readBool()&&ye.readByte(),(Oe=new be).audio_object_type=et,Oe.sampling_freq_index=Ze,Oe.sampling_frequency=O[Oe.sampling_freq_index],Oe.channel_config=nt,Oe.other_data_present=kt}for(var xi=0;;){var Ai=ye.readByte();if(xi+=Ai,Ai!==255)break}for(var ui=new Uint8Array(xi),Oi=0;Oi<xi;Oi++)ui[Oi]=ye.readByte();(K=new be).audio_object_type=Oe.audio_object_type,K.sampling_freq_index=Oe.sampling_freq_index,K.sampling_frequency=O[Oe.sampling_freq_index],K.channel_config=Oe.channel_config,K.other_data_present=Oe.other_data_present,K.data=ui,this.current_syncword_offset_=this.findNextSyncwordOffset(ue+3+Ce)}return K},H.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},H.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},H}(),ve=function(H){var fe=null,J=H.audio_object_type,K=H.audio_object_type,ue=H.sampling_freq_index,Ce=H.channel_config,ye=0,Oe=navigator.userAgent.toLowerCase();Oe.indexOf("firefox")!==-1?ue>=6?(K=5,fe=new Array(4),ye=ue-3):(K=2,fe=new Array(2),ye=ue):Oe.indexOf("android")!==-1?(K=2,fe=new Array(2),ye=ue):(K=5,ye=ue,fe=new Array(4),ue>=6?ye=ue-3:Ce===1&&(K=2,fe=new Array(2),ye=ue)),fe[0]=K<<3,fe[0]|=(15&ue)>>>1,fe[1]=(15&ue)<<7,fe[1]|=(15&Ce)<<3,K===5&&(fe[1]|=(15&ye)>>>1,fe[2]=(1&ye)<<7,fe[2]|=8,fe[3]=0),this.config=fe,this.sampling_rate=O[ue],this.channel_count=Ce,this.codec_mimetype="mp4a.40."+K,this.original_codec_mimetype="mp4a.40."+J},ze=function(){},Pe=function(){};(function(H){H[H.kSpliceNull=0]="kSpliceNull",H[H.kSpliceSchedule=4]="kSpliceSchedule",H[H.kSpliceInsert=5]="kSpliceInsert",H[H.kTimeSignal=6]="kTimeSignal",H[H.kBandwidthReservation=7]="kBandwidthReservation",H[H.kPrivateCommand=255]="kPrivateCommand"})(U||(U={}));var Y,b=function(H){var fe=H.readBool();return fe?(H.readBits(6),{time_specified_flag:fe,pts_time:4*H.readBits(31)+H.readBits(2)}):(H.readBits(7),{time_specified_flag:fe})},S=function(H){var fe=H.readBool();return H.readBits(6),{auto_return:fe,duration:4*H.readBits(31)+H.readBits(2)}},k=function(H,fe){var J=fe.readBits(8);return H?{component_tag:J}:{component_tag:J,splice_time:b(fe)}},R=function(H){return{component_tag:H.readBits(8),utc_splice_time:H.readBits(32)}},w=function(H){var fe=H.readBits(32),J=H.readBool();H.readBits(7);var K={splice_event_id:fe,splice_event_cancel_indicator:J};if(J)return K;if(K.out_of_network_indicator=H.readBool(),K.program_splice_flag=H.readBool(),K.duration_flag=H.readBool(),H.readBits(5),K.program_splice_flag)K.utc_splice_time=H.readBits(32);else{K.component_count=H.readBits(8),K.components=[];for(var ue=0;ue<K.component_count;ue++)K.components.push(R(H))}return K.duration_flag&&(K.break_duration=S(H)),K.unique_program_id=H.readBits(16),K.avail_num=H.readBits(8),K.avails_expected=H.readBits(8),K},$=function(H,fe,J,K){return{descriptor_tag:H,descriptor_length:fe,identifier:J,provider_avail_id:K.readBits(32)}},X=function(H,fe,J,K){var ue=K.readBits(8),Ce=K.readBits(3);K.readBits(5);for(var ye="",Oe=0;Oe<Ce;Oe++)ye+=String.fromCharCode(K.readBits(8));return{descriptor_tag:H,descriptor_length:fe,identifier:J,preroll:ue,dtmf_count:Ce,DTMF_char:ye}},ie=function(H){var fe=H.readBits(8);return H.readBits(7),{component_tag:fe,pts_offset:4*H.readBits(31)+H.readBits(2)}},se=function(H,fe,J,K){var ue=K.readBits(32),Ce=K.readBool();K.readBits(7);var ye={descriptor_tag:H,descriptor_length:fe,identifier:J,segmentation_event_id:ue,segmentation_event_cancel_indicator:Ce};if(Ce)return ye;if(ye.program_segmentation_flag=K.readBool(),ye.segmentation_duration_flag=K.readBool(),ye.delivery_not_restricted_flag=K.readBool(),ye.delivery_not_restricted_flag?K.readBits(5):(ye.web_delivery_allowed_flag=K.readBool(),ye.no_regional_blackout_flag=K.readBool(),ye.archive_allowed_flag=K.readBool(),ye.device_restrictions=K.readBits(2)),!ye.program_segmentation_flag){ye.component_count=K.readBits(8),ye.components=[];for(var Oe=0;Oe<ye.component_count;Oe++)ye.components.push(ie(K))}ye.segmentation_duration_flag&&(ye.segmentation_duration=K.readBits(40)),ye.segmentation_upid_type=K.readBits(8),ye.segmentation_upid_length=K.readBits(8);var Ye=new Uint8Array(ye.segmentation_upid_length);for(Oe=0;Oe<ye.segmentation_upid_length;Oe++)Ye[Oe]=K.readBits(8);return ye.segmentation_upid=Ye.buffer,ye.segmentation_type_id=K.readBits(8),ye.segment_num=K.readBits(8),ye.segments_expected=K.readBits(8),ye.segmentation_type_id!==52&&ye.segmentation_type_id!==54&&ye.segmentation_type_id!==56&&ye.segmentation_type_id!==58||(ye.sub_segment_num=K.readBits(8),ye.sub_segments_expected=K.readBits(8)),ye},me=function(H,fe,J,K){return{descriptor_tag:H,descriptor_length:fe,identifier:J,TAI_seconds:K.readBits(48),TAI_ns:K.readBits(32),UTC_offset:K.readBits(16)}},ge=function(H){return{component_tag:H.readBits(8),ISO_code:String.fromCharCode(H.readBits(8),H.readBits(8),H.readBits(8)),Bit_Stream_Mode:H.readBits(3),Num_Channels:H.readBits(4),Full_Srvc_Audio:H.readBool()}},Re=function(H,fe,J,K){for(var ue=K.readBits(4),Ce=[],ye=0;ye<ue;ye++)Ce.push(ge(K));return{descriptor_tag:H,descriptor_length:fe,identifier:J,audio_count:ue,components:Ce}},Ge=function(H){var fe=new W.a(H),J=fe.readBits(8),K=fe.readBool(),ue=fe.readBool();fe.readBits(2);var Ce=fe.readBits(12),ye=fe.readBits(8),Oe=fe.readBool(),Ye=fe.readBits(6),Be=4*fe.readBits(31)+fe.readBits(2),et=fe.readBits(8),Ze=fe.readBits(12),nt=fe.readBits(12),at=fe.readBits(8),kt=null;at===U.kSpliceNull?kt={}:at===U.kSpliceSchedule?kt=function(Ci){for(var Zi=Ci.readBits(8),gn=[],E=0;E<Zi;E++)gn.push(w(Ci));return{splice_count:Zi,events:gn}}(fe):at===U.kSpliceInsert?kt=function(Ci){var Zi=Ci.readBits(32),gn=Ci.readBool();Ci.readBits(7);var E={splice_event_id:Zi,splice_event_cancel_indicator:gn};if(gn)return E;if(E.out_of_network_indicator=Ci.readBool(),E.program_splice_flag=Ci.readBool(),E.duration_flag=Ci.readBool(),E.splice_immediate_flag=Ci.readBool(),Ci.readBits(4),E.program_splice_flag&&!E.splice_immediate_flag&&(E.splice_time=b(Ci)),!E.program_splice_flag){E.component_count=Ci.readBits(8),E.components=[];for(var F=0;F<E.component_count;F++)E.components.push(k(E.splice_immediate_flag,Ci))}return E.duration_flag&&(E.break_duration=S(Ci)),E.unique_program_id=Ci.readBits(16),E.avail_num=Ci.readBits(8),E.avails_expected=Ci.readBits(8),E}(fe):at===U.kTimeSignal?kt=function(Ci){return{splice_time:b(Ci)}}(fe):at===U.kBandwidthReservation?kt={}:at===U.kPrivateCommand?kt=function(Ci,Zi){for(var gn=String.fromCharCode(Zi.readBits(8),Zi.readBits(8),Zi.readBits(8),Zi.readBits(8)),E=new Uint8Array(Ci-4),F=0;F<Ci-4;F++)E[F]=Zi.readBits(8);return{identifier:gn,private_data:E.buffer}}(nt,fe):fe.readBits(8*nt);for(var qt=[],gi=fe.readBits(16),xi=0;xi<gi;){var Ai=fe.readBits(8),ui=fe.readBits(8),Oi=String.fromCharCode(fe.readBits(8),fe.readBits(8),fe.readBits(8),fe.readBits(8));Ai===0?qt.push($(Ai,ui,Oi,fe)):Ai===1?qt.push(X(Ai,ui,Oi,fe)):Ai===2?qt.push(se(Ai,ui,Oi,fe)):Ai===3?qt.push(me(Ai,ui,Oi,fe)):Ai===4?qt.push(Re(Ai,ui,Oi,fe)):fe.readBits(8*(ui-4)),xi+=2+ui}var qi={table_id:J,section_syntax_indicator:K,private_indicator:ue,section_length:Ce,protocol_version:ye,encrypted_packet:Oe,encryption_algorithm:Ye,pts_adjustment:Be,cw_index:et,tier:Ze,splice_command_length:nt,splice_command_type:at,splice_command:kt,descriptor_loop_length:gi,splice_descriptors:qt,E_CRC32:Oe?fe.readBits(32):void 0,CRC32:fe.readBits(32)};if(at===U.kSpliceInsert){var Li=kt;if(Li.splice_event_cancel_indicator)return{splice_command_type:at,detail:qi,data:H};if(Li.program_splice_flag&&!Li.splice_immediate_flag){var Vi=Li.duration_flag?Li.break_duration.auto_return:void 0,Di=Li.duration_flag?Li.break_duration.duration/90:void 0;return Li.splice_time.time_specified_flag?{splice_command_type:at,pts:(Be+Li.splice_time.pts_time)%Math.pow(2,33),auto_return:Vi,duraiton:Di,detail:qi,data:H}:{splice_command_type:at,auto_return:Vi,duraiton:Di,detail:qi,data:H}}return{splice_command_type:at,auto_return:Vi=Li.duration_flag?Li.break_duration.auto_return:void 0,duraiton:Di=Li.duration_flag?Li.break_duration.duration/90:void 0,detail:qi,data:H}}if(at===U.kTimeSignal){var Un=kt;return Un.splice_time.time_specified_flag?{splice_command_type:at,pts:(Be+Un.splice_time.pts_time)%Math.pow(2,33),detail:qi,data:H}:{splice_command_type:at,detail:qi,data:H}}return{splice_command_type:at,detail:qi,data:H}};(function(H){H[H.kSliceIDR_W_RADL=19]="kSliceIDR_W_RADL",H[H.kSliceIDR_N_LP=20]="kSliceIDR_N_LP",H[H.kSliceCRA_NUT=21]="kSliceCRA_NUT",H[H.kSliceVPS=32]="kSliceVPS",H[H.kSliceSPS=33]="kSliceSPS",H[H.kSlicePPS=34]="kSlicePPS",H[H.kSliceAUD=35]="kSliceAUD"})(Y||(Y={}));var Je=function(){},st=function(H){var fe=H.data.byteLength;this.type=H.type,this.data=new Uint8Array(4+fe),new DataView(this.data.buffer).setUint32(0,fe),this.data.set(H.data,4)},xt=function(){function H(fe){this.TAG="H265AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=fe,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&r.a.e(this.TAG,"Could not find H265 startcode until payload end!")}return H.prototype.findNextStartCodeOffset=function(fe){for(var J=fe,K=this.data_;;){if(J+3>=K.byteLength)return this.eof_flag_=!0,K.byteLength;var ue=K[J+0]<<24|K[J+1]<<16|K[J+2]<<8|K[J+3],Ce=K[J+0]<<16|K[J+1]<<8|K[J+2];if(ue===1||Ce===1)return J;J++}},H.prototype.readNextNaluPayload=function(){for(var fe=this.data_,J=null;J==null&&!this.eof_flag_;){var K=this.current_startcode_offset_,ue=fe[K+=(fe[K]<<24|fe[K+1]<<16|fe[K+2]<<8|fe[K+3])===1?4:3]>>1&63,Ce=(128&fe[K])>>>7,ye=this.findNextStartCodeOffset(K);if(this.current_startcode_offset_=ye,Ce===0){var Oe=fe.subarray(K,ye);(J=new Je).type=ue,J.data=Oe}}return J},H}(),qe=function(){function H(fe,J,K,ue){var Ce=23+(5+fe.byteLength)+(5+J.byteLength)+(5+K.byteLength),ye=this.data=new Uint8Array(Ce);ye[0]=1,ye[1]=(3&ue.general_profile_space)<<6|(ue.general_tier_flag?1:0)<<5|31&ue.general_profile_idc,ye[2]=ue.general_profile_compatibility_flags_1,ye[3]=ue.general_profile_compatibility_flags_2,ye[4]=ue.general_profile_compatibility_flags_3,ye[5]=ue.general_profile_compatibility_flags_4,ye[6]=ue.general_constraint_indicator_flags_1,ye[7]=ue.general_constraint_indicator_flags_2,ye[8]=ue.general_constraint_indicator_flags_3,ye[9]=ue.general_constraint_indicator_flags_4,ye[10]=ue.general_constraint_indicator_flags_5,ye[11]=ue.general_constraint_indicator_flags_6,ye[12]=ue.general_level_idc,ye[13]=240|(3840&ue.min_spatial_segmentation_idc)>>8,ye[14]=255&ue.min_spatial_segmentation_idc,ye[15]=252|3&ue.parallelismType,ye[16]=252|3&ue.chroma_format_idc,ye[17]=248|7&ue.bit_depth_luma_minus8,ye[18]=248|7&ue.bit_depth_chroma_minus8,ye[19]=0,ye[20]=0,ye[21]=(3&ue.constant_frame_rate)<<6|(7&ue.num_temporal_layers)<<3|(ue.temporal_id_nested?1:0)<<2|3,ye[22]=3,ye[23]=128|Y.kSliceVPS,ye[24]=0,ye[25]=1,ye[26]=(65280&fe.byteLength)>>8,ye[27]=(255&fe.byteLength)>>0,ye.set(fe,28),ye[23+(5+fe.byteLength)+0]=128|Y.kSliceSPS,ye[23+(5+fe.byteLength)+1]=0,ye[23+(5+fe.byteLength)+2]=1,ye[23+(5+fe.byteLength)+3]=(65280&J.byteLength)>>8,ye[23+(5+fe.byteLength)+4]=(255&J.byteLength)>>0,ye.set(J,23+(5+fe.byteLength)+5),ye[23+(5+fe.byteLength+5+J.byteLength)+0]=128|Y.kSlicePPS,ye[23+(5+fe.byteLength+5+J.byteLength)+1]=0,ye[23+(5+fe.byteLength+5+J.byteLength)+2]=1,ye[23+(5+fe.byteLength+5+J.byteLength)+3]=(65280&K.byteLength)>>8,ye[23+(5+fe.byteLength+5+J.byteLength)+4]=(255&K.byteLength)>>0,ye.set(K,23+(5+fe.byteLength+5+J.byteLength)+5)}return H.prototype.getData=function(){return this.data},H}(),bt=n(15),St=function(){},Ue=function(){},Vt=function(){},Kt=[[64,64,80,80,96,96,112,112,128,128,160,160,192,192,224,224,256,256,320,320,384,384,448,448,512,512,640,640,768,768,896,896,1024,1024,1152,1152,1280,1280],[69,70,87,88,104,105,121,122,139,140,174,175,208,209,243,244,278,279,348,349,417,418,487,488,557,558,696,697,835,836,975,976,1114,1115,1253,1254,1393,1394],[96,96,120,120,144,144,168,168,192,192,240,240,288,288,336,336,384,384,480,480,576,576,672,672,768,768,960,960,1152,1152,1344,1344,1536,1536,1728,1728,1920,1920]],It=function(){function H(fe){this.TAG="AC3Parser",this.data_=fe,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&r.a.e(this.TAG,"Could not found AC3 syncword until payload end")}return H.prototype.findNextSyncwordOffset=function(fe){for(var J=fe,K=this.data_;;){if(J+7>=K.byteLength)return this.eof_flag_=!0,K.byteLength;if((K[J+0]<<8|K[J+1]<<0)===2935)return J;J++}},H.prototype.readNextAC3Frame=function(){for(var fe=this.data_,J=null;J==null&&!this.eof_flag_;){var K=this.current_syncword_offset_,ue=fe[K+4]>>6,Ce=[48e3,44200,33e3][ue],ye=63&fe[K+4],Oe=2*Kt[ue][ye];if(isNaN(Oe)||K+Oe>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var Ye=this.findNextSyncwordOffset(K+Oe);this.current_syncword_offset_=Ye;var Be=fe[K+5]>>3,et=7&fe[K+5],Ze=fe[K+6]>>5,nt=0;1&Ze&&Ze!==1&&(nt+=2),4&Ze&&(nt+=2),Ze===2&&(nt+=2);var at=(fe[K+6]<<8|fe[K+7]<<0)>>12-nt&1,kt=[2,1,2,3,3,4,4,5][Ze]+at;(J=new Vt).sampling_frequency=Ce,J.channel_count=kt,J.channel_mode=Ze,J.bit_stream_identification=Be,J.low_frequency_effects_channel_on=at,J.bit_stream_mode=et,J.frame_size_code=ye,J.data=fe.subarray(K,K+Oe)}return J},H.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},H.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},H}(),Yt=function(H){var fe;fe=[H.sampling_rate_code<<6|H.bit_stream_identification<<1|H.bit_stream_mode>>2,(3&H.bit_stream_mode)<<6|H.channel_mode<<3|H.low_frequency_effects_channel_on<<2|H.frame_size_code>>4,H.frame_size_code<<4&224],this.config=fe,this.sampling_rate=H.sampling_frequency,this.bit_stream_identification=H.bit_stream_identification,this.bit_stream_mode=H.bit_stream_mode,this.low_frequency_effects_channel_on=H.low_frequency_effects_channel_on,this.channel_count=H.channel_count,this.channel_mode=H.channel_mode,this.codec_mimetype="ac-3",this.original_codec_mimetype="ac-3"},Te=function(){},$e=function(){function H(fe){this.TAG="EAC3Parser",this.data_=fe,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&r.a.e(this.TAG,"Could not found AC3 syncword until payload end")}return H.prototype.findNextSyncwordOffset=function(fe){for(var J=fe,K=this.data_;;){if(J+7>=K.byteLength)return this.eof_flag_=!0,K.byteLength;if((K[J+0]<<8|K[J+1]<<0)===2935)return J;J++}},H.prototype.readNextEAC3Frame=function(){for(var fe=this.data_,J=null;J==null&&!this.eof_flag_;){var K=this.current_syncword_offset_,ue=new W.a(fe.subarray(K+2)),Ce=(ue.readBits(2),ue.readBits(3),ue.readBits(11)+1<<1),ye=ue.readBits(2),Oe=null,Ye=null;ye===3?(Oe=[24e3,22060,16e3][ye=ue.readBits(2)],Ye=3):(Oe=[48e3,44100,32e3][ye],Ye=ue.readBits(2));var Be=ue.readBits(3),et=ue.readBits(1),Ze=ue.readBits(5);if(K+Ce>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var nt=this.findNextSyncwordOffset(K+Ce);this.current_syncword_offset_=nt;var at=[2,1,2,3,3,4,4,5][Be]+et;ue.destroy(),(J=new Te).sampling_frequency=Oe,J.channel_count=at,J.channel_mode=Be,J.bit_stream_identification=Ze,J.low_frequency_effects_channel_on=et,J.frame_size=Ce,J.num_blks=[1,2,3,6][Ye],J.data=fe.subarray(K,K+Ce)}return J},H.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},H.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},H}(),lt=function(H){var fe,J=Math.floor(H.frame_size*H.sampling_frequency/(16*H.num_blks));fe=[255&J,248&J,H.sampling_rate_code<<6|H.bit_stream_identification<<1|0,0|H.channel_mode<<1|H.low_frequency_effects_channel_on<<0,0],this.config=fe,this.sampling_rate=H.sampling_frequency,this.bit_stream_identification=H.bit_stream_identification,this.num_blks=H.num_blks,this.low_frequency_effects_channel_on=H.low_frequency_effects_channel_on,this.channel_count=H.channel_count,this.channel_mode=H.channel_mode,this.codec_mimetype="ec-3",this.original_codec_mimetype="ec-3"},vt=function(){},_t=function(){function H(fe){this.TAG="AV1OBUInMpegTsParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=fe,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&r.a.e(this.TAG,"Could not find AV1 startcode until payload end!")}return H._ebsp2rbsp=function(fe){for(var J=fe,K=J.byteLength,ue=new Uint8Array(K),Ce=0,ye=0;ye<K;ye++)ye>=2&&J[ye]===3&&J[ye-1]===0&&J[ye-2]===0||(ue[Ce]=J[ye],Ce++);return new Uint8Array(ue.buffer,0,Ce)},H.prototype.findNextStartCodeOffset=function(fe){for(var J=fe,K=this.data_;;){if(J+2>=K.byteLength)return this.eof_flag_=!0,K.byteLength;if((K[J+0]<<16|K[J+1]<<8|K[J+2])===1)return J;J++}},H.prototype.readNextOBUPayload=function(){for(var fe=this.data_,J=null;J==null&&!this.eof_flag_;){var K=this.current_startcode_offset_+3,ue=this.findNextStartCodeOffset(K);this.current_startcode_offset_=ue,J=H._ebsp2rbsp(fe.subarray(K,ue))}return J},H}(),Wt=n(16),Tt=function(){var H=function(fe,J){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,ue){K.__proto__=ue}||function(K,ue){for(var Ce in ue)Object.prototype.hasOwnProperty.call(ue,Ce)&&(K[Ce]=ue[Ce])})(fe,J)};return function(fe,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function K(){this.constructor=fe}H(fe,J),fe.prototype=J===null?Object.create(J):(K.prototype=J.prototype,new K)}}(),Ct=function(){return(Ct=Object.assign||function(H){for(var fe,J=1,K=arguments.length;J<K;J++)for(var ue in fe=arguments[J])Object.prototype.hasOwnProperty.call(fe,ue)&&(H[ue]=fe[ue]);return H}).apply(this,arguments)},ri=function(H){function fe(J,K){var ue=H.call(this)||this;return ue.TAG="TSDemuxer",ue.first_parse_=!0,ue.media_info_=new o.a,ue.timescale_=90,ue.duration_=0,ue.current_pmt_pid_=-1,ue.program_pmt_map_={},ue.pes_slice_queues_={},ue.section_slice_queues_={},ue.video_metadata_={vps:void 0,sps:void 0,pps:void 0,av1c:void 0,details:void 0},ue.audio_metadata_={codec:void 0,audio_object_type:void 0,sampling_freq_index:void 0,sampling_frequency:void 0,channel_config:void 0},ue.last_pcr_base_=NaN,ue.timestamp_offset_=0,ue.audio_last_sample_pts_=void 0,ue.aac_last_incomplete_data_=null,ue.has_video_=!1,ue.has_audio_=!1,ue.video_init_segment_dispatched_=!1,ue.audio_init_segment_dispatched_=!1,ue.video_metadata_changed_=!1,ue.loas_previous_frame=null,ue.video_track_={type:"video",id:1,sequenceNumber:0,samples:[],length:0},ue.audio_track_={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},ue.preferred_secondary_audio=!1,ue.ts_packet_size_=J.ts_packet_size,ue.sync_offset_=J.sync_offset,ue.config_=K,ue}return Tt(fe,H),fe.prototype.destroy=function(){this.media_info_=null,this.pes_slice_queues_=null,this.section_slice_queues_=null,this.video_metadata_=null,this.audio_metadata_=null,this.aac_last_incomplete_data_=null,this.video_track_=null,this.audio_track_=null,H.prototype.destroy.call(this)},fe.probe=function(J){var K=new Uint8Array(J),ue=-1,Ce=188;if(K.byteLength<=3*Ce)return{needMoreData:!0};for(;ue===-1;){for(var ye=Math.min(1e3,K.byteLength-3*Ce),Oe=0;Oe<ye;){if(K[Oe]===71&&K[Oe+Ce]===71&&K[Oe+2*Ce]===71){ue=Oe;break}Oe++}if(ue===-1)if(Ce===188)Ce=192;else{if(Ce!==192)break;Ce=204}}return ue===-1?{match:!1}:(Ce===192&&ue>=4?(r.a.v("TSDemuxer","ts_packet_size = 192, m2ts mode"),ue-=4):Ce===204&&r.a.v("TSDemuxer","ts_packet_size = 204, RS encoded MPEG2-TS stream"),{match:!0,consumed:0,ts_packet_size:Ce,sync_offset:ue})},fe.prototype.bindDataSource=function(J){return J.onDataArrival=this.parseChunks.bind(this),this},fe.prototype.resetMediaInfo=function(){this.media_info_=new o.a},fe.prototype.parseChunks=function(J,K){if(!(this.onError&&this.onMediaInfo&&this.onTrackMetadata&&this.onDataAvailable))throw new d.a("onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var ue=0;for(this.first_parse_&&(this.first_parse_=!1,ue=this.sync_offset_);ue+this.ts_packet_size_<=J.byteLength;){var Ce=K+ue;this.ts_packet_size_===192&&(ue+=4);var ye=new Uint8Array(J,ue,188),Oe=ye[0];if(Oe!==71){r.a.e(this.TAG,"sync_byte = ".concat(Oe,", not 0x47"));break}var Ye=(64&ye[1])>>>6,Be=(ye[1],(31&ye[1])<<8|ye[2]),et=(48&ye[3])>>>4,Ze=15&ye[3],nt=!(!this.pmt_||this.pmt_.pcr_pid!==Be),at={},kt=4;if(et==2||et==3){var qt=ye[4];if(qt>0&&(nt||et==3)&&(at.discontinuity_indicator=(128&ye[5])>>>7,at.random_access_indicator=(64&ye[5])>>>6,at.elementary_stream_priority_indicator=(32&ye[5])>>>5,(16&ye[5])>>>4)){var gi=300*this.getPcrBase(ye)+((1&ye[10])<<8|ye[11]);this.last_pcr_=gi}if(et==2||5+qt===188){ue+=188,this.ts_packet_size_===204&&(ue+=16);continue}kt=5+qt}if(et==1||et==3){if(Be===0||Be===this.current_pmt_pid_||this.pmt_!=null&&this.pmt_.pid_stream_type[Be]===a.kSCTE35){var xi=188-kt;this.handleSectionSlice(J,ue+kt,xi,{pid:Be,file_position:Ce,payload_unit_start_indicator:Ye,continuity_conunter:Ze,random_access_indicator:at.random_access_indicator})}else if(this.pmt_!=null&&this.pmt_.pid_stream_type[Be]!=null){xi=188-kt;var Ai=this.pmt_.pid_stream_type[Be];Be!==this.pmt_.common_pids.h264&&Be!==this.pmt_.common_pids.h265&&Be!==this.pmt_.common_pids.av1&&Be!==this.pmt_.common_pids.adts_aac&&Be!==this.pmt_.common_pids.loas_aac&&Be!==this.pmt_.common_pids.ac3&&Be!==this.pmt_.common_pids.eac3&&Be!==this.pmt_.common_pids.opus&&Be!==this.pmt_.common_pids.mp3&&this.pmt_.pes_private_data_pids[Be]!==!0&&this.pmt_.timed_id3_pids[Be]!==!0&&this.pmt_.synchronous_klv_pids[Be]!==!0&&this.pmt_.asynchronous_klv_pids[Be]!==!0||this.handlePESSlice(J,ue+kt,xi,{pid:Be,stream_type:Ai,file_position:Ce,payload_unit_start_indicator:Ye,continuity_conunter:Ze,random_access_indicator:at.random_access_indicator})}}ue+=188,this.ts_packet_size_===204&&(ue+=16)}return this.dispatchAudioVideoMediaSegment(),ue},fe.prototype.handleSectionSlice=function(J,K,ue,Ce){var ye=new Uint8Array(J,K,ue),Oe=this.section_slice_queues_[Ce.pid];if(Ce.payload_unit_start_indicator){var Ye=ye[0];if(Oe!=null&&Oe.total_length!==0){var Be=new Uint8Array(J,K+1,Math.min(ue,Ye));Oe.slices.push(Be),Oe.total_length+=Be.byteLength,Oe.total_length===Oe.expected_length?this.emitSectionSlices(Oe,Ce):this.clearSlices(Oe,Ce)}for(var et=1+Ye;et<ye.byteLength&&ye[et+0]!==255;){var Ze=(15&ye[et+1])<<8|ye[et+2];this.section_slice_queues_[Ce.pid]=new A,(Oe=this.section_slice_queues_[Ce.pid]).expected_length=Ze+3,Oe.file_position=Ce.file_position,Oe.random_access_indicator=Ce.random_access_indicator,Be=new Uint8Array(J,K+et,Math.min(ue-et,Oe.expected_length-Oe.total_length)),Oe.slices.push(Be),Oe.total_length+=Be.byteLength,Oe.total_length===Oe.expected_length?this.emitSectionSlices(Oe,Ce):Oe.total_length>=Oe.expected_length&&this.clearSlices(Oe,Ce),et+=Be.byteLength}}else Oe!=null&&Oe.total_length!==0&&(Be=new Uint8Array(J,K,Math.min(ue,Oe.expected_length-Oe.total_length)),Oe.slices.push(Be),Oe.total_length+=Be.byteLength,Oe.total_length===Oe.expected_length?this.emitSectionSlices(Oe,Ce):Oe.total_length>=Oe.expected_length&&this.clearSlices(Oe,Ce))},fe.prototype.handlePESSlice=function(J,K,ue,Ce){var ye=new Uint8Array(J,K,ue),Oe=ye[0]<<16|ye[1]<<8|ye[2],Ye=(ye[3],ye[4]<<8|ye[5]);if(Ce.payload_unit_start_indicator){if(Oe!==1)return void r.a.e(this.TAG,"handlePESSlice: packet_start_code_prefix should be 1 but with value ".concat(Oe));var Be=this.pes_slice_queues_[Ce.pid];Be&&(Be.expected_length===0||Be.expected_length===Be.total_length?this.emitPESSlices(Be,Ce):this.clearSlices(Be,Ce)),this.pes_slice_queues_[Ce.pid]=new A,this.pes_slice_queues_[Ce.pid].file_position=Ce.file_position,this.pes_slice_queues_[Ce.pid].random_access_indicator=Ce.random_access_indicator}if(this.pes_slice_queues_[Ce.pid]!=null){var et=this.pes_slice_queues_[Ce.pid];et.slices.push(ye),Ce.payload_unit_start_indicator&&(et.expected_length=Ye===0?0:Ye+6),et.total_length+=ye.byteLength,et.expected_length>0&&et.expected_length===et.total_length?this.emitPESSlices(et,Ce):et.expected_length>0&&et.expected_length<et.total_length&&this.clearSlices(et,Ce)}},fe.prototype.emitSectionSlices=function(J,K){for(var ue=new Uint8Array(J.total_length),Ce=0,ye=0;Ce<J.slices.length;Ce++){var Oe=J.slices[Ce];ue.set(Oe,ye),ye+=Oe.byteLength}J.slices=[],J.expected_length=-1,J.total_length=0;var Ye=new y;Ye.pid=K.pid,Ye.data=ue,Ye.file_position=J.file_position,Ye.random_access_indicator=J.random_access_indicator,this.parseSection(Ye)},fe.prototype.emitPESSlices=function(J,K){for(var ue=new Uint8Array(J.total_length),Ce=0,ye=0;Ce<J.slices.length;Ce++){var Oe=J.slices[Ce];ue.set(Oe,ye),ye+=Oe.byteLength}J.slices=[],J.expected_length=-1,J.total_length=0;var Ye=new g;Ye.pid=K.pid,Ye.data=ue,Ye.stream_type=K.stream_type,Ye.file_position=J.file_position,Ye.random_access_indicator=J.random_access_indicator,this.parsePES(Ye)},fe.prototype.clearSlices=function(J,K){J.slices=[],J.expected_length=-1,J.total_length=0},fe.prototype.parseSection=function(J){var K=J.data,ue=J.pid;ue===0?this.parsePAT(K):ue===this.current_pmt_pid_?this.parsePMT(K):this.pmt_!=null&&this.pmt_.scte_35_pids[ue]&&this.parseSCTE35(K)},fe.prototype.parsePES=function(J){var K=J.data,ue=K[0]<<16|K[1]<<8|K[2],Ce=K[3],ye=K[4]<<8|K[5];if(ue===1)if(Ce!==188&&Ce!==190&&Ce!==191&&Ce!==240&&Ce!==241&&Ce!==255&&Ce!==242&&Ce!==248){K[6];var Oe=(192&K[7])>>>6,Ye=K[8],Be=void 0,et=void 0;Oe!==2&&Oe!==3||(Be=this.getTimestamp(K,9),et=Oe===3?this.getTimestamp(K,14):Be);var Ze=9+Ye,nt=void 0;if(ye!==0){if(ye<3+Ye)return void r.a.v(this.TAG,"Malformed PES: PES_packet_length < 3 + PES_header_data_length");nt=ye-3-Ye}else nt=K.byteLength-Ze;var at=K.subarray(Ze,Ze+nt);switch(J.stream_type){case a.kMPEG1Audio:case a.kMPEG2Audio:this.parseMP3Payload(at,Be);break;case a.kPESPrivateData:this.pmt_.common_pids.av1===J.pid?this.parseAV1Payload(at,Be,et,J.file_position,J.random_access_indicator):this.pmt_.common_pids.opus===J.pid?this.parseOpusPayload(at,Be):this.pmt_.common_pids.ac3===J.pid?this.parseAC3Payload(at,Be):this.pmt_.common_pids.eac3===J.pid?this.parseEAC3Payload(at,Be):this.pmt_.asynchronous_klv_pids[J.pid]?this.parseAsynchronousKLVMetadataPayload(at,J.pid,Ce):this.pmt_.smpte2038_pids[J.pid]?this.parseSMPTE2038MetadataPayload(at,Be,et,J.pid,Ce):this.parsePESPrivateDataPayload(at,Be,et,J.pid,Ce);break;case a.kADTSAAC:this.parseADTSAACPayload(at,Be);break;case a.kLOASAAC:this.parseLOASAACPayload(at,Be);break;case a.kAC3:this.parseAC3Payload(at,Be);break;case a.kEAC3:this.parseEAC3Payload(at,Be);break;case a.kMetadata:this.pmt_.timed_id3_pids[J.pid]?this.parseTimedID3MetadataPayload(at,Be,et,J.pid,Ce):this.pmt_.synchronous_klv_pids[J.pid]&&this.parseSynchronousKLVMetadataPayload(at,Be,et,J.pid,Ce);break;case a.kH264:this.parseH264Payload(at,Be,et,J.file_position,J.random_access_indicator);break;case a.kH265:this.parseH265Payload(at,Be,et,J.file_position,J.random_access_indicator)}}else(Ce===188||Ce===191||Ce===240||Ce===241||Ce===255||Ce===242||Ce===248)&&J.stream_type===a.kPESPrivateData&&(Ze=6,nt=void 0,nt=ye!==0?ye:K.byteLength-Ze,at=K.subarray(Ze,Ze+nt),this.parsePESPrivateDataPayload(at,void 0,void 0,J.pid,Ce));else r.a.e(this.TAG,"parsePES: packet_start_code_prefix should be 1 but with value ".concat(ue))},fe.prototype.parsePAT=function(J){var K=J[0];if(K===0){var ue=(15&J[1])<<8|J[2],Ce=(J[3],J[4],(62&J[5])>>>1),ye=1&J[5],Oe=J[6],Ye=(J[7],null);if(ye===1&&Oe===0)(Ye=new l).version_number=Ce;else if((Ye=this.pat_)==null)return;for(var Be=ue-5-4,et=-1,Ze=-1,nt=8;nt<8+Be;nt+=4){var at=J[nt]<<8|J[nt+1],kt=(31&J[nt+2])<<8|J[nt+3];at===0?Ye.network_pid=kt:(Ye.program_pmt_pid[at]=kt,et===-1&&(et=at),Ze===-1&&(Ze=kt))}ye===1&&Oe===0&&(this.pat_==null&&r.a.v(this.TAG,"Parsed first PAT: ".concat(JSON.stringify(Ye))),this.pat_=Ye,this.current_program_=et,this.current_pmt_pid_=Ze)}else r.a.e(this.TAG,"parsePAT: table_id ".concat(K," is not corresponded to PAT!"))},fe.prototype.parsePMT=function(J){var K=J[0];if(K===2){var ue=(15&J[1])<<8|J[2],Ce=J[3]<<8|J[4],ye=(62&J[5])>>>1,Oe=1&J[5],Ye=J[6],Be=(J[7],null);if(Oe===1&&Ye===0)(Be=new p).program_number=Ce,Be.version_number=ye,this.program_pmt_map_[Ce]=Be;else if((Be=this.program_pmt_map_[Ce])==null)return;Be.pcr_pid=(31&J[8])<<8|J[9];for(var et=(15&J[10])<<8|J[11],Ze=12+et,nt=ue-9-et-4,at=Ze;at<Ze+nt;){var kt=J[at],qt=(31&J[at+1])<<8|J[at+2],gi=(15&J[at+3])<<8|J[at+4];Be.pid_stream_type[qt]=kt;var xi=Be.common_pids.h264||Be.common_pids.h265,Ai=Be.common_pids.adts_aac||Be.common_pids.loas_aac||Be.common_pids.ac3||Be.common_pids.eac3||Be.common_pids.opus||Be.common_pids.mp3;if(kt!==a.kH264||xi)if(kt!==a.kH265||xi)if(kt!==a.kADTSAAC||Ai&&!this.preferred_secondary_audio)if(kt!==a.kLOASAAC||Ai&&!this.preferred_secondary_audio)if(kt!==a.kAC3||Ai&&!this.preferred_secondary_audio)if(kt!==a.kEAC3||Ai&&!this.preferred_secondary_audio)if(kt!==a.kMPEG1Audio&&kt!==a.kMPEG2Audio||Ai&&!this.preferred_secondary_audio)if(kt===a.kPESPrivateData){if(Be.pes_private_data_pids[qt]=!0,gi>0){for(var ui=at+5;ui<at+5+gi;){var Oi=J[ui+0],qi=J[ui+1];if(Oi===5){var Li=String.fromCharCode.apply(String,Array.from(J.subarray(ui+2,ui+2+qi)));Li==="VANC"?Be.smpte2038_pids[qt]=!0:Li==="AV01"?Be.common_pids.av1=qt:Li==="Opus"?Be.common_pids.opus=qt:Li==="KLVA"&&(Be.asynchronous_klv_pids[qt]=!0)}else if(Oi===127){if(qt===Be.common_pids.opus){var Vi=null;if(J[ui+2]===128&&(Vi=J[ui+3]),Vi==null){r.a.e(this.TAG,"Not Supported Opus channel count.");continue}var Di={codec:"opus",channel_count:15&Vi?15&Vi:2,channel_config_code:Vi,sample_rate:48e3},Un={codec:"opus",meta:Di};(this.audio_init_segment_dispatched_==0||this.detectAudioMetadataChange(Un))&&(this.audio_metadata_=Di,this.dispatchAudioMediaSegment(!0),this.dispatchAudioInitSegment(Un))}}else Oi===128&&qt===Be.common_pids.av1&&(this.video_metadata_.av1c=J.subarray(ui+2,ui+2+qi));ui+=2+qi}var Ci=J.subarray(at+5,at+5+gi);this.dispatchPESPrivateDataDescriptor(qt,kt,Ci)}}else if(kt===a.kMetadata){if(gi>0)for(ui=at+5;ui<at+5+gi;){Oi=J[ui+0];var Zi=J[ui+1];if(Oi===38){var gn=J[ui+2]<<8|J[ui+3]<<0,E=null;gn===65535&&(E=String.fromCharCode.apply(String,Array.from(J.subarray(ui+4,ui+4+4))));var F=null;if(J[ui+4+(gn===65535?4:0)]===255){var h=4+(gn===65535?4:0)+1;F=String.fromCharCode.apply(String,Array.from(J.subarray(ui+h,ui+h+4)))}E==="ID3 "&&F==="ID3 "?Be.timed_id3_pids[qt]=!0:F==="KLVA"&&(Be.synchronous_klv_pids[qt]=!0)}ui+=2+Zi}}else kt===a.kSCTE35&&(Be.scte_35_pids[qt]=!0);else Be.common_pids.mp3=qt;else Be.common_pids.eac3=qt;else Be.common_pids.ac3=qt;else Be.common_pids.loas_aac=qt;else Be.common_pids.adts_aac=qt;else Be.common_pids.h265=qt;else Be.common_pids.h264=qt;at+=5+gi}Ce===this.current_program_&&(this.pmt_==null&&r.a.v(this.TAG,"Parsed first PMT: ".concat(JSON.stringify(Be))),this.pmt_=Be,(Be.common_pids.h264||Be.common_pids.h265||Be.common_pids.av1)&&(this.has_video_=!0),(Be.common_pids.adts_aac||Be.common_pids.loas_aac||Be.common_pids.ac3||Be.common_pids.opus||Be.common_pids.mp3)&&(this.has_audio_=!0))}else r.a.e(this.TAG,"parsePMT: table_id ".concat(K," is not corresponded to PMT!"))},fe.prototype.parseSCTE35=function(J){var K=Ge(J);if(K.pts!=null){var ue=Math.floor(K.pts/this.timescale_);K.pts=ue}else K.nearest_pts=this.getNearestTimestampMilliseconds();this.onSCTE35Metadata&&this.onSCTE35Metadata(K)},fe.prototype.parseAV1Payload=function(J,K,ue,Ce,ye){for(var Oe=new _t(J),Ye=null,Be=[],et=0,Ze=!1,nt=null;(Ye=Oe.readNextOBUPayload())!=null;){if((nt=Wt.a.parseOBUs(Ye,this.video_metadata_.details))&&nt.keyframe===!0)if(this.video_init_segment_dispatched_){if(this.detectVideoMetadataChange(null,nt)===!0){var at;this.video_metadata_changed_=!0,this.dispatchVideoMediaSegment(!0),(at=new Uint8Array(new ArrayBuffer(this.video_metadata_.av1c.byteLength+nt.sequence_header_data.byteLength))).set(this.video_metadata_.av1c,0),at.set(nt.sequence_header_data,this.video_metadata_.av1c.byteLength),nt.av1c=at,this.dispatchVideoInitSegment()}}else(at=new Uint8Array(new ArrayBuffer(this.video_metadata_.av1c.byteLength+nt.sequence_header_data.byteLength))).set(this.video_metadata_.av1c,0),at.set(nt.sequence_header_data,this.video_metadata_.av1c.byteLength),nt.av1c=at,this.video_metadata_.details=nt,this.dispatchVideoInitSegment();this.video_metadata_.details=nt,Ze||(Ze=nt.keyframe),Be.push({data:Ye}),et+=Ye.byteLength}var kt=Math.floor(K/this.timescale_),qt=Math.floor(ue/this.timescale_);if(Be.length){var gi=this.video_track_,xi={units:Be,length:et,isKeyframe:Ze,dts:qt,pts:kt,cts:kt-qt,file_position:Ce};gi.samples.push(xi),gi.length+=et}},fe.prototype.parseH264Payload=function(J,K,ue,Ce,ye){for(var Oe=new G(J),Ye=null,Be=[],et=0,Ze=!1;(Ye=Oe.readNextNaluPayload())!=null;){var nt=new M(Ye);if(nt.type===f.kSliceSPS){var at=le.a.parseSPS(Ye.data);this.video_init_segment_dispatched_?this.detectVideoMetadataChange(nt,at)===!0&&(r.a.v(this.TAG,"H264: Critical h264 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:nt,pps:void 0,av1c:void 0,details:at}):(this.video_metadata_.sps=nt,this.video_metadata_.details=at)}else nt.type===f.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(this.video_metadata_.pps=nt,this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(!0),this.dispatchVideoInitSegment())):(nt.type===f.kSliceIDR||nt.type===f.kSliceNonIDR&&ye===1)&&(Ze=!0);this.video_init_segment_dispatched_&&(Be.push(nt),et+=nt.data.byteLength)}var kt=Math.floor(K/this.timescale_),qt=Math.floor(ue/this.timescale_);if(Be.length){var gi=this.video_track_,xi={units:Be,length:et,isKeyframe:Ze,dts:qt,pts:kt,cts:kt-qt,file_position:Ce};gi.samples.push(xi),gi.length+=et}},fe.prototype.parseH265Payload=function(J,K,ue,Ce,ye){for(var Oe=new xt(J),Ye=null,Be=[],et=0,Ze=!1;(Ye=Oe.readNextNaluPayload())!=null;){var nt=new st(Ye);if(nt.type===Y.kSliceVPS){if(!this.video_init_segment_dispatched_){var at=bt.a.parseVPS(Ye.data);this.video_metadata_.vps=nt,this.video_metadata_.details=Ct(Ct({},this.video_metadata_.details),at)}}else nt.type===Y.kSliceSPS?(at=bt.a.parseSPS(Ye.data),this.video_init_segment_dispatched_?this.detectVideoMetadataChange(nt,at)===!0&&(r.a.v(this.TAG,"H265: Critical h265 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:nt,pps:void 0,av1c:void 0,details:at}):(this.video_metadata_.sps=nt,this.video_metadata_.details=Ct(Ct({},this.video_metadata_.details),at))):nt.type===Y.kSlicePPS?(!this.video_init_segment_dispatched_||this.video_metadata_changed_)&&(at=bt.a.parsePPS(Ye.data),this.video_metadata_.pps=nt,this.video_metadata_.details=Ct(Ct({},this.video_metadata_.details),at),this.video_metadata_.vps&&this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(!0),this.dispatchVideoInitSegment())):nt.type!==Y.kSliceIDR_W_RADL&&nt.type!==Y.kSliceIDR_N_LP&&nt.type!==Y.kSliceCRA_NUT||(Ze=!0);this.video_init_segment_dispatched_&&(Be.push(nt),et+=nt.data.byteLength)}var kt=Math.floor(K/this.timescale_),qt=Math.floor(ue/this.timescale_);if(Be.length){var gi=this.video_track_,xi={units:Be,length:et,isKeyframe:Ze,dts:qt,pts:kt,cts:kt-qt,file_position:Ce};gi.samples.push(xi),gi.length+=et}},fe.prototype.detectVideoMetadataChange=function(J,K){if(K.codec_mimetype!==this.video_metadata_.details.codec_mimetype)return r.a.v(this.TAG,"Video: Codec mimeType changed from "+"".concat(this.video_metadata_.details.codec_mimetype," to ").concat(K.codec_mimetype)),!0;if(K.codec_size.width!==this.video_metadata_.details.codec_size.width||K.codec_size.height!==this.video_metadata_.details.codec_size.height){var ue=this.video_metadata_.details.codec_size,Ce=K.codec_size;return r.a.v(this.TAG,"Video: Coded Resolution changed from "+"".concat(ue.width,"x").concat(ue.height," to ").concat(Ce.width,"x").concat(Ce.height)),!0}return K.present_size.width!==this.video_metadata_.details.present_size.width&&(r.a.v(this.TAG,"Video: Present resolution width changed from "+"".concat(this.video_metadata_.details.present_size.width," to ").concat(K.present_size.width)),!0)},fe.prototype.isInitSegmentDispatched=function(){return this.has_video_&&this.has_audio_?this.video_init_segment_dispatched_&&this.audio_init_segment_dispatched_:this.has_video_&&!this.has_audio_?this.video_init_segment_dispatched_:!(this.has_video_||!this.has_audio_)&&this.audio_init_segment_dispatched_},fe.prototype.dispatchVideoInitSegment=function(){var J=this.video_metadata_.details,K={type:"video"};K.id=this.video_track_.id,K.timescale=1e3,K.duration=this.duration_,K.codecWidth=J.codec_size.width,K.codecHeight=J.codec_size.height,K.presentWidth=J.present_size.width,K.presentHeight=J.present_size.height,K.profile=J.profile_string,K.level=J.level_string,K.bitDepth=J.bit_depth,K.chromaFormat=J.chroma_format,K.sarRatio=J.sar_ratio,K.frameRate=J.frame_rate;var ue=K.frameRate.fps_den,Ce=K.frameRate.fps_num;if(K.refSampleDuration=ue/Ce*1e3,K.codec=J.codec_mimetype,this.video_metadata_.av1c)K.av1c=this.video_metadata_.av1c,this.video_init_segment_dispatched_==0&&r.a.v(this.TAG,"Generated first AV1 for mimeType: ".concat(K.codec));else if(this.video_metadata_.vps){var ye=this.video_metadata_.vps.data.subarray(4),Oe=this.video_metadata_.sps.data.subarray(4),Ye=this.video_metadata_.pps.data.subarray(4),Be=new qe(ye,Oe,Ye,J);K.hvcc=Be.getData(),this.video_init_segment_dispatched_==0&&r.a.v(this.TAG,"Generated first HEVCDecoderConfigurationRecord for mimeType: ".concat(K.codec))}else{Oe=this.video_metadata_.sps.data.subarray(4),Ye=this.video_metadata_.pps.data.subarray(4);var et=new Z(Oe,Ye,J);K.avcc=et.getData(),this.video_init_segment_dispatched_==0&&r.a.v(this.TAG,"Generated first AVCDecoderConfigurationRecord for mimeType: ".concat(K.codec))}this.onTrackMetadata("video",K),this.video_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;var Ze=this.media_info_;Ze.hasVideo=!0,Ze.width=K.codecWidth,Ze.height=K.codecHeight,Ze.fps=K.frameRate.fps,Ze.profile=K.profile,Ze.level=K.level,Ze.refFrames=J.ref_frames,Ze.chromaFormat=J.chroma_format_string,Ze.sarNum=K.sarRatio.width,Ze.sarDen=K.sarRatio.height,Ze.videoCodec=K.codec,Ze.hasAudio&&Ze.audioCodec?Ze.mimeType='video/mp2t; codecs="'.concat(Ze.videoCodec,",").concat(Ze.audioCodec,'"'):Ze.mimeType='video/mp2t; codecs="'.concat(Ze.videoCodec,'"'),Ze.isComplete()&&this.onMediaInfo(Ze)},fe.prototype.dispatchVideoMediaSegment=function(J){J===void 0&&(J=!1),this.isInitSegmentDispatched()&&(this.video_track_.length||J)&&this.onDataAvailable(null,this.video_track_,J)},fe.prototype.dispatchAudioMediaSegment=function(J){J===void 0&&(J=!1),this.isInitSegmentDispatched()&&(this.audio_track_.length||J)&&this.onDataAvailable(this.audio_track_,null,J)},fe.prototype.dispatchAudioVideoMediaSegment=function(){this.isInitSegmentDispatched()&&(this.audio_track_.length||this.video_track_.length)&&this.onDataAvailable(this.audio_track_,this.video_track_)},fe.prototype.parseADTSAACPayload=function(J,K){if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_){var ue=new Uint8Array(J.byteLength+this.aac_last_incomplete_data_.byteLength);ue.set(this.aac_last_incomplete_data_,0),ue.set(J,this.aac_last_incomplete_data_.byteLength),J=ue}var Ce,ye;if(K!=null&&(ye=K/this.timescale_),this.audio_metadata_.codec==="aac"){if(K==null&&this.audio_last_sample_pts_!=null)Ce=1024/this.audio_metadata_.sampling_frequency*1e3,ye=this.audio_last_sample_pts_+Ce;else if(K==null)return void r.a.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.audio_last_sample_pts_){Ce=1024/this.audio_metadata_.sampling_frequency*1e3;var Oe=this.audio_last_sample_pts_+Ce;Math.abs(Oe-ye)>1&&(r.a.w(this.TAG,"AAC: Detected pts overlapped, "+"expected: ".concat(Oe,"ms, PES pts: ").concat(ye,"ms")),ye=Oe)}}for(var Ye,Be=new Le(J),et=null,Ze=ye;(et=Be.readNextAACFrame())!=null;){Ce=1024/et.sampling_frequency*1e3;var nt={codec:"aac",data:et};(this.audio_init_segment_dispatched_==0||this.detectAudioMetadataChange(nt))&&(this.audio_metadata_={codec:"aac",audio_object_type:et.audio_object_type,sampling_freq_index:et.sampling_freq_index,sampling_frequency:et.sampling_frequency,channel_config:et.channel_config},this.dispatchAudioMediaSegment(!0),this.dispatchAudioInitSegment(nt)),Ye=Ze;var at=Math.floor(Ze),kt={unit:et.data,length:et.data.byteLength,pts:at,dts:at};this.audio_track_.samples.push(kt),this.audio_track_.length+=et.data.byteLength,Ze+=Ce}Be.hasIncompleteData()&&(this.aac_last_incomplete_data_=Be.getIncompleteData()),Ye&&(this.audio_last_sample_pts_=Ye)}},fe.prototype.parseLOASAACPayload=function(J,K){var ue;if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_){var Ce=new Uint8Array(J.byteLength+this.aac_last_incomplete_data_.byteLength);Ce.set(this.aac_last_incomplete_data_,0),Ce.set(J,this.aac_last_incomplete_data_.byteLength),J=Ce}var ye,Oe;if(K!=null&&(Oe=K/this.timescale_),this.audio_metadata_.codec==="aac"){if(K==null&&this.audio_last_sample_pts_!=null)ye=1024/this.audio_metadata_.sampling_frequency*1e3,Oe=this.audio_last_sample_pts_+ye;else if(K==null)return void r.a.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.audio_last_sample_pts_){ye=1024/this.audio_metadata_.sampling_frequency*1e3;var Ye=this.audio_last_sample_pts_+ye;Math.abs(Ye-Oe)>1&&(r.a.w(this.TAG,"AAC: Detected pts overlapped, "+"expected: ".concat(Ye,"ms, PES pts: ").concat(Oe,"ms")),Oe=Ye)}}for(var Be,et=new xe(J),Ze=null,nt=Oe;(Ze=et.readNextAACFrame((ue=this.loas_previous_frame)!==null&&ue!==void 0?ue:void 0))!=null;){this.loas_previous_frame=Ze,ye=1024/Ze.sampling_frequency*1e3;var at={codec:"aac",data:Ze};(this.audio_init_segment_dispatched_==0||this.detectAudioMetadataChange(at))&&(this.audio_metadata_={codec:"aac",audio_object_type:Ze.audio_object_type,sampling_freq_index:Ze.sampling_freq_index,sampling_frequency:Ze.sampling_frequency,channel_config:Ze.channel_config},this.dispatchAudioMediaSegment(!0),this.dispatchAudioInitSegment(at)),Be=nt;var kt=Math.floor(nt),qt={unit:Ze.data,length:Ze.data.byteLength,pts:kt,dts:kt};this.audio_track_.samples.push(qt),this.audio_track_.length+=Ze.data.byteLength,nt+=ye}et.hasIncompleteData()&&(this.aac_last_incomplete_data_=et.getIncompleteData()),Be&&(this.audio_last_sample_pts_=Be)}},fe.prototype.parseAC3Payload=function(J,K){if(!this.has_video_||this.video_init_segment_dispatched_){var ue,Ce;if(K!=null&&(Ce=K/this.timescale_),this.audio_metadata_.codec==="ac-3"){if(K==null&&this.audio_last_sample_pts_!=null)ue=1536/this.audio_metadata_.sampling_frequency*1e3,Ce=this.audio_last_sample_pts_+ue;else if(K==null)return void r.a.w(this.TAG,"AC3: Unknown pts")}for(var ye,Oe=new It(J),Ye=null,Be=Ce;(Ye=Oe.readNextAC3Frame())!=null;){ue=1536/Ye.sampling_frequency*1e3;var et={codec:"ac-3",data:Ye};(this.audio_init_segment_dispatched_==0||this.detectAudioMetadataChange(et))&&(this.audio_metadata_={codec:"ac-3",sampling_frequency:Ye.sampling_frequency,bit_stream_identification:Ye.bit_stream_identification,bit_stream_mode:Ye.bit_stream_mode,low_frequency_effects_channel_on:Ye.low_frequency_effects_channel_on,channel_mode:Ye.channel_mode},this.dispatchAudioMediaSegment(!0),this.dispatchAudioInitSegment(et)),ye=Be;var Ze=Math.floor(Be),nt={unit:Ye.data,length:Ye.data.byteLength,pts:Ze,dts:Ze};this.audio_track_.samples.push(nt),this.audio_track_.length+=Ye.data.byteLength,Be+=ue}ye&&(this.audio_last_sample_pts_=ye)}},fe.prototype.parseEAC3Payload=function(J,K){if(!this.has_video_||this.video_init_segment_dispatched_){var ue,Ce;if(K!=null&&(Ce=K/this.timescale_),this.audio_metadata_.codec==="ec-3"){if(K==null&&this.audio_last_sample_pts_!=null)ue=256*this.audio_metadata_.num_blks/this.audio_metadata_.sampling_frequency*1e3,Ce=this.audio_last_sample_pts_+ue;else if(K==null)return void r.a.w(this.TAG,"EAC3: Unknown pts")}for(var ye,Oe=new $e(J),Ye=null,Be=Ce;(Ye=Oe.readNextEAC3Frame())!=null;){ue=1536/Ye.sampling_frequency*1e3;var et={codec:"ec-3",data:Ye};(this.audio_init_segment_dispatched_==0||this.detectAudioMetadataChange(et))&&(this.audio_metadata_={codec:"ec-3",sampling_frequency:Ye.sampling_frequency,bit_stream_identification:Ye.bit_stream_identification,low_frequency_effects_channel_on:Ye.low_frequency_effects_channel_on,num_blks:Ye.num_blks,channel_mode:Ye.channel_mode},this.dispatchAudioMediaSegment(!0),this.dispatchAudioInitSegment(et)),ye=Be;var Ze=Math.floor(Be),nt={unit:Ye.data,length:Ye.data.byteLength,pts:Ze,dts:Ze};this.audio_track_.samples.push(nt),this.audio_track_.length+=Ye.data.byteLength,Be+=ue}ye&&(this.audio_last_sample_pts_=ye)}},fe.prototype.parseOpusPayload=function(J,K){if(!this.has_video_||this.video_init_segment_dispatched_){var ue,Ce;if(K!=null&&(Ce=K/this.timescale_),this.audio_metadata_.codec==="opus"){if(K==null&&this.audio_last_sample_pts_!=null)ue=20,Ce=this.audio_last_sample_pts_+ue;else if(K==null)return void r.a.w(this.TAG,"Opus: Unknown pts")}for(var ye,Oe=Ce,Ye=0;Ye<J.length;){ue=20;for(var Be=(16&J[Ye+1])!=0,et=(8&J[Ye+1])!=0,Ze=Ye+2,nt=0;J[Ze]===255;)nt+=255,Ze+=1;nt+=J[Ze],Ze+=1,Ze+=Be?2:0,Ze+=et?2:0,ye=Oe;var at=Math.floor(Oe),kt=J.slice(Ze,Ze+nt),qt={unit:kt,length:kt.byteLength,pts:at,dts:at};this.audio_track_.samples.push(qt),this.audio_track_.length+=kt.byteLength,Oe+=ue,Ye=Ze+nt}ye&&(this.audio_last_sample_pts_=ye)}},fe.prototype.parseMP3Payload=function(J,K){if(!this.has_video_||this.video_init_segment_dispatched_){var ue=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],Ce=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],ye=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],Oe=J[1]>>>3&3,Ye=(6&J[1])>>1,Be=(240&J[2])>>>4,et=(12&J[2])>>>2,Ze=(J[3]>>>6&3)!==3?2:1,nt=0,at=34;switch(Oe){case 0:nt=[11025,12e3,8e3,0][et];break;case 2:nt=[22050,24e3,16e3,0][et];break;case 3:nt=[44100,48e3,32e3,0][et]}switch(Ye){case 1:at=34,Be<ye.length&&ye[Be];break;case 2:at=33,Be<Ce.length&&Ce[Be];break;case 3:at=32,Be<ue.length&&ue[Be]}var kt=new Ue;kt.object_type=at,kt.sample_rate=nt,kt.channel_count=Ze,kt.data=J;var qt={codec:"mp3",data:kt};this.audio_init_segment_dispatched_==0&&(this.audio_metadata_={codec:"mp3",object_type:at,sample_rate:nt,channel_count:Ze},this.dispatchAudioMediaSegment(!0),this.dispatchAudioInitSegment(qt));var gi={unit:J,length:J.byteLength,pts:K/this.timescale_,dts:K/this.timescale_};this.audio_track_.samples.push(gi),this.audio_track_.length+=J.byteLength}},fe.prototype.detectAudioMetadataChange=function(J){if(J.codec!==this.audio_metadata_.codec)return r.a.v(this.TAG,"Audio: Audio Codecs changed from "+"".concat(this.audio_metadata_.codec," to ").concat(J.codec)),!0;if(J.codec==="aac"&&this.audio_metadata_.codec==="aac"){if((K=J.data).audio_object_type!==this.audio_metadata_.audio_object_type)return r.a.v(this.TAG,"AAC: AudioObjectType changed from "+"".concat(this.audio_metadata_.audio_object_type," to ").concat(K.audio_object_type)),!0;if(K.sampling_freq_index!==this.audio_metadata_.sampling_freq_index)return r.a.v(this.TAG,"AAC: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sampling_freq_index," to ").concat(K.sampling_freq_index)),!0;if(K.channel_config!==this.audio_metadata_.channel_config)return r.a.v(this.TAG,"AAC: Channel configuration changed from "+"".concat(this.audio_metadata_.channel_config," to ").concat(K.channel_config)),!0}else if(J.codec==="ac-3"&&this.audio_metadata_.codec==="ac-3"){var K;if((K=J.data).sampling_frequency!==this.audio_metadata_.sampling_frequency)return r.a.v(this.TAG,"AC3: Sampling Frequency changed from "+"".concat(this.audio_metadata_.sampling_frequency," to ").concat(K.sampling_frequency)),!0;if(K.bit_stream_identification!==this.audio_metadata_.bit_stream_identification)return r.a.v(this.TAG,"AC3: Bit Stream Identification changed from "+"".concat(this.audio_metadata_.bit_stream_identification," to ").concat(K.bit_stream_identification)),!0;if(K.bit_stream_mode!==this.audio_metadata_.bit_stream_mode)return r.a.v(this.TAG,"AC3: BitStream Mode changed from "+"".concat(this.audio_metadata_.bit_stream_mode," to ").concat(K.bit_stream_mode)),!0;if(K.channel_mode!==this.audio_metadata_.channel_mode)return r.a.v(this.TAG,"AC3: Channel Mode changed from "+"".concat(this.audio_metadata_.channel_mode," to ").concat(K.channel_mode)),!0;if(K.low_frequency_effects_channel_on!==this.audio_metadata_.low_frequency_effects_channel_on)return r.a.v(this.TAG,"AC3: Low Frequency Effects Channel On changed from "+"".concat(this.audio_metadata_.low_frequency_effects_channel_on," to ").concat(K.low_frequency_effects_channel_on)),!0}else if(J.codec==="opus"&&this.audio_metadata_.codec==="opus"){if((ue=J.meta).sample_rate!==this.audio_metadata_.sample_rate)return r.a.v(this.TAG,"Opus: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sample_rate," to ").concat(ue.sample_rate)),!0;if(ue.channel_count!==this.audio_metadata_.channel_count)return r.a.v(this.TAG,"Opus: Channel count changed from "+"".concat(this.audio_metadata_.channel_count," to ").concat(ue.channel_count)),!0}else if(J.codec==="mp3"&&this.audio_metadata_.codec==="mp3"){var ue;if((ue=J.data).object_type!==this.audio_metadata_.object_type)return r.a.v(this.TAG,"MP3: AudioObjectType changed from "+"".concat(this.audio_metadata_.object_type," to ").concat(ue.object_type)),!0;if(ue.sample_rate!==this.audio_metadata_.sample_rate)return r.a.v(this.TAG,"MP3: SamplingFrequencyIndex changed from "+"".concat(this.audio_metadata_.sample_rate," to ").concat(ue.sample_rate)),!0;if(ue.channel_count!==this.audio_metadata_.channel_count)return r.a.v(this.TAG,"MP3: Channel count changed from "+"".concat(this.audio_metadata_.channel_count," to ").concat(ue.channel_count)),!0}return!1},fe.prototype.dispatchAudioInitSegment=function(J){var K={type:"audio"};if(K.id=this.audio_track_.id,K.timescale=1e3,K.duration=this.duration_,this.audio_metadata_.codec==="aac"){var ue=J.codec==="aac"?J.data:null,Ce=new ve(ue);K.audioSampleRate=Ce.sampling_rate,K.channelCount=Ce.channel_count,K.codec=Ce.codec_mimetype,K.originalCodec=Ce.original_codec_mimetype,K.config=Ce.config,K.refSampleDuration=1024/K.audioSampleRate*K.timescale}else if(this.audio_metadata_.codec==="ac-3"){var ye=J.codec==="ac-3"?J.data:null,Oe=new Yt(ye);K.audioSampleRate=Oe.sampling_rate,K.channelCount=Oe.channel_count,K.codec=Oe.codec_mimetype,K.originalCodec=Oe.original_codec_mimetype,K.config=Oe.config,K.refSampleDuration=1536/K.audioSampleRate*K.timescale}else if(this.audio_metadata_.codec==="ec-3"){var Ye=J.codec==="ec-3"?J.data:null,Be=new lt(Ye);K.audioSampleRate=Be.sampling_rate,K.channelCount=Be.channel_count,K.codec=Be.codec_mimetype,K.originalCodec=Be.original_codec_mimetype,K.config=Be.config,K.refSampleDuration=256*Be.num_blks/K.audioSampleRate*K.timescale}else this.audio_metadata_.codec==="opus"?(K.audioSampleRate=this.audio_metadata_.sample_rate,K.channelCount=this.audio_metadata_.channel_count,K.channelConfigCode=this.audio_metadata_.channel_config_code,K.codec="opus",K.originalCodec="opus",K.config=void 0,K.refSampleDuration=20):this.audio_metadata_.codec==="mp3"&&(K.audioSampleRate=this.audio_metadata_.sample_rate,K.channelCount=this.audio_metadata_.channel_count,K.codec="mp3",K.originalCodec="mp3",K.config=void 0);this.audio_init_segment_dispatched_==0&&r.a.v(this.TAG,"Generated first AudioSpecificConfig for mimeType: ".concat(K.codec)),this.onTrackMetadata("audio",K),this.audio_init_segment_dispatched_=!0;var et=this.media_info_;et.hasAudio=!0,et.audioCodec=K.originalCodec,et.audioSampleRate=K.audioSampleRate,et.audioChannelCount=K.channelCount,et.hasVideo&&et.videoCodec?et.mimeType='video/mp2t; codecs="'.concat(et.videoCodec,",").concat(et.audioCodec,'"'):et.mimeType='video/mp2t; codecs="'.concat(et.audioCodec,'"'),et.isComplete()&&this.onMediaInfo(et)},fe.prototype.dispatchPESPrivateDataDescriptor=function(J,K,ue){var Ce=new Pe;Ce.pid=J,Ce.stream_type=K,Ce.descriptor=ue,this.onPESPrivateDataDescriptor&&this.onPESPrivateDataDescriptor(Ce)},fe.prototype.parsePESPrivateDataPayload=function(J,K,ue,Ce,ye){var Oe=new ze;if(Oe.pid=Ce,Oe.stream_id=ye,Oe.len=J.byteLength,Oe.data=J,K!=null){var Ye=Math.floor(K/this.timescale_);Oe.pts=Ye}else Oe.nearest_pts=this.getNearestTimestampMilliseconds();if(ue!=null){var Be=Math.floor(ue/this.timescale_);Oe.dts=Be}this.onPESPrivateData&&this.onPESPrivateData(Oe)},fe.prototype.parseTimedID3MetadataPayload=function(J,K,ue,Ce,ye){var Oe=new ze;if(Oe.pid=Ce,Oe.stream_id=ye,Oe.len=J.byteLength,Oe.data=J,K!=null){var Ye=Math.floor(K/this.timescale_);Oe.pts=Ye}if(ue!=null){var Be=Math.floor(ue/this.timescale_);Oe.dts=Be}this.onTimedID3Metadata&&this.onTimedID3Metadata(Oe)},fe.prototype.parseSynchronousKLVMetadataPayload=function(J,K,ue,Ce,ye){var Oe=new vt;if(Oe.pid=Ce,Oe.stream_id=ye,Oe.len=J.byteLength,Oe.data=J,K!=null){var Ye=Math.floor(K/this.timescale_);Oe.pts=Ye}if(ue!=null){var Be=Math.floor(ue/this.timescale_);Oe.dts=Be}Oe.access_units=function(et){for(var Ze=[],nt=0;nt+5<et.byteLength;){var at=et[nt+0],kt=et[nt+1],qt=et[nt+2],gi=et[nt+3]<<8|et[nt+4]<<0,xi=et.slice(nt+5,nt+5+gi);Ze.push({service_id:at,sequence_number:kt,flags:qt,data:xi}),nt+=5+gi}return Ze}(J),this.onSynchronousKLVMetadata&&this.onSynchronousKLVMetadata(Oe)},fe.prototype.parseAsynchronousKLVMetadataPayload=function(J,K,ue){var Ce=new ze;Ce.pid=K,Ce.stream_id=ue,Ce.len=J.byteLength,Ce.data=J,this.onAsynchronousKLVMetadata&&this.onAsynchronousKLVMetadata(Ce)},fe.prototype.parseSMPTE2038MetadataPayload=function(J,K,ue,Ce,ye){var Oe=new St;if(Oe.pid=Ce,Oe.stream_id=ye,Oe.len=J.byteLength,Oe.data=J,K!=null){var Ye=Math.floor(K/this.timescale_);Oe.pts=Ye}if(Oe.nearest_pts=this.getNearestTimestampMilliseconds(),ue!=null){var Be=Math.floor(ue/this.timescale_);Oe.dts=Be}Oe.ancillaries=function(et){for(var Ze=new W.a(et),nt=0,at=[];nt+=6,Ze.readBits(6)===0;){var kt=Ze.readBool();nt+=1;var qt=Ze.readBits(11);nt+=11;var gi=Ze.readBits(12);nt+=12;var xi=255&Ze.readBits(10);nt+=10;var Ai=255&Ze.readBits(10);nt+=10;var ui=255&Ze.readBits(10);nt+=10;for(var Oi=new Uint8Array(ui),qi=0;qi<ui;qi++){var Li=255&Ze.readBits(10);nt+=10,Oi[qi]=Li}Ze.readBits(10),nt+=10;var Vi="User Defined";xi===65?Ai===7&&(Vi="SCTE-104"):xi===95?Ai===220?Vi="ARIB STD-B37 (1SEG)":Ai===221?Vi="ARIB STD-B37 (ANALOG)":Ai===222?Vi="ARIB STD-B37 (SD)":Ai===223&&(Vi="ARIB STD-B37 (HD)"):xi===97&&(Ai===1?Vi="EIA-708":Ai===2&&(Vi="EIA-608")),at.push({yc_indicator:kt,line_number:qt,horizontal_offset:gi,did:xi,sdid:Ai,user_data:Oi,description:Vi,information:{}}),Ze.readBits(8-(nt-Math.floor(nt/8))%8),nt+=(8-(nt-Math.floor(nt/8)))%8}return Ze.destroy(),Ze=null,at}(J),this.onSMPTE2038Metadata&&this.onSMPTE2038Metadata(Oe)},fe.prototype.getNearestTimestampMilliseconds=function(){return this.audio_last_sample_pts_!=null?Math.floor(this.audio_last_sample_pts_):this.last_pcr_!=null?Math.floor(this.last_pcr_/300/this.timescale_):void 0},fe.prototype.getPcrBase=function(J){var K=33554432*J[6]+131072*J[7]+512*J[8]+2*J[9]+(128&J[10])/128+this.timestamp_offset_;return K+4294967296<this.last_pcr_base_&&(K+=8589934592,this.timestamp_offset_+=8589934592),this.last_pcr_base_=K,K},fe.prototype.getTimestamp=function(J,K){var ue=536870912*(14&J[K])+4194304*(255&J[K+1])+16384*(254&J[K+2])+128*(255&J[K+3])+(254&J[K+4])/2+this.timestamp_offset_;return ue+4294967296<this.last_pcr_base_&&(ue+=8589934592),ue},fe}(c);i.a=ri},function(t,i,n){var a=n(8),r=function(){function o(){}return o._ebsp2rbsp=function(d){for(var c=d,l=c.byteLength,f=new Uint8Array(l),p=0,g=0;g<l;g++)g>=2&&c[g]===3&&c[g-1]===0&&c[g-2]===0||(f[p]=c[g],p++);return new Uint8Array(f.buffer,0,p)},o.parseVPS=function(d){var c=o._ebsp2rbsp(d),l=new a.a(c);return l.readByte(),l.readByte(),l.readBits(4),l.readBits(2),l.readBits(6),{num_temporal_layers:l.readBits(3)+1,temporal_id_nested:l.readBool()}},o.parseSPS=function(d){var c=o._ebsp2rbsp(d),l=new a.a(c);l.readByte(),l.readByte();for(var f=0,p=0,g=0,y=0,A=(l.readBits(4),l.readBits(3)),C=(l.readBool(),l.readBits(2)),I=l.readBool(),P=l.readBits(5),M=l.readByte(),G=l.readByte(),Z=l.readByte(),le=l.readByte(),W=l.readByte(),N=l.readByte(),U=l.readByte(),O=l.readByte(),z=l.readByte(),ce=l.readByte(),be=l.readByte(),Le=[],xe=[],ve=0;ve<A;ve++)Le.push(l.readBool()),xe.push(l.readBool());if(A>0)for(ve=A;ve<8;ve++)l.readBits(2);for(ve=0;ve<A;ve++)Le[ve]&&(l.readByte(),l.readByte(),l.readByte(),l.readByte(),l.readByte(),l.readByte(),l.readByte(),l.readByte(),l.readByte(),l.readByte(),l.readByte()),xe[ve]&&l.readByte();l.readUEG();var ze=l.readUEG();ze==3&&l.readBits(1);var Pe=l.readUEG(),Y=l.readUEG();l.readBool()&&(f+=l.readUEG(),p+=l.readUEG(),g+=l.readUEG(),y+=l.readUEG());var b=l.readUEG(),S=l.readUEG(),k=l.readUEG();for(ve=l.readBool()?0:A;ve<=A;ve++)l.readUEG(),l.readUEG(),l.readUEG();if(l.readUEG(),l.readUEG(),l.readUEG(),l.readUEG(),l.readUEG(),l.readUEG(),l.readBool()&&l.readBool())for(var R=0;R<4;R++)for(var w=0;w<(R===3?2:6);w++)if(l.readBool()){var $=Math.min(64,1<<4+(R<<1));for(R>1&&l.readSEG(),ve=0;ve<$;ve++)l.readSEG()}else l.readUEG();l.readBool(),l.readBool(),l.readBool()&&(l.readByte(),l.readUEG(),l.readUEG(),l.readBool());var X=l.readUEG(),ie=0;for(ve=0;ve<X;ve++){var se=!1;if(ve!==0&&(se=l.readBool()),se){ve===X&&l.readUEG(),l.readBool(),l.readUEG();for(var me=0,ge=0;ge<=ie;ge++){var Re=l.readBool(),Ge=!1;Re||(Ge=l.readBool()),(Re||Ge)&&me++}ie=me}else{var Je=l.readUEG(),st=l.readUEG();for(ie=Je+st,ge=0;ge<Je;ge++)l.readUEG(),l.readBool();for(ge=0;ge<st;ge++)l.readUEG(),l.readBool()}}if(l.readBool()){var xt=l.readUEG();for(ve=0;ve<xt;ve++){for(ge=0;ge<k+4;ge++)l.readBits(1);l.readBits(1)}}var qe=0,bt=1,St=1,Ue=!1,Vt=1,Kt=1,It=(l.readBool(),l.readBool(),2),Yt=2,Te=2;if(l.readBool()){if(l.readBool()){var $e=l.readByte();$e>0&&$e<=16?(bt=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][$e-1],St=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][$e-1]):$e===255&&(bt=l.readBits(16),St=l.readBits(16))}if(l.readBool()&&l.readBool(),l.readBool()&&(l.readBits(3),l.readBool(),l.readBool()&&(It=l.readByte(),Yt=l.readByte(),Te=l.readByte())),l.readBool()&&(l.readUEG(),l.readUEG()),l.readBool(),l.readBool(),l.readBool(),l.readBool()&&(l.readUEG(),l.readUEG(),l.readUEG(),l.readUEG()),l.readBool()&&(Vt=l.readBits(32),Kt=l.readBits(32),l.readBool()&&l.readUEG(),l.readBool())){var lt=!1,vt=!1,_t=!1;for(lt=l.readBool(),vt=l.readBool(),(lt||vt)&&((_t=l.readBool())&&(l.readByte(),l.readBits(5),l.readBool(),l.readBits(5)),l.readBits(4),l.readBits(4),_t&&l.readBits(4),l.readBits(5),l.readBits(5),l.readBits(5)),ve=0;ve<=A;ve++){var Wt=l.readBool();Ue=Wt;var Tt=!0,Ct=1;Wt||(Tt=l.readBool());var ri=!1;if(Tt?l.readUEG():ri=l.readBool(),ri||(Ct=l.readUEG()+1),lt){for(ge=0;ge<Ct;ge++)l.readUEG(),l.readUEG(),_t&&(l.readUEG(),l.readUEG());l.readBool()}if(vt){for(ge=0;ge<Ct;ge++)l.readUEG(),l.readUEG(),_t&&(l.readUEG(),l.readUEG());l.readBool()}}}l.readBool()&&(l.readBool(),l.readBool(),l.readBool(),qe=l.readUEG(),l.readUEG(),l.readUEG(),l.readUEG(),l.readUEG())}l.readBool();var H="hvc1.".concat(P,".1.L").concat(be,".B0"),fe=Pe-(f+p)*(ze===1||ze===2?2:1),J=Y-(g+y)*(ze===1?2:1),K=1;return bt!==1&&St!==1&&(K=bt/St),l.destroy(),l=null,{codec_mimetype:H,profile_string:o.getProfileString(P),level_string:o.getLevelString(be),profile_idc:P,bit_depth:b+8,ref_frames:1,chroma_format:ze,chroma_format_string:o.getChromaFormatString(ze),general_level_idc:be,general_profile_space:C,general_tier_flag:I,general_profile_idc:P,general_profile_compatibility_flags_1:M,general_profile_compatibility_flags_2:G,general_profile_compatibility_flags_3:Z,general_profile_compatibility_flags_4:le,general_constraint_indicator_flags_1:W,general_constraint_indicator_flags_2:N,general_constraint_indicator_flags_3:U,general_constraint_indicator_flags_4:O,general_constraint_indicator_flags_5:z,general_constraint_indicator_flags_6:ce,min_spatial_segmentation_idc:qe,constant_frame_rate:0,chroma_format_idc:ze,bit_depth_luma_minus8:b,bit_depth_chroma_minus8:S,colour_primaries:It,transfer_characteristics:Yt,matrix_coeffs:Te,frame_rate:{fixed:Ue,fps:Kt/Vt,fps_den:Vt,fps_num:Kt},sar_ratio:{width:bt,height:St},codec_size:{width:fe,height:J},present_size:{width:fe*K,height:J}}},o.parsePPS=function(d){var c=o._ebsp2rbsp(d),l=new a.a(c);l.readByte(),l.readByte(),l.readUEG(),l.readUEG(),l.readBool(),l.readBool(),l.readBits(3),l.readBool(),l.readBool(),l.readUEG(),l.readUEG(),l.readSEG(),l.readBool(),l.readBool(),l.readBool()&&l.readUEG(),l.readSEG(),l.readSEG(),l.readBool(),l.readBool(),l.readBool(),l.readBool();var f=l.readBool(),p=l.readBool(),g=1;return p&&f?g=0:p?g=3:f&&(g=2),{parallelismType:g}},o.getChromaFormatString=function(d){switch(d){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},o.getProfileString=function(d){switch(d){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},o.getLevelString=function(d){return(d/30).toFixed(1)},o}();i.a=r},function(t,i,n){var a=n(8),r=function(){return(r=Object.assign||function(d){for(var c,l=1,f=arguments.length;l<f;l++)for(var p in c=arguments[l])Object.prototype.hasOwnProperty.call(c,p)&&(d[p]=c[p]);return d}).apply(this,arguments)},o=function(){function d(){}return d.parseOBUs=function(c,l){for(var f=0;f<c.byteLength;){var p=f,g=(c[f],(120&c[f])>>3),y=(4&c[f])!=0,A=(2&c[f])!=0;c[f],f+=1,y&&(f+=1);var C=Number.POSITIVE_INFINITY;if(A){C=0;for(var I=0;;I++){var P=c[f++];if(C|=(127&P)<<7*I,(128&P)==0)break}}console.log(g),g===1?l=r(r({},d.parseSeuqneceHeader(c.subarray(f,f+C))),{sequence_header_data:c.subarray(p,f+C)}):(g==3&&l||g==6&&l)&&(l=d.parseOBUFrameHeader(c.subarray(f,f+C),0,0,l)),f+=C}return l},d.parseSeuqneceHeader=function(c){var l=new a.a(c),f=l.readBits(3),p=(l.readBool(),l.readBool()),g=!0,y=0,A=1,C=void 0,I=[];if(p)I.push({operating_point_idc:0,level:l.readBits(5),tier:0});else{if(l.readBool()){var P=l.readBits(32),M=l.readBits(32),G=l.readBool();if(G){for(var Z=0;l.readBits(1)===0;)Z+=1;Z>=32||(1<<Z)-1+l.readBits(Z)}(y=M)/(A=P),g=G,l.readBool()&&(l.readBits(5),l.readBits(32),C=l.readBits(5),l.readBits(5))}for(var le=l.readBool(),W=l.readBits(5),N=0;N<=W;N++){var U=l.readBits(12),O=l.readBits(5),z=O>7?l.readBits(1):0;I.push({operating_point_idc:U,level:O,tier:z}),le&&l.readBool()&&l.readBits(4)}}var ce=I[0],be=ce.level,Le=ce.tier,xe=l.readBits(4),ve=l.readBits(4),ze=l.readBits(xe+1)+1,Pe=l.readBits(ve+1)+1,Y=!1;p||(Y=l.readBool()),Y&&(l.readBits(4),l.readBits(4)),l.readBool(),l.readBool(),l.readBool();var b=!1,S=2,k=2,R=0;p||(l.readBool(),l.readBool(),l.readBool(),l.readBool(),(b=l.readBool())&&(l.readBool(),l.readBool()),(S=l.readBool()?2:l.readBits(1))?k=l.readBool()?2:l.readBits(1):k=2,b?R=l.readBits(3)+1:R=0);var w=l.readBool(),$=(l.readBool(),l.readBool(),l.readBool()),X=8;f===2&&$?X=l.readBool()?12:10:X=$?10:8;var ie=!1;f!==1&&(ie=l.readBool()),l.readBool()&&(l.readBits(8),l.readBits(8),l.readBits(8));var se=1,me=1;return ie?(l.readBits(1),se=1,me=1):(l.readBits(1),f==0?(se=1,me=1):f==1?(se=0,me=0):X==12?l.readBits(1)&&l.readBits(1):(se=1,me=0),se&&me&&l.readBits(2),l.readBits(1)),l.readBool(),l.destroy(),l=null,{codec_mimetype:"av01.".concat(f,".").concat(d.getLevelString(be,Le),".").concat(X.toString(10).padStart(2,"0")),level:be,tier:Le,level_string:d.getLevelString(be,Le),profile_idc:f,profile_string:"".concat(f),bit_depth:X,ref_frames:1,chroma_format:d.getChromaFormat(ie,se,me),chroma_format_string:d.getChromaFormatString(ie,se,me),sequence_header:{frame_id_numbers_present_flag:Y,additional_frame_id_length_minus_1:void 0,delta_frame_id_length_minus_2:void 0,reduced_still_picture_header:p,decoder_model_info_present_flag:!1,operating_points:I,buffer_removal_time_length_minus_1:C,equal_picture_interval:g,seq_force_screen_content_tools:S,seq_force_integer_mv:k,enable_order_hint:b,order_hint_bits:R,enable_superres:w,frame_width_bit:xe+1,frame_height_bit:ve+1,max_frame_width:ze,max_frame_height:Pe},keyframe:void 0,frame_rate:{fixed:g,fps:y/A,fps_den:A,fps_num:y}}},d.parseOBUFrameHeader=function(c,l,f,p){var g=p.sequence_header,y=new a.a(c),A=(g.max_frame_width,g.max_frame_height,0);g.frame_id_numbers_present_flag&&(A=g.additional_frame_id_length_minus_1+g.delta_frame_id_length_minus_2+3);var C=0,I=!0,P=!0,M=!1;if(!g.reduced_still_picture_header){if(y.readBool())return p;I=(C=y.readBits(2))===2||C===0,(P=y.readBool())&&g.decoder_model_info_present_flag&&g.equal_picture_interval,P&&y.readBool(),M=!!(C===3||C===0&&P)||y.readBool()}p.keyframe=I,y.readBool();var G=g.seq_force_screen_content_tools;g.seq_force_screen_content_tools===2&&(G=y.readBits(1)),G&&(g.seq_force_integer_mv,g.seq_force_integer_mv==2&&y.readBits(1)),g.frame_id_numbers_present_flag&&y.readBits(A);var Z=!1;if(Z=C==3||!g.reduced_still_picture_header&&y.readBool(),y.readBits(g.order_hint_bits),I||M||y.readBits(3),g.decoder_model_info_present_flag&&y.readBool()){for(var le=0;le<=g.operating_points_cnt_minus_1;le++)if(g.operating_points[le].decoder_model_present_for_this_op[le]){var W=g.operating_points[le].operating_point_idc;(W===0||W>>l&1&&W>>f+8&1)&&y.readBits(g.buffer_removal_time_length_minus_1+1)}}var N=255;if(C===3||C==0&&P||(N=y.readBits(8)),(I||N!==255)&&M&&g.enable_order_hint)for(var U=0;U<8;U++)y.readBits(g.order_hint_bits);if(I){var O=d.frameSizeAndRenderSize(y,Z,g);p.codec_size={width:O.FrameWidth,height:O.FrameHeight},p.present_size={width:O.RenderWidth,height:O.RenderHeight},p.sar_ratio={width:O.RenderWidth/O.FrameWidth,height:O.RenderHeight/O.FrameHeight}}return y.destroy(),y=null,p},d.frameSizeAndRenderSize=function(c,l,f){var p=f.max_frame_width,g=f.max_frame_height;l&&(p=c.readBits(f.frame_width_bit)+1,g=c.readBits(f.frame_height_bit)+1);var y=!1;f.enable_superres&&(y=c.readBool());var A=8;y&&(A=c.readBits(3)+9);var C=p;p=Math.floor((8*C+A/2)/A);var I=C,P=g;if(c.readBool()){var M=c.readBits(16)+1,G=c.readBits(16)+1;I=c.readBits(M)+1,P=c.readBits(G)+1}return{UpscaledWidth:C,FrameWidth:p,FrameHeight:g,RenderWidth:I,RenderHeight:P}},d.getLevelString=function(c,l){return"".concat(c.toString(10).padStart(2,"0")).concat(l===0?"M":"H")},d.getChromaFormat=function(c,l,f){return c?0:l===0&&f===0?3:l===1&&f===0?2:l===1&&f===1?1:Number.NaN},d.getChromaFormatString=function(c,l,f){return c?"4:0:0":l===0&&f===0?"4:4:4":l===1&&f===0?"4:2:2":l===1&&f===1?"4:2:0":"Unknown"},d}();i.a=o},function(t,i,n){var a,r=n(0),o=function(){function W(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return W.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},W.prototype.addBytes=function(N){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=N,this._totalBytes+=N):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=N,this._totalBytes+=N):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=N,this._totalBytes+=N,this._lastCheckpoint=this._now())},Object.defineProperty(W.prototype,"currentKBps",{get:function(){this.addBytes(0);var N=(this._now()-this._lastCheckpoint)/1e3;return N==0&&(N=1),this._intervalBytes/N/1024},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"averageKBps",{get:function(){var N=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/N/1024},enumerable:!1,configurable:!0}),W}(),d=n(2),c=n(5),l=n(3),f=(a=function(W,N){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,O){U.__proto__=O}||function(U,O){for(var z in O)Object.prototype.hasOwnProperty.call(O,z)&&(U[z]=O[z])})(W,N)},function(W,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function U(){this.constructor=W}a(W,N),W.prototype=N===null?Object.create(N):(U.prototype=N.prototype,new U)}),p=function(W){function N(U,O){var z=W.call(this,"fetch-stream-loader")||this;return z.TAG="FetchStreamLoader",z._seekHandler=U,z._config=O,z._needStash=!0,z._requestAbort=!1,z._abortController=null,z._contentLength=null,z._receivedLength=0,z}return f(N,W),N.isSupported=function(){try{var U=c.a.msedge&&c.a.version.minor>=15048,O=!c.a.msedge||U;return self.fetch&&self.ReadableStream&&O}catch{return!1}},N.prototype.destroy=function(){this.isWorking()&&this.abort(),W.prototype.destroy.call(this)},N.prototype.open=function(U,O){var z=this;this._dataSource=U,this._range=O;var ce=U.url;this._config.reuseRedirectedURL&&U.redirectedURL!=null&&(ce=U.redirectedURL);var be=this._seekHandler.getConfig(ce,O),Le=new self.Headers;if(typeof be.headers=="object"){var xe=be.headers;for(var ve in xe)xe.hasOwnProperty(ve)&&Le.append(ve,xe[ve])}var ze={method:"GET",headers:Le,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var ve in this._config.headers)Le.append(ve,this._config.headers[ve]);U.cors===!1&&(ze.mode="same-origin"),U.withCredentials&&(ze.credentials="include"),U.referrerPolicy&&(ze.referrerPolicy=U.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,ze.signal=this._abortController.signal),this._status=d.c.kConnecting,self.fetch(be.url,ze).then(function(Pe){if(z._requestAbort)return z._status=d.c.kIdle,void Pe.body.cancel();if(Pe.ok&&Pe.status>=200&&Pe.status<=299){if(Pe.url!==be.url&&z._onURLRedirect){var Y=z._seekHandler.removeURLParameters(Pe.url);z._onURLRedirect(Y)}var b=Pe.headers.get("Content-Length");return b!=null&&(z._contentLength=parseInt(b),z._contentLength!==0&&z._onContentLengthKnown&&z._onContentLengthKnown(z._contentLength)),z._pump.call(z,Pe.body.getReader())}if(z._status=d.c.kError,!z._onError)throw new l.d("FetchStreamLoader: Http code invalid, "+Pe.status+" "+Pe.statusText);z._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:Pe.status,msg:Pe.statusText})}).catch(function(Pe){if(!z._abortController||!z._abortController.signal.aborted){if(z._status=d.c.kError,!z._onError)throw Pe;z._onError(d.b.EXCEPTION,{code:-1,msg:Pe.message})}})},N.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==d.c.kBuffering||!c.a.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},N.prototype._pump=function(U){var O=this;return U.read().then(function(z){if(z.done)if(O._contentLength!==null&&O._receivedLength<O._contentLength){O._status=d.c.kError;var ce=d.b.EARLY_EOF,be={code:-1,msg:"Fetch stream meet Early-EOF"};if(!O._onError)throw new l.d(be.msg);O._onError(ce,be)}else O._status=d.c.kComplete,O._onComplete&&O._onComplete(O._range.from,O._range.from+O._receivedLength-1);else{if(O._abortController&&O._abortController.signal.aborted)return void(O._status=d.c.kComplete);if(O._requestAbort===!0)return O._status=d.c.kComplete,U.cancel();O._status=d.c.kBuffering;var Le=z.value.buffer,xe=O._range.from+O._receivedLength;O._receivedLength+=Le.byteLength,O._onDataArrival&&O._onDataArrival(Le,xe,O._receivedLength),O._pump(U)}}).catch(function(z){if(O._abortController&&O._abortController.signal.aborted)O._status=d.c.kComplete;else if(z.code!==11||!c.a.msedge){O._status=d.c.kError;var ce=0,be=null;if(z.code!==19&&z.message!=="network error"||!(O._contentLength===null||O._contentLength!==null&&O._receivedLength<O._contentLength)?(ce=d.b.EXCEPTION,be={code:z.code,msg:z.message}):(ce=d.b.EARLY_EOF,be={code:z.code,msg:"Fetch stream meet Early-EOF"}),!O._onError)throw new l.d(be.msg);O._onError(ce,be)}})},N}(d.a),g=function(){var W=function(N,U){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,z){O.__proto__=z}||function(O,z){for(var ce in z)Object.prototype.hasOwnProperty.call(z,ce)&&(O[ce]=z[ce])})(N,U)};return function(N,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function O(){this.constructor=N}W(N,U),N.prototype=U===null?Object.create(U):(O.prototype=U.prototype,new O)}}(),y=function(W){function N(U,O){var z=W.call(this,"xhr-moz-chunked-loader")||this;return z.TAG="MozChunkedLoader",z._seekHandler=U,z._config=O,z._needStash=!0,z._xhr=null,z._requestAbort=!1,z._contentLength=null,z._receivedLength=0,z}return g(N,W),N.isSupported=function(){try{var U=new XMLHttpRequest;return U.open("GET","https://example.com",!0),U.responseType="moz-chunked-arraybuffer",U.responseType==="moz-chunked-arraybuffer"}catch(O){return r.a.w("MozChunkedLoader",O.message),!1}},N.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),W.prototype.destroy.call(this)},N.prototype.open=function(U,O){this._dataSource=U,this._range=O;var z=U.url;this._config.reuseRedirectedURL&&U.redirectedURL!=null&&(z=U.redirectedURL);var ce=this._seekHandler.getConfig(z,O);this._requestURL=ce.url;var be=this._xhr=new XMLHttpRequest;if(be.open("GET",ce.url,!0),be.responseType="moz-chunked-arraybuffer",be.onreadystatechange=this._onReadyStateChange.bind(this),be.onprogress=this._onProgress.bind(this),be.onloadend=this._onLoadEnd.bind(this),be.onerror=this._onXhrError.bind(this),U.withCredentials&&(be.withCredentials=!0),typeof ce.headers=="object"){var Le=ce.headers;for(var xe in Le)Le.hasOwnProperty(xe)&&be.setRequestHeader(xe,Le[xe])}if(typeof this._config.headers=="object"){Le=this._config.headers;for(var xe in Le)Le.hasOwnProperty(xe)&&be.setRequestHeader(xe,Le[xe])}this._status=d.c.kConnecting,be.send()},N.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=d.c.kComplete},N.prototype._onReadyStateChange=function(U){var O=U.target;if(O.readyState===2){if(O.responseURL!=null&&O.responseURL!==this._requestURL&&this._onURLRedirect){var z=this._seekHandler.removeURLParameters(O.responseURL);this._onURLRedirect(z)}if(O.status!==0&&(O.status<200||O.status>299)){if(this._status=d.c.kError,!this._onError)throw new l.d("MozChunkedLoader: Http code invalid, "+O.status+" "+O.statusText);this._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:O.status,msg:O.statusText})}else this._status=d.c.kBuffering}},N.prototype._onProgress=function(U){if(this._status!==d.c.kError){this._contentLength===null&&U.total!==null&&U.total!==0&&(this._contentLength=U.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var O=U.target.response,z=this._range.from+this._receivedLength;this._receivedLength+=O.byteLength,this._onDataArrival&&this._onDataArrival(O,z,this._receivedLength)}},N.prototype._onLoadEnd=function(U){this._requestAbort!==!0?this._status!==d.c.kError&&(this._status=d.c.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1},N.prototype._onXhrError=function(U){this._status=d.c.kError;var O=0,z=null;if(this._contentLength&&U.loaded<this._contentLength?(O=d.b.EARLY_EOF,z={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(O=d.b.EXCEPTION,z={code:-1,msg:U.constructor.name+" "+U.type}),!this._onError)throw new l.d(z.msg);this._onError(O,z)},N}(d.a),A=function(){var W=function(N,U){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,z){O.__proto__=z}||function(O,z){for(var ce in z)Object.prototype.hasOwnProperty.call(z,ce)&&(O[ce]=z[ce])})(N,U)};return function(N,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function O(){this.constructor=N}W(N,U),N.prototype=U===null?Object.create(U):(O.prototype=U.prototype,new O)}}(),C=(function(W){function N(U,O){var z=W.call(this,"xhr-msstream-loader")||this;return z.TAG="MSStreamLoader",z._seekHandler=U,z._config=O,z._needStash=!0,z._xhr=null,z._reader=null,z._totalRange=null,z._currentRange=null,z._currentRequestURL=null,z._currentRedirectedURL=null,z._contentLength=null,z._receivedLength=0,z._bufferLimit=16777216,z._lastTimeBufferSize=0,z._isReconnecting=!1,z}A(N,W),N.isSupported=function(){try{if(self.MSStream===void 0||self.MSStreamReader===void 0)return!1;var U=new XMLHttpRequest;return U.open("GET","https://example.com",!0),U.responseType="ms-stream",U.responseType==="ms-stream"}catch(O){return r.a.w("MSStreamLoader",O.message),!1}},N.prototype.destroy=function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),W.prototype.destroy.call(this)},N.prototype.open=function(U,O){this._internalOpen(U,O,!1)},N.prototype._internalOpen=function(U,O,z){this._dataSource=U,z?this._currentRange=O:this._totalRange=O;var ce=U.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?ce=this._currentRedirectedURL:U.redirectedURL!=null&&(ce=U.redirectedURL));var be=this._seekHandler.getConfig(ce,O);this._currentRequestURL=be.url;var Le=this._reader=new self.MSStreamReader;Le.onprogress=this._msrOnProgress.bind(this),Le.onload=this._msrOnLoad.bind(this),Le.onerror=this._msrOnError.bind(this);var xe=this._xhr=new XMLHttpRequest;if(xe.open("GET",be.url,!0),xe.responseType="ms-stream",xe.onreadystatechange=this._xhrOnReadyStateChange.bind(this),xe.onerror=this._xhrOnError.bind(this),U.withCredentials&&(xe.withCredentials=!0),typeof be.headers=="object"){var ve=be.headers;for(var ze in ve)ve.hasOwnProperty(ze)&&xe.setRequestHeader(ze,ve[ze])}if(typeof this._config.headers=="object"){ve=this._config.headers;for(var ze in ve)ve.hasOwnProperty(ze)&&xe.setRequestHeader(ze,ve[ze])}this._isReconnecting?this._isReconnecting=!1:this._status=d.c.kConnecting,xe.send()},N.prototype.abort=function(){this._internalAbort(),this._status=d.c.kComplete},N.prototype._internalAbort=function(){this._reader&&(this._reader.readyState===1&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)},N.prototype._xhrOnReadyStateChange=function(U){var O=U.target;if(O.readyState===2)if(O.status>=200&&O.status<=299){if(this._status=d.c.kBuffering,O.responseURL!=null){var z=this._seekHandler.removeURLParameters(O.responseURL);O.responseURL!==this._currentRequestURL&&z!==this._currentRedirectedURL&&(this._currentRedirectedURL=z,this._onURLRedirect&&this._onURLRedirect(z))}var ce=O.getResponseHeader("Content-Length");if(ce!=null&&this._contentLength==null){var be=parseInt(ce);be>0&&(this._contentLength=be,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength))}}else{if(this._status=d.c.kError,!this._onError)throw new l.d("MSStreamLoader: Http code invalid, "+O.status+" "+O.statusText);this._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:O.status,msg:O.statusText})}else if(O.readyState===3&&O.status>=200&&O.status<=299){this._status=d.c.kBuffering;var Le=O.response;this._reader.readAsArrayBuffer(Le)}},N.prototype._xhrOnError=function(U){this._status=d.c.kError;var O=d.b.EXCEPTION,z={code:-1,msg:U.constructor.name+" "+U.type};if(!this._onError)throw new l.d(z.msg);this._onError(O,z)},N.prototype._msrOnProgress=function(U){var O=U.target.result;if(O!=null){var z=O.slice(this._lastTimeBufferSize);this._lastTimeBufferSize=O.byteLength;var ce=this._totalRange.from+this._receivedLength;this._receivedLength+=z.byteLength,this._onDataArrival&&this._onDataArrival(z,ce,this._receivedLength),O.byteLength>=this._bufferLimit&&(r.a.v(this.TAG,"MSStream buffer exceeded max size near ".concat(ce+z.byteLength,", reconnecting...")),this._doReconnectIfNeeded())}else this._doReconnectIfNeeded()},N.prototype._doReconnectIfNeeded=function(){if(this._contentLength==null||this._receivedLength<this._contentLength){this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort();var U={from:this._totalRange.from+this._receivedLength,to:-1};this._internalOpen(this._dataSource,U,!0)}},N.prototype._msrOnLoad=function(U){this._status=d.c.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)},N.prototype._msrOnError=function(U){this._status=d.c.kError;var O=0,z=null;if(this._contentLength&&this._receivedLength<this._contentLength?(O=d.b.EARLY_EOF,z={code:-1,msg:"MSStream meet Early-Eof"}):(O=d.b.EARLY_EOF,z={code:-1,msg:U.constructor.name+" "+U.type}),!this._onError)throw new l.d(z.msg);this._onError(O,z)}}(d.a),function(){var W=function(N,U){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,z){O.__proto__=z}||function(O,z){for(var ce in z)Object.prototype.hasOwnProperty.call(z,ce)&&(O[ce]=z[ce])})(N,U)};return function(N,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function O(){this.constructor=N}W(N,U),N.prototype=U===null?Object.create(U):(O.prototype=U.prototype,new O)}}()),I=function(W){function N(U,O){var z=W.call(this,"xhr-range-loader")||this;return z.TAG="RangeLoader",z._seekHandler=U,z._config=O,z._needStash=!1,z._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],z._currentChunkSizeKB=384,z._currentSpeedNormalized=0,z._zeroSpeedChunkCount=0,z._xhr=null,z._speedSampler=new o,z._requestAbort=!1,z._waitForTotalLength=!1,z._totalLengthReceived=!1,z._currentRequestURL=null,z._currentRedirectedURL=null,z._currentRequestRange=null,z._totalLength=null,z._contentLength=null,z._receivedLength=0,z._lastTimeLoaded=0,z}return C(N,W),N.isSupported=function(){try{var U=new XMLHttpRequest;return U.open("GET","https://example.com",!0),U.responseType="arraybuffer",U.responseType==="arraybuffer"}catch(O){return r.a.w("RangeLoader",O.message),!1}},N.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),W.prototype.destroy.call(this)},Object.defineProperty(N.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),N.prototype.open=function(U,O){this._dataSource=U,this._range=O,this._status=d.c.kConnecting;var z=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(z=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||z?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},N.prototype._openSubRange=function(){var U=1024*this._currentChunkSizeKB,O=this._range.from+this._receivedLength,z=O+U;this._contentLength!=null&&z-this._range.from>=this._contentLength&&(z=this._range.from+this._contentLength-1),this._currentRequestRange={from:O,to:z},this._internalOpen(this._dataSource,this._currentRequestRange)},N.prototype._internalOpen=function(U,O){this._lastTimeLoaded=0;var z=U.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?z=this._currentRedirectedURL:U.redirectedURL!=null&&(z=U.redirectedURL));var ce=this._seekHandler.getConfig(z,O);this._currentRequestURL=ce.url;var be=this._xhr=new XMLHttpRequest;if(be.open("GET",ce.url,!0),be.responseType="arraybuffer",be.onreadystatechange=this._onReadyStateChange.bind(this),be.onprogress=this._onProgress.bind(this),be.onload=this._onLoad.bind(this),be.onerror=this._onXhrError.bind(this),U.withCredentials&&(be.withCredentials=!0),typeof ce.headers=="object"){var Le=ce.headers;for(var xe in Le)Le.hasOwnProperty(xe)&&be.setRequestHeader(xe,Le[xe])}if(typeof this._config.headers=="object"){Le=this._config.headers;for(var xe in Le)Le.hasOwnProperty(xe)&&be.setRequestHeader(xe,Le[xe])}be.send()},N.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=d.c.kComplete},N.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},N.prototype._onReadyStateChange=function(U){var O=U.target;if(O.readyState===2){if(O.responseURL!=null){var z=this._seekHandler.removeURLParameters(O.responseURL);O.responseURL!==this._currentRequestURL&&z!==this._currentRedirectedURL&&(this._currentRedirectedURL=z,this._onURLRedirect&&this._onURLRedirect(z))}if(O.status>=200&&O.status<=299){if(this._waitForTotalLength)return;this._status=d.c.kBuffering}else{if(this._status=d.c.kError,!this._onError)throw new l.d("RangeLoader: Http code invalid, "+O.status+" "+O.statusText);this._onError(d.b.HTTP_STATUS_CODE_INVALID,{code:O.status,msg:O.statusText})}}},N.prototype._onProgress=function(U){if(this._status!==d.c.kError){if(this._contentLength===null){var O=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,O=!0;var z=U.total;this._internalAbort(),z!=null&z!==0&&(this._totalLength=z)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,O)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var ce=U.loaded-this._lastTimeLoaded;this._lastTimeLoaded=U.loaded,this._speedSampler.addBytes(ce)}},N.prototype._normalizeSpeed=function(U){var O=this._chunkSizeKBList,z=O.length-1,ce=0,be=0,Le=z;if(U<O[0])return O[0];for(;be<=Le;){if((ce=be+Math.floor((Le-be)/2))===z||U>=O[ce]&&U<O[ce+1])return O[ce];O[ce]<U?be=ce+1:Le=ce-1}},N.prototype._onLoad=function(U){if(this._status!==d.c.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var O=this._speedSampler.lastSecondKBps;if(O===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(O=this._speedSampler.currentKBps)),O!==0){var z=this._normalizeSpeed(O);this._currentSpeedNormalized!==z&&(this._currentSpeedNormalized=z,this._currentChunkSizeKB=z)}var ce=U.target.response,be=this._range.from+this._receivedLength;this._receivedLength+=ce.byteLength;var Le=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():Le=!0,this._onDataArrival&&this._onDataArrival(ce,be,this._receivedLength),Le&&(this._status=d.c.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},N.prototype._onXhrError=function(U){this._status=d.c.kError;var O=0,z=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(O=d.b.EARLY_EOF,z={code:-1,msg:"RangeLoader meet Early-Eof"}):(O=d.b.EXCEPTION,z={code:-1,msg:U.constructor.name+" "+U.type}),!this._onError)throw new l.d(z.msg);this._onError(O,z)},N}(d.a),P=function(){var W=function(N,U){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,z){O.__proto__=z}||function(O,z){for(var ce in z)Object.prototype.hasOwnProperty.call(z,ce)&&(O[ce]=z[ce])})(N,U)};return function(N,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function O(){this.constructor=N}W(N,U),N.prototype=U===null?Object.create(U):(O.prototype=U.prototype,new O)}}(),M=function(W){function N(){var U=W.call(this,"websocket-loader")||this;return U.TAG="WebSocketLoader",U._needStash=!0,U._ws=null,U._requestAbort=!1,U._receivedLength=0,U}return P(N,W),N.isSupported=function(){try{return self.WebSocket!==void 0}catch{return!1}},N.prototype.destroy=function(){this._ws&&this.abort(),W.prototype.destroy.call(this)},N.prototype.open=function(U){try{var O=this._ws=new self.WebSocket(U.url);O.binaryType="arraybuffer",O.onopen=this._onWebSocketOpen.bind(this),O.onclose=this._onWebSocketClose.bind(this),O.onmessage=this._onWebSocketMessage.bind(this),O.onerror=this._onWebSocketError.bind(this),this._status=d.c.kConnecting}catch(ce){this._status=d.c.kError;var z={code:ce.code,msg:ce.message};if(!this._onError)throw new l.d(z.msg);this._onError(d.b.EXCEPTION,z)}},N.prototype.abort=function(){var U=this._ws;!U||U.readyState!==0&&U.readyState!==1||(this._requestAbort=!0,U.close()),this._ws=null,this._status=d.c.kComplete},N.prototype._onWebSocketOpen=function(U){this._status=d.c.kBuffering},N.prototype._onWebSocketClose=function(U){this._requestAbort!==!0?(this._status=d.c.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},N.prototype._onWebSocketMessage=function(U){var O=this;if(U.data instanceof ArrayBuffer)this._dispatchArrayBuffer(U.data);else if(U.data instanceof Blob){var z=new FileReader;z.onload=function(){O._dispatchArrayBuffer(z.result)},z.readAsArrayBuffer(U.data)}else{this._status=d.c.kError;var ce={code:-1,msg:"Unsupported WebSocket message type: "+U.data.constructor.name};if(!this._onError)throw new l.d(ce.msg);this._onError(d.b.EXCEPTION,ce)}},N.prototype._dispatchArrayBuffer=function(U){var O=U,z=this._receivedLength;this._receivedLength+=O.byteLength,this._onDataArrival&&this._onDataArrival(O,z,this._receivedLength)},N.prototype._onWebSocketError=function(U){this._status=d.c.kError;var O={code:U.code,msg:U.message};if(!this._onError)throw new l.d(O.msg);this._onError(d.b.EXCEPTION,O)},N}(d.a),G=function(){function W(N){this._zeroStart=N||!1}return W.prototype.getConfig=function(N,U){var O={};if(U.from!==0||U.to!==-1){var z=void 0;z=U.to!==-1?"bytes=".concat(U.from.toString(),"-").concat(U.to.toString()):"bytes=".concat(U.from.toString(),"-"),O.Range=z}else this._zeroStart&&(O.Range="bytes=0-");return{url:N,headers:O}},W.prototype.removeURLParameters=function(N){return N},W}(),Z=function(){function W(N,U){this._startName=N,this._endName=U}return W.prototype.getConfig=function(N,U){var O=N;if(U.from!==0||U.to!==-1){var z=!0;O.indexOf("?")===-1&&(O+="?",z=!1),z&&(O+="&"),O+="".concat(this._startName,"=").concat(U.from.toString()),U.to!==-1&&(O+="&".concat(this._endName,"=").concat(U.to.toString()))}return{url:O,headers:{}}},W.prototype.removeURLParameters=function(N){var U=N.split("?")[0],O=void 0,z=N.indexOf("?");z!==-1&&(O=N.substring(z+1));var ce="";if(O!=null&&O.length>0)for(var be=O.split("&"),Le=0;Le<be.length;Le++){var xe=be[Le].split("="),ve=Le>0;xe[0]!==this._startName&&xe[0]!==this._endName&&(ve&&(ce+="&"),ce+=be[Le])}return ce.length===0?U:U+"?"+ce},W}(),le=function(){function W(N,U,O){this.TAG="IOController",this._config=U,this._extraData=O,this._stashInitialSize=65536,U.stashInitialSize!=null&&U.stashInitialSize>0&&(this._stashInitialSize=U.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=Math.max(this._stashSize,3145728),this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,U.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=N,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(N.url),this._refTotalLength=N.filesize?N.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new o,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return W.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},W.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},W.prototype.isPaused=function(){return this._paused},Object.defineProperty(W.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"extraData",{get:function(){return this._extraData},set:function(N){this._extraData=N},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(N){this._onDataArrival=N},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(N){this._onSeeked=N},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onError",{get:function(){return this._onError},set:function(N){this._onError=N},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onComplete",{get:function(){return this._onComplete},set:function(N){this._onComplete=N},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(N){this._onRedirect=N},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(N){this._onRecoveredEarlyEof=N},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"currentSpeed",{get:function(){return this._loaderClass===I?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),W.prototype._selectSeekHandler=function(){var N=this._config;if(N.seekType==="range")this._seekHandler=new G(this._config.rangeLoadZeroStart);else if(N.seekType==="param"){var U=N.seekParamStart||"bstart",O=N.seekParamEnd||"bend";this._seekHandler=new Z(U,O)}else{if(N.seekType!=="custom")throw new l.b("Invalid seekType in config: ".concat(N.seekType));if(typeof N.customSeekHandler!="function")throw new l.b("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new N.customSeekHandler}},W.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=M;else if(p.isSupported())this._loaderClass=p;else if(y.isSupported())this._loaderClass=y;else{if(!I.isSupported())throw new l.d("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=I}},W.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},W.prototype.open=function(N){this._currentRange={from:0,to:-1},N&&(this._currentRange.from=N),this._speedSampler.reset(),N||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},W.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},W.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},W.prototype.resume=function(){if(this._paused){this._paused=!1;var N=this._resumeFrom;this._resumeFrom=0,this._internalSeek(N,!0)}},W.prototype.seek=function(N){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(N,!0)},W.prototype._internalSeek=function(N,U){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(U),this._loader.destroy(),this._loader=null;var O={from:N,to:-1};this._currentRange={from:O.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,O),this._onSeeked&&this._onSeeked()},W.prototype.updateUrl=function(N){if(!N||typeof N!="string"||N.length===0)throw new l.b("Url must be a non-empty string!");this._dataSource.url=N},W.prototype._expandBuffer=function(N){for(var U=this._stashSize;U+1048576<N;)U*=2;if((U+=1048576)!==this._bufferSize){var O=new ArrayBuffer(U);if(this._stashUsed>0){var z=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(O,0,U).set(z,0)}this._stashBuffer=O,this._bufferSize=U}},W.prototype._normalizeSpeed=function(N){var U=this._speedNormalizeList,O=U.length-1,z=0,ce=0,be=O;if(N<U[0])return U[0];for(;ce<=be;){if((z=ce+Math.floor((be-ce)/2))===O||N>=U[z]&&N<U[z+1])return U[z];U[z]<N?ce=z+1:be=z-1}},W.prototype._adjustStashSize=function(N){var U=0;(U=this._config.isLive?N/8:N<512?N:N>=512&&N<=1024?Math.floor(1.5*N):2*N)>8192&&(U=8192);var O=1024*U+1048576;this._bufferSize<O&&this._expandBuffer(O),this._stashSize=1024*U},W.prototype._dispatchChunks=function(N,U){return this._currentRange.to=U+N.byteLength-1,this._onDataArrival(N,U)},W.prototype._onURLRedirect=function(N){this._redirectedURL=N,this._onRedirect&&this._onRedirect(N)},W.prototype._onContentLengthKnown=function(N){N&&this._fullRequestFlag&&(this._totalLength=N,this._fullRequestFlag=!1)},W.prototype._onLoaderChunkArrival=function(N,U,O){if(!this._onDataArrival)throw new l.a("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(N.byteLength);var z=this._speedSampler.lastSecondKBps;if(z!==0){var ce=this._normalizeSpeed(z);this._speedNormalized!==ce&&(this._speedNormalized=ce,this._adjustStashSize(ce))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=U),this._stashUsed+N.byteLength<=this._stashSize)(xe=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(N),this._stashUsed),this._stashUsed+=N.byteLength;else if(xe=new Uint8Array(this._stashBuffer,0,this._bufferSize),this._stashUsed>0){var be=this._stashBuffer.slice(0,this._stashUsed);(ve=this._dispatchChunks(be,this._stashByteStart))<be.byteLength?ve>0&&(ze=new Uint8Array(be,ve),xe.set(ze,0),this._stashUsed=ze.byteLength,this._stashByteStart+=ve):(this._stashUsed=0,this._stashByteStart+=ve),this._stashUsed+N.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+N.byteLength),xe=new Uint8Array(this._stashBuffer,0,this._bufferSize)),xe.set(new Uint8Array(N),this._stashUsed),this._stashUsed+=N.byteLength}else(ve=this._dispatchChunks(N,U))<N.byteLength&&((Le=N.byteLength-ve)>this._bufferSize&&(this._expandBuffer(Le),xe=new Uint8Array(this._stashBuffer,0,this._bufferSize)),xe.set(new Uint8Array(N,ve),0),this._stashUsed+=Le,this._stashByteStart=U+ve);else if(this._stashUsed===0){var Le;(ve=this._dispatchChunks(N,U))<N.byteLength&&((Le=N.byteLength-ve)>this._bufferSize&&this._expandBuffer(Le),(xe=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(N,ve),0),this._stashUsed+=Le,this._stashByteStart=U+ve)}else{var xe,ve;if(this._stashUsed+N.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+N.byteLength),(xe=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(N),this._stashUsed),this._stashUsed+=N.byteLength,(ve=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&ve>0){var ze=new Uint8Array(this._stashBuffer,ve);xe.set(ze,0)}this._stashUsed-=ve,this._stashByteStart+=ve}}},W.prototype._flushStashBuffer=function(N){if(this._stashUsed>0){var U=this._stashBuffer.slice(0,this._stashUsed),O=this._dispatchChunks(U,this._stashByteStart),z=U.byteLength-O;if(O<U.byteLength){if(!N){if(O>0){var ce=new Uint8Array(this._stashBuffer,0,this._bufferSize),be=new Uint8Array(U,O);ce.set(be,0),this._stashUsed=be.byteLength,this._stashByteStart+=O}return 0}r.a.w(this.TAG,"".concat(z," bytes unconsumed data remain when flush buffer, dropped"))}return this._stashUsed=0,this._stashByteStart=0,z}return 0},W.prototype._onLoaderComplete=function(N,U){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},W.prototype._onLoaderError=function(N,U){switch(r.a.e(this.TAG,"Loader error, code = ".concat(U.code,", msg = ").concat(U.msg)),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,N=d.b.UNRECOVERABLE_EARLY_EOF),N){case d.b.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var O=this._currentRange.to+1;return void(O<this._totalLength&&(r.a.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(O,!1)))}N=d.b.UNRECOVERABLE_EARLY_EOF;break;case d.b.UNRECOVERABLE_EARLY_EOF:case d.b.CONNECTING_TIMEOUT:case d.b.HTTP_STATUS_CODE_INVALID:case d.b.EXCEPTION:}if(!this._onError)throw new l.d("IOException: "+U.msg);this._onError(N,U)},W}();i.a=le},function(t,i,n){var a=n(10),r=n.n(a),o=n(0),d=n(5),c=n(13);function l(b,S,k){var R=b;if(S+k<R.length){for(;k--;)if((192&R[++S])!=128)return!1;return!0}return!1}var f,p=function(b){for(var S=[],k=b,R=0,w=b.length;R<w;)if(k[R]<128)S.push(String.fromCharCode(k[R])),++R;else{if(!(k[R]<192)){if(k[R]<224){if(l(k,R,1)&&($=(31&k[R])<<6|63&k[R+1])>=128){S.push(String.fromCharCode(65535&$)),R+=2;continue}}else if(k[R]<240){if(l(k,R,2)&&($=(15&k[R])<<12|(63&k[R+1])<<6|63&k[R+2])>=2048&&(63488&$)!=55296){S.push(String.fromCharCode(65535&$)),R+=3;continue}}else if(k[R]<248){var $;if(l(k,R,3)&&($=(7&k[R])<<18|(63&k[R+1])<<12|(63&k[R+2])<<6|63&k[R+3])>65536&&$<1114112){$-=65536,S.push(String.fromCharCode($>>>10|55296)),S.push(String.fromCharCode(1023&$|56320)),R+=4;continue}}}S.push("ÔøΩ"),++R}return S.join("")},g=n(3),y=(f=new ArrayBuffer(2),new DataView(f).setInt16(0,256,!0),new Int16Array(f)[0]===256),A=function(){function b(){}return b.parseScriptData=function(S,k,R){var w={};try{var $=b.parseValue(S,k,R),X=b.parseValue(S,k+$.size,R-$.size);w[$.data]=X.data}catch(ie){o.a.e("AMF",ie.toString())}return w},b.parseObject=function(S,k,R){if(R<3)throw new g.a("Data not enough when parse ScriptDataObject");var w=b.parseString(S,k,R),$=b.parseValue(S,k+w.size,R-w.size),X=$.objectEnd;return{data:{name:w.data,value:$.data},size:w.size+$.size,objectEnd:X}},b.parseVariable=function(S,k,R){return b.parseObject(S,k,R)},b.parseString=function(S,k,R){if(R<2)throw new g.a("Data not enough when parse String");var w=new DataView(S,k,R).getUint16(0,!y);return{data:w>0?p(new Uint8Array(S,k+2,w)):"",size:2+w}},b.parseLongString=function(S,k,R){if(R<4)throw new g.a("Data not enough when parse LongString");var w=new DataView(S,k,R).getUint32(0,!y);return{data:w>0?p(new Uint8Array(S,k+4,w)):"",size:4+w}},b.parseDate=function(S,k,R){if(R<10)throw new g.a("Data size invalid when parse Date");var w=new DataView(S,k,R),$=w.getFloat64(0,!y),X=w.getInt16(8,!y);return{data:new Date($+=60*X*1e3),size:10}},b.parseValue=function(S,k,R){if(R<1)throw new g.a("Data not enough when parse Value");var w,$=new DataView(S,k,R),X=1,ie=$.getUint8(0),se=!1;try{switch(ie){case 0:w=$.getFloat64(1,!y),X+=8;break;case 1:w=!!$.getUint8(1),X+=1;break;case 2:var me=b.parseString(S,k+1,R-1);w=me.data,X+=me.size;break;case 3:w={};var ge=0;for((16777215&$.getUint32(R-4,!y))==9&&(ge=3);X<R-4;){var Re=b.parseObject(S,k+X,R-X-ge);if(Re.objectEnd)break;w[Re.data.name]=Re.data.value,X+=Re.size}X<=R-3&&(16777215&$.getUint32(X-1,!y))===9&&(X+=3);break;case 8:for(w={},X+=4,ge=0,(16777215&$.getUint32(R-4,!y))==9&&(ge=3);X<R-8;){var Ge=b.parseVariable(S,k+X,R-X-ge);if(Ge.objectEnd)break;w[Ge.data.name]=Ge.data.value,X+=Ge.size}X<=R-3&&(16777215&$.getUint32(X-1,!y))===9&&(X+=3);break;case 9:w=void 0,X=1,se=!0;break;case 10:w=[];var Je=$.getUint32(1,!y);X+=4;for(var st=0;st<Je;st++){var xt=b.parseValue(S,k+X,R-X);w.push(xt.data),X+=xt.size}break;case 11:var qe=b.parseDate(S,k+1,R-1);w=qe.data,X+=qe.size;break;case 12:var bt=b.parseString(S,k+1,R-1);w=bt.data,X+=bt.size;break;default:X=R,o.a.w("AMF","Unsupported AMF value type "+ie)}}catch(St){o.a.e("AMF",St.toString())}return{data:w,size:X,objectEnd:se}},b}(),C=n(23),I=n(6),P=n(15);function M(b){return b.byteOffset%2==0&&b.byteLength%2==0}function G(b){return b.byteOffset%4==0&&b.byteLength%4==0}function Z(b,S){for(var k=0;k<b.length;k++)if(b[k]!==S[k])return!1;return!0}var le=function(b,S){return b.byteLength===S.byteLength&&(G(b)&&G(S)?function(k,R){return Z(new Uint32Array(k.buffer,k.byteOffset,k.byteLength/4),new Uint32Array(R.buffer,R.byteOffset,R.byteLength/4))}(b,S):M(b)&&M(S)?function(k,R){return Z(new Uint16Array(k.buffer,k.byteOffset,k.byteLength/2),new Uint16Array(R.buffer,R.byteOffset,R.byteLength/2))}(b,S):function(k,R){return Z(k,R)}(b,S))},W=n(16),N=n(8),U=function(){function b(S,k){this.TAG="FLVDemuxer",this._config=k,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=S.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=S.hasAudioTrack,this._hasVideo=S.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new c.a,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var R=new ArrayBuffer(2);return new DataView(R).setInt16(0,256,!0),new Int16Array(R)[0]===256}()}return b.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},b.probe=function(S){var k=new Uint8Array(S);if(k.byteLength<9)return{needMoreData:!0};var R={match:!1};if(k[0]!==70||k[1]!==76||k[2]!==86||k[3]!==1)return R;var w,$,X=(4&k[4])>>>2!=0,ie=(1&k[4])!=0,se=(w=k)[$=5]<<24|w[$+1]<<16|w[$+2]<<8|w[$+3];return se<9?R:{match:!0,consumed:se,dataOffset:se,hasAudioTrack:X,hasVideoTrack:ie}},b.prototype.bindDataSource=function(S){return S.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(b.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(S){this._onTrackMetadata=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(S){this._onMediaInfo=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(S){this._onMetaDataArrived=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(S){this._onScriptDataArrived=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onError",{get:function(){return this._onError},set:function(S){this._onError=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(S){this._onDataAvailable=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(S){this._timestampBase=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"overridedDuration",{get:function(){return this._duration},set:function(S){this._durationOverrided=!0,this._duration=S,this._mediaInfo.duration=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"overridedHasAudio",{set:function(S){this._hasAudioFlagOverrided=!0,this._hasAudio=S,this._mediaInfo.hasAudio=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"overridedHasVideo",{set:function(S){this._hasVideoFlagOverrided=!0,this._hasVideo=S,this._mediaInfo.hasVideo=S},enumerable:!1,configurable:!0}),b.prototype.resetMediaInfo=function(){this._mediaInfo=new c.a},b.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},b.prototype.parseChunks=function(S,k){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new g.a("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var R=0,w=this._littleEndian;if(k===0){if(!(S.byteLength>13))return 0;R=b.probe(S).dataOffset}for(this._firstParse&&(this._firstParse=!1,k+R!==this._dataOffset&&o.a.w(this.TAG,"First time parsing but chunk byteStart invalid!"),($=new DataView(S,R)).getUint32(0,!w)!==0&&o.a.w(this.TAG,"PrevTagSize0 !== 0 !!!"),R+=4);R<S.byteLength;){this._dispatch=!0;var $=new DataView(S,R);if(R+11+4>S.byteLength)break;var X=$.getUint8(0),ie=16777215&$.getUint32(0,!w);if(R+11+ie+4>S.byteLength)break;if(X===8||X===9||X===18){var se=$.getUint8(4),me=$.getUint8(5),ge=$.getUint8(6)|me<<8|se<<16|$.getUint8(7)<<24;16777215&$.getUint32(7,!w)&&o.a.w(this.TAG,"Meet tag which has StreamID != 0!");var Re=R+11;switch(X){case 8:this._parseAudioData(S,Re,ie,ge);break;case 9:this._parseVideoData(S,Re,ie,ge,k+R);break;case 18:this._parseScriptData(S,Re,ie)}var Ge=$.getUint32(11+ie,!w);Ge!==11+ie&&o.a.w(this.TAG,"Invalid PrevTagSize ".concat(Ge)),R+=11+ie+4}else o.a.w(this.TAG,"Unsupported tag type ".concat(X,", skipped")),R+=11+ie+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),R},b.prototype._parseScriptData=function(S,k,R){var w=A.parseScriptData(S,k,R);if(w.hasOwnProperty("onMetaData")){if(w.onMetaData==null||typeof w.onMetaData!="object")return void o.a.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&o.a.w(this.TAG,"Found another onMetaData tag!"),this._metadata=w;var $=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},$)),typeof $.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=$.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof $.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=$.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof $.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=$.audiodatarate),typeof $.videodatarate=="number"&&(this._mediaInfo.videoDataRate=$.videodatarate),typeof $.width=="number"&&(this._mediaInfo.width=$.width),typeof $.height=="number"&&(this._mediaInfo.height=$.height),typeof $.duration=="number"){if(!this._durationOverrided){var X=Math.floor($.duration*this._timescale);this._duration=X,this._mediaInfo.duration=X}}else this._mediaInfo.duration=0;if(typeof $.framerate=="number"){var ie=Math.floor(1e3*$.framerate);if(ie>0){var se=ie/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=se,this._referenceFrameRate.fps_num=ie,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=se}}if(typeof $.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var me=$.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(me),$.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=$,o.a.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(w).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},w))},b.prototype._parseKeyframesIndex=function(S){for(var k=[],R=[],w=1;w<S.times.length;w++){var $=this._timestampBase+Math.floor(1e3*S.times[w]);k.push($),R.push(S.filepositions[w])}return{times:k,filepositions:R}},b.prototype._parseAudioData=function(S,k,R,w){if(R<=1)o.a.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(this._hasAudioFlagOverrided!==!0||this._hasAudio!==!1){this._littleEndian;var $=new DataView(S,k,R).getUint8(0),X=$>>>4;if(X!==9)if(X===2||X===10){var ie=0,se=(12&$)>>>2;if(se>=0&&se<=4){ie=this._flvSoundRateTable[se];var me=1&$,ge=this._audioMetadata,Re=this._audioTrack;if(ge||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(ge=this._audioMetadata={}).type="audio",ge.id=Re.id,ge.timescale=this._timescale,ge.duration=this._duration,ge.audioSampleRate=ie,ge.channelCount=me===0?1:2),X===10){var Ge=this._parseAACAudioData(S,k+1,R-1);if(Ge==null)return;if(Ge.packetType===0){if(ge.config){if(le(Ge.data.config,ge.config))return;o.a.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment")}var Je=Ge.data;ge.audioSampleRate=Je.samplingRate,ge.channelCount=Je.channelCount,ge.codec=Je.codec,ge.originalCodec=Je.originalCodec,ge.config=Je.config,ge.refSampleDuration=1024/ge.audioSampleRate*ge.timescale,o.a.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",ge),(qe=this._mediaInfo).audioCodec=ge.originalCodec,qe.audioSampleRate=ge.audioSampleRate,qe.audioChannelCount=ge.channelCount,qe.hasVideo?qe.videoCodec!=null&&(qe.mimeType='video/x-flv; codecs="'+qe.videoCodec+","+qe.audioCodec+'"'):qe.mimeType='video/x-flv; codecs="'+qe.audioCodec+'"',qe.isComplete()&&this._onMediaInfo(qe)}else if(Ge.packetType===1){var st=this._timestampBase+w,xt={unit:Ge.data,length:Ge.data.byteLength,dts:st,pts:st};Re.samples.push(xt),Re.length+=Ge.data.length}else o.a.e(this.TAG,"Flv: Unsupported AAC data type ".concat(Ge.packetType))}else if(X===2){if(!ge.codec){var qe;if((Je=this._parseMP3AudioData(S,k+1,R-1,!0))==null)return;ge.audioSampleRate=Je.samplingRate,ge.channelCount=Je.channelCount,ge.codec=Je.codec,ge.originalCodec=Je.originalCodec,ge.refSampleDuration=1152/ge.audioSampleRate*ge.timescale,o.a.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",ge),(qe=this._mediaInfo).audioCodec=ge.codec,qe.audioSampleRate=ge.audioSampleRate,qe.audioChannelCount=ge.channelCount,qe.audioDataRate=Je.bitRate,qe.hasVideo?qe.videoCodec!=null&&(qe.mimeType='video/x-flv; codecs="'+qe.videoCodec+","+qe.audioCodec+'"'):qe.mimeType='video/x-flv; codecs="'+qe.audioCodec+'"',qe.isComplete()&&this._onMediaInfo(qe)}var bt=this._parseMP3AudioData(S,k+1,R-1,!1);if(bt==null)return;st=this._timestampBase+w;var St={unit:bt,length:bt.byteLength,dts:st,pts:st};Re.samples.push(St),Re.length+=bt.length}}else this._onError(I.a.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+se)}else this._onError(I.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+X);else{if(R<=5)return void o.a.w(this.TAG,"Flv: Invalid audio packet, missing AudioFourCC in Ehnanced FLV payload!");var Ue=15&$,Vt=String.fromCharCode.apply(String,new Uint8Array(S,k,R).slice(1,5));switch(Vt){case"Opus":this._parseOpusAudioPacket(S,k+5,R-5,w,Ue);break;case"fLaC":this._parseFlacAudioPacket(S,k+5,R-5,w,Ue);break;default:this._onError(I.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec: "+Vt)}}}},b.prototype._parseAACAudioData=function(S,k,R){if(!(R<=1)){var w={},$=new Uint8Array(S,k,R);return w.packetType=$[0],$[0]===0?w.data=this._parseAACAudioSpecificConfig(S,k+1,R-1):w.data=$.subarray(1),w}o.a.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},b.prototype._parseAACAudioSpecificConfig=function(S,k,R){var w,$,X=new Uint8Array(S,k,R),ie=null,se=0,me=null;if(se=w=X[0]>>>3,($=(7&X[0])<<1|X[1]>>>7)<0||$>=this._mpegSamplingRates.length)this._onError(I.a.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var ge=this._mpegSamplingRates[$],Re=(120&X[1])>>>3;if(!(Re<0||Re>=8)){se===5&&(me=(7&X[1])<<1|X[2]>>>7,(124&X[2])>>>2);var Ge=self.navigator.userAgent.toLowerCase();return Ge.indexOf("firefox")!==-1?$>=6?(se=5,ie=new Array(4),me=$-3):(se=2,ie=new Array(2),me=$):Ge.indexOf("android")!==-1?(se=2,ie=new Array(2),me=$):(se=5,me=$,ie=new Array(4),$>=6?me=$-3:Re===1&&(se=2,ie=new Array(2),me=$)),ie[0]=se<<3,ie[0]|=(15&$)>>>1,ie[1]=(15&$)<<7,ie[1]|=(15&Re)<<3,se===5&&(ie[1]|=(15&me)>>>1,ie[2]=(1&me)<<7,ie[2]|=8,ie[3]=0),{config:ie,samplingRate:ge,channelCount:Re,codec:"mp4a.40."+se,originalCodec:"mp4a.40."+w}}this._onError(I.a.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},b.prototype._parseMP3AudioData=function(S,k,R,w){if(!(R<4)){this._littleEndian;var $=new Uint8Array(S,k,R),X=null;if(w){if($[0]!==255)return;var ie=$[1]>>>3&3,se=(6&$[1])>>1,me=(240&$[2])>>>4,ge=(12&$[2])>>>2,Re=($[3]>>>6&3)!==3?2:1,Ge=0,Je=0;switch(ie){case 0:Ge=this._mpegAudioV25SampleRateTable[ge];break;case 2:Ge=this._mpegAudioV20SampleRateTable[ge];break;case 3:Ge=this._mpegAudioV10SampleRateTable[ge]}switch(se){case 1:me<this._mpegAudioL3BitRateTable.length&&(Je=this._mpegAudioL3BitRateTable[me]);break;case 2:me<this._mpegAudioL2BitRateTable.length&&(Je=this._mpegAudioL2BitRateTable[me]);break;case 3:me<this._mpegAudioL1BitRateTable.length&&(Je=this._mpegAudioL1BitRateTable[me])}X={bitRate:Je,samplingRate:Ge,channelCount:Re,codec:"mp3",originalCodec:"mp3"}}else X=$;return X}o.a.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},b.prototype._parseOpusAudioPacket=function(S,k,R,w,$){if($===0)this._parseOpusSequenceHeader(S,k,R);else if($===1)this._parseOpusAudioData(S,k,R,w);else if($!==2)return void this._onError(I.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat($))},b.prototype._parseOpusSequenceHeader=function(S,k,R){if(R<=16)o.a.w(this.TAG,"Flv: Invalid OpusSequenceHeader, lack of data!");else{var w=this._audioMetadata,$=this._audioTrack;w||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(w=this._audioMetadata={}).type="audio",w.id=$.id,w.timescale=this._timescale,w.duration=this._duration);var X=new DataView(S,k,R);X.setUint8(8,0);var ie=X.getUint8(9);X.setUint16(10,X.getUint16(10,!0),!1);var se=X.getUint32(12,!0);X.setUint32(12,X.getUint32(12,!0),!1);var me={config:new Uint8Array(S,k+8,R-8),channelCount:ie,samplingFrequence:se,codec:"opus",originalCodec:"opus"};if(w.config){if(le(me.config,w.config))return;o.a.w(this.TAG,"OpusSequenceHeader has been changed, re-generate initialization segment")}w.audioSampleRate=me.samplingFrequence,w.channelCount=me.channelCount,w.codec=me.codec,w.originalCodec=me.originalCodec,w.config=me.config,w.refSampleDuration=20,o.a.v(this.TAG,"Parsed OpusSequenceHeader"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",w);var ge=this._mediaInfo;ge.audioCodec=w.originalCodec,ge.audioSampleRate=w.audioSampleRate,ge.audioChannelCount=w.channelCount,ge.hasVideo?ge.videoCodec!=null&&(ge.mimeType='video/x-flv; codecs="'+ge.videoCodec+","+ge.audioCodec+'"'):ge.mimeType='video/x-flv; codecs="'+ge.audioCodec+'"',ge.isComplete()&&this._onMediaInfo(ge)}},b.prototype._parseOpusAudioData=function(S,k,R,w){var $=this._audioTrack,X=new Uint8Array(S,k,R),ie=this._timestampBase+w,se={unit:X,length:X.byteLength,dts:ie,pts:ie};$.samples.push(se),$.length+=X.length},b.prototype._parseFlacAudioPacket=function(S,k,R,w,$){if($===0)this._parseFlacSequenceHeader(S,k,R);else if($===1)this._parseFlacAudioData(S,k,R,w);else if($!==2)return void this._onError(I.a.FORMAT_ERROR,"Flv: Invalid Flac audio packet type ".concat($))},b.prototype._parseFlacSequenceHeader=function(S,k,R){var w=this._audioMetadata,$=this._audioTrack;w||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(w=this._audioMetadata={}).type="audio",w.id=$.id,w.timescale=this._timescale,w.duration=this._duration);var X=new Uint8Array(S,k+4,R-4),ie=new N.a(X),se=ie.readBits(16),me=ie.readBits(16),ge=me===se?me:null;ie.readBits(24),ie.readBits(24);var Re=ie.readBits(20),Ge=ie.readBits(3)+1,Je=ie.readBits(5)+1;ie.destroy();var st=new Uint8Array(X.byteLength+4);st.set(X,4),st[0]=128,st[1]=X.byteLength>>>16&255,st[2]=X.byteLength>>>8&255,st[3]=X.byteLength>>>0&255;var xt={config:st,channelCount:Ge,samplingFrequence:Re,sampleSize:Je,codec:"flac",originalCodec:"flac"};if(w.config){if(le(xt.config,w.config))return;o.a.w(this.TAG,"FlacSequenceHeader has been changed, re-generate initialization segment")}w.audioSampleRate=xt.samplingFrequence,w.channelCount=xt.channelCount,w.sampleSize=xt.sampleSize,w.codec=xt.codec,w.originalCodec=xt.originalCodec,w.config=xt.config,w.refSampleDuration=ge!=null?1e3*ge/xt.samplingFrequence:null,o.a.v(this.TAG,"Parsed FlacSequenceHeader"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",w);var qe=this._mediaInfo;qe.audioCodec=w.originalCodec,qe.audioSampleRate=w.audioSampleRate,qe.audioChannelCount=w.channelCount,qe.hasVideo?qe.videoCodec!=null&&(qe.mimeType='video/x-flv; codecs="'+qe.videoCodec+","+qe.audioCodec+'"'):qe.mimeType='video/x-flv; codecs="'+qe.audioCodec+'"',qe.isComplete()&&this._onMediaInfo(qe)},b.prototype._parseFlacAudioData=function(S,k,R,w){var $=this._audioTrack,X=new Uint8Array(S,k,R),ie=this._timestampBase+w,se={unit:X,length:X.byteLength,dts:ie,pts:ie};$.samples.push(se),$.length+=X.length},b.prototype._parseVideoData=function(S,k,R,w,$){if(R<=1)o.a.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(this._hasVideoFlagOverrided!==!0||this._hasVideo!==!1){var X=new Uint8Array(S,k,R)[0],ie=(112&X)>>>4;if(128&X){var se=15&X,me=String.fromCharCode.apply(String,new Uint8Array(S,k,R).slice(1,5));if(me==="hvc1")this._parseEnhancedHEVCVideoPacket(S,k+5,R-5,w,$,ie,se);else{if(me!=="av01")return void this._onError(I.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(me));this._parseEnhancedAV1VideoPacket(S,k+5,R-5,w,$,ie,se)}}else{var ge=15&X;if(ge===7)this._parseAVCVideoPacket(S,k+1,R-1,w,$,ie);else{if(ge!==12)return void this._onError(I.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(ge));this._parseHEVCVideoPacket(S,k+1,R-1,w,$,ie)}}}},b.prototype._parseAVCVideoPacket=function(S,k,R,w,$,X){if(R<4)o.a.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var ie=this._littleEndian,se=new DataView(S,k,R),me=se.getUint8(0),ge=(16777215&se.getUint32(0,!ie))<<8>>8;if(me===0)this._parseAVCDecoderConfigurationRecord(S,k+4,R-4);else if(me===1)this._parseAVCVideoData(S,k+4,R-4,w,$,X,ge);else if(me!==2)return void this._onError(I.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(me))}},b.prototype._parseHEVCVideoPacket=function(S,k,R,w,$,X){if(R<4)o.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var ie=this._littleEndian,se=new DataView(S,k,R),me=se.getUint8(0),ge=(16777215&se.getUint32(0,!ie))<<8>>8;if(me===0)this._parseHEVCDecoderConfigurationRecord(S,k+4,R-4);else if(me===1)this._parseHEVCVideoData(S,k+4,R-4,w,$,X,ge);else if(me!==2)return void this._onError(I.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(me))}},b.prototype._parseEnhancedHEVCVideoPacket=function(S,k,R,w,$,X,ie){var se=this._littleEndian,me=new DataView(S,k,R);if(ie===0)this._parseHEVCDecoderConfigurationRecord(S,k,R);else if(ie===1){var ge=(4294967040&me.getUint32(0,!se))>>8;this._parseHEVCVideoData(S,k+3,R-3,w,$,X,ge)}else if(ie===3)this._parseHEVCVideoData(S,k,R,w,$,X,0);else if(ie!==2)return void this._onError(I.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(ie))},b.prototype._parseEnhancedAV1VideoPacket=function(S,k,R,w,$,X,ie){if(this._littleEndian,ie===0)this._parseAV1CodecConfigurationRecord(S,k,R);else if(ie===1)this._parseAV1VideoData(S,k,R,w,$,X,0);else{if(ie===5)return void this._onError(I.a.FORMAT_ERROR,"Flv: Not Supported MP2T AV1 video packet type ".concat(ie));if(ie!==2)return void this._onError(I.a.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(ie))}},b.prototype._parseAVCDecoderConfigurationRecord=function(S,k,R){if(R<7)o.a.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var w=this._videoMetadata,$=this._videoTrack,X=this._littleEndian,ie=new DataView(S,k,R);if(w){if(w.avcc!==void 0){var se=new Uint8Array(S,k,R);if(le(se,w.avcc))return;o.a.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(w=this._videoMetadata={}).type="video",w.id=$.id,w.timescale=this._timescale,w.duration=this._duration;var me=ie.getUint8(0),ge=ie.getUint8(1);if(ie.getUint8(2),ie.getUint8(3),me===1&&ge!==0)if(this._naluLengthSize=1+(3&ie.getUint8(4)),this._naluLengthSize===3||this._naluLengthSize===4){var Re=31&ie.getUint8(5);if(Re!==0){Re>1&&o.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(Re));for(var Ge=6,Je=0;Je<Re;Je++){var st=ie.getUint16(Ge,!X);if(Ge+=2,st!==0){var xt=new Uint8Array(S,k+Ge,st);Ge+=st;var qe=C.a.parseSPS(xt);if(Je===0){w.codecWidth=qe.codec_size.width,w.codecHeight=qe.codec_size.height,w.presentWidth=qe.present_size.width,w.presentHeight=qe.present_size.height,w.profile=qe.profile_string,w.level=qe.level_string,w.bitDepth=qe.bit_depth,w.chromaFormat=qe.chroma_format,w.sarRatio=qe.sar_ratio,w.frameRate=qe.frame_rate,qe.frame_rate.fixed!==!1&&qe.frame_rate.fps_num!==0&&qe.frame_rate.fps_den!==0||(w.frameRate=this._referenceFrameRate);var bt=w.frameRate.fps_den,St=w.frameRate.fps_num;w.refSampleDuration=w.timescale*(bt/St);for(var Ue=xt.subarray(1,4),Vt="avc1.",Kt=0;Kt<3;Kt++){var It=Ue[Kt].toString(16);It.length<2&&(It="0"+It),Vt+=It}w.codec=Vt;var Yt=this._mediaInfo;Yt.width=w.codecWidth,Yt.height=w.codecHeight,Yt.fps=w.frameRate.fps,Yt.profile=w.profile,Yt.level=w.level,Yt.refFrames=qe.ref_frames,Yt.chromaFormat=qe.chroma_format_string,Yt.sarNum=w.sarRatio.width,Yt.sarDen=w.sarRatio.height,Yt.videoCodec=Vt,Yt.hasAudio?Yt.audioCodec!=null&&(Yt.mimeType='video/x-flv; codecs="'+Yt.videoCodec+","+Yt.audioCodec+'"'):Yt.mimeType='video/x-flv; codecs="'+Yt.videoCodec+'"',Yt.isComplete()&&this._onMediaInfo(Yt)}}}var Te=ie.getUint8(Ge);if(Te!==0){for(Te>1&&o.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(Te)),Ge++,Je=0;Je<Te;Je++)st=ie.getUint16(Ge,!X),Ge+=2,st!==0&&(Ge+=st);w.avcc=new Uint8Array(R),w.avcc.set(new Uint8Array(S,k,R),0),o.a.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",w)}else this._onError(I.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(I.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(I.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1));else this._onError(I.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},b.prototype._parseHEVCDecoderConfigurationRecord=function(S,k,R){if(R<22)o.a.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");else{var w=this._videoMetadata,$=this._videoTrack,X=this._littleEndian,ie=new DataView(S,k,R);if(w){if(w.hvcc!==void 0){var se=new Uint8Array(S,k,R);if(le(se,w.hvcc))return;o.a.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(w=this._videoMetadata={}).type="video",w.id=$.id,w.timescale=this._timescale,w.duration=this._duration;var me=ie.getUint8(0),ge=31&ie.getUint8(1);if(me!==0&&me!==1||ge===0)this._onError(I.a.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord");else if(this._naluLengthSize=1+(3&ie.getUint8(21)),this._naluLengthSize===3||this._naluLengthSize===4){for(var Re=ie.getUint8(22),Ge=0,Je=23;Ge<Re;Ge++){var st=63&ie.getUint8(Je+0),xt=ie.getUint16(Je+1,!X);Je+=3;for(var qe=0;qe<xt;qe++){var bt=ie.getUint16(Je+0,!X);if(qe===0)if(st===33){Je+=2;var St=new Uint8Array(S,k+Je,bt),Ue=P.a.parseSPS(St);w.codecWidth=Ue.codec_size.width,w.codecHeight=Ue.codec_size.height,w.presentWidth=Ue.present_size.width,w.presentHeight=Ue.present_size.height,w.profile=Ue.profile_string,w.level=Ue.level_string,w.bitDepth=Ue.bit_depth,w.chromaFormat=Ue.chroma_format,w.sarRatio=Ue.sar_ratio,w.frameRate=Ue.frame_rate,Ue.frame_rate.fixed!==!1&&Ue.frame_rate.fps_num!==0&&Ue.frame_rate.fps_den!==0||(w.frameRate=this._referenceFrameRate);var Vt=w.frameRate.fps_den,Kt=w.frameRate.fps_num;w.refSampleDuration=w.timescale*(Vt/Kt),w.codec=Ue.codec_mimetype;var It=this._mediaInfo;It.width=w.codecWidth,It.height=w.codecHeight,It.fps=w.frameRate.fps,It.profile=w.profile,It.level=w.level,It.refFrames=Ue.ref_frames,It.chromaFormat=Ue.chroma_format_string,It.sarNum=w.sarRatio.width,It.sarDen=w.sarRatio.height,It.videoCodec=Ue.codec_mimetype,It.hasAudio?It.audioCodec!=null&&(It.mimeType='video/x-flv; codecs="'+It.videoCodec+","+It.audioCodec+'"'):It.mimeType='video/x-flv; codecs="'+It.videoCodec+'"',It.isComplete()&&this._onMediaInfo(It),Je+=bt}else Je+=2+bt;else Je+=2+bt}}w.hvcc=new Uint8Array(R),w.hvcc.set(new Uint8Array(S,k,R),0),o.a.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",w)}else this._onError(I.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1))}},b.prototype._parseAV1CodecConfigurationRecord=function(S,k,R){if(R<4)o.a.w(this.TAG,"Flv: Invalid AV1CodecConfigurationRecord, lack of data!");else{var w=this._videoMetadata,$=this._videoTrack,X=(this._littleEndian,new DataView(S,k,R));w?w.av1c!==void 0&&o.a.w(this.TAG,"Found another AV1CodecConfigurationRecord!"):(this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(w=this._videoMetadata={}).type="video",w.id=$.id,w.timescale=this._timescale,w.duration=this._duration);var ie=127&X.getUint8(0);if(X.getUint8(1),X.getUint8(1),X.getUint8(2),ie===1){var se=W.a.parseOBUs(new Uint8Array(S,k+4,R-4));if(se!=null){w.profile=se.profile_string,w.level=se.level_string,w.bitDepth=se.bit_depth,w.chromaFormat=se.chroma_format,w.frameRate=se.frame_rate,se.frame_rate.fixed!==!1&&se.frame_rate.fps_num!==0&&se.frame_rate.fps_den!==0||(w.frameRate=this._referenceFrameRate);var me=w.frameRate.fps_den,ge=w.frameRate.fps_num;w.refSampleDuration=w.timescale*(me/ge),w.codec=se.codec_mimetype,w.extra=se;var Re=this._mediaInfo;Re.fps=w.frameRate.fps,Re.profile=w.profile,Re.level=w.level,Re.refFrames=se.ref_frames,Re.chromaFormat=se.chroma_format_string,Re.videoCodec=se.codec_mimetype,Re.hasAudio?Re.audioCodec!=null&&(Re.mimeType='video/x-flv; codecs="'+Re.videoCodec+","+Re.audioCodec+'"'):Re.mimeType='video/x-flv; codecs="'+Re.videoCodec+'"',Re.isComplete()&&this._onMediaInfo(Re),w.av1c=new Uint8Array(R),w.av1c.set(new Uint8Array(S,k,R),0),o.a.v(this.TAG,"Preparing AV1CodecConfigurationRecord")}else this._onError(I.a.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord")}else this._onError(I.a.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord")}},b.prototype._parseAVCVideoData=function(S,k,R,w,$,X,ie){for(var se=this._littleEndian,me=new DataView(S,k,R),ge=[],Re=0,Ge=0,Je=this._naluLengthSize,st=this._timestampBase+w,xt=X===1;Ge<R;){if(Ge+4>=R){o.a.w(this.TAG,"Malformed Nalu near timestamp ".concat(st,", offset = ").concat(Ge,", dataSize = ").concat(R));break}var qe=me.getUint32(Ge,!se);if(Je===3&&(qe>>>=8),qe>R-Je)return void o.a.w(this.TAG,"Malformed Nalus near timestamp ".concat(st,", NaluSize > DataSize!"));var bt=31&me.getUint8(Ge+Je);bt===5&&(xt=!0);var St=new Uint8Array(S,k+Ge,Je+qe),Ue={type:bt,data:St};ge.push(Ue),Re+=St.byteLength,Ge+=Je+qe}if(ge.length){var Vt=this._videoTrack,Kt={units:ge,length:Re,isKeyframe:xt,dts:st,cts:ie,pts:st+ie};xt&&(Kt.fileposition=$),Vt.samples.push(Kt),Vt.length+=Re}},b.prototype._parseHEVCVideoData=function(S,k,R,w,$,X,ie){for(var se=this._littleEndian,me=new DataView(S,k,R),ge=[],Re=0,Ge=0,Je=this._naluLengthSize,st=this._timestampBase+w,xt=X===1;Ge<R;){if(Ge+4>=R){o.a.w(this.TAG,"Malformed Nalu near timestamp ".concat(st,", offset = ").concat(Ge,", dataSize = ").concat(R));break}var qe=me.getUint32(Ge,!se);if(Je===3&&(qe>>>=8),qe>R-Je)return void o.a.w(this.TAG,"Malformed Nalus near timestamp ".concat(st,", NaluSize > DataSize!"));var bt=me.getUint8(Ge+Je)>>1&63;bt!==19&&bt!==20&&bt!==21||(xt=!0);var St=new Uint8Array(S,k+Ge,Je+qe),Ue={type:bt,data:St};ge.push(Ue),Re+=St.byteLength,Ge+=Je+qe}if(ge.length){var Vt=this._videoTrack,Kt={units:ge,length:Re,isKeyframe:xt,dts:st,cts:ie,pts:st+ie};xt&&(Kt.fileposition=$),Vt.samples.push(Kt),Vt.length+=Re}},b.prototype._parseAV1VideoData=function(S,k,R,w,$,X,ie){this._littleEndian;var se,me=[],ge=this._timestampBase+w,Re=X===1;if(Re){var Ge=this._videoMetadata,Je=W.a.parseOBUs(new Uint8Array(S,k,R),Ge.extra);if(Je==null)return void this._onError(I.a.FORMAT_ERROR,"Flv: Invalid AV1 VideoData");console.log(Je),Ge.codecWidth=Je.codec_size.width,Ge.codecHeight=Je.codec_size.height,Ge.presentWidth=Je.present_size.width,Ge.presentHeight=Je.present_size.height,Ge.sarRatio=Je.sar_ratio;var st=this._mediaInfo;st.width=Ge.codecWidth,st.height=Ge.codecHeight,st.sarNum=Ge.sarRatio.width,st.sarDen=Ge.sarRatio.height,o.a.v(this.TAG,"Parsed AV1DecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",Ge)}if(se=R,me.push({unitType:0,data:new Uint8Array(S,k+0,R)}),me.length){var xt=this._videoTrack,qe={units:me,length:se,isKeyframe:Re,dts:ge,cts:ie,pts:ge+ie};Re&&(qe.fileposition=$),xt.samples.push(qe),xt.length+=se}},b}(),O=n(14),z=function(b,S,k){for(var R,w=0,$=S.length;w<$;w++)!R&&w in S||(R||(R=Array.prototype.slice.call(S,0,w)),R[w]=S[w]);return b.concat(R||Array.prototype.slice.call(S))},ce=function(){function b(){}return b.init=function(){for(var S in b.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hvc1:[],hvcC:[],av01:[],av1C:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[],Opus:[],dOps:[],"ac-3":[],dac3:[],"ec-3":[],dec3:[],fLaC:[],dfLa:[]},b.types)b.types.hasOwnProperty(S)&&(b.types[S]=[S.charCodeAt(0),S.charCodeAt(1),S.charCodeAt(2),S.charCodeAt(3)]);var k=b.constants={};k.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),k.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),k.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),k.STSC=k.STCO=k.STTS,k.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),k.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),k.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),k.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),k.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),k.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},b.box=function(S){for(var k=8,R=null,w=Array.prototype.slice.call(arguments,1),$=w.length,X=0;X<$;X++)k+=w[X].byteLength;(R=new Uint8Array(k))[0]=k>>>24&255,R[1]=k>>>16&255,R[2]=k>>>8&255,R[3]=255&k,R.set(S,4);var ie=8;for(X=0;X<$;X++)R.set(w[X],ie),ie+=w[X].byteLength;return R},b.generateInitSegment=function(S){var k=b.box(b.types.ftyp,b.constants.FTYP),R=b.moov(S),w=new Uint8Array(k.byteLength+R.byteLength);return w.set(k,0),w.set(R,k.byteLength),w},b.moov=function(S){var k=b.mvhd(S.timescale,S.duration),R=b.trak(S),w=b.mvex(S);return b.box(b.types.moov,k,R,w)},b.mvhd=function(S,k){return b.box(b.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,S>>>24&255,S>>>16&255,S>>>8&255,255&S,k>>>24&255,k>>>16&255,k>>>8&255,255&k,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},b.trak=function(S){return b.box(b.types.trak,b.tkhd(S),b.mdia(S))},b.tkhd=function(S){var k=S.id,R=S.duration,w=S.presentWidth,$=S.presentHeight;return b.box(b.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,k>>>24&255,k>>>16&255,k>>>8&255,255&k,0,0,0,0,R>>>24&255,R>>>16&255,R>>>8&255,255&R,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,w>>>8&255,255&w,0,0,$>>>8&255,255&$,0,0]))},b.mdia=function(S){return b.box(b.types.mdia,b.mdhd(S),b.hdlr(S),b.minf(S))},b.mdhd=function(S){var k=S.timescale,R=S.duration;return b.box(b.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,k>>>24&255,k>>>16&255,k>>>8&255,255&k,R>>>24&255,R>>>16&255,R>>>8&255,255&R,85,196,0,0]))},b.hdlr=function(S){var k=null;return k=S.type==="audio"?b.constants.HDLR_AUDIO:b.constants.HDLR_VIDEO,b.box(b.types.hdlr,k)},b.minf=function(S){var k=null;return k=S.type==="audio"?b.box(b.types.smhd,b.constants.SMHD):b.box(b.types.vmhd,b.constants.VMHD),b.box(b.types.minf,k,b.dinf(),b.stbl(S))},b.dinf=function(){return b.box(b.types.dinf,b.box(b.types.dref,b.constants.DREF))},b.stbl=function(S){return b.box(b.types.stbl,b.stsd(S),b.box(b.types.stts,b.constants.STTS),b.box(b.types.stsc,b.constants.STSC),b.box(b.types.stsz,b.constants.STSZ),b.box(b.types.stco,b.constants.STCO))},b.stsd=function(S){return S.type==="audio"?S.codec==="mp3"?b.box(b.types.stsd,b.constants.STSD_PREFIX,b.mp3(S)):S.codec==="ac-3"?b.box(b.types.stsd,b.constants.STSD_PREFIX,b.ac3(S)):S.codec==="ec-3"?b.box(b.types.stsd,b.constants.STSD_PREFIX,b.ec3(S)):S.codec==="opus"?b.box(b.types.stsd,b.constants.STSD_PREFIX,b.Opus(S)):S.codec=="flac"?b.box(b.types.stsd,b.constants.STSD_PREFIX,b.fLaC(S)):b.box(b.types.stsd,b.constants.STSD_PREFIX,b.mp4a(S)):S.type==="video"&&S.codec.startsWith("hvc1")?b.box(b.types.stsd,b.constants.STSD_PREFIX,b.hvc1(S)):S.type==="video"&&S.codec.startsWith("av01")?b.box(b.types.stsd,b.constants.STSD_PREFIX,b.av01(S)):b.box(b.types.stsd,b.constants.STSD_PREFIX,b.avc1(S))},b.mp3=function(S){var k=S.channelCount,R=S.audioSampleRate,w=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,k,0,16,0,0,0,0,R>>>8&255,255&R,0,0]);return b.box(b.types[".mp3"],w)},b.mp4a=function(S){var k=S.channelCount,R=S.audioSampleRate,w=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,k,0,16,0,0,0,0,R>>>8&255,255&R,0,0]);return b.box(b.types.mp4a,w,b.esds(S))},b.ac3=function(S){var k=S.channelCount,R=S.audioSampleRate,w=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,k,0,16,0,0,0,0,R>>>8&255,255&R,0,0]);return b.box(b.types["ac-3"],w,b.box(b.types.dac3,new Uint8Array(S.config)))},b.ec3=function(S){var k=S.channelCount,R=S.audioSampleRate,w=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,k,0,16,0,0,0,0,R>>>8&255,255&R,0,0]);return b.box(b.types["ec-3"],w,b.box(b.types.dec3,new Uint8Array(S.config)))},b.esds=function(S){var k=S.config||[],R=k.length,w=new Uint8Array([0,0,0,0,3,23+R,0,1,0,4,15+R,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([R]).concat(k).concat([6,1,2]));return b.box(b.types.esds,w)},b.Opus=function(S){var k=S.channelCount,R=S.audioSampleRate,w=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,k,0,16,0,0,0,0,R>>>8&255,255&R,0,0]);return b.box(b.types.Opus,w,b.dOps(S))},b.dOps=function(S){var k=S.channelCount,R=S.channelConfigCode,w=S.audioSampleRate;if(S.config)return b.box(b.types.dOps,S.config);var $=[];switch(R){case 1:case 2:$=[0];break;case 0:$=[255,1,1,0,1];break;case 128:$=[255,2,0,0,1];break;case 3:$=[1,2,1,0,2,1];break;case 4:$=[1,2,2,0,1,2,3];break;case 5:$=[1,3,2,0,4,1,2,3];break;case 6:$=[1,4,2,0,4,1,2,3,5];break;case 7:$=[1,4,2,0,4,1,2,3,5,6];break;case 8:$=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:$=[1,1,2,0,1];break;case 131:$=[1,1,3,0,1,2];break;case 132:$=[1,1,4,0,1,2,3];break;case 133:$=[1,1,5,0,1,2,3,4];break;case 134:$=[1,1,6,0,1,2,3,4,5];break;case 135:$=[1,1,7,0,1,2,3,4,5,6];break;case 136:$=[1,1,8,0,1,2,3,4,5,6,7]}var X=new Uint8Array(z([0,k,0,0,w>>>24&255,w>>>17&255,w>>>8&255,w>>>0&255,0,0],$));return b.box(b.types.dOps,X)},b.fLaC=function(S){var k=S.channelCount,R=Math.min(S.audioSampleRate,65535),w=S.sampleSize,$=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,k,0,w,0,0,0,0,R>>>8&255,255&R,0,0]);return b.box(b.types.fLaC,$,b.dfLa(S))},b.dfLa=function(S){var k=new Uint8Array(z([0,0,0,0],S.config));return b.box(b.types.dfLa,k)},b.avc1=function(S){var k=S.avcc,R=S.codecWidth,w=S.codecHeight,$=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,R>>>8&255,255&R,w>>>8&255,255&w,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return b.box(b.types.avc1,$,b.box(b.types.avcC,k))},b.hvc1=function(S){var k=S.hvcc,R=S.codecWidth,w=S.codecHeight,$=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,R>>>8&255,255&R,w>>>8&255,255&w,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return b.box(b.types.hvc1,$,b.box(b.types.hvcC,k))},b.av01=function(S){var k=S.av1c,R=S.codecWidth||192,w=S.codecHeight||108,$=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,R>>>8&255,255&R,w>>>8&255,255&w,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return b.box(b.types.av01,$,b.box(b.types.av1C,k))},b.mvex=function(S){return b.box(b.types.mvex,b.trex(S))},b.trex=function(S){var k=S.id,R=new Uint8Array([0,0,0,0,k>>>24&255,k>>>16&255,k>>>8&255,255&k,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return b.box(b.types.trex,R)},b.moof=function(S,k){return b.box(b.types.moof,b.mfhd(S.sequenceNumber),b.traf(S,k))},b.mfhd=function(S){var k=new Uint8Array([0,0,0,0,S>>>24&255,S>>>16&255,S>>>8&255,255&S]);return b.box(b.types.mfhd,k)},b.traf=function(S,k){var R=S.id,w=b.box(b.types.tfhd,new Uint8Array([0,0,0,0,R>>>24&255,R>>>16&255,R>>>8&255,255&R])),$=b.box(b.types.tfdt,new Uint8Array([0,0,0,0,k>>>24&255,k>>>16&255,k>>>8&255,255&k])),X=b.sdtp(S),ie=b.trun(S,X.byteLength+16+16+8+16+8+8);return b.box(b.types.traf,w,$,ie,X)},b.sdtp=function(S){for(var k=S.samples||[],R=k.length,w=new Uint8Array(4+R),$=0;$<R;$++){var X=k[$].flags;w[$+4]=X.isLeading<<6|X.dependsOn<<4|X.isDependedOn<<2|X.hasRedundancy}return b.box(b.types.sdtp,w)},b.trun=function(S,k){var R=S.samples||[],w=R.length,$=12+16*w,X=new Uint8Array($);k+=8+$,X.set([0,0,15,1,w>>>24&255,w>>>16&255,w>>>8&255,255&w,k>>>24&255,k>>>16&255,k>>>8&255,255&k],0);for(var ie=0;ie<w;ie++){var se=R[ie].duration,me=R[ie].size,ge=R[ie].flags,Re=R[ie].cts;X.set([se>>>24&255,se>>>16&255,se>>>8&255,255&se,me>>>24&255,me>>>16&255,me>>>8&255,255&me,ge.isLeading<<2|ge.dependsOn,ge.isDependedOn<<6|ge.hasRedundancy<<4|ge.isNonSync,0,0,Re>>>24&255,Re>>>16&255,Re>>>8&255,255&Re],12+16*ie)}return b.box(b.types.trun,X)},b.mdat=function(S){return b.box(b.types.mdat,S)},b}();ce.init();var be=ce,Le=function(){function b(){}return b.getSilentFrame=function(S,k){if(S==="mp4a.40.2"){if(k===1)return new Uint8Array([0,200,0,128,35,128]);if(k===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(k===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(k===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(k===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(k===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(k===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(k===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(k===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},b}(),xe=n(12),ve=function(){function b(S){this.TAG="MP4Remuxer",this._config=S,this._isLive=S.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new xe.c("audio"),this._videoSegmentInfoList=new xe.c("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!d.a.chrome||!(d.a.version.major<50||d.a.version.major===50&&d.a.version.build<2661)),this._fillSilentAfterSeek=d.a.msedge||d.a.msie,this._mp3UseMpegAudio=!d.a.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return b.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},b.prototype.bindDataSource=function(S){return S.onDataAvailable=this.remux.bind(this),S.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(b.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(S){this._onInitSegment=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(S){this._onMediaSegment=S},enumerable:!1,configurable:!0}),b.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},b.prototype.seek=function(S){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},b.prototype.remux=function(S,k,R){if(R===void 0&&(R=!1),!this._onMediaSegment)throw new g.a("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(S,k),k&&this._remuxVideo(k,R),S&&this._remuxAudio(S,R)},b.prototype._onTrackMetadataReceived=function(S,k){var R=null,w="mp4",$=k.codec;if(S==="audio")this._audioMeta=k,k.codec==="mp3"&&this._mp3UseMpegAudio?(w="mpeg",$="",R=new Uint8Array):R=be.generateInitSegment(k);else{if(S!=="video")return;this._videoMeta=k,R=be.generateInitSegment(k)}if(!this._onInitSegment)throw new g.a("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(S,{type:S,data:R.buffer,codec:$,container:"".concat(S,"/").concat(w),mediaDuration:k.duration})},b.prototype._calculateDtsBase=function(S,k){this._dtsBaseInited||(S&&S.samples&&S.samples.length&&(this._audioDtsBase=S.samples[0].dts),k&&k.samples&&k.samples.length&&(this._videoDtsBase=k.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},b.prototype.getTimestampBase=function(){if(this._dtsBaseInited)return this._dtsBase},b.prototype.flushStashedSamples=function(){var S=this._videoStashedLastSample,k=this._audioStashedLastSample,R={type:"video",id:1,sequenceNumber:0,samples:[],length:0};S!=null&&(R.samples.push(S),R.length=S.length);var w={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};k!=null&&(w.samples.push(k),w.length=k.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(R,!0),this._remuxAudio(w,!0)},b.prototype._remuxAudio=function(S,k){if(this._audioMeta!=null){var R,w=S,$=w.samples,X=void 0,ie=-1,se=this._audioMeta.refSampleDuration,me=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,ge=this._dtsBaseInited&&this._audioNextDts===void 0,Re=!1;if(($&&$.length!==0||k&&this._audioStashedLastSample!=null)&&($.length!==1||k)){var Ge=0,Je=null,st=0;me?(Ge=0,st=w.length):(Ge=8,st=8+w.length);var xt=null;if($.length>1&&!k&&(st-=(xt=$.pop()).length),this._audioStashedLastSample!=null){var qe=this._audioStashedLastSample;this._audioStashedLastSample=null,$.unshift(qe),st+=qe.length}xt!=null&&(this._audioStashedLastSample=xt);var bt=$[0].dts-this._dtsBase;if(this._audioNextDts)X=bt-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())X=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(Re=!0);else{var St=this._audioSegmentInfoList.getLastSampleBefore(bt);if(St!=null){var Ue=bt-(St.originalDts+St.duration);Ue<=3&&(Ue=0),X=bt-(St.dts+St.duration+Ue)}else X=0}if(Re){var Vt=bt-X,Kt=this._videoSegmentInfoList.getLastSegmentBefore(bt);if(Kt!=null&&Kt.beginDts<Vt){if(ri=Le.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount)){var It=Kt.beginDts,Yt=Vt-Kt.beginDts;o.a.v(this.TAG,"InsertPrefixSilentAudio: dts: ".concat(It,", duration: ").concat(Yt)),$.unshift({unit:ri,dts:It,pts:It}),st+=ri.byteLength}}else Re=!1}for(var Te=[],$e=0;$e<$.length;$e++){var lt=(qe=$[$e]).unit,vt=qe.dts-this._dtsBase,_t=(It=vt,!1),Wt=null,Tt=0;if(!(vt<-.001)){if(this._audioMeta.codec!=="mp3"&&se!=null){var Ct=vt;if(this._audioNextDts&&(Ct=this._audioNextDts),(X=vt-Ct)<=-3*se){o.a.w(this.TAG,"Dropping 1 audio frame (originalDts: ".concat(vt," ms ,curRefDts: ").concat(Ct," ms)  due to dtsCorrection: ").concat(X," ms overlap."));continue}if(X>=3*se&&this._fillAudioTimestampGap&&!d.a.safari){_t=!0;var ri,H=Math.floor(X/se);o.a.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+"originalDts: ".concat(vt," ms, curRefDts: ").concat(Ct," ms, ")+"dtsCorrection: ".concat(Math.round(X)," ms, generate: ").concat(H," frames")),It=Math.floor(Ct),Tt=Math.floor(Ct+se)-It,(ri=Le.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))==null&&(o.a.w(this.TAG,"Unable to generate silent frame for "+"".concat(this._audioMeta.originalCodec," with ").concat(this._audioMeta.channelCount," channels, repeat last frame")),ri=lt),Wt=[];for(var fe=0;fe<H;fe++){Ct+=se;var J=Math.floor(Ct),K=Math.floor(Ct+se)-J,ue={dts:J,pts:J,cts:0,unit:ri,size:ri.byteLength,duration:K,originalDts:vt,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};Wt.push(ue),st+=ue.size}this._audioNextDts=Ct+se}else It=Math.floor(Ct),Tt=Math.floor(Ct+se)-It,this._audioNextDts=Ct+se}else It=vt-X,$e!==$.length-1?Tt=$[$e+1].dts-this._dtsBase-X-It:xt!=null?Tt=xt.dts-this._dtsBase-X-It:Tt=Te.length>=1?Te[Te.length-1].duration:Math.floor(se),this._audioNextDts=It+Tt;ie===-1&&(ie=It),Te.push({dts:It,pts:It,cts:0,unit:qe.unit,size:qe.unit.byteLength,duration:Tt,originalDts:vt,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),_t&&Te.push.apply(Te,Wt)}}if(Te.length===0)return w.samples=[],void(w.length=0);for(me?Je=new Uint8Array(st):((Je=new Uint8Array(st))[0]=st>>>24&255,Je[1]=st>>>16&255,Je[2]=st>>>8&255,Je[3]=255&st,Je.set(be.types.mdat,4)),$e=0;$e<Te.length;$e++)lt=Te[$e].unit,Je.set(lt,Ge),Ge+=lt.byteLength;var Ce=Te[Te.length-1];R=Ce.dts+Ce.duration;var ye=new xe.b;ye.beginDts=ie,ye.endDts=R,ye.beginPts=ie,ye.endPts=R,ye.originalBeginDts=Te[0].originalDts,ye.originalEndDts=Ce.originalDts+Ce.duration,ye.firstSample=new xe.d(Te[0].dts,Te[0].pts,Te[0].duration,Te[0].originalDts,!1),ye.lastSample=new xe.d(Ce.dts,Ce.pts,Ce.duration,Ce.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(ye),w.samples=Te,w.sequenceNumber++;var Oe=null;Oe=me?new Uint8Array:be.moof(w,ie),w.samples=[],w.length=0;var Ye={type:"audio",data:this._mergeBoxes(Oe,Je).buffer,sampleCount:Te.length,info:ye};me&&ge&&(Ye.timestampOffset=ie),this._onMediaSegment("audio",Ye)}}},b.prototype._remuxVideo=function(S,k){if(this._videoMeta!=null){var R,w,$=S,X=$.samples,ie=void 0,se=-1,me=-1;if(X&&X.length!==0){if(X.length!==1||k){var ge=8,Re=null,Ge=8+S.length,Je=null;if(X.length>1&&!k&&(Ge-=(Je=X.pop()).length),this._videoStashedLastSample!=null){var st=this._videoStashedLastSample;this._videoStashedLastSample=null,X.unshift(st),Ge+=st.length}Je!=null&&(this._videoStashedLastSample=Je);var xt=X[0].dts-this._dtsBase;if(this._videoNextDts)ie=xt-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())ie=0;else{var qe=this._videoSegmentInfoList.getLastSampleBefore(xt);if(qe!=null){var bt=xt-(qe.originalDts+qe.duration);bt<=3&&(bt=0),ie=xt-(qe.dts+qe.duration+bt)}else ie=0}for(var St=new xe.b,Ue=[],Vt=0;Vt<X.length;Vt++){var Kt=(st=X[Vt]).dts-this._dtsBase,It=st.isKeyframe,Yt=Kt-ie,Te=st.cts,$e=Yt+Te;se===-1&&(se=Yt,me=$e);var lt=0;if(Vt!==X.length-1?lt=X[Vt+1].dts-this._dtsBase-ie-Yt:Je!=null?lt=Je.dts-this._dtsBase-ie-Yt:lt=Ue.length>=1?Ue[Ue.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),It){var vt=new xe.d(Yt,$e,lt,st.dts,!0);vt.fileposition=st.fileposition,St.appendSyncPoint(vt)}Ue.push({dts:Yt,pts:$e,cts:Te,units:st.units,size:st.length,isKeyframe:It,duration:lt,originalDts:Kt,flags:{isLeading:0,dependsOn:It?2:1,isDependedOn:It?1:0,hasRedundancy:0,isNonSync:It?0:1}})}for((Re=new Uint8Array(Ge))[0]=Ge>>>24&255,Re[1]=Ge>>>16&255,Re[2]=Ge>>>8&255,Re[3]=255&Ge,Re.set(be.types.mdat,4),Vt=0;Vt<Ue.length;Vt++)for(var _t=Ue[Vt].units;_t.length;){var Wt=_t.shift().data;Re.set(Wt,ge),ge+=Wt.byteLength}var Tt=Ue[Ue.length-1];if(R=Tt.dts+Tt.duration,w=Tt.pts+Tt.duration,this._videoNextDts=R,St.beginDts=se,St.endDts=R,St.beginPts=me,St.endPts=w,St.originalBeginDts=Ue[0].originalDts,St.originalEndDts=Tt.originalDts+Tt.duration,St.firstSample=new xe.d(Ue[0].dts,Ue[0].pts,Ue[0].duration,Ue[0].originalDts,Ue[0].isKeyframe),St.lastSample=new xe.d(Tt.dts,Tt.pts,Tt.duration,Tt.originalDts,Tt.isKeyframe),this._isLive||this._videoSegmentInfoList.append(St),$.samples=Ue,$.sequenceNumber++,this._forceFirstIDR){var Ct=Ue[0].flags;Ct.dependsOn=2,Ct.isNonSync=0}var ri=be.moof($,se);$.samples=[],$.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(ri,Re).buffer,sampleCount:Ue.length,info:St})}}else!k||this._videoStashedLastSample}},b.prototype._mergeBoxes=function(S,k){var R=new Uint8Array(S.byteLength+k.byteLength);return R.set(S,0),R.set(k,S.byteLength),R},b}(),ze=n(17),Pe=n(1),Y=(n(2),function(){function b(S,k){this.TAG="TransmuxingController",this._emitter=new r.a,this._config=k,S.segments||(S.segments=[{duration:S.duration,filesize:S.filesize,url:S.url}]),typeof S.cors!="boolean"&&(S.cors=!0),typeof S.withCredentials!="boolean"&&(S.withCredentials=!1),this._mediaDataSource=S,this._currentSegmentIndex=0;var R=0;this._mediaDataSource.segments.forEach(function(w){w.timestampBase=R,R+=w.duration,w.cors=S.cors,w.withCredentials=S.withCredentials,k.referrerPolicy&&(w.referrerPolicy=k.referrerPolicy)}),isNaN(R)||this._mediaDataSource.duration===R||(this._mediaDataSource.duration=R),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return b.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},b.prototype.on=function(S,k){this._emitter.addListener(S,k)},b.prototype.off=function(S,k){this._emitter.removeListener(S,k)},b.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},b.prototype._loadSegment=function(S,k){this._currentSegmentIndex=S;var R=this._mediaDataSource.segments[S],w=this._ioctl=new ze.a(R,this._config,S);w.onError=this._onIOException.bind(this),w.onSeeked=this._onIOSeeked.bind(this),w.onComplete=this._onIOComplete.bind(this),w.onRedirect=this._onIORedirect.bind(this),w.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),k?this._demuxer.bindDataSource(this._ioctl):w.onDataArrival=this._onInitChunkArrival.bind(this),w.open(k)},b.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},b.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},b.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},b.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},b.prototype.seek=function(S){if(this._mediaInfo!=null&&this._mediaInfo.isSeekable()){var k=this._searchSegmentIndexContains(S);if(k===this._currentSegmentIndex){var R=this._mediaInfo.segments[k];if(R==null)this._pendingSeekTime=S;else{var w=R.getNearestKeyframe(S);this._remuxer.seek(w.milliseconds),this._ioctl.seek(w.fileposition),this._pendingResolveSeekPoint=w.milliseconds}}else{var $=this._mediaInfo.segments[k];$==null?(this._pendingSeekTime=S,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(k)):(w=$.getNearestKeyframe(S),this._internalAbort(),this._remuxer.seek(S),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[k].timestampBase,this._loadSegment(k,w.fileposition),this._pendingResolveSeekPoint=w.milliseconds,this._reportSegmentMediaInfo(k))}this._enableStatisticsReporter()}},b.prototype._searchSegmentIndexContains=function(S){for(var k=this._mediaDataSource.segments,R=k.length-1,w=0;w<k.length;w++)if(S<k[w].timestampBase){R=w-1;break}return R},b.prototype._onInitChunkArrival=function(S,k){var R=this,w=0;if(k>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,w=this._demuxer.parseChunks(S,k);else{var $=null;($=U.probe(S)).match&&(this._setupFLVDemuxerRemuxer($),w=this._demuxer.parseChunks(S,k)),$.match||$.needMoreData||($=O.a.probe(S)).match&&(this._setupTSDemuxerRemuxer($),w=this._demuxer.parseChunks(S,k)),$.match||$.needMoreData||($=null,o.a.e(this.TAG,"Non MPEG-TS/FLV, Unsupported media type!"),Promise.resolve().then(function(){R._internalAbort()}),this._emitter.emit(Pe.a.DEMUX_ERROR,I.a.FORMAT_UNSUPPORTED,"Non MPEG-TS/FLV, Unsupported media type!"))}return w},b.prototype._setupFLVDemuxerRemuxer=function(S){this._demuxer=new U(S,this._config),this._remuxer||(this._remuxer=new ve(this._config));var k=this._mediaDataSource;k.duration==null||isNaN(k.duration)||(this._demuxer.overridedDuration=k.duration),typeof k.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=k.hasAudio),typeof k.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=k.hasVideo),this._demuxer.timestampBase=k.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},b.prototype._setupTSDemuxerRemuxer=function(S){var k=this._demuxer=new O.a(S,this._config);this._remuxer||(this._remuxer=new ve(this._config)),k.onError=this._onDemuxException.bind(this),k.onMediaInfo=this._onMediaInfo.bind(this),k.onMetaDataArrived=this._onMetaDataArrived.bind(this),k.onTimedID3Metadata=this._onTimedID3Metadata.bind(this),k.onSynchronousKLVMetadata=this._onSynchronousKLVMetadata.bind(this),k.onAsynchronousKLVMetadata=this._onAsynchronousKLVMetadata.bind(this),k.onSMPTE2038Metadata=this._onSMPTE2038Metadata.bind(this),k.onSCTE35Metadata=this._onSCTE35Metadata.bind(this),k.onPESPrivateDataDescriptor=this._onPESPrivateDataDescriptor.bind(this),k.onPESPrivateData=this._onPESPrivateData.bind(this),this._remuxer.bindDataSource(this._demuxer),this._demuxer.bindDataSource(this._ioctl),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},b.prototype._onMediaInfo=function(S){var k=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},S),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,c.a.prototype));var R=Object.assign({},S);Object.setPrototypeOf(R,c.a.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=R,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var w=k._pendingSeekTime;k._pendingSeekTime=null,k.seek(w)})},b.prototype._onMetaDataArrived=function(S){this._emitter.emit(Pe.a.METADATA_ARRIVED,S)},b.prototype._onScriptDataArrived=function(S){this._emitter.emit(Pe.a.SCRIPTDATA_ARRIVED,S)},b.prototype._onTimedID3Metadata=function(S){var k=this._remuxer.getTimestampBase();k!=null&&(S.pts!=null&&(S.pts-=k),S.dts!=null&&(S.dts-=k),this._emitter.emit(Pe.a.TIMED_ID3_METADATA_ARRIVED,S))},b.prototype._onSynchronousKLVMetadata=function(S){var k=this._remuxer.getTimestampBase();k!=null&&(S.pts!=null&&(S.pts-=k),S.dts!=null&&(S.dts-=k),this._emitter.emit(Pe.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,S))},b.prototype._onAsynchronousKLVMetadata=function(S){this._emitter.emit(Pe.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,S)},b.prototype._onSMPTE2038Metadata=function(S){var k=this._remuxer.getTimestampBase();k!=null&&(S.pts!=null&&(S.pts-=k),S.dts!=null&&(S.dts-=k),S.nearest_pts!=null&&(S.nearest_pts-=k),this._emitter.emit(Pe.a.SMPTE2038_METADATA_ARRIVED,S))},b.prototype._onSCTE35Metadata=function(S){var k=this._remuxer.getTimestampBase();k!=null&&(S.pts!=null&&(S.pts-=k),S.nearest_pts!=null&&(S.nearest_pts-=k),this._emitter.emit(Pe.a.SCTE35_METADATA_ARRIVED,S))},b.prototype._onPESPrivateDataDescriptor=function(S){this._emitter.emit(Pe.a.PES_PRIVATE_DATA_DESCRIPTOR,S)},b.prototype._onPESPrivateData=function(S){var k=this._remuxer.getTimestampBase();k!=null&&(S.pts!=null&&(S.pts-=k),S.nearest_pts!=null&&(S.nearest_pts-=k),S.dts!=null&&(S.dts-=k),this._emitter.emit(Pe.a.PES_PRIVATE_DATA_ARRIVED,S))},b.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},b.prototype._onIOComplete=function(S){var k=S+1;k<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(k)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(Pe.a.LOADING_COMPLETE),this._disableStatisticsReporter())},b.prototype._onIORedirect=function(S){var k=this._ioctl.extraData;this._mediaDataSource.segments[k].redirectedURL=S},b.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(Pe.a.RECOVERED_EARLY_EOF)},b.prototype._onIOException=function(S,k){o.a.e(this.TAG,"IOException: type = ".concat(S,", code = ").concat(k.code,", msg = ").concat(k.msg)),this._emitter.emit(Pe.a.IO_ERROR,S,k),this._disableStatisticsReporter()},b.prototype._onDemuxException=function(S,k){o.a.e(this.TAG,"DemuxException: type = ".concat(S,", info = ").concat(k)),this._emitter.emit(Pe.a.DEMUX_ERROR,S,k)},b.prototype._onRemuxerInitSegmentArrival=function(S,k){this._emitter.emit(Pe.a.INIT_SEGMENT,S,k)},b.prototype._onRemuxerMediaSegmentArrival=function(S,k){if(this._pendingSeekTime==null&&(this._emitter.emit(Pe.a.MEDIA_SEGMENT,S,k),this._pendingResolveSeekPoint!=null&&S==="video")){var R=k.info.syncPoints,w=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,d.a.safari&&R.length>0&&R[0].originalDts===w&&(w=R[0].pts),this._emitter.emit(Pe.a.RECOMMEND_SEEKPOINT,w)}},b.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},b.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},b.prototype._reportSegmentMediaInfo=function(S){var k=this._mediaInfo.segments[S],R=Object.assign({},k);R.duration=this._mediaInfo.duration,R.segmentCount=this._mediaInfo.segmentCount,delete R.segments,delete R.keyframesIndex,this._emitter.emit(Pe.a.MEDIA_INFO,R)},b.prototype._reportStatisticsInfo=function(){var S={};S.url=this._ioctl.currentURL,S.hasRedirect=this._ioctl.hasRedirect,S.hasRedirect&&(S.redirectedURL=this._ioctl.currentRedirectedURL),S.speed=this._ioctl.currentSpeed,S.loaderType=this._ioctl.loaderType,S.currentSegmentIndex=this._currentSegmentIndex,S.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(Pe.a.STATISTICS_INFO,S)},b}());i.a=Y},function(t,i,n){var a=function(){function r(){}return r.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(o,d){return o.__proto__=d,o},Object.assign=Object.assign||function(o){if(o==null)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(o),c=1;c<arguments.length;c++){var l=arguments[c];if(l!=null)for(var f in l)l.hasOwnProperty(f)&&(d[f]=l[f])}return d},String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(o,d){var c=d>0?0|d:0;return this.substring(c,c+o.length)===o}}),typeof self.Promise!="function"&&n(26).polyfill()},r}();a.install(),i.a=a},function(t,i,n){function a(c){var l={};function f(g){if(l[g])return l[g].exports;var y=l[g]={i:g,l:!1,exports:{}};return c[g].call(y.exports,y,y.exports,f),y.l=!0,y.exports}f.m=c,f.c=l,f.i=function(g){return g},f.d=function(g,y,A){f.o(g,y)||Object.defineProperty(g,y,{configurable:!1,enumerable:!0,get:A})},f.r=function(g){Object.defineProperty(g,"__esModule",{value:!0})},f.n=function(g){var y=g&&g.__esModule?function(){return g.default}:function(){return g};return f.d(y,"a",y),y},f.o=function(g,y){return Object.prototype.hasOwnProperty.call(g,y)},f.p="/",f.oe=function(g){throw console.error(g),g};var p=f(f.s=ENTRY_MODULE);return p.default||p}function r(c){return(c+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(c,l,f){var p={};p[f]=[];var g=l.toString(),y=g.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!y)return p;for(var A,C=y[1],I=new RegExp("(\\\\n|\\W)"+r(C)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");A=I.exec(g);)A[3]!=="dll-reference"&&p[f].push(A[3]);for(I=new RegExp("\\("+r(C)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");A=I.exec(g);)c[A[2]]||(p[f].push(A[1]),c[A[2]]=n(A[1]).m),p[A[2]]=p[A[2]]||[],p[A[2]].push(A[4]);for(var P,M=Object.keys(p),G=0;G<M.length;G++)for(var Z=0;Z<p[M[G]].length;Z++)P=p[M[G]][Z],isNaN(1*P)||(p[M[G]][Z]=1*p[M[G]][Z]);return p}function d(c){return Object.keys(c).reduce(function(l,f){return l||c[f].length>0},!1)}t.exports=function(c,l){l=l||{};var f={main:n.m},p=l.all?{main:Object.keys(f.main)}:function(I,P){for(var M={main:[P]},G={main:[]},Z={main:{}};d(M);)for(var le=Object.keys(M),W=0;W<le.length;W++){var N=le[W],U=M[N].pop();if(Z[N]=Z[N]||{},!Z[N][U]&&I[N][U]){Z[N][U]=!0,G[N]=G[N]||[],G[N].push(U);for(var O=o(I,I[N][U],N),z=Object.keys(O),ce=0;ce<z.length;ce++)M[z[ce]]=M[z[ce]]||[],M[z[ce]]=M[z[ce]].concat(O[z[ce]])}}return G}(f,c),g="";Object.keys(p).filter(function(I){return I!=="main"}).forEach(function(I){for(var P=0;p[I][P];)P++;p[I].push(P),f[I][P]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",g=g+"var "+I+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(P))+")({"+p[I].map(function(M){return JSON.stringify(M)+": "+f[I][M].toString()}).join(",")+`});
`}),g=g+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(c))+")({"+p.main.map(function(I){return JSON.stringify(I)+": "+f.main[I].toString()}).join(",")+"}))(self);";var y=new self.Blob([g],{type:"text/javascript"});if(l.bare)return y;var A=(self.URL||self.webkitURL||self.mozURL||self.msURL).createObjectURL(y),C=new self.Worker(A);return C.objectURL=A,C}},function(t,i,n){var a=n(10),r=n.n(a),o=n(0),d=n(5),c=n(7),l=n(3),f=function(){function p(g){this.TAG="MSEController",this._config=g,this._emitter=new r.a,this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onStartStreaming:this._onStartStreaming.bind(this),onEndStreaming:this._onEndStreaming.bind(this),onQualityChange:this._onQualityChange.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._useManagedMediaSource="ManagedMediaSource"in self&&!("MediaSource"in self),this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElementProxy=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]}}return p.prototype.destroy=function(){this._mediaSource&&this.shutdown(),this._mediaSourceObjectURL&&this.revokeObjectURL(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},p.prototype.on=function(g,y){this._emitter.addListener(g,y)},p.prototype.off=function(g,y){this._emitter.removeListener(g,y)},p.prototype.initialize=function(g){if(this._mediaSource)throw new l.a("MediaSource has been attached to an HTMLMediaElement!");this._useManagedMediaSource&&o.a.v(this.TAG,"Using ManagedMediaSource");var y=this._mediaSource=this._useManagedMediaSource?new self.ManagedMediaSource:new self.MediaSource;y.addEventListener("sourceopen",this.e.onSourceOpen),y.addEventListener("sourceended",this.e.onSourceEnded),y.addEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(y.addEventListener("startstreaming",this.e.onStartStreaming),y.addEventListener("endstreaming",this.e.onEndStreaming),y.addEventListener("qualitychange",this.e.onQualityChange)),this._mediaElementProxy=g},p.prototype.shutdown=function(){if(this._mediaSource){var g=this._mediaSource;for(var y in this._sourceBuffers){var A=this._pendingSegments[y];A.splice(0,A.length),this._pendingSegments[y]=null,this._pendingRemoveRanges[y]=null,this._lastInitSegments[y]=null;var C=this._sourceBuffers[y];if(C){if(g.readyState!=="closed"){try{g.removeSourceBuffer(C)}catch(I){o.a.e(this.TAG,I.message)}C.removeEventListener("error",this.e.onSourceBufferError),C.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[y]=null,this._sourceBuffers[y]=null}}if(g.readyState==="open")try{g.endOfStream()}catch(I){o.a.e(this.TAG,I.message)}this._mediaElementProxy=null,g.removeEventListener("sourceopen",this.e.onSourceOpen),g.removeEventListener("sourceended",this.e.onSourceEnded),g.removeEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(g.removeEventListener("startstreaming",this.e.onStartStreaming),g.removeEventListener("endstreaming",this.e.onEndStreaming),g.removeEventListener("qualitychange",this.e.onQualityChange)),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._mediaSource=null}},p.prototype.isManagedMediaSource=function(){return this._useManagedMediaSource},p.prototype.getObject=function(){if(!this._mediaSource)throw new l.a("MediaSource has not been initialized yet!");return this._mediaSource},p.prototype.getHandle=function(){if(!this._mediaSource)throw new l.a("MediaSource has not been initialized yet!");return this._mediaSource.handle},p.prototype.getObjectURL=function(){if(!this._mediaSource)throw new l.a("MediaSource has not been initialized yet!");return this._mediaSourceObjectURL==null&&(this._mediaSourceObjectURL=URL.createObjectURL(this._mediaSource)),this._mediaSourceObjectURL},p.prototype.revokeObjectURL=function(){this._mediaSourceObjectURL&&(URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},p.prototype.appendInitSegment=function(g,y){if(y===void 0&&(y=void 0),!this._mediaSource||this._mediaSource.readyState!=="open"||this._mediaSource.streaming===!1)return this._pendingSourceBufferInit.push(g),void this._pendingSegments[g.type].push(g);var A=g,C="".concat(A.container);A.codec&&A.codec.length>0&&(A.codec==="opus"&&d.a.safari&&(A.codec="Opus"),C+=";codecs=".concat(A.codec));var I=!1;if(o.a.v(this.TAG,"Received Initialization Segment, mimeType: "+C),this._lastInitSegments[A.type]=A,C!==this._mimeTypes[A.type]){if(this._mimeTypes[A.type])o.a.v(this.TAG,"Notice: ".concat(A.type," mimeType changed, origin: ").concat(this._mimeTypes[A.type],", target: ").concat(C));else{I=!0;try{var P=this._sourceBuffers[A.type]=this._mediaSource.addSourceBuffer(C);P.addEventListener("error",this.e.onSourceBufferError),P.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(M){return o.a.e(this.TAG,M.message),void this._emitter.emit(c.a.ERROR,{code:M.code,msg:M.message})}}this._mimeTypes[A.type]=C}y||this._pendingSegments[A.type].push(A),I||this._sourceBuffers[A.type]&&!this._sourceBuffers[A.type].updating&&this._doAppendSegments(),d.a.safari&&A.container==="audio/mpeg"&&A.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=A.mediaDuration/1e3,this._updateMediaSourceDuration())},p.prototype.appendMediaSegment=function(g){var y=g;this._pendingSegments[y.type].push(y),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var A=this._sourceBuffers[y.type];!A||A.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},p.prototype.flush=function(){for(var g in this._sourceBuffers)if(this._sourceBuffers[g]){var y=this._sourceBuffers[g];if(this._mediaSource.readyState==="open")try{y.abort()}catch(G){o.a.e(this.TAG,G.message)}var A=this._pendingSegments[g];if(A.splice(0,A.length),this._mediaSource.readyState!=="closed"){for(var C=0;C<y.buffered.length;C++){var I=y.buffered.start(C),P=y.buffered.end(C);this._pendingRemoveRanges[g].push({start:I,end:P})}if(y.updating||this._doRemoveRanges(),d.a.safari){var M=this._lastInitSegments[g];M&&(this._pendingSegments[g].push(M),y.updating||this._doAppendSegments())}}}},p.prototype.endOfStream=function(){var g=this._mediaSource,y=this._sourceBuffers;g&&g.readyState==="open"?y.video&&y.video.updating||y.audio&&y.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,g.endOfStream()):g&&g.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},p.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var g=this._mediaElementProxy.getCurrentTime();for(var y in this._sourceBuffers){var A=this._sourceBuffers[y];if(A){var C=A.buffered;if(C.length>=1&&g-C.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},p.prototype._doCleanupSourceBuffer=function(){var g=this._mediaElementProxy.getCurrentTime();for(var y in this._sourceBuffers){var A=this._sourceBuffers[y];if(A){for(var C=A.buffered,I=!1,P=0;P<C.length;P++){var M=C.start(P),G=C.end(P);if(M<=g&&g<G+3){if(g-M>=this._config.autoCleanupMaxBackwardDuration){I=!0;var Z=g-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[y].push({start:M,end:Z})}}else G<g&&(I=!0,this._pendingRemoveRanges[y].push({start:M,end:G}))}I&&!A.updating&&this._doRemoveRanges()}}},p.prototype._updateMediaSourceDuration=function(){var g=this._sourceBuffers;if(this._mediaElementProxy.getReadyState()!==0&&this._mediaSource.readyState==="open"&&!(g.video&&g.video.updating||g.audio&&g.audio.updating)){var y=this._mediaSource.duration,A=this._pendingMediaDuration;A>0&&(isNaN(y)||A>y)&&(o.a.v(this.TAG,"Update MediaSource duration from ".concat(y," to ").concat(A)),this._mediaSource.duration=A),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},p.prototype._doRemoveRanges=function(){for(var g in this._pendingRemoveRanges)if(this._sourceBuffers[g]&&!this._sourceBuffers[g].updating)for(var y=this._sourceBuffers[g],A=this._pendingRemoveRanges[g];A.length&&!y.updating;){var C=A.shift();y.remove(C.start,C.end)}},p.prototype._doAppendSegments=function(){var g=this._pendingSegments;for(var y in g)if(this._sourceBuffers[y]&&!this._sourceBuffers[y].updating&&this._mediaSource.streaming!==!1&&g[y].length>0){var A=g[y].shift();if(typeof A.timestampOffset=="number"&&isFinite(A.timestampOffset)){var C=this._sourceBuffers[y].timestampOffset,I=A.timestampOffset/1e3;Math.abs(C-I)>.1&&(o.a.v(this.TAG,"Update MPEG audio timestampOffset from ".concat(C," to ").concat(I)),this._sourceBuffers[y].timestampOffset=I),delete A.timestampOffset}if(!A.data||A.data.byteLength===0)continue;try{this._sourceBuffers[y].appendBuffer(A.data),this._isBufferFull=!1}catch(P){this._pendingSegments[y].unshift(A),P.code===22?(this._isBufferFull||this._emitter.emit(c.a.BUFFER_FULL),this._isBufferFull=!0):(o.a.e(this.TAG,P.message),this._emitter.emit(c.a.ERROR,{code:P.code,msg:P.message}))}}},p.prototype._onSourceOpen=function(){if(o.a.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var g=this._pendingSourceBufferInit;g.length;){var y=g.shift();this.appendInitSegment(y,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(c.a.SOURCE_OPEN)},p.prototype._onStartStreaming=function(){o.a.v(this.TAG,"ManagedMediaSource onStartStreaming"),this._emitter.emit(c.a.START_STREAMING)},p.prototype._onEndStreaming=function(){o.a.v(this.TAG,"ManagedMediaSource onEndStreaming"),this._emitter.emit(c.a.END_STREAMING)},p.prototype._onQualityChange=function(){o.a.v(this.TAG,"ManagedMediaSource onQualityChange")},p.prototype._onSourceEnded=function(){o.a.v(this.TAG,"MediaSource onSourceEnded")},p.prototype._onSourceClose=function(){o.a.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose),this._useManagedMediaSource&&(this._mediaSource.removeEventListener("startstreaming",this.e.onStartStreaming),this._mediaSource.removeEventListener("endstreaming",this.e.onEndStreaming),this._mediaSource.removeEventListener("qualitychange",this.e.onQualityChange)))},p.prototype._hasPendingSegments=function(){var g=this._pendingSegments;return g.video.length>0||g.audio.length>0},p.prototype._hasPendingRemoveRanges=function(){var g=this._pendingRemoveRanges;return g.video.length>0||g.audio.length>0},p.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(c.a.UPDATE_END)},p.prototype._onSourceBufferError=function(g){o.a.e(this.TAG,"SourceBuffer Error: ".concat(g))},p}();i.a=f},function(t,i,n){var a=n(10),r=n.n(a),o=n(20),d=n.n(o),c=n(0),l=n(9),f=n(18),p=n(1),g=(n(24),n(13)),y=n(14),A=function(){function C(I,P){if(this.TAG="Transmuxer",this._emitter=new r.a,P.enableWorker&&typeof Worker<"u")try{this._worker=d()(24),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[I,P]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},l.a.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:l.a.getConfig()})}catch{c.a.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new f.a(I,P)}else this._controller=new f.a(I,P);if(this._controller){var M=this._controller;M.on(p.a.IO_ERROR,this._onIOError.bind(this)),M.on(p.a.DEMUX_ERROR,this._onDemuxError.bind(this)),M.on(p.a.INIT_SEGMENT,this._onInitSegment.bind(this)),M.on(p.a.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),M.on(p.a.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),M.on(p.a.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),M.on(p.a.MEDIA_INFO,this._onMediaInfo.bind(this)),M.on(p.a.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),M.on(p.a.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),M.on(p.a.TIMED_ID3_METADATA_ARRIVED,this._onTimedID3MetadataArrived.bind(this)),M.on(p.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,this._onSynchronousKLVMetadataArrived.bind(this)),M.on(p.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,this._onAsynchronousKLVMetadataArrived.bind(this)),M.on(p.a.SMPTE2038_METADATA_ARRIVED,this._onSMPTE2038MetadataArrived.bind(this)),M.on(p.a.SCTE35_METADATA_ARRIVED,this._onSCTE35MetadataArrived.bind(this)),M.on(p.a.PES_PRIVATE_DATA_DESCRIPTOR,this._onPESPrivateDataDescriptor.bind(this)),M.on(p.a.PES_PRIVATE_DATA_ARRIVED,this._onPESPrivateDataArrived.bind(this)),M.on(p.a.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),M.on(p.a.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return C.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),l.a.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},C.prototype.on=function(I,P){this._emitter.addListener(I,P)},C.prototype.off=function(I,P){this._emitter.removeListener(I,P)},C.prototype.hasWorker=function(){return this._worker!=null},C.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},C.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},C.prototype.seek=function(I){this._worker?this._worker.postMessage({cmd:"seek",param:I}):this._controller.seek(I)},C.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},C.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},C.prototype.switchPrimaryAudio=function(){this._worker?this._worker.postMessage({cmd:"switch_audio",param:"primary"}):this._controller._demuxer instanceof y.a&&(this._controller._demuxer.preferred_secondary_audio=!1)},C.prototype.switchSecondaryAudio=function(){this._worker?this._worker.postMessage({cmd:"switch_audio",param:"secondary"}):this._controller._demuxer instanceof y.a&&(this._controller._demuxer.preferred_secondary_audio=!0)},C.prototype._onInitSegment=function(I,P){var M=this;Promise.resolve().then(function(){M._emitter.emit(p.a.INIT_SEGMENT,I,P)})},C.prototype._onMediaSegment=function(I,P){var M=this;Promise.resolve().then(function(){M._emitter.emit(p.a.MEDIA_SEGMENT,I,P)})},C.prototype._onLoadingComplete=function(){var I=this;Promise.resolve().then(function(){I._emitter.emit(p.a.LOADING_COMPLETE)})},C.prototype._onRecoveredEarlyEof=function(){var I=this;Promise.resolve().then(function(){I._emitter.emit(p.a.RECOVERED_EARLY_EOF)})},C.prototype._onMediaInfo=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.MEDIA_INFO,I)})},C.prototype._onMetaDataArrived=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.METADATA_ARRIVED,I)})},C.prototype._onScriptDataArrived=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.SCRIPTDATA_ARRIVED,I)})},C.prototype._onTimedID3MetadataArrived=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.TIMED_ID3_METADATA_ARRIVED,I)})},C.prototype._onSynchronousKLVMetadataArrived=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,I)})},C.prototype._onAsynchronousKLVMetadataArrived=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,I)})},C.prototype._onSMPTE2038MetadataArrived=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.SMPTE2038_METADATA_ARRIVED,I)})},C.prototype._onSCTE35MetadataArrived=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.SCTE35_METADATA_ARRIVED,I)})},C.prototype._onPESPrivateDataDescriptor=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.PES_PRIVATE_DATA_DESCRIPTOR,I)})},C.prototype._onPESPrivateDataArrived=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.PES_PRIVATE_DATA_ARRIVED,I)})},C.prototype._onStatisticsInfo=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.STATISTICS_INFO,I)})},C.prototype._onIOError=function(I,P){var M=this;Promise.resolve().then(function(){M._emitter.emit(p.a.IO_ERROR,I,P)})},C.prototype._onDemuxError=function(I,P){var M=this;Promise.resolve().then(function(){M._emitter.emit(p.a.DEMUX_ERROR,I,P)})},C.prototype._onRecommendSeekpoint=function(I){var P=this;Promise.resolve().then(function(){P._emitter.emit(p.a.RECOMMEND_SEEKPOINT,I)})},C.prototype._onLoggingConfigChanged=function(I){this._worker&&this._worker.postMessage({cmd:"logging_config",param:I})},C.prototype._onWorkerMessage=function(I){var P=I.data,M=P.data;if(P.msg==="destroyed"||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(P.msg){case p.a.INIT_SEGMENT:case p.a.MEDIA_SEGMENT:this._emitter.emit(P.msg,M.type,M.data);break;case p.a.LOADING_COMPLETE:case p.a.RECOVERED_EARLY_EOF:this._emitter.emit(P.msg);break;case p.a.MEDIA_INFO:Object.setPrototypeOf(M,g.a.prototype),this._emitter.emit(P.msg,M);break;case p.a.METADATA_ARRIVED:case p.a.SCRIPTDATA_ARRIVED:case p.a.TIMED_ID3_METADATA_ARRIVED:case p.a.SYNCHRONOUS_KLV_METADATA_ARRIVED:case p.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED:case p.a.SMPTE2038_METADATA_ARRIVED:case p.a.SCTE35_METADATA_ARRIVED:case p.a.PES_PRIVATE_DATA_DESCRIPTOR:case p.a.PES_PRIVATE_DATA_ARRIVED:case p.a.STATISTICS_INFO:this._emitter.emit(P.msg,M);break;case p.a.IO_ERROR:case p.a.DEMUX_ERROR:this._emitter.emit(P.msg,M.type,M.info);break;case p.a.RECOMMEND_SEEKPOINT:this._emitter.emit(P.msg,M);break;case"logcat_callback":c.a.emitter.emit("log",M.type,M.logcat)}},C}();i.a=A},function(t,i,n){var a=n(8),r=function(){function o(){}return o._ebsp2rbsp=function(d){for(var c=d,l=c.byteLength,f=new Uint8Array(l),p=0,g=0;g<l;g++)g>=2&&c[g]===3&&c[g-1]===0&&c[g-2]===0||(f[p]=c[g],p++);return new Uint8Array(f.buffer,0,p)},o.parseSPS=function(d){for(var c=d.subarray(1,4),l="avc1.",f=0;f<3;f++){var p=c[f].toString(16);p.length<2&&(p="0"+p),l+=p}var g=o._ebsp2rbsp(d),y=new a.a(g);y.readByte();var A=y.readByte();y.readByte();var C=y.readByte();y.readUEG();var I=o.getProfileString(A),P=o.getLevelString(C),M=1,G=420,Z=8,le=8;if((A===100||A===110||A===122||A===244||A===44||A===83||A===86||A===118||A===128||A===138||A===144)&&((M=y.readUEG())===3&&y.readBits(1),M<=3&&(G=[0,420,422,444][M]),Z=y.readUEG()+8,le=y.readUEG()+8,y.readBits(1),y.readBool()))for(var W=M!==3?8:12,N=0;N<W;N++)y.readBool()&&(N<6?o._skipScalingList(y,16):o._skipScalingList(y,64));y.readUEG();var U=y.readUEG();if(U===0)y.readUEG();else if(U===1){y.readBits(1),y.readSEG(),y.readSEG();var O=y.readUEG();for(N=0;N<O;N++)y.readSEG()}var z=y.readUEG();y.readBits(1);var ce=y.readUEG(),be=y.readUEG(),Le=y.readBits(1);Le===0&&y.readBits(1),y.readBits(1);var xe=0,ve=0,ze=0,Pe=0;y.readBool()&&(xe=y.readUEG(),ve=y.readUEG(),ze=y.readUEG(),Pe=y.readUEG());var Y=1,b=1,S=0,k=!0,R=0,w=0;if(y.readBool()){if(y.readBool()){var $=y.readByte();$>0&&$<16?(Y=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][$-1],b=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][$-1]):$===255&&(Y=y.readByte()<<8|y.readByte(),b=y.readByte()<<8|y.readByte())}if(y.readBool()&&y.readBool(),y.readBool()&&(y.readBits(4),y.readBool()&&y.readBits(24)),y.readBool()&&(y.readUEG(),y.readUEG()),y.readBool()){var X=y.readBits(32),ie=y.readBits(32);k=y.readBool(),S=(R=ie)/(w=2*X)}}var se=1;Y===1&&b===1||(se=Y/b);var me=0,ge=0;M===0?(me=1,ge=2-Le):(me=M===3?1:2,ge=(M===1?2:1)*(2-Le));var Re=16*(ce+1),Ge=16*(be+1)*(2-Le);Re-=(xe+ve)*me,Ge-=(ze+Pe)*ge;var Je=Math.ceil(Re*se);return y.destroy(),y=null,{codec_mimetype:l,profile_idc:A,level_idc:C,profile_string:I,level_string:P,chroma_format_idc:M,bit_depth:Z,bit_depth_luma:Z,bit_depth_chroma:le,ref_frames:z,chroma_format:G,chroma_format_string:o.getChromaFormatString(G),frame_rate:{fixed:k,fps:S,fps_den:w,fps_num:R},sar_ratio:{width:Y,height:b},codec_size:{width:Re,height:Ge},present_size:{width:Je,height:Ge}}},o._skipScalingList=function(d,c){for(var l=8,f=8,p=0;p<c;p++)f!==0&&(f=(l+d.readSEG()+256)%256),l=f===0?l:f},o.getProfileString=function(d){switch(d){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},o.getLevelString=function(d){return(d/10).toFixed(1)},o.getChromaFormatString=function(d){switch(d){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},o}();i.a=r},function(t,i,n){n.r(i),n(0);var a=n(9),r=n(19),o=n(18),d=n(1),c=n(14);i.default=function(l){var f=null,p=(function(xe,ve){l.postMessage({msg:"logcat_callback",data:{type:xe,logcat:ve}})}).bind(this);function g(xe,ve){var ze={msg:d.a.INIT_SEGMENT,data:{type:xe,data:ve}};l.postMessage(ze,[ve.data])}function y(xe,ve){var ze={msg:d.a.MEDIA_SEGMENT,data:{type:xe,data:ve}};l.postMessage(ze,[ve.data])}function A(){var xe={msg:d.a.LOADING_COMPLETE};l.postMessage(xe)}function C(){var xe={msg:d.a.RECOVERED_EARLY_EOF};l.postMessage(xe)}function I(xe){var ve={msg:d.a.MEDIA_INFO,data:xe};l.postMessage(ve)}function P(xe){var ve={msg:d.a.METADATA_ARRIVED,data:xe};l.postMessage(ve)}function M(xe){var ve={msg:d.a.SCRIPTDATA_ARRIVED,data:xe};l.postMessage(ve)}function G(xe){var ve={msg:d.a.TIMED_ID3_METADATA_ARRIVED,data:xe};l.postMessage(ve)}function Z(xe){var ve={msg:d.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,data:xe};l.postMessage(ve)}function le(xe){var ve={msg:d.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,data:xe};l.postMessage(ve)}function W(xe){var ve={msg:d.a.SMPTE2038_METADATA_ARRIVED,data:xe};l.postMessage(ve)}function N(xe){var ve={msg:d.a.SCTE35_METADATA_ARRIVED,data:xe};l.postMessage(ve)}function U(xe){var ve={msg:d.a.PES_PRIVATE_DATA_DESCRIPTOR,data:xe};l.postMessage(ve)}function O(xe){var ve={msg:d.a.PES_PRIVATE_DATA_ARRIVED,data:xe};l.postMessage(ve)}function z(xe){var ve={msg:d.a.STATISTICS_INFO,data:xe};l.postMessage(ve)}function ce(xe,ve){l.postMessage({msg:d.a.IO_ERROR,data:{type:xe,info:ve}})}function be(xe,ve){l.postMessage({msg:d.a.DEMUX_ERROR,data:{type:xe,info:ve}})}function Le(xe){l.postMessage({msg:d.a.RECOMMEND_SEEKPOINT,data:xe})}r.a.install(),l.addEventListener("message",function(xe){switch(xe.data.cmd){case"init":(f=new o.a(xe.data.param[0],xe.data.param[1])).on(d.a.IO_ERROR,ce.bind(this)),f.on(d.a.DEMUX_ERROR,be.bind(this)),f.on(d.a.INIT_SEGMENT,g.bind(this)),f.on(d.a.MEDIA_SEGMENT,y.bind(this)),f.on(d.a.LOADING_COMPLETE,A.bind(this)),f.on(d.a.RECOVERED_EARLY_EOF,C.bind(this)),f.on(d.a.MEDIA_INFO,I.bind(this)),f.on(d.a.METADATA_ARRIVED,P.bind(this)),f.on(d.a.SCRIPTDATA_ARRIVED,M.bind(this)),f.on(d.a.TIMED_ID3_METADATA_ARRIVED,G.bind(this)),f.on(d.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,Z.bind(this)),f.on(d.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,le.bind(this)),f.on(d.a.SMPTE2038_METADATA_ARRIVED,W.bind(this)),f.on(d.a.SCTE35_METADATA_ARRIVED,N.bind(this)),f.on(d.a.PES_PRIVATE_DATA_DESCRIPTOR,U.bind(this)),f.on(d.a.PES_PRIVATE_DATA_ARRIVED,O.bind(this)),f.on(d.a.STATISTICS_INFO,z.bind(this)),f.on(d.a.RECOMMEND_SEEKPOINT,Le.bind(this));break;case"destroy":f&&(f.destroy(),f=null),l.postMessage({msg:"destroyed"});break;case"start":f.start();break;case"stop":f.stop();break;case"seek":f.seek(xe.data.param);break;case"pause":f.pause();break;case"resume":f.resume();break;case"logging_config":var ve=xe.data.param;a.a.applyConfig(ve),ve.enableCallback===!0?a.a.addLogListener(p):a.a.removeLogListener(p);break;case"switch_audio":f._demuxer instanceof c.a&&(xe.data.param==="primary"?f._demuxer.preferred_secondary_audio=!1:xe.data.param==="secondary"&&(f._demuxer.preferred_secondary_audio=!0))}})}},function(t,i,n){t.exports=n(30).default},function(t,i,n){(function(a,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var o;o=function(){function d(ie){return typeof ie=="function"}var c=Array.isArray?Array.isArray:function(ie){return Object.prototype.toString.call(ie)==="[object Array]"},l=0,f=void 0,p=void 0,g=function(ie,se){G[l]=ie,G[l+1]=se,(l+=2)===2&&(p?p(Z):O())},y=typeof window<"u"?window:void 0,A=y||{},C=A.MutationObserver||A.WebKitMutationObserver,I=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",P=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function M(){var ie=setTimeout;return function(){return ie(Z,1)}}var G=new Array(1e3);function Z(){for(var ie=0;ie<l;ie+=2)(0,G[ie])(G[ie+1]),G[ie]=void 0,G[ie+1]=void 0;l=0}var le,W,N,U,O=void 0;function z(ie,se){var me=this,ge=new this.constructor(Le);ge[be]===void 0&&w(ge);var Re=me._state;if(Re){var Ge=arguments[Re-1];g(function(){return k(Re,ge,Ge,me._result)})}else b(me,ge,ie,se);return ge}function ce(ie){if(ie&&typeof ie=="object"&&ie.constructor===this)return ie;var se=new this(Le);return ve(se,ie),se}I?O=function(){return a.nextTick(Z)}:C?(W=0,N=new C(Z),U=document.createTextNode(""),N.observe(U,{characterData:!0}),O=function(){U.data=W=++W%2}):P?((le=new MessageChannel).port1.onmessage=Z,O=function(){return le.port2.postMessage(0)}):O=y===void 0?function(){try{var ie=Function("return this")().require("vertx");return(f=ie.runOnLoop||ie.runOnContext)!==void 0?function(){f(Z)}:M()}catch{return M()}}():M();var be=Math.random().toString(36).substring(2);function Le(){}function xe(ie,se,me){se.constructor===ie.constructor&&me===z&&se.constructor.resolve===ce?function(ge,Re){Re._state===1?Pe(ge,Re._result):Re._state===2?Y(ge,Re._result):b(Re,void 0,function(Ge){return ve(ge,Ge)},function(Ge){return Y(ge,Ge)})}(ie,se):me===void 0?Pe(ie,se):d(me)?function(ge,Re,Ge){g(function(Je){var st=!1,xt=function(qe,bt,St,Ue){try{qe.call(bt,St,Ue)}catch(Vt){return Vt}}(Ge,Re,function(qe){st||(st=!0,Re!==qe?ve(Je,qe):Pe(Je,qe))},function(qe){st||(st=!0,Y(Je,qe))},Je._label);!st&&xt&&(st=!0,Y(Je,xt))},ge)}(ie,se,me):Pe(ie,se)}function ve(ie,se){if(ie===se)Y(ie,new TypeError("You cannot resolve a promise with itself"));else if(Re=typeof(ge=se),ge===null||Re!=="object"&&Re!=="function")Pe(ie,se);else{var me=void 0;try{me=se.then}catch(Ge){return void Y(ie,Ge)}xe(ie,se,me)}var ge,Re}function ze(ie){ie._onerror&&ie._onerror(ie._result),S(ie)}function Pe(ie,se){ie._state===void 0&&(ie._result=se,ie._state=1,ie._subscribers.length!==0&&g(S,ie))}function Y(ie,se){ie._state===void 0&&(ie._state=2,ie._result=se,g(ze,ie))}function b(ie,se,me,ge){var Re=ie._subscribers,Ge=Re.length;ie._onerror=null,Re[Ge]=se,Re[Ge+1]=me,Re[Ge+2]=ge,Ge===0&&ie._state&&g(S,ie)}function S(ie){var se=ie._subscribers,me=ie._state;if(se.length!==0){for(var ge=void 0,Re=void 0,Ge=ie._result,Je=0;Je<se.length;Je+=3)ge=se[Je],Re=se[Je+me],ge?k(me,ge,Re,Ge):Re(Ge);ie._subscribers.length=0}}function k(ie,se,me,ge){var Re=d(me),Ge=void 0,Je=void 0,st=!0;if(Re){try{Ge=me(ge)}catch(xt){st=!1,Je=xt}if(se===Ge)return void Y(se,new TypeError("A promises callback cannot return that same promise."))}else Ge=ge;se._state!==void 0||(Re&&st?ve(se,Ge):st===!1?Y(se,Je):ie===1?Pe(se,Ge):ie===2&&Y(se,Ge))}var R=0;function w(ie){ie[be]=R++,ie._state=void 0,ie._result=void 0,ie._subscribers=[]}var $=function(){function ie(se,me){this._instanceConstructor=se,this.promise=new se(Le),this.promise[be]||w(this.promise),c(me)?(this.length=me.length,this._remaining=me.length,this._result=new Array(this.length),this.length===0?Pe(this.promise,this._result):(this.length=this.length||0,this._enumerate(me),this._remaining===0&&Pe(this.promise,this._result))):Y(this.promise,new Error("Array Methods must be provided an Array"))}return ie.prototype._enumerate=function(se){for(var me=0;this._state===void 0&&me<se.length;me++)this._eachEntry(se[me],me)},ie.prototype._eachEntry=function(se,me){var ge=this._instanceConstructor,Re=ge.resolve;if(Re===ce){var Ge=void 0,Je=void 0,st=!1;try{Ge=se.then}catch(qe){st=!0,Je=qe}if(Ge===z&&se._state!==void 0)this._settledAt(se._state,me,se._result);else if(typeof Ge!="function")this._remaining--,this._result[me]=se;else if(ge===X){var xt=new ge(Le);st?Y(xt,Je):xe(xt,se,Ge),this._willSettleAt(xt,me)}else this._willSettleAt(new ge(function(qe){return qe(se)}),me)}else this._willSettleAt(Re(se),me)},ie.prototype._settledAt=function(se,me,ge){var Re=this.promise;Re._state===void 0&&(this._remaining--,se===2?Y(Re,ge):this._result[me]=ge),this._remaining===0&&Pe(Re,this._result)},ie.prototype._willSettleAt=function(se,me){var ge=this;b(se,void 0,function(Re){return ge._settledAt(1,me,Re)},function(Re){return ge._settledAt(2,me,Re)})},ie}(),X=function(){function ie(se){this[be]=R++,this._result=this._state=void 0,this._subscribers=[],Le!==se&&(typeof se!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof ie?function(me,ge){try{ge(function(Re){ve(me,Re)},function(Re){Y(me,Re)})}catch(Re){Y(me,Re)}}(this,se):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return ie.prototype.catch=function(se){return this.then(null,se)},ie.prototype.finally=function(se){var me=this.constructor;return d(se)?this.then(function(ge){return me.resolve(se()).then(function(){return ge})},function(ge){return me.resolve(se()).then(function(){throw ge})}):this.then(se,se)},ie}();return X.prototype.then=z,X.all=function(ie){return new $(this,ie).promise},X.race=function(ie){var se=this;return c(ie)?new se(function(me,ge){for(var Re=ie.length,Ge=0;Ge<Re;Ge++)se.resolve(ie[Ge]).then(me,ge)}):new se(function(me,ge){return ge(new TypeError("You must pass an array to race."))})},X.resolve=ce,X.reject=function(ie){var se=new this(Le);return Y(se,ie),se},X._setScheduler=function(ie){p=ie},X._setAsap=function(ie){g=ie},X._asap=g,X.polyfill=function(){var ie=void 0;if(r!==void 0)ie=r;else if(typeof self<"u")ie=self;else try{ie=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var se=ie.Promise;if(se){var me=null;try{me=Object.prototype.toString.call(se.resolve())}catch{}if(me==="[object Promise]"&&!se.cast)return}ie.Promise=X},X.Promise=X,X},t.exports=o()}).call(this,n(27),n(28))},function(t,i){var n,a,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function c(P){if(n===setTimeout)return setTimeout(P,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(P,0);try{return n(P,0)}catch{try{return n.call(null,P,0)}catch{return n.call(this,P,0)}}}(function(){try{n=typeof setTimeout=="function"?setTimeout:o}catch{n=o}try{a=typeof clearTimeout=="function"?clearTimeout:d}catch{a=d}})();var l,f=[],p=!1,g=-1;function y(){p&&l&&(p=!1,l.length?f=l.concat(f):g=-1,f.length&&A())}function A(){if(!p){var P=c(y);p=!0;for(var M=f.length;M;){for(l=f,f=[];++g<M;)l&&l[g].run();g=-1,M=f.length}l=null,p=!1,function(G){if(a===clearTimeout)return clearTimeout(G);if((a===d||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(G);try{a(G)}catch{try{return a.call(null,G)}catch{return a.call(this,G)}}}(P)}}function C(P,M){this.fun=P,this.array=M}function I(){}r.nextTick=function(P){var M=new Array(arguments.length-1);if(arguments.length>1)for(var G=1;G<arguments.length;G++)M[G-1]=arguments[G];f.push(new C(P,M)),f.length!==1||p||c(A)},C.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=I,r.addListener=I,r.once=I,r.off=I,r.removeListener=I,r.removeAllListeners=I,r.emit=I,r.prependListener=I,r.prependOnceListener=I,r.listeners=function(P){return[]},r.binding=function(P){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(P){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,i){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}t.exports=n},function(t,i,n){n.r(i);var a=n(0),r=n(9),o=n(3),d=n(7),c=n(21),l=n(22),f=n(1),p=n(4),g=n(11);i.default=function(y){var A="PlayerEngineWorker",C=(function(Y,b){y.postMessage({msg:"logcat_callback",type:Y,logcat:b})}).bind(void 0),I=null,P=null,M=null,G=null,Z=!1,le=!1,W=0,N=0,U=!1;function O(){M&&(M.shutdown(),M.destroy(),M=null)}function z(){if(I==null||P==null)throw new o.a("Worker not initialized");if(G)throw new o.a("Transmuxer has been initialized");le||(!P.deferLoadAfterSourceOpen||Z?((G=new l.a(I,P)).on(f.a.INIT_SEGMENT,function(Y,b){M.appendInitSegment(b)}),G.on(f.a.MEDIA_SEGMENT,function(Y,b){M.appendMediaSegment(b),y.postMessage({msg:"buffered_position_changed",buffered_position_milliseconds:b.info.endDts})}),G.on(f.a.LOADING_COMPLETE,function(){M.endOfStream(),y.postMessage({msg:"player_event",event:p.a.LOADING_COMPLETE})}),G.on(f.a.RECOVERED_EARLY_EOF,function(){y.postMessage({msg:"player_event",event:p.a.RECOVERED_EARLY_EOF})}),G.on(f.a.IO_ERROR,function(Y,b){y.postMessage({msg:"player_event",event:p.a.ERROR,error_type:g.b.NETWORK_ERROR,error_detail:Y,info:b})}),G.on(f.a.DEMUX_ERROR,function(Y,b){y.postMessage({msg:"player_event",event:p.a.ERROR,error_type:g.b.MEDIA_ERROR,error_detail:Y,info:b})}),G.on(f.a.MEDIA_INFO,function(Y){ze(f.a.MEDIA_INFO,Y)}),G.on(f.a.STATISTICS_INFO,function(Y){ze(f.a.STATISTICS_INFO,Y)}),G.on(f.a.RECOMMEND_SEEKPOINT,function(Y){(function(b){y.postMessage({msg:"transmuxing_event",event:f.a.RECOMMEND_SEEKPOINT,milliseconds:b})})(Y)}),G.on(f.a.METADATA_ARRIVED,function(Y){Pe(p.a.METADATA_ARRIVED,Y)}),G.on(f.a.SCRIPTDATA_ARRIVED,function(Y){Pe(p.a.SCRIPTDATA_ARRIVED,Y)}),G.on(f.a.TIMED_ID3_METADATA_ARRIVED,function(Y){Pe(p.a.TIMED_ID3_METADATA_ARRIVED,Y)}),G.on(f.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,function(Y){Pe(p.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,Y)}),G.on(f.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,function(Y){Pe(p.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,Y)}),G.on(f.a.SMPTE2038_METADATA_ARRIVED,function(Y){Pe(p.a.SMPTE2038_METADATA_ARRIVED,Y)}),G.on(f.a.SCTE35_METADATA_ARRIVED,function(Y){Pe(p.a.SCTE35_METADATA_ARRIVED,Y)}),G.on(f.a.PES_PRIVATE_DATA_DESCRIPTOR,function(Y){Pe(p.a.PES_PRIVATE_DATA_DESCRIPTOR,Y)}),G.on(f.a.PES_PRIVATE_DATA_ARRIVED,function(Y){Pe(p.a.PES_PRIVATE_DATA_ARRIVED,Y)}),G.open()):le=!0)}function ce(){M&&M.flush(),G&&(G.close(),G.destroy(),G=null)}function be(){Z=!0,le&&(le=!1,z())}function Le(){y.postMessage({msg:"mse_event",event:d.a.UPDATE_END})}function xe(){a.a.v(A,"MSE SourceBuffer is full, report to main thread"),y.postMessage({msg:"mse_event",event:d.a.BUFFER_FULL})}function ve(Y){y.postMessage({msg:"player_event",event:p.a.ERROR,error_type:g.b.MEDIA_ERROR,error_detail:g.b.MEDIA_MSE_ERROR,info:Y})}function ze(Y,b){y.postMessage({msg:"transmuxing_event",event:Y,info:b})}function Pe(Y,b){y.postMessage({msg:"player_event",event:Y,extraData:b})}y.addEventListener("message",function(Y){if(!U){var b=Y.data;switch(b.cmd){case"logging_config":var S=b;r.a.applyConfig(S.logging_config),S.logging_config.enableCallback===!0?r.a.addLogListener(C):r.a.removeLogListener(C);break;case"init":I=(S=b).media_data_source,P=S.config;break;case"destroy":(function(){G&&ce(),M&&O(),U=!0,y.postMessage({msg:"destroyed"})})();break;case"initialize_mse":(function(){a.a.v(A,"Initializing MediaSource in DedicatedWorker"),(M=new c.a(P)).on(d.a.SOURCE_OPEN,be.bind(this)),M.on(d.a.UPDATE_END,Le.bind(this)),M.on(d.a.BUFFER_FULL,xe.bind(this)),M.on(d.a.ERROR,ve.bind(this)),M.initialize({getCurrentTime:function(){return W},getReadyState:function(){return N}});var k=M.getHandle();y.postMessage({msg:"mse_init",handle:k},[k])})();break;case"shutdown_mse":O();break;case"load":z();break;case"unload":ce();break;case"unbuffered_seek":S=b,M.flush(),G.seek(S.milliseconds);break;case"timeupdate":W=(S=b).current_time;break;case"readystatechange":N=(S=b).ready_state;break;case"pause_transmuxer":G.pause();break;case"resume_transmuxer":G.resume();break;case"switch_audio":(S=b).audio_track==="primary"?G.switchPrimaryAudio():S.audio_track==="secondary"&&G.switchSecondaryAudio()}}})}},function(t,i,n){n.r(i);var a=n(19),r=n(17),o={enableWorker:!1,enableWorkerForMSE:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,liveBufferLatencyChasing:!1,liveBufferLatencyChasingOnPaused:!1,liveBufferLatencyMaxLatency:1.5,liveBufferLatencyMinRemain:.5,liveSync:!1,liveSyncMaxLatency:1.2,liveSyncTargetLatency:.8,liveSyncPlaybackRate:1.2,liveSyncMinLatency:void 0,liveSyncMinPlaybackRate:.95,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function d(){return Object.assign({},o)}var c=n(10),l=n.n(c),f=n(20),p=n(0),g=n(9),y=n(7),A=n(4),C=n(1),I=n(5),P=n(12),M=function(){function Y(b,S,k){this.TAG="SeekingHandler",this._config=null,this._media_element=null,this._always_seek_keyframe=!1,this._on_unbuffered_seek=null,this._request_set_current_time=!1,this._seek_request_record_clocktime=null,this._idr_sample_list=new P.a,this.e=null,this._config=b,this._media_element=S,this._on_unbuffered_seek=k,this.e={onMediaSeeking:this._onMediaSeeking.bind(this)};var R=I.a.chrome&&(I.a.version.major<50||I.a.version.major===50&&I.a.version.build<2661);this._always_seek_keyframe=!!(R||I.a.msedge||I.a.msie),this._always_seek_keyframe&&(this._config.accurateSeek=!1),this._media_element.addEventListener("seeking",this.e.onMediaSeeking)}return Y.prototype.destroy=function(){this._idr_sample_list.clear(),this._idr_sample_list=null,this._media_element.removeEventListener("seeking",this.e.onMediaSeeking),this._media_element=null,this._on_unbuffered_seek=null},Y.prototype.seek=function(b){var S=this._isPositionBuffered(b),k=!1;if(b<1&&this._media_element.buffered.length>0){var R=this._media_element.buffered.start(0);(R<1&&b<R||I.a.safari)&&(k=!0,b=I.a.safari?.1:R)}if(k)this.directSeek(b);else if(S)if(this._always_seek_keyframe){var w=this._getNearestKeyframe(Math.floor(1e3*b));w!=null&&(b=w.dts/1e3),this.directSeek(b)}else this.directSeek(b);else this._idr_sample_list.clear(),this._on_unbuffered_seek(Math.floor(1e3*b)),this._config.accurateSeek&&this.directSeek(b)},Y.prototype.directSeek=function(b){this._request_set_current_time=!0,this._media_element.currentTime=b},Y.prototype.appendSyncPoints=function(b){this._idr_sample_list.appendArray(b)},Y.prototype._onMediaSeeking=function(b){if(this._request_set_current_time)this._request_set_current_time=!1;else{var S=this._media_element.currentTime,k=this._media_element.buffered;if(S<1&&k.length>0){var R=k.start(0);if(R<1&&S<R||I.a.safari){var w=I.a.safari?.1:R;return void this.directSeek(w)}}if(this._isPositionBuffered(S)){if(this._always_seek_keyframe){var $=this._getNearestKeyframe(Math.floor(1e3*S));$!=null&&(S=$.dts/1e3,this.directSeek(S))}}else this._seek_request_record_clocktime=Y._getClockTime(),window.setTimeout(this._pollAndApplyUnbufferedSeek.bind(this),50)}},Y.prototype._pollAndApplyUnbufferedSeek=function(){if(this._seek_request_record_clocktime!=null)if(this._seek_request_record_clocktime<=Y._getClockTime()-100){var b=this._media_element.currentTime;this._seek_request_record_clocktime=null,this._isPositionBuffered(b)||(this._idr_sample_list.clear(),this._on_unbuffered_seek(Math.floor(1e3*b)),this._config.accurateSeek&&this.directSeek(b))}else window.setTimeout(this._pollAndApplyUnbufferedSeek.bind(this),50)},Y.prototype._isPositionBuffered=function(b){for(var S=this._media_element.buffered,k=0;k<S.length;k++){var R=S.start(k),w=S.end(k);if(b>=R&&b<w)return!0}return!1},Y.prototype._getNearestKeyframe=function(b){return this._idr_sample_list.getLastSyncPointBeforeDts(b)},Y._getClockTime=function(){return self.performance&&self.performance.now?self.performance.now():Date.now()},Y}(),G=function(){function Y(b,S,k,R){this.TAG="LoadingController",this._config=null,this._media_element=null,this._on_pause_transmuxer=null,this._on_resume_transmuxer=null,this._paused=!1,this.e=null,this._config=b,this._media_element=S,this._on_pause_transmuxer=k,this._on_resume_transmuxer=R,this.e={onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this)}}return Y.prototype.destroy=function(){this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this.e=null,this._media_element=null,this._config=null,this._on_pause_transmuxer=null,this._on_resume_transmuxer=null},Y.prototype.notifyBufferedPositionChanged=function(b){!this._config.isLive&&this._config.lazyLoad&&(b==null?this._suspendTransmuxerIfNeeded():this._suspendTransmuxerIfBufferedPositionExceeded(b))},Y.prototype._onMediaTimeUpdate=function(b){this._paused&&this._resumeTransmuxerIfNeeded()},Y.prototype._suspendTransmuxerIfNeeded=function(){for(var b=this._media_element.buffered,S=this._media_element.currentTime,k=0,R=0;R<b.length;R++){var w=b.start(R),$=b.end(R);if(w<=S&&S<$){k=$;break}}k>0&&this._suspendTransmuxerIfBufferedPositionExceeded(k)},Y.prototype._suspendTransmuxerIfBufferedPositionExceeded=function(b){b>=this._media_element.currentTime+this._config.lazyLoadMaxDuration&&!this._paused&&(p.a.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this.suspendTransmuxer(),this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate))},Y.prototype.suspendTransmuxer=function(){this._paused=!0,this._on_pause_transmuxer()},Y.prototype._resumeTransmuxerIfNeeded=function(){for(var b=this._media_element.buffered,S=this._media_element.currentTime,k=this._config.lazyLoadRecoverDuration,R=!1,w=0;w<b.length;w++){var $=b.start(w),X=b.end(w);if(S>=$&&S<X){S>=X-k&&(R=!0);break}}R&&(p.a.v(this.TAG,"Continue loading from paused position"),this.resumeTransmuxer(),this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate))},Y.prototype.resumeTransmuxer=function(){this._paused=!1,this._on_resume_transmuxer()},Y}(),Z=function(){function Y(b,S){this.TAG="StartupStallJumper",this._media_element=null,this._on_direct_seek=null,this._canplay_received=!1,this.e=null,this._media_element=b,this._on_direct_seek=S,this.e={onMediaCanPlay:this._onMediaCanPlay.bind(this),onMediaStalled:this._onMediaStalled.bind(this),onMediaProgress:this._onMediaProgress.bind(this)},this._media_element.addEventListener("canplay",this.e.onMediaCanPlay),this._media_element.addEventListener("stalled",this.e.onMediaStalled),this._media_element.addEventListener("progress",this.e.onMediaProgress)}return Y.prototype.destroy=function(){this._media_element.removeEventListener("canplay",this.e.onMediaCanPlay),this._media_element.removeEventListener("stalled",this.e.onMediaStalled),this._media_element.removeEventListener("progress",this.e.onMediaProgress),this._media_element=null,this._on_direct_seek=null},Y.prototype._onMediaCanPlay=function(b){this._canplay_received=!0,this._media_element.removeEventListener("canplay",this.e.onMediaCanPlay)},Y.prototype._onMediaStalled=function(b){this._detectAndFixStuckPlayback(!0)},Y.prototype._onMediaProgress=function(b){this._detectAndFixStuckPlayback()},Y.prototype._detectAndFixStuckPlayback=function(b){var S=this._media_element,k=S.buffered;b||!this._canplay_received||S.readyState<2?k.length>0&&S.currentTime<k.start(0)&&(p.a.w(this.TAG,"Playback seems stuck at ".concat(S.currentTime,", seek to ").concat(k.start(0))),this._on_direct_seek(k.start(0)),this._media_element.removeEventListener("progress",this.e.onMediaProgress)):this._media_element.removeEventListener("progress",this.e.onMediaProgress)},Y}(),le=function(){function Y(b,S,k){this._config=null,this._media_element=null,this._on_direct_seek=null,this._config=b,this._media_element=S,this._on_direct_seek=k}return Y.prototype.destroy=function(){this._on_direct_seek=null,this._media_element=null,this._config=null},Y.prototype.notifyBufferedRangeUpdate=function(){this._chaseLiveLatency()},Y.prototype._chaseLiveLatency=function(){var b=this._media_element.buffered,S=this._media_element.currentTime,k=this._media_element.paused;if(this._config.isLive&&this._config.liveBufferLatencyChasing&&b.length!=0&&(this._config.liveBufferLatencyChasingOnPaused||!k)){var R=b.end(b.length-1);if(R>this._config.liveBufferLatencyMaxLatency&&R-S>this._config.liveBufferLatencyMaxLatency){var w=R-this._config.liveBufferLatencyMinRemain;this._on_direct_seek(w)}}},Y}(),W=function(){function Y(b,S){this.TAG="LiveLatencySynchronizer",this._config=null,this._media_element=null,this.e=null,this._config=b,this._media_element=S,this.e={onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this)},this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate)}return Y.prototype.destroy=function(){this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element=null,this._config=null},Y.prototype._onMediaTimeUpdate=function(b){if(this._config.isLive&&this._config.liveSync){var S=this._getCurrentLatency();if(S>this._config.liveSyncMaxLatency){var k=Math.min(2,Math.max(1,this._config.liveSyncPlaybackRate));this._media_element.playbackRate!==k&&(p.a.v(this.TAG,"playbackRate ".concat(this._media_element.playbackRate," => ").concat(k)),this._media_element.playbackRate=k)}else S>this._config.liveSyncTargetLatency||(this._config.liveSyncMinLatency!=null&&S<this._config.liveSyncMinLatency?(k=Math.min(1,Math.max(.5,this._config.liveSyncMinPlaybackRate)),this._media_element.playbackRate!==k&&(p.a.v(this.TAG,"playbackRate ".concat(this._media_element.playbackRate," => ").concat(k)),this._media_element.playbackRate=k)):this._media_element.playbackRate!==1&&this._media_element.playbackRate!==0&&(p.a.v(this.TAG,"playbackRate ".concat(this._media_element.playbackRate," => 1")),this._media_element.playbackRate=1))}},Y.prototype._getCurrentLatency=function(){if(!this._media_element)return 0;var b=this._media_element.buffered,S=this._media_element.currentTime;return b.length==0?0:b.end(b.length-1)-S},Y}(),N=function(){function Y(b,S){this.TAG="PlayerEngineDedicatedThread",this._emitter=new c,this._media_element=null,this._worker_destroying=!1,this._seeking_handler=null,this._loading_controller=null,this._startup_stall_jumper=null,this._live_latency_chaser=null,this._live_latency_synchronizer=null,this._pending_seek_time=null,this._media_info=null,this._statistics_info=null,this.e=null,this._prev_ready_state=0,this._media_data_source=b,this._config=d(),typeof S=="object"&&Object.assign(this._config,S),b.isLive===!0&&(this._config.isLive=!0),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this),onMediaLoadedMetadata:this._onMediaLoadedMetadata.bind(this),onMediaTimeUpdate:this._onMediaTimeUpdate.bind(this),onMediaReadyStateChanged:this._onMediaReadyStateChange.bind(this)},g.a.registerListener(this.e.onLoggingConfigChanged),this._worker=f(29,{all:!0}),this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",media_data_source:this._media_data_source,config:this._config}),this._worker.postMessage({cmd:"logging_config",logging_config:g.a.getConfig()})}return Y.isSupported=function(){return!!self.Worker&&(!(!self.MediaSource||!("canConstructInDedicatedWorker"in self.MediaSource)||self.MediaSource.canConstructInDedicatedWorker!==!0)||!(!self.ManagedMediaSource||!("canConstructInDedicatedWorker"in self.ManagedMediaSource)||self.ManagedMediaSource.canConstructInDedicatedWorker!==!0))},Y.prototype.destroy=function(){this._emitter.emit(A.a.DESTROYING),this.unload(),this.detachMediaElement(),this._worker_destroying=!0,this._worker.postMessage({cmd:"destroy"}),g.a.removeListener(this.e.onLoggingConfigChanged),this.e=null,this._media_data_source=null,this._emitter.removeAllListeners(),this._emitter=null},Y.prototype.on=function(b,S){var k=this;this._emitter.addListener(b,S),b===A.a.MEDIA_INFO&&this._media_info?Promise.resolve().then(function(){return k._emitter.emit(A.a.MEDIA_INFO,k.mediaInfo)}):b==A.a.STATISTICS_INFO&&this._statistics_info&&Promise.resolve().then(function(){return k._emitter.emit(A.a.STATISTICS_INFO,k.statisticsInfo)})},Y.prototype.off=function(b,S){this._emitter.removeListener(b,S)},Y.prototype.attachMediaElement=function(b){this._media_element=b,this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element.addEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.addEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element.addEventListener("emptied",this.e.onMediaReadyStateChanged),this._media_element.addEventListener("ended",this.e.onMediaReadyStateChanged),this._media_element.addEventListener("waiting",this.e.onMediaReadyStateChanged),this._media_element.addEventListener("canplay",this.e.onMediaReadyStateChanged),this._media_element.addEventListener("canplaythrough",this.e.onMediaReadyStateChanged),this._media_element.addEventListener("loadstart",this.e.onMediaReadyStateChanged),this._media_element.addEventListener("loadeddata",this.e.onMediaReadyStateChanged),this._media_element.addEventListener("loadedmetadata",this.e.onMediaReadyStateChanged),this._media_element.addEventListener("progress",this.e.onMediaReadyStateChanged),this._media_element.addEventListener("stalled",this.e.onMediaReadyStateChanged),this._worker.postMessage({cmd:"initialize_mse"})},Y.prototype.detachMediaElement=function(){this._worker.postMessage({cmd:"shutdown_mse"}),this._media_element&&(this._media_element.removeEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.removeEventListener("timeupdate",this.e.onMediaTimeUpdate),this._media_element.removeEventListener("emptied",this.e.onMediaReadyStateChanged),this._media_element.removeEventListener("ended",this.e.onMediaReadyStateChanged),this._media_element.removeEventListener("waiting",this.e.onMediaReadyStateChanged),this._media_element.removeEventListener("canplay",this.e.onMediaReadyStateChanged),this._media_element.removeEventListener("canplaythrough",this.e.onMediaReadyStateChanged),this._media_element.removeEventListener("loadstart",this.e.onMediaReadyStateChanged),this._media_element.removeEventListener("loadeddata",this.e.onMediaReadyStateChanged),this._media_element.removeEventListener("loadedmetadata",this.e.onMediaReadyStateChanged),this._media_element.removeEventListener("progress",this.e.onMediaReadyStateChanged),this._media_element.removeEventListener("stalled",this.e.onMediaReadyStateChanged),this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element=null)},Y.prototype.load=function(){this._worker.postMessage({cmd:"load"}),this._seeking_handler=new M(this._config,this._media_element,this._onRequiredUnbufferedSeek.bind(this)),this._loading_controller=new G(this._config,this._media_element,this._onRequestPauseTransmuxer.bind(this),this._onRequestResumeTransmuxer.bind(this)),this._startup_stall_jumper=new Z(this._media_element,this._onRequestDirectSeek.bind(this)),this._config.isLive&&this._config.liveBufferLatencyChasing&&(this._live_latency_chaser=new le(this._config,this._media_element,this._onRequestDirectSeek.bind(this))),this._config.isLive&&this._config.liveSync&&(this._live_latency_synchronizer=new W(this._config,this._media_element)),this._media_element.readyState>0&&this._seeking_handler.directSeek(0)},Y.prototype.unload=function(){var b,S,k,R,w,$;(b=this._media_element)===null||b===void 0||b.pause(),this._worker.postMessage({cmd:"unload"}),(S=this._live_latency_synchronizer)===null||S===void 0||S.destroy(),this._live_latency_synchronizer=null,(k=this._live_latency_chaser)===null||k===void 0||k.destroy(),this._live_latency_chaser=null,(R=this._startup_stall_jumper)===null||R===void 0||R.destroy(),this._startup_stall_jumper=null,(w=this._loading_controller)===null||w===void 0||w.destroy(),this._loading_controller=null,($=this._seeking_handler)===null||$===void 0||$.destroy(),this._seeking_handler=null},Y.prototype.play=function(){return this._media_element.play()},Y.prototype.pause=function(){this._media_element.pause()},Y.prototype.seek=function(b){this._media_element&&this._seeking_handler?this._seeking_handler.seek(b):this._pending_seek_time=b},Y.prototype.switchPrimaryAudio=function(){this._worker.postMessage({cmd:"switch_audio",audio_track:"primary"})},Y.prototype.switchSecondaryAudio=function(){this._worker.postMessage({cmd:"switch_audio",audio_track:"secondary"})},Object.defineProperty(Y.prototype,"mediaInfo",{get:function(){return Object.assign({},this._media_info)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"statisticsInfo",{get:function(){return Object.assign({},this._statistics_info)},enumerable:!1,configurable:!0}),Y.prototype._onLoggingConfigChanged=function(b){var S;(S=this._worker)===null||S===void 0||S.postMessage({cmd:"logging_config",logging_config:b})},Y.prototype._onMSEUpdateEnd=function(){this._config.isLive&&this._config.liveBufferLatencyChasing&&this._live_latency_chaser&&this._live_latency_chaser.notifyBufferedRangeUpdate(),this._loading_controller.notifyBufferedPositionChanged()},Y.prototype._onMSEBufferFull=function(){p.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._loading_controller.suspendTransmuxer()},Y.prototype._onMediaLoadedMetadata=function(b){this._pending_seek_time!=null&&(this._seeking_handler.seek(this._pending_seek_time),this._pending_seek_time=null)},Y.prototype._onRequestDirectSeek=function(b){this._seeking_handler.directSeek(b)},Y.prototype._onRequiredUnbufferedSeek=function(b){this._worker.postMessage({cmd:"unbuffered_seek",milliseconds:b})},Y.prototype._onRequestPauseTransmuxer=function(){this._worker.postMessage({cmd:"pause_transmuxer"})},Y.prototype._onRequestResumeTransmuxer=function(){this._worker.postMessage({cmd:"resume_transmuxer"})},Y.prototype._onMediaTimeUpdate=function(b){this._worker.postMessage({cmd:"timeupdate",current_time:b.target.currentTime})},Y.prototype._onMediaReadyStateChange=function(){var b;this._media_element!=null&&this._prev_ready_state!==((b=this._media_element)===null||b===void 0?void 0:b.readyState)&&(this._prev_ready_state=this._media_element.readyState,this._worker.postMessage({cmd:"readystatechange",ready_state:this._media_element.readyState}))},Y.prototype._onWorkerMessage=function(b){var S,k=b.data,R=k.msg;if(R=="destroyed"||this._worker_destroying)return this._worker_destroying=!1,(S=this._worker)===null||S===void 0||S.terminate(),void(this._worker=null);switch(R){case"mse_init":var w=k;"ManagedMediaSource"in self&&!("MediaSource"in self)&&(this._media_element.disableRemotePlayback=!0),this._media_element.srcObject=w.handle;break;case"mse_event":(w=k).event==y.a.UPDATE_END?this._onMSEUpdateEnd():w.event==y.a.BUFFER_FULL&&this._onMSEBufferFull();break;case"transmuxing_event":if((w=k).event==C.a.MEDIA_INFO){var $=k;this._media_info=$.info,this._emitter.emit(A.a.MEDIA_INFO,Object.assign({},$.info))}else if(w.event==C.a.STATISTICS_INFO){var X=k;this._statistics_info=this._fillStatisticsInfo(X.info),this._emitter.emit(A.a.STATISTICS_INFO,Object.assign({},X.info))}else if(w.event==C.a.RECOMMEND_SEEKPOINT){var ie=k;this._media_element&&!this._config.accurateSeek&&this._seeking_handler.directSeek(ie.milliseconds/1e3)}break;case"player_event":if((w=k).event==A.a.ERROR){var se=k;this._emitter.emit(A.a.ERROR,se.error_type,se.error_detail,se.info)}else if("extraData"in w){var me=k;this._emitter.emit(me.event,me.extraData)}break;case"logcat_callback":w=k,p.a.emitter.emit("log",w.type,w.logcat);break;case"buffered_position_changed":w=k,this._loading_controller.notifyBufferedPositionChanged(w.buffered_position_milliseconds/1e3)}},Y.prototype._fillStatisticsInfo=function(b){if(b.playerType="MSEPlayer",!(this._media_element instanceof HTMLVideoElement))return b;var S=!0,k=0,R=0;if(this._media_element.getVideoPlaybackQuality){var w=this._media_element.getVideoPlaybackQuality();k=w.totalVideoFrames,R=w.droppedVideoFrames}else this._media_element.webkitDecodedFrameCount!=null?(k=this._media_element.webkitDecodedFrameCount,R=this._media_element.webkitDroppedFrameCount):S=!1;return S&&(b.decodedFrames=k,b.droppedFrames=R),b},Y}(),U=function(){function Y(){}return Y.supportMSEH264Playback=function(){var b=self.MediaSource&&self.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),S=self.ManagedMediaSource&&self.ManagedMediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');return b===!0||S===!0},Y.supportMSEH265Playback=function(){var b=self.MediaSource&&self.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"'),S=self.ManagedMediaSource&&self.ManagedMediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"');return b===!0||S===!0},Y.supportWorkerForMSEH265Playback=function(){return new Promise(function(b){if(N.isSupported()){var S=URL.createObjectURL(new Blob([`
                const hevc_mime_type = 'video/mp4; codecs="hvc1.1.6.L93.B0"';
                const support_w3c_mse = self.MediaSource && self.MediaSource.isTypeSupported(hevc_mime_type);
                const support_apple_mme = self.ManagedMediaSource && self.ManagedMediaSource.isTypeSupported(hevc_mime_type);
                self.postMessage(support_w3c_mse === true || support_apple_mme === true);
            `],{type:"application/javascript"}));new Worker(S).addEventListener("message",function(k){return b(k.data)}),URL.revokeObjectURL(S)}else b(!1)})},Y.supportNetworkStreamIO=function(){var b=new r.a({},d()),S=b.loaderType;return b.destroy(),S=="fetch-stream-loader"||S=="xhr-moz-chunked-loader"},Y.getNetworkLoaderTypeName=function(){var b=new r.a({},d()),S=b.loaderType;return b.destroy(),S},Y.supportNativeMediaPlayback=function(b){Y.videoElement==null&&(Y.videoElement=window.document.createElement("video"));var S=Y.videoElement.canPlayType(b);return S==="probably"||S=="maybe"},Y.getFeatureList=function(){var b={msePlayback:!1,mseLivePlayback:!1,mseH265Playback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return b.msePlayback=Y.supportMSEH264Playback(),b.networkStreamIO=Y.supportNetworkStreamIO(),b.networkLoaderName=Y.getNetworkLoaderTypeName(),b.mseLivePlayback=b.msePlayback&&b.networkStreamIO,b.mseH265Playback=Y.supportMSEH265Playback(),b.nativeMP4H264Playback=Y.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),b.nativeMP4H265Playback=Y.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),b.nativeWebmVP8Playback=Y.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),b.nativeWebmVP9Playback=Y.supportNativeMediaPlayback('video/webm; codecs="vp9"'),b},Y}(),O=n(2),z=n(21),ce=n(22),be=n(11),Le=n(3),xe=function(){function Y(b,S){this.TAG="PlayerEngineMainThread",this._emitter=new c,this._media_element=null,this._mse_controller=null,this._transmuxer=null,this._pending_seek_time=null,this._seeking_handler=null,this._loading_controller=null,this._startup_stall_jumper=null,this._live_latency_chaser=null,this._live_latency_synchronizer=null,this._mse_source_opened=!1,this._has_pending_load=!1,this._loaded_metadata_received=!1,this._media_info=null,this._statistics_info=null,this.e=null,this._media_data_source=b,this._config=d(),typeof S=="object"&&Object.assign(this._config,S),b.isLive===!0&&(this._config.isLive=!0),this.e={onMediaLoadedMetadata:this._onMediaLoadedMetadata.bind(this)}}return Y.prototype.destroy=function(){this._emitter.emit(A.a.DESTROYING),this._transmuxer&&this.unload(),this._media_element&&this.detachMediaElement(),this.e=null,this._media_data_source=null,this._emitter.removeAllListeners(),this._emitter=null},Y.prototype.on=function(b,S){var k=this;this._emitter.addListener(b,S),b===A.a.MEDIA_INFO&&this._media_info?Promise.resolve().then(function(){return k._emitter.emit(A.a.MEDIA_INFO,k.mediaInfo)}):b==A.a.STATISTICS_INFO&&this._statistics_info&&Promise.resolve().then(function(){return k._emitter.emit(A.a.STATISTICS_INFO,k.statisticsInfo)})},Y.prototype.off=function(b,S){this._emitter.removeListener(b,S)},Y.prototype.attachMediaElement=function(b){var S=this;this._media_element=b,b.src="",b.removeAttribute("src"),b.srcObject=null,b.load(),b.addEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._mse_controller=new z.a(this._config),this._mse_controller.on(y.a.UPDATE_END,this._onMSEUpdateEnd.bind(this)),this._mse_controller.on(y.a.BUFFER_FULL,this._onMSEBufferFull.bind(this)),this._mse_controller.on(y.a.SOURCE_OPEN,this._onMSESourceOpen.bind(this)),this._mse_controller.on(y.a.ERROR,this._onMSEError.bind(this)),this._mse_controller.on(y.a.START_STREAMING,this._onMSEStartStreaming.bind(this)),this._mse_controller.on(y.a.END_STREAMING,this._onMSEEndStreaming.bind(this)),this._mse_controller.initialize({getCurrentTime:function(){return S._media_element.currentTime},getReadyState:function(){return S._media_element.readyState}}),this._mse_controller.isManagedMediaSource()?(b.disableRemotePlayback=!0,b.srcObject=this._mse_controller.getObject()):b.src=this._mse_controller.getObjectURL()},Y.prototype.detachMediaElement=function(){this._media_element&&(this._mse_controller.shutdown(),this._media_element.removeEventListener("loadedmetadata",this.e.onMediaLoadedMetadata),this._media_element.src="",this._media_element.removeAttribute("src"),this._media_element.srcObject=null,this._media_element.load(),this._media_element=null,this._mse_controller.revokeObjectURL()),this._mse_controller&&(this._mse_controller.destroy(),this._mse_controller=null)},Y.prototype.load=function(){var b=this;if(!this._media_element)throw new Le.a("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new Le.a("load() has been called, please call unload() first!");this._has_pending_load||(!this._config.deferLoadAfterSourceOpen||this._mse_source_opened?(this._transmuxer=new ce.a(this._media_data_source,this._config),this._transmuxer.on(C.a.INIT_SEGMENT,function(S,k){b._mse_controller.appendInitSegment(k)}),this._transmuxer.on(C.a.MEDIA_SEGMENT,function(S,k){b._mse_controller.appendMediaSegment(k),!b._config.isLive&&S==="video"&&k.data&&k.data.byteLength>0&&"info"in k&&b._seeking_handler.appendSyncPoints(k.info.syncPoints),b._loading_controller.notifyBufferedPositionChanged(k.info.endDts/1e3)}),this._transmuxer.on(C.a.LOADING_COMPLETE,function(){b._mse_controller.endOfStream(),b._emitter.emit(A.a.LOADING_COMPLETE)}),this._transmuxer.on(C.a.RECOVERED_EARLY_EOF,function(){b._emitter.emit(A.a.RECOVERED_EARLY_EOF)}),this._transmuxer.on(C.a.IO_ERROR,function(S,k){b._emitter.emit(A.a.ERROR,be.b.NETWORK_ERROR,S,k)}),this._transmuxer.on(C.a.DEMUX_ERROR,function(S,k){b._emitter.emit(A.a.ERROR,be.b.MEDIA_ERROR,S,k)}),this._transmuxer.on(C.a.MEDIA_INFO,function(S){b._media_info=S,b._emitter.emit(A.a.MEDIA_INFO,Object.assign({},S))}),this._transmuxer.on(C.a.STATISTICS_INFO,function(S){b._statistics_info=b._fillStatisticsInfo(S),b._emitter.emit(A.a.STATISTICS_INFO,Object.assign({},S))}),this._transmuxer.on(C.a.RECOMMEND_SEEKPOINT,function(S){b._media_element&&!b._config.accurateSeek&&b._seeking_handler.directSeek(S/1e3)}),this._transmuxer.on(C.a.METADATA_ARRIVED,function(S){b._emitter.emit(A.a.METADATA_ARRIVED,S)}),this._transmuxer.on(C.a.SCRIPTDATA_ARRIVED,function(S){b._emitter.emit(A.a.SCRIPTDATA_ARRIVED,S)}),this._transmuxer.on(C.a.TIMED_ID3_METADATA_ARRIVED,function(S){b._emitter.emit(A.a.TIMED_ID3_METADATA_ARRIVED,S)}),this._transmuxer.on(C.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,function(S){b._emitter.emit(A.a.SYNCHRONOUS_KLV_METADATA_ARRIVED,S)}),this._transmuxer.on(C.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,function(S){b._emitter.emit(A.a.ASYNCHRONOUS_KLV_METADATA_ARRIVED,S)}),this._transmuxer.on(C.a.SMPTE2038_METADATA_ARRIVED,function(S){b._emitter.emit(A.a.SMPTE2038_METADATA_ARRIVED,S)}),this._transmuxer.on(C.a.SCTE35_METADATA_ARRIVED,function(S){b._emitter.emit(A.a.SCTE35_METADATA_ARRIVED,S)}),this._transmuxer.on(C.a.PES_PRIVATE_DATA_DESCRIPTOR,function(S){b._emitter.emit(A.a.PES_PRIVATE_DATA_DESCRIPTOR,S)}),this._transmuxer.on(C.a.PES_PRIVATE_DATA_ARRIVED,function(S){b._emitter.emit(A.a.PES_PRIVATE_DATA_ARRIVED,S)}),this._seeking_handler=new M(this._config,this._media_element,this._onRequiredUnbufferedSeek.bind(this)),this._loading_controller=new G(this._config,this._media_element,this._onRequestPauseTransmuxer.bind(this),this._onRequestResumeTransmuxer.bind(this)),this._startup_stall_jumper=new Z(this._media_element,this._onRequestDirectSeek.bind(this)),this._config.isLive&&this._config.liveBufferLatencyChasing&&(this._live_latency_chaser=new le(this._config,this._media_element,this._onRequestDirectSeek.bind(this))),this._config.isLive&&this._config.liveSync&&(this._live_latency_synchronizer=new W(this._config,this._media_element)),this._media_element.readyState>0&&this._seeking_handler.directSeek(0),this._transmuxer.open()):this._has_pending_load=!0)},Y.prototype.unload=function(){var b,S,k,R,w,$,X,ie,se;(b=this._media_element)===null||b===void 0||b.pause(),(S=this._live_latency_synchronizer)===null||S===void 0||S.destroy(),this._live_latency_synchronizer=null,(k=this._live_latency_chaser)===null||k===void 0||k.destroy(),this._live_latency_chaser=null,(R=this._startup_stall_jumper)===null||R===void 0||R.destroy(),this._startup_stall_jumper=null,(w=this._loading_controller)===null||w===void 0||w.destroy(),this._loading_controller=null,($=this._seeking_handler)===null||$===void 0||$.destroy(),this._seeking_handler=null,(X=this._mse_controller)===null||X===void 0||X.flush(),(ie=this._transmuxer)===null||ie===void 0||ie.close(),(se=this._transmuxer)===null||se===void 0||se.destroy(),this._transmuxer=null},Y.prototype.play=function(){return this._media_element.play()},Y.prototype.pause=function(){this._media_element.pause()},Y.prototype.seek=function(b){this._media_element&&this._seeking_handler?this._seeking_handler.seek(b):this._pending_seek_time=b},Y.prototype.switchPrimaryAudio=function(){this._transmuxer.switchPrimaryAudio()},Y.prototype.switchSecondaryAudio=function(){this._transmuxer.switchSecondaryAudio()},Object.defineProperty(Y.prototype,"mediaInfo",{get:function(){return Object.assign({},this._media_info)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"statisticsInfo",{get:function(){return Object.assign({},this._statistics_info)},enumerable:!1,configurable:!0}),Y.prototype._onMSESourceOpen=function(){this._mse_source_opened=!0,this._has_pending_load&&(this._has_pending_load=!1,this.load())},Y.prototype._onMSEUpdateEnd=function(){this._config.isLive&&this._config.liveBufferLatencyChasing&&this._live_latency_chaser&&this._live_latency_chaser.notifyBufferedRangeUpdate(),this._loading_controller.notifyBufferedPositionChanged()},Y.prototype._onMSEBufferFull=function(){p.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._loading_controller.suspendTransmuxer()},Y.prototype._onMSEError=function(b){this._emitter.emit(A.a.ERROR,be.b.MEDIA_ERROR,be.a.MEDIA_MSE_ERROR,b)},Y.prototype._onMSEStartStreaming=function(){this._loaded_metadata_received&&(this._config.isLive||(p.a.v(this.TAG,"Resume transmuxing task due to ManagedMediaSource onStartStreaming"),this._loading_controller.resumeTransmuxer()))},Y.prototype._onMSEEndStreaming=function(){this._config.isLive||(p.a.v(this.TAG,"Suspend transmuxing task due to ManagedMediaSource onEndStreaming"),this._loading_controller.suspendTransmuxer())},Y.prototype._onMediaLoadedMetadata=function(b){this._loaded_metadata_received=!0,this._pending_seek_time!=null&&(this._seeking_handler.seek(this._pending_seek_time),this._pending_seek_time=null)},Y.prototype._onRequestDirectSeek=function(b){this._seeking_handler.directSeek(b)},Y.prototype._onRequiredUnbufferedSeek=function(b){this._mse_controller.flush(),this._transmuxer.seek(b)},Y.prototype._onRequestPauseTransmuxer=function(){this._transmuxer.pause()},Y.prototype._onRequestResumeTransmuxer=function(){this._transmuxer.resume()},Y.prototype._fillStatisticsInfo=function(b){if(b.playerType="MSEPlayer",!(this._media_element instanceof HTMLVideoElement))return b;var S=!0,k=0,R=0;if(this._media_element.getVideoPlaybackQuality){var w=this._media_element.getVideoPlaybackQuality();k=w.totalVideoFrames,R=w.droppedVideoFrames}else this._media_element.webkitDecodedFrameCount!=null?(k=this._media_element.webkitDecodedFrameCount,R=this._media_element.webkitDroppedFrameCount):S=!1;return S&&(b.decodedFrames=k,b.droppedFrames=R),b},Y}(),ve=function(){function Y(b,S){this.TAG="MSEPlayer",this._type="MSEPlayer",this._media_element=null,this._player_engine=null;var k=b.type.toLowerCase();if(k!=="mse"&&k!=="mpegts"&&k!=="m2ts"&&k!=="flv")throw new Le.b("MSEPlayer requires an mpegts/m2ts/flv MediaDataSource input!");if(S&&S.enableWorkerForMSE&&N.isSupported())try{this._player_engine=new N(b,S)}catch{p.a.e(this.TAG,"Error while initializing PlayerEngineDedicatedThread, fallback to PlayerEngineMainThread"),this._player_engine=new xe(b,S)}else this._player_engine=new xe(b,S)}return Y.prototype.destroy=function(){this._player_engine.destroy(),this._player_engine=null,this._media_element=null},Y.prototype.on=function(b,S){this._player_engine.on(b,S)},Y.prototype.off=function(b,S){this._player_engine.off(b,S)},Y.prototype.attachMediaElement=function(b){this._media_element=b,this._player_engine.attachMediaElement(b)},Y.prototype.detachMediaElement=function(){this._media_element=null,this._player_engine.detachMediaElement()},Y.prototype.load=function(){this._player_engine.load()},Y.prototype.unload=function(){this._player_engine.unload()},Y.prototype.play=function(){return this._player_engine.play()},Y.prototype.pause=function(){this._player_engine.pause()},Y.prototype.switchPrimaryAudio=function(){this._player_engine.switchPrimaryAudio()},Y.prototype.switchSecondaryAudio=function(){this._player_engine.switchSecondaryAudio()},Object.defineProperty(Y.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"buffered",{get:function(){return this._media_element.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"duration",{get:function(){return this._media_element.duration},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"volume",{get:function(){return this._media_element.volume},set:function(b){this._media_element.volume=b},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"muted",{get:function(){return this._media_element.muted},set:function(b){this._media_element.muted=b},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"currentTime",{get:function(){return this._media_element?this._media_element.currentTime:0},set:function(b){this._player_engine.seek(b)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"mediaInfo",{get:function(){return this._player_engine.mediaInfo},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"statisticsInfo",{get:function(){return this._player_engine.statisticsInfo},enumerable:!1,configurable:!0}),Y}(),ze=function(){function Y(b,S){this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new l.a,this._config=d(),typeof S=="object"&&Object.assign(this._config,S);var k=b.type.toLowerCase();if(k==="mse"||k==="mpegts"||k==="m2ts"||k==="flv")throw new Le.b("NativePlayer does't support mse/mpegts/m2ts/flv MediaDataSource input!");if(b.hasOwnProperty("segments"))throw new Le.b("NativePlayer(".concat(b.type,") doesn't support multipart playback!"));this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=b,this._mediaElement=null}return Y.prototype.destroy=function(){this._emitter.emit(A.a.DESTROYING),this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},Y.prototype.on=function(b,S){var k=this;b===A.a.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){k._emitter.emit(A.a.MEDIA_INFO,k.mediaInfo)}):b===A.a.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){k._emitter.emit(A.a.STATISTICS_INFO,k.statisticsInfo)}),this._emitter.addListener(b,S)},Y.prototype.off=function(b,S){this._emitter.removeListener(b,S)},Y.prototype.attachMediaElement=function(b){if(this._mediaElement=b,b.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{b.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},Y.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},Y.prototype.load=function(){if(!this._mediaElement)throw new Le.a("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},Y.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},Y.prototype.play=function(){return this._mediaElement.play()},Y.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(Y.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(b){this._mediaElement.volume=b},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(b){this._mediaElement.muted=b},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(b){this._mediaElement?this._mediaElement.currentTime=b:this._pendingSeekTime=b},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"mediaInfo",{get:function(){var b={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(b.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(b.width=this._mediaElement.videoWidth,b.height=this._mediaElement.videoHeight)),b},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"statisticsInfo",{get:function(){var b={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return b;var S=!0,k=0,R=0;if(this._mediaElement.getVideoPlaybackQuality){var w=this._mediaElement.getVideoPlaybackQuality();k=w.totalVideoFrames,R=w.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(k=this._mediaElement.webkitDecodedFrameCount,R=this._mediaElement.webkitDroppedFrameCount):S=!1;return S&&(b.decodedFrames=k,b.droppedFrames=R),b},enumerable:!1,configurable:!0}),Y.prototype._onvLoadedMetadata=function(b){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(A.a.MEDIA_INFO,this.mediaInfo)},Y.prototype._reportStatisticsInfo=function(){this._emitter.emit(A.a.STATISTICS_INFO,this.statisticsInfo)},Y}();a.a.install();var Pe={createPlayer:function(Y,b){var S=Y;if(S==null||typeof S!="object")throw new Le.b("MediaDataSource must be an javascript object!");if(!S.hasOwnProperty("type"))throw new Le.b("MediaDataSource must has type field to indicate video file type!");switch(S.type){case"mse":case"mpegts":case"m2ts":case"flv":return new ve(S,b);default:return new ze(S,b)}},isSupported:function(){return U.supportMSEH264Playback()},getFeatureList:function(){return U.getFeatureList()},supportWorkerForMSEH265Playback:function(){return U.supportWorkerForMSEH265Playback()}};Pe.BaseLoader=O.a,Pe.LoaderStatus=O.c,Pe.LoaderErrors=O.b,Pe.Events=A.a,Pe.ErrorTypes=be.b,Pe.ErrorDetails=be.a,Pe.MSEPlayer=ve,Pe.NativePlayer=ze,Pe.LoggingControl=g.a,Object.defineProperty(Pe,"version",{enumerable:!0,get:function(){return"1.7.3"}}),i.default=Pe}])})})(ap);var YE=ap.exports;const XE=bl(YE);class xu{constructor(e,t){Se(this,"restart_required_when_quality_switched",!1);Se(this,"player");Se(this,"playback_mode");Se(this,"watch_content_element");Se(this,"watch_header_element");Se(this,"watch_player_element");Se(this,"request_picture_in_picture",null);this.player=e,this.playback_mode=t,this.watch_content_element=document.querySelector(".watch-content"),this.watch_header_element=document.querySelector(".watch-header"),this.watch_player_element=document.querySelector(".watch-player")}async init(){const e=Gi();if(!("documentPictureInPicture"in window)){this.player.template.pipButton.style.display="none",console.log("[DocumentPiPManager] Initialized. (Document Picture-in-Picture API is not supported.)");return}this.request_picture_in_picture=this.player.video.requestPictureInPicture,this.player.video.requestPictureInPicture=async()=>{if(documentPictureInPicture.window)return documentPictureInPicture.window.close(),{};documentPictureInPicture.onenter=c=>{console.log("[DocumentPiPManager] Picture-in-Picture window entered."),e.is_document_pip=!0,e.event_emitter.emit("SetControlDisplayTimer",{is_player_region_event:!0,timeout_seconds:0})};const t=await documentPictureInPicture.requestWindow({width:540,height:304}),i=t.document.createElement("meta");i.name="darkreader-lock",t.document.head.appendChild(i),[...document.styleSheets].forEach(c=>{try{const l=[...c.cssRules].map(p=>p.cssText).join(""),f=document.createElement("style");f.textContent=l,t.document.head.appendChild(f)}catch{const f=document.createElement("link");f.rel="stylesheet",f.type=c.type,f.media=c.media.mediaText,f.href=c.href,t.document.head.appendChild(f)}}),t.document.body.classList.add("watch-container"),t.document.body.classList.add("watch-container--fullscreen"),Tr(()=>e.is_control_display,c=>{c?t.document.body.classList.add("watch-container--control-display"):t.document.body.classList.remove("watch-container--control-display")});const n=t.document.createElement("div");n.classList.add("watch-content"),n.append(this.watch_header_element),n.append(this.watch_player_element),t.document.body.append(n);const a=document.createElement("div");a.classList.add("playing-in-pip");const r=document.createElement("span");r.classList.add("playing-in-pip__text"),r.textContent="Picture-in-Picture „ÇíÂÜçÁîü„Åó„Å¶„ÅÑ„Åæ„Åô",a.append(r);const o=document.createElement("button");o.classList.add("playing-in-pip__close-button"),o.textContent="Picture-in-Picture „ÇíÁµÇ‰∫Ü",o.onclick=()=>t.close(),a.append(o),this.watch_content_element.append(a);const d=c=>{e.event_emitter.emit("SetControlDisplayTimer",{event:c,is_player_region_event:!0,timeout_seconds:1.25})};return n.addEventListener("mousemove",d),n.addEventListener("touchmove",d),n.addEventListener("click",d),t.addEventListener("pagehide",()=>{e.is_document_pip=!1,a.remove(),this.watch_content_element.append(this.watch_header_element),this.watch_content_element.append(this.watch_player_element),console.log("[DocumentPiPManager] Picture-in-Picture window exited.")}),{}},console.log("[DocumentPiPManager] Initialized.")}async destroy(){if(!("documentPictureInPicture"in window)){console.log("[DocumentPiPManager] Destroyed. (Document Picture-in-Picture API is not supported.)");return}documentPictureInPicture.window!==null&&documentPictureInPicture.window.close(),documentPictureInPicture.onenter=null,this.request_picture_in_picture!==null&&(this.player.video.requestPictureInPicture=this.request_picture_in_picture),console.log("[DocumentPiPManager] Destroyed.")}}class Tu{constructor(e,t,i=window.document){Se(this,"restart_required_when_quality_switched",!1);Se(this,"player");Se(this,"playback_mode");Se(this,"document");Se(this,"abort_controller",null);this.player=e,this.playback_mode=t,this.document=i}async init(){const e=Yn(),t=Gi(),i=hn();this.abort_controller=new AbortController,document.querySelector(".route-container"),this.player.container.querySelector(".dplayer-capture-icon"),this.player.container.querySelector(".dplayer-comment-capture-icon"),document.querySelector(".tweet-form__textarea"),document.querySelector(".tweet-button"),document.querySelector(".remote-control-button-data"),document.querySelector(".remote-control-button-back"),document.querySelector(".remote-control-button-select"),document.querySelector(".remote-control-button-up"),document.querySelector(".remote-control-button-left"),document.querySelector(".remote-control-button-right"),document.querySelector(".remote-control-button-down"),document.querySelector(".remote-control-button-blue"),document.querySelector(".remote-control-button-red"),document.querySelector(".remote-control-button-green"),document.querySelector(".remote-control-button-yellow");const n=[{mode:"Live",key:"ArrowUp",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{t.is_zapping=!0,Ua.push({path:`/watch/${e.channel.previous.display_channel_id}`})}},{mode:"Live",key:"ArrowDown",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{t.is_zapping=!0,Ua.push({path:`/watch/${e.channel.next.display_channel_id}`})}},{mode:"Both",key:"Slash",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{t.shortcut_key_modal=!t.shortcut_key_modal}},{mode:"Both",key:"Space",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{this.player.toggle()}},{mode:"Video",key:"ArrowLeft",repeat:!0,ctrl:!1,shift:!1,alt:!1,handler:()=>{this.player.seek(this.player.video.currentTime-5)}},{mode:"Video",key:"ArrowRight",repeat:!0,ctrl:!1,shift:!1,alt:!1,handler:()=>{this.player.seek(this.player.video.currentTime+5)}},{mode:"Video",key:"ArrowLeft",repeat:!0,ctrl:!0,shift:!1,alt:!1,handler:()=>{this.player.seek(this.player.video.currentTime-15)}},{mode:"Video",key:"ArrowRight",repeat:!0,ctrl:!0,shift:!1,alt:!1,handler:()=>{this.player.seek(this.player.video.currentTime+15)}},{mode:"Video",key:"ArrowLeft",repeat:!0,ctrl:!1,shift:!0,alt:!1,handler:()=>{this.player.seek(this.player.video.currentTime-30)}},{mode:"Video",key:"ArrowRight",repeat:!0,ctrl:!1,shift:!0,alt:!1,handler:()=>{this.player.seek(this.player.video.currentTime+30)}},{mode:"Video",key:"ArrowLeft",repeat:!0,ctrl:!1,shift:!1,alt:!0,handler:()=>{this.player.seek(this.player.video.currentTime-60)}},{mode:"Video",key:"ArrowRight",repeat:!0,ctrl:!1,shift:!1,alt:!0,handler:()=>{this.player.seek(this.player.video.currentTime+60)}},{mode:"Both",key:"KeyF",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{this.player.fullScreen.toggle()}},{mode:"Both",key:"KeyE",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{document.pictureInPictureEnabled&&this.player.template.pipButton.click()}},{mode:"Both",key:"KeyD",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{this.player.template.showDanmaku.click(),this.player.template.showDanmakuToggle.checked?this.player.notice(`${this.player.tran("Show comment")}`):this.player.notice(`${this.player.tran("Hide comment")}`)}},{mode:"Live",key:"KeyM",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{this.player.controller.show(),this.player.comment.show(),t.event_emitter.emit("SetControlDisplayTimer",{}),window.setTimeout(()=>this.player.template.commentInput.focus(),100)}},{mode:"Both",key:"KeyP",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{t.is_panel_display=!t.is_panel_display}},{mode:"Live",key:"KeyK",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{t.tv_panel_active_tab="Program"}},{mode:"Video",key:"KeyK",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{t.video_panel_active_tab="RecordedProgram"}},{mode:"Live",key:"KeyL",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{t.tv_panel_active_tab="Channel"}},{mode:"Both",key:"Semicolon",repeat:!1,ctrl:!1,shift:!1,alt:!1,handler:()=>{this.playback_mode==="Live"?t.tv_panel_active_tab="Comment":t.video_panel_active_tab="Comment"}}];let a=0;this.document.addEventListener("keydown",r=>{if(r.isComposing===!0||r.keyCode===229)return;let o=!1;r.repeat&&(o=!0);const d=ni.time();d-a<.05&&(o=!0),a=d;const c=ni.isMacOS()===!0?r.metaKey:r.ctrlKey,l=r.shiftKey,f=r.altKey;this.playback_mode==="Live"?t.tv_panel_active_tab:t.video_panel_active_tab;const p=document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement;if(this.playback_mode==="Live"&&o===!1&&c===!1&&f===(i.settings.tv_channel_selection_requires_alt_key===!0)&&p===!1){const g=l?"BS":"GR";let y=null;if(["Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9"].includes(r.code)&&(y=Number(r.code.replace("Digit",""))),r.code==="Digit0"&&(y=10),r.code==="Minus"&&(y=11),r.code==="Equal"&&(y=12),["Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9"].includes(r.code)&&(y=Number(r.code.replace("Numpad",""))),r.code==="Numpad0"&&(y=10),y!==null){const A=e.getChannelByRemoconID(g,y);if(A!==null&&A.display_channel_id!==e.display_channel_id){Ua.push({path:`/watch/${A.display_channel_id}`}),r.preventDefault(),r.stopPropagation();return}}}if(this.playback_mode==="Live"&&r.code==="KeyM"&&o===!1&&c===!0&&l===!1&&f===!1&&this.player.template.controller.classList.contains("dplayer-controller-comment")&&(p===!1||document.activeElement===this.player.template.commentInput)){this.player.comment.hide(),r.preventDefault(),r.stopPropagation();return}if(p!==!0){for(const g of n)if(!(g.mode!=="Both"&&g.mode!==this.playback_mode)&&g.key===r.code&&!(g.repeat===!1&&o===!0)&&g.ctrl===c&&g.shift===l&&g.alt===f){g.handler(),r.preventDefault(),r.stopPropagation();return}}},{signal:this.abort_controller.signal}),console.log("[KeyboardShortcutManager] Initialized.")}async destroy(){const e=Gi();if(this.playback_mode==="Live"&&e.is_zapping===!0){const t=Tr(()=>e.is_player_initialized,(n,a)=>{a===!1&&n===!0&&(t(),i(),this.abort_controller!==null&&(this.abort_controller.abort(),this.abort_controller=null),console.log("[KeyboardShortcutManager] Destroyed. (Zapping finished)"))}),i=Tr(()=>e.is_watching,(n,a)=>{a===!0&&n===!1&&(t(),i(),this.abort_controller!==null&&(this.abort_controller.abort(),this.abort_controller=null),console.log("[KeyboardShortcutManager] Destroyed. (Zapping canceled)"))})}else this.abort_controller!==null&&(this.abort_controller.abort(),this.abort_controller=null),console.log("[KeyboardShortcutManager] Destroyed.")}}function JE(s,e=0,{start:t=!0,middle:i=!0,once:n=!1}={}){let a=t,r=0,o,d=!1;function c(...l){if(d)return;const f=Date.now()-r;r=Date.now(),t&&i&&f>=e&&(a=!0),a?(a=!1,s.apply(this,l),n&&c.cancel()):(i&&f<e||!i)&&(clearTimeout(o),o=setTimeout(()=>{r=Date.now(),s.apply(this,l),n&&c.cancel()},i?e-f:e))}return c.cancel=()=>{clearTimeout(o),d=!0},c}class Cu{constructor(e){Se(this,"restart_required_when_quality_switched",!1);Se(this,"player");Se(this,"watch_session",null);Se(this,"comment_session",null);Se(this,"vpos_base_timestamp",0);Se(this,"keep_seat_interval_id",null);Se(this,"abort_controller",new AbortController);Se(this,"reconnecting",!1);Se(this,"destroyed",!1);this.player=e}get watch_session_type(){var e;return((e=this.watch_session)==null?void 0:e.url.includes("nicovideo.jp"))===!0?"„Éã„Ç≥„Éã„Ç≥ÂÆüÊ≥Å":"NX-Jikkyo "}async init(){const e=Gi(),t=Cs();this.destroyed=!1,await t.fetchUser();const i=await this.initWatchSession();if(i.is_success===!1){e.live_comment_init_failed_message=i.detail,console.error(`[LiveCommentManager][WatchSession] Error: ${i.detail}`),i.detail!=="„Åì„ÅÆ„ÉÅ„É£„É≥„Éç„É´„ÅØ„Éã„Ç≥„Éã„Ç≥ÂÆüÊ≥Å„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ"&&this.player.template.notice.textContent.includes("ÂÜçËµ∑Âãï„Åó„Å¶„ÅÑ„Åæ„Åô‚Ä¶")===!1&&this.player.notice(i.detail,void 0,void 0,"#FF6F6A");return}this.initCommentSession(i),console.log("[LiveCommentManager] Initialized.")}async initWatchSession(){var d;const e=Yn(),t=hn(),i=Cs();let n=!1;const a=await cm.fetchWebSocketInfo(e.channel.current.id);if(a===null)return{is_success:!1,detail:"„Ç≥„É°„É≥„ÉàÂèó‰ø°Áî® WebSocket API „ÅÆÊÉÖÂ†±„ÇíÂèñÂæó„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"};if(a.watch_session_url===null)return{is_success:!1,detail:"„Åì„ÅÆ„ÉÅ„É£„É≥„Éç„É´„ÅØ„Éã„Ç≥„Éã„Ç≥ÂÆüÊ≥Å„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ"};let r=a.watch_session_url;t.settings.prefer_posting_to_nicolive===!0&&(a.nicolive_watch_session_url!==null?(console.log("[LiveCommentManager][WatchSession] Post comments to Nicolive."),r=a.nicolive_watch_session_url):a.is_nxjikkyo_exclusive===!0?console.warn("[LiveCommentManager][WatchSession] Failed to get Nicolive watch session URL. (This channel is exclusive to NX-Jikkyo.)"):i.user===null?console.warn("[LiveCommentManager][WatchSession] Failed to get Nicolive watch session URL. (Not logged in to KonomiTV)"):((d=i.user)==null?void 0:d.niconico_user_id)===null?console.warn("[LiveCommentManager][WatchSession] Failed to get Nicolive watch session URL. (Not linked with Niconico account)"):a.nicolive_watch_session_error!==null&&(console.warn(`[LiveCommentManager][WatchSession] Failed to get Nicolive watch session URL. (${a.nicolive_watch_session_error})`),this.player.notice(`${a.nicolive_watch_session_error}‰ª£„Çè„Çä„Å´ NX-Jikkyo „Å´„Ç≥„É°„É≥„Éà„Åó„Åæ„Åô„ÄÇ`,void 0,void 0,"#FFA86A"))),console.log(`[LiveCommentManager][WatchSession] Connected to ${r}`),this.watch_session=new WebSocket(r),this.watch_session.addEventListener("open",()=>{var c;(c=this.watch_session)==null||c.send(JSON.stringify({type:"startWatching",data:{reconnect:!1}}))},{signal:this.abort_controller.signal});const o=async c=>{if(n===!0)return;const l=c instanceof CloseEvent?c.code:"Error";this.player.template.notice.textContent.includes("ÂÜçËµ∑Âãï„Åó„Å¶„ÅÑ„Åæ„Åô‚Ä¶")===!1&&this.player.notice(`${this.watch_session_type}„Å®„ÅÆÊé•Á∂ö„ÅåÂàáÊñ≠„Åï„Çå„Åæ„Åó„Åü„ÄÇ(Code: ${l})`,void 0,void 0,"#FF6F6A"),console.error(`[LiveCommentManager][WatchSession] Connection closed. (Code: ${l})`),await ni.sleep(3),await this.reconnect()};return this.watch_session.addEventListener("close",o,{signal:this.abort_controller.signal}),this.watch_session.addEventListener("error",o,{signal:this.abort_controller.signal}),this.watch_session.addEventListener("message",async c=>{if(this.watch_session===null)return;const l=JSON.parse(c.data);switch(l.type){case"seat":{if(this.keep_seat_interval_id!==null)break;this.keep_seat_interval_id=window.setInterval(()=>{this.watch_session&&this.watch_session.readyState===WebSocket.OPEN?this.watch_session.send(JSON.stringify({type:"keepSeat"})):window.clearInterval(this.keep_seat_interval_id??0)},l.data.keepIntervalSec*1e3);break}case"ping":{this.watch_session.send(JSON.stringify({type:"pong"}));break}case"error":{if(l.data.code==="COMMENT_POST_NOT_ALLOWED"||l.data.code==="INVALID_MESSAGE")break;let f=`${this.watch_session_type}„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ(Code: ${l.data.code})`;switch(l.data.code){case"CONNECT_ERROR":f=`${this.watch_session_type}„ÅÆ„Ç≥„É°„É≥„Éà„Çµ„Éº„Éê„Éº„Å´Êé•Á∂ö„Åß„Åç„Åæ„Åõ„Çì„ÄÇ`;break;case"CONTENT_NOT_READY":f=`${this.watch_session_type}„ÅåÈÖç‰ø°„Åß„Åç„Å™„ÅÑÁä∂ÊÖã„Åß„Åô„ÄÇ`;break;case"NO_THREAD_AVAILABLE":f=`${this.watch_session_type}„ÅÆ„Ç≥„É°„É≥„Éà„Çπ„É¨„ÉÉ„Éâ„ÇíÂèñÂæó„Åß„Åç„Åæ„Åõ„Çì„ÄÇ`;break;case"NO_ROOM_AVAILABLE":f=`${this.watch_session_type}„ÅÆ„Ç≥„É°„É≥„ÉàÈÉ®Â±ã„ÇíÂèñÂæó„Åß„Åç„Åæ„Åõ„Çì„ÄÇ`;break;case"NO_PERMISSION":f=`${this.watch_session_type}„ÅÆ API „Å´„Ç¢„ÇØ„Çª„Çπ„Åô„ÇãÊ®©Èôê„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ`;break;case"NOT_ON_AIR":f=`${this.watch_session_type}„ÅåÊîæÈÄÅ‰∏≠„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ`;break;case"BROADCAST_NOT_FOUND":f=`${this.watch_session_type}„ÅÆÈÖç‰ø°ÊÉÖÂ†±„ÇíÂèñÂæó„Åß„Åç„Åæ„Åõ„Çì„ÄÇ`;break;case"INTERNAL_SERVERERROR":f=`${this.watch_session_type}„Åß„Çµ„Éº„Éê„Éº„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ`;break}this.player.template.notice.textContent.includes("ÂÜçËµ∑Âãï„Åó„Å¶„ÅÑ„Åæ„Åô‚Ä¶")===!1&&this.player.notice(f,void 0,void 0,"#FF6F6A"),console.error(`[LiveCommentManager][WatchSession] Error occurred. (Code: ${l.data.code})`),await ni.sleep(3),await this.reconnect();break}case"reconnect":{await this.reconnect();break}case"disconnect":{n=!0;let f=`${this.watch_session_type}„Å®„ÅÆÊé•Á∂ö„ÅåÂàáÊñ≠„Åï„Çå„Åæ„Åó„Åü„ÄÇ(${l.data.reason})`;switch(l.data.reason){case"TAKEOVER":f=`${this.watch_session_type}„ÅÆÁï™ÁµÑ„Åã„ÇâËøΩ„ÅÑÂá∫„Åï„Çå„Åæ„Åó„Åü„ÄÇ`;break;case"NO_PERMISSION":f=`${this.watch_session_type}„ÅÆÁï™ÁµÑ„ÅÆÂ∫ßÂ∏≠„ÇíÂèñÂæó„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ`;break;case"END_PROGRAM":f=`${this.watch_session_type}„Åå„É™„Çª„ÉÉ„Éà„Åï„Çå„Åü„Åã„ÄÅ„Ç≥„Éü„É•„Éã„ÉÜ„Ç£„ÅÆÁï™ÁµÑ„ÅåÁµÇ‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇ`;break;case"PING_TIMEOUT":f="„Ç≥„É°„É≥„Éà„Çµ„Éº„Éê„Éº„Å®„ÅÆÊé•Á∂öÁîüÂ≠òÁ¢∫Ë™ç„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ";break;case"TOO_MANY_CONNECTIONS":f=`${this.watch_session_type}„ÅÆÂêå‰∏Ä„É¶„Éº„Ç∂„Åã„Çâ„ÅÆÊé•Á∂öÊï∞‰∏äÈôê„ÇíË∂ä„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ`;break;case"TOO_MANY_WATCHINGS":f=`${this.watch_session_type}„ÅÆÂêå‰∏Ä„É¶„Éº„Ç∂„Åã„Çâ„ÅÆË¶ñËÅ¥Áï™ÁµÑÊï∞‰∏äÈôê„ÇíË∂ä„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ`;break;case"CROWDED":f=`${this.watch_session_type}„ÅÆÁï™ÁµÑ„ÅåÊ∫ÄÂ∏≠„Åß„Åô„ÄÇ`;break;case"MAINTENANCE_IN":f=`${this.watch_session_type}„ÅØ„É°„É≥„ÉÜ„Éä„É≥„Çπ‰∏≠„Åß„Åô„ÄÇ`;break;case"SERVICE_TEMPORARILY_UNAVAILABLE":f=`${this.watch_session_type}„Åß‰∏ÄÊôÇÁöÑ„Å´„Çµ„Éº„Éê„Éº„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ`;break}this.player.template.notice.textContent.includes("ÂÜçËµ∑Âãï„Åó„Å¶„ÅÑ„Åæ„Åô‚Ä¶")===!1&&this.player.notice(f,void 0,void 0,"#FF6F6A"),console.error(`[LiveCommentManager][WatchSession] Disconnected. (Reason: ${l.data.reason})`),await ni.sleep(3),await this.reconnect();break}}},{signal:this.abort_controller.signal}),new Promise(c=>{this.watch_session.addEventListener("message",async l=>{const f=JSON.parse(l.data);if(f.type==="room")return this.vpos_base_timestamp=wn(f.data.vposBaseTime).valueOf(),console.log(`[LiveCommentManager][WatchSession] Connected.
Thread ID: ${f.data.threadId}`),c({is_success:!0,detail:"Ë¶ñËÅ¥„Çª„ÉÉ„Ç∑„Éß„É≥„ÇíÂèñÂæó„Åó„Åæ„Åó„Åü„ÄÇ",message_server_url:f.data.messageServer.uri,thread_id:f.data.threadId,your_post_key:f.data.yourPostKey?f.data.yourPostKey:null});if(f.type==="messageServer"){this.vpos_base_timestamp=wn(f.data.vposBaseTime).valueOf();const p=f.data.hashedUserId;return console.log("[LiveCommentManager][WatchSession] Connected."),c({is_success:!0,detail:"Ë¶ñËÅ¥„Çª„ÉÉ„Ç∑„Éß„É≥„ÇíÂèñÂæó„Åó„Åæ„Åó„Åü„ÄÇ",message_server_url:a.comment_session_url,thread_id:"",your_post_key:`nicolive:${p}`})}},{signal:this.abort_controller.signal})})}initCommentSession(e){const t=Gi(),i=Cs(),n=[];let a=!1;const r=[];this.comment_session=new WebSocket(e.message_server_url),this.comment_session.addEventListener("open",()=>{this.comment_session!==null&&this.comment_session.send(JSON.stringify([{ping:{content:"rs:0"}},{ping:{content:"ps:0"}},{thread:{version:"20061206",thread:e.thread_id,threadkey:e.your_post_key,user_id:"",res_from:-100}},{ping:{content:"pf:0"}},{ping:{content:"rf:0"}}]))},{signal:this.abort_controller.signal});const o=async c=>{const l=c instanceof CloseEvent?c.code:"Error";this.player.template.notice.textContent.includes("ÂÜçËµ∑Âãï„Åó„Å¶„ÅÑ„Åæ„Åô‚Ä¶")===!1&&this.player.notice(`NX-Jikkyo „Å®„ÅÆÊé•Á∂ö„ÅåÂàáÊñ≠„Åï„Çå„Åæ„Åó„Åü„ÄÇ(Code: ${l})`,void 0,void 0,"#FF6F6A"),console.error(`[LiveCommentManager][CommentSession] Connection closed. (Code: ${l})`),await ni.sleep(3),await this.reconnect()};this.comment_session.addEventListener("close",o,{signal:this.abort_controller.signal}),this.comment_session.addEventListener("error",o,{signal:this.abort_controller.signal});const d=JE(()=>{ni.isSafari()===!1&&console.debug("[LiveCommentManager][CommentSession] Comments buffer length:",r.length),this.destroyed===!1&&t.event_emitter.emit("CommentReceived",{is_initial_comments:!1,comments:r}),r.length=0},333);this.comment_session.addEventListener("message",async c=>{var Z,le;const l=JSON.parse(c.data);if(l.thread!==void 0&&l.thread.resultcode!==0){console.error(`[LiveCommentManager][CommentSession] Connection failed. (Code: ${l.thread.resultcode})`);return}if(l.ping!==void 0&&l.ping.content==="rf:0"){a=!0,this.destroyed===!1&&t.event_emitter.emit("CommentReceived",{is_initial_comments:!0,comments:n});return}const f=l.chat;if(f===void 0||f.content===void 0||f.content===""||f.yourpost&&f.yourpost===1&&a===!0||((le=(Z=i.user)==null?void 0:Z.niconico_user_id)==null?void 0:le.toString())===f.user_id.replace("nicolive:",""))return;const{color:p,position:g,size:y}=xr.parseCommentCommand(f.mail);if(xr.isMutedComment(f.content,f.user_id,p,g,y))return;const A={id:f.no,text:f.content,time:wn(f.date*1e3).format("HH:mm:ss"),playback_position:this.player.video.currentTime,user_id:f.user_id,my_post:!1,comment_source:f.user_id.startsWith("nicolive:")||f.user_id.startsWith("rekari:")?"„Éã„Ç≥ÂÆü":"NX"};if(a===!1){n.push(A);return}let C=0;this.player.video.buffered.length>=1&&(C=this.player.video.buffered.end(0));const I=Math.max(C-this.player.video.currentTime,0),M=hn().settings.comment_delay_seconds,G=I+M;ni.isSafari()===!1&&console.debug(`[LiveCommentManager][CommentSession] Auto delay: ${I} sec, User delay: ${M} sec, Total delay: ${G} sec.`),await ni.sleep(G),r.push(A),d(),this.player.video.paused===!1&&this.player.danmaku.draw({text:f.content,color:p,type:g,size:y})},{signal:this.abort_controller.signal})}sendComment(e){var c,l;const t=Gi(),i=hn(),n=Cs();if(t.live_comment_init_failed_message!==null){e.error(t.live_comment_init_failed_message);return}if(i.settings.prefer_posting_to_nicolive===!0&&(n.user===null?this.player.notice("„Éã„Ç≥„Éã„Ç≥ÂÆüÊ≥Å„Å´„Ç≥„É°„É≥„Éà„Åô„Çã„Å´„ÅØ„ÄÅKonomiTV „Ç¢„Ç´„Ç¶„É≥„Éà„Å´„É≠„Ç∞„Ç§„É≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ‰ª£„Çè„Çä„Å´ NX-Jikkyo „Å´„Ç≥„É°„É≥„Éà„Åó„Åæ„Åô„ÄÇ",void 0,void 0,"#FFA86A"):n.user.niconico_user_id===null&&this.player.notice("„Éã„Ç≥„Éã„Ç≥ÂÆüÊ≥Å„Å´„Ç≥„É°„É≥„Éà„Åô„Çã„Å´„ÅØ„ÄÅ„Éã„Ç≥„Éã„Ç≥„Ç¢„Ç´„Ç¶„É≥„Éà„Å®ÈÄ£Êê∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ‰ª£„Çè„Çä„Å´ NX-Jikkyo „Å´„Ç≥„É°„É≥„Éà„Åó„Åæ„Åô„ÄÇ",void 0,void 0,"#FFA86A")),this.watch_session_type==="„Éã„Ç≥„Éã„Ç≥ÂÆüÊ≥Å"){if(((c=n.user)==null?void 0:c.niconico_user_premium)===!1&&(e.data.type==="top"||e.data.type==="bottom")){e.error("„Éã„Ç≥„Éã„Ç≥ÂÆüÊ≥Å„Åß„Ç≥„É°„É≥„Éà„Çí‰∏ä‰∏ã„Å´Âõ∫ÂÆö„Åô„Çã„Å´„ÅØ„ÄÅ„Éã„Ç≥„Éã„Ç≥„Ç¢„Ç´„Ç¶„É≥„Éà„ÅÆ„Éó„É¨„Éü„Ç¢„É†‰ºöÂì°ÁôªÈå≤„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ");return}if(((l=n.user)==null?void 0:l.niconico_user_premium)===!1&&e.data.size==="big"){e.error("„Éã„Ç≥„Éã„Ç≥ÂÆüÊ≥Å„Åß„Ç≥„É°„É≥„Éà„Çµ„Ç§„Ç∫„ÇíÂ§ß„Åç„ÇÅ„Å´Ë®≠ÂÆö„Åô„Çã„Å´„ÅØ„ÄÅ„Éã„Ç≥„Éã„Ç≥„Ç¢„Ç´„Ç¶„É≥„Éà„ÅÆ„Éó„É¨„Éü„Ç¢„É†‰ºöÂì°ÁôªÈå≤„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ");return}}if(this.watch_session===null||this.watch_session.readyState!==WebSocket.OPEN){console.error("[LiveCommentManager][WatchSession] Comment sending failed. (Connection is not established.)"),e.error("„Ç≥„É°„É≥„Éà„ÅÆÈÄÅ‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇWebSocket Êé•Á∂ö„ÅåÁ¢∫Á´ã„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ");return}const a={"#FFEAEA":"white","#F02840":"red","#FD7E80":"pink","#FDA708":"orange","#FFE133":"yellow","#64DD17":"green","#00D4F5":"cyan","#4763FF":"blue"},r={top:"ue",right:"naka",bottom:"shita"},o=Math.round((wn().valueOf()-this.vpos_base_timestamp)/10);this.watch_session.send(JSON.stringify({type:"postComment",data:{text:e.data.text,color:a[e.data.color.toUpperCase()],position:r[e.data.type],size:e.data.size,vpos:o,isAnonymous:!0}}));const d=new AbortController;this.watch_session.addEventListener("message",f=>{var g;const p=JSON.parse(f.data);switch(p.type){case"postCommentResult":{e.success(),t.event_emitter.emit("CommentSendCompleted",{comment:{id:ni.time(),text:e.data.text,time:wn().format("HH:mm:ss"),playback_position:this.player.video.currentTime,user_id:`${((g=n.user)==null?void 0:g.niconico_user_id)??"Unknown"}`,my_post:!0,comment_source:this.watch_session_type==="„Éã„Ç≥„Éã„Ç≥ÂÆüÊ≥Å"?"„Éã„Ç≥ÂÆü":"NX"}}),d.abort();break}case"error":{let y=`„Ç≥„É°„É≥„Éà„ÅÆÈÄÅ‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ(${p.data.code})`;switch(p.data.code){case"COMMENT_POST_NOT_ALLOWED":y="„Ç≥„É°„É≥„Éà„ÅåË®±ÂèØ„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ";break;case"INVALID_MESSAGE":y="„Ç≥„É°„É≥„ÉàÂÜÖÂÆπ„ÅåÁÑ°Âäπ„Åß„Åô„ÄÇ";break}console.error(`[LiveCommentManager][WatchSession] Comment sending failed. (Code: ${p.data.code})`),e.error(y),d.abort();break}}},{signal:d.signal})}async reconnect(){const e=Gi(),t=this.watch_session!==null&&(this.watch_session.readyState===WebSocket.CLOSING||this.watch_session.readyState===WebSocket.CLOSED),i=this.comment_session!==null&&(this.comment_session.readyState===WebSocket.CLOSING||this.comment_session.readyState===WebSocket.CLOSED);if(this.reconnecting===!0&&t===!1&&i===!1)return;this.reconnecting=!0,console.warn("[LiveCommentManager] Reconnecting..."),this.player.template.notice.textContent.includes("ÂÜçËµ∑Âãï„Åó„Å¶„ÅÑ„Åæ„Åô‚Ä¶")===!1&&this.player.notice(`${this.watch_session_type}„Å´ÂÜçÊé•Á∂ö„Åó„Å¶„ÅÑ„Åæ„Åô‚Ä¶`),await this.destroy();const n=await this.initWatchSession();if(n.is_success===!1){e.live_comment_init_failed_message=n.detail,console.error("[LiveCommentManager] Reconnection failed."),this.player.template.notice.textContent.includes("ÂÜçËµ∑Âãï„Åó„Å¶„ÅÑ„Åæ„Åô‚Ä¶")===!1&&this.player.notice(n.detail,void 0,void 0,"#FF6F6A"),this.reconnecting=!1;return}this.initCommentSession(n),this.destroyed=!1,this.reconnecting=!1,console.warn("[LiveCommentManager] Reconnected.")}async destroy(){const e=Gi();this.abort_controller.abort(),this.abort_controller=new AbortController,this.watch_session!==null&&(this.watch_session.close(),this.watch_session=null),this.comment_session!==null&&(this.comment_session.close(),this.comment_session=null),this.keep_seat_interval_id!==null&&(window.clearInterval(this.keep_seat_interval_id),this.keep_seat_interval_id=null),this.vpos_base_timestamp=0,e.live_comment_init_failed_message=null,this.destroyed=!0,console.log("[LiveCommentManager] Destroyed.")}}const jr=class jr{constructor(e){Se(this,"player",null);Se(this,"player_managers",[]);Se(this,"playback_mode");Se(this,"tv_streaming_quality");Se(this,"tv_data_saver_mode");Se(this,"tv_low_latency_mode");Se(this,"video_streaming_quality");Se(this,"video_data_saver_mode");Se(this,"live_playback_buffer_seconds");Se(this,"live_force_seek_interval_timer_cancel",null);Se(this,"video_keep_alive_interval_timer_cancel",null);Se(this,"player_container_resize_observer",null);Se(this,"player_control_ui_hide_timer_id",0);Se(this,"screen_wake_lock",null);Se(this,"romsounds_context",new AudioContext);Se(this,"romsounds_buffers",[]);Se(this,"destroying",!1);Se(this,"destroyed",!1);this.playback_mode=e;const t=hn(),i=Va.getNetworkCircuitType();this.tv_streaming_quality=i==="Cellular"?t.settings.tv_streaming_quality_cellular:t.settings.tv_streaming_quality,this.tv_data_saver_mode=i==="Cellular"?t.settings.tv_data_saver_mode_cellular:t.settings.tv_data_saver_mode,this.tv_low_latency_mode=i==="Cellular"?t.settings.tv_low_latency_mode_cellular:t.settings.tv_low_latency_mode,this.video_streaming_quality=i==="Cellular"?t.settings.video_streaming_quality_cellular:t.settings.video_streaming_quality,this.video_data_saver_mode=i==="Cellular"?t.settings.video_data_saver_mode_cellular:t.settings.video_data_saver_mode,this.live_playback_buffer_seconds=this.tv_low_latency_mode?jr.LIVE_PLAYBACK_BUFFER_SECONDS_LOW_LATENCY:jr.LIVE_PLAYBACK_BUFFER_SECONDS,ni.isSafari()===!0&&(this.live_playback_buffer_seconds+=.3)}async init(){const e=Yn(),t=Gi(),i=hn();console.log("\x1B[31m[PlayerController] Initializing..."),this.destroyed=!1,t.is_player_initialized=!0,window.mpegts=XE,window.Hls=sr;const n=this.playback_mode==="Live"?i.settings.tv_show_superimpose:i.settings.video_show_superimpose;localStorage.getItem("dplayer-danmaku-opacity")===null&&localStorage.setItem("dplayer-danmaku-opacity","1.0");let a="";if(t.recorded_program.id==-100&&(a=this.createSilentAudioBuffer(t.recorded_program.duration,3e3,1),console.log("\x1B[31m[PlayerController] audio_url:",a)),this.player=new qv({container:document.querySelector(".watch-player__dplayer"),theme:"#E64F97",lang:"ja-jp",live:this.playback_mode==="Live",liveSyncMinBufferSize:this.live_playback_buffer_seconds-.1,loop:(this.playback_mode==="Live",!1),autoplay:!0,airplay:!1,hotkey:!1,screenshot:!1,crossOrigin:"anonymous",volume:1,video:(()=>{const r=[];let o="";if(Va.isHEVCVideoSupported()&&(this.playback_mode==="Live"&&this.tv_data_saver_mode===!0||this.playback_mode==="Video"&&this.video_data_saver_mode===!0)&&(o="-hevc"),this.playback_mode==="Live"){const d=`${ni.api_base_url}/streams/live/${e.channel.current.display_channel_id}`;if(e.channel.current.is_radiochannel===!0)r.push({name:"48kHz/192kbps",type:"mpegts",url:`${d}/1080p/mpegts`});else for(const l of om)r.push({name:l==="1080p-60fps"?"1080p (60fps)":l,type:"mpegts",url:`${d}/${l}${o}/mpegts`});let c=this.tv_streaming_quality;return e.channel.current.is_radiochannel&&(c="48kHz/192kbps"),{quality:r,defaultQuality:c}}else return{quality:[{name:"Silent",type:"normal",url:a}],defaultQuality:"Silent"}})(),danmaku:{user:"NX-Jikkyo",speedRate:i.settings.comment_speed_rate,fontSize:i.settings.comment_font_size,closeCommentFormAfterSend:i.settings.close_comment_form_after_sending},apiBackend:{read:async r=>{if(this.playback_mode==="Live")r.success([]);else{const o=await Lm.fetchVideoJikkyoComments(t.recorded_program);if(o.is_success===!1)t.video_comment_init_failed_message=o.detail,o.detail!=="„Åì„ÅÆÈå≤ÁîªÁï™ÁµÑ„ÅÆÈÅéÂéª„É≠„Ç∞„Ç≥„É°„É≥„Éà„ÅØÂ≠òÂú®„Åó„Å™„ÅÑ„Åã„ÄÅÁèæÂú®ÂèñÂæó‰∏≠„Åß„Åô„ÄÇ"?r.error(o.detail):r.success([]);else{const d=t.recorded_program.recorded_video.recording_start_time;let c=0;t.event_emitter.emit("CommentReceived",{is_initial_comments:!0,comments:o.comments.map(l=>({id:c++,text:l.text,time:wn(d).add(l.time,"seconds").format("MM/DD HH:mm:ss"),playback_position:l.time,user_id:l.author,my_post:!1,comment_source:l.author.length>=35?"NX":"„Éã„Ç≥ÂÆü"}))}),r.success(o.comments)}}},send:async r=>{if(this.playback_mode==="Live"){for(const o of this.player_managers)if(o instanceof Cu){o.sendComment(r);return}}else r.error("Èå≤ÁîªÁï™ÁµÑ„Å´„ÅØ„Ç≥„É°„É≥„Éà„Åß„Åç„Åæ„Åõ„Çì„ÄÇ")}},subtitle:{type:"aribb24"},pluginOptions:{mpegts:{config:{enableWorker:!0,enableWorkerForMSE:window.MediaSource&&window.MediaSource.canConstructInDedicatedWorker===!0,enableStashBuffer:!0,stashInitialSize:Math.floor(2048*1024),liveSync:this.tv_low_latency_mode,liveSyncMaxLatency:3,liveSyncTargetLatency:this.live_playback_buffer_seconds,liveSyncPlaybackRate:1.1}},hls:{...sr.DefaultConfig,debug:!0,enableWorker:!0,preferManagedMediaSource:!1,manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e6,maxLoadTimeMs:1e6,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e6,maxLoadTimeMs:1e6,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e6,maxLoadTimeMs:1e6,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}}},aribb24:{disableSuperimposeRenderer:n===!1,normalFont:`"${i.settings.caption_font}", "Rounded M+ 1m for ARIB", sans-serif`,forceStrokeColor:i.settings.always_border_caption_text,forceBackgroundColor:(()=>{if(i.settings.specify_caption_opacity===!0)return`rgba(0, 0, 0, ${i.settings.caption_opacity})`})(),drcsReplacement:!0,enableRawCanvas:!0,useStroke:!0,usePUA:(()=>{const r=i.settings.caption_font,o=document.createElement("canvas").getContext("2d");return o.font='10px "Rounded M+ 1m for ARIB"',o.fillText("Test",0,0),o.font=`10px "${r}"`,o.fillText("Test",0,0),!!r.startsWith("Windows TV")})(),PRACallback:async r=>{if(n===!1)return;this.romsounds_context.state==="suspended"&&await this.romsounds_context.resume();const o=this.romsounds_context.createBufferSource();o.buffer=this.romsounds_buffers[r];const d=this.romsounds_context.createGain();o.connect(d),d.connect(this.romsounds_context.destination),d.gain.value=3,o.start(0)}}}}),this.playback_mode==="Video"){const r=localStorage.getItem("NX-Jikkyo-PlaybackRate");r!==null&&this.player.speed(parseFloat(r)),this.player.on("ratechange",()=>{var d;const o=(d=this.player)==null?void 0:d.video.playbackRate;o!==void 0&&localStorage.setItem("NX-Jikkyo-PlaybackRate",o.toString())})}this.player.video.muted=!0,window.player=this.player,this.player.container.classList.contains("dplayer-mobile")===!0&&this.player.volume(1,void 0,!0),this.player.controller.setAutoHide=r=>{},this.setupVideoPlaybackHandler(),this.setupFullscreenHandler(),this.setupSettingPanelHandler(),this.setupPlayerContainerResizeHandler(),this.setControlDisplayTimer(),t.event_emitter.off("SendNotification"),t.event_emitter.on("SendNotification",r=>{this.destroyed===!0||this.player===null||this.player.notice(r.message,r.duration,r.opacity,r.color)}),t.event_emitter.off("SetControlDisplayTimer"),t.event_emitter.on("SetControlDisplayTimer",r=>{this.setControlDisplayTimer(r.event,r.is_player_region_event,r.timeout_seconds)}),"wakeLock"in navigator&&navigator.wakeLock.request("screen").then(r=>{this.screen_wake_lock=r,console.log("\x1B[31m[PlayerController] Screen Wake Lock API: Screen Wake Lock acquired.")}),this.playback_mode==="Live"?this.player_managers=[new Cu(this.player),new xu(this.player,this.playback_mode),new Tu(this.player,this.playback_mode)]:this.player_managers=[new xu(this.player,this.playback_mode),new Tu(this.player,this.playback_mode)],await Promise.all(this.player_managers.map(r=>r.init())),t.background_url=Va.generatePlayerBackgroundURL(),t.is_background_display=!0,t.is_video_buffering=!1,console.log("\x1B[31m[PlayerController] Initialized.")}createSilentAudioBuffer(e,t,i){const a=[];for(let f=0;f<e;f+=3600){const p=Math.min(3600,e-f),g=Math.floor(p*t),y=new AudioBuffer({length:g,sampleRate:t,numberOfChannels:i});for(let A=0;A<i;A++){const C=y.getChannelData(A);for(let I=0;I<g;I++)C[I]=0}a.push(y)}const r=new Uint8Array(44),o=new DataView(r.buffer);o.setUint32(0,1380533830,!1),o.setUint32(4,36+e*t*i*2,!0),o.setUint32(8,1463899717,!1),o.setUint32(12,1718449184,!1),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,i,!0),o.setUint32(24,t,!0),o.setUint32(28,t*i*2,!0),o.setUint16(32,i*2,!0),o.setUint16(34,16,!0),o.setUint32(36,1684108385,!1),o.setUint32(40,e*t*i*2,!0);const d=new ArrayBuffer(r.length+e*t*i*2),c=new DataView(d);c.setUint8(0,r[0]);for(let f=0;f<r.length;f++)c.setUint8(f,r[f]);let l=r.length;for(const f of a)for(let p=0;p<i;p++){const g=f.getChannelData(p);for(let y=0;y<f.length;y++)c.setInt16(l,g[y]*32767,!0),l+=2}return URL.createObjectURL(new Blob([d],{type:"audio/wav"}))}getPlaybackBufferSeconds(){if(this.player===null)return 0;if(this.playback_mode==="Live")try{const e=this.player.video.buffered.length,t=this.player.video.buffered.end(e-1)-this.player.video.currentTime;return ni.mathFloor(t,3)}catch{return 0}else return 0}async recoverPlayback(){var t,i,n,a;er(this.player!==null);const e=Gi();if(await ni.sleep(1),e.is_video_buffering===!0&&((i=(t=this.player)==null?void 0:t.video)==null?void 0:i.readyState)<3){console.warn("\x1B[31m[PlayerController] Video still buffering. (HTMLVideoElement.readyState < HAVE_FUTURE_DATA) trying to recover."),this.player.video.pause(),await ni.sleep(.25);try{await this.player.video.play()}catch{er(this.player!==null),console.warn("\x1B[31m[PlayerController] HTMLVideoElement.play() rejected. paused."),this.player.pause();return}if(await ni.sleep(.5),e.is_video_buffering===!0&&((a=(n=this.player)==null?void 0:n.video)==null?void 0:a.readyState)<3){console.warn("\x1B[31m[PlayerController] Video still buffering. (HTMLVideoElement.readyState < HAVE_FUTURE_DATA) trying to recover."),this.player.video.pause(),await ni.sleep(.25);try{await this.player.video.play()}catch{er(this.player!==null),console.warn("\x1B[31m[PlayerController] (retry) HTMLVideoElement.play() rejected. paused."),this.player.pause()}}}}setupVideoPlaybackHandler(){er(this.player!==null),Yn();const e=Gi(),t=()=>{this.player!==null&&(e.is_video_paused=this.player.video.paused,this.player.video.paused===!0&&e.is_loading===!1&&(e.is_video_buffering=!1),this.player.setting.hide(),this.setControlDisplayTimer())};this.player.on("play",t),this.player.on("pause",t),this.playback_mode==="Video"&&this.player.on("timeupdate",()=>{this.player!==null&&e.event_emitter.emit("PlaybackPositionChanged",{playback_position:this.player.video.currentTime})});let i=0,n=0;const a=document.querySelector(".program-info__next");a!==null&&(a.ontouchstart=()=>{if(this.player===null)return;const r=new Date().getTime(),o=r-n;o<500&&o>0&&(i++,i===3&&(this.player.infoPanel.toggle(),i=0)),n=r})}setupFullscreenHandler(){er(this.player!==null);const e=Gi(),t=document.body;this.player.fullScreen.isFullScreen=n=>!!(document.fullscreenElement||document.webkitFullscreenElement),this.player.fullScreen.request=n=>{if(er(this.player!==null),this.player.fullScreen.isFullScreen()){this.player.fullScreen.cancel();return}if(t.requestFullscreen=t.requestFullscreen||t.webkitRequestFullscreen,t.requestFullscreen)t.requestFullscreen();else{this.player.notice("iPhone Safari „ÅØÂãïÁîª„ÅÆ„Éï„É´„Çπ„ÇØ„É™„Éº„É≥Ë°®Á§∫„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ",void 0,void 0,"#FF6F6A");return}screen.orientation&&screen.orientation.lock("landscape").catch(()=>{})},this.player.fullScreen.cancel=n=>{document.exitFullscreen=document.exitFullscreen||document.webkitExitFullscreen,document.exitFullscreen&&document.exitFullscreen(),screen.orientation&&screen.orientation.unlock()};const i=()=>{er(this.player!==null),e.is_fullscreen=this.player.fullScreen.isFullScreen()===!0};t.onfullscreenchange!==void 0?t.onfullscreenchange=i:t.onwebkitfullscreenchange!==void 0&&(t.onwebkitfullscreenchange=i)}setupSettingPanelHandler(){er(this.player!==null);const e=Gi();ni.isTouchDevice()===!1&&(this.player.template.settingOriginPanel.insertAdjacentHTML("beforeend",`
            <div class="dplayer-setting-item dplayer-setting-keyboard-shortcut">
                <span class="dplayer-label">„Ç≠„Éº„Éú„Éº„Éâ„Ç∑„Éß„Éº„Éà„Ç´„ÉÉ„Éà</span>
                <div class="dplayer-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32">
                        <path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path>
                    </svg>
                </div>
            </div>`),this.player.template.settingOriginPanel.querySelector(".dplayer-setting-keyboard-shortcut").addEventListener("click",()=>{er(this.player!==null),this.player.setting.hide(),e.shortcut_key_modal=!0}))}setupPlayerContainerResizeHandler(){const e=document.querySelector(".watch-player"),t=()=>{if(this.player===null)return;const i=this.player.danmaku.container,n=i.clientWidth,a=i.clientWidth*(9/16);if(e===null||e.clientHeight===null)return;const r=(e.clientHeight-a)/2,o=ni.isSmartphoneVertical()?0:ni.isSmartphoneHorizontal()?50:66;if(r<o){const d=(o-r)*2,c=n,l=a-d,f=(y,A)=>A===0?y:f(A,y%A),p=f(c,l),g=`${c/p} / ${l/p}`;i.style.transition="none",i.style.setProperty("--comment-area-aspect-ratio",g),i.style.setProperty("--comment-area-vertical-margin",`${d}px`),window.setTimeout(()=>i.style.transition="",.2*1e3)}else i.style.removeProperty("--comment-area-aspect-ratio"),i.style.removeProperty("--comment-area-vertical-margin")};t(),this.player_container_resize_observer=new ResizeObserver(t),this.player_container_resize_observer.observe(e)}setControlDisplayTimer(e=null,t=!1,i=3){const n=Gi();if(ni.isTouchDevice()===!0&&e!==null&&e.type==="mousemove"||ni.isTouchDevice()===!1&&e!==null&&(e.type==="touchmove"||e.type==="click"))return;window.clearTimeout(this.player_control_ui_hide_timer_id);const a=()=>{if(this.player!==null){if(this.player.template.controller.classList.contains("dplayer-controller-comment")){this.player_control_ui_hide_timer_id=window.setTimeout(a,i*1e3);return}n.is_control_display=!1,this.player.controller.hide(),this.player.setting.hide()}};this.player!==null&&(ni.isTouchDevice()===!0&&t===!0?this.player.controller.isShow()?(n.is_control_display=!0,this.player.controller.show(),this.player_control_ui_hide_timer_id=window.setTimeout(a,i*1e3)):(n.is_control_display=!1,this.player.controller.hide(),this.player.setting.hide()):(n.is_control_display=!0,this.player.controller.show(),this.player_control_ui_hide_timer_id=window.setTimeout(a,i*1e3)))}async destroy(){const e=Gi();if(this.destroyed!==!0&&this.destroying!==!0){if(this.destroying=!0,console.log("\x1B[31m[PlayerController] Destroying..."),await Promise.all(this.player_managers.map(async t=>t.destroy())),this.player_managers=[],this.screen_wake_lock!==null&&(this.screen_wake_lock.release(),this.screen_wake_lock=null,console.log("\x1B[31m[PlayerController] Screen Wake Lock API: Screen Wake Lock released.")),e.is_background_display=!1,e.is_loading=!0,e.live_comment_init_failed_message=null,e.video_comment_init_failed_message=null,this.player!==null){const i=this.player.user.get("volume")/10;for(let n=0;n<10;n++)await ni.sleep(.2/10),this.player&&this.player.video&&(this.player.video.volume=Math.max(ni.mathFloor(this.player.video.volume-i,3),0));this.player.video.volume=0}if(this.live_force_seek_interval_timer_cancel!==null&&(this.live_force_seek_interval_timer_cancel(),this.live_force_seek_interval_timer_cancel=null),this.video_keep_alive_interval_timer_cancel!==null&&(this.video_keep_alive_interval_timer_cancel(),this.video_keep_alive_interval_timer_cancel=null),window.clearTimeout(this.player_control_ui_hide_timer_id),this.player_container_resize_observer!==null&&(this.player_container_resize_observer.disconnect(),this.player_container_resize_observer=null),this.player!==null){if(this.player.events.events.error&&(this.player.events.events.error=[]),this.player.plugins.mpegts)try{this.player.plugins.mpegts.unload(),this.player.plugins.mpegts.detachMediaElement(),this.player.plugins.mpegts.destroy()}catch{}this.player.danmaku.clear();try{this.player.destroy(!0)}catch{}this.player=null}this.destroying=!1,this.destroyed=!0,e.is_player_initialized=!1,console.log("\x1B[31m[PlayerController] Destroyed.")}}};Se(jr,"LIVE_PLAYBACK_BUFFER_SECONDS_LOW_LATENCY",.8),Se(jr,"LIVE_PLAYBACK_BUFFER_SECONDS",4);let wu=jr;export{gc as I,wu as P,o2 as W,Gi as u};
