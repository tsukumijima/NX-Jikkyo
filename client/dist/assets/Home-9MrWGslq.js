import{d as H,U as f,P as U,m as j,M as A,u as $,_ as I,r as d,a as M,o as i,c as r,b as _,e as u,n as p,f as w,F as B,g as m,w as g,v as L,h as F,i as b,j as S,k as v,l as o,t as l,V as z,p as D,R as k,q as X,s as J}from"./index-Cvbjt1uf.js";import{S as q,a as R}from"./swiper-BSPv919H.js";import{H as O,N as Z}from"./Navigation-DapRwNKa.js";import{C as K,u as W}from"./ChannelsStore-DcaoZW-i.js";import{V as G}from"./ssrBoot-N4oCjL4t.js";const Q=H({name:"TV-Home",components:{HeaderBar:O,Navigation:Z,Swiper:q,SwiperSlide:R},data(){return{Utils:Object.freeze(f),ChannelUtils:Object.freeze(K),ProgramUtils:Object.freeze(U),active_tab_index:0,swiper_instance:null,scroll_abort_controller:new AbortController,is_loading:!0,interval_ids:[]}},computed:{...j(W,$)},watch:{active_tab_index(){var e,s;(e=this.swiper_instance)==null||e.updateAutoHeight(),(s=this.swiper_instance)==null||s.slideTo(this.active_tab_index,this.is_loading===!0?0:void 0)}},async mounted(){var s,h;this.settingsStore.settings.pinned_channel_ids.length===0&&(this.active_tab_index=1),this.interval_ids.push(window.setTimeout(()=>{this.channelsStore.update(!0),this.interval_ids.push(window.setInterval(()=>this.channelsStore.update(!0),30*1e3))},0*1e3)),await this.channelsStore.update(),((s=this.channelsStore.channels_list_with_pinned.get("ピン留め"))==null?void 0:s.length)===0&&(this.active_tab_index=1),(h=this.swiper_instance)==null||h.updateAutoHeight(),window.addEventListener("scroll",()=>{var C;(C=this.swiper_instance)==null||C.updateAutoHeight()},{passive:!0,signal:this.scroll_abort_controller.signal}),await f.sleep(.01),this.is_loading=!1},beforeUnmount(){for(const e of this.interval_ids)window.clearInterval(e);this.scroll_abort_controller.abort(),this.scroll_abort_controller=new AbortController},methods:{addPinnedChannel(e){this.settingsStore.settings.pinned_channel_ids=[...this.settingsStore.settings.pinned_channel_ids,e.id],A.show(`${e.name}をピン留めしました。`)},removePinnedChannel(e){var s;this.settingsStore.settings.pinned_channel_ids=this.settingsStore.settings.pinned_channel_ids.filter(h=>h!==e.id),((s=this.channelsStore.channels_list_with_pinned.get("ピン留め"))==null?void 0:s.length)===0&&(this.active_tab_index=1),A.show(`${e.name}のピン留めを外しました。`)},isPinnedChannel(e){return this.settingsStore.settings.pinned_channel_ids.includes(e.id)}}}),n=e=>(X("data-v-e4c13c75"),e=e(),J(),e),Y={class:"route-container"},uu=S('<div class="mt-5 mb-2 mx-4 text-center font-weight-bold" style="font-size:15px;" data-v-e4c13c75><blockquote class="text-left mx-auto" style="max-width:850px;" data-v-e4c13c75> 【📢重要なお知らせ】 NX-Jikkyo で <a class="link" href="https://x.com/TVRemotePlus/status/1821214317385282033" target="_blank" data-v-e4c13c75>08/22 までの繋ぎ</a> で運用されている <a class="link" href="https://originalnews.nico/464285" target="_blank" data-v-e4c13c75>暫定復旧版ニコニコ実況</a> に投稿されたコメントをリアルタイム表示できるようになりました！！🎉🎊 コメントリストではコメント取得元に応じてそれぞれ <code data-v-e4c13c75>[ニコ実]</code> or <code data-v-e4c13c75>[NX]</code> のラベルがつきます (各 NX-Jikkyo 対応アプリでは別途対応されない限り区別されません) 。<br data-v-e4c13c75><div class="mt-1" data-v-e4c13c75> NX-Jikkyo 対応アプリ (jkcommentviewer・TVTest (NicoJK)・KonomiTV など) は更新不要です。過去ログを含め、ニコニコ実況と NX-Jikkyo の双方に投稿されたコメントを一緒に楽しめます！🎧 <a class="link" href="/about/#faq" target="_blank" data-v-e4c13c75>詳しくはこちら！</a></div><div class="mt-2" style="font-weight:400 !important;" data-v-e4c13c75> 08/22 のニコニコ実況の本復旧後、<strong data-v-e4c13c75>NX-Jikkyo では本家ニコニコ実況へのコメント投稿機能をリリース予定です！！</strong><br data-v-e4c13c75><strong data-v-e4c13c75>本家ニコニコ実況へのコメント投稿にはニコニコアカウントとの連携が必要です。</strong>設定でコメント投稿先を切り替えれば、今まで通り NX-Jikkyo のコメントサーバーへのコメント投稿もできます (ログイン不要) 。 </div></blockquote><div class="mt-1" data-v-e4c13c75> 最新情報は <a class="link" href="https://x.com/search?q=%23NXJikkyo%20from%3ATVRemotePlus&amp;src=typed_query&amp;f=live" target="_blank" data-v-e4c13c75>Twitter</a> で発信中です📣 <a class="link" href="https://www.amazon.co.jp/hz/wishlist/ls/3AZ4RI13SW2PV?tag=tsukumijima-22" target="_blank" data-v-e4c13c75>干し芋 or アマギフいただけると大変モチベ上がるのでぜひ🙇🙏</a></div><div class="mt-1" data-v-e4c13c75> 試行錯誤を重ね、<a class="link" href="https://x.com/TVRemotePlus/status/1824379610189955321" target="_blank" data-v-e4c13c75>サーバーの安定性を大幅に改善しました！</a> コメント詰まりや接続切断もほぼ起きなくなっているはずです…！<br data-v-e4c13c75> 📢 <a class="link" href="https://forms.gle/C4jnW2jGX4H5AApSA" target="_blank" data-v-e4c13c75>利用者アンケート・フィードバック</a> 📢 を実施中です！ぜひ率直なご意見をお聞かせください🙏🙏 </div></div>',1),eu={class:"channels-tab"},tu=n(()=>u("div",{class:"channels-tab__highlight"},null,-1)),su={class:"channel__broadcaster"},nu=["src"],au={class:"channel__broadcaster-content"},iu={class:"channel__broadcaster-name"},ou={class:"channel__broadcaster-status"},ru=n(()=>u("svg",{class:"iconify iconify--fa-solid",width:"10.5px",height:"12px",viewBox:"0 0 448 512"},[u("path",{fill:"currentColor",d:"M323.56 51.2c-20.8 19.3-39.58 39.59-56.22 59.97C240.08 73.62 206.28 35.53 168 0C69.74 91.17 0 209.96 0 281.6C0 408.85 100.29 512 224 512s224-103.15 224-230.4c0-53.27-51.98-163.14-124.44-230.4zm-19.47 340.65C282.43 407.01 255.72 416 226.86 416C154.71 416 96 368.26 96 290.75c0-38.61 24.31-72.63 72.79-130.75c6.93 7.98 98.83 125.34 98.83 125.34l58.63-66.88c4.14 6.85 7.91 13.55 11.27 19.97c27.35 52.19 15.81 118.97-33.43 153.42z"})],-1)),lu=n(()=>u("span",{class:"ml-1"},"勢い:",-1)),cu={class:"ml-1"},du=n(()=>u("span",{style:{"margin-left":"3px"}}," コメ/分",-1)),_u={class:"channel__broadcaster-status-viewers ml-2"},hu=n(()=>u("span",{class:"ml-1"},"コメント数:",-1)),pu={class:"ml-1"},Fu=["onClick"],Cu=n(()=>u("svg",{class:"iconify iconify--fluent",width:"24px",height:"24px",viewBox:"0 0 20 20"},[u("path",{fill:"currentColor",d:"M13.325 2.617a2 2 0 0 0-3.203.52l-1.73 3.459a1.5 1.5 0 0 1-.784.721l-3.59 1.436a1 1 0 0 0-.335 1.636L6.293 13L3 16.292V17h.707L7 13.706l2.61 2.61a1 1 0 0 0 1.636-.335l1.436-3.59a1.5 1.5 0 0 1 .722-.784l3.458-1.73a2 2 0 0 0 .52-3.203l-4.057-4.057Z"})],-1)),Bu=[Cu],mu={class:"channel__program-present"},gu={class:"channel__program-present-title-wrapper"},vu=["innerHTML"],Eu={class:"channel__program-present-time"},fu=["innerHTML"],Au={class:"channel__program-following"},wu={class:"channel__program-following-title"},bu=n(()=>u("span",{class:"channel__program-following-title-decorate"},"NEXT",-1)),Du=n(()=>u("svg",{class:"channel__program-following-title-icon iconify iconify--fluent",width:"16px",height:"16px",viewBox:"0 0 20 20"},[u("path",{fill:"currentColor",d:"M10.018 5.486a1 1 0 0 1 1.592-.806l5.88 4.311a1.25 1.25 0 0 1 0 2.017l-5.88 4.311a1 1 0 0 1-1.592-.806v-3.16L4.61 15.319a1 1 0 0 1-1.592-.806V5.486A1 1 0 0 1 4.61 4.68l5.408 3.966v-3.16Z"})],-1)),ku=["innerHTML"],Su={class:"channel__program-following-time"},yu={class:"channel__progressbar"},xu={key:0,class:"pinned-container d-flex justify-center align-center w-100"},Pu={class:"d-flex justify-center align-center flex-column"},Tu=n(()=>u("h2",null,[o("ピン留めされているチャンネルが"),u("br"),o("ありません。")],-1)),Nu={class:"mt-4 text-text-darken-1"},Vu=n(()=>u("br",null,null,-1)),Hu=n(()=>u("div",{class:"mt-2 text-text-darken-1"},[o("チャンネルをピン留めすると、"),u("br"),o("このタブが最初に表示されます。")],-1)),Uu={key:0,class:"channels-list pinned-container d-flex justify-center align-center w-100",style:{"flex-grow":"1"}},ju=S('<div class="d-flex justify-center align-center flex-column" data-v-e4c13c75><h2 data-v-e4c13c75>視聴可能なチャンネルが<br class="d-sm-none" data-v-e4c13c75>ありません。</h2><div class="mt-4 text-text-darken-1" data-v-e4c13c75>前回チャンネルスキャンしたときに<br class="d-sm-none" data-v-e4c13c75>受信可能なチャンネルを見つけられませんでした。</div><div class="mt-1 text-text-darken-1" data-v-e4c13c75>再度チャンネルスキャンを行ってください。</div></div>',1),$u=[ju];function Iu(e,s,h,C,Mu,Lu){const y=d("HeaderBar"),x=d("Navigation"),E=d("Icon"),P=d("router-link"),T=d("SwiperSlide"),N=d("Swiper"),V=M("tooltip");return i(),r("div",Y,[_(y),u("main",null,[_(x),u("div",{class:p(["channels-container channels-container--home",{"channels-container--loading":e.is_loading}])},[uu,u("div",eu,[u("div",{class:"channels-tab__buttons",style:w({"--tab-length":Array.from(e.channelsStore.channels_list_with_pinned).length,"--active-tab-index":e.active_tab_index})},[(i(!0),r(B,null,m(Array.from(e.channelsStore.channels_list_with_pinned),([a],c)=>(i(),v(z,{variant:"flat",class:p(["channels-tab__button",{"channels-tab__button--active":e.active_tab_index===c}]),key:a,onClick:t=>e.active_tab_index=c},{default:F(()=>[o(l(a),1)]),_:2},1032,["class","onClick"]))),128)),tu],4)]),g(_(N,{class:"channels-list","space-between":32,"auto-height":!0,"touch-start-prevent-default":!1,observer:!0,"observe-parents":!0,onSwiper:s[1]||(s[1]=a=>e.swiper_instance=a),onSlideChange:s[2]||(s[2]=a=>e.active_tab_index=a.activeIndex)},{default:F(()=>[(i(!0),r(B,null,m(Array.from(e.channelsStore.channels_list_with_pinned),([a,c])=>(i(),v(T,{key:a},{default:F(()=>[u("div",{class:p(["channels",`channels--tab-${a} channels--length-${c.length}`])},[(i(!0),r(B,null,m(c,t=>g((i(),v(P,{class:"channel",draggable:"false",key:t.id,to:`/watch/${t.display_channel_id}`},{default:F(()=>[u("div",su,[u("img",{class:"channel__broadcaster-icon",src:`${e.Utils.api_base_url}/channels/${t.id}/logo`},null,8,nu),u("div",au,[u("span",iu,"Ch: "+l(t.channel_number)+" "+l(t.name),1),u("div",ou,[u("div",{class:p(["channel__broadcaster-status-force",`channel__broadcaster-status-force--${e.ChannelUtils.getChannelForceType(t.jikkyo_force)}`])},[ru,lu,u("span",cu,l(t.jikkyo_force??"--"),1),du],2),u("div",_u,[_(E,{icon:"bi:chat-left-text-fill",height:"11px"}),hu,u("span",pu,l(t.viewer_count),1)])])]),g((i(),r("div",{class:p(["channel__broadcaster-pin",{"channel__broadcaster-pin--pinned":e.isPinnedChannel(t)}]),onClick:D(zu=>e.isPinnedChannel(t)?e.removePinnedChannel(t):e.addPinnedChannel(t),["prevent","stop"]),onMousedown:s[0]||(s[0]=D(()=>{},["prevent","stop"]))},Bu,42,Fu)),[[k],[V,e.isPinnedChannel(t)?"ピン留めを外す":"ピン留めする"]])]),u("div",mu,[u("div",gu,[u("span",{class:"channel__program-present-title",innerHTML:e.ProgramUtils.decorateProgramInfo(t.program_present,"title")},null,8,vu),u("span",Eu,l(e.ProgramUtils.getProgramTime(t.program_present)),1)]),u("span",{class:"channel__program-present-description",innerHTML:e.ProgramUtils.decorateProgramInfo(t.program_present,"description")},null,8,fu)]),_(G),u("div",Au,[u("div",wu,[bu,Du,u("span",{class:"channel__program-following-title-text",innerHTML:e.ProgramUtils.decorateProgramInfo(t.program_following,"title")},null,8,ku)]),u("span",Su,l(e.ProgramUtils.getProgramTime(t.program_following)),1)]),u("div",yu,[u("div",{class:"channel__progressbar-progress",style:w(`width:${e.ProgramUtils.getProgramProgress(t.program_present)}%;`)},null,4)])]),_:2},1032,["to"])),[[k]])),128)),a==="ピン留め"&&c.length===0?(i(),r("div",xu,[u("div",Pu,[Tu,u("div",Nu,[o("各チャンネルの "),_(E,{style:{position:"relative",bottom:"-5px"},icon:"fluent:pin-20-filled",width:"22px"}),o(" アイコンから、よく実況する"),Vu,o("チャンネルをこのタブにピン留めできます。")]),Hu])])):b("",!0)],2)]),_:2},1024))),128))]),_:1},512),[[L,Array.from(e.channelsStore.channels_list_with_pinned).length>0]]),Array.from(e.channelsStore.channels_list_with_pinned).length===0?(i(),r("div",Uu,$u)):b("",!0)],2)])])}const Zu=I(Q,[["render",Iu],["__scopeId","data-v-e4c13c75"]]);export{Zu as default};
