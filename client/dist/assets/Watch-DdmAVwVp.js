import{d as $,m as S,C as u,M as p,U as Y,u as b,_ as w,r as A,o as C,l as H}from"./index-BY-ok70J.js";import{W as I,I as g,P as M,u as j}from"./PlayerController-DfhRxKsG.js";import{u as D}from"./ChannelsStore-BbFWH3QF.js";import"./ssrBoot-B1kmaleq.js";import"./VSwitch-Ds98AlOK.js";import"./VSelect-D1Bm2lbF.js";import"./VAvatar-B-8cjxJs.js";import"./VCard-Bp0a35jV.js";import"./swiper-DetHG_mj.js";import"./CommentMuteSettings-C91gFNpv.js";let i=null;const W=$({name:"Kakolog-Watch",components:{Watch:I},computed:{...S(j,b)},created(){this.init()},methods:{async init(){const a=this.$route.params.display_channel_id,c=this.$route.params.kakolog_period_id,e=u(c.split("-")[0]),r=u(c.split("-")[1]);if(r<e){p.error("指定された終了日時が開始日時より前です。"),this.$router.push({path:"/not-found/"});return}if(r>u()){p.error("指定された終了日時が未来の日付です。"),this.$router.push({path:"/not-found/"});return}if(e.isSame(r)){p.error("指定された開始日時と終了日時が同じです。"),this.$router.push({path:"/not-found/"});return}const s=D();await s.update();let o=null;if(a.length<=4?o=s.channels_list.GR.find(l=>l.id===a)??null:o=s.channels_list.BS.find(l=>l.id===a)??null,o===null){this.$router.push({path:"/not-found/"});return}await Y.sleep(.1);const n=e.hour()<4?e.subtract(1,"day"):e,t=structuredClone(g);t.id=-100,t.channel=o,t.recorded_video.recording_start_time=e.toISOString(),t.recorded_video.recording_end_time=r.toISOString(),t.recording_start_margin=0,t.recording_end_margin=0,t.title=`${o.name}【ニコニコ実況${e.isAfter("2024-06-09")?"+NX-Jikkyo":""}】${n.format("YYYY年MM月DD日")}`,t.description="",t.detail={過去ログ再生について:`過去ログ再生機能では、ニコニコ実況 過去ログ API (https://jikkyo.tsukumijima.net) に保存されている、2009年11月から現在までのほぼすべての過去ログコメントを再生できます。

現在は、Ch:${o.channel_number} ${o.name} の ${n.format("YYYY年MM月DD日 (dd)")} ${n.format("HH:mm")} 〜 ${r.format("HH:mm")} の過去ログコメントを、時系列に再生しています。`,"NX-Jikkyo について":`NX-Jikkyo は、放送中のテレビ番組や起きているイベントに対して、みんなでコメントをし盛り上がりを共有する、リアルタイムコミュニケーションサービスです。
ニコニコ実況に投稿されたコメントも、NX-Jikkyo のコメントと一緒にまとめて再生できます。`},t.start_time=e.toISOString(),t.end_time=r.toISOString(),t.duration=r.diff(e,"second"),this.playerStore.recorded_program=t;const d=`過去ログ再生 - Ch:${o.channel_number} ${o.name} ${n.format("YYYY年MM月DD日")} ${n.format("HH:mm")} 〜 ${r.format("HH:mm")} | NX-Jikkyo : ニコニコ実況避難所`,m="過去ログ再生機能では、ニコニコ実況 過去ログ API (https://jikkyo.tsukumijima.net) に保存されている、2009年11月から現在までのほぼすべての過去ログコメントを再生できます。";document.title=d;const _=document.querySelector('meta[name="description"]');_&&_.setAttribute("content",m);const h=document.querySelector('meta[property="og:title"]');h&&h.setAttribute("content",d);const f=document.querySelector('meta[property="og:description"]');f&&f.setAttribute("content",m);const y=document.querySelector('meta[name="twitter:title"]');y&&y.setAttribute("content",d);const k=document.querySelector('meta[name="twitter:description"]');k&&k.setAttribute("content",m),i=new M("Video"),await i.init()},async destroy(){this.playerStore.recorded_program=g,i!==null&&(await i.destroy(),i=null)}}});function P(a,c,e,r,s,o){const n=A("Watch",!0);return C(),H(n,{playback_mode:"Video"})}const V=w(W,[["render",P]]);export{V as default};
