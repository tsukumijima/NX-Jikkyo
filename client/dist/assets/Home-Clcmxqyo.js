import{d as P,U as C,P as T,m as j,M as b,u as U,_ as H,r as l,o as u,c,a as d,b as e,n as m,e as F,F as g,f,w as B,v as V,g as h,h as E,i as k,j as v,k as o,t as r,V as N,R as $,p as I,l as M}from"./index-iV-sR7KB.js";import{S as L,a as z,C as J,u as X}from"./ChannelsStore-B54Ton4x.js";import{H as K,N as O}from"./Navigation-BPtqRXEy.js";import{V as R}from"./ssrBoot-DpKHakH0.js";const q=P({name:"TV-Home",components:{HeaderBar:K,Navigation:O,Swiper:L,SwiperSlide:z},data(){return{Utils:Object.freeze(C),ChannelUtils:Object.freeze(J),ProgramUtils:Object.freeze(T),active_tab_index:0,swiper_instance:null,scroll_abort_controller:new AbortController,is_loading:!0,interval_ids:[]}},computed:{...j(X,U)},watch:{active_tab_index(){var t,a;(t=this.swiper_instance)==null||t.updateAutoHeight(),(a=this.swiper_instance)==null||a.slideTo(this.active_tab_index,this.is_loading===!0?0:void 0)}},async mounted(){var a;const t=60-new Date().getSeconds();this.interval_ids.push(window.setTimeout(()=>{this.channelsStore.update(!0),this.interval_ids.push(window.setInterval(()=>this.channelsStore.update(!0),30*1e3))},t*1e3)),await this.channelsStore.update(),(a=this.swiper_instance)==null||a.updateAutoHeight(),window.addEventListener("scroll",()=>{var p;(p=this.swiper_instance)==null||p.updateAutoHeight()},{passive:!0,signal:this.scroll_abort_controller.signal}),await C.sleep(.01),this.is_loading=!1},beforeUnmount(){for(const t of this.interval_ids)window.clearInterval(t);this.scroll_abort_controller.abort(),this.scroll_abort_controller=new AbortController},methods:{addPinnedChannel(t){this.settingsStore.settings.pinned_channel_ids=[...this.settingsStore.settings.pinned_channel_ids,t.id],b.show(`${t.name}をピン留めしました。`)},removePinnedChannel(t){this.settingsStore.settings.pinned_channel_ids=this.settingsStore.settings.pinned_channel_ids.filter(a=>a!==t.id),b.show(`${t.name}のピン留めを外しました。`)},isPinnedChannel(t){return this.settingsStore.settings.pinned_channel_ids.includes(t.id)}}}),i=t=>(I("data-v-fe4778ad"),t=t(),M(),t),Z={class:"route-container"},G=k('<p class="mt-5 mx-4 text-center" data-v-fe4778ad><strong data-v-fe4778ad>ぜひこのサイトをまだ NX-Jikkyo を知らないニコニコ実況難民の方に広めていただけると嬉しいです！</strong><br data-v-fe4778ad><a class="link" href="https://air.fem.jp/jkcommentviewer/" target="_blank" data-v-fe4778ad>jkcommentviewer</a> / <a class="link" href="https://blog.tsukumijima.net/article/nx-jikkyo-released/#toc4" target="_blank" data-v-fe4778ad>TVTest (NicoJK)</a> / <a class="link" href="https://github.com/tsukumijima/KonomiTV/releases/tag/v0.10.1" target="_blank" data-v-fe4778ad>KonomiTV</a> 最新版で NX-Jikkyo に対応しました！！🎉🎊<br data-v-fe4778ad> 最新情報は <a class="link" href="https://x.com/search?q=%23NXJikkyo&amp;src=typed_query" target="_blank" data-v-fe4778ad>Twitter</a> で発信中です📣 （<a class="link" href="https://twitter.com/TVRemotePlus/status/1801495262348906833" target="_blank" data-v-fe4778ad>干し芋 or アマギフいただけると大変モチベになります🙏</a>） </p>',1),Q={class:"channels-tab"},W=i(()=>e("div",{class:"channels-tab__highlight"},null,-1)),Y={class:"channel__broadcaster"},ee=["src"],te={class:"channel__broadcaster-content"},se={class:"channel__broadcaster-name"},ae={class:"channel__broadcaster-status"},ne=i(()=>e("svg",{class:"iconify iconify--fa-solid",width:"10.5px",height:"12px",viewBox:"0 0 448 512"},[e("path",{fill:"currentColor",d:"M323.56 51.2c-20.8 19.3-39.58 39.59-56.22 59.97C240.08 73.62 206.28 35.53 168 0C69.74 91.17 0 209.96 0 281.6C0 408.85 100.29 512 224 512s224-103.15 224-230.4c0-53.27-51.98-163.14-124.44-230.4zm-19.47 340.65C282.43 407.01 255.72 416 226.86 416C154.71 416 96 368.26 96 290.75c0-38.61 24.31-72.63 72.79-130.75c6.93 7.98 98.83 125.34 98.83 125.34l58.63-66.88c4.14 6.85 7.91 13.55 11.27 19.97c27.35 52.19 15.81 118.97-33.43 153.42z"})],-1)),ie=i(()=>e("span",{class:"ml-1"},"勢い:",-1)),ue={class:"ml-1"},oe=i(()=>e("span",{style:{"margin-left":"3px"}}," コメ/分",-1)),re={class:"channel__broadcaster-status-viewers ml-2"},le=i(()=>e("span",{class:"ml-1"},"コメント数:",-1)),ce={class:"ml-1"},de={class:"channel__program-present"},_e={class:"channel__program-present-title-wrapper"},he=["innerHTML"],pe={class:"channel__program-present-time"},me=["innerHTML"],ge={class:"channel__program-following"},fe={class:"channel__program-following-title"},ve=i(()=>e("span",{class:"channel__program-following-title-decorate"},"NEXT",-1)),we=i(()=>e("svg",{class:"channel__program-following-title-icon iconify iconify--fluent",width:"16px",height:"16px",viewBox:"0 0 20 20"},[e("path",{fill:"currentColor",d:"M10.018 5.486a1 1 0 0 1 1.592-.806l5.88 4.311a1.25 1.25 0 0 1 0 2.017l-5.88 4.311a1 1 0 0 1-1.592-.806v-3.16L4.61 15.319a1 1 0 0 1-1.592-.806V5.486A1 1 0 0 1 4.61 4.68l5.408 3.966v-3.16Z"})],-1)),Ce=["innerHTML"],be={class:"channel__program-following-time"},Fe={class:"channel__progressbar"},Be={key:0,class:"pinned-container d-flex justify-center align-center w-100"},Ee={class:"d-flex justify-center align-center flex-column"},ke=i(()=>e("h2",null,[o("ピン留めされているチャンネルが"),e("br"),o("ありません。")],-1)),Se={class:"mt-4 text-text-darken-1"},ye=i(()=>e("br",null,null,-1)),De=i(()=>e("div",{class:"mt-2 text-text-darken-1"},[o("チャンネルをピン留めすると、"),e("br"),o("このタブが最初に表示されます。")],-1)),Ae={key:0,class:"channels-list pinned-container d-flex justify-center align-center w-100",style:{"flex-grow":"1"}},xe=k('<div class="d-flex justify-center align-center flex-column" data-v-fe4778ad><h2 data-v-fe4778ad>視聴可能なチャンネルが<br class="d-sm-none" data-v-fe4778ad>ありません。</h2><div class="mt-4 text-text-darken-1" data-v-fe4778ad>前回チャンネルスキャンしたときに<br class="d-sm-none" data-v-fe4778ad>受信可能なチャンネルを見つけられませんでした。</div><div class="mt-1 text-text-darken-1" data-v-fe4778ad>再度チャンネルスキャンを行ってください。</div></div>',1),Pe=[xe];function Te(t,a,p,je,Ue,He){const S=l("HeaderBar"),y=l("Navigation"),w=l("Icon"),D=l("router-link"),A=l("SwiperSlide"),x=l("Swiper");return u(),c("div",Z,[d(S),e("main",null,[d(y),e("div",{class:m(["channels-container channels-container--home",{"channels-container--loading":t.is_loading}])},[G,e("div",Q,[e("div",{class:"channels-tab__buttons",style:F({"--tab-length":Array.from(t.channelsStore.channels_list_with_pinned).length,"--active-tab-index":t.active_tab_index})},[(u(!0),c(g,null,f(Array.from(t.channelsStore.channels_list_with_pinned),([n],_)=>(u(),v(N,{variant:"flat",class:"channels-tab__button",key:n,onClick:s=>t.active_tab_index=_},{default:h(()=>[o(r(n),1)]),_:2},1032,["onClick"]))),128)),W],4)]),B(d(x,{class:"channels-list","space-between":32,"auto-height":!0,"touch-start-prevent-default":!1,observer:!0,"observe-parents":!0,onSwiper:a[0]||(a[0]=n=>t.swiper_instance=n),onSlideChange:a[1]||(a[1]=n=>t.active_tab_index=n.activeIndex)},{default:h(()=>[(u(!0),c(g,null,f(Array.from(t.channelsStore.channels_list_with_pinned),([n,_])=>(u(),v(A,{key:n},{default:h(()=>[e("div",{class:m(["channels",`channels--tab-${n} channels--length-${_.length}`])},[(u(!0),c(g,null,f(_,s=>B((u(),v(D,{class:"channel",draggable:"false",key:s.id,to:`/watch/${s.display_channel_id}`},{default:h(()=>[e("div",Y,[e("img",{class:"channel__broadcaster-icon",src:`${t.Utils.api_base_url}/channels/${s.id}/logo`},null,8,ee),e("div",te,[e("span",se,"Ch: "+r(s.channel_number)+" "+r(s.name),1),e("div",ae,[e("div",{class:m(["channel__broadcaster-status-force",`channel__broadcaster-status-force--${t.ChannelUtils.getChannelForceType(s.jikkyo_force)}`])},[ne,ie,e("span",ue,r(s.jikkyo_force??"--"),1),oe],2),e("div",re,[d(w,{icon:"bi:chat-left-text-fill",height:"11px"}),le,e("span",ce,r(s.viewer_count),1)])])])]),e("div",de,[e("div",_e,[e("span",{class:"channel__program-present-title",innerHTML:t.ProgramUtils.decorateProgramInfo(s.program_present,"title")},null,8,he),e("span",pe,r(t.ProgramUtils.getProgramTime(s.program_present)),1)]),e("span",{class:"channel__program-present-description",innerHTML:t.ProgramUtils.decorateProgramInfo(s.program_present,"description")},null,8,me)]),d(R),e("div",ge,[e("div",fe,[ve,we,e("span",{class:"channel__program-following-title-text",innerHTML:t.ProgramUtils.decorateProgramInfo(s.program_following,"title")},null,8,Ce)]),e("span",be,r(t.ProgramUtils.getProgramTime(s.program_following)),1)]),e("div",Fe,[e("div",{class:"channel__progressbar-progress",style:F(`width:${t.ProgramUtils.getProgramProgress(s.program_present)}%;`)},null,4)])]),_:2},1032,["to"])),[[$]])),128)),n==="ピン留め"&&_.length===0?(u(),c("div",Be,[e("div",Ee,[ke,e("div",Se,[o("各チャンネルの "),d(w,{style:{position:"relative",bottom:"-5px"},icon:"fluent:pin-20-filled",width:"22px"}),o(" アイコンから、よくみる"),ye,o("チャンネルをこのタブにピン留めできます。")]),De])])):E("",!0)],2)]),_:2},1024))),128))]),_:1},512),[[V,Array.from(t.channelsStore.channels_list_with_pinned).length>0]]),Array.from(t.channelsStore.channels_list_with_pinned).length===0?(u(),c("div",Ae,Pe)):E("",!0)],2)])])}const Me=H(q,[["render",Te],["__scopeId","data-v-fe4778ad"]]);export{Me as default};
