import{_ as P,V as I,u as A}from"./ssrBoot-PayXtu77.js";import{d as $,s as T,Q as j,o as c,c as k,h as f,k as b,w as _,b as u,e as N,a as r,y as F,V as C,i as H,j as y,R as g,_ as E,D as R,dc as z,E as J,d0 as L,cn as W,cm as G,dE as X,G as U,d7 as q,cU as M,H as Q,dF as K,dg as O,cx as Y,bJ as w,d2 as Z,cs as tt,cw as et,I as x,cf as nt,dG as it,d8 as at,d1 as st,ch as ot,cu as rt,dH as lt,n as h,N as ut,U as S,m as ct,t as vt,p as dt}from"./index-CO6Oz8Ox.js";function _t(t,e,n,s){function l(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function d(v){try{a(s.next(v))}catch(p){o(p)}}function m(v){try{a(s.throw(v))}catch(p){o(p)}}function a(v){v.done?i(v.value):l(v.value).then(d,m)}a((s=s.apply(t,[])).next())})}function ft(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,l,i,o;return o={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function d(a){return function(v){return m([a,v])}}function m(a){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(n=0)),n;)try{if(s=1,l&&(i=a[0]&2?l.return:a[0]?l.throw||((i=l.return)&&i.call(l),0):l.next)&&!(i=i.call(l,a[1])).done)return i;switch(l=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,l=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(v){a=[6,v],l=0}finally{s=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var gt=function(){function t(){var e=this;this.event=null,this.callbacks=[],this.install=function(){return _t(e,void 0,void 0,function(){var n=this;return ft(this,function(s){switch(s.label){case 0:return this.event?(this.event.prompt(),[4,this.event.userChoice.then(function(l){var i=l.outcome;return n.updateEvent(null),i==="accepted"})]):[3,2];case 1:return[2,s.sent()];case 2:throw new Error("Not allowed to prompt.")}})})},!(typeof window>"u")&&(window.addEventListener("beforeinstallprompt",function(n){n.preventDefault(),e.updateEvent(n)}),window.addEventListener("appinstalled",function(){e.updateEvent(null)}))}return t.prototype.getEvent=function(){return this.event},t.prototype.canInstall=function(){return this.event!==null},t.prototype.updateEvent=function(e){var n=this;e!==this.event&&(this.event=e,this.callbacks.forEach(function(s){return s(n.canInstall())}))},t.prototype.addListener=function(e){e(this.canInstall()),this.callbacks.push(e)},t.prototype.removeListener=function(e){this.callbacks=this.callbacks.filter(function(n){return e!==n})},t}(),V=new gt;const ht={class:"header"},mt=$({__name:"HeaderBar",setup(t){const e=T(!1);return j(()=>{V.addListener(n=>{e.value=n})}),(n,s)=>{const l=y("router-link"),i=y("Icon");return c(),k("header",ht,[f((c(),b(l,{class:"nx-jikkyo-logo ml-3 ml-md-6",to:"/"},{default:_(()=>s[1]||(s[1]=[u("img",{class:"nx-jikkyo-logo__image",src:P,height:"35",alt:"NX-Jikkyo"},null,-1)])),_:1})),[[g]]),s[3]||(s[3]=u("div",{class:"subtitle ml-2 pt-1 d-flex align-center text-text-darken-1",style:{"font-size":"15px","user-select":"none"}},[u("div",{class:"mr-2",style:{"font-size":"17px"}},"|"),N(" Nico Nico Jikkyo Alternative ")],-1)),r(I),e.value?(c(),b(C,{key:0,variant:"flat",color:"background-lighten-3",class:"pwa-install-button",onClick:s[0]||(s[0]=o=>F(V).install())},{default:_(()=>[r(i,{icon:"material-symbols:install-desktop-rounded",height:"20px",class:"mr-1"}),s[2]||(s[2]=N(" アプリとしてインストール "))]),_:1})):H("",!0)])}}}),Ft=E(mt,[["__scopeId","data-v-7d4d6936"]]),pt=R({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...z(),...J(),...L(),...W(),...G(),...X({name:"bottom-navigation"}),...U({tag:"header"}),...q({selectedClass:"v-btn--selected"}),...M()},"VBottomNavigation"),kt=Q()({name:"VBottomNavigation",props:pt(),emits:{"update:active":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:s}=K(),{borderClasses:l}=O(t),{backgroundColorClasses:i,backgroundColorStyles:o}=Y(w(t,"bgColor")),{densityClasses:d}=Z(t),{elevationClasses:m}=tt(t),{roundedClasses:a}=et(t),{ssrBootStyles:v}=A(),p=x(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),B=nt(t,"active",t.active),{layoutItemStyles:D}=it({id:t.name,order:x(()=>parseInt(t.order,10)),position:x(()=>"bottom"),layoutSize:x(()=>B.value?p.value:0),elementSize:p,active:B,absolute:w(t,"absolute")});return at(t,lt),st({VBtn:{baseColor:w(t,"baseColor"),color:w(t,"color"),density:w(t,"density"),stacked:x(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),ot(()=>r(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":B.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},s.value,i.value,l.value,d.value,m.value,a.value,t.class],style:[o.value,D.value,{height:rt(p.value)},v.value,t.style]},{default:()=>[n.default&&r("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),bt={};function yt(t,e){const n=y("Icon");return c(),b(kt,{class:"bottom-navigation-container elevation-12",color:"primary",grow:"",active:""},{default:_(()=>[r(C,{class:h(["bottom-navigation-button",{"v-btn--active":t.$route.path=="/"}]),to:"/"},{default:_(()=>[r(n,{icon:"fluent:tv-20-regular",width:"30px"}),e[0]||(e[0]=u("span",{class:"mt-1"},"テレビ実況",-1))]),_:1},8,["class"]),r(C,{class:h(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/log")}]),to:"/log/"},{default:_(()=>[r(n,{icon:"fluent:receipt-play-20-regular",width:"30px"}),e[1]||(e[1]=u("span",{class:"mt-1"},"過去ログ再生",-1))]),_:1},8,["class"]),r(C,{class:h(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/about")}]),to:"/about/"},{default:_(()=>[r(n,{icon:"fluent:info-16-regular",width:"26px"}),e[2]||(e[2]=u("span",{class:"mt-1"},"NX-Jikkyo とは",-1))]),_:1},8,["class"]),r(C,{class:h(["bottom-navigation-button",{"v-btn--active":t.$route.path.startsWith("/settings")}]),to:"/settings/"},{default:_(()=>[r(n,{icon:"fluent:settings-20-regular",width:"30px"}),e[3]||(e[3]=u("span",{class:"mt-1"},"設定",-1))]),_:1},8,["class"])]),_:1})}const wt=E(bt,[["render",yt],["__scopeId","data-v-93ece83c"]]);class xt{static async fetchServerVersion(e=!1){return null}}const Ct=ut("version",{state:()=>({server_version_info:null,last_updated_at:0}),getters:{client_version(){return S.version},server_version(){var t;return((t=this.server_version_info)==null?void 0:t.version)??null},latest_version(){var t;return((t=this.server_version_info)==null?void 0:t.latest_version)??null},is_client_develop_version(){return this.client_version.includes("-dev")},is_server_develop_version(){var t;return((t=this.server_version)==null?void 0:t.includes("-dev"))??!1},is_update_available(){return this.server_version===null||this.latest_version===null?!1:this.is_server_develop_version===!1&&this.server_version!==this.latest_version||this.is_server_develop_version===!0&&this.server_version.replace("-dev","")===this.latest_version},is_version_mismatch(){return this.server_version===null?!1:this.client_version!==this.server_version}},actions:{async fetchServerVersion(t=!1){if(this.server_version_info!==null&&t===!1)return S.time()-this.last_updated_at>60&&this.fetchServerVersion(!0),this.server_version_info;const e=await xt.fetchServerVersion();return e===null?null:(this.server_version_info=e,this.last_updated_at=S.time(),this.server_version_info)}}}),Bt=$({name:"Navigation",components:{BottomNavigation:wt},computed:{...ct(Ct)},async created(){await this.versionStore.fetchServerVersion()}}),St={class:"navigation-container elevation-8"},Et={class:"navigation"},Nt={class:"navigation-scroll"},Vt={class:"navigation__link","active-class":"navigation__link--active",href:"https://jikkyo.tsukumijima.net",target:"_blank"},It={class:"navigation__link","active-class":"navigation__link--active",href:"https://x.com/search?q=%23NXJikkyo%20from%3ATVRemotePlus&src=typed_query&f=live",target:"_blank"},$t={class:"navigation__link","active-class":"navigation__link--active",href:"https://x.com/TVRemotePlus",target:"_blank"},Dt={class:"navigation__link","active-class":"navigation__link--active",href:"https://play.google.com/store/apps/details?id=net.tsukumijima.nxjikkyo.android",target:"_blank"},Pt={class:"navigation__link-text"};function At(t,e,n,s,l,i){const o=y("Icon"),d=y("router-link"),m=y("BottomNavigation"),a=dt("ftooltip");return c(),k("div",null,[u("div",St,[u("nav",Et,[u("div",Nt,[f((c(),b(d,{class:h(["navigation__link",{"navigation__link--active":t.$route.path=="/"}]),"active-class":"navigation__link--active",to:"/"},{default:_(()=>[r(o,{class:"navigation__link-icon",icon:"fluent:tv-20-regular",width:"26px"}),e[0]||(e[0]=u("span",{class:"navigation__link-text"},"テレビ実況",-1))]),_:1},8,["class"])),[[g]]),f((c(),b(d,{class:h(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/log")}]),"active-class":"navigation__link--active",to:"/log/"},{default:_(()=>[r(o,{class:"navigation__link-icon",icon:"fluent:receipt-play-20-regular",width:"26px"}),e[1]||(e[1]=u("span",{class:"navigation__link-text"},"過去ログ再生",-1))]),_:1},8,["class"])),[[g]]),f((c(),k("a",Vt,[r(o,{class:"navigation__link-icon",icon:"fluent:slide-text-multiple-20-regular",width:"26px"}),e[2]||(e[2]=u("span",{class:"navigation__link-text"},"過去ログ API",-1))])),[[g]]),f((c(),b(d,{class:h(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/about")}]),"active-class":"navigation__link--active",to:"/about/"},{default:_(()=>[r(o,{class:"navigation__link-icon",icon:"fluent:info-16-regular",width:"26px"}),e[3]||(e[3]=u("span",{class:"navigation__link-text"},"NX-Jikkyo とは",-1))]),_:1},8,["class"])),[[g]]),r(I),f((c(),b(d,{class:h(["navigation__link",{"navigation__link--active":t.$route.path.startsWith("/settings")}]),"active-class":"navigation__link--active",to:"/settings/"},{default:_(()=>[r(o,{class:"navigation__link-icon",icon:"fluent:settings-20-regular",width:"26px"}),e[4]||(e[4]=u("span",{class:"navigation__link-text"},"設定",-1))]),_:1},8,["class"])),[[g]]),f((c(),k("a",It,[r(o,{class:"navigation__link-icon",icon:"fluent:news-20-regular",width:"26px"}),e[5]||(e[5]=u("span",{class:"navigation__link-text"},"最新情報",-1))])),[[g]]),f((c(),k("a",$t,[r(o,{class:"navigation__link-icon",icon:"basil:twitter-outline",width:"26px"}),e[6]||(e[6]=u("span",{class:"navigation__link-text"},"公式 Twitter",-1))])),[[g]]),f((c(),k("a",Dt,[r(o,{class:"navigation__link-icon",icon:"basil:android-outline",width:"26px"}),e[7]||(e[7]=u("span",{class:"navigation__link-text"},"Android アプリ",-1))])),[[g]]),f((c(),k("a",{class:h(["navigation__link",{"navigation__link--develop-version":t.versionStore.is_client_develop_version,"navigation__link--highlight":t.versionStore.is_update_available}]),"active-class":"navigation__link--active",href:"https://github.com/tsukumijima/NX-Jikkyo",target:"_blank"},[r(o,{class:"navigation__link-icon",icon:"fluent:info-16-regular",width:"26px"}),u("span",Pt,"version "+vt(t.versionStore.client_version),1)],2)),[[g],[a,t.versionStore.is_update_available?`アップデートがあります (version ${t.versionStore.latest_version})`:"",void 0,{top:!0}]])])])]),r(m)])}const Ht=E(Bt,[["render",At],["__scopeId","data-v-c688c5ac"]]);export{Ft as H,Ht as N,Ct as u};
