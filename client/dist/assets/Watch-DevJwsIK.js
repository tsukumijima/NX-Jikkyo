import{d as $,m as S,C as u,M as p,U as Y,u as b,_ as w,r as C,o as H,l as I}from"./index-xhsFAXK1.js";import{W as M,I as g,P as j,u as A}from"./PlayerController-ehaw65et.js";import{u as D}from"./ChannelsStore-43S2FinL.js";import"./ssrBoot-CDuSuGk8.js";import"./VSwitch-BmeVX8ls.js";import"./VSelect-CzkF5TST.js";import"./VAvatar-Dy5swHgB.js";import"./VCard-DiI5dHMA.js";import"./swiper-De698YPg.js";import"./CommentMuteSettings--ZYXpTRe.js";let i=null;const W=$({name:"Kakolog-Watch",components:{Watch:M},computed:{...S(A,b)},created(){this.init()},methods:{async init(){const a=this.$route.params.display_channel_id,c=this.$route.params.kakolog_period_id,o=u(c.split("-")[0]),r=u(c.split("-")[1]);if(r<o){p.error("指定された終了日時が開始日時より前です。"),this.$router.push({path:"/not-found/"});return}if(r>u()){p.error("指定された終了日時が未来の日付です。"),this.$router.push({path:"/not-found/"});return}if(o.isSame(r)){p.error("指定された開始日時と終了日時が同じです。"),this.$router.push({path:"/not-found/"});return}const s=D();await s.update();let e=null;if(a.length<=4?e=s.channels_list.GR.find(l=>l.id===a)??null:e=s.channels_list.BS.find(l=>l.id===a)??null,e===null){this.$router.push({path:"/not-found/"});return}await Y.sleep(.1);const n=o.hour()<4?o.subtract(1,"day"):o,t=structuredClone(g);t.id=-100,t.channel=e,t.recorded_video.recording_start_time=o.toISOString(),t.recorded_video.recording_end_time=r.toISOString(),t.recording_start_margin=0,t.recording_end_margin=0,t.title=`${e.name}【ニコニコ実況・NX-Jikkyo】${n.format("YYYY年MM月DD日")}`,t.description="ニコニコ実況・NX-Jikkyo は、放送中のテレビ番組や起きているイベントに対して、みんなでコメントをし盛り上がりを共有する、リアルタイムコミュニケーションサービスです。<br>",t.detail={過去ログ再生について:`過去ログ再生機能では、ニコニコ実況 過去ログ API (https://jikkyo.tsukumijima.net) に保存されている、2009年11月から現在までの 旧ニコニコ実況・ニコ生統合後の新ニコニコ実況・ニコニコ実況 (Re:仮)・NX-Jikkyo の過去ログコメントを再生できます。

現在は、Ch:${e.channel_number} ${e.name} の ${n.format("YYYY年MM月DD日 (dd)")} ${n.format("HH:mm")} 〜 ${r.format("HH:mm")} の過去ログコメントを、時系列に再生しています。`},t.start_time=o.toISOString(),t.end_time=r.toISOString(),t.duration=r.diff(o,"second"),this.playerStore.recorded_program=t;const d=`過去ログ再生 - Ch:${e.channel_number} ${e.name} ${n.format("YYYY年MM月DD日")} ${n.format("HH:mm")} 〜 ${r.format("HH:mm")} | NX-Jikkyo : ニコニコ実況避難所`,m="過去ログ再生機能では、ニコニコ実況 過去ログ API (https://jikkyo.tsukumijima.net) に保存されている、2009年11月から現在までの 旧ニコニコ実況・ニコ生統合後の新ニコニコ実況・ニコニコ実況 (Re:仮)・NX-Jikkyo の過去ログコメントを再生できます。";document.title=d;const _=document.querySelector('meta[name="description"]');_&&_.setAttribute("content",m);const h=document.querySelector('meta[property="og:title"]');h&&h.setAttribute("content",d);const f=document.querySelector('meta[property="og:description"]');f&&f.setAttribute("content",m);const y=document.querySelector('meta[name="twitter:title"]');y&&y.setAttribute("content",d);const k=document.querySelector('meta[name="twitter:description"]');k&&k.setAttribute("content",m),i=new j("Video"),await i.init()},async destroy(){this.playerStore.recorded_program=g,i!==null&&(await i.destroy(),i=null)}}});function P(a,c,o,r,s,e){const n=C("Watch",!0);return H(),I(n,{playback_mode:"Video"})}const V=w(W,[["render",P]]);export{V as default};
