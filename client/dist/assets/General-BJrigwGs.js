import{d as lu,U as y,m as au,M as _,u as ou,x as ru,a2 as X,A as du,a3 as cu,a4 as mu,B as m,a5 as U,W as E,N as Cu,a6 as Bu,a7 as pu,a as s,a8 as b,F as S,a1 as vu,a9 as _u,_ as gu,r as M,o as T,i as Au,g as A,b as e,w as fu,c as Du,j as r,V as k,R as Fu}from"./index-DiZTtteo.js";import{S as hu}from"./Base-XptIuJDR.js";import{m as yu,c as Eu,u as bu,d as J,f as Su,e as ku,g as Vu,h as wu,i as Iu,j as O,k as Pu}from"./VSelect-CfdPp7N_.js";import"./Navigation-CapIHGk4.js";import"./ssrBoot-CIT17iFD.js";import"./VAvatar-DFVOGU5E.js";const $u=lu({name:"Settings-General",components:{SettingsBase:hu},data(){return{Utils:Object.freeze(y),is_form_dense:y.isSmartphoneHorizontal(),pinned_channel_settings_modal:!1,panel_display_state:[{title:"前回の状態を復元する",value:"RestorePreviousState"},{title:"常に表示する",value:"AlwaysDisplay"},{title:"常に折りたたむ",value:"AlwaysFold"}],tv_panel_active_tab:[{title:"番組情報タブ",value:"Program"},{title:"チャンネルタブ",value:"Channel"},{title:"コメントタブ",value:"Comment"}],video_panel_active_tab:[{title:"番組情報タブ",value:"RecordedProgram"},{title:"シリーズタブ",value:"Series"},{title:"コメントタブ",value:"Comment"},{title:"Twitter タブ",value:"Twitter"}],import_settings_file:[]}},computed:{...au(ou)},methods:{exportSettings(){const u=JSON.stringify(this.settingsStore.settings,null,4),n=new Blob([u],{type:"application/json"});y.downloadBlobData(n,"NX-Jikkyo-Settings.json"),_.success("設定をエクスポートしました。")},async importSettings(){if(this.import_settings_file.length===0){_.error("インポートする設定データを選択してください！");return}await this.settingsStore.importClientSettings(this.import_settings_file[0])===!0?(_.success("設定をインポートしました。"),window.setTimeout(()=>this.$router.go(0),300)):_.error("設定データが不正なため、インポートできませんでした。")},async resetSettings(){await this.settingsStore.resetClientSettings(),_.success("設定をリセットしました。"),window.setTimeout(()=>this.$router.go(0),300)}}}),Ru=ru({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:u=>typeof u=="boolean"||[1e3,1024].includes(Number(u))},...yu({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:u=>u.multiple?[]:null,validator:u=>X(u).every(n=>n!=null&&typeof n=="object")},...Eu({clearable:!0})},"VFileInput"),zu=du()({name:"VFileInput",inheritAttrs:!1,props:Ru(),emits:{"click:control":u=>!0,"mousedown:control":u=>!0,"update:focused":u=>!0,"update:modelValue":u=>!0},setup(u,n){let{attrs:V,emit:f,slots:a}=n;const{t:D}=cu(),i=mu(u,"modelValue",u.modelValue,t=>X(t),t=>u.multiple||Array.isArray(u.modelValue)?t:t[0]),{isFocused:C,focus:o,blur:G}=bu(u),w=m(()=>typeof u.showSize!="boolean"?u.showSize:void 0),I=m(()=>(i.value??[]).reduce((t,l)=>{let{size:B=0}=l;return t+B},0)),P=m(()=>U(I.value,w.value)),F=m(()=>(i.value??[]).map(t=>{const{name:l="",size:B=0}=t;return u.showSize?`${l} (${U(B,w.value)})`:l})),H=m(()=>{var l;const t=((l=i.value)==null?void 0:l.length)??0;return u.showSize?D(u.counterSizeString,t,P.value):D(u.counterString,t)}),$=E(),R=E(),d=E(),L=m(()=>C.value||u.active),z=m(()=>["plain","underlined"].includes(u.variant));function h(){var t;d.value!==document.activeElement&&((t=d.value)==null||t.focus()),C.value||o()}function W(t){var l;(l=d.value)==null||l.click()}function q(t){f("mousedown:control",t)}function K(t){var l;(l=d.value)==null||l.click(),f("click:control",t)}function Q(t){t.stopPropagation(),h(),vu(()=>{i.value=[],_u(u["onClick:clear"],t)})}return Cu(i,t=>{(!Array.isArray(t)||!t.length)&&d.value&&(d.value.value="")}),Bu(()=>{const t=!!(a.counter||u.counter),l=!!(t||a.details),[B,Y]=pu(V),{modelValue:Qu,...Z}=J.filterProps(u),uu=Su(u);return s(J,b({ref:$,modelValue:i.value,"onUpdate:modelValue":p=>i.value=p,class:["v-file-input",{"v-file-input--chips":!!u.chips,"v-input--plain-underlined":z.value},u.class],style:u.style,"onClick:prepend":W},B,Z,{centerAffix:!z.value,focused:C.value}),{...a,default:p=>{let{id:g,isDisabled:v,isDirty:j,isReadonly:N,isValid:eu}=p;return s(ku,b({ref:R,"prepend-icon":u.prependIcon,onMousedown:q,onClick:K,"onClick:clear":Q,"onClick:prependInner":u["onClick:prependInner"],"onClick:appendInner":u["onClick:appendInner"]},uu,{id:g.value,active:L.value||j.value,dirty:j.value,disabled:v.value,focused:C.value,error:eu.value===!1}),{...a,default:tu=>{var x;let{props:{class:su,...nu}}=tu;return s(S,null,[s("input",b({ref:d,type:"file",readonly:N.value,disabled:v.value,multiple:u.multiple,name:u.name,onClick:c=>{c.stopPropagation(),N.value&&c.preventDefault(),h()},onChange:c=>{if(!c.target)return;const iu=c.target;i.value=[...iu.files??[]]},onFocus:h,onBlur:G},nu,Y),null),s("div",{class:su},[!!((x=i.value)!=null&&x.length)&&(a.selection?a.selection({fileNames:F.value,totalBytes:I.value,totalBytesReadable:P.value}):u.chips?F.value.map(c=>s(Vu,{key:c,size:"small",text:c},null)):F.value.join(", "))])])}})},details:l?p=>{var g,v;return s(S,null,[(g=a.details)==null?void 0:g.call(a,p),t&&s(S,null,[s("span",null,null),s(wu,{active:!!((v=i.value)!=null&&v.length),value:H.value},a.counter)])])}:void 0})}),Iu({},$,R,d)}}),ju={class:"settings__heading"},Nu=e("span",{class:"ml-3"},"全般",-1),xu={class:"settings__content"},Uu={class:"settings__item"},Mu=e("div",{class:"settings__item-heading"},"デフォルトのパネルの表示状態",-1),Tu=e("div",{class:"settings__item-label"},[r(" 実況画面を開いたときに、右側のパネルをどう表示するかを設定します。"),e("br")],-1),Ju={class:"settings__item"},Ou=e("div",{class:"settings__item-heading"},"デフォルトで表示されるパネルのタブ",-1),Xu=e("div",{class:"settings__item-label"},[r(" 実況画面を開いたときに、右側のパネルで最初に表示されるタブを設定します。"),e("br")],-1),Gu=e("div",{class:"settings__item"},[e("div",{class:"settings__item-heading"},"設定をエクスポート"),e("div",{class:"settings__item-label"},[r(" このデバイス (ブラウザ) に保存されている設定データを、エクスポート (ダウンロード) できます。"),e("br"),r(" ダウンロードした設定データ (NX-Jikkyo-Settings.json) は、[設定をインポート] からインポートできます。異なるサーバーの NX-Jikkyo を同じ設定で使いたいときなどに使ってください。"),e("br")])],-1),Hu={class:"settings__item"},Lu=e("div",{class:"settings__item-heading text-error-lighten-1"},"設定をインポート",-1),Wu=e("div",{class:"settings__item-label"},[r(" [設定をエクスポート] でダウンロードした設定データを、このデバイス (ブラウザ) にインポートできます。"),e("br"),e("strong",{class:"text-error-lighten-1"},"設定をインポートすると、現在のデバイス設定はすべて上書きされます。元に戻すことはできません。"),e("br"),e("strong",{class:"text-error-lighten-1"},"設定のデバイス間同期がオンのときは、同期が有効なすべてのデバイスに反映されます。"),r("十分ご注意ください。"),e("br")],-1),qu=e("div",{class:"settings__item"},[e("div",{class:"settings__item-heading text-error-lighten-1"},"設定を初期状態にリセット"),e("div",{class:"settings__item-label"},[r(" このデバイス (ブラウザ) に保存されている設定データを、初期状態のデフォルト値にリセットできます。"),e("br"),e("strong",{class:"text-error-lighten-1"},"設定をリセットすると、元に戻すことはできません。"),e("br"),e("strong",{class:"text-error-lighten-1"},"設定のデバイス間同期がオンのときは、同期が有効なすべてのデバイスに反映されます。"),r("十分ご注意ください。"),e("br")])],-1);function Ku(u,n,V,f,a,D){const i=M("Icon"),C=M("SettingsBase");return T(),Au(C,null,{default:A(()=>[e("h2",ju,[fu((T(),Du("a",{class:"settings__back-button",onClick:n[0]||(n[0]=o=>u.$router.back())},[s(i,{icon:"fluent:arrow-left-12-filled",width:"25px"})])),[[Fu]]),s(i,{icon:"fa-solid:sliders-h",width:"19px",style:{margin:"0 4px"}}),Nu]),e("div",xu,[e("div",Uu,[Mu,Tu,s(O,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:u.is_form_dense?"compact":"default",items:u.panel_display_state,modelValue:u.settingsStore.settings.panel_display_state,"onUpdate:modelValue":n[1]||(n[1]=o=>u.settingsStore.settings.panel_display_state=o)},null,8,["density","items","modelValue"])]),e("div",Ju,[Ou,Xu,s(O,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:u.is_form_dense?"compact":"default",items:u.tv_panel_active_tab,modelValue:u.settingsStore.settings.tv_panel_active_tab,"onUpdate:modelValue":n[2]||(n[2]=o=>u.settingsStore.settings.tv_panel_active_tab=o)},null,8,["density","items","modelValue"])]),s(Pu,{class:"mt-6"}),Gu,s(k,{class:"settings__save-button mt-4",variant:"flat",onClick:n[3]||(n[3]=o=>u.exportSettings())},{default:A(()=>[s(i,{icon:"fa6-solid:download",class:"mr-3",height:"19px"}),r("設定をエクスポート ")]),_:1}),e("div",Hu,[Lu,Wu,s(zu,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",label:"設定データ (NX-Jikkyo-Settings.json) を選択",density:u.is_form_dense?"compact":"default",accept:"application/json","prepend-icon":"","prepend-inner-icon":"mdi-paperclip",modelValue:u.import_settings_file,"onUpdate:modelValue":n[4]||(n[4]=o=>u.import_settings_file=o)},null,8,["density","modelValue"])]),s(k,{class:"settings__save-button bg-error mt-5",variant:"flat",onClick:n[5]||(n[5]=o=>u.importSettings())},{default:A(()=>[s(i,{icon:"fa6-solid:upload",class:"mr-3",height:"19px"}),r("設定をインポート ")]),_:1}),qu,s(k,{class:"settings__save-button bg-error mt-5",variant:"flat",onClick:n[6]||(n[6]=o=>u.resetSettings())},{default:A(()=>[s(i,{icon:"material-symbols:device-reset-rounded",class:"mr-2",height:"23px"}),r("設定をリセット ")]),_:1})])]),_:1})}const ne=gu($u,[["render",Ku]]);export{ne as default};
