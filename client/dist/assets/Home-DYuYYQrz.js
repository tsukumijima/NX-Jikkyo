import{d as T,U as f,P as U,m as H,M as b,u as V,_ as $,c as l,a as o,b as t,n as F,e as s,w as r,f as A,g as w,F as g,r as C,h,v as M,i as D,j as c,o as a,k as E,t as d,V as L,l as k,R as y,p as z}from"./index-CO6Oz8Ox.js";import{S as I,a as X}from"./swiper-BUigBo7s.js";import{H as J,N as R}from"./Navigation-BpHah26g.js";import{C as q,u as O}from"./ChannelsStore-BlcXnaKN.js";import{V as Z}from"./ssrBoot-PayXtu77.js";const W=T({name:"TV-Home",components:{HeaderBar:J,Navigation:R,Swiper:I,SwiperSlide:X},data(){return{Utils:Object.freeze(f),ChannelUtils:Object.freeze(q),ProgramUtils:Object.freeze(U),active_tab_index:0,swiper_instance:null,scroll_abort_controller:new AbortController,is_loading:!0,interval_ids:[]}},computed:{...H(O,V)},watch:{active_tab_index(){var e,u;(e=this.swiper_instance)==null||e.updateAutoHeight(),(u=this.swiper_instance)==null||u.slideTo(this.active_tab_index,this.is_loading===!0?0:void 0)}},async mounted(){var u,_;this.settingsStore.settings.pinned_channel_ids.length===0&&(this.active_tab_index=1),this.interval_ids.push(window.setTimeout(()=>{this.channelsStore.update(!0),this.interval_ids.push(window.setInterval(()=>this.channelsStore.update(!0),30*1e3))},0*1e3)),await this.channelsStore.update(),((u=this.channelsStore.channels_list_with_pinned.get("ピン留め"))==null?void 0:u.length)===0&&(this.active_tab_index=1),(_=this.swiper_instance)==null||_.updateAutoHeight(),window.addEventListener("scroll",()=>{var B;(B=this.swiper_instance)==null||B.updateAutoHeight()},{passive:!0,signal:this.scroll_abort_controller.signal}),await f.sleep(.01),this.is_loading=!1},beforeUnmount(){for(const e of this.interval_ids)window.clearInterval(e);this.scroll_abort_controller.abort(),this.scroll_abort_controller=new AbortController},methods:{addPinnedChannel(e){this.settingsStore.settings.pinned_channel_ids=[...this.settingsStore.settings.pinned_channel_ids,e.id],b.show(`${e.name}をピン留めしました。`)},removePinnedChannel(e){var u;this.settingsStore.settings.pinned_channel_ids=this.settingsStore.settings.pinned_channel_ids.filter(_=>_!==e.id),((u=this.channelsStore.channels_list_with_pinned.get("ピン留め"))==null?void 0:u.length)===0&&(this.active_tab_index=1),b.show(`${e.name}のピン留めを外しました。`)},isPinnedChannel(e){return this.settingsStore.settings.pinned_channel_ids.includes(e.id)}}}),G={class:"route-container"},K={class:"mt-5 mb-2 mx-4 text-center font-weight-bold",style:{"font-size":"15px"}},Q={class:"text-left mx-auto mt-2",style:{"max-width":"850px"}},Y={class:"text-left mx-auto mt-2",style:{"max-width":"850px"}},uu={class:"channels-tab"},tu={class:"channel__broadcaster"},eu=["src"],su={class:"channel__broadcaster-content"},nu={class:"channel__broadcaster-name"},iu={class:"channel__broadcaster-status"},au={class:"ml-1"},ou={class:"channel__broadcaster-status-viewers ml-2"},lu={class:"ml-1"},ru=["onClick"],du={class:"channel__program-present"},pu={class:"channel__program-present-title-wrapper"},cu=["innerHTML"],_u={class:"channel__program-present-time"},Fu=["innerHTML"],mu={class:"channel__program-following"},Bu={class:"channel__program-following-title"},gu=["innerHTML"],Cu={class:"channel__program-following-time"},hu={class:"channel__progressbar"},Eu={key:0,class:"pinned-container d-flex justify-center align-center w-100"},vu={class:"d-flex justify-center align-center flex-column"},fu={class:"mt-4 text-text-darken-1"},bu={key:0,class:"channels-list pinned-container d-flex justify-center align-center w-100",style:{"flex-grow":"1"}};function Au(e,u,_,B,wu,Du){const S=c("HeaderBar"),x=c("Navigation"),m=c("router-link"),v=c("Icon"),P=c("SwiperSlide"),j=c("Swiper"),N=z("ftooltip");return a(),l("div",G,[o(S),t("main",null,[o(x),t("div",{class:F(["channels-container channels-container--home",{"channels-container--loading":e.is_loading}])},[t("div",K,[t("blockquote",Q,[u[5]||(u[5]=s(" 📢 ")),u[6]||(u[6]=t("a",{class:"link",href:"https://blog.nicovideo.jp/niconews/250549.html",target:"_blank"},"ニコニコ実況へのサンテレビの追加",-1)),u[7]||(u[7]=s(" に伴い、NX-Jikkyo でもニコ生側のコメント取り込み・投稿に対応しました！")),u[8]||(u[8]=t("br",null,null,-1)),u[9]||(u[9]=s(" さらに ")),o(m,{class:"link",to:"/log/jk1/20241231235900-20250101001500"},{default:r(()=>u[3]||(u[3]=[s("過去ログ再生でのコメント自動スクロール")])),_:1}),u[10]||(u[10]=s("や、")),o(m,{class:"link",to:"/settings/jikkyo"},{default:r(()=>u[4]||(u[4]=[s("リアルタイム実況時のコメント遅延設定")])),_:1}),u[11]||(u[11]=s(" も実装しました。")),u[12]||(u[12]=t("br",null,null,-1)),u[13]||(u[13]=s(" そして NX-Jikkyo 自体も、")),u[14]||(u[14]=t("a",{class:"link",href:"https://x.com/TVRemotePlus/status/1932106830664327246",target:"_blank"},"2025/06/10 で運営開始から1周年を迎えました！",-1)),u[15]||(u[15]=s(" 🎉🎊 開発に苦労した甲斐があり、半年以上安定運用できていて安堵しています。今後も可能な限り維持していきますのでよろしくお願いします…！！ "))]),t("blockquote",Y,[u[17]||(u[17]=s(" 📢 本家ニコニコ実況にコメントするには ")),o(m,{class:"link",to:"/settings/jikkyo"},{default:r(()=>u[16]||(u[16]=[s("ニコニコアカウントとの連携が必要")])),_:1}),u[18]||(u[18]=s(" です。設定でコメント投稿先を切り替えれば、今まで通り NX-Jikkyo のコメントサーバーへのコメント投稿もできます (ログイン不要) 。")),u[19]||(u[19]=t("br",null,null,-1)),u[20]||(u[20]=t("span",{style:{"font-weight":"normal"}},[s("連携時に取得したアカウント情報やアクセストークンはお使いのブラウザの Cookie ("),t("code",null,"NX-Niconico-User"),s(") にのみ保存され、NX-Jikkyo のサーバーには一切保存されません。ご安心ください。")],-1))]),u[21]||(u[21]=A('<div class="mt-1" data-v-8b15acec> 最新情報は <a class="link" href="https://x.com/search?q=%23NXJikkyo%20from%3ATVRemotePlus&amp;src=typed_query&amp;f=live" target="_blank" data-v-8b15acec>Twitter</a> で発信中です📣 <a class="link" href="https://www.amazon.co.jp/hz/wishlist/ls/3AZ4RI13SW2PV?tag=tsukumijima-22" target="_blank" data-v-8b15acec>干し芋 or アマギフいただけると大変モチベ上がるのでぜひ🙇🙏</a></div><div class="mt-1" data-v-8b15acec> 📢 <a class="link" href="https://forms.gle/C4jnW2jGX4H5AApSA" target="_blank" data-v-8b15acec>利用者アンケート・フィードバック</a> 📢 を実施中です！ぜひ率直なご意見をお聞かせください🙏🙏 </div>',2))]),t("div",uu,[t("div",{class:"channels-tab__buttons",style:w({"--tab-length":Array.from(e.channelsStore.channels_list_with_pinned).length,"--active-tab-index":e.active_tab_index})},[(a(!0),l(g,null,C(Array.from(e.channelsStore.channels_list_with_pinned),([i],p)=>(a(),E(L,{variant:"flat",class:F(["channels-tab__button",{"channels-tab__button--active":e.active_tab_index===p}]),key:i,onClick:n=>e.active_tab_index=p},{default:r(()=>[s(d(i),1)]),_:2},1032,["class","onClick"]))),128)),u[22]||(u[22]=t("div",{class:"channels-tab__highlight"},null,-1))],4)]),h(o(j,{class:"channels-list","space-between":32,"auto-height":!0,"touch-start-prevent-default":!1,observer:!0,"observe-parents":!0,onSwiper:u[1]||(u[1]=i=>e.swiper_instance=i),onSlideChange:u[2]||(u[2]=i=>e.active_tab_index=i.activeIndex)},{default:r(()=>[(a(!0),l(g,null,C(Array.from(e.channelsStore.channels_list_with_pinned),([i,p])=>(a(),E(P,{key:i},{default:r(()=>[t("div",{class:F(["channels",`channels--tab-${i} channels--length-${p.length}`])},[(a(!0),l(g,null,C(p,n=>h((a(),E(m,{class:"channel",draggable:"false",key:n.id,to:`/watch/${n.display_channel_id}`},{default:r(()=>[t("div",tu,[t("img",{class:"channel__broadcaster-icon",src:`${e.Utils.api_base_url}/channels/${n.id}/logo`},null,8,eu),t("div",su,[t("span",nu,"Ch: "+d(n.channel_number)+" "+d(n.name),1),t("div",iu,[t("div",{class:F(["channel__broadcaster-status-force",`channel__broadcaster-status-force--${e.ChannelUtils.getChannelForceType(n.jikkyo_force)}`])},[u[23]||(u[23]=t("svg",{class:"iconify iconify--fa-solid",width:"10.5px",height:"12px",viewBox:"0 0 448 512"},[t("path",{fill:"currentColor",d:"M323.56 51.2c-20.8 19.3-39.58 39.59-56.22 59.97C240.08 73.62 206.28 35.53 168 0C69.74 91.17 0 209.96 0 281.6C0 408.85 100.29 512 224 512s224-103.15 224-230.4c0-53.27-51.98-163.14-124.44-230.4zm-19.47 340.65C282.43 407.01 255.72 416 226.86 416C154.71 416 96 368.26 96 290.75c0-38.61 24.31-72.63 72.79-130.75c6.93 7.98 98.83 125.34 98.83 125.34l58.63-66.88c4.14 6.85 7.91 13.55 11.27 19.97c27.35 52.19 15.81 118.97-33.43 153.42z"})],-1)),u[24]||(u[24]=t("span",{class:"ml-1"},"勢い:",-1)),t("span",au,d(n.jikkyo_force??"--"),1),u[25]||(u[25]=t("span",{style:{"margin-left":"3px"}}," コメ/分",-1))],2),t("div",ou,[o(v,{icon:"bi:chat-left-text-fill",height:"11px"}),u[26]||(u[26]=t("span",{class:"ml-1"},"コメント数:",-1)),t("span",lu,d(n.viewer_count),1)])])]),h((a(),l("div",{class:F(["channel__broadcaster-pin",{"channel__broadcaster-pin--pinned":e.isPinnedChannel(n)}]),onClick:k(ku=>e.isPinnedChannel(n)?e.removePinnedChannel(n):e.addPinnedChannel(n),["prevent","stop"]),onMousedown:u[0]||(u[0]=k(()=>{},["prevent","stop"]))},u[27]||(u[27]=[t("svg",{class:"iconify iconify--fluent",width:"24px",height:"24px",viewBox:"0 0 20 20"},[t("path",{fill:"currentColor",d:"M13.325 2.617a2 2 0 0 0-3.203.52l-1.73 3.459a1.5 1.5 0 0 1-.784.721l-3.59 1.436a1 1 0 0 0-.335 1.636L6.293 13L3 16.292V17h.707L7 13.706l2.61 2.61a1 1 0 0 0 1.636-.335l1.436-3.59a1.5 1.5 0 0 1 .722-.784l3.458-1.73a2 2 0 0 0 .52-3.203l-4.057-4.057Z"})],-1)]),42,ru)),[[y],[N,e.isPinnedChannel(n)?"ピン留めを外す":"ピン留めする"]])]),t("div",du,[t("div",pu,[t("span",{class:"channel__program-present-title",innerHTML:e.ProgramUtils.decorateProgramInfo(n.program_present,"title")},null,8,cu),t("span",_u,d(e.ProgramUtils.getProgramTime(n.program_present)),1)]),t("span",{class:"channel__program-present-description",innerHTML:e.ProgramUtils.decorateProgramInfo(n.program_present,"description")},null,8,Fu)]),o(Z),t("div",mu,[t("div",Bu,[u[28]||(u[28]=t("span",{class:"channel__program-following-title-decorate"},"NEXT",-1)),u[29]||(u[29]=t("svg",{class:"channel__program-following-title-icon iconify iconify--fluent",width:"16px",height:"16px",viewBox:"0 0 20 20"},[t("path",{fill:"currentColor",d:"M10.018 5.486a1 1 0 0 1 1.592-.806l5.88 4.311a1.25 1.25 0 0 1 0 2.017l-5.88 4.311a1 1 0 0 1-1.592-.806v-3.16L4.61 15.319a1 1 0 0 1-1.592-.806V5.486A1 1 0 0 1 4.61 4.68l5.408 3.966v-3.16Z"})],-1)),t("span",{class:"channel__program-following-title-text",innerHTML:e.ProgramUtils.decorateProgramInfo(n.program_following,"title")},null,8,gu)]),t("span",Cu,d(e.ProgramUtils.getProgramTime(n.program_following)),1)]),t("div",hu,[t("div",{class:"channel__progressbar-progress",style:w(`width:${e.ProgramUtils.getProgramProgress(n.program_present)}%;`)},null,4)])]),_:2},1032,["to"])),[[y]])),128)),i==="ピン留め"&&p.length===0?(a(),l("div",Eu,[t("div",vu,[u[34]||(u[34]=t("h2",null,[s("ピン留めされているチャンネルが"),t("br"),s("ありません。")],-1)),t("div",fu,[u[30]||(u[30]=s("各チャンネルの ")),o(v,{style:{position:"relative",bottom:"-5px"},icon:"fluent:pin-20-filled",width:"22px"}),u[31]||(u[31]=s(" アイコンから、よく実況する")),u[32]||(u[32]=t("br",null,null,-1)),u[33]||(u[33]=s("チャンネルをこのタブにピン留めできます。"))]),u[35]||(u[35]=t("div",{class:"mt-2 text-text-darken-1"},[s("チャンネルをピン留めすると、"),t("br"),s("このタブが最初に表示されます。")],-1))])])):D("",!0)],2)]),_:2},1024))),128))]),_:1},512),[[M,Array.from(e.channelsStore.channels_list_with_pinned).length>0]]),Array.from(e.channelsStore.channels_list_with_pinned).length===0?(a(),l("div",bu,u[36]||(u[36]=[A('<div class="d-flex justify-center align-center flex-column" data-v-8b15acec><h2 data-v-8b15acec>視聴可能なチャンネルが<br class="d-sm-none" data-v-8b15acec>ありません。</h2><div class="mt-4 text-text-darken-1" data-v-8b15acec>前回チャンネルスキャンしたときに<br class="d-sm-none" data-v-8b15acec>受信可能なチャンネルを見つけられませんでした。</div><div class="mt-1 text-text-darken-1" data-v-8b15acec>再度チャンネルスキャンを行ってください。</div></div>',1)]))):D("",!0)],2)])])}const Nu=$(W,[["render",Au],["__scopeId","data-v-8b15acec"]]);export{Nu as default};
