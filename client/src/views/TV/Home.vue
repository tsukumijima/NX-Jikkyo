<template>
    <div class="route-container">
        <HeaderBar />
        <main>
            <Navigation />
            <div class="channels-container channels-container--home" :class="{'channels-container--loading': is_loading}">
                <div class="mt-5 mb-2 mx-4 text-center font-weight-bold" style="font-size: 15px">
                    <blockquote class="text-left mx-auto" style="max-width: 850px">
                        ã€ğŸ“¢é‡è¦ãªãŠçŸ¥ã‚‰ã›ã€‘ NX-Jikkyo ã§ <a class="link" href="https://x.com/TVRemotePlus/status/1821214317385282033" target="_blank">08/22 ã¾ã§ã®ç¹‹ã</a> ã§é‹ç”¨ã•ã‚Œã¦ã„ã‚‹ <a class="link" href="https://originalnews.nico/464285" target="_blank">æš«å®šå¾©æ—§ç‰ˆãƒ‹ã‚³ãƒ‹ã‚³å®Ÿæ³</a> ã«æŠ•ç¨¿ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼ï¼ğŸ‰ğŸŠ ã‚³ãƒ¡ãƒ³ãƒˆãƒªã‚¹ãƒˆã§ã¯ã‚³ãƒ¡ãƒ³ãƒˆå–å¾—å…ƒã«å¿œã˜ã¦ãã‚Œãã‚Œ <code>[ãƒ‹ã‚³å®Ÿ]</code> or <code>[NX]</code> ã®ãƒ©ãƒ™ãƒ«ãŒã¤ãã¾ã™ (å„ NX-Jikkyo å¯¾å¿œã‚¢ãƒ—ãƒªã§ã¯åˆ¥é€”å¯¾å¿œã•ã‚Œãªã„é™ã‚ŠåŒºåˆ¥ã•ã‚Œã¾ã›ã‚“) ã€‚<br>
                        <div class="mt-1">
                            NX-Jikkyo å¯¾å¿œã‚¢ãƒ—ãƒª (jkcommentviewerãƒ»TVTest (NicoJK)ãƒ»KonomiTV ãªã©) ã¯æ›´æ–°ä¸è¦ã§ã™ã€‚éå»ãƒ­ã‚°ã‚’å«ã‚ã€ãƒ‹ã‚³ãƒ‹ã‚³å®Ÿæ³ã¨ NX-Jikkyo ã®åŒæ–¹ã«æŠ•ç¨¿ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã‚’ä¸€ç·’ã«æ¥½ã—ã‚ã¾ã™ï¼ğŸ§ <a class="link" href="/about/#faq" target="_blank">è©³ã—ãã¯ã“ã¡ã‚‰ï¼</a>
                        </div>
                        <div class="mt-2" style="font-weight: 400 !important">
                            08/22 ã®ãƒ‹ã‚³ãƒ‹ã‚³å®Ÿæ³ã®æœ¬å¾©æ—§å¾Œã€<strong>NX-Jikkyo ã§ã¯æœ¬å®¶ãƒ‹ã‚³ãƒ‹ã‚³å®Ÿæ³ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿æ©Ÿèƒ½ã‚’ãƒªãƒªãƒ¼ã‚¹äºˆå®šã§ã™ï¼ï¼</strong><br>
                            <strong>æœ¬å®¶ãƒ‹ã‚³ãƒ‹ã‚³å®Ÿæ³ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ã«ã¯ãƒ‹ã‚³ãƒ‹ã‚³ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ã®é€£æºãŒå¿…è¦ã§ã™ã€‚</strong>è¨­å®šã§ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿å…ˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚Œã°ã€ä»Šã¾ã§é€šã‚Š NX-Jikkyo ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚µãƒ¼ãƒãƒ¼ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ã‚‚ã§ãã¾ã™ (ãƒ­ã‚°ã‚¤ãƒ³ä¸è¦) ã€‚
                        </div>
                    </blockquote>
                    <div class="mt-2">ãœã²ã“ã®ã‚µã‚¤ãƒˆã‚’ã¾ã  NX-Jikkyo ã‚’çŸ¥ã‚‰ãªã„ãƒ‹ã‚³ãƒ‹ã‚³å®Ÿæ³é›£æ°‘ã®æ–¹ã«åºƒã‚ã¦ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ï¼</div>
                    <div class="mt-1"><a class="link" href="https://air.fem.jp/jkcommentviewer/" target="_blank">jkcommentviewer</a> / <a class="link" href="https://blog.tsukumijima.net/article/nx-jikkyo-released/#toc4" target="_blank">TVTest (NicoJK)</a> / <a class="link" href="https://github.com/tsukumijima/KonomiTV/releases/tag/v0.10.1" target="_blank">KonomiTV</a> æœ€æ–°ç‰ˆã§ NX-Jikkyo ã«å¯¾å¿œã—ã¾ã—ãŸï¼ï¼ğŸ‰ğŸŠ</div>
                    <div class="mt-1">
                        <!-- eslint-disable-next-line no-irregular-whitespace -->
                        æœ€æ–°æƒ…å ±ã¯ <a class="link" href="https://x.com/search?q=%23NXJikkyo&src=typed_query" target="_blank">Twitter</a> ã§ç™ºä¿¡ä¸­ã§ã™ğŸ“£
                        <a class="link" href="https://www.amazon.co.jp/hz/wishlist/ls/3AZ4RI13SW2PV?tag=tsukumijima-22" target="_blank">å¹²ã—èŠ‹ or ã‚¢ãƒã‚®ãƒ•ã„ãŸã ã‘ã‚‹ã¨å¤§å¤‰ãƒ¢ãƒãƒ™ä¸ŠãŒã‚‹ã®ã§ãœã²ğŸ™‡ğŸ™</a>
                    </div>
                    <div class="mt-1">
                        æœ€å¤§ 3000 äººã‚‚ã®åŒæ¥ã‚’æŒããŸã‚æœˆ 8000 å††ã‚‚æ›ã‹ã£ã¦ã¾ã™â€¦ ãœã² <a class="link" href="https://www.amazon.co.jp/dp/B0C1YY8GSB/?tag=tsukumijima-22" target="_blank">ã“ã® Amazon ãƒªãƒ³ã‚¯ã‹ã‚‰</a> ä½•ã‹è²·ã£ã¦é ‚ã‘ã‚‹ã¨åŠ©ã‹ã‚Šã¾ã™ğŸ™
                    </div>
                </div>
                <div class="channels-tab">
                    <div class="channels-tab__buttons" :style="{
                        '--tab-length': Array.from(channelsStore.channels_list_with_pinned).length,
                        '--active-tab-index': active_tab_index,
                    }">
                        <v-btn variant="flat" class="channels-tab__button"
                            :class="{ 'channels-tab__button--active': active_tab_index === index }"
                            v-for="([channels_type,], index) in Array.from(channelsStore.channels_list_with_pinned)" :key="channels_type"
                            @click="active_tab_index = index">
                            {{channels_type}}
                        </v-btn>
                        <div class="channels-tab__highlight"></div>
                    </div>
                </div>
                <Swiper class="channels-list" :space-between="32" :auto-height="true" :touch-start-prevent-default="false"
                    :observer="true" :observe-parents="true"
                    @swiper="swiper_instance = $event"
                    @slide-change="active_tab_index = $event.activeIndex"
                    v-show="Array.from(channelsStore.channels_list_with_pinned).length > 0">
                    <SwiperSlide v-for="[channels_type, channels] in Array.from(channelsStore.channels_list_with_pinned)" :key="channels_type">
                        <div class="channels" :class="`channels--tab-${channels_type} channels--length-${channels.length}`">
                            <router-link v-ripple class="channel" draggable="false"
                                v-for="channel in channels" :key="channel.id" :to="`/watch/${channel.display_channel_id}`">
                                <!-- ä»¥ä¸‹ã§ã¯ Icon ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ã†ã¨ãƒãƒ£ãƒ³ãƒãƒ«ãŒå¤šã„ã¨ãã«é«˜è² è·ã«ãªã‚‹ãŸã‚ã€æ„å›³çš„ã« SVG ã‚’ç›´æ›¸ãã—ã¦ã„ã‚‹ -->
                                <div class="channel__broadcaster">
                                    <img class="channel__broadcaster-icon" :src="`${Utils.api_base_url}/channels/${channel.id}/logo`">
                                    <div class="channel__broadcaster-content">
                                        <span class="channel__broadcaster-name">Ch: {{channel.channel_number}} {{channel.name}}</span>
                                        <div class="channel__broadcaster-status">
                                            <div class="channel__broadcaster-status-force"
                                                :class="`channel__broadcaster-status-force--${ChannelUtils.getChannelForceType(channel.jikkyo_force)}`">
                                                <svg class="iconify iconify--fa-solid" width="10.5px" height="12px" viewBox="0 0 448 512">
                                                    <path fill="currentColor" d="M323.56 51.2c-20.8 19.3-39.58 39.59-56.22 59.97C240.08 73.62 206.28 35.53 168 0C69.74 91.17 0 209.96 0 281.6C0 408.85 100.29 512 224 512s224-103.15 224-230.4c0-53.27-51.98-163.14-124.44-230.4zm-19.47 340.65C282.43 407.01 255.72 416 226.86 416C154.71 416 96 368.26 96 290.75c0-38.61 24.31-72.63 72.79-130.75c6.93 7.98 98.83 125.34 98.83 125.34l58.63-66.88c4.14 6.85 7.91 13.55 11.27 19.97c27.35 52.19 15.81 118.97-33.43 153.42z"></path>
                                                </svg>
                                                <span class="ml-1">å‹¢ã„:</span>
                                                <span class="ml-1">{{channel.jikkyo_force ?? '--'}}</span>
                                                <span style="margin-left: 3px;"> ã‚³ãƒ¡/åˆ†</span>
                                            </div>
                                            <div class="channel__broadcaster-status-viewers ml-2">
                                                <Icon icon="bi:chat-left-text-fill" height="11px" />
                                                <span class="ml-1">ã‚³ãƒ¡ãƒ³ãƒˆæ•°:</span>
                                                <span class="ml-1">{{channel.viewer_count}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div v-ripple class="channel__broadcaster-pin"
                                        v-tooltip="isPinnedChannel(channel) ? 'ãƒ”ãƒ³ç•™ã‚ã‚’å¤–ã™' : 'ãƒ”ãƒ³ç•™ã‚ã™ã‚‹'"
                                        :class="{'channel__broadcaster-pin--pinned': isPinnedChannel(channel)}"
                                        @click.prevent.stop="isPinnedChannel(channel) ? removePinnedChannel(channel) : addPinnedChannel(channel)"
                                        @mousedown.prevent.stop=""> <!-- â† è¦ªè¦ç´ ã®æ³¢ç´‹ãŒåºƒãŒã‚‰ãªã„ã‚ˆã†ã« -->
                                        <svg class="iconify iconify--fluent" width="24px" height="24px" viewBox="0 0 20 20">
                                            <path fill="currentColor" d="M13.325 2.617a2 2 0 0 0-3.203.52l-1.73 3.459a1.5 1.5 0 0 1-.784.721l-3.59 1.436a1 1 0 0 0-.335 1.636L6.293 13L3 16.292V17h.707L7 13.706l2.61 2.61a1 1 0 0 0 1.636-.335l1.436-3.59a1.5 1.5 0 0 1 .722-.784l3.458-1.73a2 2 0 0 0 .52-3.203l-4.057-4.057Z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="channel__program-present">
                                    <div class="channel__program-present-title-wrapper">
                                        <span class="channel__program-present-title"
                                            v-html="ProgramUtils.decorateProgramInfo(channel.program_present, 'title')"></span>
                                        <span class="channel__program-present-time">{{ProgramUtils.getProgramTime(channel.program_present)}}</span>
                                    </div>
                                    <span class="channel__program-present-description"
                                          v-html="ProgramUtils.decorateProgramInfo(channel.program_present, 'description')"></span>
                                </div>
                                <v-spacer></v-spacer>
                                <div class="channel__program-following">
                                    <div class="channel__program-following-title">
                                        <span class="channel__program-following-title-decorate">NEXT</span>
                                        <svg class="channel__program-following-title-icon iconify iconify--fluent" width="16px" height="16px" viewBox="0 0 20 20">
                                            <path fill="currentColor" d="M10.018 5.486a1 1 0 0 1 1.592-.806l5.88 4.311a1.25 1.25 0 0 1 0 2.017l-5.88 4.311a1 1 0 0 1-1.592-.806v-3.16L4.61 15.319a1 1 0 0 1-1.592-.806V5.486A1 1 0 0 1 4.61 4.68l5.408 3.966v-3.16Z"></path>
                                        </svg>
                                        <span class="channel__program-following-title-text"
                                              v-html="ProgramUtils.decorateProgramInfo(channel.program_following, 'title')"></span>
                                    </div>
                                    <span class="channel__program-following-time">{{ProgramUtils.getProgramTime(channel.program_following)}}</span>
                                </div>
                                <div class="channel__progressbar">
                                    <div class="channel__progressbar-progress"
                                         :style="`width:${ProgramUtils.getProgramProgress(channel.program_present)}%;`"></div>
                                </div>
                            </router-link>
                            <div class="pinned-container d-flex justify-center align-center w-100"
                                v-if="channels_type === 'ãƒ”ãƒ³ç•™ã‚' && channels.length === 0">
                                <div class="d-flex justify-center align-center flex-column">
                                    <h2>ãƒ”ãƒ³ç•™ã‚ã•ã‚Œã¦ã„ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«ãŒ<br>ã‚ã‚Šã¾ã›ã‚“ã€‚</h2>
                                    <div class="mt-4 text-text-darken-1">å„ãƒãƒ£ãƒ³ãƒãƒ«ã® <Icon style="position: relative; bottom: -5px;" icon="fluent:pin-20-filled" width="22px" /> ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ã€ã‚ˆãå®Ÿæ³ã™ã‚‹<br>ãƒãƒ£ãƒ³ãƒãƒ«ã‚’ã“ã®ã‚¿ãƒ–ã«ãƒ”ãƒ³ç•™ã‚ã§ãã¾ã™ã€‚</div>
                                    <div class="mt-2 text-text-darken-1">ãƒãƒ£ãƒ³ãƒãƒ«ã‚’ãƒ”ãƒ³ç•™ã‚ã™ã‚‹ã¨ã€<br>ã“ã®ã‚¿ãƒ–ãŒæœ€åˆã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
                                </div>
                            </div>
                        </div>
                    </SwiperSlide>
                </Swiper>
                <div class="channels-list pinned-container d-flex justify-center align-center w-100" style="flex-grow: 1;"
                    v-if="Array.from(channelsStore.channels_list_with_pinned).length === 0">
                    <div class="d-flex justify-center align-center flex-column">
                        <h2>è¦–è´å¯èƒ½ãªãƒãƒ£ãƒ³ãƒãƒ«ãŒ<br class="d-sm-none">ã‚ã‚Šã¾ã›ã‚“ã€‚</h2>
                        <div class="mt-4 text-text-darken-1">å‰å›ãƒãƒ£ãƒ³ãƒãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã—ãŸã¨ãã«<br class="d-sm-none">å—ä¿¡å¯èƒ½ãªãƒãƒ£ãƒ³ãƒãƒ«ã‚’è¦‹ã¤ã‘ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚</div>
                        <div class="mt-1 text-text-darken-1">å†åº¦ãƒãƒ£ãƒ³ãƒãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚</div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</template>
<script lang="ts">

import { mapStores } from 'pinia';
import { Swiper as SwiperClass } from 'swiper';
import { Swiper, SwiperSlide } from 'swiper/vue';
import 'swiper/css';
import { defineComponent } from 'vue';

import HeaderBar from '@/components/HeaderBar.vue';
import Navigation from '@/components/Navigation.vue';
import Message from '@/message';
import { ILiveChannel } from '@/services/Channels';
import useChannelsStore from '@/stores/ChannelsStore';
import useSettingsStore from '@/stores/SettingsStore';
import Utils, { ChannelUtils, ProgramUtils } from '@/utils';

export default defineComponent({
    name: 'TV-Home',
    components: {
        HeaderBar,
        Navigation,
        Swiper,
        SwiperSlide,
    },
    data() {
        return {

            // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ä½¿ãˆã‚‹ã‚ˆã†ã«
            Utils: Object.freeze(Utils),
            ChannelUtils: Object.freeze(ChannelUtils),
            ProgramUtils: Object.freeze(ProgramUtils),

            // ç¾åœ¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¿ãƒ–
            active_tab_index: 0 as number,

            // Swiper ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
            swiper_instance: null as SwiperClass | null,

            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’è§£é™¤ã™ã‚‹ãŸã‚ã® AbortController
            scroll_abort_controller: new AbortController(),

            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã‹ã©ã†ã‹
            is_loading: true,

            // ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ« ID
            // ãƒšãƒ¼ã‚¸é·ç§»æ™‚ã« setInterval(), setTimeout() ã®å®Ÿè¡Œã‚’æ­¢ã‚ã‚‹ã®ã«ä½¿ã†
            // setInterval(), setTimeout() ã®è¿”ã‚Šå€¤ã‚’ç™»éŒ²ã™ã‚‹
            interval_ids: [] as number[],
        };
    },
    computed: {
        ...mapStores(useChannelsStore, useSettingsStore),
    },
    watch: {
        active_tab_index() {
            // content-visibility: auto ã®æŒ‡å®šã®é–¢ä¿‚ã§ã†ã¾ãè¨ˆç®—ã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹ Swiper ã® autoHeight ã‚’å¼·åˆ¶çš„ã«å†è¨ˆç®—ã™ã‚‹
            this.swiper_instance?.updateAutoHeight();
            // ç¾åœ¨ãªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¿ãƒ–ã‚’ Swiper å´ã«éšæ™‚åæ˜ ã™ã‚‹
            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã®ã¿ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã›ãšã«å³åº§ã«åˆ‡ã‚Šæ›¿ãˆã‚‹
            this.swiper_instance?.slideTo(this.active_tab_index, this.is_loading === true ? 0 : undefined);
        }
    },
    // é–‹å§‹æ™‚ã«å®Ÿè¡Œ
    async mounted() {

        // ãƒ”ãƒ³ç•™ã‚ã•ã‚Œã¦ã„ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«ãŒãªã„ãªã‚‰ã€ã‚¿ãƒ–ã‚’åœ°ãƒ‡ã‚¸ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆã‚‹
        // ãƒ”ãƒ³ç•™ã‚ãŒã§ãã‚‹äº‹ã‚’ç¤ºå”†ã™ã‚‹ãŸã‚ã«ãƒ”ãƒ³ç•™ã‚ã‚¿ãƒ–è‡ªä½“ã¯æ®‹ã™
        if (this.settingsStore.settings.pinned_channel_ids.length === 0) {
            this.active_tab_index = 1;
        }

        // 00ç§’ã¾ã§ã®æ®‹ã‚Šç§’æ•°ã‚’å–å¾—
        // ç¾åœ¨ 16:01:34 ãªã‚‰ 26 (ç§’) ã«ãªã‚‹
        // const residue_second = 60 - new Date().getSeconds();
        // /api/v1/channels ã¸ã®è² è·å¯¾ç­–ã®ãŸã‚ NX-Jikkyo ã§ã¯å½“é¢ã‚¿ã‚¤ãƒãƒ¼ã‚’å®Ÿè³ªç„¡åŠ¹åŒ–ã™ã‚‹
        const residue_second = 0;

        // 00ç§’ã«ãªã‚‹ã¾ã§å¾…ã£ã¦ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã‚¿ã‚¤ãƒãƒ¼
        // ç•ªçµ„ã¯åŸºæœ¬1åˆ†å˜ä½ã§çµ„ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€20ç§’ã‚„45ç§’ãªã©ä¸­é€”åŠç«¯ãªç§’æ•°ã§æ›´æ–°ã—ã¦ã—ã¾ã†ã¨ç•ªçµ„æƒ…å ±ã®åæ˜ ãŒé…ã‚Œã¦ã—ã¾ã†
        this.interval_ids.push(window.setTimeout(() => {

            // ã“ã®æ™‚ç‚¹ã§00ç§’ãªã®ã§ã€ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±ã‚’æ›´æ–°
            this.channelsStore.update(true);

            // ä»¥é™ã€30ç§’ãŠãã«ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±ã‚’æ›´æ–°
            this.interval_ids.push(window.setInterval(() => this.channelsStore.update(true), 30 * 1000));

        }, residue_second * 1000));

        // ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±ã‚’æ›´æ–° (åˆå›)
        await this.channelsStore.update();

        // ã“ã®æ™‚ç‚¹ã§ãƒ”ãƒ³ç•™ã‚ã•ã‚Œã¦ã„ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«ãŒãªã„ãªã‚‰ã€ã‚¿ãƒ–ã‚’åœ°ãƒ‡ã‚¸ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆã‚‹
        // ãƒ”ãƒ³ç•™ã‚ã•ã‚Œã¦ã„ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«è‡ªä½“ã¯ã‚ã‚‹ãŒã€ç¾åœ¨æ”¾é€ã•ã‚Œã¦ã„ãªã„ãŸã‚è¡¨ç¤ºã§ããªã„å ´åˆã«å‚™ãˆã‚‹
        if (this.channelsStore.channels_list_with_pinned.get('ãƒ”ãƒ³ç•™ã‚')?.length === 0) {
            this.active_tab_index = 1;
        }

        // content-visibility: auto ã®æŒ‡å®šã®é–¢ä¿‚ã§ã†ã¾ãè¨ˆç®—ã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹ Swiper ã® autoHeight ã‚’å¼·åˆ¶çš„ã«å†è¨ˆç®—ã™ã‚‹
        this.swiper_instance?.updateAutoHeight();

        // ç”»é¢ãŒã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã‚ŒãŸã¨ãã« Swiper ã® autoHeight ã‚’å†è¨ˆç®—ã™ã‚‹
        window.addEventListener('scroll', () => {
            this.swiper_instance?.updateAutoHeight();
        }, { passive: true, signal: this.scroll_abort_controller.signal });

        // ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±ã®æ›´æ–°ãŒçµ‚ã‚ã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’è§£é™¤ã™ã‚‹
        await Utils.sleep(0.01);  // å°‘ã—å¾…ãŸãªã„ã¨ã‚¿ãƒ–ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚Œã¦ã—ã¾ã†
        this.is_loading = false;
    },
    // çµ‚äº†å‰ã«å®Ÿè¡Œ
    beforeUnmount() {

        // clearInterval() ã§ã™ã¹ã¦ã® setInterval(), setTimeout() ã®å®Ÿè¡Œã‚’æ­¢ã‚ã‚‹
        // clearInterval() ã¨ clearTimeout() ã¯ä¸­èº«å…±é€šãªã®ã§å•é¡Œãªã„
        for (const interval_id of this.interval_ids) {
            window.clearInterval(interval_id);
        }

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’è§£é™¤ã™ã‚‹
        this.scroll_abort_controller.abort();
        this.scroll_abort_controller = new AbortController();
    },
    methods: {

        // ãƒãƒ£ãƒ³ãƒãƒ«ã‚’ãƒ”ãƒ³ç•™ã‚ã™ã‚‹
        addPinnedChannel(channel: ILiveChannel) {

            // ãƒ”ãƒ³ç•™ã‚ã™ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«ã® ID ãƒªã‚¹ãƒˆã«è¿½åŠ  (ä¿å­˜ã¯è‡ªå‹•ã§è¡Œã‚ã‚Œã‚‹)
            // UI ã«å¤‰æ›´ã‚’åæ˜ ã™ã‚‹ãŸã‚ã€æ„å›³çš„ã«æŒ‡å®šãƒãƒ£ãƒ³ãƒãƒ«ã® ID ãŒè¿½åŠ ã•ã‚ŒãŸé…åˆ—ã‚’æ–°ã—ãä½œã‚Šå†ä»£å…¥ã—ã¦ã„ã‚‹
            this.settingsStore.settings.pinned_channel_ids = [...this.settingsStore.settings.pinned_channel_ids, channel.id];

            // ãƒ”ãƒ³ç•™ã‚ã—ãŸãƒãƒ£ãƒ³ãƒãƒ«ã‚’é€šçŸ¥
            Message.show(`${channel.name}ã‚’ãƒ”ãƒ³ç•™ã‚ã—ã¾ã—ãŸã€‚`);
        },

        // ãƒãƒ£ãƒ³ãƒãƒ«ã‚’ãƒ”ãƒ³ç•™ã‚ã‹ã‚‰å¤–ã™
        removePinnedChannel(channel: ILiveChannel) {

            // ãƒ”ãƒ³ç•™ã‚ã™ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«ã® ID ãƒªã‚¹ãƒˆã‹ã‚‰å‰Šé™¤ (ä¿å­˜ã¯è‡ªå‹•ã§è¡Œã‚ã‚Œã‚‹)
            // UI ã«å¤‰æ›´ã‚’åæ˜ ã™ã‚‹ãŸã‚ã€æ„å›³çš„ã«æŒ‡å®šãƒãƒ£ãƒ³ãƒãƒ«ã® ID ãŒå‰Šé™¤ã•ã‚ŒãŸé…åˆ—ã‚’æ–°ã—ãä½œã‚Šå†ä»£å…¥ã—ã¦ã„ã‚‹
            this.settingsStore.settings.pinned_channel_ids = this.settingsStore.settings.pinned_channel_ids.filter((id) => id !== channel.id);

            // ã“ã®æ™‚ç‚¹ã§ãƒ”ãƒ³ç•™ã‚ã•ã‚Œã¦ã„ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«ãŒãªã„ãªã‚‰ã€ã‚¿ãƒ–ã‚’åœ°ãƒ‡ã‚¸ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆã‚‹
            if (this.channelsStore.channels_list_with_pinned.get('ãƒ”ãƒ³ç•™ã‚')?.length === 0) {
                this.active_tab_index = 1;
            }

            // ãƒ”ãƒ³ç•™ã‚ã‚’å¤–ã—ãŸãƒãƒ£ãƒ³ãƒãƒ«ã‚’é€šçŸ¥
            Message.show(`${channel.name}ã®ãƒ”ãƒ³ç•™ã‚ã‚’å¤–ã—ã¾ã—ãŸã€‚`);
        },

        // ãƒãƒ£ãƒ³ãƒãƒ«ãŒãƒ”ãƒ³ç•™ã‚ã•ã‚Œã¦ã„ã‚‹ã‹
        isPinnedChannel(channel: ILiveChannel): boolean {
            return this.settingsStore.settings.pinned_channel_ids.includes(channel.id);
        }
    }
});

</script>
<style lang="scss" scoped>

.channels-container {
    display: flex;
    flex-direction: column;
    width: 100%;
    min-width: 0;  // magic!
    margin-left: 21px;
    margin-right: 21px;
    opacity: 1;
    transition: opacity 0.2s;
    @include smartphone-vertical {
        margin-left: 0px;
        margin-right: 0px;
    }

    &--loading {
        opacity: 0;

        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã¯ã‚¿ãƒ–ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç„¡åŠ¹ã«ã™ã‚‹
        .channels-tab__highlight {
            transition: none !important;
        }
    }

    // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã«å¤‰åŒ–ã™ã‚‹å„è¦ç´ ã®é«˜ã•ã‚’å®šç¾©
    // å®Ÿè£…ä¸Šä¸€éƒ¨ã®è¦ç´ ã® height ã‚’ 100dvh ã‹ã‚‰è‡ªåˆ†ä»¥å¤–ã®è¦ç´ ã®é«˜ã•ã‚’å¼•ãå½¢ã§å®Ÿè£…ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ãŸã‚ã€CSS å¤‰æ•°ã«ã¾ã¨ã‚ã¦ã„ã‚‹
    --header-height: 65px;
    --channels-tab-height: 68px;
    --channels-list-padding-bottom: 20px;
    --bottom-navigation-height: 0px;
    @include smartphone-horizontal {
        --header-height: 0px;
        --channels-tab-height: 54px;
        --channels-list-padding-bottom: 12px;
        --bottom-navigation-height: 0px;
    }
    @include smartphone-vertical {
        --header-height: 0px;
        --channels-tab-height: 64px;
        --channels-list-padding-bottom: 12px;
        --bottom-navigation-height: 56px;
    }

    .channels-tab {
        --channels-tab-padding-bottom: 12px;
        display: flex;
        align-items: center;
        position: sticky;
        flex: none;
        top: 65px;
        height: var(--channels-tab-height);
        padding-top: 5px;
        padding-bottom: var(--channels-tab-padding-bottom);
        background: rgb(var(--v-theme-background));
        box-sizing: border-box;
        z-index: 5;

        // ä¸‹ç·šã‚’å¼•ã
        background: linear-gradient(
            to bottom,
            rgb(var(--v-theme-background)) calc(100% - calc(var(--channels-tab-padding-bottom) + 3px)),
            rgb(var(--v-theme-background-lighten-2))
                calc(100% - calc(var(--channels-tab-padding-bottom) + 3px))
                calc(100% - var(--channels-tab-padding-bottom)),
            rgb(var(--v-theme-background)) calc(100% - 12px)
        );

        @include smartphone-horizontal {
            top: 0px;
            padding-top: 4px;
            --channels-tab-padding-bottom: 8px;
        }
        @include smartphone-vertical {
            top: 0px;
            padding-top: 4px;
            --channels-tab-padding-bottom: 10px;
        }

        .channels-tab__buttons {
            display: flex;
            position: relative;
            align-items: center;
            max-width: 100%;
            height: 100%;
            margin-left: auto;
            margin-right: auto;
            overflow-x: auto;
            overflow-y: clip;

            .channels-tab__button {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 98px;
                height: 100%;
                padding: 0;
                border-top-left-radius: 6px;
                border-top-right-radius: 6px;
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
                color: rgb(var(--v-theme-text)) !important;
                background-color: transparent !important;
                font-size: 17px;
                letter-spacing: 0.0892857143em !important;
                text-transform: none;
                cursor: pointer;
                @include smartphone-horizontal {
                    font-size: 16.5px;
                }
                @include smartphone-vertical {
                    width: 90px;
                    font-size: 16.5px;
                }

                &--active {
                    background-color: rgb(var(--v-theme-background-lighten-2)) !important;
                }
            }

            .channels-tab__highlight {
                position: absolute;
                left: 0;
                bottom: 0;
                width: calc(100% / var(--tab-length, 0));
                height: 3px;
                background: rgb(var(--v-theme-primary));
                transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);
                transform: translateX(calc(100% * var(--active-tab-index, 0)));
                will-change: transform;
            }
        }
    }

    .channels-list {
        width: 100%;
        // ã‚¿ãƒ–ã¨ãƒœãƒˆãƒ ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆ†ã®é«˜ã•ã‚’å¼•ãã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ãŒå‡ºã‚‹ã‚ˆã† 1px è¶³ã™
        /* min-height: calc(100% - var(--channels-tab-height) + var(--bottom-navigation-height) + 1px); */
        padding-bottom: var(--channels-list-padding-bottom);
        background: transparent !important;
        overflow: hidden;

        @include smartphone-vertical {
            padding-left: 8px;
            padding-right: 8px;
        }

        .swiper-slide {
            display: flex;
            flex-direction: column;
            min-height: calc(100vh - var(--header-height) - var(--channels-tab-height) - var(--channels-list-padding-bottom) - var(--bottom-navigation-height));
            min-height: calc(100dvh - var(--header-height) - var(--channels-tab-height) - var(--channels-list-padding-bottom) - var(--bottom-navigation-height));
        }

        .channels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(365px, 1fr));
            grid-row-gap: 12px;
            grid-column-gap: 16px;
            justify-content: center;
            // èƒŒå¾Œã‚’é€šéã™ã‚‹åˆ¥ã®ã‚¿ãƒ–ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå†™ã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹ã®ã«å¿…è¦
            background: rgb(var(--v-theme-background));
            // will-change ã‚’å…¥ã‚Œã¦ãŠãäº‹ã§ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒ GPU ã§å‡¦ç†ã•ã‚Œã‚‹
            will-change: transform;

            @include tablet-vertical {
                display: flex;
                flex-direction: column;
                justify-content: flex-start;
                grid-row-gap: 10px;
            }
            @include smartphone-horizontal {
                display: flex;
                flex-direction: column;
                justify-content: flex-start;
                grid-row-gap: 8px;
            }
            @include smartphone-vertical {
                display: flex;
                flex-direction: column;
                justify-content: flex-start;
                grid-row-gap: 10px;
            }

            // ãƒãƒ£ãƒ³ãƒãƒ«ãƒªã‚¹ãƒˆã§ã® content-visibility: auto; ã¯ã¡ã‚‡ã£ã¨æç”»ä¸Šã®å‰¯ä½œç”¨ã‚‚ã‚ã‚‹ã®ã§ã€
            // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸ŠãŒé¡•è‘—ãªã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ (ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹) ã®ã¿ã«é©ç”¨ã™ã‚‹
            @media (hover: none) {
                content-visibility: auto;
            }

            // 1630px ä»¥ä¸Šã§å¹…ã‚’ 445px ã«å›ºå®š
            @media (min-width: 1630px) {
                grid-template-columns: repeat(auto-fit, 445px);
            }

            // ãƒ”ãƒ³ç•™ã‚ã•ã‚Œã¦ã„ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«ãŒãªã„ã¨ã
            &.channels--length-0.channels--tab-ãƒ”ãƒ³ç•™ã‚ {
                display: flex;
                justify-content: center !important;
                flex-grow: 1;
            }

            // ã‚«ãƒ¼ãƒ‰ãŒæ¨ªã„ã£ã±ã„ã«è¡¨ç¤ºã•ã‚Œã¦ã—ã¾ã†ã®ã‚’å›é¿ã™ã‚‹
            // ãƒãƒ£ãƒ³ãƒãƒ«ãƒªã‚¹ãƒˆã«ãƒãƒ£ãƒ³ãƒãƒ«ãŒ1ã¤ã—ã‹è¡¨ç¤ºã•ã‚Œã¦ã„ãªã„ã¨ã
            &.channels--length-1 {
                // 2åˆ—
                @media (min-width: 1008px) {
                    // 16px ã¯ä½™ç™½ã®å¹…ã®ã“ã¨
                    margin-right: calc((((100% - (16px * 1)) / 2) * 1) + (16px * 1));  // ã‚‚ã†1ã¤åˆ†ã®ã‚«ãƒ¼ãƒ‰å¹…ã‚’åŸ‹ã‚ã‚‹
                }
                // 3åˆ—ã§ã‚«ãƒ¼ãƒ‰å¹…ãŒè‡ªå‹•
                @media (min-width: 1389px) {
                    margin-right: calc((((100% - (16px * 2)) / 3) * 2) + (16px * 2));  // ã‚‚ã†2ã¤åˆ†ã®ã‚«ãƒ¼ãƒ‰å¹…ã‚’åŸ‹ã‚ã‚‹
                }
                // 3åˆ—ã§ã‚«ãƒ¼ãƒ‰å¹…ãŒ 445px
                @media (min-width: 1630px) {
                    margin-right: calc((445px * 2) + (16px * 2));  // ã‚‚ã†2ã¤åˆ†ã®ã‚«ãƒ¼ãƒ‰å¹…ã‚’åŸ‹ã‚ã‚‹
                }
                // 4åˆ—ã§ã‚«ãƒ¼ãƒ‰å¹…ãŒ 445px
                @media (min-width: 2090px) {
                    margin-right: calc((445px * 3) + (16px * 3));  // ã‚‚ã†3ã¤åˆ†ã®ã‚«ãƒ¼ãƒ‰å¹…ã‚’åŸ‹ã‚ã‚‹
                }
            }
            // ãƒãƒ£ãƒ³ãƒãƒ«ãƒªã‚¹ãƒˆã«ãƒãƒ£ãƒ³ãƒãƒ«ãŒ2ã¤ã—ã‹è¡¨ç¤ºã•ã‚Œã¦ã„ãªã„ã¨ã
            &.channels--length-2 {
                // 3åˆ—ã§ã‚«ãƒ¼ãƒ‰å¹…ãŒè‡ªå‹•
                @media (min-width: 1389px) {
                    margin-right: calc((((100% - (16px * 2)) / 3) * 1) + (16px * 1));  // ã‚‚ã†1ã¤åˆ†ã®ã‚«ãƒ¼ãƒ‰å¹…ã‚’åŸ‹ã‚ã‚‹
                }
                // 3åˆ—ã§ã‚«ãƒ¼ãƒ‰å¹…ãŒ 445px
                @media (min-width: 1630px) {
                    margin-right: calc(445px + 16px);  // ã‚‚ã†1ã¤åˆ†ã®ã‚«ãƒ¼ãƒ‰å¹…ã‚’åŸ‹ã‚ã‚‹
                }
                // 4åˆ—ã§ã‚«ãƒ¼ãƒ‰å¹…ãŒ 445px
                @media (min-width: 2090px) {
                    margin-right: calc((445px * 2) + (16px * 2));  // ã‚‚ã†2ã¤åˆ†ã®ã‚«ãƒ¼ãƒ‰å¹…ã‚’åŸ‹ã‚ã‚‹
                }
            }
            // ãƒãƒ£ãƒ³ãƒãƒ«ãƒªã‚¹ãƒˆã«ãƒãƒ£ãƒ³ãƒãƒ«ãŒ3ã¤ã—ã‹è¡¨ç¤ºã•ã‚Œã¦ã„ãªã„ã¨ã
            &.channels--length-3 {
                // 4åˆ—ã§ã‚«ãƒ¼ãƒ‰å¹…ãŒ 445px
                @media (min-width: 2090px) {
                    margin-right: calc(445px + 16px);  // ã‚‚ã†1ã¤åˆ†ã®ã‚«ãƒ¼ãƒ‰å¹…ã‚’åŸ‹ã‚ã‚‹
                }
            }

            .channel {
                display: flex;
                flex-direction: column;
                position: relative;
                height: 251px;
                padding: 18px 20px;
                padding-bottom: 19px;
                border-radius: 14px;
                color: rgb(var(--v-theme-text));
                background: rgb(var(--v-theme-background-lighten-1));
                transition: background-color 0.15s;
                overflow: hidden;  // progressbar ã‚’åˆ‡ã‚ŠæŠœããŸã‚ã«å¿…è¦
                text-decoration: none;
                user-select: none;
                box-sizing: border-box;
                cursor: pointer;
                border: 1px solid rgb(var(--v-theme-background-lighten-2));
                // content-visibility: auto; ã‚’ä»˜ä¸ã™ã‚‹ã ã‘ã§ã‚¹ãƒãƒ›ã§ã®æç”»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå¤§å¹…ã«å‘ä¸Šã™ã‚‹
                content-visibility: auto;
                contain-intrinsic-height: auto 214px;

                // 1åˆ—è¡¨ç¤º
                @media (max-width: 1007.9px) {
                    height: auto;
                }
                @include tablet-vertical {
                    padding: 14px 16px;
                    padding-top: 12px;
                    height: auto;
                    border-radius: 11px;
                    contain-intrinsic-height: auto 162.25px;
                }
                @include smartphone-horizontal {
                    padding: 12px 14px;
                    padding-top: 10px;
                    height: auto;
                    border-radius: 11px;
                    contain-intrinsic-height: auto 125px;
                }
                @include smartphone-vertical {
                    padding: 12px 14px;
                    padding-top: 10px;
                    height: auto;
                    border-radius: 11px;
                    contain-intrinsic-height: auto 162.25px;
                }

                &:hover {
                    background: rgb(var(--v-theme-background-lighten-2));
                }
                // ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹ã§ hover ã‚’ç„¡åŠ¹ã«ã™ã‚‹
                @media (hover: none) {
                    &:hover {
                        background: rgb(var(--v-theme-background-lighten-1));
                    }
                }

                .channel__broadcaster {
                    display: flex;
                    height: 44px;
                    @include tablet-vertical {
                        height: 40px;
                    }
                    @include smartphone-horizontal {
                        height: 29px;
                    }
                    @include smartphone-vertical {
                        height: 40px;
                    }

                    &-icon {
                        display: inline-block;
                        flex-shrink: 0;
                        width: 80px;
                        height: 44px;
                        border-radius: 5px;
                        // èª­ã¿è¾¼ã¾ã‚Œã‚‹ã¾ã§ã®ã‚¢ã‚¤ã‚³ãƒ³ã®èƒŒæ™¯
                        background: linear-gradient(150deg, rgb(var(--v-theme-gray)), rgb(var(--v-theme-background-lighten-2)));
                        object-fit: cover;
                        @include tablet-vertical {
                            width: 69px;
                            height: 40px;
                            border-radius: 4px;
                        }
                        @include smartphone-horizontal {
                            width: 54px;
                            height: 29px;
                            border-radius: 4px;
                        }
                        @include smartphone-vertical {
                            width: 69px;
                            height: 40px;
                            border-radius: 4px;
                        }
                    }

                    &-content {
                        display: flex;
                        flex-direction: column;
                        margin-left: 16px;
                        width: 100%;
                        min-width: 0;
                        @include tablet-vertical {
                            margin-left: 14px;
                        }
                        @include smartphone-horizontal {
                            align-items: center;
                            flex-direction: row;
                            margin-left: 12px;
                            margin-right: 6px;
                        }
                        @include smartphone-vertical {
                            margin-left: 14px;
                        }
                    }

                    &-name {
                        flex-shrink: 0;
                        font-size: 18px;
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        @include tablet-vertical {
                            font-size: 15.5px;
                        }
                        @include smartphone-horizontal {
                            font-size: 15px;
                            margin-right: 8px;
                        }
                        @include smartphone-vertical {
                            font-size: 15.5px;
                        }
                    }

                    &-status {
                        display: flex;
                        position: relative;
                        top: -1.5px;
                        flex-shrink: 0;
                        align-items: center;
                        margin-top: 2px;
                        font-size: 11.5px;
                        color: rgb(var(--v-theme-text-darken-1));
                        @include tablet-vertical {
                            margin-top: 2px;
                            font-size: 11px;
                        }
                        @include smartphone-horizontal {
                            margin-top: 3px;
                            margin-left: auto;
                            font-size: 12px;
                        }
                        @include smartphone-vertical {
                            margin-top: 2px;
                            font-size: 11px;
                        }

                        &-force, &-viewers {
                            display: flex;
                            align-items: center;
                            @include smartphone-horizontal {
                                span:nth-child(2), span:nth-child(4) {
                                    display: none;
                                }
                            }
                        }

                        @include smartphone-horizontal {
                            &-viewers {
                                margin-left: 12px !important;
                            }
                        }

                        &-force--festival {
                            color: #E7556E;
                        }
                        &-force--so-many {
                            color: #E76B55;
                        }
                        &-force--many {
                            color: #E7A355;
                        }
                    }

                    &-pin {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-shrink: 0;
                        position: absolute;
                        top: 13px;
                        right: 15px;
                        width: 34px;
                        height: 34px;
                        padding: 4px;
                        color: rgb(var(--v-theme-text-darken-1));
                        border-radius: 50%;
                        transition: color 0.15s ease, background-color 0.15s ease;
                        user-select: none;
                        @include smartphone-horizontal {
                            position: relative;
                            top: -1px;
                            top: -5px;
                            right: -5px;
                        }

                        &:before {
                            content: "";
                            position: absolute;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            border-radius: inherit;
                            background-color: currentColor;
                            color: inherit;
                            opacity: 0;
                            transition: opacity 0.2s cubic-bezier(0.4, 0, 0.6, 1);
                            pointer-events: none;
                        }
                        &:hover {
                            color: rgb(var(--v-theme-text));
                            &:before {
                                opacity: 0.15;
                            }
                        }
                        &--pinned {
                            color: rgb(var(--v-theme-primary));
                            &:hover{
                                color: rgb(var(--v-theme-primary-lighten-1));
                            }
                            @include smartphone-horizontal {
                                color: rgb(var(--v-theme-secondary-lighten-2));
                                &:hover{
                                    color: rgb(var(--v-theme-secondary-lighten-3));
                                }
                            }
                            @include smartphone-vertical {
                                color: rgb(var(--v-theme-secondary-lighten-2));
                                &:hover{
                                    color: rgb(var(--v-theme-secondary-lighten-3));
                                }
                            }
                        }
                    }
                }

                .channel__program-present {
                    display: flex;
                    flex-direction: column;

                    &-title-wrapper {
                        margin-top: 14px;

                        @include tablet-vertical {
                            display: flex;
                            flex-direction: column;
                            margin-top: 8px;
                        }
                        @include smartphone-horizontal {
                            display: flex;
                            align-items: center;
                            margin-top: 8px;
                        }
                        @include smartphone-vertical {
                            display: flex;
                            flex-direction: column;
                            margin-top: 8px;
                        }
                    }

                    &-title {
                        display: -webkit-box;
                        font-size: 16px;
                        font-weight: 700;
                        font-feature-settings: "palt" 1;  // æ–‡å­—è©°ã‚
                        letter-spacing: 0.07em;  // å­—é–“ã‚’å°‘ã—ç©ºã‘ã‚‹
                        overflow: hidden;
                        -webkit-line-clamp: 1;  // 1è¡Œã¾ã§ã«åˆ¶é™
                        -webkit-box-orient: vertical;
                        @include tablet-vertical {
                            font-size: 14px;
                        }
                        @include smartphone-horizontal {
                            font-size: 14px;
                            -webkit-line-clamp: 1;  // 1è¡Œã¾ã§ã«åˆ¶é™
                        }
                        @include smartphone-vertical {
                            font-size: 14px;
                            -webkit-line-clamp: 1;  // 1è¡Œã¾ã§ã«åˆ¶é™
                        }
                    }

                    &-time {
                        margin-top: 4px;
                        color: rgb(var(--v-theme-text-darken-1));
                        font-size: 13.5px;
                        @include tablet-vertical {
                            flex-shrink: 0;
                            margin-top: 2px;
                            font-size: 13px;
                        }
                        @include smartphone-horizontal {
                            flex-shrink: 0;
                            margin-top: 0px;
                            margin-left: auto;
                            padding-left: 10px;
                            font-size: 12px;
                        }
                        @include smartphone-horizontal-short {
                            font-size: 11px;
                            padding-left: 6px;
                        }
                        @include smartphone-vertical {
                            flex-shrink: 0;
                            margin-top: 1px;
                            font-size: 12px;
                        }
                    }

                    &-description {
                        display: -webkit-box;
                        margin-top: 6px;
                        color: rgb(var(--v-theme-text-darken-1));
                        font-size: 10.5px;
                        line-height: 175%;
                        overflow-wrap: break-word;
                        font-feature-settings: "palt" 1;  // æ–‡å­—è©°ã‚
                        letter-spacing: 0.07em;  // å­—é–“ã‚’å°‘ã—ç©ºã‘ã‚‹
                        overflow: hidden;
                        -webkit-line-clamp: 3;  // 3è¡Œã¾ã§ã«åˆ¶é™
                        -webkit-box-orient: vertical;
                        @include tablet-vertical {
                            margin-top: 4px;
                            font-size: 11px;
                            line-height: 155%;
                            -webkit-line-clamp: 2;  // 2è¡Œã¾ã§ã«åˆ¶é™
                        }
                        @include smartphone-horizontal {
                            margin-top: 3px;
                            font-size: 10px;
                            line-height: 160%;
                            -webkit-line-clamp: 2;  // 2è¡Œã¾ã§ã«åˆ¶é™
                        }
                        @include smartphone-vertical {
                            margin-top: 4px;
                            font-size: 10px;
                            line-height: 155%;
                            -webkit-line-clamp: 2;  // 2è¡Œã¾ã§ã«åˆ¶é™
                        }
                    }
                }

                .channel__program-following {
                    display: flex;
                    flex-direction: column;
                    color: rgb(var(--v-theme-text));
                    font-size: 12.5px;
                    // 1åˆ—è¡¨ç¤º
                    @media (max-width: 1007.9px) {
                        margin-top: 6px;
                    }
                    @include smartphone-horizontal {
                        flex-direction: row;
                        margin-top: 4px;
                        font-size: 12px;
                    }
                    @include smartphone-vertical {
                        margin-top: 4px;
                        font-size: 12px;
                    }

                    &-title {
                        display: flex;
                        align-items: center;
                        min-width: 0;  // magic!

                        &-decorate {
                            flex-shrink: 0;
                            font-weight: bold;
                        }
                        &-icon {
                            flex-shrink: 0;
                            margin-left: 3px;
                        }
                        &-text {
                            margin-left: 2px;
                            white-space: nowrap;
                            text-overflow: ellipsis;  // ã¯ã¿å‡ºãŸéƒ¨åˆ†ã‚’ â€¦ ã§çœç•¥
                            overflow: hidden;
                        }
                    }
                    &-time {
                        color: rgb(var(--v-theme-text-darken-1));
                        @include smartphone-horizontal {
                            flex-shrink: 0;
                            margin-left: auto;
                            padding-left: 8px;
                            font-size: 11.5px;
                        }
                        @include smartphone-horizontal-short {
                            font-size: 11px;
                            padding-left: 6px;
                        }
                        @include smartphone-vertical {
                            flex-shrink: 0;
                            font-size: 11.5px;
                        }
                    }
                }

                .channel__progressbar {
                    position: absolute;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    height: 4px;
                    background: rgb(var(--v-theme-gray));

                    &-progress {
                        height: 4px;
                        background: rgb(var(--v-theme-primary));
                        transition: width 0.3s;
                    }
                }
            }
        }
    }

    .pinned-container {
        br {
            display: none;
        }
        @include tablet-vertical {
            h2 {
                font-size: 21px !important;
            }
            div {
                font-size: 12.5px !important;
                text-align: center;
            }
        }
        @include smartphone-horizontal {
            h2 {
                font-size: 21px !important;
            }
            div {
                font-size: 13px !important;
                text-align: center;
                .mt-4 {
                    margin-top: 12px !important;
                }
                svg {
                    width: 16px;
                }
            }
        }
        @include smartphone-horizontal-short {
            h2 {
                font-size: 16px !important;
            }
            div {
                font-size: 10.5px !important;
                .mt-4 {
                    margin-top: 8px !important;
                }
            }
        }
        @include smartphone-vertical {
            br {
                display: inline;
            }
            h2 {
                font-size: 22px !important;
                text-align: center;
            }
            div {
                font-size: 15px !important;
                text-align: center;
                .mt-4 {
                    margin-top: 8px !important;
                }
                svg {
                    width: 20px;
                }
            }
        }
    }
}

</style>
